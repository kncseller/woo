(function(win) {
    var func ={};
    function send(data){
        (win.opener||win.parent).postMessage(JSON.stringify(data), "*" );
    }
    win.native={
        on : function(e,f){
            var data = {
                native:e,
                id:e
            };
            func[e] = [f,data];

            send(data);
            return this;
        },
        call : function(data,f){
            data.id = Date.now();
            func[data.id] = [f,data];
 
            send(data);
            return this;
        }
    };
    win.addEventListener("message", function(event){
        var data =event.data;
        if (data && data.native && data.response && data.id) {
             if(typeof func[data.id]=="function"){ 
                var who = {parent:event.source,data:data};
                func[data.id].call(who,data.response);
             }
        }
    },true);
    
})(window);
 (function(win){
  var key =window.global.user_sesion;
  win.storage = function(k,v) { 
     if(v===undefined){
        var a = win.localStorage.getItem(key+k);
       try{
        a= JSON.parse(a);
       }catch(a){}
       return a;
     }
     win.localStorage.setItem(key+k,typeof v=="object"?JSON.stringify(v):v);
  };

  win.clearStorage = function(k) { 
 
  };
  win.deleteStorage = function(k) { 
    
     win.localStorage.removeItem(key+k); 
  };

  win.StorageObject = function(k,def) { 
      
     var data =storage(k);
     if(!data){
       data = def||{};
     } 

     data.length = function(){
          return this.toArray().length;
        };
     data.data = function(){
        return JSON.parse(JSON.stringify(this));
     };
     data.filter = function(f){
        for(var i in this){
            if(typeof this[i]=="function")break;
            f(this[i]);
        }
     };

     data.map = function(f){
        var s =[];
        for(var i in this){
            if(typeof this[i] !="function"){
                s.push(f(this[i]));
            }
           
        }
        return s;
     };
     data.toArray = function(){
        return Object.values(this.data());
     };
     data.toKeys = function(){
        return Object.keys(this.data());
     };    
     data.delete = function(n){
           if(this[n]){
             delete this[n];
           }
           return this;
        };
      data.save = function(){
         
         storage(k,this);
         return this;
      };
     

     return data;
  };

  win.CreateStorage = function(k,def) { 
      
     var data =storage(k);
     if(!data){
       data = def||{};
     } 

     return {
        length : function(){
          return Object.prototype.toString.call(data) === '[object Array]' ? data.length:Object.values(data).length;
        },

        get : function(k){
           return k?data[k]:data;
        },
        set : function(k,v){
           data[k] = v;
           return this;
        },
        delete : function(k,v){
           if(data[k]){
             delete data[k];
           }
           return this;
        },
        save : function(o){
           data = o||data;
           storage(k,data);
           return this;
        }
     }
  };

})(window);
function getUA() {
      let device = "Unknown";
      const ua = {
          "Generic Linux": /Linux/i,
          "Android": /Android/i,
          "BlackBerry": /BlackBerry/i,
          "Bluebird": /EF500/i,
          "Chrome OS": /CrOS/i,
          "Datalogic": /DL-AXIS/i,
          "Honeywell": /CT50/i,
          "iPad": /iPad/i,
          "iPhone": /iPhone/i,
          "iPod": /iPod/i,
          "macOS": /Macintosh/i,
          "Windows": /IEMobile|Windows/i,
          "Zebra": /TC70|TC55/i,
      }
      Object.keys(ua).map(v => navigator.userAgent.match(ua[v]) && (device = v));
      return device;
}
String.prototype.AClick = function(onclick){
    var ele = this.toString();
    AClick(ele,onclick);
};
function AClick(selector, onclick, timer) {

    if (!timer) timer = 200;

    if (!(('ontouchstart'in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0))) {

        $(document).on('click', selector, onclick);

        return;

    }

    $(document).on("touchstart", selector, function(e) {

        var swipedir = 'click',
        startX,
        startY,
        distX,
        distY,
        threshold = 50, //required min distance traveled to be considered swipe

        restraint = 100, // maximum distance allowed at the same time in perpendicular direction

        allowedTime = timer, // maximum time allowed to travel that distance

        elapsedTime,
        startTime, beginTime = new Date().getTime();

        $(this).on("touchmove", function(e) {

            var touchobj = getE(e);

            swipedir = 'none';

            dist = 0;

            startX = touchobj.pageX;

            startY = touchobj.pageY;

            startTime = new Date().getTime();
            // record time when finger first makes contact with surface

            // e.preventDefault();

        });

        $(this).on("touchend", function(e) {

            var touchobj = getE(e);

            distX = touchobj.pageX - startX;
            // get horizontal dist traveled by finger while in contact with surface

            distY = touchobj.pageY - startY;
            // get vertical dist traveled by finger while in contact with surface

            elapsedTime = new Date().getTime() - startTime;
            // get time elapsed

            if (elapsedTime <= allowedTime) {
                // first condition for awipe met

                if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) {
                    // 2nd condition for horizontal swipe met

                    swipedir = (distX < 0) ? 'left' : 'right';
                    // if dist traveled is negative, it indicates left swipe

                }
                else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint) {
                    // 2nd condition for vertical swipe met

                    swipedir = (distY < 0) ? 'up' : 'down';
                    // if dist traveled is negative, it indicates up swipe

                }

            } else {

                if (this.stopClicked) {

                    var me = this;

                    setTimeout(function() {

                        me.stopClicked = false;

                    }, 300);

                } else {

                    if (new Date().getTime() - beginTime < allowedTime) {

                        onclick.call(this, e);

                    }

                }

            }

            $(this).off("touchmove touchend");

        });

    });

}

$.fn.AClick = function(f, timer) {

    return this.each(function(i, v) {

        AClick(this, f, timer);

    });

}
;

var AClickTrigger = function(ele) {

    if (!"ontouchstart"in document.documentElement) {

        $(ele).trigger('click');

    } else {

        $(ele).trigger('touchend');

    }

};

$.fn.AClickTrigger = function() {

    return this.each(function(i, v) {

        AClickTrigger(this);

    });

}
;
/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/chart.js@4.4.3/dist/chart.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,(function(){"use strict";var t=Object.freeze({__proto__:null,get Colors(){return Go},get Decimation(){return Qo},get Filler(){return ma},get Legend(){return ya},get SubTitle(){return ka},get Title(){return Ma},get Tooltip(){return Ba}});function e(){}const i=(()=>{let t=0;return()=>t++})();function s(t){return null==t}function n(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function o(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function r(t,e){return a(t)?t:e}function l(t,e){return void 0===t?e:t}const h=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,c=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function d(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function u(t,e,i,s){let a,r,l;if(n(t))if(r=t.length,s)for(a=r-1;a>=0;a--)e.call(i,t[a],a);else for(a=0;a<r;a++)e.call(i,t[a],a);else if(o(t))for(l=Object.keys(t),r=l.length,a=0;a<r;a++)e.call(i,t[l[a]],l[a])}function f(t,e){let i,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function g(t){if(n(t))return t.map(g);if(o(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=g(t[i[n]]);return e}return t}function p(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function m(t,e,i,s){if(!p(t))return;const n=e[t],a=i[t];o(n)&&o(a)?x(n,a,s):e[t]=g(a)}function x(t,e,i){const s=n(e)?e:[e],a=s.length;if(!o(t))return t;const r=(i=i||{}).merger||m;let l;for(let e=0;e<a;++e){if(l=s[e],!o(l))continue;const n=Object.keys(l);for(let e=0,s=n.length;e<s;++e)r(n[e],t,l,i)}return t}function b(t,e){return x(t,e,{merger:_})}function _(t,e,i){if(!p(t))return;const s=e[t],n=i[t];o(s)&&o(n)?b(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=g(n))}const y={"":t=>t,x:t=>t.x,y:t=>t.y};function v(t){const e=t.split("."),i=[];let s="";for(const t of e)s+=t,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function M(t,e){const i=y[e]||(y[e]=function(t){const e=v(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function w(t){return t.charAt(0).toUpperCase()+t.slice(1)}const k=t=>void 0!==t,S=t=>"function"==typeof t,P=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function D(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const C=Math.PI,O=2*C,A=O+C,T=Number.POSITIVE_INFINITY,L=C/180,E=C/2,R=C/4,I=2*C/3,z=Math.log10,F=Math.sign;function V(t,e,i){return Math.abs(t-e)<i}function B(t){const e=Math.round(t);t=V(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(z(t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function W(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s==0&&(e.push(s),e.push(t/s));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function N(t){return!isNaN(parseFloat(t))&&isFinite(t)}function H(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function j(t,e,i){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function $(t){return t*(C/180)}function Y(t){return t*(180/C)}function U(t){if(!a(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function X(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*C&&(o+=O),{angle:o,distance:n}}function q(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K(t,e){return(t-e+A)%O-C}function G(t){return(t%O+O)%O}function Z(t,e,i,s){const n=G(t),o=G(e),a=G(i),r=G(o-n),l=G(a-n),h=G(n-o),c=G(n-a);return n===o||n===a||s&&o===a||r>l&&h<c}function J(t,e,i){return Math.max(e,Math.min(i,t))}function Q(t){return J(t,-32768,32767)}function tt(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function et(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const it=(t,e,i,s)=>et(t,i,s?s=>{const n=t[s][e];return n<i||n===i&&t[s+1][e]===i}:s=>t[s][e]<i),st=(t,e,i)=>et(t,i,(s=>t[s][e]>=i));function nt(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}const ot=["push","pop","shift","splice","unshift"];function at(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ot.forEach((e=>{const i="_onData"+w(e),s=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const n=s.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[i]&&t[i](...e)})),n}})})))}function rt(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);-1!==n&&s.splice(n,1),s.length>0||(ot.forEach((e=>{delete t[e]})),delete t._chartjs)}function lt(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ht="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function ct(t,e){let i=[],s=!1;return function(...n){i=n,s||(s=!0,ht.call(window,(()=>{s=!1,t.apply(e,i)})))}}function dt(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}const ut=t=>"start"===t?"left":"end"===t?"right":"center",ft=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,gt=(t,e,i,s)=>t===(s?"left":"right")?i:"center"===t?(e+i)/2:e;function pt(t,e,i){const s=e.length;let n=0,o=s;if(t._sorted){const{iScale:a,_parsed:r}=t,l=a.axis,{min:h,max:c,minDefined:d,maxDefined:u}=a.getUserBounds();d&&(n=J(Math.min(it(r,l,h).lo,i?s:it(e,l,a.getPixelForValue(h)).lo),0,s-1)),o=u?J(Math.max(it(r,a.axis,c,!0).hi+1,i?0:it(e,l,a.getPixelForValue(c),!0).hi+1),n,s)-n:s-n}return{start:n,count:o}}function mt(t){const{xScale:e,yScale:i,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=n,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),o}class xt{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=e.listeners[s],o=e.duration;n.forEach((s=>s({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=ht.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,s)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,a=n.length-1,r=!1;for(;a>=0;--a)o=n[a],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),r=!0):(n[a]=n[n.length-1],n.pop());r&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bt=new xt;
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function _t(t){return t+.5|0}const yt=(t,e,i)=>Math.max(Math.min(t,i),e);function vt(t){return yt(_t(2.55*t),0,255)}function Mt(t){return yt(_t(255*t),0,255)}function wt(t){return yt(_t(t/2.55)/100,0,1)}function kt(t){return yt(_t(100*t),0,100)}const St={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pt=[..."0123456789ABCDEF"],Dt=t=>Pt[15&t],Ct=t=>Pt[(240&t)>>4]+Pt[15&t],Ot=t=>(240&t)>>4==(15&t);function At(t){var e=(t=>Ot(t.r)&&Ot(t.g)&&Ot(t.b)&&Ot(t.a))(t)?Dt:Ct;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Tt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Lt(t,e,i){const s=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-s*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function Et(t,e,i){const s=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function Rt(t,e,i){const s=Lt(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function It(t){const e=t.r/255,i=t.g/255,s=t.b/255,n=Math.max(e,i,s),o=Math.min(e,i,s),a=(n+o)/2;let r,l,h;return n!==o&&(h=n-o,l=a>.5?h/(2-n-o):h/(n+o),r=function(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}(e,i,s,h,n),r=60*r+.5),[0|r,l||0,a]}function zt(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(Mt)}function Ft(t,e,i){return zt(Lt,t,e,i)}function Vt(t){return(t%360+360)%360}function Bt(t){const e=Tt.exec(t);let i,s=255;if(!e)return;e[5]!==i&&(s=e[6]?vt(+e[5]):Mt(+e[5]));const n=Vt(+e[2]),o=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return zt(Rt,t,e,i)}(n,o,a):"hsv"===e[1]?function(t,e,i){return zt(Et,t,e,i)}(n,o,a):Ft(n,o,a),{r:i[0],g:i[1],b:i[2],a:s}}const Wt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ht;function jt(t){Ht||(Ht=function(){const t={},e=Object.keys(Nt),i=Object.keys(Wt);let s,n,o,a,r;for(s=0;s<e.length;s++){for(a=r=e[s],n=0;n<i.length;n++)o=i[n],r=r.replace(o,Wt[o]);o=parseInt(Nt[a],16),t[r]=[o>>16&255,o>>8&255,255&o]}return t}(),Ht.transparent=[0,0,0,0]);const e=Ht[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const $t=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Yt=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ut=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Xt(t,e,i){if(t){let s=It(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),s=Ft(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function qt(t,e){return t?Object.assign(e||{},t):t}function Kt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Mt(t[3]))):(e=qt(t,{r:0,g:0,b:0,a:1})).a=Mt(e.a),e}function Gt(t){return"r"===t.charAt(0)?function(t){const e=$t.exec(t);let i,s,n,o=255;if(e){if(e[7]!==i){const t=+e[7];o=e[8]?vt(t):yt(255*t,0,255)}return i=+e[1],s=+e[3],n=+e[5],i=255&(e[2]?vt(i):yt(i,0,255)),s=255&(e[4]?vt(s):yt(s,0,255)),n=255&(e[6]?vt(n):yt(n,0,255)),{r:i,g:s,b:n,a:o}}}(t):Bt(t)}class Zt{constructor(t){if(t instanceof Zt)return t;const e=typeof t;let i;var s,n,o;"object"===e?i=Kt(t):"string"===e&&(o=(s=t).length,"#"===s[0]&&(4===o||5===o?n={r:255&17*St[s[1]],g:255&17*St[s[2]],b:255&17*St[s[3]],a:5===o?17*St[s[4]]:255}:7!==o&&9!==o||(n={r:St[s[1]]<<4|St[s[2]],g:St[s[3]]<<4|St[s[4]],b:St[s[5]]<<4|St[s[6]],a:9===o?St[s[7]]<<4|St[s[8]]:255})),i=n||jt(t)||Gt(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=qt(this._rgb);return t&&(t.a=wt(t.a)),t}set rgb(t){this._rgb=Kt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?At(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=It(t),i=e[0],s=kt(e[1]),n=kt(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${n}%, ${wt(t.a)})`:`hsl(${i}, ${s}%, ${n}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let n;const o=e===n?.5:e,a=2*o-1,r=i.a-s.a,l=((a*r==-1?a:(a+r)/(1+a*r))+1)/2;n=1-l,i.r=255&l*i.r+n*s.r+.5,i.g=255&l*i.g+n*s.g+.5,i.b=255&l*i.b+n*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const s=Ut(wt(t.r)),n=Ut(wt(t.g)),o=Ut(wt(t.b));return{r:Mt(Yt(s+i*(Ut(wt(e.r))-s))),g:Mt(Yt(n+i*(Ut(wt(e.g))-n))),b:Mt(Yt(o+i*(Ut(wt(e.b))-o))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Zt(this.rgb)}alpha(t){return this._rgb.a=Mt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=_t(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xt(this._rgb,2,t),this}darken(t){return Xt(this._rgb,2,-t),this}saturate(t){return Xt(this._rgb,1,t),this}desaturate(t){return Xt(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=It(t);i[0]=Vt(i[0]+e),i=Ft(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function Jt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Qt(t){return Jt(t)?t:new Zt(t)}function te(t){return Jt(t)?t:new Zt(t).saturate(.5).darken(.1).hexString()}const ee=["x","y","borderWidth","radius","tension"],ie=["color","borderColor","backgroundColor"];const se=new Map;function ne(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let s=se.get(i);return s||(s=new Intl.NumberFormat(t,e),se.set(i,s)),s}(e,i).format(t)}const oe={values:t=>n(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=z(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),ne(t,s,l)},logarithmic(t,e,i){if(0===t)return"0";const s=i[e].significand||t/Math.pow(10,Math.floor(z(t)));return[1,2,3,5,10,15].includes(s)||e>.8*i.length?oe.numeric.call(this,t,e,i):""}};var ae={formatters:oe};const re=Object.create(null),le=Object.create(null);function he(t,e){if(!e)return t;const i=e.split(".");for(let e=0,s=i.length;e<s;++e){const s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function ce(t,e,i){return"string"==typeof e?x(he(t,e),i):x(he(t,""),e)}class de{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>te(e.backgroundColor),this.hoverBorderColor=(t,e)=>te(e.borderColor),this.hoverColor=(t,e)=>te(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ce(this,t,e)}get(t){return he(this,t)}describe(t,e){return ce(le,t,e)}override(t,e){return ce(re,t,e)}route(t,e,i,s){const n=he(this,t),a=he(this,i),r="_"+e;Object.defineProperties(n,{[r]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[r],e=a[s];return o(t)?Object.assign({},e,t):l(t,e)},set(t){this[r]=t}}})}apply(t){t.forEach((t=>t(this)))}}var ue=new de({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:ie},numbers:{type:"number",properties:ee}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ae.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function fe(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ge(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function pe(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}const me=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function xe(t,e){return me(t).getPropertyValue(e)}const be=["top","right","bottom","left"];function _e(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=be[n];s[o]=parseFloat(t[e+"-"+o+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const ye=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function ve(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=me(i),o="border-box"===n.boxSizing,a=_e(n,"padding"),r=_e(n,"border","width"),{x:l,y:h,box:c}=function(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:o}=s;let a,r,l=!1;if(ye(n,o,t.target))a=n,r=o;else{const t=e.getBoundingClientRect();a=s.clientX-t.left,r=s.clientY-t.top,l=!0}return{x:a,y:r,box:l}}(t,i),d=a.left+(c&&r.left),u=a.top+(c&&r.top);let{width:f,height:g}=e;return o&&(f-=a.width+r.width,g-=a.height+r.height),{x:Math.round((l-d)/f*i.width/s),y:Math.round((h-u)/g*i.height/s)}}const Me=t=>Math.round(10*t)/10;function we(t,e,i,s){const n=me(t),o=_e(n,"margin"),a=pe(n.maxWidth,t,"clientWidth")||T,r=pe(n.maxHeight,t,"clientHeight")||T,l=function(t,e,i){let s,n;if(void 0===e||void 0===i){const o=t&&ge(t);if(o){const t=o.getBoundingClientRect(),a=me(o),r=_e(a,"border","width"),l=_e(a,"padding");e=t.width-l.width-r.width,i=t.height-l.height-r.height,s=pe(a.maxWidth,o,"clientWidth"),n=pe(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||T,maxHeight:n||T}}(t,e,i);let{width:h,height:c}=l;if("content-box"===n.boxSizing){const t=_e(n,"border","width"),e=_e(n,"padding");h-=e.width+t.width,c-=e.height+t.height}h=Math.max(0,h-o.width),c=Math.max(0,s?h/s:c-o.height),h=Me(Math.min(h,a,l.maxWidth)),c=Me(Math.min(c,r,l.maxHeight)),h&&!c&&(c=Me(h/2));return(void 0!==e||void 0!==i)&&s&&l.height&&c>l.height&&(c=l.height,h=Me(Math.floor(c*s))),{width:h,height:c}}function ke(t,e,i){const s=e||1,n=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||a.height!==n||a.width!==o)&&(t.currentDevicePixelRatio=s,a.height=n,a.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0)}const Se=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};fe()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function Pe(t,e){const i=xe(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function De(t){return!t||s(t.size)||s(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ce(t,e,i,s,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,i.push(n)),o>s&&(s=o),s}function Oe(t,e,i,s){let o=(s=s||{}).data=s.data||{},a=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(o=s.data={},a=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let r=0;const l=i.length;let h,c,d,u,f;for(h=0;h<l;h++)if(u=i[h],null==u||n(u)){if(n(u))for(c=0,d=u.length;c<d;c++)f=u[c],null==f||n(f)||(r=Ce(t,o,a,r,f))}else r=Ce(t,o,a,r,u);t.restore();const g=a.length/2;if(g>i.length){for(h=0;h<g;h++)delete o[a[h]];a.splice(0,g)}return r}function Ae(t,e,i){const s=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function Te(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Le(t,e,i,s){Ee(t,e,i,s,null)}function Ee(t,e,i,s,n){let o,a,r,l,h,c,d,u;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*L;if(f&&"object"==typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,s),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:n?t.ellipse(i,s,n/2,p,0,0,O):t.arc(i,s,p,0,O),t.closePath();break;case"triangle":c=n?n/2:p,t.moveTo(i+Math.sin(m)*c,s-Math.cos(m)*p),m+=I,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*p),m+=I,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*p),t.closePath();break;case"rectRounded":h=.516*p,l=p-h,a=Math.cos(m+R)*l,d=Math.cos(m+R)*(n?n/2-h:l),r=Math.sin(m+R)*l,u=Math.sin(m+R)*(n?n/2-h:l),t.arc(i-d,s-r,h,m-C,m-E),t.arc(i+u,s-a,h,m-E,m),t.arc(i+d,s+r,h,m,m+E),t.arc(i-u,s+a,h,m+E,m+C),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,c=n?n/2:l,t.rect(i-c,s-l,2*c,2*l);break}m+=R;case"rectRot":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+u,s-a),t.lineTo(i+d,s+r),t.lineTo(i-u,s+a),t.closePath();break;case"crossRot":m+=R;case"cross":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a);break;case"star":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a),m+=R,d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a);break;case"line":a=n?n/2:Math.cos(m)*p,r=Math.sin(m)*p,t.moveTo(i-a,s-r),t.lineTo(i+a,s+r);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(m)*(n?n/2:p),s+Math.sin(m)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Re(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Ie(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ze(t){t.restore()}function Fe(t,e,i,s,n){if(!e)return t.lineTo(i.x,i.y);if("middle"===n){const s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===n!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Ve(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Be(t,e,i,s,n){if(n.strikethrough||n.underline){const o=t.measureText(s),a=e-o.actualBoundingBoxLeft,r=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,h=i+o.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,c),t.lineTo(r,c),t.stroke()}}function We(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function Ne(t,e,i,o,a,r={}){const l=n(e)?e:[e],h=r.strokeWidth>0&&""!==r.strokeColor;let c,d;for(t.save(),t.font=a.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),s(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),c=0;c<l.length;++c)d=l[c],r.backdrop&&We(t,r.backdrop),h&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),s(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(d,i,o,r.maxWidth)),t.fillText(d,i,o,r.maxWidth),Be(t,i,o,d,r),o+=Number(a.lineHeight);t.restore()}function He(t,e){const{x:i,y:s,w:n,h:o,radius:a}=e;t.arc(i+a.topLeft,s+a.topLeft,a.topLeft,1.5*C,C,!0),t.lineTo(i,s+o-a.bottomLeft),t.arc(i+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,C,E,!0),t.lineTo(i+n-a.bottomRight,s+o),t.arc(i+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,E,0,!0),t.lineTo(i+n,s+a.topRight),t.arc(i+n-a.topRight,s+a.topRight,a.topRight,0,-E,!0),t.lineTo(i+a.topLeft,s)}function je(t,e=[""],i,s,n=(()=>t[0])){const o=i||t;void 0===s&&(s=ti("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:n,override:i=>je([i,...t],e,o,s)};return new Proxy(a,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>qe(i,s,(()=>function(t,e,i,s){let n;for(const o of e)if(n=ti(Ue(o,t),i),void 0!==n)return Xe(t,n)?Je(i,s,t,n):n}(s,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>ei(t).includes(e),ownKeys:t=>ei(t),set(t,e,i){const s=t._storage||(t._storage=n());return t[e]=s[e]=i,delete t._keys,!0}})}function $e(t,e,i,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Ye(t,s),setContext:e=>$e(t,e,i,s),override:n=>$e(t.override(n),e,i,s)};return new Proxy(a,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>qe(t,e,(()=>function(t,e,i){const{_proxy:s,_context:a,_subProxy:r,_descriptors:l}=t;let h=s[e];S(h)&&l.isScriptable(e)&&(h=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=i;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t);let l=e(o,a||s);r.delete(t),Xe(t,l)&&(l=Je(n._scopes,n,t,l));return l}(e,h,t,i));n(h)&&h.length&&(h=function(t,e,i,s){const{_proxy:n,_context:a,_subProxy:r,_descriptors:l}=i;if(void 0!==a.index&&s(t))return e[a.index%e.length];if(o(e[0])){const i=e,s=n._scopes.filter((t=>t!==i));e=[];for(const o of i){const i=Je(s,n,t,o);e.push($e(i,a,r&&r[t],l))}}return e}(e,h,t,l.isIndexable));Xe(e,h)&&(h=$e(h,a,r&&r[e],l));return h}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function Ye(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:S(i)?i:()=>i,isIndexable:S(s)?s:()=>s}}const Ue=(t,e)=>t?t+w(e):e,Xe=(t,e)=>o(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function qe(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const s=i();return t[e]=s,s}function Ke(t,e,i){return S(t)?t(e,i):t}const Ge=(t,e)=>!0===t?e:"string"==typeof t?M(e,t):void 0;function Ze(t,e,i,s,n){for(const o of e){const e=Ge(i,o);if(e){t.add(e);const o=Ke(e._fallback,i,n);if(void 0!==o&&o!==i&&o!==s)return o}else if(!1===e&&void 0!==s&&i!==s)return null}return!1}function Je(t,e,i,s){const a=e._rootScopes,r=Ke(e._fallback,i,s),l=[...t,...a],h=new Set;h.add(s);let c=Qe(h,l,i,r||i,s);return null!==c&&((void 0===r||r===i||(c=Qe(h,l,r,c,s),null!==c))&&je(Array.from(h),[""],a,r,(()=>function(t,e,i){const s=t._getTarget();e in s||(s[e]={});const a=s[e];if(n(a)&&o(i))return i;return a||{}}(e,i,s))))}function Qe(t,e,i,s,n){for(;i;)i=Ze(t,e,i,s,n);return i}function ti(t,e){for(const i of e){if(!i)continue;const e=i[t];if(void 0!==e)return e}}function ei(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function ii(t,e,i,s){const{iScale:n}=t,{key:o="r"}=this._parsing,a=new Array(s);let r,l,h,c;for(r=0,l=s;r<l;++r)h=r+i,c=e[h],a[r]={r:n.parse(M(c,o),h)};return a}const si=Number.EPSILON||1e-14,ni=(t,e)=>e<t.length&&!t[e].skip&&t[e],oi=t=>"x"===t?"y":"x";function ai(t,e,i,s){const n=t.skip?e:t,o=e,a=i.skip?e:i,r=q(o,n),l=q(a,o);let h=r/(r+l),c=l/(r+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const d=s*h,u=s*c;return{previous:{x:o.x-d*(a.x-n.x),y:o.y-d*(a.y-n.y)},next:{x:o.x+u*(a.x-n.x),y:o.y+u*(a.y-n.y)}}}function ri(t,e="x"){const i=oi(e),s=t.length,n=Array(s).fill(0),o=Array(s);let a,r,l,h=ni(t,0);for(a=0;a<s;++a)if(r=l,l=h,h=ni(t,a+1),l){if(h){const t=h[e]-l[e];n[a]=0!==t?(h[i]-l[i])/t:0}o[a]=r?h?F(n[a-1])!==F(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}!function(t,e,i){const s=t.length;let n,o,a,r,l,h=ni(t,0);for(let c=0;c<s-1;++c)l=h,h=ni(t,c+1),l&&h&&(V(e[c],0,si)?i[c]=i[c+1]=0:(n=i[c]/e[c],o=i[c+1]/e[c],r=Math.pow(n,2)+Math.pow(o,2),r<=9||(a=3/Math.sqrt(r),i[c]=n*a*e[c],i[c+1]=o*a*e[c])))}(t,n,o),function(t,e,i="x"){const s=oi(i),n=t.length;let o,a,r,l=ni(t,0);for(let h=0;h<n;++h){if(a=r,r=l,l=ni(t,h+1),!r)continue;const n=r[i],c=r[s];a&&(o=(n-a[i])/3,r[`cp1${i}`]=n-o,r[`cp1${s}`]=c-o*e[h]),l&&(o=(l[i]-n)/3,r[`cp2${i}`]=n+o,r[`cp2${s}`]=c+o*e[h])}}(t,o,e)}function li(t,e,i){return Math.max(Math.min(t,i),e)}function hi(t,e,i,s,n){let o,a,r,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)ri(t,n);else{let i=s?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)r=t[o],l=ai(i,r,t[Math.min(o+1,a-(s?0:1))%a],e.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,i=r}e.capBezierPoints&&function(t,e){let i,s,n,o,a,r=Re(t[0],e);for(i=0,s=t.length;i<s;++i)a=o,o=r,r=i<s-1&&Re(t[i+1],e),o&&(n=t[i],a&&(n.cp1x=li(n.cp1x,e.left,e.right),n.cp1y=li(n.cp1y,e.top,e.bottom)),r&&(n.cp2x=li(n.cp2x,e.left,e.right),n.cp2y=li(n.cp2y,e.top,e.bottom)))}(t,i)}const ci=t=>0===t||1===t,di=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*O/i),ui=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*O/i)+1,fi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*E),easeOutSine:t=>Math.sin(t*E),easeInOutSine:t=>-.5*(Math.cos(C*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>ci(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ci(t)?t:di(t,.075,.3),easeOutElastic:t=>ci(t)?t:ui(t,.075,.3),easeInOutElastic(t){const e=.1125;return ci(t)?t:t<.5?.5*di(2*t,e,.45):.5+.5*ui(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-fi.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*fi.easeInBounce(2*t):.5*fi.easeOutBounce(2*t-1)+.5};function gi(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function pi(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function mi(t,e,i,s){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=gi(t,n,i),r=gi(n,o,i),l=gi(o,e,i),h=gi(a,r,i),c=gi(r,l,i);return gi(h,c,i)}const xi=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bi=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _i(t,e){const i=(""+t).match(xi);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}const yi=t=>+t||0;function vi(t,e){const i={},s=o(e),n=s?Object.keys(e):e,a=o(t)?s?i=>l(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of n)i[t]=yi(a(t));return i}function Mi(t){return vi(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wi(t){return vi(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ki(t){const e=Mi(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Si(t,e){t=t||{},e=e||ue.font;let i=l(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=l(t.style,e.style);s&&!(""+s).match(bi)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:l(t.family,e.family),lineHeight:_i(l(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:l(t.weight,e.weight),string:""};return n.string=De(n),n}function Pi(t,e,i,s){let o,a,r,l=!0;for(o=0,a=t.length;o<a;++o)if(r=t[o],void 0!==r&&(void 0!==e&&"function"==typeof r&&(r=r(e),l=!1),void 0!==i&&n(r)&&(r=r[i%r.length],l=!1),void 0!==r))return s&&!l&&(s.cacheable=!1),r}function Di(t,e,i){const{min:s,max:n}=t,o=c(e,(n-s)/2),a=(t,e)=>i&&0===t?0:t+e;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function Ci(t,e){return Object.assign(Object.create(t),e)}function Oi(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Ai(t,e){let i,s;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Ti(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Li(t){return"angle"===t?{between:Z,compare:K,normalize:G}:{between:tt,compare:(t,e)=>t-e,normalize:t=>t}}function Ei({start:t,end:e,count:i,loop:s,style:n}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:n}}function Ri(t,e,i){if(!i)return[t];const{property:s,start:n,end:o}=i,a=e.length,{compare:r,between:l,normalize:h}=Li(s),{start:c,end:d,loop:u,style:f}=function(t,e,i){const{property:s,start:n,end:o}=i,{between:a,normalize:r}=Li(s),l=e.length;let h,c,{start:d,end:u,loop:f}=t;if(f){for(d+=l,u+=l,h=0,c=l;h<c&&a(r(e[d%l][s]),n,o);++h)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:f,style:t.style}}(t,e,i),g=[];let p,m,x,b=!1,_=null;const y=()=>b||l(n,x,p)&&0!==r(n,x),v=()=>!b||0===r(o,p)||l(o,x,p);for(let t=c,i=c;t<=d;++t)m=e[t%a],m.skip||(p=h(m[s]),p!==x&&(b=l(p,n,o),null===_&&y()&&(_=0===r(p,n)?t:i),null!==_&&v()&&(g.push(Ei({start:_,end:t,loop:u,count:a,style:f})),_=null),i=t,x=p));return null!==_&&g.push(Ei({start:_,end:d,loop:u,count:a,style:f})),g}function Ii(t,e){const i=[],s=t.segments;for(let n=0;n<s.length;n++){const o=Ri(s[n],t.points,e);o.length&&i.push(...o)}return i}function zi(t,e){const i=t.points,s=t.options.spanGaps,n=i.length;if(!n)return[];const o=!!t._loop,{start:a,end:r}=function(t,e,i,s){let n=0,o=e-1;if(i&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,i&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}(i,n,o,s);if(!0===s)return Fi(t,[{start:a,end:r,loop:o}],i,e);return Fi(t,function(t,e,i,s){const n=t.length,o=[];let a,r=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%n];i.skip||i.stop?l.skip||(s=!1,o.push({start:e%n,end:(a-1)%n,loop:s}),e=r=i.stop?a:null):(r=a,l.skip&&(e=a)),l=i}return null!==r&&o.push({start:e%n,end:r%n,loop:s}),o}(i,a,r<a?r+n:r,!!t._fullLoop&&0===a&&r===n-1),i,e)}function Fi(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){const n=t._chart.getContext(),o=Vi(t.options),{_datasetIndex:a,options:{spanGaps:r}}=t,l=i.length,h=[];let c=o,d=e[0].start,u=d;function f(t,e,s,n){const o=r?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=o;for(;i[e%l].skip;)e+=o;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:s,style:n}),c=n,d=e%l)}}for(const t of e){d=r?d:t.start;let e,o=i[d%l];for(u=d+1;u<=t.end;u++){const r=i[u%l];e=Vi(s.setContext(Ci(n,{type:"segment",p0:o,p1:r,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:a}))),Bi(e,c)&&f(d,u-1,t.loop,c),o=r,c=e}d<u-1&&f(d,u-1,t.loop,c)}return h}(t,e,i,s):e}function Vi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Bi(t,e){if(!e)return!1;const i=[],s=function(t,e){return Jt(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,s)!==JSON.stringify(e,s)}var Wi=Object.freeze({__proto__:null,HALF_PI:E,INFINITY:T,PI:C,PITAU:A,QUARTER_PI:R,RAD_PER_DEG:L,TAU:O,TWO_THIRDS_PI:I,_addGrace:Di,_alignPixel:Ae,_alignStartEnd:ft,_angleBetween:Z,_angleDiff:K,_arrayUnique:lt,_attachContext:$e,_bezierCurveTo:Ve,_bezierInterpolation:mi,_boundSegment:Ri,_boundSegments:Ii,_capitalize:w,_computeSegments:zi,_createResolver:je,_decimalPlaces:U,_deprecated:function(t,e,i,s){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+s+'" instead')},_descriptors:Ye,_elementsEqual:f,_factorize:W,_filterBetween:nt,_getParentNode:ge,_getStartAndCountOfVisiblePoints:pt,_int16Range:Q,_isBetween:tt,_isClickEvent:D,_isDomSupported:fe,_isPointInArea:Re,_limitValue:J,_longestText:Oe,_lookup:et,_lookupByKey:it,_measureText:Ce,_merger:m,_mergerIf:_,_normalizeAngle:G,_parseObjectDataRadialScale:ii,_pointInLine:gi,_readValueToProps:vi,_rlookupByKey:st,_scaleRangesChanged:mt,_setMinAndMaxByKey:j,_splitKey:v,_steppedInterpolation:pi,_steppedLineTo:Fe,_textX:gt,_toLeftRightCenter:ut,_updateBezierControlPoints:hi,addRoundedRectPath:He,almostEquals:V,almostWhole:H,callback:d,clearCanvas:Te,clipArea:Ie,clone:g,color:Qt,createContext:Ci,debounce:dt,defined:k,distanceBetweenPoints:q,drawPoint:Le,drawPointLegend:Ee,each:u,easingEffects:fi,finiteOrDefault:r,fontString:function(t,e,i){return e+" "+t+"px "+i},formatNumber:ne,getAngleFromPoint:X,getHoverColor:te,getMaximumSize:we,getRelativePosition:ve,getRtlAdapter:Oi,getStyle:xe,isArray:n,isFinite:a,isFunction:S,isNullOrUndef:s,isNumber:N,isObject:o,isPatternOrGradient:Jt,listenArrayEvents:at,log10:z,merge:x,mergeIf:b,niceNum:B,noop:e,overrideTextDirection:Ai,readUsedSize:Pe,renderText:Ne,requestAnimFrame:ht,resolve:Pi,resolveObjectKey:M,restoreTextDirection:Ti,retinaScale:ke,setsEqual:P,sign:F,splineCurve:ai,splineCurveMonotone:ri,supportsEventListenerOptions:Se,throttled:ct,toDegrees:Y,toDimension:c,toFont:Si,toFontString:De,toLineHeight:_i,toPadding:ki,toPercentage:h,toRadians:$,toTRBL:Mi,toTRBLCorners:wi,uid:i,unclipArea:ze,unlistenArrayEvents:rt,valueOrDefault:l});function Ni(t,e,i,s){const{controller:n,data:o,_sorted:a}=t,r=n._cachedMeta.iScale;if(r&&e===r.axis&&"r"!==e&&a&&o.length){const t=r._reversePixels?st:it;if(!s)return t(o,e,i);if(n._sharedOptions){const s=o[0],n="function"==typeof s.getRange&&s.getRange(e);if(n){const s=t(o,e,i-n),a=t(o,e,i+n);return{lo:s.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Hi(t,e,i,s,n){const o=t.getSortedVisibleDatasetMetas(),a=i[e];for(let t=0,i=o.length;t<i;++t){const{index:i,data:r}=o[t],{lo:l,hi:h}=Ni(o[t],e,a,n);for(let t=l;t<=h;++t){const e=r[t];e.skip||s(e,i,t)}}}function ji(t,e,i,s,n){const o=[];if(!n&&!t.isPointInArea(e))return o;return Hi(t,i,e,(function(i,a,r){(n||Re(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&o.push({element:i,datasetIndex:a,index:r})}),!0),o}function $i(t,e,i,s,n,o){let a=[];const r=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,s){const n=e?Math.abs(t.x-s.x):0,o=i?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let l=Number.POSITIVE_INFINITY;return Hi(t,i,e,(function(i,h,c){const d=i.inRange(e.x,e.y,n);if(s&&!d)return;const u=i.getCenterPoint(n);if(!(!!o||t.isPointInArea(u))&&!d)return;const f=r(e,u);f<l?(a=[{element:i,datasetIndex:h,index:c}],l=f):f===l&&a.push({element:i,datasetIndex:h,index:c})})),a}function Yi(t,e,i,s,n,o){return o||t.isPointInArea(e)?"r"!==i||s?$i(t,e,i,s,n,o):function(t,e,i,s){let n=[];return Hi(t,i,e,(function(t,i,o){const{startAngle:a,endAngle:r}=t.getProps(["startAngle","endAngle"],s),{angle:l}=X(t,{x:e.x,y:e.y});Z(l,a,r)&&n.push({element:t,datasetIndex:i,index:o})})),n}(t,e,i,n):[]}function Ui(t,e,i,s,n){const o=[],a="x"===i?"inXRange":"inYRange";let r=!1;return Hi(t,i,e,((t,s,l)=>{t[a](e[i],n)&&(o.push({element:t,datasetIndex:s,index:l}),r=r||t.inRange(e.x,e.y,n))})),s&&!r?[]:o}var Xi={evaluateInteractionItems:Hi,modes:{index(t,e,i,s){const n=ve(e,t),o=i.axis||"x",a=i.includeInvisible||!1,r=i.intersect?ji(t,n,o,s,a):Yi(t,n,o,!1,s,a),l=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=r[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,s){const n=ve(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;let r=i.intersect?ji(t,n,o,s,a):Yi(t,n,o,!1,s,a);if(r.length>0){const e=r[0].datasetIndex,i=t.getDatasetMeta(e).data;r=[];for(let t=0;t<i.length;++t)r.push({element:i[t],datasetIndex:e,index:t})}return r},point:(t,e,i,s)=>ji(t,ve(e,t),i.axis||"xy",s,i.includeInvisible||!1),nearest(t,e,i,s){const n=ve(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;return Yi(t,n,o,i.intersect,s,a)},x:(t,e,i,s)=>Ui(t,ve(e,t),"x",i.intersect,s),y:(t,e,i,s)=>Ui(t,ve(e,t),"y",i.intersect,s)}};const qi=["left","top","right","bottom"];function Ki(t,e){return t.filter((t=>t.pos===e))}function Gi(t,e){return t.filter((t=>-1===qi.indexOf(t.pos)&&t.box.axis===e))}function Zi(t,e){return t.sort(((t,i)=>{const s=e?i:t,n=e?t:i;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function Ji(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:s,stackWeight:n}=i;if(!t||!qi.includes(s))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let o,a,r;for(o=0,a=t.length;o<a;++o){r=t[o];const{fullSize:a}=r.box,l=i[r.stack],h=l&&r.stackWeight/l.weight;r.horizontal?(r.width=h?h*s:a&&e.availableWidth,r.height=n):(r.width=s,r.height=h?h*n:a&&e.availableHeight)}return i}function Qi(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function ts(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function es(t,e,i,s){const{pos:n,box:a}=i,r=t.maxPadding;if(!o(n)){i.size&&(t[n]-=i.size);const e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?a.height:a.width),i.size=e.size/e.count,t[n]+=i.size}a.getPadding&&ts(r,a.getPadding());const l=Math.max(0,e.outerWidth-Qi(r,t,"left","right")),h=Math.max(0,e.outerHeight-Qi(r,t,"top","bottom")),c=l!==t.w,d=h!==t.h;return t.w=l,t.h=h,i.horizontal?{same:c,other:d}:{same:d,other:c}}function is(t,e){const i=e.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{s[t]=Math.max(e[t],i[t])})),s}return s(t?["left","right"]:["top","bottom"])}function ss(t,e,i,s){const n=[];let o,a,r,l,h,c;for(o=0,a=t.length,h=0;o<a;++o){r=t[o],l=r.box,l.update(r.width||e.w,r.height||e.h,is(r.horizontal,e));const{same:a,other:d}=es(e,i,r,s);h|=a&&n.length,c=c||d,l.fullSize||n.push(r)}return h&&ss(n,e,i,s)||c}function ns(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function os(t,e,i,s){const n=i.padding;let{x:o,y:a}=e;for(const r of t){const t=r.box,l=s[r.stack]||{count:1,placed:0,weight:1},h=r.stackWeight/l.weight||1;if(r.horizontal){const s=e.w*h,o=l.size||t.height;k(l.start)&&(a=l.start),t.fullSize?ns(t,n.left,a,i.outerWidth-n.right-n.left,o):ns(t,e.left+l.placed,a,s,o),l.start=a,l.placed+=s,a=t.bottom}else{const s=e.h*h,a=l.size||t.width;k(l.start)&&(o=l.start),t.fullSize?ns(t,o,n.top,a,i.outerHeight-n.bottom-n.top):ns(t,o,e.top+l.placed,a,s),l.start=o,l.placed+=s,o=t.right}}e.x=o,e.y=a}var as={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=ki(t.options.layout.padding),o=Math.max(e-n.width,0),a=Math.max(i-n.height,0),r=function(t){const e=function(t){const e=[];let i,s,n,o,a,r;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],({position:o,options:{stack:a,stackWeight:r=1}}=n),e.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return e}(t),i=Zi(e.filter((t=>t.box.fullSize)),!0),s=Zi(Ki(e,"left"),!0),n=Zi(Ki(e,"right")),o=Zi(Ki(e,"top"),!0),a=Zi(Ki(e,"bottom")),r=Gi(e,"x"),l=Gi(e,"y");return{fullSize:i,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:Ki(e,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}(t.boxes),l=r.vertical,h=r.horizontal;u(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),f=Object.assign({},n);ts(f,ki(s));const g=Object.assign({maxPadding:f,w:o,h:a,x:n.left,y:n.top},n),p=Ji(l.concat(h),d);ss(r.fullSize,g,d,p),ss(l,g,d,p),ss(h,g,d,p)&&ss(l,g,d,p),function(t){const e=t.maxPadding;function i(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(g),os(r.leftAndTop,g,d,p),g.x+=g.w,g.y+=g.h,os(r.rightAndBottom,g,d,p),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},u(r.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})}))}};class rs{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class ls extends rs{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hs="$chartjs",cs={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ds=t=>null===t||""===t;const us=!!Se&&{passive:!0};function fs(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,us)}function gs(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function ps(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||gs(i.addedNodes,s),e=e&&!gs(i.removedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function ms(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||gs(i.removedNodes,s),e=e&&!gs(i.addedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const xs=new Map;let bs=0;function _s(){const t=window.devicePixelRatio;t!==bs&&(bs=t,xs.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function ys(t,e,i){const s=t.canvas,n=s&&ge(s);if(!n)return;const o=ct(((t,e)=>{const s=n.clientWidth;i(t,e),s<n.clientWidth&&i()}),window),a=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,s=e.contentRect.height;0===i&&0===s||o(i,s)}));return a.observe(n),function(t,e){xs.size||window.addEventListener("resize",_s),xs.set(t,e)}(t,o),a}function vs(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){xs.delete(t),xs.size||window.removeEventListener("resize",_s)}(t)}function Ms(t,e,i){const s=t.canvas,n=ct((e=>{null!==t.ctx&&i(function(t,e){const i=cs[t.type]||t.type,{x:s,y:n}=ve(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}(e,t))}),t);return function(t,e,i){t&&t.addEventListener(e,i,us)}(s,e,n),n}class ws extends rs{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[hs]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ds(n)){const e=Pe(t,"width");void 0!==e&&(t.width=e)}if(ds(s))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Pe(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hs])return!1;const i=e[hs].initial;["height","width"].forEach((t=>{const n=i[t];s(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e[hs],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),n={attach:ps,detach:ms,resize:ys}[e]||Ms;s[e]=n(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:vs,detach:vs,resize:vs}[e]||fs)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return we(t,e,i,s)}isAttached(t){const e=t&&ge(t);return!(!e||!e.isConnected)}}function ks(t){return!fe()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?ls:ws}var Ss=Object.freeze({__proto__:null,BasePlatform:rs,BasicPlatform:ls,DomPlatform:ws,_detectPlatform:ks});const Ps="transparent",Ds={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const s=Qt(t||Ps),n=s.valid&&Qt(e||Ps);return n&&n.valid?n.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class Cs{constructor(t,e,i,s){const n=e[i];s=Pi([t.to,s,n,t.from]);const o=Pi([t.from,n,s]);this._active=!0,this._fn=t.fn||Ds[t.type||typeof o],this._easing=fi[t.easing]||fi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=Pi([t.to,e,s,t.from]),this._from=Pi([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,n=this._from,o=this._loop,a=this._to;let r;if(this._active=n!==a&&(o||e<i),!this._active)return this._target[s]=a,void this._notify(!0);e<0?this._target[s]=n:(r=e/i%2,r=o&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[s]=this._fn(n,a,r))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class Os{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!o(t))return;const e=Object.keys(ue.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((s=>{const a=t[s];if(!o(a))return;const r={};for(const t of e)r[t]=a[t];(n(a.properties)&&a.properties||[s]).forEach((t=>{t!==s&&i.has(t)||i.set(t,r)}))}))}_animateOptions(t,e){const i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!s)return[];const n=this._createAnimations(s,i);return i.$shared&&function(t,e){const i=[],s=Object.keys(e);for(let e=0;e<s.length;e++){const n=t[s[e]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,s=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let r;for(r=o.length-1;r>=0;--r){const l=o[r];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}const h=e[l];let c=n[l];const d=i.get(l);if(c){if(d&&c.active()){c.update(d,h,a);continue}c.cancel()}d&&d.duration?(n[l]=c=new Cs(d,t,l,h),s.push(c)):t[l]=h}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(bt.add(this._chart,i),!0):void 0}}function As(t,e){const i=t&&t.options||{},s=i.reverse,n=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:s?o:n,end:s?n:o}}function Ts(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=s.length;n<o;++n)i.push(s[n].index);return i}function Ls(t,e,i,s={}){const n=t.keys,o="single"===s.mode;let r,l,h,c;if(null!==e){for(r=0,l=n.length;r<l;++r){if(h=+n[r],h===i){if(s.all)continue;break}c=t.values[h],a(c)&&(o||0===e||F(e)===F(c))&&(e+=c)}return e}}function Es(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function Rs(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function Is(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function zs(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:o,vScale:a,index:r}=s,l=o.axis,h=a.axis,c=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,a,s),d=e.length;let u;for(let t=0;t<d;++t){const i=e[t],{[l]:o,[h]:d}=i;u=(i._stacks||(i._stacks={}))[h]=Rs(n,c,o),u[r]=d,u._top=Is(u,a,!0,s.type),u._bottom=Is(u,a,!1,s.type);(u._visualValues||(u._visualValues={}))[r]=d}}function Fs(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Vs(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}}const Bs=t=>"reset"===t||"none"===t,Ws=(t,e)=>e?t:Object.assign({},t);class Ns{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Es(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Vs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,n=e.xAxisID=l(i.xAxisID,Fs(t,"x")),o=e.yAxisID=l(i.yAxisID,Fs(t,"y")),a=e.rAxisID=l(i.rAxisID,Fs(t,"r")),r=e.indexAxis,h=e.iAxisID=s(r,n,o,a),c=e.vAxisID=s(r,o,n,a);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&rt(this._data,this),t._stacked&&Vs(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(o(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:i,vScale:s}=e,n="x"===i.axis?"x":"y",o="x"===s.axis?"x":"y",a=Object.keys(t),r=new Array(a.length);let l,h,c;for(l=0,h=a.length;l<h;++l)c=a[l],r[l]={[n]:c,[o]:t[c]};return r}(e,t)}else if(i!==e){if(i){rt(i,this);const t=this._cachedMeta;Vs(t),t._parsed=[]}e&&Object.isExtensible(e)&&at(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const n=e._stacked;e._stacked=Es(e.vScale,e),e.stack!==i.stack&&(s=!0,Vs(e),e.stack=i.stack),this._resyncElements(t),(s||n!==e._stacked)&&zs(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:r}=i,l=a.axis;let h,c,d,u=0===t&&e===s.length||i._sorted,f=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,d=s;else{d=n(s[t])?this.parseArrayData(i,s,t,e):o(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const a=()=>null===c[l]||f&&c[l]<f[l];for(h=0;h<e;++h)i._parsed[h+t]=c=d[h],u&&(a()&&(u=!1),f=c);i._sorted=u}r&&zs(this,d)}parsePrimitiveData(t,e,i,s){const{iScale:n,vScale:o}=t,a=n.axis,r=o.axis,l=n.getLabels(),h=n===o,c=new Array(s);let d,u,f;for(d=0,u=s;d<u;++d)f=d+i,c[d]={[a]:h||n.parse(l[f],f),[r]:o.parse(e[f],f)};return c}parseArrayData(t,e,i,s){const{xScale:n,yScale:o}=t,a=new Array(s);let r,l,h,c;for(r=0,l=s;r<l;++r)h=r+i,c=e[h],a[r]={x:n.parse(c[0],h),y:o.parse(c[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:n,yScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(s);let h,c,d,u;for(h=0,c=s;h<c;++h)d=h+i,u=e[d],l[h]={x:n.parse(M(u,a),d),y:o.parse(M(u,r),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,o=e[t.axis];return Ls({keys:Ts(s,!0),values:e._stacks[t.axis]._visualValues},o,n.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let o=null===n?NaN:n;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=Ls(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i.iScale,o=s.length,r=this._getOtherScale(t),l=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Ts(i,!0),values:null})(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(r);let u,f;function g(){f=s[u];const e=f[r.axis];return!a(f[t.axis])||c>e||d<e}for(u=0;u<o&&(g()||(this.updateRangeFromParsed(h,t,f,l),!n));++u);if(n)for(u=o-1;u>=0;--u)if(!g()){this.updateRangeFromParsed(h,t,f,l);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s][t.axis],a(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,s,n;return o(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:!1===t}}(l(this.options.clip,function(t,e,i){if(!1===i)return!1;const s=As(t,i),n=As(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],n=e.chartArea,o=[],a=this._drawStart||0,r=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,n,a,r),h=a;h<a+r;++h){const e=s[h];e.hidden||(e.active&&l?o.push(e):e.draw(t,n))}for(h=0;h<o.length;++h)o[h].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=function(t,e,i){return Ci(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,e){return Ci(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s="active"===e,n=this._cachedDataOpts,o=t+"-"+e,a=n[o],r=this.enableOptionSharing&&k(i);if(a)return Ws(a,r);const l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(ue.elements[t]),f=l.resolveNamedOptions(d,u,(()=>this.getContext(i,s,e)),c);return f.$shared&&(f.$shared=r,n[o]=Object.freeze(Ws(f,r))),f}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,a=n[o];if(a)return a;let r;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(o,this.getContext(t,i,e))}const l=new Os(s,r&&r.animations);return r&&r._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Bs(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,n=this.getSharedOptions(i),o=this.includeOptions(e,n)||n!==s;return this.updateSharedOptions(n,e,i),{sharedOptions:n,includeOptions:o}}updateElement(t,e,i,s){Bs(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Bs(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const n=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const s=i.length,n=e.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,e,i=!0){const s=this._cachedMeta,n=s.data,o=t+e;let a;const r=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(r(n),a=t;a<o;++a)n[a]=new this.dataElementType;this._parsing&&r(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Vs(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Hs{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return N(this.x)&&N(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach((t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),s}}function js(t,e){const i=t.options.ticks,n=function(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}(t),o=Math.min(i.maxTicksLimit||n,n),a=i.major.enabled?function(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}(e):[],r=a.length,l=a[0],h=a[r-1],c=[];if(r>o)return function(t,e,i,s){let n,o=0,a=i[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===a&&(e.push(t[n]),o++,a=i[o*s])}(e,c,a,r/o),c;const d=function(t,e,i){const s=function(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}(t),n=e.length/i;if(!s)return Math.max(n,1);const o=W(s);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>n)return e}return Math.max(n,1)}(a,e,o);if(r>0){let t,i;const n=r>1?Math.round((h-l)/(r-1)):null;for($s(e,c,d,s(n)?0:l-n,l),t=0,i=r-1;t<i;t++)$s(e,c,d,a[t],a[t+1]);return $s(e,c,d,h,s(n)?e.length:h+n),c}return $s(e,c,d),c}function $s(t,e,i,s,n){const o=l(s,0),a=Math.min(l(n,t.length),t.length);let r,h,c,d=0;for(i=Math.ceil(i),n&&(r=n-s,i=r/Math.floor(r/i)),c=o;c<0;)d++,c=Math.round(o+d*i);for(h=Math.max(o,0);h<a;h++)h===c&&(e.push(t[h]),d++,c=Math.round(o+d*i))}const Ys=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,Us=(t,e)=>Math.min(e||t,t);function Xs(t,e){const i=[],s=t.length/e,n=t.length;let o=0;for(;o<n;o+=s)i.push(t[Math.floor(o)]);return i}function qs(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,a=t._endPixel,r=1e-6;let l,h=t.getPixelForTick(n);if(!(i&&(l=1===s?Math.max(h-o,a-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(n-1))/2,h+=n<e?l:-l,h<o-r||h>a+r)))return h}function Ks(t){return t.drawTicks?t.tickLength:0}function Gs(t,e){if(!t.display)return 0;const i=Si(t.font,e),s=ki(t.padding);return(n(t.text)?t.text.length:1)*i.lineHeight+s.height}function Zs(t,e,i){let s=ut(t);return(i&&"right"!==e||!i&&"right"===e)&&(s=(t=>"left"===t?"right":"right"===t?"left":t)(s)),s}class Js extends Hs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=r(t,Number.POSITIVE_INFINITY),e=r(e,Number.NEGATIVE_INFINITY),i=r(i,Number.POSITIVE_INFINITY),s=r(s,Number.NEGATIVE_INFINITY),{min:r(t,i),max:r(e,s),minDefined:a(t),maxDefined:a(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let r=0,l=a.length;r<l;++r)e=a[r].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),o||(s=Math.max(s,e.max));return i=o&&i>s?s:i,s=n&&i>s?i:s,{min:r(i,r(s,i)),max:r(s,r(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){d(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Di(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=a<this.ticks.length;this._convertTicksToLabels(r?Xs(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=js(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){d(this.options.afterUpdate,[this])}beforeSetDimensions(){d(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){d(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),d(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){d(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,n;for(i=0,s=t.length;i<s;i++)n=t[i],n.label=d(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){d(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){d(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Us(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let o,a,r,l=s;if(!this._isVisible()||!e.display||s>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=J(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/i:u/(i-1),c+6>o&&(o=u/(i-(t.offset?.5:1)),a=this.maxHeight-Ks(t.grid)-e.padding-Gs(t.title,this.chart.options.font),r=Math.sqrt(c*c+d*d),l=Y(Math.min(Math.asin(J((h.highest.height+6)/o,-1,1)),Math.asin(J(a/r,-1,1))-Math.asin(J(d/r,-1,1)))),l=Math.max(s,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){d(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){d(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=Gs(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Ks(n)+o):(t.height=this.maxHeight,t.width=Ks(n)+o),i.display&&this.ticks.length){const{first:e,last:s,widest:n,highest:o}=this._getLabelSizes(),r=2*i.padding,l=$(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(a){const e=i.mirror?0:c*n.width+h*o.height;t.height=Math.min(this.maxHeight,t.height+e+r)}else{const e=i.mirror?0:h*n.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+r)}this._calculatePadding(e,s,c,h)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:n,padding:o},position:a}=this.options,r=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;r?l?(c=s*t.width,d=i*e.height):(c=i*t.height,d=s*e.width):"start"===n?d=e.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let i=e.height/2,s=t.height/2;"start"===n?(i=0,s=t.height):"end"===n&&(i=e.height,s=0),this.paddingTop=i+o,this.paddingBottom=s+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){d(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)s(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Xs(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:o,_longestTextCache:a}=this,r=[],l=[],h=Math.floor(e/Us(e,i));let c,d,f,g,p,m,x,b,_,y,v,M=0,w=0;for(c=0;c<e;c+=h){if(g=t[c].label,p=this._resolveTickFontOptions(c),o.font=m=p.string,x=a[m]=a[m]||{data:{},gc:[]},b=p.lineHeight,_=y=0,s(g)||n(g)){if(n(g))for(d=0,f=g.length;d<f;++d)v=g[d],s(v)||n(v)||(_=Ce(o,x.data,x.gc,_,v),y+=b)}else _=Ce(o,x.data,x.gc,_,g),y=b;r.push(_),l.push(y),M=Math.max(_,M),w=Math.max(y,w)}!function(t,e){u(t,(t=>{const i=t.gc,s=i.length/2;let n;if(s>e){for(n=0;n<s;++n)delete t.data[i[n]];i.splice(0,s)}}))}(a,e);const k=r.indexOf(M),S=l.indexOf(w),P=t=>({width:r[t]||0,height:l[t]||0});return{first:P(0),last:P(e-1),widest:P(k),highest:P(S),widths:r,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Q(this._alignToPixels?Ae(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Ci(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Ci(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=$(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=t.autoSkipPadding||0,a=n?n.widest.width+o:0,r=n?n.highest.height+o:0;return this.isHorizontal()?r*i>a*s?a/i:r/s:r*s<a*i?r/i:a/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:n,position:a,border:r}=s,h=n.offset,c=this.isHorizontal(),d=this.ticks.length+(h?1:0),u=Ks(n),f=[],g=r.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,x=function(t){return Ae(i,t,p)};let b,_,y,v,M,w,k,S,P,D,C,O;if("top"===a)b=x(this.bottom),w=this.bottom-u,S=b-m,D=x(t.top)+m,O=t.bottom;else if("bottom"===a)b=x(this.top),D=t.top,O=x(t.bottom)-m,w=b+m,S=this.top+u;else if("left"===a)b=x(this.right),M=this.right-u,k=b-m,P=x(t.left)+m,C=t.right;else if("right"===a)b=x(this.left),P=t.left,C=x(t.right)-m,M=b+m,k=this.left+u;else if("x"===e){if("center"===a)b=x((t.top+t.bottom)/2+.5);else if(o(a)){const t=Object.keys(a)[0],e=a[t];b=x(this.chart.scales[t].getPixelForValue(e))}D=t.top,O=t.bottom,w=b+m,S=w+u}else if("y"===e){if("center"===a)b=x((t.left+t.right)/2);else if(o(a)){const t=Object.keys(a)[0],e=a[t];b=x(this.chart.scales[t].getPixelForValue(e))}M=b-m,k=M-u,P=t.left,C=t.right}const A=l(s.ticks.maxTicksLimit,d),T=Math.max(1,Math.ceil(d/A));for(_=0;_<d;_+=T){const t=this.getContext(_),e=n.setContext(t),s=r.setContext(t),o=e.lineWidth,a=e.color,l=s.dash||[],d=s.dashOffset,u=e.tickWidth,g=e.tickColor,p=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=qs(this,_,h),void 0!==y&&(v=Ae(i,y,o),c?M=k=P=C=v:w=S=D=O=v,f.push({tx1:M,ty1:w,tx2:k,ty2:S,x1:P,y1:D,x2:C,y2:O,width:o,color:a,borderDash:l,borderDashOffset:d,tickWidth:u,tickColor:g,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,r=this.isHorizontal(),l=this.ticks,{align:h,crossAlign:c,padding:d,mirror:u}=a,f=Ks(i.grid),g=f+d,p=u?-d:g,m=-$(this.labelRotation),x=[];let b,_,y,v,M,w,k,S,P,D,C,O,A="middle";if("top"===s)w=this.bottom-p,k=this._getXAxisLabelAlignment();else if("bottom"===s)w=this.top+p,k=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(f);k=t.textAlign,M=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(f);k=t.textAlign,M=t.x}else if("x"===e){if("center"===s)w=(t.top+t.bottom)/2+g;else if(o(s)){const t=Object.keys(s)[0],e=s[t];w=this.chart.scales[t].getPixelForValue(e)+g}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)M=(t.left+t.right)/2-g;else if(o(s)){const t=Object.keys(s)[0],e=s[t];M=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(f).textAlign}"y"===e&&("start"===h?A="top":"end"===h&&(A="bottom"));const T=this._getLabelSizes();for(b=0,_=l.length;b<_;++b){y=l[b],v=y.label;const t=a.setContext(this.getContext(b));S=this.getPixelForTick(b)+a.labelOffset,P=this._resolveTickFontOptions(b),D=P.lineHeight,C=n(v)?v.length:1;const e=C/2,i=t.color,o=t.textStrokeColor,h=t.textStrokeWidth;let d,f=k;if(r?(M=S,"inner"===k&&(f=b===_-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),O="top"===s?"near"===c||0!==m?-C*D+D/2:"center"===c?-T.highest.height/2-e*D+D:-T.highest.height+D/2:"near"===c||0!==m?D/2:"center"===c?T.highest.height/2-e*D:T.highest.height-C*D,u&&(O*=-1),0===m||t.showLabelBackdrop||(M+=D/2*Math.sin(m))):(w=S,O=(1-C)*D/2),t.showLabelBackdrop){const e=ki(t.backdropPadding),i=T.heights[b],s=T.widths[b];let n=O-e.top,o=0-e.left;switch(A){case"middle":n-=i/2;break;case"bottom":n-=i}switch(k){case"center":o-=s/2;break;case"right":o-=s;break;case"inner":b===_-1?o-=s:b>0&&(o-=s/2)}d={left:o,top:n,width:s+e.width,height:i+e.height,color:t.backdropColor}}x.push({label:v,font:P,textOffset:O,options:{rotation:m,color:i,strokeColor:o,strokeWidth:h,textAlign:f,textBaseline:A,translation:[M,w],backdrop:d}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-$(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:n}}=this.options,o=t+n,a=this._getLabelSizes().widest.width;let r,l;return"left"===e?s?(l=this.right+n,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l+=a)):(l=this.right-o,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l=this.left)):"right"===e?s?(l=this.left+n,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l-=a)):(l=this.left+o,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l=this.right)):r="right",{textAlign:r,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:n,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,n,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,o;const a=(t,e,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const t=s[n];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,n=i.setContext(this.getContext()),o=i.display?n.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let l,h,c,d;this.isHorizontal()?(l=Ae(t,this.left,o)-o/2,h=Ae(t,this.right,a)+a/2,c=d=r):(c=Ae(t,this.top,o)-o/2,d=Ae(t,this.bottom,a)+a/2,l=h=r),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(l,c),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&Ie(e,i);const s=this.getLabelItems(t);for(const t of s){const i=t.options,s=t.font;Ne(e,t.label,0,t.textOffset,s,i)}i&&ze(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=Si(i.font),r=ki(i.padding),l=i.align;let h=a.lineHeight/2;"bottom"===e||"center"===e||o(e)?(h+=r.bottom,n(i.text)&&(h+=a.lineHeight*(i.text.length-1))):h+=r.top;const{titleX:c,titleY:d,maxWidth:u,rotation:f}=function(t,e,i,s){const{top:n,left:a,bottom:r,right:l,chart:h}=t,{chartArea:c,scales:d}=h;let u,f,g,p=0;const m=r-n,x=l-a;if(t.isHorizontal()){if(f=ft(s,a,l),o(i)){const t=Object.keys(i)[0],s=i[t];g=d[t].getPixelForValue(s)+m-e}else g="center"===i?(c.bottom+c.top)/2+m-e:Ys(t,i,e);u=l-a}else{if(o(i)){const t=Object.keys(i)[0],s=i[t];f=d[t].getPixelForValue(s)-x+e}else f="center"===i?(c.left+c.right)/2-x+e:Ys(t,i,e);g=ft(s,r,n),p="left"===i?-E:E}return{titleX:f,titleY:g,maxWidth:u,rotation:p}}(this,h,e,l);Ne(t,i.text,0,0,a,{color:i.color,maxWidth:u,rotation:f,textAlign:Zs(l,e,s),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=l(t.grid&&t.grid.z,-1),s=l(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Js.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];o[i]!==this.id||t&&o.type!==t||s.push(o)}return s}_resolveTickFontOptions(t){return Si(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Qs{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const s=this.items,n=t.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,function(t,e,i){const s=x(Object.create(null),[i?ue.get(i):{},ue.get(e),t.defaults]);ue.set(e,s),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const s=i.split("."),n=s.pop(),o=[t].concat(s).join("."),a=e[i].split("."),r=a.pop(),l=a.join(".");ue.route(o,n,l,r)}))}(e,t.defaultRoutes);t.descriptors&&ue.describe(e,t.descriptors)}(t,o,i),this.override&&ue.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in ue[s]&&(delete ue[s][i],this.override&&delete re[i])}}class tn{constructor(){this.controllers=new Qs(Ns,"datasets",!0),this.elements=new Qs(Hs,"elements"),this.plugins=new Qs(Object,"plugins"),this.scales=new Qs(Js,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):u(e,(e=>{const s=i||this._getRegistryForType(e);this._exec(t,s,e)}))}))}_exec(t,e,i){const s=w(t);d(i["before"+s],[],i),e[t](i),d(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var en=new tn;class sn{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===d(t[i],[e,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){s(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=l(i.options&&i.options.plugins,{}),n=function(t){const e={},i=[],s=Object.keys(en.plugins.items);for(let t=0;t<s.length;t++)i.push(en.getPlugin(s[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const s=n[t];-1===i.indexOf(s)&&(i.push(s),e[s.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==s||e?function(t,{plugins:e,localIds:i},s,n){const o=[],a=t.getContext();for(const r of e){const e=r.id,l=nn(s[e],n);null!==l&&o.push({plugin:r,options:on(t.config,{plugin:r,local:i[e]},l,a)})}return o}(t,n,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function nn(t,e){return e||!1!==t?!0===t?{}:t:null}function on(t,{plugin:e,local:i},s,n){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(s,o);return i&&e.defaults&&a.push(e.defaults),t.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function an(t,e){const i=ue.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function rn(t){if("x"===t||"y"===t||"r"===t)return t}function ln(t,...e){if(rn(t))return t;for(const s of e){const e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&rn(t[0].toLowerCase());if(e)return e}var i;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hn(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function cn(t,e){const i=re[t.type]||{scales:{}},s=e.scales||{},n=an(t.type,e),a=Object.create(null);return Object.keys(s).forEach((e=>{const r=s[e];if(!o(r))return console.error(`Invalid scale configuration for scale: ${e}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const l=ln(e,r,function(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(i.length)return hn(t,"x",i[0])||hn(t,"y",i[0])}return{}}(e,t),ue.scales[r.type]),h=function(t,e){return t===e?"_index_":"_value_"}(l,n),c=i.scales||{};a[e]=b(Object.create(null),[{axis:l},r,c[l],c[h]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,o=i.indexAxis||an(n,e),r=(re[n]||{}).scales||{};Object.keys(r).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,o),n=i[e+"AxisID"]||e;a[n]=a[n]||Object.create(null),b(a[n],[{axis:e},s[n],r[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];b(e,[ue.scales[e.type],ue.scale])})),a}function dn(t){const e=t.options||(t.options={});e.plugins=l(e.plugins,{}),e.scales=cn(t,e)}function un(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const fn=new Map,gn=new Set;function pn(t,e){let i=fn.get(t);return i||(i=e(),fn.set(t,i),gn.add(i)),i}const mn=(t,e,i)=>{const s=M(e,i);void 0!==s&&t.add(s)};class xn{constructor(t){this._config=function(t){return(t=t||{}).data=un(t.data),dn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=un(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),dn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return pn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return pn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return pn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return pn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return s&&!e||(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:n}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const r=new Set;e.forEach((e=>{t&&(r.add(t),e.forEach((e=>mn(r,t,e)))),e.forEach((t=>mn(r,s,t))),e.forEach((t=>mn(r,re[n]||{},t))),e.forEach((t=>mn(r,ue,t))),e.forEach((t=>mn(r,le,t)))}));const l=Array.from(r);return 0===l.length&&l.push(Object.create(null)),gn.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,re[e]||{},ue.datasets[e]||{},{type:e},ue,le]}resolveNamedOptions(t,e,i,s=[""]){const o={$shared:!0},{resolver:a,subPrefixes:r}=bn(this._resolverCache,t,s);let l=a;if(function(t,e){const{isScriptable:i,isIndexable:s}=Ye(t);for(const o of e){const e=i(o),a=s(o),r=(a||e)&&t[o];if(e&&(S(r)||_n(r))||a&&n(r))return!0}return!1}(a,e)){o.$shared=!1;l=$e(a,i=S(i)?i():i,this.createResolver(t,i,r))}for(const t of e)o[t]=l[t];return o}createResolver(t,e,i=[""],s){const{resolver:n}=bn(this._resolverCache,t,i);return o(e)?$e(n,e,void 0,s):n}}function bn(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let o=s.get(n);if(!o){o={resolver:je(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},s.set(n,o)}return o}const _n=t=>o(t)&&Object.getOwnPropertyNames(t).some((e=>S(t[e])));const yn=["top","bottom","left","right","chartArea"];function vn(t,e){return"top"===t||"bottom"===t||-1===yn.indexOf(t)&&"x"===e}function Mn(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function wn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),d(i&&i.onComplete,[t],e)}function kn(t){const e=t.chart,i=e.options.animation;d(i&&i.onProgress,[t],e)}function Sn(t){return fe()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pn={},Dn=t=>{const e=Sn(t);return Object.values(Pn).filter((t=>t.canvas===e)).pop()};function Cn(t,e,i){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=e){const o=t[n];delete t[n],(i>0||s>e)&&(t[s+i]=o)}}}function On(t,e,i){return t.options.clip?t[i]:e[i]}class An{static defaults=ue;static instances=Pn;static overrides=re;static registry=en;static version="4.4.3";static getChart=Dn;static register(...t){en.add(...t),Tn()}static unregister(...t){en.remove(...t),Tn()}constructor(t,e){const s=this.config=new xn(e),n=Sn(t),o=Dn(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||ks(n)),this.platform.updateConfig(s);const r=this.platform.acquireContext(n,a.aspectRatio),l=r&&r.canvas,h=l&&l.height,c=l&&l.width;this.id=i(),this.ctx=r,this.canvas=l,this.width=c,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dt((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],Pn[this.id]=this,r&&l?(bt.listen(this,"complete",wn),bt.listen(this,"progress",kn),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return s(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return en}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ke(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Te(this.canvas,this.ctx),this}stop(){return bt.stop(this),this}resize(t,e){bt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,n),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ke(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),d(i.onResize,[this,o],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){u(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],s=ln(t,i),n="r"===s,o="x"===s;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),u(n,(e=>{const n=e.options,o=n.id,a=ln(o,n),r=l(n.type,e.dtype);void 0!==n.position&&vn(n.position,a)===vn(e.dposition)||(n.position=e.dposition),s[o]=!0;let h=null;if(o in i&&i[o].type===r)h=i[o];else{h=new(en.getScale(r))({id:o,type:r,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(n,t)})),u(s,((t,e)=>{t||delete i[e]})),u(i,(t=>{as.configure(this,t,t.options),as.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Mn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=s.indexAxis||an(o,this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=en.getController(o),{datasetElementType:s,dataElementType:a}=ue.datasets[o];Object.assign(e,{dataElementType:en.getElement(a),datasetElementType:s&&en.getElement(s)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){u(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!s&&-1===n.indexOf(e);e.buildOrUpdateElements(i),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||u(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Mn("z","_idx"));const{_active:a,_lastEvent:r}=this;r?this._eventHandler(r,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){u(this.scales,(t=>{as.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);P(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:n}of e){Cn(t,s,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),s=i(0);for(let t=1;t<e;t++)if(!P(s,i(t)))return;return Array.from(s).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;as.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],u(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,S(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bt.has(this)?this.attached&&!bt.running(this)&&bt.start(this):(this.draw(),wn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,n;for(s=0,n=e.length;s<n;++s){const n=e[s];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,n=function(t,e){const{xScale:i,yScale:s}=t;return i&&s?{left:On(i,e,"left"),right:On(i,e,"right"),top:On(s,e,"top"),bottom:On(s,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&Ie(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),s&&ze(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Re(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const n=Xi.modes[e];return"function"==typeof n?n(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter((t=>t&&t._dataset===e)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ci(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",n=this.getDatasetMeta(t),o=n.controller._resolveAnimations(void 0,s);k(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?s:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),bt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Te(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Pn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};u(this.options.events,(t=>i(t,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(i,s)=>{t[i]&&(e.removeEventListener(this,i,s),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){u(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},u(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let n,o,a,r;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),a=0,r=t.length;a<r;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!f(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const s=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=n(e,t),a=i?t:n(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,o=e,a=this._getActiveElements(t,s,i,o),r=D(t),l=function(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}(t,this._lastEvent,i,r);i&&(this._lastEvent=null,d(n.onHover,[t,a,this],this),r&&d(n.onClick,[t,a,this],this));const h=!f(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}function Tn(){return u(An.instances,(t=>t._plugins.invalidate()))}function Ln(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class En{static override(t){Object.assign(En.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ln()}parse(){return Ln()}format(){return Ln()}add(){return Ln()}diff(){return Ln()}startOf(){return Ln()}endOf(){return Ln()}}var Rn={_date:En};function In(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let e=0,n=i.length;e<n;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=lt(s.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let s,n,o,a,r=e._length;const l=()=>{32767!==o&&-32768!==o&&(k(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,n=i.length;s<n;++s)o=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),l();return r}function zn(t,e,i,s){return n(t)?function(t,e,i,s){const n=i.parse(t[0],s),o=i.parse(t[1],s),a=Math.min(n,o),r=Math.max(n,o);let l=a,h=r;Math.abs(a)>Math.abs(r)&&(l=r,h=a),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:n,end:o,min:a,max:r}}(t,e,i,s):e[i.axis]=i.parse(t,s),e}function Fn(t,e,i,s){const n=t.iScale,o=t.vScale,a=n.getLabels(),r=n===o,l=[];let h,c,d,u;for(h=i,c=i+s;h<c;++h)u=e[h],d={},d[n.axis]=r||n.parse(a[h],h),l.push(zn(u,d,o,h));return l}function Vn(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Bn(t,e,i,s){let n=e.borderSkipped;const o={};if(!n)return void(t.borderSkipped=o);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:r,reverse:l,top:h,bottom:c}=function(t){let e,i,s,n,o;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",o="start"):(n="start",o="end"),{start:i,end:s,reverse:e,top:n,bottom:o}}(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(o[Wn(c,a,r,l)]=!0,n=h)),o[Wn(n,a,r,l)]=!0,t.borderSkipped=o}function Wn(t,e,i,s){var n,o,a;return s?(a=i,t=Nn(t=(n=t)===(o=e)?a:n===a?o:n,i,e)):t=Nn(t,e,i),t}function Nn(t,e,i){return"start"===t?e:"end"===t?i:t}function Hn(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class jn extends Ns{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let n,a,r=t=>+i[t];if(o(i[t])){const{key:t="value"}=this._parsing;r=e=>+M(i[e],t)}for(n=t,a=t+e;n<a;++n)s._parsed[n]=r(n)}}_getRotation(){return $(this.options.rotation-90)}_getCircumference(){return $(this.options.circumference)}_getRotationExtents(){let t=O,e=-O;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,n=s._getRotation(),o=s._getCircumference();t=Math.min(t,n),e=Math.max(e,n+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),r=Math.min(h(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:p,offsetY:m}=function(t,e,i){let s=1,n=1,o=0,a=0;if(e<O){const r=t,l=r+e,h=Math.cos(r),c=Math.sin(r),d=Math.cos(l),u=Math.sin(l),f=(t,e,s)=>Z(t,r,l,!0)?1:Math.max(e,e*i,s,s*i),g=(t,e,s)=>Z(t,r,l,!0)?-1:Math.min(e,e*i,s,s*i),p=f(0,h,d),m=f(E,c,u),x=g(C,h,d),b=g(C+E,c,u);s=(p-x)/2,n=(m-b)/2,o=-(p+x)/2,a=-(m+b)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:a}}(u,d,r),x=(i.width-o)/f,b=(i.height-o)/g,_=Math.max(Math.min(x,b)/2,0),y=c(this.options.radius,_),v=(y-Math.max(y*r,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=m*y,s.total=this.calculateTotal(),this.outerRadius=y-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*l,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,n=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*n/O)}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,a=o.chartArea,r=o.options.animation,l=(a.left+a.right)/2,h=(a.top+a.bottom)/2,c=n&&r.animateScale,d=c?0:this.innerRadius,u=c?0:this.outerRadius,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(e,s);let p,m=this._getRotation();for(p=0;p<e;++p)m+=this._circumference(p,n);for(p=e;p<e+i;++p){const e=this._circumference(p,n),i=t[p],o={x:l+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:u,innerRadius:d};g&&(o.options=f||this.resolveDataElementOptions(p,i.active?"active":s)),m+=e,this.updateElement(i,p,o,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,s=0;for(i=0;i<e.length;i++){const n=t._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||e[i].hidden||(s+=Math.abs(n))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?O*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=ne(e._parsed[t],i.options.locale);return{label:s[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,n,o,a,r;if(!t)for(s=0,n=i.data.datasets.length;s<n;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}if(!t)return 0;for(s=0,n=t.length;s<n;++s)r=a.resolveDataElementOptions(s),"inner"!==r.borderAlign&&(e=Math.max(e,r.borderWidth||0,r.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(l(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class $n extends Ns{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=ne(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:n}}parseObjectData(t,e,i,s){return ii.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),n=Math.max(s/2,0),o=(n-Math.max(i.cutoutPercentage?n/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,a=o.options.animation,r=this._cachedMeta.rScale,l=r.xCenter,h=r.yCenter,c=r.getIndexAngle(0)-.5*C;let d,u=c;const f=360/this.countVisibleElements();for(d=0;d<e;++d)u+=this._computeAngle(d,s,f);for(d=e;d<e+i;d++){const e=t[d];let i=u,g=u+this._computeAngle(d,s,f),p=o.getDataVisibility(d)?r.getDistanceFromCenterForValue(this.getParsed(d).r):0;u=g,n&&(a.animateScale&&(p=0),a.animateRotate&&(i=g=c));const m={x:l,y:h,innerRadius:0,outerRadius:p,startAngle:i,endAngle:g,options:this.resolveDataElementOptions(d,e.active?"active":s)};this.updateElement(e,d,m,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?$(this.resolveDataElementOptions(t,e).angle||i):0}}var Yn=Object.freeze({__proto__:null,BarController:class extends Ns{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return Fn(t,e,i,s)}parseArrayData(t,e,i,s){return Fn(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:n,vScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l="x"===n.axis?a:r,h="x"===o.axis?a:r,c=[];let d,u,f,g;for(d=i,u=i+s;d<u;++d)g=e[d],f={},f[n.axis]=n.parse(M(g,l),d),c.push(zn(M(g,h),f,o,d));return c}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,n=this.getParsed(t),o=n._custom,a=Vn(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o="reset"===n,{index:a,_cachedMeta:{vScale:r}}=this,l=r.getBasePixel(),h=r.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(e,n);for(let f=e;f<e+i;f++){const e=this.getParsed(f),i=o||s(e[r.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),g=this._calculateBarIndexPixels(f,c),p=(e._stacks||{})[r.axis],m={horizontal:h,base:i.base,enableBorderRadius:!p||Vn(e._custom)||a===p._top||a===p._bottom,x:h?i.head:g.center,y:h?g.center:i.head,height:h?g.size:Math.abs(i.size),width:h?Math.abs(i.size):g.size};u&&(m.options=d||this.resolveDataElementOptions(f,t[f].active?"active":n));const x=m.options||t[f].options;Bn(m,x,p,a),Hn(m,x,c.ratio),this.updateElement(t[f],f,m,n)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),o=i.options.stacked,a=[],r=t=>{const i=t.controller.getParsed(e),n=i&&i[t.vScale.axis];if(s(n)||isNaN(n))return!0};for(const i of n)if((void 0===e||!r(i))&&((!1===o||-1===a.indexOf(i.stack)||void 0===o&&void 0===i.stack)&&a.push(i.stack),i.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),n=void 0!==e?s.indexOf(e):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let n,o;for(n=0,o=e.data.length;n<o;++n)s.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const a=t.barThickness;return{min:a||In(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:n},options:{base:o,minBarLength:a}}=this,r=o||0,l=this.getParsed(t),h=l._custom,c=Vn(h);let d,u,f=l[e.axis],g=0,p=i?this.applyStack(e,l,i):f;p!==f&&(g=p-f,p=f),c&&(f=h.barStart,p=h.barEnd-h.barStart,0!==f&&F(f)!==F(h.barEnd)&&(g=0),g+=f);const m=s(o)||c?g:o;let x=e.getPixelForValue(m);if(d=this.chart.getDataVisibility(t)?e.getPixelForValue(g+p):x,u=d-x,Math.abs(u)<a){u=function(t,e,i){return 0!==t?F(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(u,e,r)*a,f===r&&(x-=u/2);const t=e.getPixelForDecimal(0),s=e.getPixelForDecimal(1),o=Math.min(t,s),h=Math.max(t,s);x=Math.max(Math.min(x,h),o),d=x+u,i&&!c&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(d)-e.getValueForPixel(x))}if(x===e.getPixelForValue(r)){const t=F(u)*e.getLineWidthForValue(r)/2;x+=t,u-=t}return{size:u,base:x,head:d,center:d+u/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,o=n.skipNull,a=l(n.maxBarThickness,1/0);let r,h;if(e.grouped){const i=o?this._getStackCount(t):e.stackCount,l="flex"===n.barThickness?function(t,e,i,s){const n=e.pixels,o=n[t];let a=t>0?n[t-1]:null,r=t<n.length-1?n[t+1]:null;const l=i.categoryPercentage;null===a&&(a=o-(null===r?e.end-e.start:r-o)),null===r&&(r=o+o-a);const h=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/s,ratio:i.barPercentage,start:h}}(t,e,n,i):function(t,e,i,n){const o=i.barThickness;let a,r;return s(o)?(a=e.min*i.categoryPercentage,r=i.barPercentage):(a=o*n,r=1),{chunk:a/n,ratio:r,start:e.pixels[t]-a/2}}(t,e,n,i),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);r=l.start+l.chunk*c+l.chunk/2,h=Math.min(a,l.chunk*l.ratio)}else r=i.getPixelForValue(this.getParsed(t)[i.axis],t),h=Math.min(a,e.min*e.ratio);return{base:r-h/2,head:r+h/2,center:r,size:h}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[e.axis]||i[n].hidden||i[n].draw(this._ctx)}},BubbleController:class extends Ns{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const n=super.parsePrimitiveData(t,e,i,s);for(let t=0;t<n.length;t++)n[t]._custom=this.resolveDataElementOptions(t+i).radius;return n}parseArrayData(t,e,i,s){const n=super.parseArrayData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=l(s[2],this.resolveDataElementOptions(t+i).radius)}return n}parseObjectData(t,e,i,s){const n=super.parseObjectData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=l(s&&s.r&&+s.r,this.resolveDataElementOptions(t+i).radius)}return n}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:n}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),r=n.getLabelForValue(o.y),l=o._custom;return{label:i[t]||"",value:"("+a+", "+r+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:r,includeOptions:l}=this._getSharedOptions(e,s),h=o.axis,c=a.axis;for(let d=e;d<e+i;d++){const e=t[d],i=!n&&this.getParsed(d),u={},f=u[h]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[h]),g=u[c]=n?a.getBasePixel():a.getPixelForValue(i[c]);u.skip=isNaN(f)||isNaN(g),l&&(u.options=r||this.resolveDataElementOptions(d,e.active?"active":s),n&&(u.options.radius=0)),this.updateElement(e,d,u,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const n=s.radius;return"active"!==e&&(s.radius=0),s.radius+=l(i&&i._custom,n),s}},DoughnutController:jn,LineController:class extends Ns{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:n}=e,o=this.chart._animationsDisabled;let{start:a,count:r}=pt(e,s,o);this._drawStart=a,this._drawCount=r,mt(e)&&(a=0,r=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=s;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},t),this.updateElements(s,a,r,t)}updateElements(t,e,i,n){const o="reset"===n,{iScale:a,vScale:r,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,n),u=a.axis,f=r.axis,{spanGaps:g,segment:p}=this.options,m=N(g)?g:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||"none"===n,b=e+i,_=t.length;let y=e>0&&this.getParsed(e-1);for(let i=0;i<_;++i){const g=t[i],_=x?g:{};if(i<e||i>=b){_.skip=!0;continue}const v=this.getParsed(i),M=s(v[f]),w=_[u]=a.getPixelForValue(v[u],i),k=_[f]=o||M?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,v,l):v[f],i);_.skip=isNaN(w)||isNaN(k)||M,_.stop=i>0&&Math.abs(v[u]-y[u])>m,p&&(_.parsed=v,_.raw=h.data[i]),d&&(_.options=c||this.resolveDataElementOptions(i,g.active?"active":n)),x||this.updateElement(g,i,_,n),y=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,n,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends jn{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:$n,RadarController:class extends Ns{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return ii.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],n=e.iScale.getLabels();if(i.points=s,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===s.length,options:e};this.updateElement(i,void 0,o,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const n=this._cachedMeta.rScale,o="reset"===s;for(let a=e;a<e+i;a++){const e=t[a],i=this.resolveDataElementOptions(a,e.active?"active":s),r=n.getPointPositionForValue(a,this.getParsed(a).r),l=o?n.xCenter:r.x,h=o?n.yCenter:r.y,c={x:l,y:h,angle:r.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,a,c,s)}}},ScatterController:class extends Ns{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:n}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),r=n.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+r+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:n,count:o}=pt(e,i,s);if(this._drawStart=n,this._drawCount=o,mt(e)&&(n=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:n,_dataset:o}=e;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,n,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,n){const o="reset"===n,{iScale:a,vScale:r,_stacked:l,_dataset:h}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),f=a.axis,g=r.axis,{spanGaps:p,segment:m}=this.options,x=N(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||"none"===n;let _=e>0&&this.getParsed(e-1);for(let c=e;c<e+i;++c){const e=t[c],i=this.getParsed(c),p=b?e:{},y=s(i[g]),v=p[f]=a.getPixelForValue(i[f],c),M=p[g]=o||y?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,i,l):i[g],c);p.skip=isNaN(v)||isNaN(M)||y,p.stop=c>0&&Math.abs(i[f]-_[f])>x,m&&(p.parsed=i,p.raw=h.data[c]),u&&(p.options=d||this.resolveDataElementOptions(c,e.active?"active":n)),b||this.updateElement(e,c,p,n),_=i}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const n=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,n,o)/2}}});function Un(t,e,i,s){const n=vi(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-e)/2,a=Math.min(o,s*e/2),r=t=>{const e=(i-Math.min(o,t))*s/2;return J(t,0,Math.min(o,e))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:J(n.innerStart,0,a),innerEnd:J(n.innerEnd,0,a)}}function Xn(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function qn(t,e,i,s,n,o){const{x:a,y:r,startAngle:l,pixelMargin:h,innerRadius:c}=e,d=Math.max(e.outerRadius+s+i-h,0),u=c>0?c+s+i+h:0;let f=0;const g=n-l;if(s){const t=((c>0?c-s:0)+(d>0?d-s:0))/2;f=(g-(0!==t?g*t/(t+s):g))/2}const p=(g-Math.max(.001,g*d-i/C)/d)/2,m=l+p+f,x=n-p-f,{outerStart:b,outerEnd:_,innerStart:y,innerEnd:v}=Un(e,u,d,x-m),M=d-b,w=d-_,k=m+b/M,S=x-_/w,P=u+y,D=u+v,O=m+y/P,A=x-v/D;if(t.beginPath(),o){const e=(k+S)/2;if(t.arc(a,r,d,k,e),t.arc(a,r,d,e,S),_>0){const e=Xn(w,S,a,r);t.arc(e.x,e.y,_,S,x+E)}const i=Xn(D,x,a,r);if(t.lineTo(i.x,i.y),v>0){const e=Xn(D,A,a,r);t.arc(e.x,e.y,v,x+E,A+Math.PI)}const s=(x-v/u+(m+y/u))/2;if(t.arc(a,r,u,x-v/u,s,!0),t.arc(a,r,u,s,m+y/u,!0),y>0){const e=Xn(P,O,a,r);t.arc(e.x,e.y,y,O+Math.PI,m-E)}const n=Xn(M,m,a,r);if(t.lineTo(n.x,n.y),b>0){const e=Xn(M,k,a,r);t.arc(e.x,e.y,b,m-E,k)}}else{t.moveTo(a,r);const e=Math.cos(k)*d+a,i=Math.sin(k)*d+r;t.lineTo(e,i);const s=Math.cos(S)*d+a,n=Math.sin(S)*d+r;t.lineTo(s,n)}t.closePath()}function Kn(t,e,i,s,n){const{fullCircles:o,startAngle:a,circumference:r,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:d,borderDashOffset:u}=l,f="inner"===l.borderAlign;if(!h)return;t.setLineDash(d||[]),t.lineDashOffset=u,f?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let g=e.endAngle;if(o){qn(t,e,i,s,g,n);for(let e=0;e<o;++e)t.stroke();isNaN(r)||(g=a+(r%O||O))}f&&function(t,e,i){const{startAngle:s,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=e;let h=n/r;t.beginPath(),t.arc(o,a,r,s-h,i+h),l>n?(h=n/l,t.arc(o,a,l,i+h,s-h,!0)):t.arc(o,a,n,i+E,s-E),t.closePath(),t.clip()}(t,e,g),o||(qn(t,e,i,s,g,n),t.stroke())}function Gn(t,e,i=e){t.lineCap=l(i.borderCapStyle,e.borderCapStyle),t.setLineDash(l(i.borderDash,e.borderDash)),t.lineDashOffset=l(i.borderDashOffset,e.borderDashOffset),t.lineJoin=l(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=l(i.borderWidth,e.borderWidth),t.strokeStyle=l(i.borderColor,e.borderColor)}function Zn(t,e,i){t.lineTo(i.x,i.y)}function Jn(t,e,i={}){const s=t.length,{start:n=0,end:o=s-1}=i,{start:a,end:r}=e,l=Math.max(n,a),h=Math.min(o,r),c=n<a&&o<a||n>r&&o>r;return{count:s,start:l,loop:e.loop,ilen:h<l&&!c?s+h-l:h-l}}function Qn(t,e,i,s){const{points:n,options:o}=e,{count:a,start:r,loop:l,ilen:h}=Jn(n,i,s),c=function(t){return t.stepped?Fe:t.tension||"monotone"===t.cubicInterpolationMode?Ve:Zn}(o);let d,u,f,{move:g=!0,reverse:p}=s||{};for(d=0;d<=h;++d)u=n[(r+(p?h-d:d))%a],u.skip||(g?(t.moveTo(u.x,u.y),g=!1):c(t,f,u,p,o.stepped),f=u);return l&&(u=n[(r+(p?h:0))%a],c(t,f,u,p,o.stepped)),!!l}function to(t,e,i,s){const n=e.points,{count:o,start:a,ilen:r}=Jn(n,i,s),{move:l=!0,reverse:h}=s||{};let c,d,u,f,g,p,m=0,x=0;const b=t=>(a+(h?r-t:t))%o,_=()=>{f!==g&&(t.lineTo(m,g),t.lineTo(m,f),t.lineTo(m,p))};for(l&&(d=n[b(0)],t.moveTo(d.x,d.y)),c=0;c<=r;++c){if(d=n[b(c)],d.skip)continue;const e=d.x,i=d.y,s=0|e;s===u?(i<f?f=i:i>g&&(g=i),m=(x*m+e)/++x):(_(),t.lineTo(e,i),u=s,x=0,f=g=i),p=i}_()}function eo(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?to:Qn}const io="function"==typeof Path2D;function so(t,e,i,s){io&&!e.options.segment?function(t,e,i,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,i,s)&&n.closePath()),Gn(t,e.options),t.stroke(n)}(t,e,i,s):function(t,e,i,s){const{segments:n,options:o}=e,a=eo(e);for(const r of n)Gn(t,o,r.style),t.beginPath(),a(t,e,r,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}class no extends Hs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;hi(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=zi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],n=this.points,o=Ii(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],r=function(t){return t.stepped?pi:t.tension||"monotone"===t.cubicInterpolationMode?mi:gi}(i);let l,h;for(l=0,h=o.length;l<h;++l){const{start:h,end:c}=o[l],d=n[h],u=n[c];if(d===u){a.push(d);continue}const f=r(d,u,Math.abs((s-d[e])/(u[e]-d[e])),i.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return eo(this)(t,this,e,i)}path(t,e,i){const s=this.segments,n=eo(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=n(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),so(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function oo(t,e,i,s){const n=t.options,{[i]:o}=t.getProps([i],s);return Math.abs(e-o)<n.radius+n.hitRadius}function ao(t,e){const{x:i,y:s,base:n,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let r,l,h,c,d;return t.horizontal?(d=a/2,r=Math.min(i,n),l=Math.max(i,n),h=s-d,c=s+d):(d=o/2,r=i-d,l=i+d,h=Math.min(s,n),c=Math.max(s,n)),{left:r,top:h,right:l,bottom:c}}function ro(t,e,i,s){return t?0:J(e,i,s)}function lo(t){const e=ao(t),i=e.right-e.left,s=e.bottom-e.top,n=function(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,o=Mi(s);return{t:ro(n.top,o.top,0,i),r:ro(n.right,o.right,0,e),b:ro(n.bottom,o.bottom,0,i),l:ro(n.left,o.left,0,e)}}(t,i/2,s/2),a=function(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,a=wi(n),r=Math.min(e,i),l=t.borderSkipped,h=s||o(n);return{topLeft:ro(!h||l.top||l.left,a.topLeft,0,r),topRight:ro(!h||l.top||l.right,a.topRight,0,r),bottomLeft:ro(!h||l.bottom||l.left,a.bottomLeft,0,r),bottomRight:ro(!h||l.bottom||l.right,a.bottomRight,0,r)}}(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:a},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,a.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(n.b,n.r))}}}}function ho(t,e,i,s){const n=null===e,o=null===i,a=t&&!(n&&o)&&ao(t,s);return a&&(n||tt(e,a.left,a.right))&&(o||tt(i,a.top,a.bottom))}function co(t,e){t.rect(e.x,e.y,e.w,e.h)}function uo(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-s,a=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+o,h:t.h+a,radius:t.radius}}var fo=Object.freeze({__proto__:null,ArcElement:class extends Hs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:n,distance:o}=X(s,{x:t,y:e}),{startAngle:a,endAngle:r,innerRadius:h,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,f=l(d,r-a)>=O||Z(n,a,r),g=tt(o,h+u,c+u);return f&&g}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:r,spacing:l}=this.options,h=(s+n)/2,c=(o+a+l+r)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>O?Math.floor(i/O):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);const r=s*(1-Math.sin(Math.min(C,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,s,n){const{fullCircles:o,startAngle:a,circumference:r}=e;let l=e.endAngle;if(o){qn(t,e,i,s,l,n);for(let e=0;e<o;++e)t.fill();isNaN(r)||(l=a+(r%O||O))}qn(t,e,i,s,l,n),t.fill()}(t,this,r,n,o),Kn(t,this,r,n,o),t.restore()}},BarElement:class extends Hs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:n,outer:o}=lo(this),a=(r=o.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?He:co;var r;t.save(),o.w===n.w&&o.h===n.h||(t.beginPath(),a(t,uo(o,e,n)),t.clip(),a(t,uo(n,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,uo(n,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return ho(this,t,e,i)}inXRange(t,e){return ho(this,t,null,e)}inYRange(t,e){return ho(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+s)/2:e,y:n?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:no,PointElement:class extends Hs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(t-n,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return oo(this,t,"x",e)}inYRange(t,e){return oo(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Re(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Le(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});function go(t,e,i,s){const n=t.indexOf(e);if(-1===n)return((t,e,i,s)=>("string"==typeof e?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,s);return n!==t.lastIndexOf(e)?i:n}function po(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function mo(t,e,{horizontal:i,minRotation:s}){const n=$(s),o=(i?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}class xo extends Js{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return s(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this;const o=t=>s=e?s:t,a=t=>n=i?n:t;if(t){const t=F(s),e=F(n);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(s===n){let e=0===n?1:Math.abs(.05*n);a(n+e),t||o(s-e)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:s}=t;return s?(e=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n=function(t,e){const i=[],{bounds:n,step:o,min:a,max:r,precision:l,count:h,maxTicks:c,maxDigits:d,includeBounds:u}=t,f=o||1,g=c-1,{min:p,max:m}=e,x=!s(a),b=!s(r),_=!s(h),y=(m-p)/(d+1);let v,M,w,k,S=B((m-p)/g/f)*f;if(S<1e-14&&!x&&!b)return[{value:p},{value:m}];k=Math.ceil(m/S)-Math.floor(p/S),k>g&&(S=B(k*S/g/f)*f),s(l)||(v=Math.pow(10,l),S=Math.ceil(S*v)/v),"ticks"===n?(M=Math.floor(p/S)*S,w=Math.ceil(m/S)*S):(M=p,w=m),x&&b&&o&&H((r-a)/o,S/1e3)?(k=Math.round(Math.min((r-a)/S,c)),S=(r-a)/k,M=a,w=r):_?(M=x?a:M,w=b?r:w,k=h-1,S=(w-M)/k):(k=(w-M)/S,k=V(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const P=Math.max(U(S),U(M));v=Math.pow(10,s(l)?P:l),M=Math.round(M*v)/v,w=Math.round(w*v)/v;let D=0;for(x&&(u&&M!==a?(i.push({value:a}),M<a&&D++,V(Math.round((M+D*S)*v)/v,a,mo(a,y,t))&&D++):M<a&&D++);D<k;++D){const t=Math.round((M+D*S)*v)/v;if(b&&t>r)break;i.push({value:t})}return b&&u&&w!==r?i.length&&V(i[i.length-1].value,r,mo(r,y,t))?i[i.length-1].value=r:i.push({value:r}):b&&w!==r||i.push({value:w}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&j(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ne(t,this.chart.options.locale,this.options.ticks.format)}}class bo extends xo{static id="linear";static defaults={ticks:{callback:ae.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=a(t)?t:0,this.max=a(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=$(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const _o=t=>Math.floor(z(t)),yo=(t,e)=>Math.pow(10,_o(t)+e);function vo(t){return 1===t/Math.pow(10,_o(t))}function Mo(t,e,i){const s=Math.pow(10,i),n=Math.floor(t/s);return Math.ceil(e/s)-n}function wo(t,{min:e,max:i}){e=r(t.min,e);const s=[],n=_o(e);let o=function(t,e){let i=_o(e-t);for(;Mo(t,e,i)>10;)i++;for(;Mo(t,e,i)<10;)i--;return Math.min(i,_o(t))}(e,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),h=n>o?Math.pow(10,n):0,c=Math.round((e-h)*a)/a,d=Math.floor((e-h)/l/10)*l*10;let u=Math.floor((c-d)/Math.pow(10,o)),f=r(t.min,Math.round((h+d+u*Math.pow(10,o))*a)/a);for(;f<i;)s.push({value:f,major:vo(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,a=o>=0?1:a),f=Math.round((h+d+u*Math.pow(10,o))*a)/a;const g=r(t.max,f);return s.push({value:g,major:vo(g),significand:u}),s}class ko extends Js{static id="logarithmic";static defaults={ticks:{callback:ae.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=xo.prototype.parse.apply(this,[t,e]);if(0!==i)return a(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=a(t)?Math.max(0,t):null,this.max=a(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!a(this._userMin)&&(this.min=t===yo(this.min,0)?yo(this.min,-1):yo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const n=e=>i=t?i:e,o=t=>s=e?s:t;i===s&&(i<=0?(n(1),o(10)):(n(yo(i,-1)),o(yo(s,1)))),i<=0&&n(yo(s,-1)),s<=0&&o(yo(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e=wo({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&j(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ne(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=z(t),this._valueRange=z(this.max)-z(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(z(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function So(t){const e=t.ticks;if(e.display&&t.display){const t=ki(e.backdropPadding);return l(e.font&&e.font.size,ue.font.size)+t.height}return 0}function Po(t,e,i,s,n){return t===s||t===n?{start:e-i/2,end:e+i/2}:t<s||t>n?{start:e-i,end:e}:{start:e,end:e+i}}function Do(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),s=[],o=[],a=t._pointLabels.length,r=t.options.pointLabels,l=r.centerPointLabels?C/a:0;for(let u=0;u<a;u++){const a=r.setContext(t.getPointLabelContext(u));o[u]=a.padding;const f=t.getPointPosition(u,t.drawingArea+o[u],l),g=Si(a.font),p=(h=t.ctx,c=g,d=n(d=t._pointLabels[u])?d:[d],{w:Oe(h,c.string,d),h:d.length*c.lineHeight});s[u]=p;const m=G(t.getIndexAngle(u)+l),x=Math.round(Y(m));Co(i,e,m,Po(x,f.x,p.w,0,180),Po(x,f.y,p.h,90,270))}var h,c,d;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const s=[],n=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:r}=o.pointLabels,l={extra:So(o)/2,additionalAngle:a?C/n:0};let h;for(let o=0;o<n;o++){l.padding=i[o],l.size=e[o];const n=Oo(t,o,l);s.push(n),"auto"===r&&(n.visible=Ao(n,h),n.visible&&(h=n))}return s}(t,s,o)}function Co(t,e,i,s,n){const o=Math.abs(Math.sin(i)),a=Math.abs(Math.cos(i));let r=0,l=0;s.start<e.l?(r=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-r)):s.end>e.r&&(r=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+r)),n.start<e.t?(l=(e.t-n.start)/a,t.t=Math.min(t.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function Oo(t,e,i){const s=t.drawingArea,{extra:n,additionalAngle:o,padding:a,size:r}=i,l=t.getPointPosition(e,s+n+a,o),h=Math.round(Y(G(l.angle+E))),c=function(t,e,i){90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e);return t}(l.y,r.h,h),d=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(h),u=function(t,e,i){"right"===i?t-=e:"center"===i&&(t-=e/2);return t}(l.x,r.w,d);return{visible:!0,x:l.x,y:c,textAlign:d,left:u,top:c,right:u+r.w,bottom:c+r.h}}function Ao(t,e){if(!e)return!0;const{left:i,top:s,right:n,bottom:o}=t;return!(Re({x:i,y:s},e)||Re({x:i,y:o},e)||Re({x:n,y:s},e)||Re({x:n,y:o},e))}function To(t,e,i){const{left:n,top:o,right:a,bottom:r}=i,{backdropColor:l}=e;if(!s(l)){const i=wi(e.borderRadius),s=ki(e.backdropPadding);t.fillStyle=l;const h=n-s.left,c=o-s.top,d=a-n+s.width,u=r-o+s.height;Object.values(i).some((t=>0!==t))?(t.beginPath(),He(t,{x:h,y:c,w:d,h:u,radius:i}),t.fill()):t.fillRect(h,c,d,u)}}function Lo(t,e,i,s){const{ctx:n}=t;if(i)n.arc(t.xCenter,t.yCenter,e,0,O);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let o=1;o<s;o++)i=t.getPointPosition(o,e),n.lineTo(i.x,i.y)}}class Eo extends xo{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ae.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ki(So(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=a(t)&&!isNaN(t)?t:0,this.max=a(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/So(this.options))}generateTickLabels(t){xo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=d(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Do(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return G(t*(O/(this._pointLabels.length||1))+$(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(s(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(s(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return Ci(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-E+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:n}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:n}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Lo(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:n}=e,o=this._pointLabels.length;let a,r,l;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:s}}=t;for(let n=e-1;n>=0;n--){const e=t._pointLabelItems[n];if(!e.visible)continue;const o=s.setContext(t.getPointLabelContext(n));To(i,o,e);const a=Si(o.font),{x:r,y:l,textAlign:h}=e;Ne(i,t._pointLabels[n],r,l+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}(this,o),s.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){r=this.getDistanceFromCenterForValue(t.value);const i=this.getContext(e),a=s.setContext(i),l=n.setContext(i);!function(t,e,i,s,n){const o=t.ctx,a=e.circular,{color:r,lineWidth:l}=e;!a&&!s||!r||!l||i<0||(o.save(),o.strokeStyle=r,o.lineWidth=l,o.setLineDash(n.dash),o.lineDashOffset=n.dashOffset,o.beginPath(),Lo(t,i,a,s),o.closePath(),o.stroke(),o.restore())}(this,a,r,o,l)}})),i.display){for(t.save(),a=o-1;a>=0;a--){const s=i.setContext(this.getPointLabelContext(a)),{color:n,lineWidth:o}=s;o&&n&&(t.lineWidth=o,t.strokeStyle=n,t.setLineDash(s.borderDash),t.lineDashOffset=s.borderDashOffset,r=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,r),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let n,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((s,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const r=i.setContext(this.getContext(a)),l=Si(r.font);if(n=this.getDistanceFromCenterForValue(this.ticks[a].value),r.showLabelBackdrop){t.font=l.string,o=t.measureText(s.label).width,t.fillStyle=r.backdropColor;const e=ki(r.backdropPadding);t.fillRect(-o/2-e.left,-n-l.size/2-e.top,o+e.width,l.size+e.height)}Ne(t,s.label,0,-n,l,{color:r.color,strokeColor:r.textStrokeColor,strokeWidth:r.textStrokeWidth})})),t.restore()}drawTitle(){}}const Ro={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Io=Object.keys(Ro);function zo(t,e){return t-e}function Fo(t,e){if(s(e))return null;const i=t._adapter,{parser:n,round:o,isoWeekday:r}=t._parseOpts;let l=e;return"function"==typeof n&&(l=n(l)),a(l)||(l="string"==typeof n?i.parse(l,n):i.parse(l)),null===l?null:(o&&(l="week"!==o||!N(r)&&!0!==r?i.startOf(l,o):i.startOf(l,"isoWeek",r)),+l)}function Vo(t,e,i,s){const n=Io.length;for(let o=Io.indexOf(t);o<n-1;++o){const t=Ro[Io[o]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=s)return Io[o]}return Io[n-1]}function Bo(t,e,i){if(i){if(i.length){const{lo:s,hi:n}=et(i,e);t[i[s]>=e?i[s]:i[n]]=!0}}else t[e]=!0}function Wo(t,e,i){const s=[],n={},o=e.length;let a,r;for(a=0;a<o;++a)r=e[a],n[r]=a,s.push({value:r,major:!1});return 0!==o&&i?function(t,e,i,s){const n=t._adapter,o=+n.startOf(e[0].value,s),a=e[e.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,s))l=i[r],l>=0&&(e[l].major=!0);return e}(t,s,n,i):s}class No extends Js{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Rn._date(t.adapters.date);s.init(e),b(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Fo(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:r}=this.getUserBounds();function l(t){o||isNaN(t.min)||(s=Math.min(s,t.min)),r||isNaN(t.max)||(n=Math.max(n,t.max))}o&&r||(l(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||l(this.getMinMax(!1))),s=a(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),n=a(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=nt(s,n,this.max);return this._unit=e.unit||(i.autoSkip?Vo(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,e,i,s,n){for(let o=Io.length-1;o>=Io.indexOf(i);o--){const i=Io[o];if(Ro[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return Io[i?Io.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=Io.indexOf(t)+1,i=Io.length;e<i;++e)if(Ro[Io[e]].common)return Io[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&o.reverse(),Wo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,s=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=J(s,0,o),n=J(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,n=s.time,o=n.unit||Vo(n.minUnit,e,i,this._getLabelCapacity(e)),a=l(s.ticks.stepSize,1),r="week"===o&&n.isoWeekday,h=N(r)||!0===r,c={};let d,u,f=e;if(h&&(f=+t.startOf(f,"isoWeek",r)),f=+t.startOf(f,h?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g="data"===s.ticks.source&&this.getDataTimestamps();for(d=f,u=0;d<i;d=+t.add(d,a,o),u++)Bo(c,d,g);return d!==i&&"ticks"!==s.bounds&&1!==u||Bo(c,d,g),Object.keys(c).sort(zo).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,n=e||i[s];return this._adapter.format(t,n)}_tickFormatFunction(t,e,i,s){const n=this.options,o=n.ticks.callback;if(o)return d(o,[t,e,i],this);const a=n.time.displayFormats,r=this._unit,l=this._majorUnit,h=r&&a[r],c=l&&a[l],u=i[e],f=l&&c&&u&&u.major;return this._adapter.format(t,s||(f?c:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=$(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*n+a*o,h:i*o+a*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,Wo(this,[t],this._majorUnit),s),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Fo(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lt(t.sort(zo))}}function Ho(t,e,i){let s,n,o,a,r=0,l=t.length-1;i?(e>=t[r].pos&&e<=t[l].pos&&({lo:r,hi:l}=it(t,"pos",e)),({pos:s,time:o}=t[r]),({pos:n,time:a}=t[l])):(e>=t[r].time&&e<=t[l].time&&({lo:r,hi:l}=it(t,"time",e)),({time:s,pos:o}=t[r]),({time:n,pos:a}=t[l]));const h=n-s;return h?o+(a-o)*(e-s)/h:o}var jo=Object.freeze({__proto__:null,CategoryScale:class extends Js{static id="category";static defaults={ticks:{callback:po}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(s(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:J(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:go(i,t,l(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)s.push({value:i});return s}getLabelForValue(t){return po.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:bo,LogarithmicScale:ko,RadialLinearScale:Eo,TimeScale:No,TimeSeriesScale:class extends No{static id="timeseries";static defaults=No.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ho(e,this.min),this._tableRange=Ho(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],n=[];let o,a,r,l,h;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=i&&s.push(l);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],r=s[o-1],l=s[o],Math.round((h+r)/2)!==l&&n.push({time:l,pos:o/(a-1)});return n}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ho(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Ho(this._table,i*this._tableRange+this._minPos,!0)}}});const $o=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Yo=$o.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function Uo(t){return $o[t%$o.length]}function Xo(t){return Yo[t%Yo.length]}function qo(t){let e=0;return(i,s)=>{const n=t.getDatasetMeta(s).controller;n instanceof jn?e=function(t,e){return t.backgroundColor=t.data.map((()=>Uo(e++))),e}(i,e):n instanceof $n?e=function(t,e){return t.backgroundColor=t.data.map((()=>Xo(e++))),e}(i,e):n&&(e=function(t,e){return t.borderColor=Uo(e),t.backgroundColor=Xo(e),++e}(i,e))}}function Ko(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Go={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:s},options:n}=t.config,{elements:o}=n;if(!i.forceOverride&&(Ko(s)||(a=n)&&(a.borderColor||a.backgroundColor)||o&&Ko(o)))return;var a;const r=qo(t);s.forEach(r)}};function Zo(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Jo(t){t.data.datasets.forEach((t=>{Zo(t)}))}var Qo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void Jo(t);const n=t.width;t.data.datasets.forEach(((e,o)=>{const{_data:a,indexAxis:r}=e,l=t.getDatasetMeta(o),h=a||e.data;if("y"===Pi([r,t.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const c=t.scales[l.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:d,count:u}=function(t,e){const i=e.length;let s,n=0;const{iScale:o}=t,{min:a,max:r,minDefined:l,maxDefined:h}=o.getUserBounds();return l&&(n=J(it(e,o.axis,a).lo,0,i-1)),s=h?J(it(e,o.axis,r).hi+1,n,i)-n:i-n,{start:n,count:s}}(l,h);if(u<=(i.threshold||4*n))return void Zo(e);let f;switch(s(a)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":f=function(t,e,i,s,n){const o=n.samples||s;if(o>=i)return t.slice(e,e+i);const a=[],r=(i-2)/(o-2);let l=0;const h=e+i-1;let c,d,u,f,g,p=e;for(a[l++]=t[p],c=0;c<o-2;c++){let s,n=0,o=0;const h=Math.floor((c+1)*r)+1+e,m=Math.min(Math.floor((c+2)*r)+1,i)+e,x=m-h;for(s=h;s<m;s++)n+=t[s].x,o+=t[s].y;n/=x,o/=x;const b=Math.floor(c*r)+1+e,_=Math.min(Math.floor((c+1)*r)+1,i)+e,{x:y,y:v}=t[p];for(u=f=-1,s=b;s<_;s++)f=.5*Math.abs((y-n)*(t[s].y-v)-(y-t[s].x)*(o-v)),f>u&&(u=f,d=t[s],g=s);a[l++]=d,p=g}return a[l++]=t[h],a}(h,d,u,n,i);break;case"min-max":f=function(t,e,i,n){let o,a,r,l,h,c,d,u,f,g,p=0,m=0;const x=[],b=e+i-1,_=t[e].x,y=t[b].x-_;for(o=e;o<e+i;++o){a=t[o],r=(a.x-_)/y*n,l=a.y;const e=0|r;if(e===h)l<f?(f=l,c=o):l>g&&(g=l,d=o),p=(m*p+a.x)/++m;else{const i=o-1;if(!s(c)&&!s(d)){const e=Math.min(c,d),s=Math.max(c,d);e!==u&&e!==i&&x.push({...t[e],x:p}),s!==u&&s!==i&&x.push({...t[s],x:p})}o>0&&i!==u&&x.push(t[i]),x.push(a),h=e,m=0,f=g=l,c=d=u=o}}return x}(h,d,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=f}))},destroy(t){Jo(t)}};function ta(t,e,i,s){if(s)return;let n=e[t],o=i[t];return"angle"===t&&(n=G(n),o=G(o)),{property:t,start:n,end:o}}function ea(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ia(t,e,i,s){return t&&e?s(t[i],e[i]):t?t[i]:e?e[i]:0}function sa(t,e){let i=[],s=!1;return n(t)?(s=!0,i=t):i=function(t,e){const{x:i=null,y:s=null}=t||{},n=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=ea(t,e,n);const a=n[t],r=n[e];null!==s?(o.push({x:a.x,y:s}),o.push({x:r.x,y:s})):null!==i&&(o.push({x:i,y:a.y}),o.push({x:i,y:r.y}))})),o}(t,e),i.length?new no({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function na(t){return t&&!1!==t.fill}function oa(t,e,i){let s=t[e].fill;const n=[e];let o;if(!i)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!a(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function aa(t,e,i){const s=function(t){const e=t.options,i=e.fill;let s=l(i&&i.target,i);void 0===s&&(s=!!e.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(t);if(o(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return a(n)&&Math.floor(n)===n?function(t,e,i,s){"-"!==t&&"+"!==t||(i=e+i);if(i===e||i<0||i>=s)return!1;return i}(s[0],e,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function ra(t,e,i){const s=[];for(let n=0;n<i.length;n++){const o=i[n],{first:a,last:r,point:l}=la(o,e,"x");if(!(!l||a&&r))if(a)s.unshift(l);else if(t.push(l),!r)break}t.push(...s)}function la(t,e,i){const s=t.interpolate(e,i);if(!s)return{};const n=s[i],o=t.segments,a=t.points;let r=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],s=a[e.start][i],h=a[e.end][i];if(tt(n,s,h)){r=n===s,l=n===h;break}}return{first:r,last:l,point:s}}class ha{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:n,radius:o}=this;return e=e||{start:0,end:O},t.arc(s,n,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,n=t.angle;return{x:e+Math.cos(n)*s,y:i+Math.sin(n)*s,angle:n}}}function ca(t){const{chart:e,fill:i,line:s}=t;if(a(i))return function(t,e){const i=t.getDatasetMeta(e),s=i&&t.isDatasetVisible(e);return s?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:s}=t,n=[],o=s.segments,a=s.points,r=function(t,e){const i=[],s=t.getMatchingVisibleMetas("line");for(let t=0;t<s.length;t++){const n=s[t];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}(e,i);r.push(sa({x:null,y:e.bottom},s));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)ra(n,a[t],r)}return new no({points:n,options:{}})}(t);if("shape"===i)return!0;const n=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:i}=t,s=e.options,n=e.getLabels().length,a=s.reverse?e.max:e.min,r=function(t,e,i){let s;return s="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:o(t)?t.value:e.getBaseValue(),s}(i,e,a),l=[];if(s.grid.circular){const t=e.getPointPositionForValue(0,a);return new ha({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(r)})}for(let t=0;t<n;++t)l.push(e.getPointPositionForValue(t,r));return l}(t);return function(t){const{scale:e={},fill:i}=t,s=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:o(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(a(s)){const t=e.isHorizontal();return{x:t?s:null,y:t?null:s}}return null}(t)}(t);return n instanceof ha?n:sa(n,s)}function da(t,e,i){const s=ca(e),{line:n,scale:o,axis:a}=e,r=n.options,l=r.fill,h=r.backgroundColor,{above:c=h,below:d=h}=l||{};s&&n.points.length&&(Ie(t,i),function(t,e){const{line:i,target:s,above:n,below:o,area:a,scale:r}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&o!==n&&(ua(t,s,a.top),fa(t,{line:i,target:s,color:n,scale:r,property:l}),t.restore(),t.save(),ua(t,s,a.bottom));fa(t,{line:i,target:s,color:o,scale:r,property:l}),t.restore()}(t,{line:n,target:s,above:c,below:d,area:i,scale:o,axis:a}),ze(t))}function ua(t,e,i){const{segments:s,points:n}=e;let o=!0,a=!1;t.beginPath();for(const r of s){const{start:s,end:l}=r,h=n[s],c=n[ea(s,l,n)];o?(t.moveTo(h.x,h.y),o=!1):(t.lineTo(h.x,i),t.lineTo(h.x,h.y)),a=!!e.pathSegment(t,r,{move:a}),a?t.closePath():t.lineTo(c.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function fa(t,e){const{line:i,target:s,property:n,color:o,scale:a}=e,r=function(t,e,i){const s=t.segments,n=t.points,o=e.points,a=[];for(const t of s){let{start:s,end:r}=t;r=ea(s,r,n);const l=ta(i,n[s],n[r],t.loop);if(!e.segments){a.push({source:t,target:l,start:n[s],end:n[r]});continue}const h=Ii(e,l);for(const e of h){const s=ta(i,o[e.start],o[e.end],e.loop),r=Ri(t,n,s);for(const t of r)a.push({source:t,target:e,start:{[i]:ia(l,s,"start",Math.max)},end:{[i]:ia(l,s,"end",Math.min)}})}}return a}(i,s,n);for(const{source:e,target:l,start:h,end:c}of r){const{style:{backgroundColor:r=o}={}}=e,d=!0!==s;t.save(),t.fillStyle=r,ga(t,a,d&&ta(n,h,c)),t.beginPath();const u=!!i.pathSegment(t,e);let f;if(d){u?t.closePath():pa(t,s,c,n);const e=!!s.pathSegment(t,l,{move:u,reverse:!0});f=u&&e,f||pa(t,s,h,n)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function ga(t,e,i){const{top:s,bottom:n}=e.chart.chartArea,{property:o,start:a,end:r}=i||{};"x"===o&&(t.beginPath(),t.rect(a,s,r-a,n-s),t.clip())}function pa(t,e,i,s){const n=e.interpolate(i,s);n&&t.lineTo(n.x,n.y)}var ma={id:"filler",afterDatasetsUpdate(t,e,i){const s=(t.data.datasets||[]).length,n=[];let o,a,r,l;for(a=0;a<s;++a)o=t.getDatasetMeta(a),r=o.dataset,l=null,r&&r.options&&r instanceof no&&(l={visible:t.isDatasetVisible(a),index:a,fill:aa(r,a,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:r}),o.$filler=l,n.push(l);for(a=0;a<s;++a)l=n[a],l&&!1!==l.fill&&(l.fill=oa(n,a,i.propagate))},beforeDraw(t,e,i){const s="beforeDraw"===i.drawTime,n=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&(i.line.updateControlPoints(o,i.axis),s&&i.fill&&da(t.ctx,i,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const s=t.getSortedVisibleDatasetMetas();for(let e=s.length-1;e>=0;--e){const i=s[e].$filler;na(i)&&da(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const s=e.meta.$filler;na(s)&&"beforeDatasetDraw"===i.drawTime&&da(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const xa=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}};class ba extends Hs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=d(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=Si(i.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:r}=xa(i,n);let l,h;e.font=s.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(o,n,a,r)+10):(h=this.maxHeight,l=this._fitCols(o,s,a,r)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.lineWidths=[0],h=s+a;let c=t;n.textAlign="left",n.textBaseline="middle";let d=-1,u=-h;return this.legendItems.forEach(((t,f)=>{const g=i+e/2+n.measureText(t.text).width;(0===f||l[l.length-1]+g+2*a>o)&&(c+=h,l[l.length-(f>0?0:1)]=0,u+=h,d++),r[f]={left:0,top:u,row:d,width:g,height:s},l[l.length-1]+=g+a})),c}_fitCols(t,e,i,s){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-t;let c=a,d=0,u=0,f=0,g=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:p,itemHeight:m}=function(t,e,i,s,n){const o=function(t,e,i,s){let n=t.text;n&&"string"!=typeof n&&(n=n.reduce(((t,e)=>t.length>e.length?t:e)));return e+i.size/2+s.measureText(n).width}(s,t,e,i),a=function(t,e,i){let s=t;"string"!=typeof e.text&&(s=_a(e,i));return s}(n,s,e.lineHeight);return{itemWidth:o,itemHeight:a}}(i,e,n,t,s);o>0&&u+m+2*a>h&&(c+=d+a,l.push({width:d,height:u}),f+=d+a,g++,d=u=0),r[o]={left:f,top:u,col:g,width:p,height:m},d=Math.max(d,p),u+=m+a})),c+=d,l.push({width:d,height:u}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:n}}=this,o=Oi(n,this.left,this.width);if(this.isHorizontal()){let n=0,a=ft(i,this.left+s,this.right-this.lineWidths[n]);for(const r of e)n!==r.row&&(n=r.row,a=ft(i,this.left+s,this.right-this.lineWidths[n])),r.top+=this.top+t+s,r.left=o.leftForLtr(o.x(a),r.width),a+=r.width+s}else{let n=0,a=ft(i,this.top+t+s,this.bottom-this.columnSizes[n].height);for(const r of e)r.col!==n&&(n=r.col,a=ft(i,this.top+t+s,this.bottom-this.columnSizes[n].height)),r.top=a,r.left+=this.left+s,r.left=o.leftForLtr(o.x(r.left),r.width),a+=r.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ie(t,this),this._draw(),ze(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:n,labels:o}=t,a=ue.color,r=Oi(t.rtl,this.left,this.width),h=Si(o.font),{padding:c}=o,d=h.size,u=d/2;let f;this.drawTitle(),s.textAlign=r.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=xa(o,d),x=this.isHorizontal(),b=this._computeTitleHeight();f=x?{x:ft(n,this.left+c,this.right-i[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:ft(n,this.top+b+c,this.bottom-e[0].height),line:0},Ai(this.ctx,t.textDirection);const _=m+c;this.legendItems.forEach(((y,v)=>{s.strokeStyle=y.fontColor,s.fillStyle=y.fontColor;const M=s.measureText(y.text).width,w=r.textAlign(y.textAlign||(y.textAlign=o.textAlign)),k=g+u+M;let S=f.x,P=f.y;r.setWidth(this.width),x?v>0&&S+k+c>this.right&&(P=f.y+=_,f.line++,S=f.x=ft(n,this.left+c,this.right-i[f.line])):v>0&&P+_>this.bottom&&(S=f.x=S+e[f.line].width+c,f.line++,P=f.y=ft(n,this.top+b+c,this.bottom-e[f.line].height));if(function(t,e,i){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;s.save();const n=l(i.lineWidth,1);if(s.fillStyle=l(i.fillStyle,a),s.lineCap=l(i.lineCap,"butt"),s.lineDashOffset=l(i.lineDashOffset,0),s.lineJoin=l(i.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=l(i.strokeStyle,a),s.setLineDash(l(i.lineDash,[])),o.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},l=r.xPlus(t,g/2);Ee(s,a,l,e+u,o.pointStyleWidth&&g)}else{const o=e+Math.max((d-p)/2,0),a=r.leftForLtr(t,g),l=wi(i.borderRadius);s.beginPath(),Object.values(l).some((t=>0!==t))?He(s,{x:a,y:o,w:g,h:p,radius:l}):s.rect(a,o,g,p),s.fill(),0!==n&&s.stroke()}s.restore()}(r.x(S),P,y),S=gt(w,S+g+u,x?S+k:this.right,t.rtl),function(t,e,i){Ne(s,i.text,t,e+m/2,h,{strikethrough:i.hidden,textAlign:r.textAlign(i.textAlign)})}(r.x(S),P,y),x)f.x+=k+c;else if("string"!=typeof y.text){const t=h.lineHeight;f.y+=_a(y,t)+c}else f.y+=_})),Ti(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Si(e.font),s=ki(e.padding);if(!e.display)return;const n=Oi(t.rtl,this.left,this.width),o=this.ctx,a=e.position,r=i.size/2,l=s.top+r;let h,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+l,c=ft(t.align,c,this.right-d);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);h=l+ft(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const u=ft(a,c,c+d);o.textAlign=n.textAlign(ut(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Ne(o,e.text,u,h,i)}_computeTitleHeight(){const t=this.options.title,e=Si(t.font),i=ki(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,n;if(tt(t,this.left,this.right)&&tt(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(s=n[i],tt(t,s.left,s.left+s.width)&&tt(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(n=i,null!==(s=o)&&null!==n&&s.datasetIndex===n.datasetIndex&&s.index===n.index);o&&!a&&d(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!a&&d(e.onHover,[t,i,this],this)}else i&&d(e.onClick,[t,i,this],this);var s,n}}function _a(t,e){return e*(t.text?t.text.length:0)}var ya={id:"legend",_element:ba,start(t,e,i){const s=t.legend=new ba({ctx:t.ctx,options:i,chart:t});as.configure(t,s,i),as.addBox(t,s)},stop(t){as.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;as.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(i?0:void 0),h=ki(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:a&&(r||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class va extends Hs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=n(i.text)?i.text.length:1;this._padding=ki(i.padding);const o=s*Si(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:n,options:o}=this,a=o.align;let r,l,h,c=0;return this.isHorizontal()?(l=ft(a,i,n),h=e+t,r=n-i):("left"===o.position?(l=i+t,h=ft(a,s,e),c=-.5*C):(l=n-t,h=ft(a,e,s),c=.5*C),r=s-e),{titleX:l,titleY:h,maxWidth:r,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Si(e.font),s=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:a,rotation:r}=this._drawArgs(s);Ne(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:r,textAlign:ut(e.align),textBaseline:"middle",translation:[n,o]})}}var Ma={id:"title",_element:va,start(t,e,i){!function(t,e){const i=new va({ctx:t.ctx,options:e,chart:t});as.configure(t,i,e),as.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;as.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;as.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wa=new WeakMap;var ka={id:"subtitle",start(t,e,i){const s=new va({ctx:t.ctx,options:i,chart:t});as.configure(t,s,i),as.addBox(t,s),wa.set(t,s)},stop(t){as.removeBox(t,wa.get(t)),wa.delete(t)},beforeUpdate(t,e,i){const s=wa.get(t);as.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sa={average(t){if(!t.length)return!1;let e,i,s=new Set,n=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();s.add(t.x),n+=t.y,++o}}return{x:[...s].reduce(((t,e)=>t+e))/s.size,y:n/o}},nearest(t,e){if(!t.length)return!1;let i,s,n,o=e.x,a=e.y,r=Number.POSITIVE_INFINITY;for(i=0,s=t.length;i<s;++i){const s=t[i].element;if(s&&s.hasValue()){const t=q(e,s.getCenterPoint());t<r&&(r=t,n=s)}}if(n){const t=n.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function Pa(t,e){return e&&(n(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Da(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ca(t,e){const{element:i,datasetIndex:s,index:n}=e,o=t.getDatasetMeta(s).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:t,label:a,parsed:o.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Oa(t,e){const i=t.chart.ctx,{body:s,footer:n,title:o}=t,{boxWidth:a,boxHeight:r}=e,l=Si(e.bodyFont),h=Si(e.titleFont),c=Si(e.footerFont),d=o.length,f=n.length,g=s.length,p=ki(e.padding);let m=p.height,x=0,b=s.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){m+=g*(e.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(b-g)*l.lineHeight+(b-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let _=0;const y=function(t){x=Math.max(x,i.measureText(t).width+_)};return i.save(),i.font=h.string,u(t.title,y),i.font=l.string,u(t.beforeBody.concat(t.afterBody),y),_=e.displayColors?a+2+e.boxPadding:0,u(s,(t=>{u(t.before,y),u(t.lines,y),u(t.after,y)})),_=0,i.font=c.string,u(t.footer,y),i.restore(),x+=p.width,{width:x,height:m}}function Aa(t,e,i,s){const{x:n,width:o}=i,{width:a,chartArea:{left:r,right:l}}=t;let h="center";return"center"===s?h=n<=(r+l)/2?"left":"right":n<=o/2?h="left":n>=a-o/2&&(h="right"),function(t,e,i,s){const{x:n,width:o}=s,a=i.caretSize+i.caretPadding;return"left"===t&&n+o+a>e.width||"right"===t&&n-o-a<0||void 0}(h,t,e,i)&&(h="center"),h}function Ta(t,e,i){const s=i.yAlign||e.yAlign||function(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Aa(t,e,i,s),yAlign:s}}function La(t,e,i,s){const{caretSize:n,caretPadding:o,cornerRadius:a}=t,{xAlign:r,yAlign:l}=i,h=n+o,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=wi(a);let g=function(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}(e,r);const p=function(t,e,i){let{y:s,height:n}=t;return"top"===e?s+=i:s-="bottom"===e?n+i:n/2,s}(e,l,h);return"center"===l?"left"===r?g+=h:"right"===r&&(g-=h):"left"===r?g-=Math.max(c,u)+n:"right"===r&&(g+=Math.max(d,f)+n),{x:J(g,0,s.width-e.width),y:J(p,0,s.height-e.height)}}function Ea(t,e,i){const s=ki(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function Ra(t){return Pa([],Da(t))}function Ia(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const za={beforeTitle:e,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:e,beforeBody:e,beforeLabel:e,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return s(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:e,afterBody:e,beforeFooter:e,footer:e,afterFooter:e};function Fa(t,e,i,s){const n=t[e].call(i,s);return void 0===n?za[e].call(i,s):n}class Va extends Hs{static positioners=Sa;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,n=new Os(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,Ci(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,s=Fa(i,"beforeTitle",this,t),n=Fa(i,"title",this,t),o=Fa(i,"afterTitle",this,t);let a=[];return a=Pa(a,Da(s)),a=Pa(a,Da(n)),a=Pa(a,Da(o)),a}getBeforeBody(t,e){return Ra(Fa(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return u(t,(t=>{const e={before:[],lines:[],after:[]},n=Ia(i,t);Pa(e.before,Da(Fa(n,"beforeLabel",this,t))),Pa(e.lines,Fa(n,"label",this,t)),Pa(e.after,Da(Fa(n,"afterLabel",this,t))),s.push(e)})),s}getAfterBody(t,e){return Ra(Fa(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Fa(i,"beforeFooter",this,t),n=Fa(i,"footer",this,t),o=Fa(i,"afterFooter",this,t);let a=[];return a=Pa(a,Da(s)),a=Pa(a,Da(n)),a=Pa(a,Da(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],n=[],o=[];let a,r,l=[];for(a=0,r=e.length;a<r;++a)l.push(Ca(this.chart,e[a]));return t.filter&&(l=l.filter(((e,s,n)=>t.filter(e,s,n,i)))),t.itemSort&&(l=l.sort(((e,s)=>t.itemSort(e,s,i)))),u(l,(e=>{const i=Ia(t.callbacks,e);s.push(Fa(i,"labelColor",this,e)),n.push(Fa(i,"labelPointStyle",this,e)),o.push(Fa(i,"labelTextColor",this,e))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(s.length){const t=Sa[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=Oa(this,i),a=Object.assign({},t,e),r=Ta(this.chart,i,a),l=La(i,a,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,n={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const n=this.getCaretPosition(t,i,s);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:r,topRight:l,bottomLeft:h,bottomRight:c}=wi(a),{x:d,y:u}=t,{width:f,height:g}=e;let p,m,x,b,_,y;return"center"===n?(_=u+g/2,"left"===s?(p=d,m=p-o,b=_+o,y=_-o):(p=d+f,m=p+o,b=_-o,y=_+o),x=p):(m="left"===s?d+Math.max(r,h)+o:"right"===s?d+f-Math.max(l,c)-o:this.caretX,"top"===n?(b=u,_=b-o,p=m-o,x=m+o):(b=u+g,_=b+o,p=m+o,x=m-o),y=b),{x1:p,x2:m,x3:x,y1:b,y2:_,y3:y}}drawTitle(t,e,i){const s=this.title,n=s.length;let o,a,r;if(n){const l=Oi(i.rtl,this.x,this.width);for(t.x=Ea(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",o=Si(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,r=0;r<n;++r)e.fillText(s[r],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,r+1===n&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,n){const a=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:l,boxWidth:h}=n,c=Si(n.bodyFont),d=Ea(this,"left",n),u=s.x(d),f=l<c.lineHeight?(c.lineHeight-l)/2:0,g=e.y+f;if(n.usePointStyle){const e={radius:Math.min(h,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=s.leftForLtr(u,h)+h/2,o=g+l/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,Le(t,e,i,o),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Le(t,e,i,o)}else{t.lineWidth=o(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const e=s.leftForLtr(u,h),i=s.leftForLtr(s.xPlus(u,1),h-2),r=wi(a.borderRadius);Object.values(r).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,He(t,{x:e,y:g,w:h,h:l,radius:r}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),He(t,{x:i,y:g+1,w:h-2,h:l-2,radius:r}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,g,h,l),t.strokeRect(e,g,h,l),t.fillStyle=a.backgroundColor,t.fillRect(i,g+1,h-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:r,boxWidth:l,boxPadding:h}=i,c=Si(i.bodyFont);let d=c.lineHeight,f=0;const g=Oi(i.rtl,this.x,this.width),p=function(i){e.fillText(i,g.x(t.x+f),t.y+d/2),t.y+=d+n},m=g.textAlign(o);let x,b,_,y,v,M,w;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Ea(this,m,i),e.fillStyle=i.bodyColor,u(this.beforeBody,p),f=a&&"right"!==m?"center"===o?l/2+h:l+2+h:0,y=0,M=s.length;y<M;++y){for(x=s[y],b=this.labelTextColors[y],e.fillStyle=b,u(x.before,p),_=x.lines,a&&_.length&&(this._drawColorBox(e,t,y,g,i),d=Math.max(c.lineHeight,r)),v=0,w=_.length;v<w;++v)p(_[v]),d=c.lineHeight;u(x.after,p)}f=0,d=c.lineHeight,u(this.afterBody,p),t.y-=n}drawFooter(t,e,i){const s=this.footer,n=s.length;let o,a;if(n){const r=Oi(i.rtl,this.x,this.width);for(t.x=Ea(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=r.textAlign(i.footerAlign),e.textBaseline="middle",o=Si(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<n;++a)e.fillText(s[a],r.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:n,yAlign:o}=this,{x:a,y:r}=t,{width:l,height:h}=i,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=wi(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+c,r),"top"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+l-d,r),e.quadraticCurveTo(a+l,r,a+l,r+d),"center"===o&&"right"===n&&this.drawCaret(t,e,i,s),e.lineTo(a+l,r+h-f),e.quadraticCurveTo(a+l,r+h,a+l-f,r+h),"bottom"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+u,r+h),e.quadraticCurveTo(a,r+h,a,r+h-u),"center"===o&&"left"===n&&this.drawCaret(t,e,i,s),e.lineTo(a,r+c),e.quadraticCurveTo(a,r,a+c,r),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,n=i&&i.y;if(s||n){const i=Sa[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=Oa(this,t),a=Object.assign({},i,this._size),r=Ta(e,t,a),l=La(t,a,r,e);s._to===l.x&&n._to===l.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ki(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,s,e),Ai(t,e.textDirection),n.y+=o.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),Ti(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!f(i,s),o=this._positionChanged(s,e);(n||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(t,n,e,i),a=this._positionChanged(o,t),r=e||!f(o,n)||a;return r&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_getActiveElements(t,e,i,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:n}=this,o=Sa[n.position].call(this,t,e);return!1!==o&&(i!==o.x||s!==o.y)}}var Ba={id:"tooltip",_element:Va,positioners:Sa,afterInit(t,e,i){i&&(t.tooltip=new Va({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:za},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return An.register(Yn,jo,fo,t),An.helpers={...Wi},An._adapters=Rn,An.Animation=Cs,An.Animations=Os,An.animator=bt,An.controllers=en.controllers.items,An.DatasetController=Ns,An.Element=Hs,An.elements=fo,An.Interaction=Xi,An.layouts=as,An.platforms=Ss,An.Scale=Js,An.Ticks=ae,Object.assign(An,Yn,jo,fo,t,Ss),An.Chart=An,"undefined"!=typeof window&&(window.Chart=An),An}));
//# sourceMappingURL=chart.umd.js.map

!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";
/**
   * [chartjs-plugin-labels]{@link https://github.com/DavideViolante/chartjs-plugin-labels}
   *
   * @version 3.0.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com], Davide Violante
   * @copyright Chen, Yi-Cyuan 2017-2018
   * @license MIT
   */!function(){if("undefined"==typeof Chart)return void console.error("Cannot find Chart object.");"function"!=typeof Object.assign&&(Object.assign=function(t){if(!t)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let t=1;t<arguments.length;t++){const o=arguments[t];if(o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e});const t={};function e(){this.renderToDataset=this.renderToDataset.bind(this)}["pie","doughnut","polarArea","bar"].forEach((function(e){t[e]=!0})),e.prototype.setup=function(t,e){this.chart=t,this.ctx=t.ctx,this.args={},this.barTotal={};const o=t.config.options;this.options=Object.assign({position:"default",precision:0,fontSize:o.font?o.font.size:12,fontColor:o.color||"#333333",fontStyle:o.font?o.font.style:"normal",fontFamily:o.font?o.font.family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",shadowOffsetX:3,shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.3)",shadowBlur:6,images:[],outsidePadding:2,textMargin:2,overlap:!0},e),"bar"===t.config.type&&(this.options.position="default",this.options.arc=!1,this.options.overlap=!0)},e.prototype.render=function(){this.labelBounds=[],this.chart.data.datasets.forEach(this.renderToDataset)},e.prototype.renderToDataset=function(t,e){this.totalPercentage=0,this.total=null;const o=this.args[e];o.meta.data.forEach(function(e,n){this.renderToElement(t,o,e,n)}.bind(this))},e.prototype.renderToElement=function(t,e,o,n){if(!this.shouldRenderToElement(e.meta,o))return;this.percentage=null;const i=this.getLabel(t,o,n);if(!i)return;const s=this.ctx;s.save(),s.font=Chart.helpers.fontString(this.options.fontSize,this.options.fontStyle,this.options.fontFamily);const r=this.getRenderInfo(o,i);this.drawable(o,i,r)?(s.beginPath(),s.fillStyle=this.getFontColor(t,o,n),this.renderLabel(i,r),s.restore()):s.restore()},e.prototype.renderLabel=function(t,e){return this.options.arc?this.renderArcLabel(t,e):this.renderBaseLabel(t,e)},e.prototype.renderBaseLabel=function(t,e){const o=this.ctx;if("object"==typeof t)o.drawImage(t,e.x-t.width/2,e.y-t.height/2,t.width,t.height);else{o.save(),o.textBaseline="top",o.textAlign="center",this.options.textShadow&&(o.shadowOffsetX=this.options.shadowOffsetX,o.shadowOffsetY=this.options.shadowOffsetY,o.shadowColor=this.options.shadowColor,o.shadowBlur=this.options.shadowBlur);const n=t.split("\n");for(let t=0;t<n.length;t++){const i=e.y-this.options.fontSize/2*n.length+this.options.fontSize*t;o.fillText(n[t],e.x,i)}o.restore()}},e.prototype.renderArcLabel=function(t,e){const o=this.ctx,n=e.radius,i=e.view;if(o.save(),o.translate(i.x,i.y),"string"==typeof t){o.rotate(e.startAngle),o.textBaseline="middle",o.textAlign="left";const i=t.split("\n");let s=0;const r=[];let a,h=0;"border"===this.options.position&&(h=(i.length-1)*this.options.fontSize/2);for(let t=0;t<i.length;++t)a=o.measureText(i[t]),a.width>s&&(s=a.width),r.push(a.width);for(let t=0;t<i.length;++t){const e=i[t],l=(i.length-1-t)*-this.options.fontSize+h;o.save();const c=(s-r[t])/2;o.rotate(c/n);for(let t=0;t<e.length;t++){const i=e.charAt(t);a=o.measureText(i),o.save(),o.translate(0,-1*n),o.fillText(i,0,l),o.restore(),o.rotate(a.width/n)}o.restore()}}else o.rotate((i.startAngle+Math.PI/2+e.endAngle)/2),o.translate(0,-1*n),this.renderLabel(t,{x:0,y:0});o.restore()},e.prototype.shouldRenderToElement=function(t,e){return!t.hidden&&(this.options.showZero||"polarArea"===this.chart.config.type?0!==e.outerRadius:0!==e.circumference)},e.prototype.getLabel=function(t,e,o){let n;if("function"==typeof this.options.render)n=this.options.render({label:this.chart.config.data.labels[o],value:t.data[o],percentage:this.getPercentage(t,e,o),dataset:t,index:o});else switch(this.options.render){case"value":n=t.data[o];break;case"label":n=this.chart.config.data.labels[o];break;case"image":n=this.options.images[o]?this.loadImage(this.options.images[o]):"";break;case"percentage":default:n=this.getPercentage(t,e,o)+"%"}return"object"==typeof n?n=this.loadImage(n):n&&(n=n.toString()),n},e.prototype.getFontColor=function(t,e,o){let n=this.options.fontColor;return"function"==typeof n?n=n({label:this.chart.config.data.labels[o],value:t.data[o],percentage:this.getPercentage(t,e,o),backgroundColor:t.backgroundColor[o],dataset:t,index:o}):"string"!=typeof n&&(n=n[o]||this.chart.config.options.color),n},e.prototype.getPercentage=function(t,e,o){if(this.percentage)return this.percentage;let n;if("polarArea"===this.chart.config.type||"doughnut"===this.chart.config.type||"pie"===this.chart.config.type){if(!this.total){this.total=0;for(let e=0;e<t.data.length;++e)this.total+=t.data[e]}n=t.data[o]/this.total*100}else if("bar"===this.chart.config.type){if(!this.barTotal[o]){this.barTotal[o]=0;for(let t=0;t<this.chart.data.datasets.length;++t)this.barTotal[o]+=this.chart.data.datasets[t].data[o]}n=t.data[o]/this.barTotal[o]*100}else n=e.circumference/this.chart.config.options.circumference*100;return n=parseFloat(n.toFixed(this.options.precision)),this.options.showActualPercentages||("bar"===this.chart.config.type&&(this.totalPercentage=this.barTotalPercentage[o]||0),this.totalPercentage+=n,this.totalPercentage>100&&(n-=this.totalPercentage-100,n=parseFloat(n.toFixed(this.options.precision))),"bar"===this.chart.config.type&&(this.barTotalPercentage[o]=this.totalPercentage)),this.percentage=n,n},e.prototype.getRenderInfo=function(t,e){return"bar"===this.chart.config.type?this.getBarRenderInfo(t,e):this.options.arc?this.getArcRenderInfo(t,e):this.getBaseRenderInfo(t,e)},e.prototype.getBaseRenderInfo=function(t,e){if("outside"===this.options.position||"border"===this.options.position){let o,n={};const i=t,s=i.startAngle+(i.endAngle-i.startAngle)/2,r=i.outerRadius/2;if("border"===this.options.position?o=(i.outerRadius-r)/2+r:"outside"===this.options.position&&(o=i.outerRadius-r+r+this.options.textMargin),n={x:i.x+Math.cos(s)*o,y:i.y+Math.sin(s)*o},"outside"===this.options.position){const t=this.options.textMargin+this.measureLabel(e).width/2;n.x+=n.x<i.x?-t:t}return n}return t.tooltipPosition()},e.prototype.getArcRenderInfo=function(t,e){let o;const n=t;o="outside"===this.options.position?n.outerRadius+this.options.fontSize+this.options.textMargin:"border"===this.options.position?(n.outerRadius/2+n.outerRadius)/2:(n.innerRadius+n.outerRadius)/2;let i=n.startAngle,s=n.endAngle;const r=s-i;i+=Math.PI/2,s+=Math.PI/2;return i+=(s-(this.measureLabel(e).width/o+i))/2,{radius:o,startAngle:i,endAngle:s,totalAngle:r,view:n}},e.prototype.getBarRenderInfo=function(t,e){const o=t.tooltipPosition();return o.y-=this.measureLabel(e).height/2+this.options.textMargin,o},e.prototype.drawable=function(t,e,o){if(this.options.overlap)return!0;if(this.options.arc)return o.endAngle-o.startAngle<=o.totalAngle;{const n=this.measureLabel(e),i=o.x-n.width/2,s=o.x+n.width/2,r=o.y-n.height/2,a=o.y+n.height/2;return"outside"===this.options.renderInfo?this.outsideInRange(i,s,r,a):t.inRange(i,r)&&t.inRange(i,a)&&t.inRange(s,r)&&t.inRange(s,a)}},e.prototype.outsideInRange=function(t,e,o,n){const i=this.labelBounds;for(let s=0;s<i.length;++s){const r=i[s];let a=[[t,o],[t,n],[e,o],[e,n]];for(let t=0;t<a.length;++t){const e=a[t][0],o=a[t][1];if(e>=r.left&&e<=r.right&&o>=r.top&&o<=r.bottom)return!1}a=[[r.left,r.top],[r.left,r.bottom],[r.right,r.top],[r.right,r.bottom]];for(let i=0;i<a.length;++i){const s=a[i][0],r=a[i][1];if(s>=t&&s<=e&&r>=o&&r<=n)return!1}}return i.push({left:t,right:e,top:o,bottom:n}),!0},e.prototype.measureLabel=function(t){if("object"==typeof t)return{width:t.width,height:t.height};{let e=0;const o=t.split("\n");for(let t=0;t<o.length;++t){const n=this.ctx.measureText(o[t]);n.width>e&&(e=n.width)}return{width:e,height:this.options.fontSize*o.length}}},e.prototype.loadImage=function(t){const e=new Image;return e.src=t.src,e.width=t.width,e.height=t.height,e},Chart.register({id:"labels",beforeDatasetsUpdate:function(o,n,i){if(!t[o.config.type])return;Array.isArray(i)||(i=[i]);const s=i.length;o._labels&&s===o._labels.length||(o._labels=i.map((function(){return new e})));let r=!1,a=0;for(let t=0;t<s;++t){const e=o._labels[t];if(e.setup(o,i[t]),"outside"===e.options.position){r=!0;const t=1.5*e.options.fontSize+e.options.outsidePadding;t>a&&(a=t)}}r&&(o.chartArea.top+=a,o.chartArea.bottom-=a)},afterDatasetUpdate:function(e,o){t[e.config.type]&&e._labels.forEach((function(t){t.args[o.index]=o}))},beforeDraw:function(e){t[e.config.type]&&e._labels.forEach((function(t){t.barTotalPercentage={}}))},afterDatasetsDraw:function(e){t[e.config.type]&&e._labels.forEach((function(t){t.render()}))}})}()}));

   /*!
 * chartjs-plugin-datalabels v2.1.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).ChartDataLabels=e(t.Chart.helpers,t.Chart)}(this,(function(t,e){"use strict";var r=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),a=function(e){var r,a=[];for(e=[].concat(e);e.length;)"string"==typeof(r=e.pop())?a.unshift.apply(a,r.split("\n")):Array.isArray(r)?e.push.apply(e,r):t.isNullOrUndef(e)||a.unshift(""+r);return a},o=function(t,e,r){var a,o=[].concat(e),n=o.length,i=t.font,l=0;for(t.font=r.string,a=0;a<n;++a)l=Math.max(t.measureText(o[a]).width,l);return t.font=i,{height:n*r.lineHeight,width:l}},n=function(t,e,r){return Math.max(t,Math.min(e,r))},i=function(t,e){var r,a,o,n,i=t.slice(),l=[];for(r=0,o=e.length;r<o;++r)n=e[r],-1===(a=i.indexOf(n))?l.push([n,1]):i.splice(a,1);for(r=0,o=i.length;r<o;++r)l.push([i[r],-1]);return l};function l(t,e){var r=e.x,a=e.y;if(null===r)return{x:0,y:-1};if(null===a)return{x:1,y:0};var o=t.x-r,n=t.y-a,i=Math.sqrt(o*o+n*n);return{x:i?o/i:0,y:i?n/i:-1}}function s(t,e,r){var a=0;return t<r.left?a|=1:t>r.right&&(a|=2),e<r.top?a|=8:e>r.bottom&&(a|=4),a}function u(t,e){var r,a,o=e.anchor,n=t;return e.clamp&&(n=function(t,e){for(var r,a,o,n=t.x0,i=t.y0,l=t.x1,u=t.y1,d=s(n,i,e),c=s(l,u,e);d|c&&!(d&c);)8&(r=d||c)?(a=n+(l-n)*(e.top-i)/(u-i),o=e.top):4&r?(a=n+(l-n)*(e.bottom-i)/(u-i),o=e.bottom):2&r?(o=i+(u-i)*(e.right-n)/(l-n),a=e.right):1&r&&(o=i+(u-i)*(e.left-n)/(l-n),a=e.left),r===d?d=s(n=a,i=o,e):c=s(l=a,u=o,e);return{x0:n,x1:l,y0:i,y1:u}}(n,e.area)),"start"===o?(r=n.x0,a=n.y0):"end"===o?(r=n.x1,a=n.y1):(r=(n.x0+n.x1)/2,a=(n.y0+n.y1)/2),function(t,e,r,a,o){switch(o){case"center":r=a=0;break;case"bottom":r=0,a=1;break;case"right":r=1,a=0;break;case"left":r=-1,a=0;break;case"top":r=0,a=-1;break;case"start":r=-r,a=-a;break;case"end":break;default:o*=Math.PI/180,r=Math.cos(o),a=Math.sin(o)}return{x:t,y:e,vx:r,vy:a}}(r,a,t.vx,t.vy,e.align)}var d=function(t,e){var r=(t.startAngle+t.endAngle)/2,a=Math.cos(r),o=Math.sin(r),n=t.innerRadius,i=t.outerRadius;return u({x0:t.x+a*n,y0:t.y+o*n,x1:t.x+a*i,y1:t.y+o*i,vx:a,vy:o},e)},c=function(t,e){var r=l(t,e.origin),a=r.x*t.options.radius,o=r.y*t.options.radius;return u({x0:t.x-a,y0:t.y-o,x1:t.x+a,y1:t.y+o,vx:r.x,vy:r.y},e)},h=function(t,e){var r=l(t,e.origin),a=t.x,o=t.y,n=0,i=0;return t.horizontal?(a=Math.min(t.x,t.base),n=Math.abs(t.base-t.x)):(o=Math.min(t.y,t.base),i=Math.abs(t.base-t.y)),u({x0:a,y0:o+i,x1:a+n,y1:o,vx:r.x,vy:r.y},e)},f=function(t,e){var r=l(t,e.origin);return u({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:r.x,vy:r.y},e)},x=function(t){return Math.round(t*r)/r};function y(t,e){var r=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{x:r.xCenter,y:r.yCenter};var a=r.getBasePixel();return t.horizontal?{x:a,y:null}:{x:null,y:a}}function v(t,e,r){var a=r.backgroundColor,o=r.borderColor,n=r.borderWidth;(a||o&&n)&&(t.beginPath(),function(t,e,r,a,o,n){var i=Math.PI/2;if(n){var l=Math.min(n,o/2,a/2),s=e+l,u=r+l,d=e+a-l,c=r+o-l;t.moveTo(e,u),s<d&&u<c?(t.arc(s,u,l,-Math.PI,-i),t.arc(d,u,l,-i,0),t.arc(d,c,l,0,i),t.arc(s,c,l,i,Math.PI)):s<d?(t.moveTo(s,r),t.arc(d,u,l,-i,i),t.arc(s,u,l,i,Math.PI+i)):u<c?(t.arc(s,u,l,-Math.PI,0),t.arc(s,c,l,0,Math.PI)):t.arc(s,u,l,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,r)}else t.rect(e,r,a,o)}(t,x(e.x)+n/2,x(e.y)+n/2,x(e.w)-n,x(e.h)-n,r.borderRadius),t.closePath(),a&&(t.fillStyle=a,t.fill()),o&&n&&(t.strokeStyle=o,t.lineWidth=n,t.lineJoin="miter",t.stroke()))}function b(t,e,r){var a=t.shadowBlur,o=r.stroked,n=x(r.x),i=x(r.y),l=x(r.w);o&&t.strokeText(e,n,i,l),r.filled&&(a&&o&&(t.shadowBlur=0),t.fillText(e,n,i,l),a&&o&&(t.shadowBlur=a))}var _=function(t,e,r,a){var o=this;o._config=t,o._index=a,o._model=null,o._rects=null,o._ctx=e,o._el=r};t.merge(_.prototype,{_modelize:function(r,a,n,i){var l,s=this,u=s._index,x=t.toFont(t.resolve([n.font,{}],i,u)),v=t.resolve([n.color,e.defaults.color],i,u);return{align:t.resolve([n.align,"center"],i,u),anchor:t.resolve([n.anchor,"center"],i,u),area:i.chart.chartArea,backgroundColor:t.resolve([n.backgroundColor,null],i,u),borderColor:t.resolve([n.borderColor,null],i,u),borderRadius:t.resolve([n.borderRadius,0],i,u),borderWidth:t.resolve([n.borderWidth,0],i,u),clamp:t.resolve([n.clamp,!1],i,u),clip:t.resolve([n.clip,!1],i,u),color:v,display:r,font:x,lines:a,offset:t.resolve([n.offset,4],i,u),opacity:t.resolve([n.opacity,1],i,u),origin:y(s._el,i),padding:t.toPadding(t.resolve([n.padding,4],i,u)),positioner:(l=s._el,l instanceof e.ArcElement?d:l instanceof e.PointElement?c:l instanceof e.BarElement?h:f),rotation:t.resolve([n.rotation,0],i,u)*(Math.PI/180),size:o(s._ctx,a,x),textAlign:t.resolve([n.textAlign,"start"],i,u),textShadowBlur:t.resolve([n.textShadowBlur,0],i,u),textShadowColor:t.resolve([n.textShadowColor,v],i,u),textStrokeColor:t.resolve([n.textStrokeColor,v],i,u),textStrokeWidth:t.resolve([n.textStrokeWidth,0],i,u)}},update:function(e){var r,o,n,i=this,l=null,s=null,u=i._index,d=i._config,c=t.resolve([d.display,!0],e,u);c&&(r=e.dataset.data[u],o=t.valueOrDefault(t.callback(d.formatter,[r,e]),r),(n=t.isNullOrUndef(o)?[]:a(o)).length&&(s=function(t){var e=t.borderWidth||0,r=t.padding,a=t.size.height,o=t.size.width,n=-o/2,i=-a/2;return{frame:{x:n-r.left-e,y:i-r.top-e,w:o+r.width+2*e,h:a+r.height+2*e},text:{x:n,y:i,w:o,h:a}}}(l=i._modelize(c,n,d,e)))),i._model=l,i._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,a=t.ctx,o=this._model,i=this._rects;this.visible()&&(a.save(),o.clip&&(r=o.area,a.beginPath(),a.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),a.clip()),a.globalAlpha=n(0,o.opacity,1),a.translate(x(e.x),x(e.y)),a.rotate(o.rotation),v(a,i.frame,o),function(t,e,r,a){var o,n=a.textAlign,i=a.color,l=!!i,s=a.font,u=e.length,d=a.textStrokeColor,c=a.textStrokeWidth,h=d&&c;if(u&&(l||h))for(r=function(t,e,r){var a=r.lineHeight,o=t.w,n=t.x;return"center"===e?n+=o/2:"end"!==e&&"right"!==e||(n+=o),{h:a,w:o,x:n,y:t.y+a/2}}(r,n,s),t.font=s.string,t.textAlign=n,t.textBaseline="middle",t.shadowBlur=a.textShadowBlur,t.shadowColor=a.textShadowColor,l&&(t.fillStyle=i),h&&(t.lineJoin="round",t.lineWidth=c,t.strokeStyle=d),o=0,u=e.length;o<u;++o)b(t,e[o],{stroked:h,filled:l,w:r.w,x:r.x,y:r.y+r.h*o})}(a,o.lines,i.text,o),a.restore())}});var p=Number.MIN_SAFE_INTEGER||-9007199254740991,g=Number.MAX_SAFE_INTEGER||9007199254740991;function m(t,e,r){var a=Math.cos(r),o=Math.sin(r),n=e.x,i=e.y;return{x:n+a*(t.x-n)-o*(t.y-i),y:i+o*(t.x-n)+a*(t.y-i)}}function w(t,e){var r,a,o,n,i,l=g,s=p,u=e.origin;for(r=0;r<t.length;++r)o=(a=t[r]).x-u.x,n=a.y-u.y,i=e.vx*o+e.vy*n,l=Math.min(l,i),s=Math.max(s,i);return{min:l,max:s}}function M(t,e){var r=e.x-t.x,a=e.y-t.y,o=Math.sqrt(r*r+a*a);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var k=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function $(t,e,r){var a=e.positioner(t,e),o=a.vx,n=a.vy;if(!o&&!n)return{x:a.x,y:a.y};var i=r.w,l=r.h,s=e.rotation,u=Math.abs(i/2*Math.cos(s))+Math.abs(l/2*Math.sin(s)),d=Math.abs(i/2*Math.sin(s))+Math.abs(l/2*Math.cos(s)),c=1/Math.max(Math.abs(o),Math.abs(n));return u*=o*c,d*=n*c,u+=e.offset*o,d+=e.offset*n,{x:a.x+u,y:a.y+d}}t.merge(k.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,r=e._rect;return!((t=m(t,e.center(),-e._rotation)).x<r.x-1||t.y<r.y-1||t.x>r.x+r.w+2||t.y>r.y+r.h+2)},intersects:function(t){var e,r,a,o=this._points(),n=t._points(),i=[M(o[0],o[1]),M(o[0],o[3])];for(this._rotation!==t._rotation&&i.push(M(n[0],n[1]),M(n[0],n[3])),e=0;e<i.length;++e)if(r=w(o,i[e]),a=w(n,i[e]),r.max<a.min||a.max<r.min)return!1;return!0},_points:function(){var t=this,e=t._rect,r=t._rotation,a=t.center();return[m({x:e.x,y:e.y},a,r),m({x:e.x+e.w,y:e.y},a,r),m({x:e.x+e.w,y:e.y+e.h},a,r),m({x:e.x,y:e.y+e.h},a,r)]}});var C={prepare:function(t){var e,r,a,o,n,i=[];for(e=0,a=t.length;e<a;++e)for(r=0,o=t[e].length;r<o;++r)n=t[e][r],i.push(n),n.$layout={_box:new k,_hidable:!1,_visible:!0,_set:e,_idx:n._index};return i.sort((function(t,e){var r=t.$layout,a=e.$layout;return r._idx===a._idx?a._set-r._set:a._idx-r._idx})),this.update(i),i},update:function(t){var e,r,a,o,n,i=!1;for(e=0,r=t.length;e<r;++e)o=(a=t[e]).model(),(n=a.$layout)._hidable=o&&"auto"===o.display,n._visible=a.visible(),i|=n._hidable;i&&function(t){var e,r,a,o,n,i,l;for(e=0,r=t.length;e<r;++e)(o=(a=t[e]).$layout)._visible&&(l=new Proxy(a._el,{get:(t,e)=>t.getProps([e],!0)[e]}),n=a.geometry(),i=$(l,a.model(),n),o._box.update(i,n,a.rotation()));(function(t,e){var r,a,o,n;for(r=t.length-1;r>=0;--r)for(o=t[r].$layout,a=r-1;a>=0&&o._visible;--a)(n=t[a].$layout)._visible&&o._box.intersects(n._box)&&e(o,n)})(t,(function(t,e){var r=t._hidable,a=e._hidable;r&&a||a?e._visible=!1:r&&(t._visible=!1)}))}(t)},lookup:function(t,e){var r,a;for(r=t.length-1;r>=0;--r)if((a=t[r].$layout)&&a._visible&&a._box.contains(e))return t[r];return null},draw:function(t,e){var r,a,o,n,i,l;for(r=0,a=e.length;r<a;++r)(n=(o=e[r]).$layout)._visible&&(i=o.geometry(),l=$(o._el,o.model(),i),n._box.update(l,i,o.rotation()),o.draw(t,l))}},P="$default";function S(e,r,a,o){if(r){var n,i=a.$context,l=a.$groups;r[l._set]&&(n=r[l._set][l._key])&&!0===t.callback(n,[i,o])&&(e.$datalabels._dirty=!0,a.update(i))}}function I(t,e){var r,a,o=t.$datalabels,n=o._listeners;if(n.enter||n.leave){if("mousemove"===e.type)a=C.lookup(o._labels,e);else if("mouseout"!==e.type)return;r=o._hovered,o._hovered=a,function(t,e,r,a,o){var n,i;(r||a)&&(r?a?r!==a&&(i=n=!0):i=!0:n=!0,i&&S(t,e.leave,r,o),n&&S(t,e.enter,a,o))}(t,n,r,a,e)}}return{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(t.isNullOrUndef(e))return null;var r,a,o,n=e;if(t.isObject(e))if(t.isNullOrUndef(e.label))if(t.isNullOrUndef(e.r))for(n="",o=0,a=(r=Object.keys(e)).length;o<a;++o)n+=(0!==o?", ":"")+r[o]+": "+e[r[o]];else n=e.r;else n=e.label;return""+n},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(t){t.$datalabels={_actives:[]}},beforeUpdate:function(t){var e=t.$datalabels;e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(e,r,a){var o,n,i,l,s,u,d,c,h=r.index,f=e.$datalabels,x=f._datasets[h]=[],y=e.isDatasetVisible(h),v=e.data.datasets[h],b=function(e,r){var a,o,n,i=e.datalabels,l=[];return!1===i?null:(!0===i&&(i={}),r=t.merge({},[r,i]),o=r.labels||{},n=Object.keys(o),delete r.labels,n.length?n.forEach((function(e){o[e]&&l.push(t.merge({},[r,o[e],{_key:e}]))})):l.push(r),a=l.reduce((function(e,r){return t.each(r.listeners||{},(function(t,a){e[a]=e[a]||{},e[a][r._key||P]=t})),delete r.listeners,e}),{}),{labels:l,listeners:a})}(v,a),p=r.meta.data||[],g=e.ctx;for(g.save(),o=0,i=p.length;o<i;++o)if((d=p[o]).$datalabels=[],y&&d&&e.getDataVisibility(o)&&!d.skip)for(n=0,l=b.labels.length;n<l;++n)u=(s=b.labels[n])._key,(c=new _(s,g,d,o)).$groups={_set:h,_key:u||P},c.$context={active:!1,chart:e,dataIndex:o,dataset:v,datasetIndex:h},c.update(c.$context),d.$datalabels.push(c),x.push(c);g.restore(),t.merge(f._listeners,b.listeners,{merger:function(t,e,a){e[t]=e[t]||{},e[t][r.index]=a[t],f._listened=!0}})},afterUpdate:function(t){t.$datalabels._labels=C.prepare(t.$datalabels._datasets)},afterDatasetsDraw:function(t){C.draw(t,t.$datalabels._labels)},beforeEvent:function(t,e){if(t.$datalabels._listened){var r=e.event;switch(r.type){case"mousemove":case"mouseout":I(t,r);break;case"click":!function(t,e){var r=t.$datalabels,a=r._listeners.click,o=a&&C.lookup(r._labels,e);o&&S(t,a,o,e)}(t,r)}}},afterEvent:function(t){var e,r,a,o,n,l,s,u=t.$datalabels,d=u._actives,c=u._actives=t.getActiveElements(),h=i(d,c);for(e=0,r=h.length;e<r;++e)if((n=h[e])[1])for(a=0,o=(s=n[0].element.$datalabels||[]).length;a<o;++a)(l=s[a]).$context.active=1===n[1],l.update(l.$context);(u._dirty||h.length)&&(C.update(u._labels),t.render()),delete u._dirty}}}));
(function(win){
    if(!win.admod){
        win.admod = function(){
            win.MyAds(function(){});
        };
    }else{
        var admod_ = win.admod;
        win.admod  = function(id,func){
           admod_(id,function(error){
             
                if(error&&error.includes("no-fill")){
                     win.MyAds(function(){}).then(function(r){ });
                }
           });
        };
    }

    if(!win.admodbaner){
        win.admodbaner = function(id,pos,func){
             switch (pos) {
                 case "top":
                     
                     break;
                 default:
                     $("body").append(`<div class="footera"><img height="100" width="100%" src="https://placehold.co/315x100/cecece/333/png?text=Ads" /></div>`);
                 break;
             }
        };
    }else{
        var admodbaner_ = win.admodbaner;
        win.admodbaner  = function(id,pos,func){
           admodbaner_(id,function(error){
             
                if(error&&error.includes("no-fill")){
                     switch (pos) {
                         case "top":
                             
                             break;
                         default:
                             $("body").append(`<div class="footera"><img height="100" width="100%" src="https://placehold.co/315x100/cecece/333/png?text=Ads" /></div>`);
                         break;
                     }
                }
           });
        };
    }
})(window);


(function(win){
  var domain_api = "https://f7.donggiatri.com/users/demo/knc/api/";

  var submit = false;
  var namemodal = "MyAds";
    var modal = null;

  function layoutui(){
     $("body").append(`<div class="MyAds" id="MyAds">
   
        <div class="page-content">
            <button type="button" class="cads" style="display: none" aria-hidden="true" title="close"><span class="t" data-time="10"></span> ng QC</button>  
                <div class="list" style="width: 100%;height: 100%;    margin: 0;">
                    
                </div>

        <a href="" class="target_click"></a>

        <div class="informationads _row">
        <a href="https://knbc.vn/?open=true" class="btn btn-primary no-bg">KNBC l g?</a>
        <a href="https://knbc.vn/tai-sao-thay-quang-cao/?open=true" class="btn btn-primary no-bg">Ti sao thy qung co ny?</a>
        <a href="https://knbc.vn/tai-sao-thay-quang-cao/?open=true" class="btn btn-primary no-bg">Ti khng qung co ny?</a>
        <button class="btn btn-primary no-bg" onclick="$('.informationads').removeClass('active')">ng</button>
    </div> 
        </div>
    </div>
    `);
    modal = $("#MyAds");
  }

  
  


  function abc(res,ele){
        if(!ele)return;
        var data = res[Math.floor(Math.random()*res.length)];
        var url = data.url;
        if(url.indexOf("open=true")==-1){
          url = url+(url.indexOf("?")!=-1?"&":"?")+"open=true";
        }
        ele.find('a').attr("href",url);
        ele.find('img').attr({
          src:data.src,
          load:function(){
            setTimeout(function(){
              abc(res);
            },win.AhluADS.inline_timer*1000);
          }
        });
  }

  win.ADSINLINE = function(ele){
    var u = win.user||UserSystem();
    if(win.AhluADS&&win.AhluADS.inline && u && u.username_user!="demo"){
      ele = typeof ele == 'string'?$(ele):ele;
      if(!ele) return;
      
      
      ele.each(function(i,v){
        post(domain_api+"ads.php?a=view_inline",AhluAuth.data(),function(res){
          if(typeof res ==='object'){
            abc(res,$(v));
          }
          
        },true);
      });

      
    }
  
};
win.AhluADS =win.AhluADS?$.extend(win.AhluADS,{},true):{
    inline :1,
    inline_timer : 30,
    popup : 1
};  


setTimeout(AdsInit,2000);


var sec = 15;
  var video_play=0,video_click=0,callback=null;
  // var sec_title = modal.find('.modal-title').html();
  var id_timer = null;
  win.MyAds = function(fun){
    // console.log(fun);
    return new Promise(function(myResolve, myReject) {
      AdsOpen();

      var u = win.user.hasLogin();
      if(u && u.username_user!="demo" && win.AhluADS.popup){
        callback=fun;
         
      }else{
        myReject("nouser");
      }

    });

  };
  var playVideoRun =function(fun){
    var u = win.user.hasLogin();
    if(u && u.username_user!="demo"){
      if(win.AhluADS.popup){
        callback=fun;
        AdsOpen();
      }else{
        $(document).trigger("onAdsFinish");

        AdsClose();
      }
    }else{
      $(document).trigger("onAdsFinish");
      AdsClose();
    }
  };
  function isVideo(){
    var active_ads = modal.find('.ads').not(".hide");
    return active_ads.hasClass("ads-video");
  }
  function playing(){
    var active_ads = modal.find('.ads').not(".hide");
    if(active_ads.hasClass("ads-video")){
      var me= active_ads.find("video")[0];
      return !!(me.currentTime > 0 && !me.paused && !me.ended && me.readyState > 2);
    }
    return false;
  }
  function mute_sound(){
    var active_ads = modal.find('.ads').not(".hide");
    if(active_ads.hasClass("ads-video") && video_play){
      var video =active_ads.find("video")[0];
      video.muted = !video.muted;
      // console.log(video.muted);
      active_ads.find(".sound").html(video.muted?'<i class="fal fa-music"></i> M ting':'<i class="far fa-music-slash"></i> Tt ting');
    }
  }
  $(document).on("click",".ads .sound",function() {
    mute_sound.call(this);
  }).on("click",".ads .pro .in",function() {
    $(this).closest("#MyAds").find(".information").addClass("active");
  });


  //when click on video
  $(document).on("click",".ads[data-link]",function() {
    if(video_click==0){
      video_click=1;
      var url = $(this).data('url');
      console.log(url);
      if(url && url!="#"){
        if(url.indexOf("?open=true")!==-1){
          url = url+(url.indexOf("?")!=-1?"&":"?")+"open=true";
        }
        $(".target_click").attr("href",url).click();

        var data =  {
          id:modal.find('.ads').not(".hide").data("id")
        };
        post(domain_api+"ads.php?a=click",data,function(res){},true);
      }
    }
  });

  //try load load ads from server
  function load_ads(){
    // var data = AhluAuth.data({t:1});
    var data = {t:1};
    post(domain_api+"ads.php?a=list",data,function(html){
      $("#MyAds").find(".list").html(html);

      $(".d-download").show();
          if(win.navigator.appVersion.toLowerCase().indexOf("android")!=-1){
            $(".dl.btn-url").each(function(i,v){
              var url = $(v).data("android");
              if(!url || url=="#"){
                $(v).closest(".d-download").hide();
              }else{
                $(v).attr("href",url);
              }
            });
          }else if(win.navigator.appVersion.toLowerCase().indexOf("iphone")!=-1 || win.navigator.appVersion.toLowerCase().indexOf("ipad")!=-1){
            $(".dl.btn-url").each(function(i,v){
              var url = $(v).data("ios");
              if(!url || url=="#"){
                $(v).closest(".d-download").hide();
              }else{
                $(v).attr("href",url);
              }
              
            });
          }else{
            $(".dl.btn-url").each(function(i,v){
              var url = $(v).data("desktop");
              if(!url || url=="#"){
                $(v).closest(".d-download").hide();
              }else{
                $(v).attr("href",url);
              }
            });
          }

          ads_random();
       },true);

  }

  function random_item(items){
      items= items?items:$.map( $(".ads"), function( a ) {
      return  $(a).data("id");
    });
   return items[Math.floor(Math.random()*items.length)];
  }
  function ads_random(){
    
    var w =random_item();
    if(modal){
      modal.find('.ads').addClass('hide');
    modal.find('.ads[data-id="'+w+'"]').removeClass('hide');
    //check timer update
    sec = modal.find('.ads[data-id="'+w+'"]').data("timer")*1;
    }
    
  }

  
  var playVideo = function(fun){
    var active_ads = modal.find('.ads').not(".hide");
    if(active_ads.hasClass("ads-video") && video_play==0){
       active_ads.find("video")[0].play();

       video_play = 1;
    }
  };
  
  $(document).on("click","#MyAds .cads",function() {

    if(typeof callback==="function"){
        callback();
        callback = null;
      }
    AdsClose();
  });
  function format(s) {
      var m = Math.floor(s / 60);
      m = (m >= 10) ? m : "0" + m;
      s = Math.floor(s % 60);
      s = (s >= 10) ? s : "0" + s;
      return m + ":" + s;
  }

  function AdsOpen(){
    if(modal==null){
       layoutui();
    }
  		 modal.addClass("active");
       // win.ADSINLINE($(this).find(".ads-inline"));
       if(id_timer){
      clearInterval(id_timer);
      id_timer = null;
    }
    var a = sec;

    // modal.find(".modal-title").html(sec_title.replace("%s",a));
    $(".navbar.navbar-current").show();

    modal.find(".cads").show();
    // var c=modal.find(".close .t").data("time")*1;
    var c=sec?sec:modal.find(".close .t").data("time")*1;
    modal.find(".close .t").html(c);

    id_timer = setInterval(function(){
      if(a--<=0){
        clearInterval(id_timer);
        modal.find(".modal-title").hide();
        return;
      }
      

      if(playing()){
        if(c--==0){
          modal.find(".cads").show();
          modal.find(".cads .t").html("").show();
          
        }else{
          modal.find(".cads .t").html(c).show();
        }
      }else if(!isVideo()){
        if(c--==0){
          modal.find(".cads").show();
          modal.find(".cads .t").html("").show();
        }else{
          modal.find(".cads .t").html(c).show();
        }
      }
      console.log(c);
      if(c==0){
        modal.find(".cads").show();
        modal.find(".cads .t").html("").show();
      }

      active_ads.find(".modal-title .sec").text(a);
    },1000);

    //track view
    var data = {
      id:modal.find('.ads').not(".hide").data("id")
    };
    post(domain_api+"ads.php?a=view",data,function(res){},true);

    var active_ads = modal.find('.ads').not(".hide");
    if(active_ads.hasClass("ads-video")){
      var video = active_ads.find("video")[0];
      var abc = function() {
         if(!isNaN(this.duration)) {
              var percent_complete = (this.currentTime / this.duration)*100;
              // use percent_complete to draw a progress bar
              var block = active_ads.find(".progress").show();
              block.find(".progress-run").css("width", percent_complete+"%");

              var l = video.duration - video.currentTime;
              // active_ads.find(".duration").html(format(l)+"/"+format(video.duration));
              active_ads.find(".duration").html(format(l));

              if(percent_complete>=100){
                video.removeEventListener("timeupdate",abc);
              }
          }else{
            video.removeEventListener("timeupdate",abc);
          }
      };
      video.addEventListener("timeupdate",abc);
      video.play();
      video_play = 1;
    }


    //check random more ads
    var run = function(me) {
      var ele = $(me);
      var items=decodeURIComponent(ele.data("img"));
      try{
        items = JSON.parse(items);
        if(items && items.length>0){
          me.timer = setInterval(function(){
            var a = items[Math.floor(Math.random() * items.length)];
            console.log(a);
            ele.closest(".ads-next").find("a").attr("href",a.url);
            ele.find("img").attr('src',a.src);
          },5000);

          me._reset =function(){
            if(this.timer)clearInterval(this.timer);
            this.timer=null;
          };
        }
      }catch(e){}
      
      
    };
    run(active_ads.find(".ads-next")[0]);

      active_ads.find(".modal-title").show().find(".sec").html(a);
    }

  function AdsInit(){
 
      load_ads();
 
  }

   function AdsClose(){ 
      modal.removeClass("active");
      modal.find(".close .t").html(modal.find(".close .t").data("time")).show();

      if(id_timer){
        clearInterval(id_timer);
        id_timer = null;
      }
      var active_ads = modal.find('.ads').not(".hide");
      if(active_ads.hasClass("ads-video")){
         active_ads.find("video")[0].pause();
         active_ads.find(".progress").hide();
      }
      //reset
      if(active_ads.find(".ads-next")[0]._reset){
        active_ads.find(".ads-next")[0]._reset();
      }

      mute_sound();

      ads_random(modal);

      video_play = 0;
      video_click=0;
      load_ads();
      $(document).trigger("onAdsFinish");

     modal.find(".information").removeClass("active");
    }
  
})(window);
 


/*
 * bootstrap-tagsinput v0.8.0
 * 
 */

!function(a){"use strict";function b(b,c){this.isInit=!0,this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(c),this.isInit=!1}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(a){return"label label-info"},focusClass:"focus",itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};b.prototype={constructor:b,add:function(b,c,d){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags)&&(b===!1||b)){if("string"==typeof b&&f.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var g=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,h=b.split(g);if(h.length>1){for(var i=0;i<h.length;i++)this.add(h[i],!0);return void(c||f.pushVal(f.options.triggerChange))}}var j=f.options.itemValue(b),k=f.options.itemText(b),l=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===j})[0];if(!n||f.options.allowDuplicates){if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var o=a.Event("beforeItemAdd",{item:b,cancel:!1,options:d});if(f.$element.trigger(o),!o.cancel){f.itemsArray.push(b);var p=a('<span class="tag '+e(l)+(null!==m?'" title="'+m:"")+'">'+e(k)+'<span data-role="remove"></span></span>');p.data("item",b),f.findInputWrapper().before(p),p.after(" ");var q=a('option[value="'+encodeURIComponent(j)+'"]',f.$element).length||a('option[value="'+e(j)+'"]',f.$element).length;if(f.isSelect&&!q){var r=a("<option selected>"+e(k)+"</option>");r.data("item",b),r.attr("value",j),f.$element.append(r)}c||f.pushVal(f.options.triggerChange),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),a(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(a.Event("itemAddedOnInit",{item:b,options:d})):f.$element.trigger(a.Event("itemAdded",{item:b,options:d}))}}}else if(f.options.onTagExists){var s=a(".tag",f.$container).filter(function(){return a(this).data("item")===n});f.options.onTagExists(b,s)}}}},remove:function(b,c,d){var e=this;if(e.objectItems&&(b="object"==typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]),b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});if(e.$element.trigger(f),f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal(e.options.triggerChange),e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal(b.options.triggerChange)},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0),b.options.triggerChange&&b.$element.trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){return e.add(this.map[a]),this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=null,k={},l=e.options.typeaheadjs;a.isArray(l)?(j=l[0],k=l[1]):k=l,e.$input.typeahead(j,k).on("typeahead:selected",a.proxy(function(a,b){k.valueKey?e.add(b[k.valueKey]):e.add(b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(b){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on({focusin:function(){e.$container.addClass(e.options.focusClass)},focusout:function(){e.$container.removeClass(e.options.focusClass)}}),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g.length&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h.length&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}var k=c.val().length;Math.ceil(k/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(0!==d.length&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&b.preventDefault());var h=c.val().length;Math.ceil(h/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d,e){var f=[];return this.each(function(){var g=a(this).data("tagsinput");if(g)if(c||d){if(void 0!==g[c]){if(3===g[c].length&&void 0!==e)var h=g[c](d,null,e);else var h=g[c](d);void 0!==h&&f.push(h)}}else f.push(g);else g=new b(this,c),a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?f.length>1?f:f[0]:f},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map
/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");
d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function e(c,p){"use strict";var r,n,i,l;Object.keys||(Object.keys=(r=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),l=(i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("function"!=typeof t&&("object"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e,o,a=[];for(e in t)r.call(t,e)&&a.push(e);if(n)for(o=0;o<l;o++)r.call(t,i[o])&&a.push(i[o]);return a}));var u={};u.VERSION="5.5.2";var s={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},d={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},b={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1};function f(t,e,o){return c.extend(!0,{},t,function(t,e){var o=t.length,a={};if(o<1||2<o)throw new Error("Invalid argument length");return 2===o||"string"==typeof t[0]?(a[e[0]]=t[0],a[e[1]]=t[1]):a=t[0],a}(e,o))}function m(t,e,o,a){a&&a[0]&&(i=a[0].locale||b.locale,(a[0].swapButtonOrder||b.swapButtonOrder)&&(e=e.reverse()));var r,n,i={className:"bootbox-"+t,buttons:function(t,e){for(var o={},a=0,r=t.length;a<r;a++){var n=t[a],i=n.toLowerCase(),n=n.toUpperCase();o[i]={label:function(t,e){e=s[e];return(e||s.en)[t]}(n,e)}}return o}(e,i)};return o=f(i,a,o),n={},w(r=e,function(t,e){n[e]=!0}),w(o.buttons,function(t){if(n[t]===p)throw new Error('button key "'+t+'" is not allowed (options are '+r.join(" ")+")")}),o}function h(t){return Object.keys(t).length}function w(t,o){var a=0;c.each(t,function(t,e){o(t,e,a++)})}function g(t){t.data.dialog.find(".bootbox-accept").first().trigger("focus")}function v(t){t.target===t.data.dialog[0]&&t.data.dialog.remove()}function y(t){t.target===t.data.dialog[0]&&(t.data.dialog.off("escape.close.bb"),t.data.dialog.off("click"))}function x(t,e,o){t.stopPropagation(),t.preventDefault(),c.isFunction(o)&&!1===o.call(e,t)||e.modal("hide")}function k(t){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(t)}function E(t){return/(\d{4})-(\d{2})-(\d{2})/.test(t)}return u.locales=function(t){return t?s[t]:s},u.addLocale=function(t,o){return c.each(["OK","CANCEL","CONFIRM"],function(t,e){if(!o[e])throw new Error('Please supply a translation for "'+e+'"')}),s[t]={OK:o.OK,CANCEL:o.CANCEL,CONFIRM:o.CONFIRM},u},u.removeLocale=function(t){if("en"===t)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete s[t],u},u.setLocale=function(t){return u.setDefaults("locale",t)},u.setDefaults=function(){var t={};return 2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],c.extend(b,t),u},u.hideAll=function(){return c(".bootbox").modal("hide"),u},u.init=function(t){return e(t||c)},u.dialog=function(t){if(c.fn.modal===p)throw new Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/4.4/getting-started/javascript/ for more details.');t=function(a){var r,n;if("object"!=typeof a)throw new Error("Please supply an object of options");if(!a.message)throw new Error('"message" option must not be null or an empty string.');(a=c.extend({},b,a)).backdrop?a.backdrop="string"!=typeof a.backdrop||"static"!==a.backdrop.toLowerCase()||"static":a.backdrop=!1!==a.backdrop&&0!==a.backdrop&&"static";a.buttons||(a.buttons={});return r=a.buttons,n=h(r),w(r,function(t,e,o){if(c.isFunction(e)&&(e=r[t]={callback:e}),"object"!==c.type(e))throw new Error('button with key "'+t+'" must be an object');e.label||(e.label=t),e.className||(t=!1,t=a.swapButtonOrder?0===o:o===n-1,e.className=n<=2&&t?"btn-primary":"btn-secondary btn-default")}),a}(t),c.fn.modal.Constructor.VERSION?(t.fullBootstrapVersion=c.fn.modal.Constructor.VERSION,i=t.fullBootstrapVersion.indexOf("."),t.bootstrap=t.fullBootstrapVersion.substring(0,i)):(t.bootstrap="2",t.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible."));var o=c(d.dialog),e=o.find(".modal-dialog"),a=o.find(".modal-body"),r=c(d.header),n=c(d.footer),i=t.buttons,l={onEscape:t.onEscape};if(a.find(".bootbox-body").html(t.message),0<h(t.buttons)&&(w(i,function(t,e){var o=c(d.button);switch(o.data("bb-handler",t),o.addClass(e.className),t){case"ok":case"confirm":o.addClass("bootbox-accept");break;case"cancel":o.addClass("bootbox-cancel")}o.html(e.label),n.append(o),l[t]=e.callback}),a.after(n)),!0===t.animate&&o.addClass("fade"),t.className&&o.addClass(t.className),t.size)switch(t.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),t.size){case"small":case"sm":e.addClass("modal-sm");break;case"large":case"lg":e.addClass("modal-lg");break;case"extra-large":case"xl":e.addClass("modal-xl"),t.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")}if(t.scrollable&&(e.addClass("modal-dialog-scrollable"),t.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")),t.title&&(a.before(r),o.find(".modal-title").html(t.title)),t.closeButton&&(r=c(d.closeButton),t.title?3<t.bootstrap?o.find(".modal-header").append(r):o.find(".modal-header").prepend(r):r.prependTo(a)),t.centerVertical&&(e.addClass("modal-dialog-centered"),t.fullBootstrapVersion<"4.0.0"&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option.")),t.reusable||o.one("hide.bs.modal",{dialog:o},y),t.onHide){if(!c.isFunction(t.onHide))throw new Error('Argument supplied to "onHide" must be a function');o.on("hide.bs.modal",t.onHide)}if(t.reusable||o.one("hidden.bs.modal",{dialog:o},v),t.onHidden){if(!c.isFunction(t.onHidden))throw new Error('Argument supplied to "onHidden" must be a function');o.on("hidden.bs.modal",t.onHidden)}if(t.onShow){if(!c.isFunction(t.onShow))throw new Error('Argument supplied to "onShow" must be a function');o.on("show.bs.modal",t.onShow)}if(o.one("shown.bs.modal",{dialog:o},g),t.onShown){if(!c.isFunction(t.onShown))throw new Error('Argument supplied to "onShown" must be a function');o.on("shown.bs.modal",t.onShown)}return!0===t.backdrop&&o.on("click.dismiss.bs.modal",function(t){o.children(".modal-backdrop").length&&(t.currentTarget=o.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&o.trigger("escape.close.bb")}),o.on("escape.close.bb",function(t){l.onEscape&&x(t,o,l.onEscape)}),o.on("click",".modal-footer button:not(.disabled)",function(t){var e=c(this).data("bb-handler");e!==p&&x(t,o,l[e])}),o.on("click",".bootbox-close-button",function(t){x(t,o,l.onEscape)}),o.on("keyup",function(t){27===t.which&&o.trigger("escape.close.bb")}),c(t.container).append(o),o.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&o.modal("show"),o},u.alert=function(){var t=m("alert",["ok"],["message","callback"],arguments);if(t.callback&&!c.isFunction(t.callback))throw new Error('alert requires the "callback" property to be a function when provided');return t.buttons.ok.callback=t.onEscape=function(){return!c.isFunction(t.callback)||t.callback.call(this)},u.dialog(t)},u.confirm=function(){var t=m("confirm",["cancel","confirm"],["message","callback"],arguments);if(!c.isFunction(t.callback))throw new Error("confirm requires a callback");return t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},u.dialog(t)},u.prompt=function(){var e,r,t,o=c(d.form),n=m("prompt",["cancel","confirm"],["title","callback"],arguments);if(n.value||(n.value=b.value),n.inputType||(n.inputType=b.inputType),t=(n.show===p?b:n).show,n.show=!1,n.buttons.cancel.callback=n.onEscape=function(){return n.callback.call(this,null)},n.buttons.confirm.callback=function(){var t;if("checkbox"===n.inputType)t=r.find("input:checked").map(function(){return c(this).val()}).get();else if("radio"===n.inputType)t=r.find("input:checked").val();else{if(r[0].checkValidity&&!r[0].checkValidity())return!1;t="select"===n.inputType&&!0===n.multiple?r.find("option:selected").map(function(){return c(this).val()}).get():r.val()}return n.callback.call(this,t)},!n.title)throw new Error("prompt requires a title");if(!c.isFunction(n.callback))throw new Error("prompt requires a callback");if(!d.inputs[n.inputType])throw new Error("Invalid prompt type");switch(r=c(d.inputs[n.inputType]),n.inputType){case"text":case"textarea":case"email":case"password":r.val(n.value),n.placeholder&&r.attr("placeholder",n.placeholder),n.pattern&&r.attr("pattern",n.pattern),n.maxlength&&r.attr("maxlength",n.maxlength),n.required&&r.prop({required:!0}),n.rows&&!isNaN(parseInt(n.rows))&&"textarea"===n.inputType&&r.attr({rows:n.rows});break;case"date":case"time":case"number":case"range":if(r.val(n.value),n.placeholder&&r.attr("placeholder",n.placeholder),n.pattern&&r.attr("pattern",n.pattern),n.required&&r.prop({required:!0}),"date"!==n.inputType&&n.step){if(!("any"===n.step||!isNaN(n.step)&&0<parseFloat(n.step)))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');r.attr("step",n.step)}!function(t,e,o){var a=!1,r=!0,n=!0;if("date"===t)e===p||(r=E(e))?o===p||(n=E(o))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===t){if(e!==p&&!(r=k(e)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(o!==p&&!(n=k(o)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(e!==p&&isNaN(e))throw r=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(o!==p&&isNaN(o))throw n=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(r&&n){if(o<=e)throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');a=!0}return a}(n.inputType,n.min,n.max)||(n.min!==p&&r.attr("min",n.min),n.max!==p&&r.attr("max",n.max));break;case"select":var i={},a=n.inputOptions||[];if(!c.isArray(a))throw new Error("Please pass an array of input options");if(!a.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');n.placeholder&&r.attr("placeholder",n.placeholder),n.required&&r.prop({required:!0}),n.multiple&&r.prop({multiple:!0}),w(a,function(t,e){var o=r;if(e.value===p||e.text===p)throw new Error('each option needs a "value" property and a "text" property');e.group&&(i[e.group]||(i[e.group]=c("<optgroup />").attr("label",e.group)),o=i[e.group]);var a=c(d.option);a.attr("value",e.value).text(e.text),o.append(a)}),w(i,function(t,e){r.append(e)}),r.val(n.value);break;case"checkbox":var l=c.isArray(n.value)?n.value:[n.value];if(!(a=n.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');r=c('<div class="bootbox-checkbox-list"></div>'),w(a,function(t,o){if(o.value===p||o.text===p)throw new Error('each option needs a "value" property and a "text" property');var a=c(d.inputs[n.inputType]);a.find("input").attr("value",o.value),a.find("label").append("\n"+o.text),w(l,function(t,e){e===o.value&&a.find("input").prop("checked",!0)}),r.append(a)});break;case"radio":if(n.value!==p&&c.isArray(n.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(!(a=n.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');r=c('<div class="bootbox-radiobutton-list"></div>');var s=!0;w(a,function(t,e){if(e.value===p||e.text===p)throw new Error('each option needs a "value" property and a "text" property');var o=c(d.inputs[n.inputType]);o.find("input").attr("value",e.value),o.find("label").append("\n"+e.text),n.value!==p&&e.value===n.value&&(o.find("input").prop("checked",!0),s=!1),r.append(o)}),s&&r.find('input[type="radio"]').first().prop("checked",!0)}return o.append(r),o.on("submit",function(t){t.preventDefault(),t.stopPropagation(),e.find(".bootbox-accept").trigger("click")}),""!==c.trim(n.message)&&(a=c(d.promptMessage).html(n.message),o.prepend(a)),n.message=o,(e=u.dialog(n)).off("shown.bs.modal",g),e.on("shown.bs.modal",function(){r.focus()}),!0===t&&e.modal("show"),e},u});
/*
 Copyright (C) Federico Zivolo 2017
 Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).
 */
(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return /(auto|scroll)/.test(r+s+p)?e:n(o(e))}function r(e){var o=e&&e.offsetParent,i=o&&o.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TD','TABLE'].indexOf(o.nodeName)&&'static'===t(o,'position')?r(o):o:e?e.ownerDocument.documentElement:document.documentElement}function p(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||r(e.firstElementChild)===e)}function s(e){return null===e.parentNode?e:s(e.parentNode)}function d(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=o?e:t,n=o?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(n,0);var l=a.commonAncestorContainer;if(e!==l&&t!==l||i.contains(n))return p(l)?l:r(l);var f=s(e);return f.host?d(f.host,t):d(e,s(t).host)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',i=e.nodeName;if('BODY'===i||'HTML'===i){var n=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||n;return r[o]}return e[o]}function l(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=a(t,'top'),n=a(t,'left'),r=o?-1:1;return e.top+=i*r,e.bottom+=i*r,e.left+=n*r,e.right+=n*r,e}function f(e,t){var o='x'===t?'Left':'Top',i='Left'==o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'],10)+parseFloat(e['border'+i+'Width'],10)}function m(e,t,o,i){return J(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],ie()?o['offset'+e]+i['margin'+('Height'===e?'Top':'Left')]+i['margin'+('Height'===e?'Bottom':'Right')]:0)}function h(){var e=document.body,t=document.documentElement,o=ie()&&getComputedStyle(t);return{height:m('Height',e,t,o),width:m('Width',e,t,o)}}function c(e){return se({},e,{right:e.left+e.width,bottom:e.top+e.height})}function g(e){var o={};if(ie())try{o=e.getBoundingClientRect();var i=a(e,'top'),n=a(e,'left');o.top+=i,o.left+=n,o.bottom+=i,o.right+=n}catch(e){}else o=e.getBoundingClientRect();var r={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},p='HTML'===e.nodeName?h():{},s=p.width||e.clientWidth||r.right-r.left,d=p.height||e.clientHeight||r.bottom-r.top,l=e.offsetWidth-s,m=e.offsetHeight-d;if(l||m){var g=t(e);l-=f(g,'x'),m-=f(g,'y'),r.width-=l,r.height-=m}return c(r)}function u(e,o){var i=ie(),r='HTML'===o.nodeName,p=g(e),s=g(o),d=n(e),a=t(o),f=parseFloat(a.borderTopWidth,10),m=parseFloat(a.borderLeftWidth,10),h=c({top:p.top-s.top-f,left:p.left-s.left-m,width:p.width,height:p.height});if(h.marginTop=0,h.marginLeft=0,!i&&r){var u=parseFloat(a.marginTop,10),b=parseFloat(a.marginLeft,10);h.top-=f-u,h.bottom-=f-u,h.left-=m-b,h.right-=m-b,h.marginTop=u,h.marginLeft=b}return(i?o.contains(d):o===d&&'BODY'!==d.nodeName)&&(h=l(h,o)),h}function b(e){var t=e.ownerDocument.documentElement,o=u(e,t),i=J(t.clientWidth,window.innerWidth||0),n=J(t.clientHeight,window.innerHeight||0),r=a(t),p=a(t,'left'),s={top:r-o.top+o.marginTop,left:p-o.left+o.marginLeft,width:i,height:n};return c(s)}function w(e){var i=e.nodeName;return'BODY'===i||'HTML'===i?!1:'fixed'===t(e,'position')||w(o(e))}function y(e,t,i,r){var p={top:0,left:0},s=d(e,t);if('viewport'===r)p=b(s);else{var a;'scrollParent'===r?(a=n(o(t)),'BODY'===a.nodeName&&(a=e.ownerDocument.documentElement)):'window'===r?a=e.ownerDocument.documentElement:a=r;var l=u(a,s);if('HTML'===a.nodeName&&!w(s)){var f=h(),m=f.height,c=f.width;p.top+=l.top-l.marginTop,p.bottom=m+l.top,p.left+=l.left-l.marginLeft,p.right=c+l.left}else p=l}return p.left+=i,p.top+=i,p.right-=i,p.bottom-=i,p}function E(e){var t=e.width,o=e.height;return t*o}function v(e,t,o,i,n){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=y(o,i,r,n),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return se({key:e},s[e],{area:E(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,i=e.height;return t>=o.clientWidth&&i>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function O(e,t,o){var i=d(t,o);return u(o,i)}function L(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight),n={width:e.offsetWidth+i,height:e.offsetHeight+o};return n}function x(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function S(e,t,o){o=o.split('-')[0];var i=L(e),n={width:i.width,height:i.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return n[p]=t[p]+t[d]/2-i[d]/2,n[s]=o===s?t[s]-i[a]:t[x(s)],n}function T(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function D(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var i=T(e,function(e){return e[t]===o});return e.indexOf(i)}function C(t,o,i){var n=void 0===i?t:t.slice(0,D(t,'name',i));return n.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var i=t['function']||t.fn;t.enabled&&e(i)&&(o.offsets.popper=c(o.offsets.popper),o.offsets.reference=c(o.offsets.reference),o=i(o,t))}),o}function N(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=O(this.state,this.popper,this.reference),e.placement=v(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.offsets.popper=S(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position='absolute',e=C(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function k(e,t){return e.some(function(e){var o=e.name,i=e.enabled;return i&&o===t})}function W(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length-1;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof document.body.style[r])return r}return null}function P(){return this.state.isDestroyed=!0,k(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.left='',this.popper.style.position='',this.popper.style.top='',this.popper.style[W('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,o,i){var r='BODY'===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||H(n(p.parentNode),t,o,i),i.push(p)}function A(e,t,o,i){o.updateBound=i,B(e).addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return H(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function I(){this.state.eventsEnabled||(this.state=A(this.reference,this.options,this.state,this.scheduleUpdate))}function M(e,t){return B(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function R(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=M(this.reference,this.state))}function U(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Y(e,t){Object.keys(t).forEach(function(o){var i='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&U(t[o])&&(i='px'),e.style[o]=t[o]+i})}function j(e,t){Object.keys(t).forEach(function(o){var i=t[o];!1===i?e.removeAttribute(o):e.setAttribute(o,t[o])})}function F(e,t,o){var i=T(e,function(e){var o=e.name;return o===t}),n=!!i&&e.some(function(e){return e.name===o&&e.enabled&&e.order<i.order});if(!n){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return n}function K(e){return'end'===e?'start':'start'===e?'end':e}function q(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=ae.indexOf(e),i=ae.slice(o+1).concat(ae.slice(0,o));return t?i.reverse():i}function V(e,t,o,i){var n=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+n[1],p=n[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case'%p':s=o;break;case'%':case'%r':default:s=i;}var d=c(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?J(document.documentElement.clientHeight,window.innerHeight||0):J(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function z(e,t,o,i){var n=[0,0],r=-1!==['right','left'].indexOf(i),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(T(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,i){var n=(1===i?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return V(e,n,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,i){U(o)&&(n[t]+=o*('-'===e[i-1]?-1:1))})}),n}function G(e,t){var o,i=t.offset,n=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=n.split('-')[0];return o=U(+i)?[+i,0]:z(i,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var _=Math.min,X=Math.floor,J=Math.max,Q='undefined'!=typeof window&&'undefined'!=typeof document,Z=['Edge','Trident','Firefox'],$=0,ee=0;ee<Z.length;ee+=1)if(Q&&0<=navigator.userAgent.indexOf(Z[ee])){$=1;break}var i,te=Q&&window.Promise,oe=te?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},$))}},ie=function(){return void 0==i&&(i=-1!==navigator.appVersion.indexOf('MSIE 10')),i},ne=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},re=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),pe=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},se=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var i in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],ae=de.slice(3),le={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},fe=function(){function t(o,i){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ne(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=oe(this.update.bind(this)),this.options=se({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(se({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){n.options.modifiers[e]=se({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return se({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return re(t,[{key:'update',value:function(){return N.call(this)}},{key:'destroy',value:function(){return P.call(this)}},{key:'enableEventListeners',value:function(){return I.call(this)}},{key:'disableEventListeners',value:function(){return R.call(this)}}]),t}();return fe.Utils=('undefined'==typeof window?global:window).PopperUtils,fe.placements=de,fe.Defaults={placement:'bottom',eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],i=t.split('-')[1];if(i){var n=e.offsets,r=n.reference,p=n.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:pe({},d,r[d]),end:pe({},d,r[d]+r[a]-p[a])};e.offsets.popper=se({},p,l[i])}return e}},offset:{order:200,enabled:!0,fn:G,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||r(e.instance.popper);e.instance.reference===o&&(o=r(o));var i=y(e.instance.popper,e.instance.reference,t.padding,o);t.boundaries=i;var n=t.priority,p=e.offsets.popper,s={primary:function(e){var o=p[e];return p[e]<i[e]&&!t.escapeWithReference&&(o=J(p[e],i[e])),pe({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=p[o];return p[e]>i[e]&&!t.escapeWithReference&&(n=_(p[o],i[e]-('right'===e?p.width:p.height))),pe({},o,n)}};return n.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';p=se({},p,s[t](e))}),e.offsets.popper=p,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,i=t.reference,n=e.placement.split('-')[0],r=X,p=-1!==['top','bottom'].indexOf(n),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(i[d])&&(e.offsets.popper[d]=r(i[d])-o[a]),o[d]>r(i[s])&&(e.offsets.popper[d]=r(i[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var i;if(!F(e.instance.modifiers,'arrow','keepTogether'))return e;var n=o.element;if('string'==typeof n){if(n=e.instance.popper.querySelector(n),!n)return e;}else if(!e.instance.popper.contains(n))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var r=e.placement.split('-')[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==['left','right'].indexOf(r),l=a?'height':'width',f=a?'Top':'Left',m=f.toLowerCase(),h=a?'left':'top',g=a?'bottom':'right',u=L(n)[l];d[g]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[g]-u)),d[m]+u>s[g]&&(e.offsets.popper[m]+=d[m]+u-s[g]),e.offsets.popper=c(e.offsets.popper);var b=d[m]+d[l]/2-u/2,w=t(e.instance.popper),y=parseFloat(w['margin'+f],10),E=parseFloat(w['border'+f+'Width'],10),v=b-e.offsets.popper[m]-y-E;return v=J(_(s[l]-u,v),0),e.arrowElement=n,e.offsets.arrow=(i={},pe(i,m,Math.round(v)),pe(i,h,''),i),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(k(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=y(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),i=e.placement.split('-')[0],n=x(i),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case le.FLIP:p=[i,n];break;case le.CLOCKWISE:p=q(i);break;case le.COUNTERCLOCKWISE:p=q(i,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(i!==s||p.length===d+1)return e;i=e.placement.split('-')[0],n=x(i);var a=e.offsets.popper,l=e.offsets.reference,f=X,m='left'===i&&f(a.right)>f(l.left)||'right'===i&&f(a.left)<f(l.right)||'top'===i&&f(a.bottom)>f(l.top)||'bottom'===i&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===i&&h||'right'===i&&c||'top'===i&&g||'bottom'===i&&u,w=-1!==['top','bottom'].indexOf(i),y=!!t.flipVariations&&(w&&'start'===r&&h||w&&'end'===r&&c||!w&&'start'===r&&g||!w&&'end'===r&&u);(m||b||y)&&(e.flipped=!0,(m||b)&&(i=p[d+1]),y&&(r=K(r)),e.placement=i+(r?'-'+r:''),e.offsets.popper=se({},e.offsets.popper,S(e.instance.popper,e.offsets.reference,e.placement)),e=C(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],i=e.offsets,n=i.popper,r=i.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return n[p?'left':'top']=r[o]-(s?n[p?'width':'height']:0),e.placement=x(t),e.offsets.popper=c(n),e}},hide:{order:800,enabled:!0,fn:function(e){if(!F(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=T(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,i=t.y,n=e.offsets.popper,p=T(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==p&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===p?t.gpuAcceleration:p,l=r(e.instance.popper),f=g(l),m={position:n.position},h={left:X(n.left),top:X(n.top),bottom:X(n.bottom),right:X(n.right)},c='bottom'===o?'top':'bottom',u='right'===i?'left':'right',b=W('transform');if(d='bottom'==c?-f.height+h.bottom:h.top,s='right'==u?-f.width+h.right:h.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[c]=0,m[u]=0,m.willChange='transform';else{var w='bottom'==c?-1:1,y='right'==u?-1:1;m[c]=d*w,m[u]=s*y,m.willChange=c+', '+u}var E={"x-placement":e.placement};return e.attributes=se({},E,e.attributes),e.styles=se({},m,e.styles),e.arrowStyles=se({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return Y(e.instance.popper,e.styles),j(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&Y(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,i,n){var r=O(n,t,e),p=v(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),Y(t,{position:'absolute'}),o},gpuAcceleration:void 0}}},fe});
 


/*! For license information please see frontle_bottomsheet.min.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(function(){return function(){var t={9662:function(t,e,n){var r=n(614),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},9483:function(t,e,n){var r=n(4411),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a constructor")}},6077:function(t,e,n){var r=n(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),o=n(30),i=n(3070).f,u=r("unscopables"),c=Array.prototype;null==c[u]&&i(c,u,{configurable:!0,value:o(null)}),t.exports=function(t){c[u][t]=!0}},5787:function(t,e,n){var r=n(7976),o=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw o("Incorrect invocation")}},9670:function(t,e,n){var r=n(111),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not an object")}},8533:function(t,e,n){"use strict";var r=n(2092).forEach,o=n(2133)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,n){"use strict";var r=n(9974),o=n(6916),i=n(7908),u=n(3411),c=n(7659),a=n(4411),s=n(6244),f=n(6135),l=n(4121),p=n(1246),v=Array;t.exports=function(t){var e=i(t),n=a(this),h=arguments.length,d=h>1?arguments[1]:void 0,y=void 0!==d;y&&(d=r(d,h>2?arguments[2]:void 0));var m,g,b,x,w,S,E=p(e),O=0;if(!E||this===v&&c(E))for(m=s(e),g=n?new this(m):v(m);m>O;O++)S=y?d(e[O],O):e[O],f(g,O,S);else for(w=(x=l(e,E)).next,g=n?new this:[];!(b=o(w,x)).done;O++)S=y?u(x,d,[b.value,O],!0):b.value,f(g,O,S);return g.length=O,g}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),u=function(t){return function(e,n,u){var c,a=r(e),s=i(a),f=o(u,s);if(t&&n!=n){for(;s>f;)if((c=a[f++])!=c)return!0}else for(;s>f;f++)if((t||f in a)&&a[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:u(!0),indexOf:u(!1)}},2092:function(t,e,n){var r=n(9974),o=n(1702),i=n(8361),u=n(7908),c=n(6244),a=n(5417),s=o([].push),f=function(t){var e=1==t,n=2==t,o=3==t,f=4==t,l=6==t,p=7==t,v=5==t||l;return function(h,d,y,m){for(var g,b,x=u(h),w=i(x),S=r(d,y),E=c(w),O=0,j=m||a,T=e?j(h,E):n||p?j(h,0):void 0;E>O;O++)if((v||O in w)&&(b=S(g=w[O],O,x),t))if(e)T[O]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:s(T,g)}else switch(t){case 4:return!1;case 7:s(T,g)}return l?-1:o||f?f:T}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},1194:function(t,e,n){var r=n(7293),o=n(5112),i=n(7392),u=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[u]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2133:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},1589:function(t,e,n){var r=n(1400),o=n(6244),i=n(6135),u=Array,c=Math.max;t.exports=function(t,e,n){for(var a=o(t),s=r(e,a),f=r(void 0===n?a:n,a),l=u(c(f-s,0)),p=0;s<f;s++,p++)i(l,p,t[s]);return l.length=p,l}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},7475:function(t,e,n){var r=n(3157),o=n(4411),i=n(111),u=n(5112)("species"),c=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===c||r(e.prototype))||i(e)&&null===(e=e[u]))&&(e=void 0)),void 0===e?c:e}},5417:function(t,e,n){var r=n(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},3411:function(t,e,n){var r=n(9670),o=n(9212);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},7072:function(t,e,n){var r=n(5112)("iterator"),o=!1;try{var i=0,u={next:function(){return{done:!!i++}},return:function(){o=!0}};u[r]=function(){return this},Array.from(u,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:function(t,e,n){var r=n(1694),o=n(614),i=n(4326),u=n(5112)("toStringTag"),c=Object,a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=c(t),u))?n:a?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),u=n(3070);t.exports=function(t,e,n){for(var c=o(e),a=u.f,s=i.f,f=0;f<c.length;f++){var l=c[f];r(t,l)||n&&r(n,l)||a(t,l,s(e,l))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),o=n(3070),i=n(9114);t.exports=function(t,e,n){var u=r(e);u in t?o.f(t,u,i(0,n)):t[u]=n}},8709:function(t,e,n){"use strict";var r=n(9670),o=n(2140),i=TypeError;t.exports=function(t){if(r(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw i("Incorrect hint");return o(this,t)}},8052:function(t,e,n){var r=n(614),o=n(3070),i=n(6339),u=n(3072);t.exports=function(t,e,n,c){c||(c={});var a=c.enumerable,s=void 0!==c.name?c.name:e;if(r(n)&&i(n,s,c),c.global)a?t[e]=n:u(e,n);else{try{c.unsafe?t[e]&&(a=!0):delete t[e]}catch(t){}a?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,u=o(i)&&o(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},7207:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},7871:function(t,e,n){var r=n(3823),o=n(5268);t.exports=!r&&!o&&"object"==typeof window&&"object"==typeof document},3823:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},1528:function(t,e,n){var r=n(8113),o=n(7854);t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},6833:function(t,e,n){var r=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(t,e,n){var r=n(4326),o=n(7854);t.exports="process"==r(o.process)},1036:function(t,e,n){var r=n(8113);t.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,o,i=n(7854),u=n(8113),c=i.process,a=i.Deno,s=c&&c.versions||a&&a.version,f=s&&s.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&u&&(!(r=u.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=u.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),u=n(8052),c=n(3072),a=n(9920),s=n(4705);t.exports=function(t,e){var n,f,l,p,v,h=t.target,d=t.global,y=t.stat;if(n=d?r:y?r[h]||c(h,{}):(r[h]||{}).prototype)for(f in e){if(p=e[f],l=t.dontCallGetSet?(v=o(n,f))&&v.value:n[f],!s(d?f:h+(y?".":"#")+f,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;a(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),u(n,f,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},2104:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.apply,u=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?u.bind(i):function(){return u.apply(i,arguments)})},9974:function(t,e,n){var r=n(1702),o=n(9662),i=n(4374),u=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?u(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,u=r&&Object.getOwnPropertyDescriptor,c=o(i,"name"),a=c&&"something"===function(){}.name,s=c&&(!r||r&&u(i,"name").configurable);t.exports={EXISTS:c,PROPER:a,CONFIGURABLE:s}},1702:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.bind,u=o.call,c=r&&i.bind(u,u);t.exports=r?function(t){return t&&c(t)}:function(t){return t&&function(){return u.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),o=n(8173),i=n(8554),u=n(7497),c=n(5112)("iterator");t.exports=function(t){if(!i(t))return o(t,c)||o(t,"@@iterator")||u[r(t)]}},4121:function(t,e,n){var r=n(6916),o=n(9662),i=n(9670),u=n(6330),c=n(1246),a=TypeError;t.exports=function(t,e){var n=arguments.length<2?c(t):e;if(o(n))return i(r(n,t));throw a(u(t)+" is not iterable")}},8173:function(t,e,n){var r=n(9662),o=n(8554);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},842:function(t,e,n){var r=n(7854);t.exports=function(t,e){var n=r.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(1702),o=n(7293),i=n(4326),u=Object,c=r("".split);t.exports=o((function(){return!u("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?c(t,""):u(t)}:u},9587:function(t,e,n){var r=n(614),o=n(111),i=n(7674);t.exports=function(t,e,n){var u,c;return i&&r(u=e.constructor)&&u!==n&&o(c=u.prototype)&&c!==n.prototype&&i(t,c),t}},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),u=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return u(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var r,o,i,u=n(4811),c=n(7854),a=n(1702),s=n(111),f=n(8880),l=n(2597),p=n(5465),v=n(6200),h=n(3501),d="Object already initialized",y=c.TypeError,m=c.WeakMap;if(u||p.state){var g=p.state||(p.state=new m),b=a(g.get),x=a(g.has),w=a(g.set);r=function(t,e){if(x(g,t))throw y(d);return e.facade=t,w(g,t,e),e},o=function(t){return b(g,t)||{}},i=function(t){return x(g,t)}}else{var S=v("state");h[S]=!0,r=function(t,e){if(l(t,S))throw y(d);return e.facade=t,f(t,S,e),e},o=function(t){return l(t,S)?t[S]:{}},i=function(t){return l(t,S)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),o=n(7497),i=r("iterator"),u=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||u[i]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},614:function(t){t.exports=function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(1702),o=n(7293),i=n(614),u=n(648),c=n(5005),a=n(2788),s=function(){},f=[],l=c("Reflect","construct"),p=/^\s*(?:class|function)\b/,v=r(p.exec),h=!p.exec(s),d=function(t){if(!i(t))return!1;try{return l(s,f,t),!0}catch(t){return!1}},y=function(t){if(!i(t))return!1;switch(u(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!v(p,a(t))}catch(t){return!0}};y.sham=!0,t.exports=!l||o((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?y:d},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,u=function(t,e){var n=a[c(t)];return n==f||n!=s&&(o(e)?r(e):!!e)},c=u.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=u.data={},s=u.NATIVE="N",f=u.POLYFILL="P";t.exports=u},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,n){var r=n(614),o="object"==typeof document&&document.all,i=void 0===o&&void 0!==o;t.exports=i?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(5005),o=n(614),i=n(7976),u=n(3307),c=Object;t.exports=u?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,c(t))}},408:function(t,e,n){var r=n(9974),o=n(6916),i=n(9670),u=n(6330),c=n(7659),a=n(6244),s=n(7976),f=n(4121),l=n(1246),p=n(9212),v=TypeError,h=function(t,e){this.stopped=t,this.result=e},d=h.prototype;t.exports=function(t,e,n){var y,m,g,b,x,w,S,E=n&&n.that,O=!(!n||!n.AS_ENTRIES),j=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),P=!(!n||!n.INTERRUPTED),I=r(e,E),L=function(t){return y&&p(y,"normal",t),new h(!0,t)},A=function(t){return O?(i(t),P?I(t[0],t[1],L):I(t[0],t[1])):P?I(t,L):I(t)};if(j)y=t.iterator;else if(T)y=t;else{if(!(m=l(t)))throw v(u(t)+" is not iterable");if(c(m)){for(g=0,b=a(t);b>g;g++)if((x=A(t[g]))&&s(d,x))return x;return new h(!1)}y=f(t,m)}for(w=j?t.next:y.next;!(S=o(w,y)).done;){try{x=A(S.value)}catch(t){p(y,"throw",t)}if("object"==typeof x&&x&&s(d,x))return x}return new h(!1)}},9212:function(t,e,n){var r=n(6916),o=n(9670),i=n(8173);t.exports=function(t,e,n){var u,c;o(t);try{if(!(u=i(t,"return"))){if("throw"===e)throw n;return n}u=r(u,t)}catch(t){c=!0,u=t}if("throw"===e)throw n;if(c)throw u;return o(u),n}},3061:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),u=n(8003),c=n(7497),a=function(){return this};t.exports=function(t,e,n,s){var f=e+" Iterator";return t.prototype=o(r,{next:i(+!s,n)}),u(t,f,!1,!0),c[f]=a,t}},1656:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),u=n(6530),c=n(614),a=n(3061),s=n(9518),f=n(7674),l=n(8003),p=n(8880),v=n(8052),h=n(5112),d=n(7497),y=n(3383),m=u.PROPER,g=u.CONFIGURABLE,b=y.IteratorPrototype,x=y.BUGGY_SAFARI_ITERATORS,w=h("iterator"),S="keys",E="values",O="entries",j=function(){return this};t.exports=function(t,e,n,u,h,y,T){a(n,e,u);var P,I,L,A=function(t){if(t===h&&R)return R;if(!x&&t in C)return C[t];switch(t){case S:case E:case O:return function(){return new n(this,t)}}return function(){return new n(this)}},N=e+" Iterator",k=!1,C=t.prototype,M=C[w]||C["@@iterator"]||h&&C[h],R=!x&&M||A(h),_="Array"==e&&C.entries||M;if(_&&(P=s(_.call(new t)))!==Object.prototype&&P.next&&(i||s(P)===b||(f?f(P,b):c(P[w])||v(P,w,j)),l(P,N,!0,!0),i&&(d[N]=j)),m&&h==E&&M&&M.name!==E&&(!i&&g?p(C,"name",E):(k=!0,R=function(){return o(M,this)})),h)if(I={values:A(E),keys:y?R:A(S),entries:A(O)},T)for(L in I)(x||k||!(L in C))&&v(C,L,I[L]);else r({target:e,proto:!0,forced:x||k},I);return i&&!T||C[w]===R||v(C,w,R,{name:h}),d[e]=R,I}},3383:function(t,e,n){"use strict";var r,o,i,u=n(7293),c=n(614),a=n(111),s=n(30),f=n(9518),l=n(8052),p=n(5112),v=n(1913),h=p("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=f(f(i)))!==Object.prototype&&(r=o):d=!0),!a(r)||u((function(){var t={};return r[h].call(t)!==t}))?r={}:v&&(r=s(r)),c(r[h])||l(r,h,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(7293),o=n(614),i=n(2597),u=n(9781),c=n(6530).CONFIGURABLE,a=n(2788),s=n(9909),f=s.enforce,l=s.get,p=Object.defineProperty,v=u&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),h=String(String).split("String"),d=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!i(t,"name")||c&&t.name!==e)&&(u?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&i(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&i(n,"constructor")&&n.constructor?u&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=f(t);return i(r,"source")||(r.source=h.join("string"==typeof e?e:"")),t};Function.prototype.toString=d((function(){return o(this)&&l(this).source||a(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},5948:function(t,e,n){var r,o,i,u,c,a,s,f,l=n(7854),p=n(9974),v=n(1236).f,h=n(261).set,d=n(6833),y=n(1528),m=n(1036),g=n(5268),b=l.MutationObserver||l.WebKitMutationObserver,x=l.document,w=l.process,S=l.Promise,E=v(l,"queueMicrotask"),O=E&&E.value;O||(r=function(){var t,e;for(g&&(t=w.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?u():i=void 0,t}}i=void 0,t&&t.enter()},d||g||m||!b||!x?!y&&S&&S.resolve?((s=S.resolve(void 0)).constructor=S,f=p(s.then,s),u=function(){f(r)}):g?u=function(){w.nextTick(r)}:(h=p(h,l),u=function(){h(r)}):(c=!0,a=x.createTextNode(""),new b(r).observe(a,{characterData:!0}),u=function(){a.data=c=!c})),t.exports=O||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,u()),i=e}},8523:function(t,e,n){"use strict";var r=n(9662),o=TypeError,i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw o("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},30:function(t,e,n){var r,o=n(9670),i=n(6048),u=n(748),c=n(3501),a=n(490),s=n(317),f=n(6200),l="prototype",p="script",v=f("IE_PROTO"),h=function(){},d=function(t){return"<"+p+">"+t+"</"+p+">"},y=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;m="undefined"!=typeof document?document.domain&&r?y(r):(e=s("iframe"),n="java"+p+":",e.style.display="none",a.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):y(r);for(var o=u.length;o--;)delete m[l][u[o]];return m()};c[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h[l]=o(t),n=new h,h[l]=null,n[v]=t):n=m(),void 0===e?n:i.f(n,e)}},6048:function(t,e,n){var r=n(9781),o=n(3353),i=n(3070),u=n(9670),c=n(5656),a=n(1956);e.f=r&&!o?Object.defineProperties:function(t,e){u(t);for(var n,r=c(e),o=a(e),s=o.length,f=0;s>f;)i.f(t,n=o[f++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),o=n(4664),i=n(3353),u=n(9670),c=n(4948),a=TypeError,s=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",p="configurable",v="writable";e.f=r?i?function(t,e,n){if(u(t),e=c(e),u(n),"function"==typeof t&&"prototype"===e&&"value"in n&&v in n&&!n[v]){var r=f(t,e);r&&r[v]&&(t[e]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:l in n?n[l]:r[l],writable:!1})}return s(t,e,n)}:s:function(t,e,n){if(u(t),e=c(e),u(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw a("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),u=n(9114),c=n(5656),a=n(4948),s=n(2597),f=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=c(t),e=a(e),f)try{return l(t,e)}catch(t){}if(s(t,e))return u(!o(i.f,t,e),t[e])}},1156:function(t,e,n){var r=n(4326),o=n(5656),i=n(8006).f,u=n(1589),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return c&&"Window"==r(t)?function(t){try{return i(t)}catch(t){return u(c)}}(t):i(o(t))}},8006:function(t,e,n){var r=n(6324),o=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),o=n(614),i=n(7908),u=n(6200),c=n(8544),a=u("IE_PROTO"),s=Object,f=s.prototype;t.exports=c?s.getPrototypeOf:function(t){var e=i(t);if(r(e,a))return e[a];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof s?f:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),u=n(1318).indexOf,c=n(3501),a=r([].push);t.exports=function(t,e){var n,r=i(t),s=0,f=[];for(n in r)!o(c,n)&&o(r,n)&&a(f,n);for(;e.length>s;)o(r,n=e[s++])&&(~u(f,n)||a(f,n));return f}},1956:function(t,e,n){var r=n(6324),o=n(748);t.exports=Object.keys||function(t){return r(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(1702),o=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},288:function(t,e,n){"use strict";var r=n(1694),o=n(648);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(t,e,n){var r=n(6916),o=n(614),i=n(111),u=TypeError;t.exports=function(t,e){var n,c;if("string"===e&&o(n=t.toString)&&!i(c=r(n,t)))return c;if(o(n=t.valueOf)&&!i(c=r(n,t)))return c;if("string"!==e&&o(n=t.toString)&&!i(c=r(n,t)))return c;throw u("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),u=n(5181),c=n(9670),a=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(c(t)),n=u.f;return n?a(e,n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2534:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},3702:function(t,e,n){var r=n(7854),o=n(2492),i=n(614),u=n(4705),c=n(2788),a=n(5112),s=n(7871),f=n(3823),l=n(1913),p=n(7392),v=o&&o.prototype,h=a("species"),d=!1,y=i(r.PromiseRejectionEvent),m=u("Promise",(function(){var t=c(o),e=t!==String(o);if(!e&&66===p)return!0;if(l&&(!v.catch||!v.finally))return!0;if(!p||p<51||!/native code/.test(t)){var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[h]=r,!(d=n.then((function(){}))instanceof r))return!0}return!e&&(s||f)&&!y}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:y,SUBCLASSING:d}},2492:function(t,e,n){var r=n(7854);t.exports=r.Promise},9478:function(t,e,n){var r=n(9670),o=n(111),i=n(8523);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},612:function(t,e,n){var r=n(2492),o=n(7072),i=n(3702).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},8572:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},2261:function(t,e,n){"use strict";var r,o,i=n(6916),u=n(1702),c=n(1340),a=n(7066),s=n(2999),f=n(2309),l=n(30),p=n(9909).get,v=n(9441),h=n(7168),d=f("native-string-replace",String.prototype.replace),y=RegExp.prototype.exec,m=y,g=u("".charAt),b=u("".indexOf),x=u("".replace),w=u("".slice),S=(o=/b*/g,i(y,r=/a/,"a"),i(y,o,"a"),0!==r.lastIndex||0!==o.lastIndex),E=s.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(S||O||E||v||h)&&(m=function(t){var e,n,r,o,u,s,f,v=this,h=p(v),j=c(t),T=h.raw;if(T)return T.lastIndex=v.lastIndex,e=i(m,T,j),v.lastIndex=T.lastIndex,e;var P=h.groups,I=E&&v.sticky,L=i(a,v),A=v.source,N=0,k=j;if(I&&(L=x(L,"y",""),-1===b(L,"g")&&(L+="g"),k=w(j,v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==g(j,v.lastIndex-1))&&(A="(?: "+A+")",k=" "+k,N++),n=new RegExp("^(?:"+A+")",L)),O&&(n=new RegExp("^"+A+"$(?!\\s)",L)),S&&(r=v.lastIndex),o=i(y,I?n:v,k),I?o?(o.input=w(o.input,N),o[0]=w(o[0],N),o.index=v.lastIndex,v.lastIndex+=o[0].length):v.lastIndex=0:S&&o&&(v.lastIndex=v.global?o.index+o[0].length:r),O&&o&&o.length>1&&i(d,o[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o&&P)for(o.groups=s=l(null),u=0;u<P.length;u++)s[(f=P[u])[0]]=o[f[1]];return o}),t.exports=m},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},2999:function(t,e,n){var r=n(7293),o=n(7854).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),u=i||r((function(){return!o("a","y").sticky})),c=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:c,MISSED_STICKY:u,UNSUPPORTED_Y:i}},9441:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:function(t,e,n){var r=n(8554),o=TypeError;t.exports=function(t){if(r(t))throw o("Can't call method on "+t);return t}},6340:function(t,e,n){"use strict";var r=n(5005),o=n(3070),i=n(5112),u=n(9781),c=i("species");t.exports=function(t){var e=r(t),n=o.f;u&&e&&!e[c]&&n(e,c,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,o=n(2597),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3072),i="__core-js_shared__",u=r[i]||o(i,{});t.exports=u},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.0",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(t,e,n){var r=n(9670),o=n(9483),i=n(8554),u=n(5112)("species");t.exports=function(t,e){var n,c=r(t).constructor;return void 0===c||i(n=r(c)[u])?e:o(n)}},8710:function(t,e,n){var r=n(1702),o=n(9303),i=n(1340),u=n(4488),c=r("".charAt),a=r("".charCodeAt),s=r("".slice),f=function(t){return function(e,n){var r,f,l=i(u(e)),p=o(n),v=l.length;return p<0||p>=v?t?"":void 0:(r=a(l,p))<55296||r>56319||p+1===v||(f=a(l,p+1))<56320||f>57343?t?c(l,p):r:t?s(l,p,p+2):f-56320+(r-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},3111:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),u=n(1361),c=r("".replace),a="["+u+"]",s=RegExp("^"+a+a+"*"),f=RegExp(a+a+"*$"),l=function(t){return function(e){var n=i(o(e));return 1&t&&(n=c(n,s,"")),2&t&&(n=c(n,f,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},6293:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:function(t,e,n){var r=n(6916),o=n(5005),i=n(5112),u=n(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,c=i("toPrimitive");e&&!e[c]&&u(e,c,(function(t){return r(n,this)}),{arity:1})}},2015:function(t,e,n){var r=n(6293);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},261:function(t,e,n){var r,o,i,u,c=n(7854),a=n(2104),s=n(9974),f=n(614),l=n(2597),p=n(7293),v=n(490),h=n(206),d=n(317),y=n(8053),m=n(6833),g=n(5268),b=c.setImmediate,x=c.clearImmediate,w=c.process,S=c.Dispatch,E=c.Function,O=c.MessageChannel,j=c.String,T=0,P={},I="onreadystatechange";try{r=c.location}catch(t){}var L=function(t){if(l(P,t)){var e=P[t];delete P[t],e()}},A=function(t){return function(){L(t)}},N=function(t){L(t.data)},k=function(t){c.postMessage(j(t),r.protocol+"//"+r.host)};b&&x||(b=function(t){y(arguments.length,1);var e=f(t)?t:E(t),n=h(arguments,1);return P[++T]=function(){a(e,void 0,n)},o(T),T},x=function(t){delete P[t]},g?o=function(t){w.nextTick(A(t))}:S&&S.now?o=function(t){S.now(A(t))}:O&&!m?(u=(i=new O).port2,i.port1.onmessage=N,o=s(u.postMessage,u)):c.addEventListener&&f(c.postMessage)&&!c.importScripts&&r&&"file:"!==r.protocol&&!p(k)?(o=k,c.addEventListener("message",N,!1)):o=I in d("script")?function(t){v.appendChild(d("script"))[I]=function(){v.removeChild(this),L(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:b,clear:x}},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),o=Object;t.exports=function(t){return o(r(t))}},7593:function(t,e,n){var r=n(6916),o=n(111),i=n(2190),u=n(8173),c=n(2140),a=n(5112),s=TypeError,f=a("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,a=u(t,f);if(a){if(void 0===e&&(e="default"),n=r(a,t,e),!o(n)||i(n))return n;throw s("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(648),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),u=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+u(++o+i,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),o=n(7293);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:function(t,e,n){var r=n(7854),o=n(614),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},6800:function(t,e,n){var r=n(857),o=n(2597),i=n(6061),u=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||u(e,t,{value:i.f(t)})}},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),u=n(9711),c=n(6293),a=n(3307),s=o("wks"),f=r.Symbol,l=f&&f.for,p=a?f:f&&f.withoutSetter||u;t.exports=function(t){if(!i(s,t)||!c&&"string"!=typeof s[t]){var e="Symbol."+t;c&&i(f,t)?s[t]=f[t]:s[t]=a&&l?l(e):p(e)}return s[t]}},1361:function(t){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},2222:function(t,e,n){"use strict";var r=n(2109),o=n(7293),i=n(3157),u=n(111),c=n(7908),a=n(6244),s=n(7207),f=n(6135),l=n(5417),p=n(1194),v=n(5112),h=n(7392),d=v("isConcatSpreadable"),y=h>=51||!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),m=p("concat"),g=function(t){if(!u(t))return!1;var e=t[d];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,arity:1,forced:!y||!m},{concat:function(t){var e,n,r,o,i,u=c(this),p=l(u,0),v=0;for(e=-1,r=arguments.length;e<r;e++)if(g(i=-1===e?u:arguments[e]))for(o=a(i),s(v+o),n=0;n<o;n++,v++)n in i&&f(p,v,i[n]);else s(v+1),f(p,v++,i);return p.length=v,p}})},1038:function(t,e,n){var r=n(2109),o=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:o})},6992:function(t,e,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),u=n(9909),c=n(3070).f,a=n(1656),s=n(1913),f=n(9781),l="Array Iterator",p=u.set,v=u.getterFor(l);t.exports=a(Array,"Array",(function(t,e){p(this,{type:l,target:r(t),index:0,kind:e})}),(function(){var t=v(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var h=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&f&&"values"!==h.name)try{c(h,"name",{value:"values"})}catch(t){}},5069:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(3157),u=o([].reverse),c=[1,2];r({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),u(this)}})},7042:function(t,e,n){"use strict";var r=n(2109),o=n(3157),i=n(4411),u=n(111),c=n(1400),a=n(6244),s=n(5656),f=n(6135),l=n(5112),p=n(1194),v=n(206),h=p("slice"),d=l("species"),y=Array,m=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,l,p=s(this),h=a(p),g=c(t,h),b=c(void 0===e?h:e,h);if(o(p)&&(n=p.constructor,(i(n)&&(n===y||o(n.prototype))||u(n)&&null===(n=n[d]))&&(n=void 0),n===y||void 0===n))return v(p,g,b);for(r=new(void 0===n?y:n)(m(b-g,0)),l=0;g<b;g++,l++)g in p&&f(r,l,p[g]);return r.length=l,r}})},6078:function(t,e,n){var r=n(2597),o=n(8052),i=n(8709),u=n(5112)("toPrimitive"),c=Date.prototype;r(c,u)||o(c,u,i)},8309:function(t,e,n){var r=n(9781),o=n(6530).EXISTS,i=n(1702),u=n(3070).f,c=Function.prototype,a=i(c.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(s.exec);r&&!o&&u(c,"name",{configurable:!0,get:function(){try{return f(s,a(this))[1]}catch(t){return""}}})},8862:function(t,e,n){var r=n(2109),o=n(5005),i=n(2104),u=n(6916),c=n(1702),a=n(7293),s=n(3157),f=n(614),l=n(111),p=n(2190),v=n(206),h=n(6293),d=o("JSON","stringify"),y=c(/./.exec),m=c("".charAt),g=c("".charCodeAt),b=c("".replace),x=c(1..toString),w=/[\uD800-\uDFFF]/g,S=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,O=!h||a((function(){var t=o("Symbol")();return"[null]"!=d([t])||"{}"!=d({a:t})||"{}"!=d(Object(t))})),j=a((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")})),T=function(t,e){var n=v(arguments),r=e;if((l(e)||void 0!==t)&&!p(t))return s(e)||(e=function(t,e){if(f(r)&&(e=u(r,this,t,e)),!p(e))return e}),n[1]=e,i(d,null,n)},P=function(t,e,n){var r=m(n,e-1),o=m(n,e+1);return y(S,t)&&!y(E,o)||y(E,t)&&!y(S,r)?"\\u"+x(g(t,0),16):t};d&&r({target:"JSON",stat:!0,arity:3,forced:O||j},{stringify:function(t,e,n){var r=v(arguments),o=i(O?T:d,null,r);return j&&"string"==typeof o?b(o,w,P):o}})},3706:function(t,e,n){var r=n(7854);n(8003)(r.JSON,"JSON",!0)},2703:function(t,e,n){n(8003)(Math,"Math",!0)},9653:function(t,e,n){"use strict";var r=n(9781),o=n(7854),i=n(1702),u=n(4705),c=n(8052),a=n(2597),s=n(9587),f=n(7976),l=n(2190),p=n(7593),v=n(7293),h=n(8006).f,d=n(1236).f,y=n(3070).f,m=n(863),g=n(3111).trim,b="Number",x=o[b],w=x.prototype,S=o.TypeError,E=i("".slice),O=i("".charCodeAt),j=function(t){var e=p(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,n,r,o,i,u,c,a,s=p(t,"number");if(l(s))throw S("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=g(s),43===(e=O(s,0))||45===e){if(88===(n=O(s,2))||120===n)return NaN}else if(48===e){switch(O(s,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(u=(i=E(s,2)).length,c=0;c<u;c++)if((a=O(i,c))<48||a>o)return NaN;return parseInt(i,r)}return+s};if(u(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var P,I=function(t){var e=arguments.length<1?0:x(j(t)),n=this;return f(w,n)&&v((function(){m(n)}))?s(Object(e),n,I):e},L=r?h(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;L.length>A;A++)a(x,P=L[A])&&!a(I,P)&&y(I,P,d(x,P));I.prototype=w,w.constructor=I,c(o,b,I,{constructor:!0})}},9660:function(t,e,n){var r=n(2109),o=n(6293),i=n(7293),u=n(5181),c=n(7908);r({target:"Object",stat:!0,forced:!o||i((function(){u.f(1)}))},{getOwnPropertySymbols:function(t){var e=u.f;return e?e(c(t)):[]}})},489:function(t,e,n){var r=n(2109),o=n(7293),i=n(7908),u=n(9518),c=n(8544);r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!c},{getPrototypeOf:function(t){return u(i(t))}})},1539:function(t,e,n){var r=n(1694),o=n(8052),i=n(288);r||o(Object.prototype,"toString",i,{unsafe:!0})},821:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),u=n(8523),c=n(2534),a=n(408);r({target:"Promise",stat:!0,forced:n(612)},{all:function(t){var e=this,n=u.f(e),r=n.resolve,s=n.reject,f=c((function(){var n=i(e.resolve),u=[],c=0,f=1;a(t,(function(t){var i=c++,a=!1;f++,o(n,e,t).then((function(t){a||(a=!0,u[i]=t,--f||r(u))}),s)})),--f||r(u)}));return f.error&&s(f.value),n.promise}})},4164:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(3702).CONSTRUCTOR,u=n(2492),c=n(5005),a=n(614),s=n(8052),f=u&&u.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(u)){var l=c("Promise").prototype.catch;f.catch!==l&&s(f,"catch",l,{unsafe:!0})}},3401:function(t,e,n){"use strict";var r,o,i,u=n(2109),c=n(1913),a=n(5268),s=n(7854),f=n(6916),l=n(8052),p=n(7674),v=n(8003),h=n(6340),d=n(9662),y=n(614),m=n(111),g=n(5787),b=n(6707),x=n(261).set,w=n(5948),S=n(842),E=n(2534),O=n(8572),j=n(9909),T=n(2492),P=n(3702),I=n(8523),L="Promise",A=P.CONSTRUCTOR,N=P.REJECTION_EVENT,k=P.SUBCLASSING,C=j.getterFor(L),M=j.set,R=T&&T.prototype,_=T,F=R,B=s.TypeError,D=s.document,G=s.process,U=I.f,H=U,V=!!(D&&D.createEvent&&s.dispatchEvent),Y="unhandledrejection",z=function(t){var e;return!(!m(t)||!y(e=t.then))&&e},q=function(t,e){var n,r,o,i=e.value,u=1==e.state,c=u?t.ok:t.fail,a=t.resolve,s=t.reject,l=t.domain;try{c?(u||(2===e.rejection&&X(e),e.rejection=1),!0===c?n=i:(l&&l.enter(),n=c(i),l&&(l.exit(),o=!0)),n===t.promise?s(B("Promise-chain cycle")):(r=z(n))?f(r,n,a,s):a(n)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},$=function(t,e){t.notified||(t.notified=!0,w((function(){for(var n,r=t.reactions;n=r.get();)q(n,t);t.notified=!1,e&&!t.rejection&&J(t)})))},W=function(t,e,n){var r,o;V?((r=D.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},!N&&(o=s["on"+t])?o(r):t===Y&&S("Unhandled promise rejection",n)},J=function(t){f(x,s,(function(){var e,n=t.facade,r=t.value;if(K(t)&&(e=E((function(){a?G.emit("unhandledRejection",r,n):W(Y,n,r)})),t.rejection=a||K(t)?2:1,e.error))throw e.value}))},K=function(t){return 1!==t.rejection&&!t.parent},X=function(t){f(x,s,(function(){var e=t.facade;a?G.emit("rejectionHandled",e):W("rejectionhandled",e,t.value)}))},Q=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,$(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw B("Promise can't be resolved itself");var r=z(e);r?w((function(){var n={done:!1};try{f(r,e,Q(tt,n,t),Q(Z,n,t))}catch(e){Z(n,e,t)}})):(t.value=e,t.state=1,$(t,!1))}catch(e){Z({done:!1},e,t)}}};if(A&&(F=(_=function(t){g(this,F),d(t),f(r,this);var e=C(this);try{t(Q(tt,e),Q(Z,e))}catch(t){Z(e,t)}}).prototype,(r=function(t){M(this,{type:L,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=l(F,"then",(function(t,e){var n=C(this),r=U(b(this,_));return n.parent=!0,r.ok=!y(t)||t,r.fail=y(e)&&e,r.domain=a?G.domain:void 0,0==n.state?n.reactions.add(r):w((function(){q(r,n)})),r.promise})),o=function(){var t=new r,e=C(t);this.promise=t,this.resolve=Q(tt,e),this.reject=Q(Z,e)},I.f=U=function(t){return t===_||void 0===t?new o(t):H(t)},!c&&y(T)&&R!==Object.prototype)){i=R.then,k||l(R,"then",(function(t,e){var n=this;return new _((function(t,e){f(i,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete R.constructor}catch(t){}p&&p(R,F)}u({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:_}),v(_,L,!1,!0),h(L)},8674:function(t,e,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),u=n(8523),c=n(2534),a=n(408);r({target:"Promise",stat:!0,forced:n(612)},{race:function(t){var e=this,n=u.f(e),r=n.reject,s=c((function(){var u=i(e.resolve);a(t,(function(t){o(u,e,t).then(n.resolve,r)}))}));return s.error&&r(s.value),n.promise}})},683:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(8523);r({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},6294:function(t,e,n){"use strict";var r=n(2109),o=n(5005),i=n(1913),u=n(2492),c=n(3702).CONSTRUCTOR,a=n(9478),s=o("Promise"),f=i&&!c;r({target:"Promise",stat:!0,forced:i||c},{resolve:function(t){return a(f&&this===s?u:this,t)}})},4916:function(t,e,n){"use strict";var r=n(2109),o=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,o=n(1340),i=n(9909),u=n(1656),c="String Iterator",a=i.set,s=i.getterFor(c);u(String,"String",(function(t){a(this,{type:c,string:o(t),index:0})}),(function(){var t,e=s(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},2443:function(t,e,n){n(6800)("asyncIterator")},4032:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),u=n(1702),c=n(1913),a=n(9781),s=n(6293),f=n(7293),l=n(2597),p=n(7976),v=n(9670),h=n(5656),d=n(4948),y=n(1340),m=n(9114),g=n(30),b=n(1956),x=n(8006),w=n(1156),S=n(5181),E=n(1236),O=n(3070),j=n(6048),T=n(5296),P=n(8052),I=n(2309),L=n(6200),A=n(3501),N=n(9711),k=n(5112),C=n(6061),M=n(6800),R=n(6532),_=n(8003),F=n(9909),B=n(2092).forEach,D=L("hidden"),G="Symbol",U="prototype",H=F.set,V=F.getterFor(G),Y=Object[U],z=o.Symbol,q=z&&z[U],$=o.TypeError,W=o.QObject,J=E.f,K=O.f,X=w.f,Q=T.f,Z=u([].push),tt=I("symbols"),et=I("op-symbols"),nt=I("wks"),rt=!W||!W[U]||!W[U].findChild,ot=a&&f((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=J(Y,e);r&&delete Y[e],K(t,e,n),r&&t!==Y&&K(Y,e,r)}:K,it=function(t,e){var n=tt[t]=g(q);return H(n,{type:G,tag:t,description:e}),a||(n.description=e),n},ut=function(t,e,n){t===Y&&ut(et,e,n),v(t);var r=d(e);return v(n),l(tt,r)?(n.enumerable?(l(t,D)&&t[D][r]&&(t[D][r]=!1),n=g(n,{enumerable:m(0,!1)})):(l(t,D)||K(t,D,m(1,{})),t[D][r]=!0),ot(t,r,n)):K(t,r,n)},ct=function(t,e){v(t);var n=h(e),r=b(n).concat(lt(n));return B(r,(function(e){a&&!i(at,n,e)||ut(t,e,n[e])})),t},at=function(t){var e=d(t),n=i(Q,this,e);return!(this===Y&&l(tt,e)&&!l(et,e))&&(!(n||!l(this,e)||!l(tt,e)||l(this,D)&&this[D][e])||n)},st=function(t,e){var n=h(t),r=d(e);if(n!==Y||!l(tt,r)||l(et,r)){var o=J(n,r);return!o||!l(tt,r)||l(n,D)&&n[D][r]||(o.enumerable=!0),o}},ft=function(t){var e=X(h(t)),n=[];return B(e,(function(t){l(tt,t)||l(A,t)||Z(n,t)})),n},lt=function(t){var e=t===Y,n=X(e?et:h(t)),r=[];return B(n,(function(t){!l(tt,t)||e&&!l(Y,t)||Z(r,tt[t])})),r};s||(z=function(){if(p(q,this))throw $("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=N(t),n=function(t){this===Y&&i(n,et,t),l(this,D)&&l(this[D],e)&&(this[D][e]=!1),ot(this,e,m(1,t))};return a&&rt&&ot(Y,e,{configurable:!0,set:n}),it(e,t)},P(q=z[U],"toString",(function(){return V(this).tag})),P(z,"withoutSetter",(function(t){return it(N(t),t)})),T.f=at,O.f=ut,j.f=ct,E.f=st,x.f=w.f=ft,S.f=lt,C.f=function(t){return it(k(t),t)},a&&(K(q,"description",{configurable:!0,get:function(){return V(this).description}}),c||P(Y,"propertyIsEnumerable",at,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!s,sham:!s},{Symbol:z}),B(b(nt),(function(t){M(t)})),r({target:G,stat:!0,forced:!s},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!a},{create:function(t,e){return void 0===e?g(t):ct(g(t),e)},defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:st}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ft}),R(),_(z,G),A[D]=!0},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),u=n(1702),c=n(2597),a=n(614),s=n(7976),f=n(1340),l=n(3070).f,p=n(9920),v=i.Symbol,h=v&&v.prototype;if(o&&a(v)&&(!("description"in h)||void 0!==v().description)){var d={},y=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),e=s(h,this)?new v(t):void 0===t?v():v(t);return""===t&&(d[e]=!0),e};p(y,v),y.prototype=h,h.constructor=y;var m="Symbol(test)"==String(v("test")),g=u(h.valueOf),b=u(h.toString),x=/^Symbol\((.*)\)[^)]+$/,w=u("".replace),S=u("".slice);l(h,"description",{configurable:!0,get:function(){var t=g(this);if(c(d,t))return"";var e=b(t),n=m?S(e,7,-1):w(e,x,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:y})}},763:function(t,e,n){var r=n(2109),o=n(5005),i=n(2597),u=n(1340),c=n(2309),a=n(2015),s=c("string-to-symbol-registry"),f=c("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!a},{for:function(t){var e=u(t);if(i(s,e))return s[e];var n=o("Symbol")(e);return s[e]=n,f[n]=e,n}})},2165:function(t,e,n){n(6800)("iterator")},2526:function(t,e,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(t,e,n){var r=n(2109),o=n(2597),i=n(2190),u=n(6330),c=n(2309),a=n(2015),s=c("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!a},{keyFor:function(t){if(!i(t))throw TypeError(u(t)+" is not a symbol");if(o(s,t))return s[t]}})},6649:function(t,e,n){var r=n(6800),o=n(6532);r("toPrimitive"),o()},9341:function(t,e,n){var r=n(5005),o=n(6800),i=n(8003);o("toStringTag"),i(r("Symbol"),"Symbol")},4747:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),u=n(8533),c=n(8880),a=function(t){if(t&&t.forEach!==u)try{c(t,"forEach",u)}catch(e){t.forEach=u}};for(var s in o)o[s]&&a(r[s]&&r[s].prototype);a(i)},3948:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),u=n(6992),c=n(8880),a=n(5112),s=a("iterator"),f=a("toStringTag"),l=u.values,p=function(t,e){if(t){if(t[s]!==l)try{c(t,s,l)}catch(e){t[s]=l}if(t[f]||c(t,f,e),o[e])for(var n in u)if(t[n]!==u[n])try{c(t,n,u[n])}catch(e){t[n]=u[n]}}};for(var v in o)p(r[v]&&r[v].prototype,v);p(i,"DOMTokenList")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.r(r),n.d(r,{BottomSheet:function(){return l}}),n(2222),n(9653),n(6649),n(6078),n(2526),n(1817),n(1539),n(8674),n(2165),n(6992),n(8783),n(3948),n(2443),n(9341),n(3706),n(2703),n(489),n(4747),n(8309),n(5069),n(7042),n(1038),n(4916);var e=function(e){var n,r=function(e){if(Array.isArray(e))return t(e)}(n=document.querySelectorAll("".concat(e," *")))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=1;return r.forEach((function(t){var e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index");isNaN(e)||(e=Number(e),o=o<e?e:o)})),Number(o)};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",a=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,u=Object.create(i.prototype),c=new P(o||[]);return r(u,"_invoke",{value:E(t,n,c)}),u}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var v={};function h(){}function d(){}function y(){}var m={};f(m,c,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==e&&n.call(b,c)&&(m=b);var x=y.prototype=h.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function i(r,u,c,a){var s=p(t[r],t,u);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==o(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,c,a)}),(function(t){i("throw",t,c,a)})):e.resolve(l).then((function(t){f.value=t,c(f)}),(function(t){return i("throw",t,c,a)}))}a(s.arg)}var u;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return u=u?u.then(r,r):r()}})}function E(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=O(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var a=p(t,e,n);if("normal"===a.type){if(r=n.done?"completed":"suspendedYield",a.arg===v)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r="completed",n.method="throw",n.arg=a.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=y,r(x,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=f(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(S.prototype),f(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var u=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},w(x),f(x,s,"Generator"),f(x,c,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),a=n.call(i,"finallyLoc");if(c&&a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},t}function u(t,e,n,r,o,i,u){try{var c=t[i](u),a=c.value}catch(t){return void n(t)}c.done?e(a):Promise.resolve(a).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){u(i,r,o,c,a,"next",t)}function a(t){u(i,r,o,c,a,"throw",t)}c(void 0)}))}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function s(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===o(e)?e:String(e)}var l=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"status",{}),s(this,"parents",""),s(this,"html",""),s(this,"height",50),s(this,"startY",0),s(this,"sheetClass",""),s(this,"contentsClass",""),s(this,"backgroundClass",""),s(this,"backgroundClickExit",!0),s(this,"beforeOpen",(function(){})),s(this,"afterOpen",(function(){})),s(this,"beforeEnd",(function(){})),s(this,"afterEnd",(function(){})),null===e)throw{message:"parents must be entered"};if(null===n)throw{message:"html must be entered"};this.parents=e,this.html=n}var n,r,o,u,f;return n=t,r=[{key:"open",value:(f=c(i().mark((function n(){var r,o,u,a,s,f,l=this;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=String(t.makeID(32)),o=e(this.parents),u="sheet_"+r,this.status[u]={},this.status[u].mousedown=!1,this.status[u].mouseup=!1,null===document.getElementById("frontleBottomSheetCSS")&&((a=document.createElement("style")).setAttribute("id","frontleBottomSheetCSS"),a.innerHTML="\n        .frontleBottomSheet{\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n        }\n        .frontleBottomSheetBackground{\n            position: relative;\n            width: 100%;\n            height: 100%;\n            top: 0;\n            left: 0;\n            background: #000000;\n            opacity: 0;\n            transition: opacity ease 0.4s 0s;\n        }\n        .frontleBottomSheetContents{\n            position: absolute;\n            width: 100%;\n            bottom: 0vh;\n            margin: 0 auto;\n            padding: 0rem 1.5rem 0rem 1.5rem;\n            border-top-left-radius: 5px;\n            border-top-right-radius: 5px;\n            box-sizing: border-box;\n            background: #ffffff;\n            overflow: hidden;\n        }\n        .frontleBottomSheetBar{\n            position: relative;\n            display: block;\n            padding-top: 0.5rem;\n            padding-bottom: 1rem;\n        }\n        .frontleBottomSheetBarLine{\n            position: relative;\n            display: block;\n            margin: 0 auto;\n            width: 2.5rem;\n            height: 0.3125rem;\n            border-radius: 10px;\n            background: #c4c4c4;\n        }\n        .frontleBottomSheetHtml{\n            position: relative;\n            display: block;\n            width: 100%;\n            height: calc(100% - 2.75rem);\n            overflow: scroll;\n            -ms-overflow-style: none; /* IE and Edge */\n            scrollbar-width: none; /* Firefox */\n        }\n        .frontleBottomSheetHtml::-webkit-scrollbar {\n            display: none; /* Chrome, Safari, Opera*/\n        }\n      ",document.head.insertBefore(a,document.head.childNodes[0])),s='\n      <div class="frontleBottomSheetBackground '.concat(this.backgroundClass,'" style="z-index: ').concat(o+1,'"></div>\n\n      <div class="frontleBottomSheetContents ').concat(this.contentsClass,'" style="\n        max-height: ').concat(this.height,"vh;\n        height: ").concat(this.height,"vh;\n        z-index: ").concat(o+2,";\n        bottom: -").concat(this.height,'vh;\n        transition: bottom ease 0.4s 0s;\n      ">\n        <div class="frontleBottomSheetBar">\n          <div class="frontleBottomSheetBarLine"></div>\n        </div>\n        <div class="frontleBottomSheetHtml">').concat(this.html,"</div>\n      </div>\n    "),(f=document.createElement("div")).setAttribute("id",u),f.className="frontleBottomSheet ".concat(this.sheetClass),f.innerHTML=s,f.style.zIndex=String(o),document.querySelector(this.parents).append(f),n.next=16,this.beforeOpen(u);case 16:return setTimeout((function(){var t=f.querySelector(".frontleBottomSheetBackground");null!==t&&(t.style.opacity="0.4");var e=f.querySelector(".frontleBottomSheetContents");null!==e&&(e.style.bottom="".concat(l.startY,"vh"))}),100),setTimeout(c(i().mark((function t(){var e,n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==(e=f.querySelector(".frontleBottomSheetBar"))&&(l.status[u].mouseDownEvent=function(t){t.preventDefault(),l.eventMouseDown(u)},e.addEventListener("mousedown",l.status[u].mouseDownEvent,!1),l.status[u].touchStartEvent=function(){l.eventMouseDown(u)},e.addEventListener("touchstart",l.status[u].touchStartEvent,!1)),n=f.querySelector(".frontleBottomSheetContents"),l.status[u].mouseUpEvent=function(t){t.preventDefault(),l.eventMouseUp(t,u,n)},document.addEventListener("mouseup",l.status[u].mouseUpEvent,!1),l.status[u].touchEndEvent=function(t){l.eventMouseUp(t.changedTouches[0],u,n)},document.addEventListener("touchend",l.status[u].touchEndEvent,!1),l.status[u].mouseMoveEvent=function(t){t.preventDefault(),l.eventMouseMove(t,u,n)},document.addEventListener("mousemove",l.status[u].mouseMoveEvent,!1),l.status[u].touchMoveEvent=function(t){l.eventMouseMove(t.changedTouches[0],u,n)},document.addEventListener("touchmove",l.status[u].touchMoveEvent,!1),!0===l.backgroundClickExit&&null!==(r=f.querySelector(".frontleBottomSheetBackground"))&&r.addEventListener("click",(function(){l.close(u)}),!1),null!==n&&n.style.removeProperty("transition"),t.next=15,l.afterOpen(u);case 15:case"end":return t.stop()}}),t)}))),500),n.abrupt("return",u);case 19:case"end":return n.stop()}}),n,this)}))),function(){return f.apply(this,arguments)})},{key:"close",value:(u=c(i().mark((function t(e){var n,r,o,u=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.beforeEnd(e);case 2:n=document.getElementById(e),null!==(r=n.querySelector(".frontleBottomSheetBackground"))&&(r.style.opacity="0"),null!==(o=n.querySelector(".frontleBottomSheetContents"))&&(o.style.transition="bottom ease 0.4s 0s",o.style.bottom="-".concat(this.height,"vh")),setTimeout(c(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.removeEventListener("mousedown",u.status[e].mouseDownEvent),document.removeEventListener("touchstart",u.status[e].touchStartEvent),document.removeEventListener("mousemove",u.status[e].mouseMoveEvent),document.removeEventListener("touchmove",u.status[e].touchMoveEvent),document.removeEventListener("mouseup",u.status[e].mouseUpEvent),document.removeEventListener("touchend",u.status[e].touchEndEvent),delete u.status[e],null!==n&&n.remove(),t.next=10,u.afterEnd(e);case 10:case"end":return t.stop()}}),t)}))),400);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"eventMouseDown",value:function(t){!1===this.status[t].mouseup&&(this.status[t].mousedown=!0)}},{key:"eventMouseUp",value:function(t,e,n){var r=this;if(this.status[e].mousedown){this.status[e].mousedown=!1,this.status[e].mouseup=!0;var o=window.innerHeight-t.clientY;o<0&&(o=0),o>window.innerHeight&&(o=window.innerHeight);var i,u=o/window.innerHeight*100-Number(this.height);u>=0&&(u=0),Number(u)>=Number(this.startY)?(i=Number(this.startY)/2<=Number(u)?0:this.startY,n.style.transition="bottom ease 0.4s 0s",n.style.bottom="".concat(i,"vh"),setTimeout((function(){n.style.removeProperty("transition"),r.status[e].mouseup=!1}),400)):this.close(e)}}},{key:"eventMouseMove",value:function(t,e,n){if(this.status[e].mousedown){var r=window.innerHeight-t.clientY;r<0&&(r=0),r>window.innerHeight&&(r=window.innerHeight);var o=r/window.innerHeight*100-Number(this.height);o>=0&&(o=0),n.style.bottom="".concat(o,"vh")}}}],o=[{key:"makeID",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e}}],r&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t}()}(),r}()}));
//# sourceMappingURL=frontle_bottomsheet.min.js.map

(function(win){
	win.openSheet = function(options){
		var bottomSheet = new BottomSheet(
		  options.container||"body",
		  typeof options.data =="string"?options.data:options.data
		);
		bottomSheet.height = 100;
		bottomSheet.startY = -50;
		bottomSheet.beforeOpen = function(sheetId) { 
		  $('body').addClass('bottomSheetOpen');
		  //overdd
            var old = this.eventMouseUp;
            this.eventMouseUp = function (e, sheetID, element){
                old.call(this,e, sheetID, element);
                //now get bottom
                element = $(element);
                var a = (element.height()*1)+parseInt(element.css("bottom"));
                element.find(".frontleBottomSheetHtml").height(a);
            };

            
		  if(options.beforeOpen)options.beforeOpen.call(this,sheetId);
		};

		bottomSheet.afterOpen = function(sheetId){
			 var element = $("#"+sheetId+" .frontleBottomSheetContents");
             var a = (element.height()*1)+parseInt(element.css("bottom"));
              element.find(".frontleBottomSheetHtml").height(a);
		};

		bottomSheet.afterEnd = function(sheetId) { 
		  $('body').removeClass('bottomSheetOpen');
		  if(options.afterEnd)options.afterEnd.call(this,sheetId);
		};
		bottomSheet.open().then(function(r){
			// console.log(r);
			id_sheet = r;
		});
		return {
			open : bottomSheet.open,
			close : function(){
				bottomSheet.close(id_sheet)	;
			}
		};
	};

	win.closeAll  = function(){
		$(".frontleBottomSheet").remove();
		$(".bottomSheetOpen").removeClass("bottomSheetOpen");
	};

	
 

	/*
	window.openSheet({
		data:'<h2>iOS Style Bottom Sheet Demo</h2><p class="lead">A lightweight and easy-to-use solution for creating iOS-style bottom sheets that slide up from the bottom of the screen and display content to the user.</p><button id="closeButton">close</button>',
		beforeOpen: function(sheetId) {
		   var me = this;
		  document.querySelector("#closeButton").onclick = function(){
		    me.close(sheetId);
		  };
		}
	});
	*/
})(window);
//https://codepen.io/webexpe/pen/oNqBqNJ
(function(win){
function post(e,t,n,r){$.ajax({url:e,type:"POST",data:t,async:r||!1,success:function(e){try{e=JSON.parse(e.trim())}catch(e){}n(e)},error:function(e,t,n){post.STATUS_CODE=n.status;this.success(e.responseText)}})}post.STATUS_CODE=0;function showMessageBar(e,t){t&&(t="danger"),$.notify({message:e},{type:t,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031,delay:5e3,timer:1e3})}function unblock(){$.unblockUI()}function block(){$.blockUI({message:'<button class="btn btn-default btn-lg"><i class="fa fa-circle-o-notch fa-spin"></i> Loading...</button>',css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})}document.location.replaceUrlParam=function(e,t,n){return replaceUrlParam(n||this.href,e,t)},"function"!=typeof Array.prototype.generateSlug&&(Array.prototype.generateSlug=function(e){return void 0==e&&(e="-"),remove_ancents(this.join(",")).toLowerCase().replace(/\s+/g,e).replace(/[^a-z0-9\-]/g,"")}),
function postForm(url,form,func,a){
  $.ajax({
        
        type: "POST",
        url: url,
        global: false,
        data: form,
        processData: false,
        contentType: false,
        beforeSend:function(xhr,options){
     
          var auth =$('[name="auth-token"]').attr("content");
          if(auth){
            xhr.setRequestHeader( 'auth-token',auth);
          }
           
        },
        async: a==true?true:false,
        success:function(data){
            try{
              data =  JSON.parse(data);
            }catch(e){}

            func(data);
        },
        error :function(a,b,c){
           this.success(a.responseText);
        }
    });
};
String.prototype.post= function(data,f){
    post(String(this),data,f,true);
};
String.prototype.form= function(options){
    
    var settings = $.extend({url:String(this),data:{},f:function(){}},options,true);

    return {
        url:function(url){
            settings.url = url;
            return this;
        },
        data:function(d){
            settings.data = d;
            return this;
        },
        post : function(f){
            f = f?f:settings.f;
            post(settings.url,settings.data,f,true);
            return this;
        }
    }
};


String.prototype.postForm= function(form,f){
    postForm(String(this),form,f,true);
};

HTMLElement.prototype.toggle = function () { 
    this.style.display = this.style.display == 'none' ? '' : 'none';
};


HTMLElement.prototype.post = function (f,url) { 
    if(this.nodeName=="FORM"){
        url = url?url:(this.action?this.action:document.location.href);
        postForm(url,this,f,true);
    }
};

//bride
function permission(name){
    return new Promise(function(resolve, reject){
        setTimeout(function(){
            if($("body").hasClass("android")&& window.WebViewJavascriptBridge && typeof window.WebViewJavascriptBridge=="object"){
             if(window.WebViewJavascriptBridge.hasPermissions(name)=="1"){
                resolve(1);
             }else{
                reject(0);
             }
            }else{
                //debug or something
                resolve(1);
            }
        },500);
    });
}
if(!window.webViewBridge){
 
(function(win){
    
    var parent = window.self!=window.top?window.parent:null;
 
    var promiseChain = Promise.resolve();

        var callbacks = {};

        (function() {

        var guid = function() {
            function s4() {
                return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
            }
            return s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
        }

        if(!win.webViewBridge){
            win.webViewBridge = {
                /**
                 * send message to the React-Native WebView onMessage handler
                 * @param targetFunc - name of the function to invoke on the React-Native side
                 * @param data - data to pass
                 * @param success - success callback
                 * @param error - error callback
                 */
                send: function(targetFunc, data, success, error) {

                    var msgObj = {
                        targetFunc: targetFunc,
                        data: data || {}
                    };

                    if (success || error) {
                        msgObj.msgId = guid();
                    }

                    var msg = JSON.stringify(msgObj);

                    promiseChain = promiseChain.then(function () {
                        return new Promise(function (resolve, reject) {
                            console.log("sending message " + msgObj.targetFunc);

                            if (msgObj.msgId) {
                                callbacks[msgObj.msgId] = {
                                    onsuccess: success,
                                    onerror: error
                                };
                            }
                            if(win.ReactNativeWebView)win.ReactNativeWebView.postMessage(msg);

                            resolve();
                        })
                    }).catch(function (e) {
                        if(error){
                            error(null);
                        }
                        // console.log('rnBridge send failed ' + e.message);
                    });
                },


            };
             
           
     
            win.addEventListener('message', function(e) {
              // alert(1);
                // if (event.origin !== "__"){
         
                  if(e.data=="close_app"){
                    go_to_home();
                    return;
                  }else if(e.data=="iframe"){
                    goBack();
                    return;
                  }
                    // console.log("message received from react native");
                    
                    try {
                        var message = JSON.parse(e.data);

                         if (message.args && callbacks[message.msgId]) {
                            // alert(typeof message.args==='object'?JSON.stringify(message.args):message.args);
                            if (message.isSuccessfull) {
                                callbacks[message.msgId].onsuccess.apply(null, message.args);
                            }
                            else {
                                callbacks[message.msgId].onerror.apply(null, message.args);
                            }
                            
                            setTimeout(function(){
                                delete callbacks[message.msgId];
                            },30*1000);
                        }
                        
                    }
                    catch(err) {
                        console.log("failed to parse message from react-native " + err,e.data);
                      // if(callbacks[message.msgId]){

                      //   callbacks[message.msgId].onerror.apply(null, [e.data]);
                      // }
                        
                        
                        return;
                    }

                    
                // } 
            });
        }
         win.update_core  = function(func){
          window.webViewBridge.send('update_core', {}, func, function(err) { });
        };

        win.AAppReady  = function(func){
          window.webViewBridge.send('app_ready', {}, func, function(err) { });
        };
        win.go_to_home =function(){
           $(".modal").modal('hide').hide().removeClass("in");
           $(".modal-backdrop").remove();
        }

        win.AContacts=function(func){
            window.webViewBridge.send('contacts', {}, func, function(err) { });
        };

        win.deviceToken=function(func){
            window.webViewBridge.send('deviceToken', {}, func, function(err) { });
        };

        win.AShare=function(s){
            if(parent){
                var msgObj = {
                    targetFunc: 'share',
                    data: s
                }; 
                msgObj.msgId = guid();
                callbacks[msgObj.msgId] = {
                    onsuccess: success,
                    onerror: error
                };

                var msg = JSON.stringify(msgObj);
                parent.postMessage(msg,"child");
                return;
            }
            if(window.ReactNativeWebView){
                window.webViewBridge.send('share', s, function(res) { }, function(err) { });
            }else if(navigator.share){
                navigator.share({
                  title: document.title,
                  text: s,
                  url: document.location.href,
                });
            }
            
        };
        win.ABack=function(){
            window.webViewBridge.send('back', {}, function(res) { }, function(err) { });
        };

         win.AExit=function(){
            window.webViewBridge.send('close', {}, function(res) { }, function(err) { });
        };
        window.Picker = {
            mapbox : (function(){
                var gps=null;var marker=null;var map=null;var geocoder=null;
                
                 


                  return function(options,callback){

                    options = $.extend({onChange:function(){},center:[106.6867623,10.8127808],accessToken:'pk.eyJ1IjoiYWhsdSIsImEiOiJjbHRwdDZjc3UwZ21tMnZudGNycHR6Mm9iIn0.bRUbKUDE8SEDLXDb_N1hMg'},options,true);
                        

                    var methods = {
                        show: function(){
                            $("body").css("overflow","hidden"); 
                            $(".popupmap").show(); 
                        },
                        hide: function(){
                            $("body").css("overflow","auto"); 
                            $(".popupmap").hide(); 
                        }
                    };

                    if(map==null){
                        var width = window.innerWidth<1015?window.innerWidth:414;
                        $("body").append(`<style>
                            .popupmap{position:fixed;top:0;left:0;height:100%;width:100%;display:none;z-index: 100000000000;    background-color: rgb(59 54 54 / 44%);}
                            .popupmap .body{
    
       background-color: #fff; 
    margin: 5% auto;
    height: 90%;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
     
    width: ${width}px;
     }
    .popupmap .c{
         cursor: pointer;
    position: absolute;
    top: 24px;
    right: 24px;
    z-index: 10;
    padding: 8px;
    font-size: 24px;
    height: 44px;
    background-color: #fff;
    border-radius: 50%;
    width: 44px;
    display: FLEX;
    justify-content: center;
    align-items: center;
    }
   
    .popupmap .mapb{flex:1;height:100%;}
    .popupmap .mapb{flex:1;height:100%;}
    .popupmap .result .lr{
        padding: 8px;
  
    display: flex;
    flex-direction: row;
    }
    .popupmap .mapboxgl-ctrl-top-right{
            left: 0;
    top: 44px;
    }
    .popupmap .mapboxgl-ctrl-geocoder--icon{
            right: 0;
    left: inherit;
    }
                            </style><div class="popupmap">
                            
    <div class="body">
        <div class="c">x</div>
        <div class="mapb"></div>    
        <div class="result">
            
        </div> 
        <div class="">
            <button type="button" class="btnok">Xc nhn </button>
            <button type="button" class="btnno">Hu b </button>
        </div>                    
    </div>
               
                        </div>`);
                        if(options.accessToken) mapboxgl.accessToken = options.accessToken;
                        function load(){
                              var center = options.center;
                              map = new mapboxgl.Map({
                                container: $(".popupmap .mapb")[0],
                                style: 'mapbox://styles/mapbox/streets-v12',
                                center: center,
                                zoom: 16
                              });
             
              
                              map.on('load', function () {
                                // map.addSource('single-point', {
                                //   'type': 'geojson',
                                //   'data': {
                                //     'type': 'FeatureCollection',
                                //     'features': []
                                //   }
                                // });

                                // map.addLayer({
                                //   'id': 'point',
                                //   'source': 'single-point',
                                //   'type': 'circle',
                                //   'paint': {
                                //     'circle-radius': 10,
                                //     'circle-color': '#448ee4'
                                //   }
                                // });

                                
                              });
             
                         
                              marker = new mapboxgl.Marker({
                                draggable: true
                              })
                              .setLngLat(center)
                              .addTo(map);

                              if(window.GPS){
                                window.GPS(function(p){
                                     map.setCenter([p.lng,p.lat]);
                                    marker.setLngLat([p.lng,p.lat]);
                                });
                              }
                               
                              function onDragEnd() {
                                var e = marker.getLngLat();
                                // console.log(e);
                                var l = JSON.stringify(marker.getLngLat());
                                // $(".popupmap .result").html(`
                                //     <div class="lr"><span class="data" style="flex: 1;">${l}</span><span data-copy='${l}'>Copy</span></div>
                                //     <div class="lr"><span class="data" style="flex: 1;">${l}</span><span data-copy='${l}'>Copy</span></div>
                                // `);

                                // post(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lng},${e.lat}.json?types=address&access_token=`+mapboxgl.accessToken,{},function(e){
                                //      console.log(e);
                                // },true);

                                if(options.onChange)options.onChange(marker.getLngLat());
                              }
                               
                              marker.on('dragend', onDragEnd);

                              $(".popupmap .c,.popupmap .btnno").on("click",function(){
                                methods.hide();
                                $(".popupmap .result").text("");
                              });
                              $(".popupmap .btnok").on("click",function(){
                                methods.hide();
                                $(".popupmap .result").text("");

                                if(callback)callback(marker.getLngLat());
                              });
                              

                            methods.show();


                            loadJS("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js",function(){

                                loadCSS("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css",function(){
                                     geocoder  = new MapboxGeocoder({
                                        country: 'vn',
                                    // Initialize the geocoder
                                    accessToken: mapboxgl.accessToken, // Set the access token
                                    mapboxgl: mapboxgl, // Set the mapbox-gl instance
                                    marker: false, // Do not use the default marker style
                                    placeholder: 'Tm kim...', // Placeholder text for the search bar
                                    // bbox: [-59.8920050976494, 12.958016032319861, -59.24930490233564, 13.427986048198505], // Boundary for Berkeley
                                    // proximity: {
                                    //   longitude: 13.193114,
                                    //   latitude: -59.570655
                                    // } // Coordinates of UC Berkeley
                                  });

                                    map.addControl(geocoder);
                                    // Listen for the `result` event from the Geocoder // `result` event is triggered when a user makes a selection
                                    //  Add a marker at the result's coordinates
                                    geocoder.on('result', function (e) {
                                        console.log(e.result);
                                        map.setCenter(e.result.center);
                                       marker.setLngLat(e.result.geometry.coordinates);
                                    });
                                });
 
                            });
                        }
                        if(!window.mapboxgl){
                            loadJS("https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js",function(){
                                loadCSS("https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css",load);
                            });
                        }else{
                           load();
                        }
                        

                    }else{
                       
                       if(options.center){
                         map.setCenter(options.center);
                         map.setLngLat(options.center);
                       } 

                      if(window.GPS){
                        window.GPS(function(p){
                            map.setCenter([p.lng,p.lat]);
                            marker.setLngLat([p.lng,p.lat]);
                        });
                      }
                               
                       methods.show();
                    }

                    return methods;

                  }
            })()
        };
        window.Picker.document = (function(){
            if(!window.ReactNativeWebView){
                setTimeout(function(){
                    $("body").append(`<div style="display:none">
                        <input class="picker_all" multiple type="file" />
                        <input class="picker_image"  accept="image/*;capture=camera" type="file" />
                        <input class="picker_video"  accept="video/*;capture=camera" type="file" />
                     </div>`);
                },2000);
            }
            return {
                file : function(options,callback){
                    if(!options)options={};
                    options.type = "file";
                    if(window.ReactNativeWebView){
                         window.webViewBridge.send('ImagePicker', options, callback, function(err) {callback(null)});
                     }else{
                        $(".picker_all").off("change").on("change",function(){
                            
                            callback(this.files);
                        }).trigger("click");
                     }
                   
                },
                camera : function(options,callback){
                    if(!options)options={};
                    options.type = "camera";
                    if(window.ReactNativeWebView){
                         window.webViewBridge.send('ImagePicker', options, function(res){
                            var reader = new FileReader();
                               reader.readAsDataURL(res.uri);
                               reader.onload = function () {
                                res.base64 = reader.result;
                                if(callback)callback(res);
                               };
                               reader.onerror = function (error) {
                                 console.log('Error: ', error);
                               }; 
                            
                        }, function(err) {callback(null)});
                     }else{
                        $(".picker_all").off("change").on("change",function(){
                            // var blob_url = window.URL.createObjectURL(file);
                            // 
                            var file = this.files[0];
                            var reader = new FileReader();
                               reader.readAsDataURL(file);
                               reader.onload = function () {
                                file.base64 = reader.result;
                                if(callback)callback(file);
                               };
                               reader.onerror = function (error) {
                                 console.log('Error: ', error);
                               }; 
                        }).trigger("click");
                     }
                   
                },
                image : function(options,callback){
                    if(!options)options={};
                    options.type = "image";
                    if(window.ReactNativeWebView){
                         window.webViewBridge.send('ImagePicker', options, function(res){
                            var reader = new FileReader();
                               reader.readAsDataURL(res.uri);
                               reader.onload = function () {
                                res.base64 = reader.result;
                                if(callback)callback(res);
                               };
                               reader.onerror = function (error) {
                                 console.log('Error: ', error);
                               }; 
                            
                        }, function(err) {callback(null)});
                     }else{
                        $(".picker_image").off("change").on("change",function(){
                            // var blob_url = window.URL.createObjectURL(file);

                            var file = this.files[0];

                             var reader = new FileReader();
                           reader.readAsDataURL(file);
                           reader.onload = function () {
                            file.base64 = reader.result;

                            if(options.cropping && window.uploadCrop){
                                //show cropper
                                window.uploadCrop(file,options.width||75,options.height||75,function(a){
                                     file.base64 = a;
                               
                                    if(callback)callback(file);
                                });
                            }else{
                                    
                               if(callback)callback(file);
                            }


                            
                           };
                           reader.onerror = function (error) {
                             console.log('Error: ', error);
                           }; 


                           
                        }).trigger("click");
                     }
                },
                video : function(options,callback){
                    if(!options)options={};
                     options.type = "video";
                    if(window.ReactNativeWebView){
                         window.webViewBridge.send('ImagePicker', options, function(res){
                            var reader = new FileReader();
                               reader.readAsDataURL(res.uri);
                               reader.onload = function () {
                                res.base64 = reader.result;
                                if(callback)callback(res);
                               };
                               reader.onerror = function (error) {
                                 console.log('Error: ', error);
                               }; 
                            
                        }, function(err) {callback(null)});
                     }else{
                        $(".picker_video").off("change").on("change",function(){
                            // var blob_url = window.URL.createObjectURL(file);
                            // 
                         var file = this.files[0];    
                        var reader = new FileReader();
                           reader.readAsDataURL(file);
                           reader.onload = function () {
                            file.base64 = reader.result;
                            if(callback)callback(file);
                           };
                           reader.onerror = function (error) {
                             console.log('Error: ', error);
                           }; 
                                
                             
                        }).trigger("click");
                     }
                }
            }
        })();

        win.sqlite = {
            backup : function(url,callback,name){
                window.webViewBridge.send('exportdb', {name:name},function(str){
                    
                });
            },
            restore : function(url,callback,name){
                fetch(url).then(function(r){return r.text()}).then(function(str){
                    str.split(";").map(function(sql){
                        window.webViewBridge.send('db', {sql:sql.trim(),name:name},callback);
                    }); 
                    callback(str);
                }); 
            },
            clear : function(callback,name){
                window.webViewBridge.send('db', {sql:"SELECT name FROM sqlite_master WHERE type='table'",action:"query",name:name}, function(data){
                    data.map(function(tb){
                        window.webViewBridge.send('db', {sql:"DROP TABLE IF EXISTS "+tb,action:"query",name:name});
                    });
                    callback(data);
                }, function(err) {callback(null)});
            },
            query : function(sql, callback,name){
                 window.webViewBridge.send('db', {sql:sql,action:"query",name:name}, callback, function(err) {callback(null)});
            },
            query_first : function(sql, callback,name){
                window.webViewBridge.send('db', {sql:sql,action:"query_first",name:name}, callback, function(err) {callback(null)});
            }
        };

        win.query_sqlite=function(sql, callback,name){
            window.webViewBridge.send('db', {sql:sql,action:"query",name:name}, callback, function(err) {callback(null)});
        };
        win.query_first_sqlite=function(sql, callback,name){
            window.webViewBridge.send('db', {sql:sql,action:"query_first",name:name}, callback, function(err) {callback(null)});
        };
        win.Model = (function(){
           // if(!Object.extend){
            var modal = {
               __construct:function(){

               },
               _columns:{},
               insert: function(data){
                  var keys = [],values=[];
                  for(var i in data){
                    keys.push(i);
                    values.push("'"+(typeof data[i]=="object"?JSON.stringify(data[i]):data[i])+"'");
                  }
                  var sql="insert into "+this.table+"("+keys.join(",")+") values("+values.join(",")+")";
                  this.query(sql);
               },
               update: function(data){
                  var keys = [],values=[];
                  for(var i in data){ 
                    if(this.primary_key!=i){
                       values.push(i+"='"+(typeof data[i]=="object"?JSON.stringify(data[i]):data[i])+"'");
                    }
                  }
                  var sql= "";
                  if(this.primary_key){
                    var id = data[this.primary_key];
                    if(id){
                      sql = "update "+this.table+" set "+values.join(",")+" where "+this.primary_key+"='"+id+"'";
                    }else{
                      sql = "update "+this.table+" set "+values.join(",");
                    }
                    
                  }else{
                    sql = "update "+this.table+" set "+values.join(",");
                  }
                  
                  this.query(sql);
               },
               updateWhere: function(data,where){
                  var keys = [],values=[];
                  for(var i in data){ 
                    values.push(i+"='"+(typeof data[i]=="object"?JSON.stringify(data[i]):data[i])+"'");
                  }
                  var sql= "";
                  if(this.primary_key){
                    var id = data[this.primary_key];
                    if(id){
                     
                    }else{
                      sql = "update "+this.table+" set "+values.join(",");
                    }
                    
                  }else{
                    sql = "update "+this.table+" set "+values.join(",");
                  }
                  var wheres = [];
                  for(var i in where){ 
                    wheres.push(i+"='"+data[i]+"'");
                  }
                  var sql = "update "+this.table+" set "+values.join(",")+" where "+wheres.join(" and ");
                  
                  this.query(sql);
               },
               delete: function(){
                  query_sqlite(sql);
               },
               query: function(sql,func){
                  console.log(sql);
                  query_sqlite(sql,func);
               }
            };
            
            // Model.extend("abc",{}).then((model)=>{
            // console.log(modal);
            // });
            return {
              extend:function(tb,obj){
                return new Promise(function(resolve,reject){


                    var b= $.extend(modal,obj,true);
                    b.table = tb;
                    query_first_sqlite("select (select '[' || group_concat('\"'||name||'\"', ',') || ']'  from pragma_table_info('"+tb+"')) as cols,(SELECT l.name FROM pragma_table_info('"+tb+"') as l WHERE l.pk = 1) as primary_key",function(data){
                 
                      try{
                         console.log("Rows ==> ",data);

                         if(!data.cols){
                           reject("No table "+tb);
                           return;
                         }
                       // var data = JSON.parse(res);
                       b._columns = data.cols;
                       b.primary_key = data.primary_key;

                      }catch(e){
                         alert(e.message);
                      }
                      

                       resolve(b);
                    }); 
                    b.__construct();
                    // db.query("INSERT INTO users(name) values('hello')").query("select * from users",function(data){
                    //   alert(JSON.stringify(data));
                    //     // console.log();
                    // });
                    
                }); 
              }
            };
          })();
        //https://www.sqlitetutorial.net/sqlite-create-table/
        win.sqlite=function(name) {
            var db = name;
            return new Promise(function(resolve, reject) {
                resolve({
                    tables : function(func){
                        this.query("SELECT name FROM  sqlite_master  WHERE  type ='table' AND  name NOT LIKE 'sqlite_%'",function(data){
                            if(func)func(data);
                        });
                    },
                    insert: function(data){
                        var sql="";

                        this.query(sql);

                        return this;
                    },
                    update: function(data){
                        var sql="";

                        this.query(sql);
                        return this;
                    }, 
                    delete: function(data){
                        var sql="";

                        this.query(sql);
                        return this;
                    },
                    query: function(sql,func){
                        win.webViewBridge.send('db', {db:db,ac:"query",sql:sql,args:[]}, function(res) {
                            if(func)func(res);
                        }, function(err) { });
                        return this;
                    },
                    query_first: function(sql,func){
                        this.query(sql,function(data){
                            if(func)func(data&&data.length>0?data[0]:null);
                        });
                        return this;
                    },
                    table : function(name,sql,func){
                         win.webViewBridge.send('db', {db:db,ac:"table",tb:name,sql:sql,args:[]}, function(res) {
                            if(func)func(res);
                        }, function(err) { });
                         return this;
                    }
                });
            });
        };
        var dbdefault = null;
        win.sqlite("dbdefault").then(function(db){
            dbdefault = db;
        });

        function filtercolumnnintb(cols,data){
            for(var i in data){
                if(cols[i]){
                    cols[i]=data[i];
                }
            }
        }


        setTimeout(function(){
            if(window.loadJS)
            loadJS("https://cdnjs.cloudflare.com/ajax/libs/squel/5.13.0/squel.min.js",function(){
             });
        },2000);
        function SqliteModel(db,tb,options){
            var database = db?db:dbdefault;
            var methods ={
                primaryKey:"_id",
                columns : options.columns||{},
                query:dbdefault.query,
                builder: function(){
                    return {
                        sql: squel.select().from(tb),
                        excute: function(){
                            methods.query(next.toString());
                        }
                    };
                },
                insert: function(data){

                    var cols = filtercolumnnintb(this.columns,data);

                    var sql=`insert into ${tb}(${Object.keys(cols).join(",")}) values(${Object.values(cols).map(function(v){
                        return `'${typeof v=="object"?JSON.stringify(v):v}'`;
                    }).join(",")})`;

                    database.query(sql);

                    return this;
                },
                update: function(data){
                    var cols = filtercolumnnintb(this.columns,data);
                    var keys = Object.keys(cols);
                    var sql=`update ${tb} set ${Object.values(cols).map(function(v,i){
                        return `${keys[i]}='${typeof v=="object"?JSON.stringify(v):v}'`;
                    }).join(",")} where ${this.primaryKey}=${cols[this.primaryKey]}`;

                    database.query(sql);

                    return this;
                }, 
                delete : function(id){ 
                    var keys = Object.keys(data);
                    var sql=`delete from ${tb}  where ${this.primaryKey}=${id}`;

                    database.query(sql);

                    return this;
                }
            };

            return methods;
        }
        String.prototype.SqliteModel = function(options){
            var tb = String(this);

            return SqliteModel(tb,options);
        };

        Storage.prototype.values = function(){
            var values = {},
              keys = Object.keys(this),
              i = keys.length;
              while ( i-- ) {
                  values[keys[i]]=  this.getItem(keys[i]);
              }

            return values;
        };

        Storage.prototype.keys = function(){
             
            return Object.keys(this);
        };
        if(win.ReactNativeWebView){
            // var host = document.location.host;

            win.AlocalStorage ={
             init : function(){
                     var values = win.localStorage.values();


                 return new Promise(function(func,b){
                     win.webViewBridge.send('localStorage', {"ac":"init",values:values}, function(res) {
                       console.log("localStorage syc ok");

                       func();
                       //now get back
                       // win.webViewBridge.send('localStorage', {"ac":"all"}, function(res) {
                       //     console.log("localStorage syc ok",res);
                           
                       //     for(var i in res)
                       //     {
                       //       win.localStorage.setItem(i,res[i]);
                       //     }
                           
                       //  }, function(err) {
                             
                       //  }); 
                    }, function(err) {
                         console.log("localStorage syc error", err);
                    }); 
                });

                   
             },
             getItem : function(k,v){ 
               

                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {ac:"get",k:k}, function(res) {
                      if(func)func(res||v);
                    }, function(err) {
                        func(null)
                    });
                });
             },
             removeItem : function(k){ 
               

                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {ac:"remove",k:k}, function(res) {
                      if(func)func(res);
                    }, function(err) {
                        func(null)
                    });
                });
             },
             setItem : function(k,v){
                
                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {"ac":"set",k:k,v:v}, function(res) {
                      if(func)func(res);
                    }, function(err) {
                        func(null)
                    });
                });
             },
             clear: function(k,v){
                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {"ac":"clear"}, function(res) {
                      if(func)func(res);
                    }, function(err) {
                        func(null)
                    });
                });
             },
             keys: function(k,v){
                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {"ac":"keys"}, func, function(err) {
                        func(null)
                    });
                });
             },
             all: function(){
                return new Promise(function(func,b){
                    win.webViewBridge.send('localStorage', {ac:"all"}, func, function(err) {
                        func(null)
                    });
                });
             }
          };

           //run
         win.AlocalStorage.all().then(function(res){
             for(var i in res){
                win.localStorage.setItem(i, decodeURIComponent(res[i]));
             }

             Storage.prototype.setItem = (function(key, value) {
                var me = this;
                // 
                window.AlocalStorage.setItem(key, value).then(function(){
                    me.call(window.localStorage, key, value);
                });

             }).bind(Storage.prototype.setItem);

             Storage.prototype.removeItem = (function(key) {
                var me = this;
                // 
                window.AlocalStorage.removeItem(key).then(function(){
                    me.call(window.localStorage, key);
                });

             }).bind(Storage.prototype.removeItem);

          });
        // Storage.prototype.getItem = (function(key) {
        //     return this.call(localStorage,"prefix" + key);
        // }).bind(Storage.prototype.getItem);

        }
       
        win.AFile=(function() {
          var path_ = window.document_path;


          win.ACache = {
            clear: function(){

            },
            getItem: function(k,func){
                if(!path_){
                 func(window.localStorage[k]);
                return null;
               }
                win.AFile.read("cache/"+k+".json",function(str){

                    try{
                        str = JSON.parse(str);
                    }catch(e){}
                    func(str)
                });
            },
            setItem: function(k,v){
                if(!path_){
                 window.localStorage.setItem(k,typeof v=="object"?JSON.stringify(v):v);
                return null;
               }
                win.AFile.save("cache/"+k+".json",v,function(){ });
            },
            key: function(){},
            value: function(){},
            lenght: function(){},
            removeItem: function(k){
                if(!path_){
                 window.localStorage.removeItem(k);
                return null;
               }
                win.AFile.unlink("cache/"+k+".json",function(str){});
            }
          };


          if(!path_){
            console.log("FileSystem is not supported.");
            return null;
          }

          
          


          return {
             assets : {
               path:win.root_local,
               exists: function(path,func) {
                  win.webViewBridge.send('existsFile', this.path+path, function(res) {
                      if(func)func(res);
                  }, function(err) { });
                  return this;
               },
               read: function(path,func) {
                  win.webViewBridge.send('readFile', this.path+path, function(res) {
                      if(func)func(res);
                  }, function(err) { });
                  return this;
               }
             },
             path : path_,
             exists: function(path,func) {
                win.webViewBridge.send('existsFile', this.path+path, function(res) {
                     
                    if(func)func(res);
                }, function(err) { });
                return this;
             },
             unlink: function(path,func) {
                win.webViewBridge.send('unlink', this.path+path, function(res) {
                    if(func)func(res);
                }, function(err) { });
                return this;
             },
             save: function(path,data,func) {
                win.webViewBridge.send('writeFile', {file:path,text:typeof data=="object"?JSON.stringify(data):data}, function(res) {
                    if(func)func(res);
                }, function(err) { });
                return this;
             },
             read: function(path,func) {
                win.webViewBridge.send('readFile', this.path+path, function(res) {
                    if(func)func(res);
                }, function(err) { 
                   if(func)func("");
                });
                return this;
             },
             folder: function(path) {
                 win.webViewBridge.send('readFolder', this.path+path, function(res) {
                    if(func)func(res);
                }, function(err) { });
                 return this;
             }
           };
        })();

        win.AFileSystem = function(file){
            return new Promise(function(a,b){
                var methods = {
                    string :"",
                    json : function(){
                        try{
                            return JSON.parse(this.string);
                        }catch(e){}
                        return null;
                    },
                    delete : function(){
                        win.AFile.unlink("data/"+file+".json",function(s){
                            
                        });
                        return this;
                    },
                    save : function(s){
                        win.AFile.save("data/"+file+".json",f,function(){
                            
                        });
                        return this;
                    }
                };


                win.AFile.read("data/"+file+".json",function(s){
                    methods.string = s;

                    a(methods)
                });
            });
        };

        win.hasPermission=function(name,func) {
          if(win.ReactNativeWebView){

            window.webViewBridge.send('hasPermission',{name:name},func);
          }else{
             if(func)func();
          }
        };
        win.view=function(name,func) {
            window.webViewBridge.send('view',name,func);
        };
        win.imageViewer=function(data,func) {
          if(data)
            window.webViewBridge.send('imageViewer',data,func);
        };


        win.postAsync = function(url,data,cb,headers){
            if(window.ReactNativeWebView){
                window.webViewBridge.send('postAsync',{url:url,data:data,cache:1,headers:headers},function(res){
                    res = decodeURIComponent(res);
                    try{
                        cb(JSON.parse(res));
                    }catch(e){
                        cb(res);
                    }
                });
            } else if(window.post){
               window.post(url,data,cb,true);
            }else{
                fetch(url,{
                    headers:{
                        method:"POST",
                        data:JSON.stringify(data)
                    }
                }).then(function(res){
                    try{
                        cb(JSON.parse(res));
                    }catch(e){
                        cb(res);
                    }
                });
            }
        };


        win.streamFile = function(file){
            return new Promise(function(a,b){
                if(window.ReactNativeWebView){
                    window.webViewBridge.send('streamFile',file,a);
                } else{
                    a(file);
                }
            });
        };
        //window.streamFile("https://is2-ssl.mzstatic.com/image/thumb/qYEYYvFXN2O4zEuCcBSbjw/738x416.webp").then(function(a){alert(a)})

        win.admode=function(id,func){
            if(parent){
                var msgObj = {
                    targetFunc: 'ads',
                    data: {id:id}
                }; 
                msgObj.msgId = guid();
                if(func){
                    callbacks[msgObj.msgId] = {
                        onsuccess: func,
                        onerror: null
                    };
                }
                

                var msg = JSON.stringify(msgObj);
                parent.postMessage(msg,"*");
                return;
            }

            window.webViewBridge.send('ads', {id:id}, function(res) {
                if(func)func();
            }, function(err) { });
        };
        win.admodefooter=function(show,id){
            window.webViewBridge.send('adsfooter', {id:id,show:show?true:false}, function(res) {
                if(func)func();
            }, function(err) { });
        };

        win.openUrlCache=function(options) {
          options = $.extend({
            url:"",
            name:""
          },options,true);

          if(!options.url){
            return;
          }
          if(!options.name){
            var uri = options.url;
            if(uri.includes("?")){
              uri = uri.split("?")[0];
            }
            options.name = uri.split("/").slice(-1).join().split(".").shift();
          }
          return new Promise(function(resolve, reject){
            if(win.ReactNativeWebView){
              win.AFile.read(options.name,function(res) {
                
                if(res.code==0){
                  post(options.url,options.data,function(e){
                     resolve(e);
                     win.AFile.save(options.name,e);
                  },true);
                }else{
                  resolve(res.code.text);
                }
              }); 
            }else{
               post(options.url,options.data,function(e){
                 resolve(e);

               },true);
            }

          });
        };
        
        if(!win.ReactNativeWebView){
             
           // var old_open =  win.open;

            // win.open=function(url) {
            //     if(window.MyIframe){
            //       window.MyIframe(url,null,true);
            //     }else{
            //         old_open.apply(this,arguments);
            //     }
            
            // };
            win.AWebsite=function(data) {
               if(window.MyIframe){
                  window.MyIframe(data.url,null,true);
                }else{
                    old_open.apply(this,[data.url]);
                }
            };

            
        }

        var old_close =  win.close;
        win.close=function(data){
          
          if(win.ReactNativeWebView){
             if(window.top!=window.self){
                  (window.opener||window.parent).postMessage('close_app',"*");
              }else{

                 window.webViewBridge.send('back', data?data:{}, function(res) { }, function(err) { });
              }
          }else{
             if(window.top!=window.self){
                  (window.opener||window.parent).postMessage('close_app',"*");
              }else{
                var data={
                    action:"back",
                    data: 1,
                };

                var nn = win.$||win.jQuery;
                if(nn){
                    nn(document).trigger("onBack",[data]);
                    if(data.data==1){
                        old_close();
                    }
                }else{
                    old_close();
                }
              }
          }
            
        };
        
        setTimeout(function(){
            //force in client
            if (win.history) {
                win.history._back11 = window.history.back;
                win.history.back = function(data) {
                    if (win.history.length==1&&!win.ReactNativeWebView) {
                        var data={
                            action:"back",
                            data: 1,
                        };

                        var nn = win.$||win.jQuery;
                        if(nn){
                            nn.trigger("onBack",[data]);
                            if(data.data==1){
                                win.history._back11();
                            }
                        }else{
                            win.history._back11();
                        }
                    } else {
                        win.history._back11();
                    }
                };
            }
        },5000);
        
        // win.history.back=function(){
          
        //       if(window.top!=window.self){
        //             (window.opener||window.parent).postMessage('close_app',"*");
        //         }else if(win.ReactNativeWebView){

        //            window.webViewBridge.send('back', {}, function(res) { }, function(err) { });
        //         }
                
        // };
           
       win.goback=function(func) {
        win.close();
            // if(parent){
            //     var msgObj = {
            //         targetFunc: 'back',
            //         data: {}
            //     }; 
            //     msgObj.msgId = guid();
            //     if(func){
            //         callbacks[msgObj.msgId] = {
            //             onsuccess: func,
            //             onerror: null
            //         };
            //     }
                
            //     msgObj.source = "child.com";
            //     var msg = JSON.stringify(msgObj);
            //     parent.postMessage(msg,"*");
            //     return;
            // }
            // window.webViewBridge.send('back',{},function(e) {
            //     if(func)func();
            // });
        };


        win.popup=function(data) {
            window.webViewBridge.send('popup',data,function(e) {
                // body...
            });
        };
        win.chat=function(data) {
            /*
            data ={
                api:"",
                name:"",
                avatar:""
                user:{
                  _id:"",
                  avatar:"",
                  fullname:""
                }
            }*/
            window.webViewBridge.send('chat',data,function(e) {
                // body...
            });
        };
        win.view=function(view,data) {
            window.webViewBridge.send('view',{view:view,params:data},function(e) {
                // body...
            });
        };
        
        win.openLink=function(url) {
            if(win.ReactNativeWebView){
                 window.webViewBridge.send('openLink',url,function(e) {
                    // body...
                });

            }else{
                win.open(url);
            }
           
        };


        
        win.GPS=function(fun) { 
            if(win.ReactNativeWebView){
                    win.webViewBridge.send('gps', {}, function(res) {
                        
                        if(!res||res.lat==0){
                            if (navigator.geolocation) {
                                navigator.geolocation.getCurrentPosition( function(position) {
                                            // Get current cordinates.
                                            res = {"lat": position.coords.latitude, "lng": position.coords.longitude}; 
                                            fun(res);
                                        },
                                        function(error) {
                                             fun({"lat": 0, "lng": 0});
                                        },
                                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}
                                );
                            }else{
                                fun({"lat": 0, "lng": 0});
                            } 
                        }else{
                            fun(res);
                            
                        }
                    }, function(err) {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition( function(position) {
                                    // Get current cordinates.
                                    res = {"lat": position.coords.latitude, "lng": position.coords.longitude}; 
                                    fun(res);
                                },
                                function(error) {
                                     fun({"lat": 0, "lng": 0});
                                },
                                {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}
                            );
                        }else{
                            fun(null);
                        }
                        // AApp.GPS(fun);
                    });
                
            }else{
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition( function(position) {
                            // Get current cordinates.
                            res = {"lat": position.coords.latitude, "lng": position.coords.longitude}; 
                            fun(res);
                        },
                        function(error) {
                             fun({"lat": 0, "lng": 0});
                        },
                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}
                    );
                }else{
                    var location = win.ALocation;
                  if(location){
                    var loc = location.loc.split(",");
                    fun({lat: loc[0]*1, lng: loc[1]*1});
                  }else{
                    fun(null);
                  }
                }
                
            }
        };
        win.GPS.cache=null;
        
        win.GPS.test = function(){
            win.GPS(function(res){
                alert(typeof res==="object"?JSON.stringify(res):res);
            });
        }; 
        window.ScanCallback = function(f,options){
          options = options?options:{title:win.Scan.desc};
            if(win.ReactNativeWebView){
                win.webViewBridge.send('scan', options, function(res) {
                    fun(res);
                }, function(err) {
                   fun(null);
                });
            }else{
                if(typeof bootbox==="object"){
                  bootbox.prompt("Nhp m Qrcode",function(res){
                     if(res) fun(res);
                  });
                }else{
                  alert("Scan is not supported.");
                  fun(null);
                }
            }
        };
        win.VideoRecord=function(options,fun) {  
            options = options?options:{url:'',data:{}};

            if(win.ReactNativeWebView){
                win.webViewBridge.send('VideoRecord', options, function(res) {
                  
                    fun(res);
                }, function(err) {
                   
                   fun(null);
                });
            }else{
                alert("Scan is not supported.");
            }
           
        };
        win.Scan=function(fun,options) {  
            options = options?options:{title:win.Scan.desc,desc:"Vui lng cho php Camera  qut.",lang:"vi"};
            if(win.ReactNativeWebView){
                win.webViewBridge.send('scan', options, function(res) {
                  
                    fun(res);
                }, function(err) {
                   
                   fun(null);
                });
            }else{
                if(typeof bootbox==="object"){
                  bootbox.prompt("Nhp m Qrcode",function(res){
                     if(res) fun(res);
                  });
                }else{
                  alert("Scan is not supported.");
                  fun(null);
                }
                
            }
           
        };
        win.Scan.desc = "Qut Qrcode";

        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(registration) { 
              console.log('ServiceWorker registration successful');
            }, function(err) { 
              console.log('ServiceWorker registration failed: ', err);
            });
          });
        }
        win.NotifyAlert = (function() {
           function requestPermission(func){
              if (win.Notification.permission === "granted"){
                 func();
              } else if (win.Notification.permission !== "denied") {
                win.Notification.requestPermission().then(function (permission) {
                  // If the user accepts, let's create a notification
                  if (permission === "granted") {
                    func();
                  }else{
                     requestPermission(func);
                  }
                });
              }
           }
           return function(options,callback){
            // {title,message,userInfo:{},page,playSound:true}
            options.body =  options.body?options.body:options.message;
            options.playSound =  options.playSound?options.playSound:true;
            options.vibrate =  options.vibrate?options.vibrate:true;
            // icon: './img/goodday.png'  vibrate: true
   
            if(typeof win.Notification =="function"){

               requestPermission(function(){
                  //https://www.javascripttutorial.net/web-apis/javascript-notification/
                  var notification = new Notification(options.title,options);
                  notification.options = options;
                  notification.onclick = function(){
                     if(this.options.url){
                        win.openLink(this.options.url);
                     }else if(callback.callback){
                        callback.call(this.options);
                     }
                     this.close();
                  };
                  notification.onshow = function(){
                      
                  };

                  if(options.playSound){
                    //ASound();
                  }
                  // notification.open();
               });
            }else{
              
               win.webViewBridge.send('notification', options, function(res) {
                  if(callback){
                    callback(res);
                  }
                }, function(err) {
                    fun(null);
                });
            }
          };
        })();
          win.ASound = (function(){
             var sound = null;
            if(!win.ReactNativeWebView){
              sound = new Audio();
            }

            return function(options) {
                  options = options?options:{local:false,url:"https://raw.githubusercontent.com/zmxv/react-native-sound-demo/master/pew2.aac"};
                  if(sound){
                    sound.src= options.url;
                    sound.play();
                  }else{
                    win.webViewBridge.send('sound', options, function(res) {
                       fun(res);
                    }, function(err) {
                        fun(null);
                    });
                  } 
                  
              };
          })();
            
          win.AChat = function(user,fun) {  
              win.webViewBridge.send('chat', user, function(res) {
                 fun(res);
              }, function(err) {
                  fun(null);
              });
          };
          win.AChat.test = function(){
              win.AChat({
                  userName: "Mr Demo",
                  userId:20,
                  userPhoto:"https://static.thenounproject.com/png/363640-200.png",
                  code:""
              },function(){

              });
          };
    })(); 
    win.ALogin = {
        Google: function (fun,config) { 
            win.webViewBridge.send('logingoogle', config?config:{}, function(res) {
                fun(res);
            }, function(err) {
                fun(null);
            });
        },
        Facebook: function (fun,config) { 
            win.webViewBridge.send('loginfacebook',config?config:{}, function(res) {
                fun(res);
            }, function(err) {
                fun(null);
            });
        },
        Apple: function (fun,config) { 
            win.webViewBridge.send('loginapple',config?config:{}, function(res) {
                fun(res);
            }, function(err) {
                fun(null);
            });
        }
    };


    
})(window);
 setTimeout(function(){
   var location = window.ALocation;
  if(location){
    var loc = location.loc.split(",");
    window.GPS.cache={lat: loc[0]*1, lng: loc[1]*1};
  } 
  if(window.$){
    $(document).on("page::back", function(e) {

      var info = {
        exit :1
      };


      $(document).trigger("close", [info]);

      if(info.exit){
        window.close();
      }
        
    });
    $(document).trigger('bride_ready');

    (function($) {
        var currSeconds = 0;

          /* Increment the idle time
              counter every second */
          var idleInterval = setInterval(function () {
              currSeconds = currSeconds + 1;
              if(currSeconds>30){
                //reset
                 currSeconds = 0;
                 console.log("onIdle");
                 $(document).trigger('onIdle');
              }
          }, 2000);
          $(document).on("mousemove keypress touchmove",function() { 
              currSeconds = 0;
          });
      })($);

      if(window.ADevice){
          if(window.ADevice.iphonex){
              $("body").addClass("iphonex");
          }
      }
  }
    
  },1000);
}



})(window);

(function(win){
    
    var callbacks={};
     var isMain = win.top==win.self;

     win.MyGPS = function(f){
        // if(win.GPS){
        //        win.GPS(f);
        //       return;
        // }


        if(isMain){
           if(win.GPS){
               win.GPS(f);
           }else{
              f(null); 
           }
           return ;
        }
        var data={
          native:1,
          ac : "GPS",
          id:Date.now(),
          success : f,
          error : null
        };
        callbacks[data.id] = data;
        (parent||opener).postMessage(JSON.stringify(data),"*");
     };
     win.MyScan = function(f){
        

        if(isMain){
           if(win.Scan){
               win.Scan(f);
           }else{
              f(null); 
           }
           return ;
        }
        var data={
          native:1,
          ac : "Scan",
          id:Date.now(),
          success : f,
          error : null
        };
        callbacks[data.id] = data;
        (parent||opener).postMessage(JSON.stringify(data),"*");
     };
     win.addEventListener("message",function(e){
        var data = e.data;
        if(typeof data=="string"){
            
            if(data.includes("passkey:")){
            
                var passkey = data.replace("passkey:","");
                   
            }else if(data.includes("adevice:")){
            
                document.body.classList.add("adevice");
                return;
            }
        }
        try{
            data = JSON.parse(data)
        }catch(e){}
        if(typeof data =="object" && data.native ){

            //check response
             if(data.response){
                if(callbacks[data.id]){
                    if(data.response.success){
                       if(callbacks[data.id].success){
                           if(callbacks[data.id].success)callbacks[data.id].success(data.response.data);
                       }else{
                            if(callbacks[data.id].error)callbacks[data.id].error(data.response.data);
                       }
                    }
                 
                }
                return;
            }

            switch(data.ac){
                case "GPS":
                    if(win.GPS){
                        win.GPS(function(pos){
                            data.response = {success:1,data:pos};
                            e.source.postMessage(JSON.stringify(data),"*");
                        });
                    }else{
                        data.response = {success:1,data:null};
                        e.source.postMessage(JSON.stringify(data),"*");
                    }
                break;
                case "Scan":
                    if(win.Scan){
                        win.Scan(function(d){
                            data.response = {success:1,data:d};
                            e.source.postMessage(JSON.stringify(data),"*");
                        });
                    }else{
                        data.response = {success:1,data:null};
                        e.source.postMessage(JSON.stringify(data),"*");
                    }
                break;
            }
        }
     });


 })(window);

 /*
 
     if(!isMain){
        

        setInterval(function(){
           console.log("i am child, call MyGPS from pent");
 
           MyGPS(function(e){
             console.log(e);
           }); 
        },30*1000);
     }
  */
$.fn.dropdownMenu = function(options){
	return this.each(function(){
		var el = $(this);

		el.on("click",".dropdown-menu li",function(e){
			e.preventDefault();
			el.find(".data").html($(this).html());
			if(options.onclick){
				options.onclick.apply(arguments);
			}
		});

		$(document).on("click",function(){
			el.removeClass("open");
		});
	}); 
};

(function(win){
	win.CDN={};
	CDN.local ={
		post: function(){

		},
		delete: function(){
			
		}
	};
})(window);
(function ( $, window, document, undefined ) {
   
   var pluginName = "circleSvg",

        defaults={
        	showText: function(v){
        		return '';
        	},
        	width:45
        };
    
      function Plugin( element, options ) {

        this.element = element;

        this.$elem = $(this.element);

        this.options = $.extend( {}, defaults, options );

        this._defaults = defaults;

        this._name = pluginName;
        var that = this;
            var settings = this.options;
      this.$elem.data(pluginName,this);
      
      var ele = $(element);
      ////////////
      if(!ele.hasClass('single-circle')){
      	 ele.html(`<div class="single-circle" style="width:${this.options.width}px">
		    <svg viewBox="0 0 36 36" class="circular-chart orange">
		      <path class="circle-bg" d="M18 2.0845
		          a 15.9155 15.9155 0 0 1 0 31.831
		          a 15.9155 15.9155 0 0 1 0 -31.831"></path>
		      <path class="cir" stroke-dasharray="0, 100" d="M18 2.0845
		          a 15.9155 15.9155 0 0 1 0 31.831
		          a 15.9155 15.9155 0 0 1 0 -31.831"></path>
		      <text x="18" y="20.35" class="per"></text>
		    </svg>
		  </div>`);
      	 ele = ele.find('.single-circle');
      } 

      this.showPercent = function(v){
      	ele.find('.cir').attr('stroke-dasharray',`${v}, 100`);
      	ele.find('.per').html(this.options.showText(v));
      };

    }
    $.fn[pluginName] = function ( options ) {
      var lists  = this,
            retval = this;
        var params =   arguments;
        lists.each(function()
        {
            var plugin = $(this).data(pluginName);
            if (!plugin) {
                $(this).data(pluginName, new Plugin(this, options));
                $(this).data(pluginName+"-id", new Date().getTime());
            }else {
                if (typeof options === 'string' && typeof plugin[options] === 'function') {
                    retval = plugin[options].apply(plugin,Array.prototype.slice.call(params,1));
                }
            }
        });
        return retval || lists;
    };
})( jQuery, window, document );
(function(win){
    //https://codepen.io/RedJokingInn/pen/RpddaE
    // loadJS("https://faucet.donggiatri.com/js/ckeditor/ckeditor.js",function(){
    //     CKEDITOR.config.allowedContent = true;

    //     $(document).trigger('CKEDITOR_READY');
    // });
     String.prototype.CKEDITOR = function(options) {
         var s = this.toString();
         // if(CKEDITOR.instances[s] && CKEDITOR.instances[s].destroy){
         //     CKEDITOR.instances[s].destroy();
         // } 
         // CKEDITOR.replace(s);
         // return CKEDITOR.instances[s];
        return CKEDITOR_GO(s,"",options);
     };
      win.CKEDITOR_UPDATE= function (){
          for (var i in CKEDITOR.instances) {
            CKEDITOR.instances[i].updateElement();
          }
     };

     win.CKEDITOR_UPLOAD= function (f){
          $(document).off('CKEDITOR_UPLOAD').on('CKEDITOR_UPLOAD',f);
     };

     var loaded =0;
    win.CKEDITOR_GO = function(id,data,options){

            if(typeof CKEDITOR!="object"){
                if(loaded==0){
                    loaded=1;
                    loadJS("https://faucet.donggiatri.com/js/ckeditor/ckeditor.js",function(){
                        CKEDITOR.config.allowedContent = true;

                        $(document).trigger('CKEDITOR_READY');
                    });
                }
                var id1 = setInterval(function(){
                    if(CKEDITOR){
                        CKEDITOR_GO(id,data,options);
                        clearInterval(id1);
                    }
                },1000);
                return;
            }

            if(CKEDITOR.instances[id]){
               CKEDITOR.instances[id].destroy();
            }
            var a = CKEDITOR.replace(id,$.extend({
                // Define the toolbar groups as it is a more accessible solution.
                toolbarGroups: [
                    {"name":"basicstyles","groups":["basicstyles"]},
                    {"name":"links","groups":["links"]},
                    {"name":"paragraph","groups":["list","blocks"]},
                    {"name":"document","groups":["mode"]},
                    {"name":"insert","groups":["insert"]},
                    {"name":"styles","groups":["styles"]},
                    {"name":"about","groups":["about"]}
                ],
                // Remove the redundant buttons from toolbar groups defined above.
                removeButtons: 'Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord'
            },options,true) );
        if(data)CKEDITOR.instances["html_print"].setData(data);

        if(options&&options.callback){
            options.callback();
        }
        return a;
      };
})(window);
      
(function(win){
  function alert(message){
    if(win.Toast){
      Toast.Center(message);
    }else if($.toast){
      $.toast(message);
    }else if(win.bootbox){
      bootbox.alert(message);
    }else{
       alert(message)
    }
  }
    function fallbackCopyTextToClipboard(text,message) {

      var textArea = document.createElement("textarea");

      textArea.value = text;

      

      // Avoid scrolling to bottom

      textArea.style.top = "0";

      textArea.style.left = "0";

      textArea.style.position = "fixed";



      document.body.appendChild(textArea);

      textArea.focus();

      textArea.select();



      try {

        var successful = document.execCommand('copy');
 
        alert(successful?message:' sao chp');

      } catch (err) {

        console.error('Fallback: Oops, unable to copy', err);

      }



      document.body.removeChild(textArea);

    }

    if(!win.copyText){

        win.copyText = function (text,message) {

          if (!navigator.clipboard) {

            fallbackCopyTextToClipboard(text,message);

            return;

          }

          navigator.clipboard.writeText(text).then(function() {

            alert(message||' sao chp');

          }, function(err) {

            console.error('Async: Could not copy text: ', err);

          });

        };

    }
    win.copyToClipboard = function(text,func) {
     var elem = document.createElement('textarea');
     elem.value = text;
     document.body.appendChild(elem);
     elem.select();
     document.execCommand('copy');
     document.body.removeChild(elem);
     if(typeof func == 'function'){
        func();
     }else{
        alert(" so chp");
     }
     
  };
    win.addEventListener("click",function(e){
      var ele = $(e.target).closest("[data-copy]");
      if(ele.length==0){
        ele = $(e.target);
      }

      if(ele.attr("data-copy")){
         var txt = ele.attr("data-copy");

         if(txt[0]=="." || txt[0]=="#"){
           if($(txt).length){
             txt = $(txt).text();
           } 
         }

          var message = ele.attr("data-copy-message");

          win.copyText(txt,message);

      }
    },true);

     function paste(obj,text,msg){
       if(!text)return;
        if(obj){
          var obj = $(obj);
          if(obj[0].nodeName=="INPUT" || obj[0].nodeName=="TEXTAREA"){
             obj.val(text);
          }else{
            obj.parent().find("input,textarea").val(text);
          }

          alert(msg);

          return;
        }

        // bool to indicate if the user agent is internet explorer
        let isIE = /Trident/.test(navigator.userAgent);
        
        if (document.queryCommandSupported('insertText') && !isIE) {
            // Chrome etc.
            document.execCommand('insertText', false, text);
            
        } else {
            // IE.
            
            // delete content from selection.
            var sel = window.getSelection();
            var range = sel.getRangeAt(0);
            document.execCommand("delete");

            // paste plain text in a new node.
            var newNode = document.createTextNode(text);

            range.insertNode(newNode);
            range.setStart(newNode, 0)
            range.setEnd(newNode, newNode.childNodes.length);

            sel.removeAllRanges;
            sel.addRange(range);
        }


        alert(msg); 
    }

    $(document).on("click","[data-paste]",function(e){
        e.preventDefault();
        console.log(this);
        var obj = this;

        // Get text from the clipboard.
        
        var msg = $(obj).data("paste-msg")||"Sao chp thnh cng.";

        
        var t = $(obj).data("paste");

        if(t){
          paste(obj,t,msg);
          return;
        }
        
        navigator.clipboard.readText().then(function(tt){


            paste(obj,t||tt,msg);

        }).catch(function(e){
             var text = '';
            if (e.clipboardData || (e.originalEvent && e.originalEvent.clipboardData)) {
              text = (e.originalEvent || e).clipboardData.getData('text/plain');
            } else if (window.clipboardData) {
              text = window.clipboardData.getData('Text');
            }

            paste(obj,text,msg);
        });

    });
})(window);

setTimeout(function(){
  var s=`<style>.base-timer{position:relative;width:200px;height:200px;margin:0 auto}.base-timer__svg{transform:scaleX(-1)}.base-timer__circle{fill:none;stroke:none}.base-timer__path-elapsed{stroke-width:7px;stroke:grey}.base-timer__path-remaining{stroke-width:7px;stroke-linecap:round;transform:rotate(90deg);transform-origin:center;transition:1s linear;fill-rule:nonzero;stroke:currentColor}.base-timer__path-remaining.green{color:#41b883}.base-timer__path-remaining.orange{color:orange}.base-timer__path-remaining.red{color:red}.base-timer__label{position:absolute;width:200px;height:200px;top:0;display:flex;align-items:center;justify-content:center;font-size:48px}</style>`;
  document.body.insertAdjacentHTML("beforeend", s); 
},100);
    window.counter = function(counterapp,TIME_LIMIT,fun){
        
        // Credit: Mateusz Rybczonec

        var FULL_DASH_ARRAY = 283;
        var WARNING_THRESHOLD = 10;
        var ALERT_THRESHOLD = 5;

        var COLOR_CODES = {
          info: {
            color: "green"
          },
          warning: {
            color: "orange",
            threshold: WARNING_THRESHOLD
          },
          alert: {
            color: "red",
            threshold: ALERT_THRESHOLD
          }
        };
        
        let timePassed = 0;
        let timeLeft = TIME_LIMIT;
        let timerInterval = null;
        let remainingPathColor = COLOR_CODES.info.color;

        counterapp.innerHTML = `
        <div class="base-timer">
          <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <g class="base-timer__circle">
              <circle class="base-timer__path-elapsed" cx="50" cy="50" r="45"></circle>
              <path
                id="base-timer-path-remaining"
                stroke-dasharray="283"
                class="base-timer__path-remaining ${remainingPathColor}"
                d="
                  M 50, 50
                  m -45, 0
                  a 45,45 0 1,0 90,0
                  a 45,45 0 1,0 -90,0
                "
              ></path>
            </g>
          </svg>
          <span id="base-timer-label" class="base-timer__label">${formatTime(
            timeLeft
          )}</span>
        </div>
        `;

        startTimer();

        function onTimesUp() {
          clearInterval(timerInterval);
        }

        function startTimer() {
          timerInterval = setInterval(() => {
            timePassed = timePassed += 1;
            timeLeft = TIME_LIMIT - timePassed;
            counterapp.querySelector("#base-timer-label").innerHTML = formatTime(
              timeLeft
            );
            setCircleDasharray();
            setRemainingPathColor(timeLeft);

            if (timeLeft === 0) {
              onTimesUp();
            }
            if(fun)
            fun(timeLeft)
          }, 1000);
        }

        function formatTime(time) {
          const minutes = Math.floor(time / 60);
          let seconds = time % 60;

          if (seconds < 10) {
            seconds = `0${seconds}`;
          }

          return `${minutes}:${seconds}`;
        }

        function setRemainingPathColor(timeLeft) {
          const { alert, warning, info } = COLOR_CODES;
          if (timeLeft <= alert.threshold) {
            counterapp.querySelector("#base-timer-path-remaining").classList.remove(warning.color);
            counterapp.querySelector("#base-timer-path-remaining").classList.add(alert.color);
          } else if (timeLeft <= warning.threshold) {
            counterapp.querySelector("#base-timer-path-remaining").classList.remove(info.color);
            counterapp.querySelector("#base-timer-path-remaining").classList.add(warning.color);

          }
        }

        function calculateTimeFraction() {
          const rawTimeFraction = timeLeft / TIME_LIMIT;
          return rawTimeFraction - (1 / TIME_LIMIT) * (1 - rawTimeFraction);
        }

        function setCircleDasharray() {
          const circleDasharray = `${(
            calculateTimeFraction() * FULL_DASH_ARRAY
          ).toFixed(0)} 283`;
          counterapp.querySelector("#base-timer-path-remaining").setAttribute("stroke-dasharray", circleDasharray);
        }

};

(function(){
  fetch( "https://ip.nf/me.json").then(function(r){return r.json()}).then(function( data ) {
    window.country = data.ip;
    // $("#ip").html(data.ip.ip);
    if(window.$&&$(".ipcountry").length){
      $(".ipcountry").html(window.country.ip+"<br/>"+window.country.city + " (" + window.country.country_code + ")");
    }
    
}).catch(function(www){
    console.log("https://ip.nf/me.json not working...");
});

$(document).ready(function(){
  $("body").append(`<style>
.boxcountry{}
.boxcountry .cstate{
  display: flex;
    flex-direction: row;
    justify-content: space-between;
}
.boxcountry .cstate>*{
   width:33%;
}

@media screen and (max-width: 920px) {
  .boxcountry .cstate>*{
   width:100%;
}
}

/*Modal sheet*/
.countrysheet{
  height:100%;
  width:100%;
  position:absolute;
  bottom:0;
  visibility:hidden!important;
  left:0;
  z-index:10000000000000;
  transition: 0.3s all ease-in;
  background-color:rgb(51 51 51 / 19%);
  transform: translateY(-100%);
}
.countrysheet.active{
  visibility:visible!important;
  transform: translateY(0%);
}

.countrysheet .body{
   height: 45%;
    border-radius: 24px 24px 0 0;
    padding: 14px;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: #fff;
    color: #333;
    display: flex;
    flex-direction: column;
}

.countrysheet .btnok{
      width: 100%;
    text-align: center;
}

.countrysheet .flex{
  flex:1;
}

  </style>`);
  $("body").append(`<div class="countrysheet">
       <div class="body">
         <div class="ac" style="text-align: right;">
          <span onclick='$(".countrysheet").removeClass("active")'>ng</span>
         </div>
         <div class="countrya flex"></div>
         <div>
             <button class="btn btn-primary btnok">Chn</button>
         </div>
      </div>
    </div>`);
});
var ele =null;
  window.openCountry = function(options){
     var options = $.extend({
       type:"address"
     },options,true);
     if(!ele){
        ele =$(".countrysheet .countrya").country(options); 
     }

     $(".countrysheet .btnok").off("click").on("click",function(){

        if(options.callback){
          options.callback(ele.data("country").geData());
        }
        methods.close();
     });

     var methods= {
        open : function(){
           $(".countrysheet").addClass("active");
           return this;
        },
        close : function(){
           $(".countrysheet").removeClass("active");
           return this;
        }
     };
     return methods.open();
  };
$.fn.country= function(options){
 
            return this.each(function(){
                var settings = $.extend({
                  type:"address",
                  init : function(){

                  },
                  name:""
                },options,true);



                var modal = $(this).html(`<div class="boxcountry">
                    
                  ${settings.type=="address"?`<div class="design-group">
                        <label for="streetssss">S nh - ng - Khu ph</label>
                        <input type="text"  name="${name?`${name}[street]`:"street"}" title="Vui lng nhp S nh - ng - Khu ph" class="street required street" id="streetssss" style="text-transform: capitalize;" />
                      </div>`:""}
                     
                     <div class="cstate">
                          <div class="design-group">
                        <label for="sddsdfsad">Tnh/TP</label>
                        <select name="province_id" class="required province_id" title="Vui lng chn Tnh/TP" id="sddsdfsad"></select>
                        <input type="hidden" name="${name?`${name}[province]`:"province"}" class="province">
                      </div>      
                     
                      <div class="design-group">
                        <label for="adasss">Qun/Huyn</label>
                        <select name="district_id" class="required district_id" title="Vui lng chn Qun/Huyn" id="adasss"></select>
                        <input type="hidden" name="${name?`${name}[district]`:"district"}" class="district">
                      </div>                                      
                    
                      <div class="design-group">
                        <label for="wardsss">Phng/X</label>
                        <select name="ward_id" class="required ward_id" title="Vui lng chn Phng/X" id="wardsss"></select> 
                        <input type="hidden" name="${name?`${name}[ward]`:"ward"}" class="ward">
                      </div>    
                     </div>
                </div>`);

                $(this).data("country",this);

                this.getProvinces = function(){
                  return all.map(function(v){
                     return {
                        province_id:v.province_id,
                        name:v.name
                     }
                  });
                };
                this.getDistricts = function(province_id){
                  return all["p"+province_id].district.map(function(v){
                     return {
                        district_id:v.district_id,
                        name:v.name
                     }
                  });
                };
                this.getWards = function(province_id,district_id){
                  return all["p"+province_id].district["w"+district_id].ward.map(function(v){
                     return {
                        ward_id:v.ward_id,
                        name:v.name
                     }
                  });
                };
                this.geData = function(){
                  return{
                    province: modal.find('input.province').val(),
                    province_id: modal.find('select.province_id').val(),
                    district_id: modal.find('select.district_id').val(),
                    district: modal.find('input.district').val(),
                    ward_id: modal.find('select.ward_id').val(),
                    ward: modal.find('input.ward').val(),
                    street: modal.find('.street').val(),
                  }
                };


                this.bindData = function(data){
                  if(!data)return;
                    var province_id= data.province_id,district_id= data.district_id,ward_id=data.ward_id,street=data.street;

                    if(street){

                      modal.find('input.street').val(street);
                    }

                    if(province_id){
                      modal.find('select.province_id').val(province_id).trigger("change");
                      setTimeout(function(){
                          if(district_id){
                             modal.find('select.district_id').val(district_id).trigger("change");
                            setTimeout(function(){
                                if(ward_id){
                                   modal.find('select.ward_id').val(ward_id).trigger("change");
                                }
                            },1000);
                          }
                      },1000);
                    }

                    //auto detech city
                    if(window.country){
                       var city = window.country.city||window.country.state;
                       if(city){
                          switch(city){
                            case "Ho Chi Minh City":
                              modal.find('select.province_id').val(50).trigger('change');
                            break;
                          } 
                       }
                    }
                };

                var me = this;
                var all = null;

                var url = "https://data.donggiatri.com/country/vn/all.json?t=2";
                    fetch(url).then(function(r){return r.json()}).then(function(res){
                      all = res;

                      settings.init.call(me,res);
                      var select = modal.find('select.province_id').data("province",res);
                      select.append('<option value="">--Chn--</option>');
                      $.each(res,function(i,v){
                        select.append('<option value="'+v.province_id+'">'+v.name+'</option>');
                      });
                      //get district
                      select.on("change",function(e){
                        //
                        modal.find('select.ward_id').html("");

                        var province_id = this.value;
                        modal.find('input.province').val(this.options[this.selectedIndex].text);
                        var districts= all["p"+province_id].district;
                          var district = modal.find('select.district_id').data("district",districts);
                          district.html("").append('<option value="">--Chn--</option>');
                          $.each(districts,function(i,v){
                            district.append('<option value="'+v.district_id+'">'+v.name+'</option>');
                          });
                          //get ward
                          district.on("change",function(e){
                            var district_id = this.value;
                            if(district_id){
                            var l = modal.find('select.district_id').data("district");
                            var wards= l["d"+district_id].ward;
                            modal.find('.district').val(this.options[this.selectedIndex].text);
                            
                             
                              var ward = modal.find('select.ward_id').data("ward",wards);
                              ward.html("").append('<option value="">--Chn--</option>');
                              $.each(wards,function(i,v){
                                ward.append('<option value="'+v.ward_id+'">'+v.name+'</option>');
                              });
                              //get pot
                              ward.on("change",function(e){
                                var l = modal.find('select.ward_id').data("ward");
                                var ward_id = this.value;
                                var streets= l["w"+ward_id].street;
                                modal.find('.ward').val(this.options[this.selectedIndex].text);
                                
                              });
                                }
                          });
                       
                        
                      });

                      me.bindData(options);

                    });
            });
        };
     

})();
/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e()}(this,(function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function e(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,h(a.key),a)}}function n(t,e,i){return(e=h(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function h(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var s="undefined"!=typeof window&&void 0!==window.document,c=s?window:{},l=!(!s||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,d=!!s&&"PointerEvent"in c,p="cropper",u="all",m="crop",g="move",f="zoom",v="e",w="w",b="s",y="n",x="ne",M="nw",C="se",D="sw",B="".concat(p,"-crop"),k="".concat(p,"-disabled"),O="".concat(p,"-hidden"),T="".concat(p,"-hide"),E="".concat(p,"-invisible"),W="".concat(p,"-modal"),H="".concat(p,"-move"),N="".concat(p,"Action"),L="".concat(p,"Preview"),z="crop",Y="move",X="none",R="crop",S="cropend",j="cropmove",A="cropstart",P="dblclick",I=d?"pointerdown":l?"touchstart":"mousedown",U=d?"pointermove":l?"touchmove":"mousemove",q=d?"pointerup pointercancel":l?"touchend touchcancel":"mouseup",$="ready",Q="resize",K="wheel",Z="zoom",G="image/jpeg",V=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,F=/^data:/,J=/^data:image\/jpeg;base64,/,_=/^img|canvas$/i,tt={viewMode:0,dragMode:z,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},et=Number.isNaN||c.isNaN;function it(t){return"number"==typeof t&&!et(t)}var at=function(t){return t>0&&t<1/0};function nt(t){return void 0===t}function ot(t){return"object"===i(t)&&null!==t}var rt=Object.prototype.hasOwnProperty;function ht(t){if(!ot(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&rt.call(i,"isPrototypeOf")}catch(t){return!1}}function st(t){return"function"==typeof t}var ct=Array.prototype.slice;function lt(t){return Array.from?Array.from(t):ct.call(t)}function dt(t,e){return t&&st(e)&&(Array.isArray(t)||it(t.length)?lt(t).forEach((function(i,a){e.call(t,i,a,t)})):ot(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var pt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return ot(t)&&i.length>0&&i.forEach((function(e){ot(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},ut=/\.\d*(?:0|9){12}\d*$/;function mt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ut.test(t)?Math.round(t*e)/e:t}var gt=/^width|height|left|top|marginLeft|marginTop$/;function ft(t,e){var i=t.style;dt(e,(function(t,e){gt.test(e)&&it(t)&&(t="".concat(t,"px")),i[e]=t}))}function vt(t,e){if(e)if(it(t.length))dt(t,(function(t){vt(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function wt(t,e){e&&(it(t.length)?dt(t,(function(t){wt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function bt(t,e,i){e&&(it(t.length)?dt(t,(function(t){bt(t,e,i)})):i?vt(t,e):wt(t,e))}var yt=/([a-z\d])([A-Z])/g;function xt(t){return t.replace(yt,"$1-$2").toLowerCase()}function Mt(t,e){return ot(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(xt(e)))}function Ct(t,e,i){ot(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(xt(e)),i)}var Dt=/\s\s*/,Bt=function(){var t=!1;if(s){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});c.addEventListener("test",i,a),c.removeEventListener("test",i,a)}return t}();function kt(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Dt).forEach((function(e){if(!Bt){var o=t.listeners;o&&o[e]&&o[e][i]&&(n=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,a)}))}function Ot(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Dt).forEach((function(e){if(a.once&&!Bt){var o=t.listeners,r=void 0===o?{}:o;n=function(){delete r[e][i],t.removeEventListener(e,n,a);for(var o=arguments.length,h=new Array(o),s=0;s<o;s++)h[s]=arguments[s];i.apply(t,h)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],a),r[e][i]=n,t.listeners=r}t.addEventListener(e,n,a)}))}function Tt(t,e,i){var a;return st(Event)&&st(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function Et(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Wt=c.location,Ht=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Nt(t){var e=t.match(Ht);return null!==e&&(e[1]!==Wt.protocol||e[2]!==Wt.hostname||e[3]!==Wt.port)}function Lt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function zt(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,o=t.translateY,r=[];it(n)&&0!==n&&r.push("translateX(".concat(n,"px)")),it(o)&&0!==o&&r.push("translateY(".concat(o,"px)")),it(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),it(i)&&1!==i&&r.push("scaleX(".concat(i,")")),it(a)&&1!==a&&r.push("scaleY(".concat(a,")"));var h=r.length?r.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function Yt(t,i){var a=t.pageX,n=t.pageY,o={endX:a,endY:n};return i?o:e({startX:a,startY:n},o)}function Xt(t){var e=t.aspectRatio,i=t.height,a=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=at(a),r=at(i);if(o&&r){var h=i*e;"contain"===n&&h>a||"cover"===n&&h<a?i=a/e:a=i*e}else o?i=a/e:r&&(a=i*e);return{width:a,height:i}}var Rt=String.fromCharCode;var St=/^data:.*,/;function jt(t){var e,i=new DataView(t);try{var a,n,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,h=2;h+1<r;){if(255===i.getUint8(h)&&225===i.getUint8(h+1)){n=h;break}h+=1}if(n){var s=n+10;if("Exif"===function(t,e,i){var a="";i+=e;for(var n=e;n<i;n+=1)a+=Rt(t.getUint8(n));return a}(i,n+4,4)){var c=i.getUint16(s);if(((a=18761===c)||19789===c)&&42===i.getUint16(s+2,a)){var l=i.getUint32(s+4,a);l>=8&&(o=s+l)}}}if(o){var d,p,u=i.getUint16(o,a);for(p=0;p<u;p+=1)if(d=o+12*p+2,274===i.getUint16(d,a)){d+=8,e=i.getUint16(d,a),i.setUint16(d,1,a);break}}}catch(t){e=1}return e}var At={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,a=this.cropper,n=Number(e.minContainerWidth),o=Number(e.minContainerHeight);vt(a,O),wt(t,O);var r={width:Math.max(i.offsetWidth,n>=0?n:200),height:Math.max(i.offsetHeight,o>=0?o:100)};this.containerData=r,ft(a,{width:r.width,height:r.height}),vt(t,O),wt(a,O)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,a=Math.abs(e.rotate)%180==90,n=a?e.naturalHeight:e.naturalWidth,o=a?e.naturalWidth:e.naturalHeight,r=n/o,h=t.width,s=t.height;t.height*r>t.width?3===i?h=t.height*r:s=t.width/r:3===i?s=t.width/r:h=t.height*r;var c={aspectRatio:r,naturalWidth:n,naturalHeight:o,width:h,height:s};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=pt({},c)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=i.viewMode,h=n.aspectRatio,s=this.cropped&&o;if(t){var c=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;r>1?(c=Math.max(c,a.width),l=Math.max(l,a.height),3===r&&(l*h>c?c=l*h:l=c/h)):r>0&&(c?c=Math.max(c,s?o.width:0):l?l=Math.max(l,s?o.height:0):s&&(c=o.width,(l=o.height)*h>c?c=l*h:l=c/h));var d=Xt({aspectRatio:h,width:c,height:l});c=d.width,l=d.height,n.minWidth=c,n.minHeight=l,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(r>(s?0:1)){var p=a.width-n.width,u=a.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,u),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,u),s&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===r&&(n.width>=a.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=a.height&&(n.minTop=Math.min(0,u),n.maxTop=Math.max(0,u))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,e){var i=this.canvasData,a=this.imageData;if(e){var n=function(t){var e=t.width,i=t.height,a=t.degree;if(90==(a=Math.abs(a)%180))return{width:i,height:e};var n=a%90*Math.PI/180,o=Math.sin(n),r=Math.cos(n),h=e*r+i*o,s=e*o+i*r;return a>90?{width:s,height:h}:{width:h,height:s}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,r=n.height,h=i.width*(o/i.naturalWidth),s=i.height*(r/i.naturalHeight);i.left-=(h-i.width)/2,i.top-=(s-i.height)/2,i.width=h,i.height=s,i.aspectRatio=o/r,i.naturalWidth=o,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,ft(this.canvas,pt({width:i.width,height:i.height},zt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);pt(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),ft(this.image,pt({width:i.width,height:i.height},zt(pt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=pt({},n)},limitCropBox:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=this.limited,h=i.aspectRatio;if(t){var s=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,l=r?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,d=r?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;s=Math.min(s,a.width),c=Math.min(c,a.height),h&&(s&&c?c*h>s?c=s/h:s=c*h:s?c=s/h:c&&(s=c*h),d*h>l?d=l/h:l=d*h),o.minWidth=Math.min(s,l),o.minHeight=Math.min(c,d),o.maxWidth=l,o.maxHeight=d}e&&(r?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Ct(this.face,N,i.width>=e.width&&i.height>=e.height?g:u),ft(this.cropBox,pt({width:i.width,height:i.height},zt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Tt(this.element,R,this.getData())}},Pt={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,dt(r,(function(t){var i=document.createElement("img");Ct(t,L,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){dt(this.previews,(function(t){var e=Mt(t,L);ft(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(ot(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(xt(e)))}(t,L)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,o=t.width,r=t.height,h=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(ft(this.viewBoxImage,pt({width:o,height:r},zt(pt({translateX:-h,translateY:-s},t)))),dt(this.previews,(function(e){var i=Mt(e,L),c=i.width,l=i.height,d=c,p=l,u=1;a&&(p=n*(u=c/a)),n&&p>l&&(d=a*(u=l/n),p=l),ft(e,{width:d,height:p}),ft(e.getElementsByTagName("img")[0],pt({width:o*u,height:r*u},zt(pt({translateX:-h*u,translateY:-s*u},t))))})))}},It={bind:function(){var t=this.element,e=this.options,i=this.cropper;st(e.cropstart)&&Ot(t,A,e.cropstart),st(e.cropmove)&&Ot(t,j,e.cropmove),st(e.cropend)&&Ot(t,S,e.cropend),st(e.crop)&&Ot(t,R,e.crop),st(e.zoom)&&Ot(t,Z,e.zoom),Ot(i,I,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Ot(i,K,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ot(i,P,this.onDblclick=this.dblclick.bind(this)),Ot(t.ownerDocument,U,this.onCropMove=this.cropMove.bind(this)),Ot(t.ownerDocument,q,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Ot(window,Q,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;st(e.cropstart)&&kt(t,A,e.cropstart),st(e.cropmove)&&kt(t,j,e.cropmove),st(e.cropend)&&kt(t,S,e.cropend),st(e.crop)&&kt(t,R,e.crop),st(e.zoom)&&kt(t,Z,e.zoom),kt(i,I,this.onCropStart),e.zoomable&&e.zoomOnWheel&&kt(i,K,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&kt(i,P,this.onDblclick),kt(t.ownerDocument,U,this.onCropMove),kt(t.ownerDocument,q,this.onCropEnd),e.responsive&&kt(window,Q,this.onResize)}},Ut={resize:function(){if(!this.disabled){var t,e,i=this.options,a=this.container,n=this.containerData,o=a.offsetWidth/n.width,r=a.offsetHeight/n.height,h=Math.abs(o-1)>Math.abs(r-1)?o:r;if(1!==h)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(dt(t,(function(e,i){t[i]=e*h}))),this.setCropBoxData(dt(e,(function(t,i){e[i]=t*h}))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===X||this.setDragMode((t=this.dragBox,e=B,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?Y:z))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(it(e)&&1!==e||it(i)&&0!==i||t.ctrlKey))){var a,n=this.options,o=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){o[t.identifier]=Yt(t)})):o[t.pointerId||0]=Yt(t),a=Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?f:Mt(t.target,N),V.test(a)&&!1!==Tt(this.element,A,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===m&&(this.cropping=!0,vt(this.dragBox,W)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Tt(this.element,j,{originalEvent:t,action:e})&&(t.changedTouches?dt(t.changedTouches,(function(t){pt(i[t.identifier]||{},Yt(t,!0))})):pt(i[t.pointerId||0]||{},Yt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?dt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,bt(this.dragBox,W,this.cropped&&this.options.modal)),Tt(this.element,S,{originalEvent:t,action:e}))}}},qt={change:function(t){var i,a=this.options,n=this.canvasData,o=this.containerData,r=this.cropBoxData,h=this.pointers,s=this.action,c=a.aspectRatio,l=r.left,d=r.top,p=r.width,B=r.height,k=l+p,T=d+B,E=0,W=0,H=o.width,N=o.height,L=!0;!c&&t.shiftKey&&(c=p&&B?p/B:1),this.limited&&(E=r.minLeft,W=r.minTop,H=E+Math.min(o.width,n.width,n.left+n.width),N=W+Math.min(o.height,n.height,n.top+n.height));var z=h[Object.keys(h)[0]],Y={x:z.endX-z.startX,y:z.endY-z.startY},X=function(t){switch(t){case v:k+Y.x>H&&(Y.x=H-k);break;case w:l+Y.x<E&&(Y.x=E-l);break;case y:d+Y.y<W&&(Y.y=W-d);break;case b:T+Y.y>N&&(Y.y=N-T)}};switch(s){case u:l+=Y.x,d+=Y.y;break;case v:if(Y.x>=0&&(k>=H||c&&(d<=W||T>=N))){L=!1;break}X(v),(p+=Y.x)<0&&(s=w,l-=p=-p),c&&(B=p/c,d+=(r.height-B)/2);break;case y:if(Y.y<=0&&(d<=W||c&&(l<=E||k>=H))){L=!1;break}X(y),B-=Y.y,d+=Y.y,B<0&&(s=b,d-=B=-B),c&&(p=B*c,l+=(r.width-p)/2);break;case w:if(Y.x<=0&&(l<=E||c&&(d<=W||T>=N))){L=!1;break}X(w),p-=Y.x,l+=Y.x,p<0&&(s=v,l-=p=-p),c&&(B=p/c,d+=(r.height-B)/2);break;case b:if(Y.y>=0&&(T>=N||c&&(l<=E||k>=H))){L=!1;break}X(b),(B+=Y.y)<0&&(s=y,d-=B=-B),c&&(p=B*c,l+=(r.width-p)/2);break;case x:if(c){if(Y.y<=0&&(d<=W||k>=H)){L=!1;break}X(y),B-=Y.y,d+=Y.y,p=B*c}else X(y),X(v),Y.x>=0?k<H?p+=Y.x:Y.y<=0&&d<=W&&(L=!1):p+=Y.x,Y.y<=0?d>W&&(B-=Y.y,d+=Y.y):(B-=Y.y,d+=Y.y);p<0&&B<0?(s=D,d-=B=-B,l-=p=-p):p<0?(s=M,l-=p=-p):B<0&&(s=C,d-=B=-B);break;case M:if(c){if(Y.y<=0&&(d<=W||l<=E)){L=!1;break}X(y),B-=Y.y,d+=Y.y,p=B*c,l+=r.width-p}else X(y),X(w),Y.x<=0?l>E?(p-=Y.x,l+=Y.x):Y.y<=0&&d<=W&&(L=!1):(p-=Y.x,l+=Y.x),Y.y<=0?d>W&&(B-=Y.y,d+=Y.y):(B-=Y.y,d+=Y.y);p<0&&B<0?(s=C,d-=B=-B,l-=p=-p):p<0?(s=x,l-=p=-p):B<0&&(s=D,d-=B=-B);break;case D:if(c){if(Y.x<=0&&(l<=E||T>=N)){L=!1;break}X(w),p-=Y.x,l+=Y.x,B=p/c}else X(b),X(w),Y.x<=0?l>E?(p-=Y.x,l+=Y.x):Y.y>=0&&T>=N&&(L=!1):(p-=Y.x,l+=Y.x),Y.y>=0?T<N&&(B+=Y.y):B+=Y.y;p<0&&B<0?(s=x,d-=B=-B,l-=p=-p):p<0?(s=C,l-=p=-p):B<0&&(s=M,d-=B=-B);break;case C:if(c){if(Y.x>=0&&(k>=H||T>=N)){L=!1;break}X(v),B=(p+=Y.x)/c}else X(b),X(v),Y.x>=0?k<H?p+=Y.x:Y.y>=0&&T>=N&&(L=!1):p+=Y.x,Y.y>=0?T<N&&(B+=Y.y):B+=Y.y;p<0&&B<0?(s=M,d-=B=-B,l-=p=-p):p<0?(s=D,l-=p=-p):B<0&&(s=x,d-=B=-B);break;case g:this.move(Y.x,Y.y),L=!1;break;case f:this.zoom(function(t){var i=e({},t),a=0;return dt(t,(function(t,e){delete i[e],dt(i,(function(e){var i=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),h=Math.sqrt(i*i+n*n),s=(Math.sqrt(o*o+r*r)-h)/h;Math.abs(s)>Math.abs(a)&&(a=s)}))})),a}(h),t),L=!1;break;case m:if(!Y.x||!Y.y){L=!1;break}i=Et(this.cropper),l=z.startX-i.left,d=z.startY-i.top,p=r.minWidth,B=r.minHeight,Y.x>0?s=Y.y>0?C:x:Y.x<0&&(l-=p,s=Y.y>0?D:M),Y.y<0&&(d-=B),this.cropped||(wt(this.cropBox,O),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}L&&(r.width=p,r.height=B,r.left=l,r.top=d,this.action=s,this.renderCropBox()),dt(h,(function(t){t.startX=t.endX,t.startY=t.endY}))}},$t={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&vt(this.dragBox,W),wt(this.cropBox,O),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=pt({},this.initialImageData),this.canvasData=pt({},this.initialCanvasData),this.cropBoxData=pt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(pt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),wt(this.dragBox,W),vt(this.cropBox,O)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,dt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,wt(this.cropper,k)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,vt(this.cropper,k)),this},destroy:function(){var t=this.element;return t[p]?(t[p]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=i.left,n=i.top;return this.moveTo(nt(t)?t:a+Number(t),nt(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(it(t)&&(i.left=t,a=!0),it(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a=this.options,n=this.canvasData,o=n.width,r=n.height,h=n.naturalWidth,s=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var c=h*t,l=s*t;if(!1===Tt(this.element,Z,{ratio:t,oldRatio:o/h,originalEvent:i}))return this;if(i){var d=this.pointers,p=Et(this.cropper),u=d&&Object.keys(d).length?function(t){var e=0,i=0,a=0;return dt(t,(function(t){var n=t.startX,o=t.startY;e+=n,i+=o,a+=1})),{pageX:e/=a,pageY:i/=a}}(d):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-o)*((u.pageX-p.left-n.left)/o),n.top-=(l-r)*((u.pageY-p.top-n.top)/r)}else ht(e)&&it(e.x)&&it(e.y)?(n.left-=(c-o)*((e.x-n.left)/o),n.top-=(l-r)*((e.y-n.top)/r)):(n.left-=(c-o)/2,n.top-=(l-r)/2);n.width=c,n.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return it(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,it(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(it(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(it(t)&&(i.scaleX=t,a=!0),it(e)&&(i.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,a=this.imageData,n=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var r=a.width/a.naturalWidth;if(dt(t,(function(e,i){t[i]=e/r})),e){var h=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=a.rotate||0),i.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&ht(t)){var o=!1;e.rotatable&&it(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),e.scalable&&(it(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),it(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;it(t.x)&&(n.left=t.x*r+a.left),it(t.y)&&(n.top=t.y*r+a.top),it(t.width)&&(n.width=t.width*r),it(t.height)&&(n.height=t.height*r),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?pt({},this.containerData):{}},getImageData:function(){return this.sized?pt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&dt(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&ht(t)&&(it(t.left)&&(e.left=t.left),it(t.top)&&(e.top=t.top),it(t.width)?(e.width=t.width,e.height=t.width/i):it(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ht(t)&&(it(t.left)&&(a.left=t.left),it(t.top)&&(a.top=t.top),it(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),it(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,a){var n=e.aspectRatio,r=e.naturalWidth,h=e.naturalHeight,s=e.rotate,c=void 0===s?0:s,l=e.scaleX,d=void 0===l?1:l,p=e.scaleY,u=void 0===p?1:p,m=i.aspectRatio,g=i.naturalWidth,f=i.naturalHeight,v=a.fillColor,w=void 0===v?"transparent":v,b=a.imageSmoothingEnabled,y=void 0===b||b,x=a.imageSmoothingQuality,M=void 0===x?"low":x,C=a.maxWidth,D=void 0===C?1/0:C,B=a.maxHeight,k=void 0===B?1/0:B,O=a.minWidth,T=void 0===O?0:O,E=a.minHeight,W=void 0===E?0:E,H=document.createElement("canvas"),N=H.getContext("2d"),L=Xt({aspectRatio:m,width:D,height:k}),z=Xt({aspectRatio:m,width:T,height:W},"cover"),Y=Math.min(L.width,Math.max(z.width,g)),X=Math.min(L.height,Math.max(z.height,f)),R=Xt({aspectRatio:n,width:D,height:k}),S=Xt({aspectRatio:n,width:T,height:W},"cover"),j=Math.min(R.width,Math.max(S.width,r)),A=Math.min(R.height,Math.max(S.height,h)),P=[-j/2,-A/2,j,A];return H.width=mt(Y),H.height=mt(X),N.fillStyle=w,N.fillRect(0,0,Y,X),N.save(),N.translate(Y/2,X/2),N.rotate(c*Math.PI/180),N.scale(d,u),N.imageSmoothingEnabled=y,N.imageSmoothingQuality=M,N.drawImage.apply(N,[t].concat(o(P.map((function(t){return Math.floor(mt(t))}))))),N.restore(),H}(this.image,this.imageData,e,t);if(!this.cropped)return i;var a=this.getData(t.rounded),n=a.x,r=a.y,h=a.width,s=a.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(n*=c,r*=c,h*=c,s*=c);var l=h/s,d=Xt({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Xt({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=Xt({aspectRatio:l,width:t.width||(1!==c?i.width:h),height:t.height||(1!==c?i.height:s)}),m=u.width,g=u.height;m=Math.min(d.width,Math.max(p.width,m)),g=Math.min(d.height,Math.max(p.height,g));var f=document.createElement("canvas"),v=f.getContext("2d");f.width=mt(m),f.height=mt(g),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,m,g);var w=t.imageSmoothingEnabled,b=void 0===w||w,y=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var x,M,C,D,B,k,O=i.width,T=i.height,E=n,W=r;E<=-h||E>O?(E=0,x=0,C=0,B=0):E<=0?(C=-E,E=0,B=x=Math.min(O,h+E)):E<=O&&(C=0,B=x=Math.min(h,O-E)),x<=0||W<=-s||W>T?(W=0,M=0,D=0,k=0):W<=0?(D=-W,W=0,k=M=Math.min(T,s+W)):W<=T&&(D=0,k=M=Math.min(s,T-W));var H=[E,W,x,M];if(B>0&&k>0){var N=m/h;H.push(C*N,D*N,B*N,k*N)}return v.drawImage.apply(v,[i].concat(o(H.map((function(t){return Math.floor(mt(t))}))))),f},setAspectRatio:function(t){var e=this.options;return this.disabled||nt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===z,o=e.movable&&t===Y;t=n||o?t:X,e.dragMode=t,Ct(i,N,t),bt(i,B,n),bt(i,H,o),e.cropBoxMovable||(Ct(a,N,t),bt(a,B,n),bt(a,H,o))}return this}},Qt=c.Cropper,Kt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!_.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=pt({},tt,ht(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,n;return e=t,n=[{key:"noConflict",value:function(){return window.Cropper=Qt,t}},{key:"setDefaults",value:function(t){pt(tt,ht(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[p]){if(e[p]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(F.test(t))J.test(t)?this.read((n=t.replace(St,""),o=atob(n),r=new ArrayBuffer(o.length),dt(h=new Uint8Array(r),(function(t,e){h[e]=o.charCodeAt(e)})),r)):this.clone();else{var n,o,r,h,s=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=c,s.onerror=c,s.ontimeout=c,s.onprogress=function(){s.getResponseHeader("content-type")!==G&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&Nt(t)&&i.crossOrigin&&(t=Lt(t)),s.open("GET",t,!0),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,a=jt(t),n=0,o=1,r=1;if(a>1){this.url=function(t,e){for(var i=[],a=new Uint8Array(t);a.length>0;)i.push(Rt.apply(null,lt(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,G);var h=function(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}(a);n=h.rotate,o=h.scaleX,r=h.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=o,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,a=e;this.options.checkCrossOrigin&&Nt(e)&&(i||(i="anonymous"),a=Lt(e)),this.crossOrigin=i,this.crossOriginUrl=a;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=a||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),vt(n,T),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),a=function(e,i){pt(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=pt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){a(n.width,n.height),i||o.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(n))}else a(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,a=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=n.querySelector(".".concat(p,"-container")),r=o.querySelector(".".concat(p,"-canvas")),h=o.querySelector(".".concat(p,"-drag-box")),s=o.querySelector(".".concat(p,"-crop-box")),c=s.querySelector(".".concat(p,"-face"));this.container=a,this.cropper=o,this.canvas=r,this.dragBox=h,this.cropBox=s,this.viewBox=o.querySelector(".".concat(p,"-view-box")),this.face=c,r.appendChild(i),vt(t,O),a.insertBefore(o,t.nextSibling),wt(i,T),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,vt(s,O),e.guides||vt(s.getElementsByClassName("".concat(p,"-dashed")),O),e.center||vt(s.getElementsByClassName("".concat(p,"-center")),O),e.background&&vt(o,"".concat(p,"-bg")),e.highlight||vt(c,E),e.cropBoxMovable&&(vt(c,H),Ct(c,N,u)),e.cropBoxResizable||(vt(s.getElementsByClassName("".concat(p,"-line")),O),vt(s.getElementsByClassName("".concat(p,"-point")),O)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),st(e.ready)&&Ot(t,$,e.ready,{once:!0}),Tt(t,$)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),wt(this.element,O)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();return pt(Kt.prototype,At,Pt,It,Ut,qt,$t),Kt}));

(function(win){
 	  var callback = null;
    function getRoundedCanvas(sourceCanvas) {
      var canvas = document.createElement('canvas');
      var context = canvas.getContext('2d');
      var width = sourceCanvas.width;
      var height = sourceCanvas.height;

      canvas.width = width;
      canvas.height = height;
      context.imageSmoothingEnabled = true;
      context.drawImage(sourceCanvas, 0, 0, width, height);
      context.globalCompositeOperation = 'destination-in';
      context.beginPath();
      context.arc(width / 2, height / 2, Math.min(width, height) / 2, 0, 2 * Math.PI, true);
      context.fill();
      return canvas;
    }
    function init(){
	    $('body').append(`
	    <style>
	    </style>
	        <div class="modal fade no modal-flex" style="z-index: 100000000;" id="uploadCrop" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
	    <div class="modal-dialog modal-lg" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <h5 class="modal-title">Thu nh hnh nh</h5>
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	                    <span aria-hidden="true"></span>
	                </button>
	            </div>
	            <div class="modal-body" style="padding: 0;display: flex;flex-direction: column;">
	                <div class="img-container" style="overflow: hidden;flex: 1;">
	                 
                        <div >
                            <img src="" id="sample_image" />
                        </div>
                        
	                 
	                </div>
	                <div >
                            <div class="preview"></div>
                        </div>
	            </div>
	            <div class="modal-footer" style="display: flex;">
	                <button type="button" id="crop" class="btn"  style="    color: white;background-color: #2e6da4;border-color: #2e6da4;">Chn nh</button>
	                <button type="button" class="btn" style="    color: white;background-color: #d9534f;border-color: #d43f3a;" data-dismiss="modal">hu b</button>
	            </div>
	        </div>
	    </div>
	</div>`);
	    var modal_name = "#uploadCrop";
	      var ele = $(modal_name);
	      var cropper = null;
	    
	      
	      var $modal = ele;
	    var cropper;
	    var image = document.getElementById("sample_image");

	    var setting = {}; 
	    $modal.on('shown.bs.modal', function() {
	        setting = $.extend({
	            radius:'50%',
	            width:200,
	            height:200,
	            aspectRatio: 1,
	            viewMode: 3,
	            preview:'.preview',
	            cropBoxResizable:true,
	            scalable:false
	        },setting,true);

	        cropper = new Cropper(image,setting);
	         $('#crop').data("cropper",cropper);
	        if(setting.round=="false"){
	            $("cropper-view-box").css("border-radius",setting.radius);
	        }
	    }).on('hidden.bs.modal', function(){
	        cropper.destroy();
	        cropper = null;
	    });

	    $('#crop').click(function(){
	        $('#crop').attr('disabled','disabled');
	        $('#crop').html('<i class="fa fa-circle-o-notch fa-spin"></i> Wait...');

	       var info = $(this).data("cropper");

	        canvas = cropper.getCroppedCanvas({
	            width:setting.width,
	            height:setting.height
	        });
	        canvas = getRoundedCanvas(canvas);

	        callback(canvas.toDataURL());
	        $modal.modal('hide');

	        // canvas.toBlob(function(blob){
	        //  url = URL.createObjectURL(blob);
	        //  var reader = new FileReader();
	        //  reader.readAsDataURL(blob);
	        //  reader.onloadend = function(){
	        //      var base64data = reader.result;
	        //      $.ajax({
	        //          url:'upload.php',
	        //          method:'POST',
	        //          data:{image:base64data},
	        //          success:function(data)
	        //          {
	        //              $modal.modal('hide');
	        //              $('#uploaded_image').attr('src', data);
	        //          }
	        //      });
	        //  };
	        // });
	    });
    }
  function show(img){

  		var image = document.getElementById("sample_image");
  		if(!image){
  			init();
  			image = document.getElementById("sample_image");
  		}
        
        // ele.find(".image-container").html(`<img id="imageToCrop" class="imageToCrop" src="${base64}" alt="Image"/>`)
        image.src = img;
        $('#crop').attr('disabled',false);
        $('#crop').html('Crop');
     
    //     ele.find(".imageToCrop").on("load", function() {
          //    console.log(cropper);
          //   cropper = jsCrop.initialise(this, { 
          //    "outputCanvas": ele.find(".crop-result")[0]
          //   });

          //   cropper.setCropRegion(10,10,w?w:75,h?h:75);
          // });
 
     $('#uploadCrop').modal().addClass('in');
  } 

  Image.prototype.Cropper = function(){
      show(this.src);
     return new Promise(function(a,b){
            callback =a;
     });
  }
  String.prototype.Cropper = function(){
      show(String(this));
     return new Promise(function(a,b){
            callback =a;
     });
  }
  File.prototype.Cropper = function(){
      var reader = new FileReader();
            reader.onload =  function(event) {
               
         
                show(reader.result);
               
            };
            reader.readAsDataURL(base64);
     return new Promise(function(a,b){
            callback =a;
     });
  }
    
    win.uploadCrop = function(base64,options) {

        setting = options;
        if(typeof base64=="object"){
                var reader = new FileReader();
                reader.onload =  function(event) {
                   
             
                    show(reader.result);
                   
                };
                reader.readAsDataURL(base64);
             
        }else{
             show(base64);
        }
        
        
        return new Promise(function(a,b){
            callback =a;
        });
    }; 
})(window);
(function(win){

	win.CRUD={};
	///////////////
	CRUD.SQLBUILDER = {

	};
	//////////////////
	CRUD.SQLITE={};
	CRUD.SQLITE._cache={};
	CRUD.SQLITE.setup = function(db){
		return new Promise(function(a,b){
			CRUD.SQLITE._cache[db] ={};
			a(CRUD.SQLITE._cache[db]);
		});
	};
	//////////////// 
	CRUD.admin={
		event :{
			on: {
				delete:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_delete",f);
				},
				edit:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_edit",f);
				},
				editBefore:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_edit_before",f);
				},
				detail:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_detail",f);
				},
				create:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_create",f);
				},
				renderItem:function(e,f){ 
					DOCUMENT.on(e.toLowerCase()+"_listitem",f);
				},
			},
			trigger: {
				delete:function(e){
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_delete",slicedArgs);

					DOCUMENT.trigger("crud_change",["delete"].concat(arguments));
				},
				edit:function(e){
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_edit",slicedArgs);

					DOCUMENT.trigger("crud_change",["edit"].concat(arguments));
				},
				editBefore:function(e){ 
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_edit_before",slicedArgs); 
				},
				create:function(e){
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_create",slicedArgs);
					DOCUMENT.trigger("crud_change",["create"].concat(arguments));
				},
				detail:function(e){
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_detail",slicedArgs);

					DOCUMENT.trigger("crud_change",["detail"].concat(arguments));
				},
				renderItem:function(e){
					var slicedArgs = Array.prototype.slice.call(arguments, 1);
					DOCUMENT.trigger(e.toLowerCase()+"_listitem",slicedArgs);
					
				}
			}
		}
	}
})(window);
!function(t,e){"object"==typeof exports?module.exports=exports=e():"function"==typeof define&&define.amd?define([],e):t.CryptoJS=e()}(this,function(){var W,O,I,U,K,X,L,l,j,T,t,N,q,e,Z,V,G,J,Q,Y,$,t1,e1,r1,i1,o1,n1,s,s1,c1,a1,h1,l1,o,f1,r,d1,u1,n,c,a,h,f,d,i=function(h){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),!(i=!(i=!(i="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:i)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:i)&&"undefined"!=typeof global&&global.crypto?global.crypto:i)&&"function"==typeof require)try{i=require("crypto")}catch(t){}var r=Object.create||function(t){return e.prototype=t,t=new e,e.prototype=null,t};function e(){}var t={},o=t.lib={},n=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes,o=t.sigBytes;if(this.clamp(),i%4)for(var n=0;n<o;n++){var s=r[n>>>2]>>>24-n%4*8&255;e[i+n>>>2]|=s<<24-(i+n)%4*8}else for(var c=0;c<o;c+=4)e[i+c>>>2]=r[c>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=h.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new l.init(e,t)}}),s=t.enc={},c=s.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],o=0;o<r;o++){var n=e[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new l.init(r,e/2)}},a=s.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],o=0;o<r;o++){var n=e[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new l.init(r,e)}},f=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}},d=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,r=this._data,i=r.words,o=r.sigBytes,n=this.blockSize,s=o/(4*n),c=(s=t?h.ceil(s):h.max((0|s)-this._minBufferSize,0))*n,t=h.min(4*c,o);if(c){for(var a=0;a<c;a+=n)this._doProcessBlock(i,a);e=i.splice(0,c),r.sigBytes-=t}return new l.init(e,t)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),u=(o.Hasher=d.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new u.HMAC.init(r,e).finalize(t)}}}),t.algo={});return t}(Math),u=(u=(p=i).lib,W=u.Base,O=u.WordArray,(u=p.x64={}).Word=W.extend({init:function(t,e){this.high=t,this.low=e}}),u.WordArray=W.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],i=0;i<e;i++){var o=t[i];r.push(o.high),r.push(o.low)}return O.create(r,this.sigBytes)},clone:function(){for(var t=W.clone.call(this),e=t.words=this.words.slice(0),r=e.length,i=0;i<r;i++)e[i]=e[i].clone();return t}}),"function"==typeof ArrayBuffer&&(p=i.lib.WordArray,I=p.init,(p.init=function(t){if((t=(t=t instanceof ArrayBuffer?new Uint8Array(t):t)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t)instanceof Uint8Array){for(var e=t.byteLength,r=[],i=0;i<e;i++)r[i>>>2]|=t[i]<<24-i%4*8;I.call(this,r,e)}else I.apply(this,arguments)}).prototype=p),i),p1=u.lib.WordArray;function _1(t){return t<<8&4278255360|t>>>8&16711935}(u=u.enc).Utf16=u.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],o=0;o<r;o+=2){var n=e[o>>>2]>>>16-o%4*8&65535;i.push(String.fromCharCode(n))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return p1.create(r,2*e)}},u.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],o=0;o<r;o+=2){var n=_1(e[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(n))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>1]|=_1(t.charCodeAt(i)<<16-i%2*16);return p1.create(r,2*e)}},U=(p=i).lib.WordArray,p.enc.Base64={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=this._map,o=(t.clamp(),[]),n=0;n<r;n+=3)for(var s=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,c=0;c<4&&n+.75*c<r;c++)o.push(i.charAt(s>>>6*(3-c)&63));var a=i.charAt(64);if(a)for(;o.length%4;)o.push(a);return o.join("")},parse:function(t){var e=t.length,r=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],o=0;o<r.length;o++)i[r.charCodeAt(o)]=o;for(var n,s,c=r.charAt(64),a=(!c||-1!==(c=t.indexOf(c))&&(e=c),t),h=e,l=i,f=[],d=0,u=0;u<h;u++)u%4&&(s=l[a.charCodeAt(u-1)]<<u%4*2,n=l[a.charCodeAt(u)]>>>6-u%4*2,s=s|n,f[d>>>2]|=s<<24-d%4*8,d++);return U.create(f,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},K=(u=i).lib.WordArray,u.enc.Base64url={stringify:function(t,e){for(var r=t.words,i=t.sigBytes,o=(e=void 0===e?!0:e)?this._safe_map:this._map,n=(t.clamp(),[]),s=0;s<i;s+=3)for(var c=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<i;a++)n.push(o.charAt(c>>>6*(3-a)&63));var h=o.charAt(64);if(h)for(;n.length%4;)n.push(h);return n.join("")},parse:function(t,e){var r=t.length,i=(e=void 0===e?!0:e)?this._safe_map:this._map;if(!(o=this._reverseMap))for(var o=this._reverseMap=[],n=0;n<i.length;n++)o[i.charCodeAt(n)]=n;for(var s,c,e=i.charAt(64),a=(!e||-1!==(e=t.indexOf(e))&&(r=e),t),h=r,l=o,f=[],d=0,u=0;u<h;u++)u%4&&(c=l[a.charCodeAt(u-1)]<<u%4*2,s=l[a.charCodeAt(u)]>>>6-u%4*2,c=c|s,f[d>>>2]|=c<<24-d%4*8,d++);return K.create(f,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};for(var y1=Math,p=i,g1=(u=p.lib).WordArray,v1=u.Hasher,u=p.algo,A=[],B1=0;B1<64;B1++)A[B1]=4294967296*y1.abs(y1.sin(B1+1))|0;function z(t,e,r,i,o,n,s){t=t+(e&r|~e&i)+o+s;return(t<<n|t>>>32-n)+e}function H(t,e,r,i,o,n,s){t=t+(e&i|r&~i)+o+s;return(t<<n|t>>>32-n)+e}function C(t,e,r,i,o,n,s){t=t+(e^r^i)+o+s;return(t<<n|t>>>32-n)+e}function R(t,e,r,i,o,n,s){t=t+(r^(e|~i))+o+s;return(t<<n|t>>>32-n)+e}u=u.MD5=v1.extend({_doReset:function(){this._hash=new g1.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var i=e+r,o=t[i];t[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var n=this._hash.words,s=t[e+0],c=t[e+1],a=t[e+2],h=t[e+3],l=t[e+4],f=t[e+5],d=t[e+6],u=t[e+7],p=t[e+8],_=t[e+9],y=t[e+10],g=t[e+11],v=t[e+12],B=t[e+13],w=t[e+14],k=t[e+15],x=z(n[0],S=n[1],m=n[2],b=n[3],s,7,A[0]),b=z(b,x,S,m,c,12,A[1]),m=z(m,b,x,S,a,17,A[2]),S=z(S,m,b,x,h,22,A[3]);x=z(x,S,m,b,l,7,A[4]),b=z(b,x,S,m,f,12,A[5]),m=z(m,b,x,S,d,17,A[6]),S=z(S,m,b,x,u,22,A[7]),x=z(x,S,m,b,p,7,A[8]),b=z(b,x,S,m,_,12,A[9]),m=z(m,b,x,S,y,17,A[10]),S=z(S,m,b,x,g,22,A[11]),x=z(x,S,m,b,v,7,A[12]),b=z(b,x,S,m,B,12,A[13]),m=z(m,b,x,S,w,17,A[14]),x=H(x,S=z(S,m,b,x,k,22,A[15]),m,b,c,5,A[16]),b=H(b,x,S,m,d,9,A[17]),m=H(m,b,x,S,g,14,A[18]),S=H(S,m,b,x,s,20,A[19]),x=H(x,S,m,b,f,5,A[20]),b=H(b,x,S,m,y,9,A[21]),m=H(m,b,x,S,k,14,A[22]),S=H(S,m,b,x,l,20,A[23]),x=H(x,S,m,b,_,5,A[24]),b=H(b,x,S,m,w,9,A[25]),m=H(m,b,x,S,h,14,A[26]),S=H(S,m,b,x,p,20,A[27]),x=H(x,S,m,b,B,5,A[28]),b=H(b,x,S,m,a,9,A[29]),m=H(m,b,x,S,u,14,A[30]),x=C(x,S=H(S,m,b,x,v,20,A[31]),m,b,f,4,A[32]),b=C(b,x,S,m,p,11,A[33]),m=C(m,b,x,S,g,16,A[34]),S=C(S,m,b,x,w,23,A[35]),x=C(x,S,m,b,c,4,A[36]),b=C(b,x,S,m,l,11,A[37]),m=C(m,b,x,S,u,16,A[38]),S=C(S,m,b,x,y,23,A[39]),x=C(x,S,m,b,B,4,A[40]),b=C(b,x,S,m,s,11,A[41]),m=C(m,b,x,S,h,16,A[42]),S=C(S,m,b,x,d,23,A[43]),x=C(x,S,m,b,_,4,A[44]),b=C(b,x,S,m,v,11,A[45]),m=C(m,b,x,S,k,16,A[46]),x=R(x,S=C(S,m,b,x,a,23,A[47]),m,b,s,6,A[48]),b=R(b,x,S,m,u,10,A[49]),m=R(m,b,x,S,w,15,A[50]),S=R(S,m,b,x,f,21,A[51]),x=R(x,S,m,b,v,6,A[52]),b=R(b,x,S,m,h,10,A[53]),m=R(m,b,x,S,y,15,A[54]),S=R(S,m,b,x,c,21,A[55]),x=R(x,S,m,b,p,6,A[56]),b=R(b,x,S,m,k,10,A[57]),m=R(m,b,x,S,d,15,A[58]),S=R(S,m,b,x,B,21,A[59]),x=R(x,S,m,b,l,6,A[60]),b=R(b,x,S,m,g,10,A[61]),m=R(m,b,x,S,a,15,A[62]),S=R(S,m,b,x,_,21,A[63]),n[0]=n[0]+x|0,n[1]=n[1]+S|0,n[2]=n[2]+m|0,n[3]=n[3]+b|0},_doFinalize:function(){for(var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes,o=(e[i>>>5]|=128<<24-i%32,y1.floor(r/4294967296)),o=(e[15+(64+i>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e[14+(64+i>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),this._hash),n=o.words,s=0;s<4;s++){var c=n[s];n[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var t=v1.clone.call(this);return t._hash=this._hash.clone(),t}}),p.MD5=v1._createHelper(u),p.HmacMD5=v1._createHmacHelper(u),u=(p=i).lib,X=u.WordArray,L=u.Hasher,u=p.algo,l=[],u=u.SHA1=L.extend({_doReset:function(){this._hash=new X.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],o=r[1],n=r[2],s=r[3],c=r[4],a=0;a<80;a++){a<16?l[a]=0|t[e+a]:(h=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=h<<1|h>>>31);var h=(i<<5|i>>>27)+c+l[a];h+=a<20?1518500249+(o&n|~o&s):a<40?1859775393+(o^n^s):a<60?(o&n|o&s|n&s)-1894007588:(o^n^s)-899497514,c=s,s=n,n=o<<30|o>>>2,o=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+n|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=Math.floor(r/4294967296),e[15+(64+i>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=L.clone.call(this);return t._hash=this._hash.clone(),t}}),p.SHA1=L._createHelper(u),p.HmacSHA1=L._createHmacHelper(u);var w1=Math,p=i,k1=(u=p.lib).WordArray,x1=u.Hasher,u=p.algo,b1=[],m1=[];function S1(t){return 4294967296*(t-(0|t))|0}for(var A1=2,z1=0;z1<64;)!function(t){for(var e=w1.sqrt(t),r=2;r<=e;r++)if(!(t%r))return;return 1}(A1)||(z1<8&&(b1[z1]=S1(w1.pow(A1,.5))),m1[z1]=S1(w1.pow(A1,1/3)),z1++),A1++;var _=[],u=u.SHA256=x1.extend({_doReset:function(){this._hash=new k1.init(b1.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],o=r[1],n=r[2],s=r[3],c=r[4],a=r[5],h=r[6],l=r[7],f=0;f<64;f++){f<16?_[f]=0|t[e+f]:(d=_[f-15],u=_[f-2],_[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+_[f-7]+((u<<15|u>>>17)^(u<<13|u>>>19)^u>>>10)+_[f-16]);var d=i&o^i&n^o&n,u=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&a^~c&h)+m1[f]+_[f],l=h,h=a,a=c,c=s+u|0,s=n,n=o,o=i,i=u+(((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+d)|0}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+n|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0,r[5]=r[5]+a|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=w1.floor(r/4294967296),e[15+(64+i>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=x1.clone.call(this);return t._hash=this._hash.clone(),t}}),p=(p.SHA256=x1._createHelper(u),p.HmacSHA256=x1._createHmacHelper(u),j=(p=i).lib.WordArray,u=p.algo,T=u.SHA256,u=u.SHA224=T.extend({_doReset:function(){this._hash=new j.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=T._doFinalize.call(this);return t.sigBytes-=4,t}}),p.SHA224=T._createHelper(u),p.HmacSHA224=T._createHmacHelper(u),i),H1=p.lib.Hasher,y=(u=p.x64).Word,C1=u.WordArray,u=p.algo;function g(){return y.create.apply(y,arguments)}for(var R1=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],D1=[],E1=0;E1<80;E1++)D1[E1]=g();u=u.SHA512=H1.extend({_doReset:function(){this._hash=new C1.init([new y.init(1779033703,4089235720),new y.init(3144134277,2227873595),new y.init(1013904242,4271175723),new y.init(2773480762,1595750129),new y.init(1359893119,2917565137),new y.init(2600822924,725511199),new y.init(528734635,4215389547),new y.init(1541459225,327033209)])},_doProcessBlock:function(W,O){for(var t=this._hash.words,e=t[0],r=t[1],i=t[2],o=t[3],n=t[4],s=t[5],c=t[6],t=t[7],I=e.high,a=e.low,U=r.high,h=r.low,K=i.high,l=i.low,X=o.high,f=o.low,L=n.high,d=n.low,j=s.high,u=s.low,T=c.high,p=c.low,N=t.high,_=t.low,y=I,g=a,v=U,B=h,w=K,k=l,q=X,x=f,b=L,m=d,Z=j,S=u,V=T,G=p,J=N,Q=_,A=0;A<80;A++)var z,H,C=D1[A],R=(A<16?(H=C.high=0|W[O+2*A],z=C.low=0|W[O+2*A+1]):(F=(P=D1[A-15]).high,P=P.low,M=(E=D1[A-2]).high,E=E.low,D=(R=D1[A-7]).high,R=R.low,$=(Y=D1[A-16]).high,H=(H=((F>>>1|P<<31)^(F>>>8|P<<24)^F>>>7)+D+((z=(D=(P>>>1|F<<31)^(P>>>8|F<<24)^(P>>>7|F<<25))+R)>>>0<D>>>0?1:0))+((M>>>19|E<<13)^(M<<3|E>>>29)^M>>>6)+((z+=P=(E>>>19|M<<13)^(E<<3|M>>>29)^(E>>>6|M<<26))>>>0<P>>>0?1:0),z+=F=Y.low,C.high=H=H+$+(z>>>0<F>>>0?1:0),C.low=z),b&Z^~b&V),D=m&S^~m&G,E=y&v^y&w^v&w,M=(g>>>28|y<<4)^(g<<30|y>>>2)^(g<<25|y>>>7),P=R1[A],Y=P.high,$=P.low,F=Q+((m>>>14|b<<18)^(m>>>18|b<<14)^(m<<23|b>>>9)),C=J+((b>>>14|m<<18)^(b>>>18|m<<14)^(b<<23|m>>>9))+(F>>>0<Q>>>0?1:0),t1=M+(g&B^g&k^B&k),J=V,Q=G,V=Z,G=S,Z=b,S=m,b=q+(C=C+R+((F=F+D)>>>0<D>>>0?1:0)+Y+((F=F+$)>>>0<$>>>0?1:0)+H+((F=F+z)>>>0<z>>>0?1:0))+((m=x+F|0)>>>0<x>>>0?1:0)|0,q=w,x=k,w=v,k=B,v=y,B=g,y=C+(((y>>>28|g<<4)^(y<<30|g>>>2)^(y<<25|g>>>7))+E+(t1>>>0<M>>>0?1:0))+((g=F+t1|0)>>>0<F>>>0?1:0)|0;a=e.low=a+g,e.high=I+y+(a>>>0<g>>>0?1:0),h=r.low=h+B,r.high=U+v+(h>>>0<B>>>0?1:0),l=i.low=l+k,i.high=K+w+(l>>>0<k>>>0?1:0),f=o.low=f+x,o.high=X+q+(f>>>0<x>>>0?1:0),d=n.low=d+m,n.high=L+b+(d>>>0<m>>>0?1:0),u=s.low=u+S,s.high=j+Z+(u>>>0<S>>>0?1:0),p=c.low=p+G,c.high=T+V+(p>>>0<G>>>0?1:0),_=t.low=_+Q,t.high=N+J+(_>>>0<Q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(128+i>>>10<<5)]=Math.floor(r/4294967296),e[31+(128+i>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=H1.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),p.SHA512=H1._createHelper(u),p.HmacSHA512=H1._createHmacHelper(u),u=(p=i).x64,t=u.Word,N=u.WordArray,u=p.algo,q=u.SHA512,u=u.SHA384=q.extend({_doReset:function(){this._hash=new N.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var t=q._doFinalize.call(this);return t.sigBytes-=16,t}}),p.SHA384=q._createHelper(u),p.HmacSHA384=q._createHmacHelper(u);for(var M1=Math,p=i,P1=(u=p.lib).WordArray,F1=u.Hasher,W1=p.x64.Word,u=p.algo,O1=[],I1=[],U1=[],v=1,B=0,K1=0;K1<24;K1++){O1[v+5*B]=(K1+1)*(K1+2)/2%64;var X1=(2*v+3*B)%5;v=B%5,B=X1}for(v=0;v<5;v++)for(B=0;B<5;B++)I1[v+5*B]=B+(2*v+3*B)%5*5;for(var L1=1,j1=0;j1<24;j1++){for(var T1,N1=0,q1=0,Z1=0;Z1<7;Z1++)1&L1&&((T1=(1<<Z1)-1)<32?q1^=1<<T1:N1^=1<<T1-32),128&L1?L1=L1<<1^113:L1<<=1;U1[j1]=W1.create(N1,q1)}for(var D=[],V1=0;V1<25;V1++)D[V1]=W1.create();function G1(t,e,r){return t&e|~t&r}function J1(t,e,r){return t&r|e&~r}function Q1(t,e){return t<<e|t>>>32-e}function Y1(t){return"string"==typeof t?f1:o}function $1(t,e,r){var i,o=this._iv;o?(i=o,this._iv=void 0):i=this._prevBlock;for(var n=0;n<r;n++)t[e+n]^=i[n]}function t2(t,e,r,i){var o,n=this._iv;n?(o=n.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(var s=0;s<r;s++)t[e+s]^=o[s]}function e2(t){var e,r,i;return 255==(t>>24&255)?(r=t>>8&255,i=255&t,255===(e=t>>16&255)?(e=0,255===r?(r=0,255===i?i=0:++i):++r):++e,t=0,t=(t+=e<<16)+(r<<8)+i):t+=1<<24,t}u=u.SHA3=F1.extend({cfg:F1.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new W1.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,i=this.blockSize/2,o=0;o<i;o++){var n=t[e+2*o],s=t[e+2*o+1],n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);(x=r[o]).high^=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),x.low^=n}for(var c=0;c<24;c++){for(var a=0;a<5;a++){for(var h=0,l=0,f=0;f<5;f++)h^=(x=r[a+5*f]).high,l^=x.low;var d=D[a];d.high=h,d.low=l}for(a=0;a<5;a++)for(var u=D[(a+4)%5],p=D[(a+1)%5],_=p.high,p=p.low,h=u.high^(_<<1|p>>>31),l=u.low^(p<<1|_>>>31),f=0;f<5;f++)(x=r[a+5*f]).high^=h,x.low^=l;for(var y=1;y<25;y++){var g=(x=r[y]).high,v=x.low,B=O1[y],g=(l=B<32?(h=g<<B|v>>>32-B,v<<B|g>>>32-B):(h=v<<B-32|g>>>64-B,g<<B-32|v>>>64-B),D[I1[y]]);g.high=h,g.low=l}var w=D[0],k=r[0];w.high=k.high,w.low=k.low;for(a=0;a<5;a++)for(f=0;f<5;f++){var x=r[y=a+5*f],b=D[y],m=D[(a+1)%5+5*f],S=D[(a+2)%5+5*f];x.high=b.high^~m.high&S.high,x.low=b.low^~m.low&S.low}x=r[0],w=U1[c];x.high^=w.high,x.low^=w.low}},_doFinalize:function(){for(var t=this._data,e=t.words,r=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize,o=(e[r>>>5]|=1<<24-r%32,e[(M1.ceil((1+r)/i)*i>>>5)-1]|=128,t.sigBytes=4*e.length,this._process(),this._state),r=this.cfg.outputLength/8,n=r/8,s=[],c=0;c<n;c++){var a=o[c],h=a.high,a=a.low,h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8);s.push(16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)),s.push(h)}return new P1.init(s,r)},clone:function(){for(var t=F1.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}}),p.SHA3=F1._createHelper(u),p.HmacSHA3=F1._createHmacHelper(u),Math,u=(p=i).lib,e=u.WordArray,Z=u.Hasher,u=p.algo,V=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),G=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),J=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Q=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Y=e.create([0,1518500249,1859775393,2400959708,2840853838]),$=e.create([1352829926,1548603684,1836072691,2053994217,0]),u=u.RIPEMD160=Z.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var i=e+r,o=t[i];t[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var n,s,c,a,h,l,f=this._hash.words,d=Y.words,u=$.words,p=V.words,_=G.words,y=J.words,g=Q.words,v=n=f[0],B=s=f[1],w=c=f[2],k=a=f[3],x=h=f[4],r=0;r<80;r+=1)l=(l=Q1(l=(l=n+t[e+p[r]]|0)+(r<16?(s^c^a)+d[0]:r<32?G1(s,c,a)+d[1]:r<48?((s|~c)^a)+d[2]:r<64?J1(s,c,a)+d[3]:(s^(c|~a))+d[4])|0,y[r]))+h|0,n=h,h=a,a=Q1(c,10),c=s,s=l,l=(l=Q1(l=(l=v+t[e+_[r]]|0)+(r<16?(B^(w|~k))+u[0]:r<32?J1(B,w,k)+u[1]:r<48?((B|~w)^k)+u[2]:r<64?G1(B,w,k)+u[3]:(B^w^k)+u[4])|0,g[r]))+x|0,v=x,x=k,k=Q1(w,10),w=B,B=l;l=f[1]+c+k|0,f[1]=f[2]+a+x|0,f[2]=f[3]+h+v|0,f[3]=f[4]+n+B|0,f[4]=f[0]+s+w|0,f[0]=l},_doFinalize:function(){for(var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes,i=(e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),this._hash),o=i.words,n=0;n<5;n++){var s=o[n];o[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var t=Z.clone.call(this);return t._hash=this._hash.clone(),t}}),p.RIPEMD160=Z._createHelper(u),p.HmacRIPEMD160=Z._createHmacHelper(u),u=(p=i).lib.Base,t1=p.enc.Utf8,p.algo.HMAC=u.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=t1.parse(e));for(var r=t.blockSize,i=4*r,t=((e=e.sigBytes>i?t.finalize(e):e).clamp(),this._oKey=e.clone()),e=this._iKey=e.clone(),o=t.words,n=e.words,s=0;s<r;s++)o[s]^=1549556828,n[s]^=909522486;t.sigBytes=e.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,t=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(t))}}),u=(p=i).lib,w=u.Base,e1=u.WordArray,u=p.algo,P=u.SHA256,r1=u.HMAC,i1=u.PBKDF2=w.extend({cfg:w.extend({keySize:4,hasher:P,iterations:25e4}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,i=r1.create(r.hasher,t),o=e1.create(),n=e1.create([1]),s=o.words,c=n.words,a=r.keySize,h=r.iterations;s.length<a;){for(var l=i.update(e).finalize(n),f=(i.reset(),l.words),d=f.length,u=l,p=1;p<h;p++){u=i.finalize(u),i.reset();for(var _=u.words,y=0;y<d;y++)f[y]^=_[y]}o.concat(l),c[0]++}return o.sigBytes=4*a,o}}),p.PBKDF2=function(t,e,r){return i1.create(r).compute(t,e)},w=(u=i).lib,P=w.Base,o1=w.WordArray,w=u.algo,p=w.MD5,n1=w.EvpKDF=P.extend({cfg:P.extend({keySize:4,hasher:p,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,i=this.cfg,o=i.hasher.create(),n=o1.create(),s=n.words,c=i.keySize,a=i.iterations;s.length<c;){r&&o.update(r),r=o.update(t).finalize(e),o.reset();for(var h=1;h<a;h++)r=o.finalize(r),o.reset();n.concat(r)}return n.sigBytes=4*c,n}}),u.EvpKDF=function(t,e,r){return n1.create(r).compute(t,e)},i.lib.Cipher||(P=(w=i).lib,p=P.Base,s=P.WordArray,s1=P.BufferedBlockAlgorithm,(u=w.enc).Utf8,c1=u.Base64,a1=w.algo.EvpKDF,h1=P.Cipher=s1.extend({cfg:p.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s1.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(i){return{encrypt:function(t,e,r){return Y1(e).encrypt(i,t,e,r)},decrypt:function(t,e,r){return Y1(e).decrypt(i,t,e,r)}}}}),P.StreamCipher=h1.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),u=w.mode={},r=P.BlockCipherMode=p.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),r=u.CBC=((u=r.extend()).Encryptor=u.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;$1.call(this,t,e,i),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),u.Decryptor=u.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);r.decryptBlock(t,e),$1.call(this,t,e,i),this._prevBlock=o}}),u),u=(w.pad={}).Pkcs7={pad:function(t,e){for(var e=4*e,r=e-t.sigBytes%e,i=r<<24|r<<16|r<<8|r,o=[],n=0;n<r;n+=4)o.push(i);e=s.create(o,r);t.concat(e)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},P.BlockCipher=h1.extend({cfg:h1.cfg.extend({mode:r,padding:u}),reset:function(){h1.reset.call(this);var t,e=this.cfg,r=e.iv,e=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=e.createEncryptor:(t=e.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(e,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),l1=P.CipherParams=p.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),r=(w.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,t=t.salt,t=t?s.create([1398893684,1701076831]).concat(t).concat(e):e;return t.toString(c1)},parse:function(t){var e,t=c1.parse(t),r=t.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=s.create(r.slice(2,4)),r.splice(0,4),t.sigBytes-=16),l1.create({ciphertext:t,salt:e})}},o=P.SerializableCipher=p.extend({cfg:p.extend({format:r}),encrypt:function(t,e,r,i){i=this.cfg.extend(i);var o=t.createEncryptor(r,i),e=o.finalize(e),o=o.cfg;return l1.create({ciphertext:e,key:r,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,r,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(r,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),u=(w.kdf={}).OpenSSL={execute:function(t,e,r,i,o){i=i||s.random(8),o=(o?a1.create({keySize:e+r,hasher:o}):a1.create({keySize:e+r})).compute(t,i);t=s.create(o.words.slice(e),4*r);return o.sigBytes=4*e,l1.create({key:o,iv:t,salt:i})}},f1=P.PasswordBasedCipher=o.extend({cfg:o.cfg.extend({kdf:u}),encrypt:function(t,e,r,i){r=(i=this.cfg.extend(i)).kdf.execute(r,t.keySize,t.ivSize,i.salt,i.hasher),i.iv=r.iv,t=o.encrypt.call(this,t,e,r.key,i);return t.mixIn(r),t},decrypt:function(t,e,r,i){i=this.cfg.extend(i),e=this._parse(e,i.format);r=i.kdf.execute(r,t.keySize,t.ivSize,e.salt,i.hasher);return i.iv=r.iv,o.decrypt.call(this,t,e,r.key,i)}})),i.mode.CFB=((p=i.lib.BlockCipherMode.extend()).Encryptor=p.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;t2.call(this,t,e,i,r),this._prevBlock=t.slice(e,e+i)}}),p.Decryptor=p.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);t2.call(this,t,e,i,r),this._prevBlock=o}}),p),i.mode.CTR=(r=i.lib.BlockCipherMode.extend(),w=r.Encryptor=r.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,n=this._counter,s=(o&&(n=this._counter=o.slice(0),this._iv=void 0),n.slice(0));r.encryptBlock(s,0),n[i-1]=n[i-1]+1|0;for(var c=0;c<i;c++)t[e+c]^=s[c]}}),r.Decryptor=w,r),i.mode.CTRGladman=(P=i.lib.BlockCipherMode.extend(),u=P.Encryptor=P.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,n=this._counter,s=(o&&(n=this._counter=o.slice(0),this._iv=void 0),0===((o=n)[0]=e2(o[0]))&&(o[1]=e2(o[1])),n.slice(0));r.encryptBlock(s,0);for(var c=0;c<i;c++)t[e+c]^=s[c]}}),P.Decryptor=u,P),i.mode.OFB=(p=i.lib.BlockCipherMode.extend(),w=p.Encryptor=p.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,n=this._keystream;o&&(n=this._keystream=o.slice(0),this._iv=void 0),r.encryptBlock(n,0);for(var s=0;s<i;s++)t[e+s]^=n[s]}}),p.Decryptor=w,p),i.mode.ECB=((u=i.lib.BlockCipherMode.extend()).Encryptor=u.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),u.Decryptor=u.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),u),i.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,e=4*e,e=e-r%e,r=r+e-1;t.clamp(),t.words[r>>>2]|=e<<24-r%4*8,t.sigBytes+=e},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},i.pad.Iso10126={pad:function(t,e){e*=4,e-=t.sigBytes%e;t.concat(i.lib.WordArray.random(e-1)).concat(i.lib.WordArray.create([e<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},i.pad.Iso97971={pad:function(t,e){t.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(t,e)},unpad:function(t){i.pad.ZeroPadding.unpad(t),t.sigBytes--}},i.pad.ZeroPadding={pad:function(t,e){e*=4;t.clamp(),t.sigBytes+=e-(t.sigBytes%e||e)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1,r=t.sigBytes-1;0<=r;r--)if(e[r>>>2]>>>24-r%4*8&255){t.sigBytes=r+1;break}}},i.pad.NoPadding={pad:function(){},unpad:function(){}},d1=(P=i).lib.CipherParams,u1=P.enc.Hex,P.format.Hex={stringify:function(t){return t.ciphertext.toString(u1)},parse:function(t){t=u1.parse(t);return d1.create({ciphertext:t})}};for(var w=i,p=w.lib.BlockCipher,u=w.algo,k=[],r2=[],i2=[],o2=[],n2=[],s2=[],c2=[],a2=[],h2=[],l2=[],x=[],b=0;b<256;b++)x[b]=b<128?b<<1:b<<1^283;for(var m=0,S=0,b=0;b<256;b++){var E=S^S<<1^S<<2^S<<3^S<<4,f2=(k[m]=E=E>>>8^255&E^99,x[r2[E]=m]),d2=x[f2],u2=x[d2],M=257*x[E]^16843008*E;i2[m]=M<<24|M>>>8,o2[m]=M<<16|M>>>16,n2[m]=M<<8|M>>>24,s2[m]=M,c2[E]=(M=16843009*u2^65537*d2^257*f2^16843008*m)<<24|M>>>8,a2[E]=M<<16|M>>>16,h2[E]=M<<8|M>>>24,l2[E]=M,m?(m=f2^x[x[x[u2^f2]]],S^=x[x[S]]):m=S=1}var p2=[0,1,2,4,8,16,32,64,128,27,54],u=u.AES=p.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,i=4*(1+(this._nRounds=6+r)),o=this._keySchedule=[],n=0;n<i;n++)n<r?o[n]=e[n]:(a=o[n-1],n%r?6<r&&n%r==4&&(a=k[a>>>24]<<24|k[a>>>16&255]<<16|k[a>>>8&255]<<8|k[255&a]):(a=k[(a=a<<8|a>>>24)>>>24]<<24|k[a>>>16&255]<<16|k[a>>>8&255]<<8|k[255&a],a^=p2[n/r|0]<<24),o[n]=o[n-r]^a);for(var s=this._invKeySchedule=[],c=0;c<i;c++){var a,n=i-c;a=c%4?o[n]:o[n-4],s[c]=c<4||n<=4?a:c2[k[a>>>24]]^a2[k[a>>>16&255]]^h2[k[a>>>8&255]]^l2[k[255&a]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i2,o2,n2,s2,k)},decryptBlock:function(t,e){var r=t[e+1],r=(t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,c2,a2,h2,l2,r2),t[e+1]);t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,i,o,n,s,c){for(var a=this._nRounds,h=t[e]^r[0],l=t[e+1]^r[1],f=t[e+2]^r[2],d=t[e+3]^r[3],u=4,p=1;p<a;p++)var _=i[h>>>24]^o[l>>>16&255]^n[f>>>8&255]^s[255&d]^r[u++],y=i[l>>>24]^o[f>>>16&255]^n[d>>>8&255]^s[255&h]^r[u++],g=i[f>>>24]^o[d>>>16&255]^n[h>>>8&255]^s[255&l]^r[u++],v=i[d>>>24]^o[h>>>16&255]^n[l>>>8&255]^s[255&f]^r[u++],h=_,l=y,f=g,d=v;_=(c[h>>>24]<<24|c[l>>>16&255]<<16|c[f>>>8&255]<<8|c[255&d])^r[u++],y=(c[l>>>24]<<24|c[f>>>16&255]<<16|c[d>>>8&255]<<8|c[255&h])^r[u++],g=(c[f>>>24]<<24|c[d>>>16&255]<<16|c[h>>>8&255]<<8|c[255&l])^r[u++],v=(c[d>>>24]<<24|c[h>>>16&255]<<16|c[l>>>8&255]<<8|c[255&f])^r[u++];t[e]=_,t[e+1]=y,t[e+2]=g,t[e+3]=v},keySize:8}),P=(w.AES=p._createHelper(u),i),_2=(w=P.lib).WordArray,w=w.BlockCipher,p=P.algo,y2=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v2=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],B2=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],w2=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k2=p.DES=w.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var i=y2[r]-1;e[r]=t[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],n=0;n<16;n++){for(var s=o[n]=[],c=v2[n],r=0;r<24;r++)s[r/6|0]|=e[(g2[r]-1+c)%28]<<31-r%6,s[4+(r/6|0)]|=e[28+(g2[r+24]-1+c)%28]<<31-r%6;s[0]=s[0]<<1|s[0]>>>31;for(r=1;r<7;r++)s[r]=s[r]>>>4*(r-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var a=this._invSubKeys=[],r=0;r<16;r++)a[r]=o[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],x2.call(this,4,252645135),x2.call(this,16,65535),b2.call(this,2,858993459),b2.call(this,8,16711935),x2.call(this,1,1431655765);for(var i=0;i<16;i++){for(var o=r[i],n=this._lBlock,s=this._rBlock,c=0,a=0;a<8;a++)c|=B2[a][((s^o[a])&w2[a])>>>0];this._lBlock=s,this._rBlock=n^c}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,x2.call(this,1,1431655765),b2.call(this,8,16711935),b2.call(this,2,858993459),x2.call(this,16,65535),x2.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function x2(t,e){e=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=e,this._lBlock^=e<<t}function b2(t,e){e=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=e,this._rBlock^=e<<t}P.DES=w._createHelper(k2),p=p.TripleDES=w.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),t=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=k2.createEncryptor(_2.create(e)),this._des2=k2.createEncryptor(_2.create(r)),this._des3=k2.createEncryptor(_2.create(t))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),P.TripleDES=w._createHelper(p);var u=i,P=u.lib.StreamCipher,w=u.algo,m2=w.RC4=P.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;for(var o=0,n=0;o<256;o++){var s=o%r,s=e[s>>>2]>>>24-s%4*8&255,n=(n+i[o]+s)%256,s=i[o];i[o]=i[n],i[n]=s}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=S2.call(this)},keySize:8,ivSize:0});function S2(){for(var t=this._S,e=this._i,r=this._j,i=0,o=0;o<4;o++){var r=(r+t[e=(e+1)%256])%256,n=t[e];t[e]=t[r],t[r]=n,i|=t[(t[e]+t[r])%256]<<24-8*o}return this._i=e,this._j=r,i}function A2(){for(var t=this._X,e=this._C,r=0;r<8;r++)c[r]=e[r];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<c[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<c[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<c[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<c[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<c[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<c[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<c[6]>>>0?1:0)|0,this._b=e[7]>>>0<c[7]>>>0?1:0;for(r=0;r<8;r++){var i=t[r]+e[r],o=65535&i,n=i>>>16;a[r]=((o*o>>>17)+o*n>>>15)+n*n^((4294901760&i)*i|0)+((65535&i)*i|0)}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}function z2(){for(var t=this._X,e=this._C,r=0;r<8;r++)f[r]=e[r];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<f[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<f[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<f[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<f[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<f[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<f[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<f[6]>>>0?1:0)|0,this._b=e[7]>>>0<f[7]>>>0?1:0;for(r=0;r<8;r++){var i=t[r]+e[r],o=65535&i,n=i>>>16;d[r]=((o*o>>>17)+o*n>>>15)+n*n^((4294901760&i)*i|0)+((65535&i)*i|0)}t[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,t[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,t[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,t[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,t[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,t[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,t[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,t[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}u.RC4=P._createHelper(m2),w=w.RC4Drop=m2.extend({cfg:m2.cfg.extend({drop:192}),_doReset:function(){m2._doReset.call(this);for(var t=this.cfg.drop;0<t;t--)S2.call(this)}}),u.RC4Drop=P._createHelper(w),u=(p=i).lib.StreamCipher,P=p.algo,n=[],c=[],a=[],P=P.Rabbit=u.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);for(var i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]],r=this._b=0;r<4;r++)A2.call(this);for(r=0;r<8;r++)o[r]^=i[r+4&7];if(e){var e=e.words,n=e[0],e=e[1],n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),s=n>>>16|4294901760&e,c=e<<16|65535&n;o[0]^=n,o[1]^=s,o[2]^=e,o[3]^=c,o[4]^=n,o[5]^=s,o[6]^=e,o[7]^=c;for(r=0;r<4;r++)A2.call(this)}},_doProcessBlock:function(t,e){var r=this._X;A2.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2}),p.Rabbit=u._createHelper(P),p=(w=i).lib.StreamCipher,u=w.algo,h=[],f=[],d=[],u=u.RabbitLegacy=p.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]],o=this._b=0;o<4;o++)z2.call(this);for(o=0;o<8;o++)i[o]^=r[o+4&7];if(e){var t=e.words,e=t[0],t=t[1],e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),n=e>>>16|4294901760&t,s=t<<16|65535&e;i[0]^=e,i[1]^=n,i[2]^=t,i[3]^=s,i[4]^=e,i[5]^=n,i[6]^=t,i[7]^=s;for(o=0;o<4;o++)z2.call(this)}},_doProcessBlock:function(t,e){var r=this._X;z2.call(this),h[0]=r[0]^r[5]>>>16^r[3]<<16,h[1]=r[2]^r[7]>>>16^r[5]<<16,h[2]=r[4]^r[1]>>>16^r[7]<<16,h[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)h[i]=16711935&(h[i]<<8|h[i]>>>24)|4278255360&(h[i]<<24|h[i]>>>8),t[e+i]^=h[i]},blockSize:4,ivSize:2}),w.RabbitLegacy=p._createHelper(u);{w=(P=i).lib.BlockCipher,p=P.algo;const F=16,D2=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],E2=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var H2={pbox:[],sbox:[]};function C2(t,e){var r=t.sbox[0][e>>24&255]+t.sbox[1][e>>16&255];return r=(r^=t.sbox[2][e>>8&255])+t.sbox[3][255&e]}function R2(e,t,r){let i=t,o=r,n;for(let t=0;t<F;++t)i^=e.pbox[t],o=C2(e,i)^o,n=i,i=o,o=n;return n=i,i=o,o=n,o^=e.pbox[F],{left:i^=e.pbox[F+1],right:o}}p=p.Blowfish=w.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var t=this._keyPriorReset=this._key,n=t.words,t=t.sigBytes/4;{var s=H2,c=n,a=t;for(let e=0;e<4;e++){s.sbox[e]=[];for(let t=0;t<256;t++)s.sbox[e][t]=E2[e][t]}let e=0;for(let t=0;t<F+2;t++)s.pbox[t]=D2[t]^c[e],++e>=a&&(e=0);let r=0,i=0,o=0;for(let t=0;t<F+2;t+=2)o=R2(s,r,i),r=o.left,i=o.right,s.pbox[t]=r,s.pbox[t+1]=i;for(let e=0;e<4;e++)for(let t=0;t<256;t+=2)o=R2(s,r,i),r=o.left,i=o.right,s.sbox[e][t]=r,s.sbox[e][t+1]=i}}},encryptBlock:function(t,e){var r=R2(H2,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},decryptBlock:function(t,e){var r=function(e,t,r){let i=t,o=r,n;for(let t=F+1;1<t;--t)i^=e.pbox[t],o=C2(e,i)^o,n=i,i=o,o=n;return n=i,i=o,o=n,o^=e.pbox[1],{left:i^=e.pbox[0],right:o}}(H2,t[e],t[e+1]);t[e]=r.left,t[e+1]=r.right},blockSize:2,keySize:4,ivSize:2}),P.Blowfish=w._createHelper(p)}return i});


(function(win){
	var password = "p";
	win.password_hash = function (){
		var a = Date.now()+(3*60*60);
		return CryptoJS.AES.encrypt(a+"", password).toString();
	};
	win.password_verify = function (encrypted){
		return CryptoJS.AES.decrypt(encrypted, password);
	};

	win.postajax1  =function(ac,data,f){
 
		var a = document.querySelector(`meta[name="auth-token"]`);
		if(a)password = a.getAttribute("content");

	  return new Promise(function(a,b){
	  	 data.__hash = password_hash();

	      post(site_url_ajax(ac),data,function(r){
	      	 if(r.__hash){
	      	 	var time = password_verify(r.__hash);
	      	 	if(time){
	      	 		delete r.__hash;

	      	 		//check time
	      	 		if(time<Date.now()){
	      	 			r = {code:0,error:"Time Hash fired keeper"};
	      	 			if(f)f(r);
	         			b(r);
	      	 		}else{
	      	 			if(f)f(r);
	         			a(r);
	      	 		}

	      	 		
	      	 	}else{
	      	 		r= {code:0,error:"Hash invalid keeper"};
	      	 		if(f)f(r);
	         		b(r);
	      	 	}
	      	 	
	      	 }else{
	      	 	r = {code:0,error:"Hash invalid keeper. Please response with hash"};
	      	 	if(f)f(r);
	         	b(r);	
	      	 }
	         
	      },true);
	  });
	};
})(window);
$(document).ready(function(){

});
$.fn.dataloader = function(options){

	  return this.each(function(){
	    function post(data,f){
	       $.ajax({
	        url: url,
	        async: true,  
	        data: data||{},
	        type:"POST",
	        success: function (json) {
	          try{
	              json= JSON.parse(json);
	          }catch(e){
	              
	          } 
	          if(f)f(json);
	        },
	        error: function(a,b,c){
	            this.success(a.responseText);
	        }
	      }); 
	    }
	     var settings  = $.extend({
	       onResult : function(){}
	     },options,true);
	     var ele = $(this);
	     var timer = ele.attr("data-timer");
	     var url = ele.attr("data-loader");


	     

	     this.reload = function(){
	        if(url){
	            if(timer){
	               setTimeout(function(){
	                 post({},settings.onResult);
	               },timer*1);
	            }else{
	              post({},settings.onResult);
	            }
	         }
	     };


	     this.reload();
	     ele.data("dataloader",this);
	  });
	};
/*!
 DataTables 1.10.12
 2008-2015 SpryMedia Ltd - datatables.net/license
*/
(function(h){"function"===typeof define&&define.amd?define(["jquery"],function(D){return h(D,window,document)}):"object"===typeof exports?module.exports=function(D,I){D||(D=window);I||(I="undefined"!==typeof window?require("jquery"):require("jquery")(D));return h(I,D,D.document)}:h(jQuery,window,document)})(function(h,D,I,k){function X(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=e.replace(b[0],b[2].toLowerCase()),
d[c]=e,"o"===b[1]&&X(a[e])});a._hungarianMap=d}function K(a,b,c){a._hungarianMap||X(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==k&&(c||b[d]===k))"o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),K(a[d],b[d],c)):b[d]=b[e]})}function Da(a){var b=m.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&(c&&"No data available in table"===b.sEmptyTable)&&E(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(c&&"Loading..."===b.sLoadingRecords)&&E(a,a,"sZeroRecords","sLoadingRecords");
a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&db(a)}function eb(a){A(a,"ordering","bSort");A(a,"orderMulti","bSortMulti");A(a,"orderClasses","bSortClasses");A(a,"orderCellsTop","bSortCellsTop");A(a,"order","aaSorting");A(a,"orderFixed","aaSortingFixed");A(a,"paging","bPaginate");A(a,"pagingType","sPaginationType");A(a,"pageLength","iDisplayLength");A(a,"searching","bFilter");"boolean"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":"");"boolean"===typeof a.scrollX&&(a.scrollX=
a.scrollX?"100%":"");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&K(m.models.oSearch,a[b])}function fb(a){A(a,"orderable","bSortable");A(a,"orderData","aDataSort");A(a,"orderSequence","asSorting");A(a,"orderDataType","sortDataType");var b=a.aDataSort;b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){if(!m.__browser){var b={};m.__browser=b;var c=h("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,
width:100,overflow:"scroll"}).append(h("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}h.extend(a.oBrowser,m.__browser);a.oScroll.iBarWidth=m.__browser.barWidth}function hb(a,b,c,d,e,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&
(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Ea(a,b){var c=m.defaults.column,d=a.aoColumns.length,c=h.extend({},m.models.oColumn,c,{nTh:b?b:I.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},m.models.oSearch,c[d]);ja(a,d,h(b).data())}function ja(a,b,c){var b=a.aoColumns[b],d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=
(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),K(m.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),h.extend(b,c),E(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),E(b,c,"aDataSort"));var g=b.mData,j=Q(g),i=b.mRender?Q(b.mRender):null,c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&
(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return R(g)(a,b,c)};"number"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==h.inArray("asc",b.asSorting);c=-1!==h.inArray("desc",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI=""):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):
!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function Y(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Fa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(""!==b.sY||""!==b.sX)&&ka(a);u(a,null,"column-sizing",[a])}function Z(a,b){var c=la(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function $(a,b){var c=la(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}
function aa(a){var b=0;h.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==h(d.nTh).css("display")&&b++});return b}function la(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ga(a){var b=a.aoColumns,c=a.aoData,d=m.ext.type.detect,e,f,g,j,i,h,l,q,t;e=0;for(f=b.length;e<f;e++)if(l=b[e],t=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=d.length;g<j;g++){i=0;for(h=c.length;i<h;i++){t[i]===k&&(t[i]=B(a,i,e,"type"));q=d[g](t[i],a);if(!q&&
g!==d.length-1)break;if("html"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function ib(a,b,c,d){var e,f,g,j,i,n,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){n=b[e];var q=n.targets!==k?n.targets:n.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<g;f++)if("number"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Ea(a);d(q[f],n)}else if("number"===typeof q[f]&&0>q[f])d(l.length+q[f],n);else if("string"===typeof q[f]){j=0;for(i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&
d(j,n)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function N(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},m.models.oRow,{src:c?"dom":"data",idx:e});f._aData=b;a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==k&&(a.aIds[b]=f);(c||!a.oFeatures.bDeferRender)&&Ha(a,e,c,d);return e}function ma(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,e){c=Ia(a,e);return N(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,
f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(L(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),j;if((i===g||null===i)&&null!==j&&d!==k)i=j;else if("function"===typeof i)return i.call(g);return null===i&&"display"==d?"":i}function jb(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}
function Ja(a){return h.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\./g,".")})}function Q(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=Q(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var c=function(a,b,f){var g,j;if(""!==f){j=Ja(f);
for(var i=0,n=j.length;i<n;i++){f=j[i].match(ba);g=j[i].match(U);if(f){j[i]=j[i].replace(ba,"");""!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(".");if(h.isArray(a)){i=0;for(n=a.length;i<n;i++)g.push(c(a[i],b,j))}a=f[0].substring(1,f[0].length-1);a=""===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(U,"");a=a[j[i]]();continue}if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}function R(a){if(h.isPlainObject(a))return R(a._);
if(null===a)return function(){};if("function"===typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var e=Ja(e),f;f=e[e.length-1];for(var g,j,i=0,n=e.length-1;i<n;i++){g=e[i].match(ba);j=e[i].match(U);if(g){e[i]=e[i].replace(ba,"");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(".");if(h.isArray(d)){j=0;for(n=d.length;j<n;j++)f={},b(f,d[j],g),a[e[i]].push(f)}else a[e[i]]=d;return}j&&(e[i]=e[i].replace(U,
""),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===k)a[e[i]]={};a=a[e[i]]}if(f.match(U))a[f.replace(U,"")](d);else a[f.replace(ba,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ka(a){return G(a.aoData,"_aData")}function na(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function oa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===k&&a.splice(d,1)}function ca(a,b,c,d){var e=a.aoData[b],f,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);
c.innerHTML=B(a,b,d,"display")};if("dom"===c||(!c||"auto"===c)&&"dom"===e.src)e._aData=Ia(a,e,d,d===k?k:e._aData).data;else{var j=e.anCells;if(j)if(d!==k)g(j[d],d);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==k)g[d].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;La(a,e)}}function Ia(a,b,c,d){var e=[],f=b.firstChild,g,j,i=0,n,l=a.aoColumns,q=a._rowReadObject,d=d!==k?d:q?{}:[],t=function(a,b){if("string"===typeof a){var c=a.indexOf("@");
-1!==c&&(c=a.substring(c+1),R(a)(d,b.getAttribute(c)))}},S=function(a){if(c===k||c===i)j=l[i],n=h.trim(a.innerHTML),j&&j._bAttrSrc?(R(j.mData._)(d,n),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=R(j.mData)),j._setter(d,n)):d[i]=n;i++};if(f)for(;f;){g=f.nodeName.toUpperCase();if("TD"==g||"TH"==g)S(f),e.push(f);f=f.nextSibling}else{e=b.anCells;f=0;for(g=e.length;f<g;f++)S(e[f])}if(b=b.firstChild?b:b.nTr)(b=b.getAttribute("id"))&&R(a.rowId)(d,b);return{data:d,cells:e}}
function Ha(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,n,l,q;if(null===e.nTr){j=c||I.createElement("tr");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;La(a,e);l=0;for(q=a.aoColumns.length;l<q;l++){n=a.aoColumns[l];i=c?d[l]:I.createElement(n.sCellType);i._DT_CellIndex={row:b,column:l};g.push(i);if((!c||n.mRender||n.mData!==l)&&(!h.isPlainObject(n.mData)||n.mData._!==l+".display"))i.innerHTML=B(a,b,l,"display");n.sClass&&(i.className+=" "+n.sClass);n.bVisible&&!c?j.appendChild(i):!n.bVisible&&c&&i.parentNode.removeChild(i);
n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l)}u(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function La(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e);d.DT_RowClass&&(e=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?pa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass));d.DT_RowAttr&&h(c).attr(d.DT_RowAttr);d.DT_RowData&&h(c).data(d.DT_RowData)}}function kb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===
h("th, td",g).length,n=a.oClasses,l=a.aoColumns;i&&(e=h("<tr/>").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Ma(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Na(a,"header")(a,d,f,n);i&&da(a.aoHeader,g);h(g).find(">tr").attr("role","row");h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH);h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH);
if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function ea(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,n;if(b){c===k&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}d=0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(n=i=1,j[d][f]===k){a.appendChild(g[d][f].cell);
for(j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==k&&g[d][f].cell==g[d][f+n].cell;){for(c=0;c<i;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function O(a){var b=u(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==y(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=
-1);var g=a._iDisplayStart,n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!lb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:n;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ha(a,l);l=q.nTr;if(0!==e){var t=d[c%e];q._sRowStripe!=t&&(h(l).removeClass(q._sRowStripe).addClass(t),q._sRowStripe=t)}u(a,"aoRowCallback",null,[l,q._aData,c,j]);b.push(l);c++}}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==y(a)?c=f.sLoadingRecords:
f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:aa(a),"class":a.oClasses.sRowEmpty}).html(c))[0];u(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ka(a),g,n,i]);u(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ka(a),g,n,i]);d=h(a.nTBody);d.children().detach();d.append(h(b));u(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function T(a,b){var c=a.oFeatures,d=c.bFilter;
c.bSort&&mb(a);d?fa(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;O(a);a._drawHold=!1}function nb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),d=a.oFeatures,e=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var f=a.sDom.split(""),g,j,i,n,l,q,t=0;t<f.length;t++){g=null;j=f[t];if("<"==j){i=h("<div/>")[0];
n=f[t+1];if("'"==n||'"'==n){l="";for(q=2;f[t+q]!=n;)l+=f[t+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter);-1!=l.indexOf(".")?(n=l.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;t+=q}e.append(i);e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=ob(a);else if("f"==j&&d.bFilter)g=pb(a);else if("r"==j&&d.bProcessing)g=qb(a);else if("t"==j)g=rb(a);else if("i"==j&&d.bInfo)g=sb(a);else if("p"==
j&&d.bPaginate)g=tb(a);else if(0!==m.ext.feature.length){i=m.ext.feature;q=0;for(n=i.length;q<n;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e);a.nHolding=null}function da(a,b){var c=h(b).children("tr"),d,e,f,g,j,i,n,l,q,t;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<i;f++){d=c[f];for(e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){l=1*e.getAttribute("colspan");
q=1*e.getAttribute("rowspan");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;n=g;t=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][n+j]={cell:e,unique:t},a[f+g].nTr=d}e=e.nextSibling}}}function qa(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],da(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function ra(a,b,c){u(a,"aoServerParams","serverParams",[b]);if(b&&h.isArray(b)){var d={},
e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){u(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var n=h.isFunction(f)?f(b,a):f,b=h.isFunction(f)&&n?n:h.extend(!0,b,n);delete g.data}n={data:b,success:function(b){var c=b.error||b.sError;c&&L(a,0,c);a.json=b;i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=u(a,null,"xhr",
[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&("parsererror"==c?L(a,0,"Invalid JSON response",1):4===b.readyState&&L(a,0,"Ajax error",7));C(a,!1)}};a.oAjaxData=b;u(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=h.ajax(h.extend(n,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(n,g)),g.data=f)}function lb(a){return a.bAjaxDataGet?(a.iDraw++,C(a,
!0),ra(a,ub(a),function(b){vb(a,b)}),!1):!0}function ub(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,n,l,q=V(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var k=function(a,b){j.push({name:a,value:b})};k("sEcho",a.iDraw);k("iColumns",c);k("sColumns",G(b,"sName").join(","));k("iDisplayStart",g);k("iDisplayLength",i);var S={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)n=b[g],
l=f[g],i="function"==typeof n.mData?"function":n.mData,S.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),k("mDataProp_"+g,i),d.bFilter&&(k("sSearch_"+g,l.sSearch),k("bRegex_"+g,l.bRegex),k("bSearchable_"+g,n.bSearchable)),d.bSort&&k("bSortable_"+g,n.bSortable);d.bFilter&&(k("sSearch",e.sSearch),k("bRegex",e.bRegex));d.bSort&&(h.each(q,function(a,b){S.order.push({column:b.col,dir:b.dir});k("iSortCol_"+a,b.col);k("sSortDir_"+
a,b.dir)}),k("iSortingCols",q.length));b=m.ext.legacy.ajax;return null===b?a.sAjaxSource?j:S:b?j:S}function vb(a,b){var c=sa(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}na(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(f,10);d=0;for(e=c.length;d<e;d++)N(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;O(a);a._bInitComplete||
ta(a,b);a.bAjaxDataGet=!0;C(a,!1)}function sa(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?Q(c)(b):b}function pb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,b=h("<div/>",{id:!f.f?c+"_filter":null,"class":b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=!this.value?
"":this.value;b!=e.sSearch&&(fa(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,O(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===y(a)?400:0,i=h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?Oa(f,g):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==I.activeElement&&i.val(e.sSearch)}catch(d){}});
return b[0]}function fa(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Ga(a);if("ssp"!=y(a)){wb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)xb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);yb(a)}else f(b);a.bFiltered=!0;u(a,null,"search",[a])}function yb(a){for(var b=
m.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,n=c.length;i<n;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;h.merge(c,j)}}function xb(a,b,c,d,e,f){if(""!==b)for(var g=a.aiDisplay,d=Pa(b,d,e,f),e=g.length-1;0<=e;e--)b=a.aoData[g[e]]._aFilterData[c],d.test(b)||g.splice(e,1)}function wb(a,b,c,d,e,f){var d=Pa(b,d,e,f),e=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster,g;0!==m.ext.search.length&&(c=!0);g=zb(a);if(0>=b.length)a.aiDisplay=f.slice();
else{if(g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function Pa(a,b,c,d){a=b?a:Qa(a);c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0))var b=a.match(/^"(.*)"$/),a=b?b[1]:a;return a.replace('"',"")}).join(")(?=.*?")+").*$");return RegExp(a,d?"i":"")}function zb(a){var b=a.aoColumns,c,d,e,f,g,j,i,h,l=m.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<
f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=B(a,d,e,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(ua.innerHTML=i,i=Zb?ua.textContent:ua.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j;h._sFilterRow=j.join("  ");c=!0}return c}function Ab(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}
function Bb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function sb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Cb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info"));return d[0]}function Cb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),
g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered);j+=c.sInfoPostFix;j=Db(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Db(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/
e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ga(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){nb(a);kb(a);ea(a,a.aoHeader);ea(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Fa(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=x(f.sWidth));u(a,null,"preInit",[a]);T(a);e=y(a);if("ssp"!=e||g)"ajax"==e?ra(a,[],function(c){var f=sa(a,c);for(b=0;b<f.length;b++)N(a,f[b]);a.iInitDisplayStart=d;T(a);C(a,!1);ta(a,c)},a):(C(a,!1),
ta(a))}else setTimeout(function(){ga(a)},200)}function ta(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&Y(a);u(a,null,"plugin-init",[a,b]);u(a,"aoInitComplete","init",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);u(a,null,"length",[a,c])}function ob(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=e?d[0]:d,d=e?d[1]:d,e=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option(d[g],f[g]);var i=
h("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+"_length");i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));h("select",i).val(a._iDisplayLength).bind("change.DT",function(){Ra(a,h(this).val());O(a)});h(a.nTable).bind("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)});return i[0]}function tb(a){var b=a.sPaginationType,c=m.ext.pager[b],d="function"===typeof c,e=function(a){O(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;
d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),k,l=0;for(k=f.p.length;l<k;l++)Na(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"}));return b}function Ta(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:
"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:L(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(u(a,null,"page",[a]),c&&O(a));return b}function qb(a){return h("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none");u(a,null,"processing",
[a,b])}function rb(a){var b=h(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),l=b.children("tfoot");l.length||(l=null);i=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?!d?null:x(d):"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",
width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{"class":f.sScrollBody}).css({position:"relative",overflow:"auto",width:!d?null:x(d)}).append(b));l&&i.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?!d?null:x(d):"100%"}).append(h("<div/>",{"class":f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===j?g:null).append(b.children("tfoot")))));
var b=i.children(),k=b[0],f=b[1],t=l?b[2]:null;if(d)h(f).on("scroll.DT",function(){var a=this.scrollLeft;k.scrollLeft=a;l&&(t.scrollLeft=a)});h(f).css(e&&c.bCollapse?"max-height":"height",e);a.nScrollHead=k;a.nScrollBody=f;a.nScrollFoot=t;a.aoDrawCallback.push({fn:ka,sName:"scrolling"});return i[0]}function ka(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,f=h(a.nScrollHead),g=f[0].style,j=f.children("div"),i=j[0].style,n=j.children("table"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children("div"),
m=t.children("table"),o=h(a.nTHead),F=h(a.nTable),p=F[0],r=p.style,u=a.nTFoot?h(a.nTFoot):null,Eb=a.oBrowser,Ua=Eb.bScrollOversize,s=G(a.aoColumns,"nTh"),P,v,w,y,z=[],A=[],B=[],C=[],D,E=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};v=j.scrollHeight>j.clientHeight;if(a.scrollBarVis!==v&&a.scrollBarVis!==k)a.scrollBarVis=v,Y(a);else{a.scrollBarVis=v;F.children("thead, tfoot").remove();u&&(w=u.clone().prependTo(F),P=u.find("tr"),w=
w.find("tr"));y=o.clone().prependTo(F);o=o.find("tr");v=y.find("tr");y.find("th, td").removeAttr("tabindex");c||(q.width="100%",f[0].style.width="100%");h.each(qa(a,y),function(b,c){D=Z(a,b);c.style.width=a.aoColumns[D].sWidth});u&&J(function(a){a.style.width=""},w);f=F.outerWidth();if(""===c){r.width="100%";if(Ua&&(F.find("tbody").height()>j.offsetHeight||"scroll"==l.css("overflow-y")))r.width=x(F.outerWidth()-b);f=F.outerWidth()}else""!==d&&(r.width=x(d),f=F.outerWidth());J(E,v);J(function(a){B.push(a.innerHTML);
z.push(x(h(a).css("width")))},v);J(function(a,b){if(h.inArray(a,s)!==-1)a.style.width=z[b]},o);h(v).height(0);u&&(J(E,w),J(function(a){C.push(a.innerHTML);A.push(x(h(a).css("width")))},w),J(function(a,b){a.style.width=A[b]},P),h(w).height(0));J(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+B[b]+"</div>";a.style.width=z[b]},v);u&&J(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+C[b]+"</div>";a.style.width=
A[b]},w);if(F.outerWidth()<f){P=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?f+b:f;if(Ua&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")))r.width=x(P-b);(""===c||""!==d)&&L(a,1,"Possible column misalignment",6)}else P="100%";q.width=x(P);g.width=x(P);u&&(a.nScrollFoot.style.width=x(P));!e&&Ua&&(q.height=x(p.offsetHeight+b));c=F.outerWidth();n[0].style.width=x(c);i.width=x(c);d=F.height()>j.clientHeight||"scroll"==l.css("overflow-y");e="padding"+(Eb.bScrollbarLeft?"Left":
"Right");i[e]=d?b+"px":"0px";u&&(m[0].style.width=x(c),t[0].style.width=x(c),t[0].style[e]=d?b+"px":"0px");F.children("colgroup").insertBefore(F.children("thead"));l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}}function J(a,b,c){for(var d=0,e=0,f=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Fa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,
j=c.length,i=la(a,"bVisible"),n=h("th",a.nTHead),l=b.getAttribute("width"),k=b.parentNode,t=!1,m,o,p=a.oBrowser,d=p.bScrollOversize;(m=b.style.width)&&-1!==m.indexOf("%")&&(l=m);for(m=0;m<i.length;m++)o=c[i[m]],null!==o.sWidth&&(o.sWidth=Fb(o.sWidthOrig,k),t=!0);if(d||!t&&!f&&!e&&j==aa(a)&&j==n.length)for(m=0;m<j;m++)i=Z(a,m),null!==i&&(c[i].sWidth=x(n.eq(m).width()));else{j=h(b).clone().css("visibility","hidden").removeAttr("id");j.find("tbody tr").remove();var r=h("<tr/>").appendTo(j.find("tbody"));
j.find("thead, tfoot").remove();j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone());j.find("tfoot th, tfoot td").css("width","");n=qa(a,j.find("thead")[0]);for(m=0;m<i.length;m++)o=c[i[m]],n[m].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?x(o.sWidthOrig):"",o.sWidthOrig&&f&&h(n[m]).append(h("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(m=0;m<i.length;m++)t=i[m],o=c[t],h(Gb(a,t)).clone(!1).append(o.sContentPadding).appendTo(r);h("[name]",
j).removeAttr("name");o=h("<div/>").css(f||e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(j).appendTo(k);f&&g?j.width(g):f?(j.css("width","auto"),j.removeAttr("width"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):l&&j.width(l);for(m=e=0;m<i.length;m++)k=h(n[m]),g=k.outerWidth()-k.width(),k=p.bBounding?Math.ceil(n[m].getBoundingClientRect().width):k.outerWidth(),e+=k,c[i[m]].sWidth=x(k-g);b.style.width=x(e);o.remove()}l&&(b.style.width=
x(l));if((l||f)&&!a._reszEvt)b=function(){h(D).bind("resize.DT-"+a.sInstance,Oa(function(){Y(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0}function Fb(a,b){if(!a)return 0;var c=h("<div/>").css("width",x(a)).appendTo(b||I.body),d=c[0].offsetWidth;c.remove();return d}function Gb(a,b){var c=Hb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h("<td/>").html(B(a,c,b,"display"))[0]:d.anCells[b]}function Hb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,"display")+"",c=c.replace($b,
""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,e=f);return e}function x(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function V(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var n=[];f=function(a){a.length&&!h.isArray(a[0])?n.push(a):h.merge(n,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<n.length;a++){i=n[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||
"string",n[a]._idx===k&&(n[a]._idx=h.inArray(n[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:n[a][1],index:n[a]._idx,type:j,formatter:m.ext.type.order[j+"-pre"]})}return d}function mb(a){var b,c,d=[],e=m.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Ga(a);h=V(a);b=0;for(c=h.length;b<c;b++)j=h[b],j.formatter&&g++,Ib(a,j.col);if("ssp"!=y(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,m=f[b]._aSortData;for(g=
0;g<i;g++)if(j=h[g],c=k[j.col],e=m[j.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,m=f[a]._aSortData,p=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=m[i.col],g=p[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],c=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Jb(a){for(var b,c,d=a.aoColumns,e=V(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,
"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",b)}}function Va(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};"number"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,
G(e,"0")),-1!==c?(b=g(e[c],!0),null===b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);T(a);"function"==typeof d&&d(a)}function Ma(a,b,c,d){var e=a.aoColumns[c];Wa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Va(a,c,b.shiftKey,d);"ssp"!==y(a)&&C(a,!1)},0)):Va(a,c,b.shiftKey,d))})}
function va(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=V(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(G(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(G(a.aoData,"anCells",g)).addClass(c+(2>e?e+1:3))}a.aLastSort=d}function Ib(a,b){var c=a.aoColumns[b],d=m.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,$(a,b)));for(var f,g=m.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],
c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:B(a,j,b,"sort"),c._aSortData[b]=g?g(f):f}function wa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:Ab(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Ab(a.aoPreSearchCols[d])}})};u(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,
b)}}function Kb(a){var b,c,d=a.aoColumns;if(a.oFeatures.bStateSave){var e=a.fnStateLoadCallback.call(a.oInstance,a);if(e&&e.time&&(b=u(a,"aoStateLoadParams","stateLoadParams",[a,e]),-1===h.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&e.time<+new Date-1E3*b)&&d.length===e.columns.length))){a.oLoadedState=h.extend(!0,{},e);e.start!==k&&(a._iDisplayStart=e.start,a.iInitDisplayStart=e.start);e.length!==k&&(a._iDisplayLength=e.length);e.order!==k&&(a.aaSorting=[],h.each(e.order,function(b,c){a.aaSorting.push(c[0]>=
d.length?[0,c[1]]:c)}));e.search!==k&&h.extend(a.oPreviousSearch,Bb(e.search));b=0;for(c=e.columns.length;b<c;b++){var f=e.columns[b];f.visible!==k&&(d[b].bVisible=f.visible);f.search!==k&&h.extend(a.aoPreSearchCols[b],Bb(f.search))}u(a,"aoStateLoaded","stateLoaded",[a,e])}}}function xa(a){var b=m.settings,a=h.inArray(a,G(b,"nTable"));return-1!==a?b[a]:null}function L(a,b,c,d){c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+
d);if(b)D.console&&console.log&&console.log(c);else if(b=m.ext,b=b.sErrMode||b.errMode,a&&u(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function E(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?E(a,b,d[0],d[1]):E(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Lb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==
e&&h.isArray(d)?d.slice():d);return a}function Wa(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function u(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,d),e.push(b.result));return e}function Sa(a){var b=a._iDisplayStart,
c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Na(a,b){var c=a.renderer,d=m.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"===typeof c?d[c]||d._:d._}function y(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ya(a,b){var c=[],c=Mb.numbers_length,d=Math.floor(c/2);b<=c?c=W(0,b):a<=d?(c=W(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=W(b-(c-2),b):(c=W(a-d+2,a+d-1),c.push("ellipsis"),
c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function db(a){h.each({num:function(b){return za(b,a)},"num-fmt":function(b){return za(b,a,Xa)},"html-num":function(b){return za(b,a,Aa)},"html-num-fmt":function(b){return za(b,a,Aa,Xa)}},function(b,c){v.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(v.type.search[b+a]=v.type.search.html)})}function Nb(a){return function(){var b=[xa(this[m.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return m.ext.internal[a].apply(this,
b)}}var m=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new r(xa(this[v.iApiIndex])):new r(this)};this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===k||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):
(""!==d.sX||""!==d.sY)&&ka(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===k||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===k?e.search(a,
c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),
[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return xa(this[v.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=
function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===k||e)&&h.columns.adjust();(d===k||d)&&h.draw();return 0};this.fnVersionCheck=v.fnVersionCheck;var b=this,c=a===k,d=this.length;c&&(a={});this.oApi=this.internal=v.internal;for(var e in m.ext.internal)e&&(this[e]=Nb(e));this.each(function(){var e={},e=1<d?Lb(e,a,!0):a,g=0,j,i=this.getAttribute("id"),n=!1,l=m.defaults,q=h(this);if("table"!=
this.nodeName.toLowerCase())L(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{eb(l);fb(l.column);K(l,l,!0);K(l.column,l.column,!0);K(l,h.extend(e,q.data()));var t=m.settings,g=0;for(j=t.length;g<j;g++){var p=t[g];if(p.nTable==this||p.nTHead.parentNode==this||p.nTFoot&&p.nTFoot.parentNode==this){g=e.bRetrieve!==k?e.bRetrieve:l.bRetrieve;if(c||g)return p.oInstance;if(e.bDestroy!==k?e.bDestroy:l.bDestroy){p.oInstance.fnDestroy();break}else{L(p,0,"Cannot reinitialise DataTable",3);
return}}if(p.sTableId==this.id){t.splice(g,1);break}}if(null===i||""===i)this.id=i="DataTables_Table_"+m.ext._unique++;var o=h.extend(!0,{},m.models.oSettings,{sDestroyWidth:q[0].style.width,sInstance:i,sTableId:i});o.nTable=this;o.oApi=b.internal;o.oInit=e;t.push(o);o.oInstance=1===b.length?b:q.dataTable();eb(e);e.oLanguage&&Da(e.oLanguage);e.aLengthMenu&&!e.iDisplayLength&&(e.iDisplayLength=h.isArray(e.aLengthMenu[0])?e.aLengthMenu[0][0]:e.aLengthMenu[0]);e=Lb(h.extend(!0,{},l),e);E(o.oFeatures,
e,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));E(o,e,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols",
"aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);E(o.oScroll,e,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);E(o.oLanguage,e,"fnInfoCallback");z(o,"aoDrawCallback",e.fnDrawCallback,"user");z(o,"aoServerParams",e.fnServerParams,"user");z(o,"aoStateSaveParams",e.fnStateSaveParams,"user");z(o,"aoStateLoadParams",e.fnStateLoadParams,"user");z(o,"aoStateLoaded",e.fnStateLoaded,"user");z(o,"aoRowCallback",e.fnRowCallback,
"user");z(o,"aoRowCreatedCallback",e.fnCreatedRow,"user");z(o,"aoHeaderCallback",e.fnHeaderCallback,"user");z(o,"aoFooterCallback",e.fnFooterCallback,"user");z(o,"aoInitComplete",e.fnInitComplete,"user");z(o,"aoPreDrawCallback",e.fnPreDrawCallback,"user");o.rowIdFn=Q(e.rowId);gb(o);i=o.oClasses;e.bJQueryUI?(h.extend(i,m.ext.oJUIClasses,e.oClasses),e.sDom===l.sDom&&"lfrtip"===l.sDom&&(o.sDom='<"H"lfr>t<"F"ip>'),o.renderer)?h.isPlainObject(o.renderer)&&!o.renderer.header&&(o.renderer.header="jqueryui"):
o.renderer="jqueryui":h.extend(i,m.ext.classes,e.oClasses);q.addClass(i.sTable);o.iInitDisplayStart===k&&(o.iInitDisplayStart=e.iDisplayStart,o._iDisplayStart=e.iDisplayStart);null!==e.iDeferLoading&&(o.bDeferLoading=!0,g=h.isArray(e.iDeferLoading),o._iRecordsDisplay=g?e.iDeferLoading[0]:e.iDeferLoading,o._iRecordsTotal=g?e.iDeferLoading[1]:e.iDeferLoading);var r=o.oLanguage;h.extend(!0,r,e.oLanguage);""!==r.sUrl&&(h.ajax({dataType:"json",url:r.sUrl,success:function(a){Da(a);K(l.oLanguage,a);h.extend(true,
r,a);ga(o)},error:function(){ga(o)}}),n=!0);null===e.asStripeClasses&&(o.asStripeClasses=[i.sStripeOdd,i.sStripeEven]);var g=o.asStripeClasses,v=q.children("tbody").find("tr").eq(0);-1!==h.inArray(!0,h.map(g,function(a){return v.hasClass(a)}))&&(h("tbody tr",this).removeClass(g.join(" ")),o.asDestroyStripes=g.slice());t=[];g=this.getElementsByTagName("thead");0!==g.length&&(da(o.aoHeader,g[0]),t=qa(o));if(null===e.aoColumns){p=[];g=0;for(j=t.length;g<j;g++)p.push(null)}else p=e.aoColumns;g=0;for(j=
p.length;g<j;g++)Ea(o,t?t[g]:null);ib(o,e.aoColumnDefs,p,function(a,b){ja(o,a,b)});if(v.length){var s=function(a,b){return a.getAttribute("data-"+b)!==null?b:null};h(v[0]).children("th, td").each(function(a,b){var c=o.aoColumns[a];if(c.mData===a){var d=s(b,"sort")||s(b,"order"),e=s(b,"filter")||s(b,"search");if(d!==null||e!==null){c.mData={_:a+".display",sort:d!==null?a+".@data-"+d:k,type:d!==null?a+".@data-"+d:k,filter:e!==null?a+".@data-"+e:k};ja(o,a)}}})}var w=o.oFeatures;e.bStateSave&&(w.bStateSave=
!0,Kb(o,e),z(o,"aoDrawCallback",wa,"state_save"));if(e.aaSorting===k){t=o.aaSorting;g=0;for(j=t.length;g<j;g++)t[g][1]=o.aoColumns[g].asSorting[0]}va(o);w.bSort&&z(o,"aoDrawCallback",function(){if(o.bSorted){var a=V(o),b={};h.each(a,function(a,c){b[c.src]=c.dir});u(o,null,"order",[o,a,b]);Jb(o)}});z(o,"aoDrawCallback",function(){(o.bSorted||y(o)==="ssp"||w.bDeferRender)&&va(o)},"sc");g=q.children("caption").each(function(){this._captionSide=q.css("caption-side")});j=q.children("thead");0===j.length&&
(j=h("<thead/>").appendTo(this));o.nTHead=j[0];j=q.children("tbody");0===j.length&&(j=h("<tbody/>").appendTo(this));o.nTBody=j[0];j=q.children("tfoot");if(0===j.length&&0<g.length&&(""!==o.oScroll.sX||""!==o.oScroll.sY))j=h("<tfoot/>").appendTo(this);0===j.length||0===j.children().length?q.addClass(i.sNoFooter):0<j.length&&(o.nTFoot=j[0],da(o.aoFooter,o.nTFoot));if(e.aaData)for(g=0;g<e.aaData.length;g++)N(o,e.aaData[g]);else(o.bDeferLoading||"dom"==y(o))&&ma(o,h(o.nTBody).children("tr"));o.aiDisplay=
o.aiDisplayMaster.slice();o.bInitialised=!0;!1===n&&ga(o)}});b=null;return this},v,r,p,s,Ya={},Ob=/[\r\n]/g,Aa=/<.*?>/g,ac=/^[\w\+\-]/,bc=/[\w\+\-]$/,cc=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Xa=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,M=function(a){return!a||!0===a||"-"===a?!0:!1},Pb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Qb=function(a,b){Ya[b]||(Ya[b]=RegExp(Qa(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,
"").replace(Ya[b],"."):a},Za=function(a,b,c){var d="string"===typeof a;if(M(a))return!0;b&&d&&(a=Qb(a,b));c&&d&&(a=a.replace(Xa,""));return!isNaN(parseFloat(a))&&isFinite(a)},Rb=function(a,b,c){return M(a)?!0:!(M(a)||"string"===typeof a)?null:Za(a.replace(Aa,""),b,c)?!0:null},G=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},ha=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&
e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},W=function(a,b){var c=[],d;b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Sb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},pa=function(a){var b=[],c,d,e=a.length,f,g=0;d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b};m.util={throttle:function(a,b){var c=b!==k?b:200,d,e;return function(){var b=this,g=+new Date,h=arguments;d&&g<d+c?(clearTimeout(e),
e=setTimeout(function(){d=k;a.apply(b,h)},c)):(d=g,a.apply(b,h))}},escapeRegex:function(a){return a.replace(cc,"\\$1")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ba=/\[.*?\]$/,U=/\(\)$/,Qa=m.util.escapeRegex,ua=h("<div>")[0],Zb=ua.textContent!==k,$b=/<.*?>/g,Oa=m.util.throttle,Tb=[],w=Array.prototype,dc=function(a){var b,c,d=m.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:
null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};r=function(a,b){if(!(this instanceof r))return new r(a,b);var c=[],d=function(a){(a=dc(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=pa(c);b&&h.merge(this,b);this.selector={rows:null,cols:null,opts:null};r.extend(this,this,Tb)};
m.Api=r;h.extend(r.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new r(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new r(this.context,b)},flatten:function(){var a=
[];return new r(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,g,h,i,n,l=this.context,m,t,p=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);g=0;for(h=l.length;g<h;g++){var o=new r(l[g]);if("table"===b)f=c.call(o,l[g],g),f!==k&&e.push(f);else if("columns"===b||"rows"===b)f=c.call(o,l[g],this[g],g),f!==k&&e.push(f);else if("column"===b||"column-rows"===
b||"row"===b||"cell"===b){t=this[g];"column-rows"===b&&(m=Ba(l[g],p.opts));i=0;for(n=t.length;i<n;i++)f=t[i],f="cell"===b?c.call(o,l[g],f.row,f.column,g,i):c.call(o,l[g],f,g,i,m),f!==k&&e.push(f)}}return e.length||d?(a=new r(l,a?e.concat.apply([],e):e),b=a.selector,b.rows=p.rows,b.cols=p.cols,b.opts=p.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=
0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new r(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return hb(this,a,b,0,this.length,1)},reduceRight:w.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},
unique:function(){return new r(this.context,pa(this))},unshift:w.unshift});r.extend=function(a,b,c){if(c.length&&b&&(b instanceof r||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);r.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]="function"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,r.extend(a,b[f.name],f.propExt)}};r.register=p=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<
d;c++)r.register(a[c],b);else for(var e=a.split("."),f=Tb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];var i;a:{i=0;for(var n=f.length;i<n;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:i.propExt}};r.registerPlural=s=function(a,b,c){r.register(a,c);r.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof r?a.length?h.isArray(a[0])?new r(a.context,
a[0]):a[0]:k:a})};p("tables()",function(a){var b;if(a){b=r;var c=this.context;if("number"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray();b=new b(a)}else b=this;return b});p("table()",function(a){var a=this.tables(a),b=a.context;return b.length?new r(b[0]):a});s("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});s("tables().body()","table().body()",
function(){return this.iterator("table",function(a){return a.nTBody},1)});s("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});s("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});s("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});p("draw()",function(a){return this.iterator("table",function(b){"page"===
a?O(b):("string"===typeof a&&(a="full-hold"===a?!1:!0),T(b,!1===a))})});p("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Ta(b,a)})});p("page.info()",function(){if(0===this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,
serverSide:"ssp"===y(a)}});p("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator("table",function(b){Ra(b,a)})});var Ub=function(a,b,c){if(c){var d=new r(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==y(a))T(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();ra(a,[],function(c){na(a);for(var c=sa(a,c),d=0,e=c.length;d<e;d++)N(a,c[d]);T(a,b);C(a,!1)})}};p("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
p("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});p("ajax.reload()",function(a,b){return this.iterator("table",function(c){Ub(c,!1===b,a)})});p("ajax.url()",function(a){var b=this.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});p("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Ub(c,
!1===b,a)})});var $a=function(a,b,c,d,e){var f=[],g,j,i,n,l,m;i=typeof b;if(!b||"string"===i||"function"===i||b.length===k)b=[b];i=0;for(n=b.length;i<n;i++){j=b[i]&&b[i].split?b[i].split(","):[b[i]];l=0;for(m=j.length;l<m;l++)(g=c("string"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g))}a=v.selector[a];if(a.length){i=0;for(n=a.length;i<n;i++)f=a[i](d,e,f)}return pa(f)},ab=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:"none",order:"current",
page:"all"},a)},bb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ba=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;d=b.order;e=b.page;if("ssp"==y(a))return"removed"===j?[]:W(0,c.length);if("current"==e){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===
h.inArray(a,g)?a:null});else if("index"==d||"original"==d){c=0;for(d=a.aoData.length;c<d;c++)"none"==j?f.push(c):(e=h.inArray(c,g),(-1===e&&"removed"==j||0<=e&&"applied"==j)&&f.push(c))}return f};p("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var e=b;return $a("row",a,function(a){var b=Pb(a);if(b!==null&&!e)return[b];var j=Ba(c,e);if(b!==null&&h.inArray(b,j)!==-1)return[b];if(!a)return j;if(typeof a==="function")return h.map(j,function(b){var e=
c.aoData[b];return a(b,e._aData,e.nTr)?b:null});b=Sb(ha(c.aoData,j,"nTr"));if(a.nodeName){if(a._DT_RowIndex!==k)return[a._DT_RowIndex];if(a._DT_CellIndex)return[a._DT_CellIndex.row];b=h(a).closest("*[data-dt-row]");return b.length?[b.data("dt-row")]:[]}if(typeof a==="string"&&a.charAt(0)==="#"){j=c.aIds[a.replace(/^#/,"")];if(j!==k)return[j.idx]}return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);c.selector.rows=a;c.selector.opts=b;return c});p("rows().nodes()",function(){return this.iterator("row",
function(a,b){return a.aoData[b].nTr||k},1)});p("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ha(a.aoData,b,"_aData")},1)});s("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)});s("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ca(b,c,a)})});s("rows().indexes()","row().index()",function(){return this.iterator("row",
function(a,b){return b},1)});s("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?"#":"")+h)}return new r(c,b)});s("rows().remove()","row().remove()",function(){var a=this;this.iterator("row",function(b,c,d){var e=b.aoData,f=e[c],g,h,i,n,l;e.splice(c,1);g=0;for(h=e.length;g<h;g++)if(i=e[g],l=i.anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l){i=0;for(n=
l.length;i<n;i++)l[i]._DT_CellIndex.row=g}oa(b.aiDisplayMaster,c);oa(b.aiDisplay,c);oa(a[d],c,!1);Sa(b);c=b.rowIdFn(f._aData);c!==k&&delete b.aIds[c]});this.iterator("table",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c});return this});p("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ma(b,c)[0]):h.push(N(b,c));return h},1),c=this.rows(-1);c.pop();h.merge(c,b);
return c});p("row()",function(a,b){return bb(this.rows(a,b))});p("row().data()",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;b[0].aoData[this[0]]._aData=a;ca(b[0],this[0],"data");return this});p("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});p("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?
ma(b,a)[0]:N(b,a)});return this.row(b[0])});var cb=function(a,b){var c=a.context;if(c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details)c._details.remove(),c._detailsShow=k,c._details=k},Vb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new r(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<G(g,"_details").length&&(f.on("draw.dt.DT_details",
function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=aa(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&cb(f,c)}))}}};p("row().child()",function(a,b){var c=this.context;if(a===k)return c.length&&this.length?
c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)cb(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?e.push(a):(c=h("<tr><td/></tr>").addClass(b),h("td",c).addClass(b).html(a)[0].colSpan=aa(d),e.push(c[0]))};f(a,b);c._details&&c._details.remove();c._details=h(e);c._detailsShow&&c._details.insertAfter(c.nTr)}return this});
p(["row().child.show()","row().child().show()"],function(){Vb(this,!0);return this});p(["row().child.hide()","row().child().hide()"],function(){Vb(this,!1);return this});p(["row().child.remove()","row().child().remove()"],function(){cb(this);return this});p("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var ec=/^(.+):(name|visIdx|visible)$/,Wb=function(a,b,c,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(B(a,e[d],b));
return c};p("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var e=a,f=b,g=c.aoColumns,j=G(g,"sName"),i=G(g,"nTh");return $a("column",e,function(a){var b=Pb(a);if(a==="")return W(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a==="function"){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Wb(c,f,0,0,e),i[f])?f:null})}var k=typeof a==="string"?a.match(ec):"";if(k)switch(k[2]){case "visIdx":case "visible":b=parseInt(k[1],
10);if(b<0){var m=h.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+b]]}return[Z(c,b)];case "name":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}if(a.nodeName&&a._DT_CellIndex)return[a._DT_CellIndex.column];b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray();if(b.length||!a.nodeName)return b;b=h(a).closest("*[data-dt-column]");return b.length?[b.data("dt-column")]:[]},c,f)},1);c.selector.cols=a;c.selector.opts=b;return c});s("columns().header()",
"column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});s("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});s("columns().data()","column().data()",function(){return this.iterator("column-rows",Wb,1)});s("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});s("columns().cache()","column().cache()",
function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ha(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});s("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ha(a.aoData,e,"anCells",b)},1)});s("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var f=b.aoColumns,g=f[c],j=b.aoData,i,n,l;if(a!==k&&g.bVisible!==a){if(a){var m=
h.inArray(!0,G(f,"bVisible"),c+1);i=0;for(n=j.length;i<n;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[m]||null)}else h(G(b.aoData,"anCells",c)).detach();g.bVisible=a;ea(b,b.aoHeader);ea(b,b.aoFooter);wa(b)}});a!==k&&(this.iterator("column",function(c,e){u(c,null,"column-visibility",[c,e,a,b])}),(b===k||b)&&this.columns.adjust());return c});s("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?$(b,c):c},1)});p("columns.adjust()",
function(){return this.iterator("table",function(a){Y(a)},1)});p("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return Z(c,b);if("fromData"===a||"toVisible"===a)return $(c,b)}});p("column()",function(a,b){return bb(this.columns(a,b))});p("cells()",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));h.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator("table",function(b){var d=a,e=ab(c),f=
b.aoData,g=Ba(b,e),j=Sb(ha(f,g,"anCells")),i=h([].concat.apply([],j)),l,n=b.aoColumns.length,m,p,r,u,v,s;return $a("cell",d,function(a){var c=typeof a==="function";if(a===null||a===k||c){m=[];p=0;for(r=g.length;p<r;p++){l=g[p];for(u=0;u<n;u++){v={row:l,column:u};if(c){s=f[l];a(v,B(b,l,u),s.anCells?s.anCells[u]:null)&&m.push(v)}else m.push(v)}}return m}if(h.isPlainObject(a))return[a];c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||
!a.nodeName)return c;s=h(a).closest("*[data-dt-row]");return s.length?[{row:s.data("dt-row"),column:s.data("dt-column")}]:[]},b,e)});var d=this.columns(b,c),e=this.rows(a,c),f,g,j,i,n,l=this.iterator("table",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(n=d[b].length;i<n;i++)f.push({row:e[b][g],column:d[b][i]})}return f},1);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});s("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&
a.anCells?a.anCells[c]:k},1)});p("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)});s("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});s("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return B(b,c,d,a)},1)});s("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:$(a,c)}},1)});s("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){ca(b,c,a,d)})});p("cell()",function(a,b,c){return bb(this.cells(a,b,c))});p("cell().data()",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?B(b[0],c[0].row,c[0].column):k;jb(b[0],c[0].row,c[0].column,a);ca(b[0],c[0].row,"data",c[0].column);return this});p("order()",function(a,b){var c=this.context;if(a===k)return 0!==
c.length?c[0].aaSorting:k;"number"===typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});p("order.listener()",function(a,b,c){return this.iterator("table",function(d){Ma(d,a,b,c)})});p("order.fixed()",function(a){if(!a){var b=this.context,b=b.length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}return this.iterator("table",function(b){b.aaSortingFixed=h.extend(!0,{},a)})});p(["columns().order()",
"column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});p("search()",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator("table",function(e){e.oFeatures.bFilter&&fa(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});s("columns().search()","column().search()",function(a,
b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),fa(e,e.oPreviousSearch,1))})});p("state()",function(){return this.context.length?this.context[0].oSavedState:null});p("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});p("state.loaded()",function(){return this.context.length?
this.context[0].oLoadedState:null});p("state.save()",function(){return this.iterator("table",function(a){wa(a)})});m.versionCheck=m.fnVersionCheck=function(a){for(var b=m.version.split("."),a=a.split("."),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};m.isDataTable=m.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;h.each(m.settings,function(a,e){var f=e.nScrollHead?h("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?h("table",e.nScrollFoot)[0]:
null;if(e.nTable===b||f===b||g===b)c=!0});return c};m.tables=m.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(m.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable});return b?new r(c):c};m.camelToHungarian=K;p("$()",function(a,b){var c=this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each(["on","one","off"],function(a,b){p(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||
(a[0]+=".dt");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});p("clear()",function(){return this.iterator("table",function(a){na(a)})});p("settings()",function(){return new r(this.context,this.context)});p("init()",function(){var a=this.context;return a.length?a[0].oInit:null});p("data()",function(){return this.iterator("table",function(a){return G(a.aoData,"_aData")}).flatten()});p("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,
d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),p;b.bDestroying=!0;u(b,"aoDestroyCallback","destroy",[b]);a||(new r(b)).columns().visible(!0);k.unbind(".DT").find(":not(tbody *)").unbind(".DT");h(D).unbind(".DT-"+b.sInstance);e!=g.parentNode&&(i.children("thead").detach(),i.append(g));j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j));b.aaSorting=[];b.aaSortingFixed=[];va(b);h(l).removeClass(b.asStripeClasses.join(" "));
h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);b.bJUI&&(h("th span."+d.sSortIcon+", td span."+d.sSortIcon,g).detach(),h("th, td",g).each(function(){var a=h("div."+d.sSortJUIWrapper,this);h(this).append(a.contents());a.detach()}));f.children().detach();f.append(l);g=a?"remove":"detach";i[g]();k[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css("width",b.sDestroyWidth).removeClass(d.sTable),(p=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%
p])}));c=h.inArray(b,m.settings);-1!==c&&m.settings.splice(c,1)})});h.each(["column","row","cell"],function(a,b){p(b+"s().every()",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,n){a.call(e[b](g,"cell"===b?h:d,"cell"===b?d:k),g,h,i,n)})})});p("i18n()",function(a,b,c){var d=this.context[0],a=Q(a)(d.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:a._);return a.replace("%d",c)});m.version="1.10.12";m.settings=[];m.models={};m.models.oSearch={bCaseInsensitive:!0,
sSearch:"",bRegex:!1,bSmart:!0};m.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};m.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,
sTitle:null,sType:null,sWidth:null,sWidthOrig:null};m.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,
fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===
a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",
sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},m.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",
renderer:null,rowId:"DT_RowId"};X(m.defaults);m.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};X(m.defaults.column);m.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,
bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],
aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,
fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==y(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=
this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};m.ext=v={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},
header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:m.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:m.version};h.extend(v,{afnFiltering:v.search,aTypes:v.type.detect,ofnSearch:v.type.search,oSort:v.type.order,afnSortData:v.order,aoFeatures:v.feature,oApi:v.internal,oStdClasses:v.classes,oPagination:v.pager});h.extend(m.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",
sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",
sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Ca="",Ca="",H=Ca+"ui-state-default",ia=Ca+"css_right ui-icon ui-icon-",Xb=Ca+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";h.extend(m.ext.oJUIClasses,
m.ext.classes,{sPageButton:"fg-button ui-button "+H,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:H+" sorting_asc",sSortDesc:H+" sorting_desc",sSortable:H+" sorting",sSortableAsc:H+" sorting_asc_disabled",sSortableDesc:H+" sorting_desc_disabled",sSortableNone:H+" sorting_disabled",sSortJUIAsc:ia+"triangle-1-n",sSortJUIDesc:ia+"triangle-1-s",sSortJUI:ia+"carat-2-n-s",
sSortJUIAscAllowed:ia+"carat-1-n",sSortJUIDescAllowed:ia+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+H,sScrollFoot:"dataTables_scrollFoot "+H,sHeaderTH:H,sFooterTH:H,sJUIHeader:Xb+" ui-corner-tl ui-corner-tr",sJUIFooter:Xb+" ui-corner-bl ui-corner-br"});var Mb=m.ext.pager;h.extend(Mb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(a,b){return[ya(a,
b)]},simple_numbers:function(a,b){return["previous",ya(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ya(a,b),"next","last"]},_numbers:ya,numbers_length:7});h.extend(!0,m.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},k,l,m=0,p=function(b,d){var o,r,u,s,v=function(b){Ta(a,b.data.action,true)};o=0;for(r=d.length;o<r;o++){s=d[o];if(h.isArray(s)){u=h("<"+(s.DT_el||"div")+"/>").appendTo(b);p(u,s)}else{k=null;
l="";switch(s){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":k=j.sFirst;l=s+(e>0?"":" "+g.sPageButtonDisabled);break;case "previous":k=j.sPrevious;l=s+(e>0?"":" "+g.sPageButtonDisabled);break;case "next":k=j.sNext;l=s+(e<f-1?"":" "+g.sPageButtonDisabled);break;case "last":k=j.sLast;l=s+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:k=s+1;l=e===s?g.sPageButtonActive:""}if(k!==null){u=h("<a>",{"class":g.sPageButton+" "+l,"aria-controls":a.sTableId,"aria-label":i[s],
"data-dt-idx":m,tabindex:a.iTabIndex,id:c===0&&typeof s==="string"?a.sTableId+"_"+s:null}).html(k).appendTo(b);Wa(u,{action:s},v);m++}}}},r;try{r=h(b).find(I.activeElement).data("dt-idx")}catch(o){}p(h(b).empty(),d);r&&h(b).find("[data-dt-idx="+r+"]").focus()}}});h.extend(m.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&(!ac.test(a)||!bc.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||M(a)?"date":
null},function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Rb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Rb(a,c,!0)?"html-num-fmt"+c:null},function(a){return M(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);h.extend(m.ext.type.search,{html:function(a){return M(a)?a:"string"===typeof a?a.replace(Ob," ").replace(Aa,""):""},string:function(a){return M(a)?a:"string"===typeof a?a.replace(Ob,
" "):a}});var za=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Qb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};h.extend(v.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return M(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return M(a)?"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,
b){return a<b?1:a>b?-1:0}});db("");h.extend(!0,m.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,b,c,d){h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on("order.dt.DT",function(e,
f,g,h){if(a===f){e=c.idx;b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass);b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass(h[e]=="asc"?d.sSortJUIAsc:h[e]=="desc"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});var Yb=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};m.render={number:function(a,
b,c,d,e){return{display:function(f){if("number"!==typeof f&&"string"!==typeof f)return f;var g=0>f?"-":"",h=parseFloat(f);if(isNaN(h))return Yb(f);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):"";return g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+f+(e||"")}}},text:function(){return{display:Yb}}};h.extend(m.ext.internal,{_fnExternApiFunc:Nb,_fnBuildAjax:ra,_fnAjaxUpdate:lb,_fnAjaxParameters:ub,_fnAjaxUpdateDraw:vb,_fnAjaxDataSrc:sa,_fnAddColumn:Ea,_fnColumnOptions:ja,
_fnAdjustColumnSizing:Y,_fnVisibleToColumnIndex:Z,_fnColumnIndexToVisible:$,_fnVisbleColumns:aa,_fnGetColumns:la,_fnColumnTypes:Ga,_fnApplyColumnDefs:ib,_fnHungarianMap:X,_fnCamelToHungarian:K,_fnLanguageCompat:Da,_fnBrowserDetect:gb,_fnAddData:N,_fnAddTr:ma,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:jb,_fnSplitObjNotation:Ja,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:R,
_fnGetDataMaster:Ka,_fnClearTable:na,_fnDeleteIndex:oa,_fnInvalidate:ca,_fnGetRowElements:Ia,_fnCreateTr:Ha,_fnBuildHead:kb,_fnDrawHead:ea,_fnDraw:O,_fnReDraw:T,_fnAddOptionsHtml:nb,_fnDetectHeader:da,_fnGetUniqueThs:qa,_fnFeatureHtmlFilter:pb,_fnFilterComplete:fa,_fnFilterCustom:yb,_fnFilterColumn:xb,_fnFilter:wb,_fnFilterCreateSearch:Pa,_fnEscapeRegex:Qa,_fnFilterData:zb,_fnFeatureHtmlInfo:sb,_fnUpdateInfo:Cb,_fnInfoMacros:Db,_fnInitialise:ga,_fnInitComplete:ta,_fnLengthChange:Ra,_fnFeatureHtmlLength:ob,
_fnFeatureHtmlPaginate:tb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:qb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:rb,_fnScrollDraw:ka,_fnApplyToChildren:J,_fnCalculateColumnWidths:Fa,_fnThrottle:Oa,_fnConvertToWidth:Fb,_fnGetWidestNode:Gb,_fnGetMaxLenString:Hb,_fnStringToCss:x,_fnSortFlatten:V,_fnSort:mb,_fnSortAria:Jb,_fnSortListener:Va,_fnSortAttachListener:Ma,_fnSortingClasses:va,_fnSortData:Ib,_fnSaveState:wa,_fnLoadState:Kb,_fnSettingsFromNode:xa,_fnLog:L,_fnMap:E,_fnBindAction:Wa,_fnCallbackReg:z,
_fnCallbackFire:u,_fnLengthOverflow:Sa,_fnRenderer:Na,_fnDataSource:y,_fnRowAttributes:La,_fnCalculateEnd:function(){}});h.fn.dataTable=m;m.$=h;h.fn.dataTableSettings=m.settings;h.fn.dataTableExt=m.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};h.each(m,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable});

/*!
 DataTables Bootstrap 3 integration
 2011-2015 SpryMedia Ltd - datatables.net/license
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(a){return b(a,window,document)}):"object"===typeof exports?module.exports=function(a,d){a||(a=window);if(!d||!d.fn.dataTable)d=require("datatables.net")(a,d).$;return b(d,a,a.document)}:b(jQuery,window,document)})(function(b,a,d){var f=b.fn.dataTable;b.extend(!0,f.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});b.extend(f.ext.classes,
{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"});f.ext.renderer.pageButton.bootstrap=function(a,h,r,m,j,n){var o=new f.Api(a),s=a.oClasses,k=a.oLanguage.oPaginate,t=a.oLanguage.oAria.paginate||{},e,g,p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault();!b(a.currentTarget).hasClass("disabled")&&o.page()!=a.data.action&&o.page(a.data.action).draw("page")};
l=0;for(h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{g=e="";switch(c){case "ellipsis":e="&#x2026;";g="disabled";break;case "first":e=k.sFirst;g=c+(0<j?"":" disabled");break;case "previous":e=k.sPrevious;g=c+(0<j?"":" disabled");break;case "next":e=k.sNext;g=c+(j<n-1?"":" disabled");break;case "last":e=k.sLast;g=c+(j<n-1?"":" disabled");break;default:e=c+1,g=j===c?"active":""}e&&(i=b("<li>",{"class":s.sPageButton+" "+g,id:0===r&&"string"===typeof c?a.sTableId+"_"+c:null}).append(b("<a>",{href:"#",
"aria-controls":a.sTableId,"aria-label":t[c],"data-dt-idx":p,tabindex:a.iTabIndex}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}},i;try{i=b(h).find(d.activeElement).data("dt-idx")}catch(u){}q(b(h).empty().html('<ul class="pagination"/>').children("ul"),m);i&&b(h).find("[data-dt-idx="+i+"]").focus()};return f});
/*!
 Buttons for DataTables 1.2.2
 2016 SpryMedia Ltd - datatables.net/license
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(n){return d(n,window,document)}):"object"===typeof exports?module.exports=function(n,o){n||(n=window);if(!o||!o.fn.dataTable)o=require("datatables.net")(n,o).$;return d(o,n,n.document)}:d(jQuery,window,document)})(function(d,n,o,m){var i=d.fn.dataTable,u=0,v=0,j=i.ext.buttons,l=function(a,b){!0===b&&(b={});d.isArray(b)&&(b={buttons:b});this.c=d.extend(!0,{},l.defaults,b);b.buttons&&(this.c.buttons=b.buttons);
this.s={dt:new i.Api(a),buttons:[],listenKeys:"",namespace:"dtb"+u++};this.dom={container:d("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};d.extend(l.prototype,{action:function(a,b){var c=this._nodeToButton(a);if(b===m)return c.conf.action;c.conf.action=b;return this},active:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.button.active,c=d(c.node);if(b===m)return c.hasClass(e);c.toggleClass(e,b===m?!0:b);return this},add:function(a,b){var c=
this.s.buttons;if("string"===typeof b){for(var e=b.split("-"),c=this.s,d=0,h=e.length-1;d<h;d++)c=c.buttons[1*e[d]];c=c.buttons;b=1*e[e.length-1]}this._expandButton(c,a,!1,b);this._draw();return this},container:function(){return this.dom.container},disable:function(a){a=this._nodeToButton(a);d(a.node).addClass(this.c.dom.button.disabled);return this},destroy:function(){d("body").off("keyup."+this.s.namespace);var a=this.s.buttons.slice(),b,c;b=0;for(c=a.length;b<c;b++)this.remove(a[b].node);this.dom.container.remove();
a=this.s.dt.settings()[0];b=0;for(c=a.length;b<c;b++)if(a.inst===this){a.splice(b,1);break}return this},enable:function(a,b){if(!1===b)return this.disable(a);var c=this._nodeToButton(a);d(c.node).removeClass(this.c.dom.button.disabled);return this},name:function(){return this.c.name},node:function(a){a=this._nodeToButton(a);return d(a.node)},remove:function(a){var b=this._nodeToButton(a),c=this._nodeToHost(a),e=this.s.dt;if(b.buttons.length)for(var g=b.buttons.length-1;0<=g;g--)this.remove(b.buttons[g].node);
b.conf.destroy&&b.conf.destroy.call(e.button(a),e,d(a),b.conf);this._removeKey(b.conf);d(b.node).remove();a=d.inArray(b,c);c.splice(a,1);return this},text:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.collection.buttonLiner,e=c.inCollection&&e&&e.tag?e.tag:this.c.dom.buttonLiner.tag,g=this.s.dt,h=d(c.node),f=function(a){return"function"===typeof a?a(g,h,c.conf):a};if(b===m)return f(c.conf.text);c.conf.text=b;e?h.children(e).html(f(b)):h.html(f(b));return this},_constructor:function(){var a=
this,b=this.s.dt,c=b.settings()[0],e=this.c.buttons;c._buttons||(c._buttons=[]);c._buttons.push({inst:this,name:this.c.name});for(var c=0,g=e.length;c<g;c++)this.add(e[c]);b.on("destroy",function(){a.destroy()});d("body").on("keyup."+this.s.namespace,function(b){if(!o.activeElement||o.activeElement===o.body){var c=String.fromCharCode(b.keyCode).toLowerCase();a.s.listenKeys.toLowerCase().indexOf(c)!==-1&&a._keypress(c,b)}})},_addKey:function(a){a.key&&(this.s.listenKeys+=d.isPlainObject(a.key)?a.key.key:
a.key)},_draw:function(a,b){a||(a=this.dom.container,b=this.s.buttons);a.children().detach();for(var c=0,e=b.length;c<e;c++)a.append(b[c].inserter),b[c].buttons&&b[c].buttons.length&&this._draw(b[c].collection,b[c].buttons)},_expandButton:function(a,b,c,e){for(var g=this.s.dt,h=0,b=!d.isArray(b)?[b]:b,f=0,r=b.length;f<r;f++){var k=this._resolveExtends(b[f]);if(k)if(d.isArray(k))this._expandButton(a,k,c,e);else{var p=this._buildButton(k,c);if(p){e!==m?(a.splice(e,0,p),e++):a.push(p);if(p.conf.buttons){var s=
this.c.dom.collection;p.collection=d("<"+s.tag+"/>").addClass(s.className);p.conf._collection=p.collection;this._expandButton(p.buttons,p.conf.buttons,!0,e)}k.init&&k.init.call(g.button(p.node),g,d(p.node),k);h++}}}},_buildButton:function(a,b){var c=this.c.dom.button,e=this.c.dom.buttonLiner,g=this.c.dom.collection,h=this.s.dt,f=function(b){return"function"===typeof b?b(h,k,a):b};b&&g.button&&(c=g.button);b&&g.buttonLiner&&(e=g.buttonLiner);if(a.available&&!a.available(h,a))return!1;var r=function(a,
b,c,e){e.action.call(b.button(c),a,b,c,e);d(b.table().node()).triggerHandler("buttons-action.dt",[b.button(c),b,c,e])},k=d("<"+c.tag+"/>").addClass(c.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(b){b.preventDefault();!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a);k.blur()}).on("keyup.dtb",function(b){b.keyCode===13&&!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a)});"a"===c.tag.toLowerCase()&&k.attr("href","#");
e.tag?(g=d("<"+e.tag+"/>").html(f(a.text)).addClass(e.className),"a"===e.tag.toLowerCase()&&g.attr("href","#"),k.append(g)):k.html(f(a.text));!1===a.enabled&&k.addClass(c.disabled);a.className&&k.addClass(a.className);a.titleAttr&&k.attr("title",a.titleAttr);a.namespace||(a.namespace=".dt-button-"+v++);e=(e=this.c.dom.buttonContainer)&&e.tag?d("<"+e.tag+"/>").addClass(e.className).append(k):k;this._addKey(a);return{conf:a,node:k.get(0),inserter:e,buttons:[],inCollection:b,collection:null}},_nodeToButton:function(a,
b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b[c];if(b[c].buttons.length){var d=this._nodeToButton(a,b[c].buttons);if(d)return d}}},_nodeToHost:function(a,b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b;if(b[c].buttons.length){var d=this._nodeToHost(a,b[c].buttons);if(d)return d}}},_keypress:function(a,b){var c=function(e){for(var g=0,h=e.length;g<h;g++){var f=e[g].conf,r=e[g].node;if(f.key)if(f.key===a)d(r).click();else if(d.isPlainObject(f.key)&&
f.key.key===a&&(!f.key.shiftKey||b.shiftKey))if(!f.key.altKey||b.altKey)if(!f.key.ctrlKey||b.ctrlKey)(!f.key.metaKey||b.metaKey)&&d(r).click();e[g].buttons.length&&c(e[g].buttons)}};c(this.s.buttons)},_removeKey:function(a){if(a.key){var b=d.isPlainObject(a.key)?a.key.key:a.key,a=this.s.listenKeys.split(""),b=d.inArray(b,a);a.splice(b,1);this.s.listenKeys=a.join("")}},_resolveExtends:function(a){for(var b=this.s.dt,c,e,g=function(c){for(var e=0;!d.isPlainObject(c)&&!d.isArray(c);){if(c===m)return;
if("function"===typeof c){if(c=c(b,a),!c)return!1}else if("string"===typeof c){if(!j[c])throw"Unknown button type: "+c;c=j[c]}e++;if(30<e)throw"Buttons: Too many iterations";}return d.isArray(c)?c:d.extend({},c)},a=g(a);a&&a.extend;){if(!j[a.extend])throw"Cannot extend unknown button type: "+a.extend;var h=g(j[a.extend]);if(d.isArray(h))return h;if(!h)return!1;c=h.className;a=d.extend({},h,a);c&&a.className!==c&&(a.className=c+" "+a.className);var f=a.postfixButtons;if(f){a.buttons||(a.buttons=[]);
c=0;for(e=f.length;c<e;c++)a.buttons.push(f[c]);a.postfixButtons=null}if(f=a.prefixButtons){a.buttons||(a.buttons=[]);c=0;for(e=f.length;c<e;c++)a.buttons.splice(c,0,f[c]);a.prefixButtons=null}a.extend=h.extend}return a}});l.background=function(a,b,c){c===m&&(c=400);a?d("<div/>").addClass(b).css("display","none").appendTo("body").fadeIn(c):d("body > div."+b).fadeOut(c,function(){d(this).removeClass(b).remove()})};l.instanceSelector=function(a,b){if(!a)return d.map(b,function(a){return a.inst});var c=
[],e=d.map(b,function(a){return a.name}),g=function(a){if(d.isArray(a))for(var f=0,r=a.length;f<r;f++)g(a[f]);else"string"===typeof a?-1!==a.indexOf(",")?g(a.split(",")):(a=d.inArray(d.trim(a),e),-1!==a&&c.push(b[a].inst)):"number"===typeof a&&c.push(b[a].inst)};g(a);return c};l.buttonSelector=function(a,b){for(var c=[],e=function(a,b,c){for(var d,g,f=0,h=b.length;f<h;f++)if(d=b[f])g=c!==m?c+f:f+"",a.push({node:d.node,name:d.conf.name,idx:g}),d.buttons&&e(a,d.buttons,g+"-")},g=function(a,b){var f,
h,i=[];e(i,b.s.buttons);f=d.map(i,function(a){return a.node});if(d.isArray(a)||a instanceof d){f=0;for(h=a.length;f<h;f++)g(a[f],b)}else if(null===a||a===m||"*"===a){f=0;for(h=i.length;f<h;f++)c.push({inst:b,node:i[f].node})}else if("number"===typeof a)c.push({inst:b,node:b.s.buttons[a].node});else if("string"===typeof a)if(-1!==a.indexOf(",")){i=a.split(",");f=0;for(h=i.length;f<h;f++)g(d.trim(i[f]),b)}else if(a.match(/^\d+(\-\d+)*$/))f=d.map(i,function(a){return a.idx}),c.push({inst:b,node:i[d.inArray(a,
f)].node});else if(-1!==a.indexOf(":name")){var j=a.replace(":name","");f=0;for(h=i.length;f<h;f++)i[f].name===j&&c.push({inst:b,node:i[f].node})}else d(f).filter(a).each(function(){c.push({inst:b,node:this})});else"object"===typeof a&&a.nodeName&&(i=d.inArray(a,f),-1!==i&&c.push({inst:b,node:f[i]}))},h=0,f=a.length;h<f;h++)g(b,a[h]);return c};l.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},
button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};l.version="1.2.2";d.extend(j,{collection:{text:function(a){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(a,b,c,e){var a=c.offset(),g=d(b.table().container()),h=!1;d("div.dt-button-background").length&&(h=d("div.dt-button-collection").offset(),d("body").trigger("click.dtb-collection"));e._collection.addClass(e.collectionLayout).css("display",
"none").appendTo("body").fadeIn(e.fade);var f=e._collection.css("position");h&&"absolute"===f?e._collection.css({top:h.top+5,left:h.left+5}):"absolute"===f?(e._collection.css({top:a.top+c.outerHeight(),left:a.left}),c=a.left+e._collection.outerWidth(),g=g.offset().left+g.width(),c>g&&e._collection.css("left",a.left-(c-g))):(a=e._collection.height()/2,a>d(n).height()/2&&(a=d(n).height()/2),e._collection.css("marginTop",-1*a));e.background&&l.background(!0,e.backgroundClassName,e.fade);setTimeout(function(){d("div.dt-button-background").on("click.dtb-collection",
function(){});d("body").on("click.dtb-collection",function(a){var c=d.fn.addBack?"addBack":"andSelf";if(!d(a.target).parents()[c]().filter(e._collection).length){e._collection.fadeOut(e.fade,function(){e._collection.detach()});d("div.dt-button-background").off("click.dtb-collection");l.background(false,e.backgroundClassName,e.fade);d("body").off("click.dtb-collection");b.off("buttons-action.b-internal")}})},10);if(e.autoClose)b.on("buttons-action.b-internal",function(){d("div.dt-button-background").click()})},
background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(a,b){if(j.copyHtml5)return"copyHtml5";if(j.copyFlash&&j.copyFlash.available(a,b))return"copyFlash"},csv:function(a,b){if(j.csvHtml5&&j.csvHtml5.available(a,b))return"csvHtml5";if(j.csvFlash&&j.csvFlash.available(a,b))return"csvFlash"},excel:function(a,b){if(j.excelHtml5&&j.excelHtml5.available(a,b))return"excelHtml5";if(j.excelFlash&&j.excelFlash.available(a,b))return"excelFlash"},pdf:function(a,
b){if(j.pdfHtml5&&j.pdfHtml5.available(a,b))return"pdfHtml5";if(j.pdfFlash&&j.pdfFlash.available(a,b))return"pdfFlash"},pageLength:function(a){var a=a.settings()[0].aLengthMenu,b=d.isArray(a[0])?a[0]:a,c=d.isArray(a[0])?a[1]:a,e=function(a){return a.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},a.page.len())};return{extend:"collection",text:e,className:"buttons-page-length",autoClose:!0,buttons:d.map(b,function(a,b){return{text:c[b],action:function(b,c){c.page.len(a).draw()},init:function(b,
c,e){var d=this,c=function(){d.active(b.page.len()===a)};b.on("length.dt"+e.namespace,c);c()},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}),init:function(a,b,c){var d=this;a.on("length.dt"+c.namespace,function(){d.text(e(a))})},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}});i.Api.register("buttons()",function(a,b){b===m&&(b=a,a=m);this.selector.buttonGroup=a;var c=this.iterator(!0,"table",function(c){if(c._buttons)return l.buttonSelector(l.instanceSelector(a,c._buttons),
b)},!0);c._groupSelector=a;return c});i.Api.register("button()",function(a,b){var c=this.buttons(a,b);1<c.length&&c.splice(1,c.length);return c});i.Api.registerPlural("buttons().active()","button().active()",function(a){return a===m?this.map(function(a){return a.inst.active(a.node)}):this.each(function(b){b.inst.active(b.node,a)})});i.Api.registerPlural("buttons().action()","button().action()",function(a){return a===m?this.map(function(a){return a.inst.action(a.node)}):this.each(function(b){b.inst.action(b.node,
a)})});i.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.node,a)})});i.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.node)})});i.Api.registerPlural("buttons().nodes()","button().node()",function(){var a=d();d(this.each(function(b){a=a.add(b.inst.node(b.node))}));return a});i.Api.registerPlural("buttons().text()","button().text()",function(a){return a===m?this.map(function(a){return a.inst.text(a.node)}):
this.each(function(b){b.inst.text(b.node,a)})});i.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.node).trigger("click")})});i.Api.registerPlural("buttons().containers()","buttons().container()",function(){var a=d(),b=this._groupSelector;this.iterator(!0,"table",function(c){if(c._buttons)for(var c=l.instanceSelector(b,c._buttons),d=0,g=c.length;d<g;d++)a=a.add(c[d].container())});return a});i.Api.register("button().add()",function(a,
b){var c=this.context;c.length&&(c=l.instanceSelector(this._groupSelector,c[0]._buttons),c.length&&c[0].add(b,a));return this.button(this._groupSelector,a)});i.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(a){a.destroy()});return this});i.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(a){a.inst.remove(a.node)});return this});var q;i.Api.register("buttons.info()",function(a,b,c){var e=this;if(!1===a)return d("#datatables_buttons_info").fadeOut(function(){d(this).remove()}),
clearTimeout(q),q=null,this;q&&clearTimeout(q);d("#datatables_buttons_info").length&&d("#datatables_buttons_info").remove();d('<div id="datatables_buttons_info" class="dt-button-info"/>').html(a?"<h2>"+a+"</h2>":"").append(d("<div/>")["string"===typeof b?"html":"append"](b)).css("display","none").appendTo("body").fadeIn();c!==m&&0!==c&&(q=setTimeout(function(){e.buttons.info(!1)},c));return this});i.Api.register("buttons.exportData()",function(a){if(this.context.length){for(var b=new i.Api(this.context[0]),
c=d.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(a){return e(a)},footer:function(a){return e(a)},body:function(a){return e(a)}}},a),e=function(a){if("string"!==typeof a)return a;c.stripHtml&&(a=a.replace(/<[^>]*>/g,""));c.trim&&(a=a.replace(/^\s+|\s+$/g,""));c.stripNewlines&&(a=a.replace(/\n/g," "));c.decodeEntities&&(t.innerHTML=a,a=t.value);return a},a=b.columns(c.columns).indexes().map(function(a){var d=
b.column(a).header();return c.format.header(d.innerHTML,a,d)}).toArray(),g=b.table().footer()?b.columns(c.columns).indexes().map(function(a){var d=b.column(a).footer();return c.format.footer(d?d.innerHTML:"",a,d)}).toArray():null,h=b.rows(c.rows,c.modifier).indexes().toArray(),f=b.cells(h,c.columns).render(c.orthogonal).toArray(),h=b.cells(h,c.columns).nodes().toArray(),j=a.length,k=0<j?f.length/j:0,l=Array(k),m=0,n=0;n<k;n++){for(var o=Array(j),q=0;q<j;q++)o[q]=c.format.body(f[m],n,q,h[m]),m++;l[n]=
o}return{header:a,footer:g,body:l}}});var t=d("<textarea/>")[0];d.fn.dataTable.Buttons=l;d.fn.DataTable.Buttons=l;d(o).on("init.dt plugin-init.dt",function(a,b){if("dt"===a.namespace){var c=b.oInit.buttons||i.defaults.buttons;c&&!b._buttons&&(new l(b,c)).container()}});i.ext.feature.push({fnInit:function(a){var a=new i.Api(a),b=a.init().buttons||i.defaults.buttons;return(new l(a,b)).container()},cFeature:"B"});return l});
(function(g){"function"===typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],function(d){return g(d,window,document)}):"object"===typeof exports?module.exports=function(d,e){d||(d=window);if(!e||!e.fn.dataTable)e=require("datatables.net")(d,e).$;e.fn.dataTable.Buttons||require("datatables.net-buttons")(d,e);return g(e,d,d.document)}:g(jQuery,window,document)})(function(g,d,e,h){d=g.fn.dataTable;g.extend(d.ext.buttons,{colvis:function(a,b){return{extend:"collection",
text:function(a){return a.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:b.columns}]}},columnsToggle:function(a,b){return a.columns(b.columns).indexes().map(function(a){return{extend:"columnToggle",columns:a}}).toArray()},columnToggle:function(a,b){return{extend:"columnVisibility",columns:b.columns}},columnsVisibility:function(a,b){return a.columns(b.columns).indexes().map(function(a){return{extend:"columnVisibility",columns:a,visibility:b.visibility}}).toArray()},
columnVisibility:{columns:h,text:function(a,b,c){return c._columnText(a,c.columns)},className:"buttons-columnVisibility",action:function(a,b,c,f){a=b.columns(f.columns);b=a.visible();a.visible(f.visibility!==h?f.visibility:!(b.length&&b[0]))},init:function(a,b,c){var f=this;a.on("column-visibility.dt"+c.namespace,function(b,d){d.bDestroying||f.active(a.column(c.columns).visible())}).on("column-reorder.dt"+c.namespace,function(b,d,e){1===a.columns(c.columns).count()&&("number"===typeof c.columns&&
(c.columns=e.mapping[c.columns]),b=a.column(c.columns),f.text(c._columnText(a,c.columns)),f.active(b.visible()))});this.active(a.column(c.columns).visible())},destroy:function(a,b,c){a.off("column-visibility.dt"+c.namespace).off("column-reorder.dt"+c.namespace)},_columnText:function(a,b){var c=a.column(b).index();return a.settings()[0].aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"")}},colvisRestore:{className:"buttons-colvisRestore",text:function(a){return a.i18n("buttons.colvisRestore",
"Restore visibility")},init:function(a,b,c){c._visOriginal=a.columns().indexes().map(function(b){return a.column(b).visible()}).toArray()},action:function(a,b,c,d){b.columns().every(function(a){a=b.colReorder&&b.colReorder.transpose?b.colReorder.transpose(a,"toOriginal"):a;this.visible(d._visOriginal[a])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(a,b,c,d){b.columns(d.show).visible(!0,!1);b.columns(d.hide).visible(!1,!1);b.columns.adjust()},show:[],hide:[]}});return d.Buttons});
(function(g){"function"===typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],function(i){return g(i,window,document)}):"object"===typeof exports?module.exports=function(i,j,t,u){i||(i=window);if(!j||!j.fn.dataTable)j=require("datatables.net")(i,j).$;j.fn.dataTable.Buttons||require("datatables.net-buttons")(i,j);return g(j,i,i.document,t,u)}:g(jQuery,window,document)})(function(g,i,j,t,u,o){function E(a,b){v===o&&(v=-1===y.serializeToString(g.parseXML(F["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r"));
g.each(b,function(b,c){if(g.isPlainObject(c)){var f=a.folder(b);E(f,c)}else{if(v){var f=c.childNodes[0],e,h,l=[];for(e=f.attributes.length-1;0<=e;e--){h=f.attributes[e].nodeName;var n=f.attributes[e].nodeValue;-1!==h.indexOf(":")&&(l.push({name:h,value:n}),f.removeAttribute(h))}e=0;for(h=l.length;e<h;e++)n=c.createAttribute(l[e].name.replace(":","_dt_b_namespace_token_")),n.value=l[e].value,f.setAttributeNode(n)}f=y.serializeToString(c);v&&(-1===f.indexOf("<?xml")&&(f='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+
f),f=f.replace(/_dt_b_namespace_token_/g,":"));f=f.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>");a.file(b,f)}})}function p(a,b,d){var c=a.createElement(b);d&&(d.attr&&g(c).attr(d.attr),d.children&&g.each(d.children,function(a,b){c.appendChild(b)}),d.text&&c.appendChild(a.createTextNode(d.text)));return c}function N(a,b){var d=a.header[b].length,c;a.footer&&a.footer[b].length>d&&(d=a.footer[b].length);for(var f=0,e=a.body.length;f<e&&!(c=a.body[f][b].toString().length,c>d&&
(d=c),40<d);f++);return 5<d?d:5}var r=g.fn.dataTable,q;var h="undefined"!==typeof self&&self||"undefined"!==typeof i&&i||this.content;if("undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))q=void 0;else{var w=h.document.createElementNS("http://www.w3.org/1999/xhtml","a"),O="download"in w,G=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),z=h.webkitRequestFileSystem,H=h.requestFileSystem||z||h.mozRequestFileSystem,P=function(a){(h.setImmediate||h.setTimeout)(function(){throw a;
},0)},A=0,B=function(a){setTimeout(function(){"string"===typeof a?(h.URL||h.webkitURL||h).revokeObjectURL(a):a.remove()},4E4)},C=function(a,b,d){for(var b=[].concat(b),c=b.length;c--;){var f=a["on"+b[c]];if("function"===typeof f)try{f.call(a,d||a)}catch(e){P(e)}}},I=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["",a],{type:a.type}):a},J=function(a,b,d){d||(a=I(a));var c=this,d=a.type,f=!1,e,g,l=function(){C(c,["writestart","progress",
"write","writeend"])},n=function(){if(g&&G&&"undefined"!==typeof FileReader){var b=new FileReader;b.onloadend=function(){var a=b.result;g.location.href="data:attachment/file"+a.slice(a.search(/[,;]/));c.readyState=c.DONE;l()};b.readAsDataURL(a);c.readyState=c.INIT}else{if(f||!e)e=(h.URL||h.webkitURL||h).createObjectURL(a);g?g.location.href=e:h.open(e,"_blank")===o&&G&&(h.location.href=e);c.readyState=c.DONE;l();B(e)}},m=function(a){return function(){if(c.readyState!==c.DONE)return a.apply(this,arguments)}},
i={create:!0,exclusive:!1},s;c.readyState=c.INIT;b||(b="download");if(O)e=(h.URL||h.webkitURL||h).createObjectURL(a),setTimeout(function(){w.href=e;w.download=b;var a=new MouseEvent("click");w.dispatchEvent(a);l();B(e);c.readyState=c.DONE});else{h.chrome&&(d&&"application/octet-stream"!==d)&&(s=a.slice||a.webkitSlice,a=s.call(a,0,a.size,"application/octet-stream"),f=!0);z&&"download"!==b&&(b+=".download");if("application/octet-stream"===d||z)g=h;H?(A+=a.size,H(h.TEMPORARY,A,m(function(d){d.root.getDirectory("saved",
i,m(function(d){var e=function(){d.getFile(b,i,m(function(b){b.createWriter(m(function(d){d.onwriteend=function(a){g.location.href=b.toURL();c.readyState=c.DONE;C(c,"writeend",a);B(b)};d.onerror=function(){var a=d.error;a.code!==a.ABORT_ERR&&n()};["writestart","progress","write","abort"].forEach(function(a){d["on"+a]=c["on"+a]});d.write(a);c.abort=function(){d.abort();c.readyState=c.DONE};c.readyState=c.WRITING}),n)}),n)};d.getFile(b,{create:false},m(function(a){a.remove();e()}),m(function(a){a.code===
a.NOT_FOUND_ERR?e():n()}))}),n)}),n)):n()}},k=J.prototype;"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?q=function(a,b,d){d||(a=I(a));return navigator.msSaveOrOpenBlob(a,b||"download")}:(k.abort=function(){this.readyState=this.DONE;C(this,"abort")},k.readyState=k.INIT=0,k.WRITING=1,k.DONE=2,k.error=k.onwritestart=k.onprogress=k.onwrite=k.onabort=k.onerror=k.onwriteend=null,q=function(a,b,d){return new J(a,b,d)})}r.fileSave=q;var x=function(a,b){var d="*"===a.filename&&"*"!==a.title&&
a.title!==o?a.title:a.filename;"function"===typeof d&&(d=d());-1!==d.indexOf("*")&&(d=g.trim(d.replace("*",g("title").text())));d=d.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");return b===o||!0===b?d+a.extension:d},Q=function(a){var b="Sheet1";a.sheetName&&(b=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,""));return b},R=function(a){a=a.title;"function"===typeof a&&(a=a());return-1!==a.indexOf("*")?a.replace("*",g("title").text()||"Exported data"):a},K=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?
"\r\n":"\n"},L=function(a,b){for(var d=K(b),c=a.buttons.exportData(b.exportOptions),f=b.fieldBoundary,e=b.fieldSeparator,g=RegExp(f,"g"),l=b.escapeChar!==o?b.escapeChar:"\\",h=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=e),b+=f?f+(""+a[c]).replace(g,l+f)+f:a[c];return b},i=b.header?h(c.header)+d:"",j=b.footer&&c.footer?d+h(c.footer):"",s=[],D=0,k=c.body.length;D<k;D++)s.push(h(c.body[D]));return{str:i+s.join(d)+j,rows:s.length}},M=function(){return-1!==navigator.userAgent.indexOf("Safari")&&
-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Opera")};try{var y=new XMLSerializer,v}catch(S){}var F={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',
"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',
"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',
"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="56"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'};
r.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,b,d,c){var a=L(b,c),f=a.str,d=g("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});c.customize&&(f=c.customize(f,c));c=g("<textarea readonly/>").val(f).appendTo(d);if(j.queryCommandSupported("copy")){d.appendTo(b.table().container());c[0].focus();c[0].select();try{var e=j.execCommand("copy");d.remove();if(e){b.buttons.info(b.i18n("buttons.copyTitle",
"Copy to clipboard"),b.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},a.rows),2E3);return}}catch(h){}}e=g("<span>"+b.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i></i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(d);b.buttons.info(b.i18n("buttons.copyTitle","Copy to clipboard"),e,0);c[0].focus();c[0].select();var l=g(e).closest(".dt-button-info"),i=function(){l.off("click.buttons-copy");
g(j).off(".buttons-copy");b.buttons.info(!1)};l.on("click.buttons-copy",i);g(j).on("keydown.buttons-copy",function(a){27===a.keyCode&&i()}).on("copy.buttons-copy cut.buttons-copy",function(){i()})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1};r.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return i.FileReader!==o&&i.Blob},text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,b,d,c){a=L(b,c).str;b=c.charset;c.customize&&
(a=c.customize(a,c));!1!==b?(b||(b=j.characterSet||j.charset),b&&(b=";charset="+b)):b="";c.bom&&(a=""+a);q(new Blob([a],{type:"text/csv"+b}),x(c),!0)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1};r.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return i.FileReader!==o&&(t||i.JSZip)!==o&&!M()&&y},text:function(a){return a.i18n("buttons.excel","Excel")},action:function(a,b,
d,c){var f=0,a=function(a){return g.parseXML(F[a])},e=a("xl/worksheets/sheet1.xml"),h=e.getElementsByTagName("sheetData")[0],a={_rels:{".rels":a("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":a("xl/_rels/workbook.xml.rels")},"workbook.xml":a("xl/workbook.xml"),"styles.xml":a("xl/styles.xml"),worksheets:{"sheet1.xml":e}},"[Content_Types].xml":a("[Content_Types].xml")},b=b.buttons.exportData(c.exportOptions),l,j,d=function(a){l=f+1;j=p(e,"row",{attr:{r:l}});for(var b=0,c=a.length;b<c;b++){for(var d=
b,i="";0<=d;)i=String.fromCharCode(d%26+65)+i,d=Math.floor(d/26)-1;d=i+""+l;if(null===a[b]||a[b]===o)a[b]="";"number"===typeof a[b]||a[b].match&&g.trim(a[b]).match(/^-?\d+(\.\d+)?$/)&&!g.trim(a[b]).match(/^0\d+/)?d=p(e,"c",{attr:{t:"n",r:d},children:[p(e,"v",{text:a[b]})]}):(i=!a[b].replace?a[b]:a[b].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""),d=p(e,"c",{attr:{t:"inlineStr",r:d},children:{row:p(e,"is",{children:{row:p(e,"t",{text:i})}})}}));j.appendChild(d)}h.appendChild(j);f++};g("sheets sheet",
a.xl["workbook.xml"]).attr("name",Q(c));c.customizeData&&c.customizeData(b);c.header&&(d(b.header,f),g("row c",e).attr("s","2"));for(var m=0,k=b.body.length;m<k;m++)d(b.body[m],f);c.footer&&b.footer&&(d(b.footer,f),g("row:last c",e).attr("s","2"));d=p(e,"cols");g("worksheet",e).prepend(d);m=0;for(k=b.header.length;m<k;m++)d.appendChild(p(e,"col",{attr:{min:m+1,max:m+1,width:N(b,m),customWidth:1}}));c.customize&&c.customize(a);b=new (t||i.JSZip);d={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};
E(b,a);b.generateAsync?b.generateAsync(d).then(function(a){q(a,x(c))}):q(b.generate(d),x(c))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1};r.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return i.FileReader!==o&&(u||i.pdfMake)},text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,b,d,c){K(c);var a=b.buttons.exportData(c.exportOptions),f=[];c.header&&f.push(g.map(a.header,function(a){return{text:"string"===typeof a?a:a+"",
style:"tableHeader"}}));for(var e=0,h=a.body.length;e<h;e++)f.push(g.map(a.body[e],function(a){return{text:"string"===typeof a?a:a+"",style:e%2?"tableBodyEven":"tableBodyOdd"}}));c.footer&&a.footer&&f.push(g.map(a.footer,function(a){return{text:"string"===typeof a?a:a+"",style:"tableFooter"}}));a={pageSize:c.pageSize,pageOrientation:c.orientation,content:[{table:{headerRows:1,body:f},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},
tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}};c.message&&a.content.unshift({text:"function"==typeof c.message?c.message(b,d,c):c.message,style:"message",margin:[0,0,0,12]});c.title&&a.content.unshift({text:R(c,!1),style:"title",margin:[0,0,0,12]});c.customize&&c.customize(a,c);b=(u||i.pdfMake).createPdf(a);"open"===c.download&&!M()?b.open():b.getBuffer(function(a){a=
new Blob([a],{type:"application/pdf"});q(a,x(c))})},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,message:null,customize:null,download:"download"};return r.Buttons});
/*!
 Bootstrap integration for DataTables' Buttons
 2016 SpryMedia Ltd - datatables.net/license
*/
(function(c){"function"===typeof define&&define.amd?define(["jquery","datatables.net-bs","datatables.net-buttons"],function(a){return c(a,window,document)}):"object"===typeof exports?module.exports=function(a,b){a||(a=window);if(!b||!b.fn.dataTable)b=require("datatables.net-bs")(a,b).$;b.fn.dataTable.Buttons||require("datatables.net-buttons")(a,b);return c(b,a,a.document)}:c(jQuery,window,document)})(function(c){var a=c.fn.dataTable;c.extend(!0,a.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group"},
button:{className:"btn btn-default"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button"},buttonLiner:{tag:"a",className:""}}}});a.ext.buttons.collection.text=function(a){return a.i18n("buttons.collection",'Collection <span class="caret"/>')};return a.Buttons});

(function(){
    //https://codepen.io/RedJokingInn/pen/RpddaE
        var load = 0;
        window.DataTable= function (ele,options){
            options = $.extend({
    "dom": "<'row'<'col-sm-2'B><'col-sm-6 tb-flex-row'lf><'col-sm-4'p<br/>i>>" + "<'row'<'col-sm-12'tr>>" + "<'row'<'col-sm-12'p<br/>i>>",
    "paging": true,
    "autoWidth": true,
    "columnDefs": [{
      "visible": false,
      // "targets": hCols 
     }],

    "buttons": [{
      extend: 'colvis',
      collectionLayout: 'three-column',
      text: function () {
        var totCols = $('#example thead th').length;
        // var hiddenCols = hCols.length;
        var hiddenCols = 0;
        var shownCols = totCols - hiddenCols;
        return 'Columns (' + shownCols + ' of ' + totCols + ')';
      },
      prefixButtons: [{
        extend: 'colvisGroup',
        text: 'Show all',
        show: ':hidden' },
      {
        extend: 'colvisRestore',
        text: 'Restore' }] },

    {
      extend: 'collection',
      text: 'Export',
      buttons: [{
        text: 'Excel',
        extend: 'excelHtml5',
        footer: false,
        exportOptions: {
          columns: ':visible' } },

      {
        text: 'CSV',
        extend: 'csvHtml5',
        fieldSeparator: ';',
        exportOptions: {
          columns: ':visible' } },

      {
        text: 'PDF Portrait',
        extend: 'pdfHtml5',
        message: '',
        exportOptions: {
          columns: ':visible' } },

      {
        text: 'PDF Landscape',
        extend: 'pdfHtml5',
        message: '',
        orientation: 'landscape',
        exportOptions: {
          columns: ':visible' } }] }],



    oLanguage: {
      oPaginate: {
        sNext: '<span class="pagination-default">&#x276f;</span>',
        sPrevious: '<span class="pagination-default">&#x276e;</span>' } },


    "initComplete": function (settings, json) {
      var parent = $(ele).closest(".dataTables_wrapper");
      // Adjust hidden columns counter text in button -->
      var tb = $(ele);
      tb.on('column-visibility.dt', function (e, settings, column, state) {
        var visCols = parent.find('thead tr:first th').length;
        //Below: The minus 2 because of the 2 extra buttons Show all and Restore
        var tblCols = parent.find('.dt-button-collection li[aria-controls=example] a').length - 2;
        parent.find('.buttons-colvis[aria-controls=example] span').html('Columns (' + visCols + ' of ' + tblCols + ')');
        e.stopPropagation();
      });
    } },options,true);
            if(load==0){
                load=1;

             
                loadJS("https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js",function(){
                    if(ele)$(ele).DataTable(options);
                });
                loadJS("https://cdn.jsdelivr.net/gh/bpampuch/pdfmake@0.1.18/build/vfs_fonts.js",function(){});
                loadJS("https://cdn.jsdelivr.net/gh/bpampuch/pdfmake@0.1.18/build/pdfmake.min.js",function(){});
                
               
            }else{
               if(ele)return $(ele).DataTable(options);
            }
            
        };
    })();
      

(function(win){
    var date = new Date();
    var year  = date.getFullYear();
    var month  = date.getMonth()+1;

    Date.prototype.monthDays= function(){
      var d= new Date(this.getFullYear(), this.getMonth()+1, 0);
      return d.getDate();
  }
  function daysInMonth (month, year) {
      return new Date(parseInt(year), parseInt(month) + 1, 0).getDate();
    }
    

    win.FilterMonth  = function(ele){
      $(ele).html(FilterMonth.HTML());
    };
    win.FilterMonth.HTML  = function(){
      return FilterMonth.toArray().map(function(v){
        return `<option value="${v}">${v}</option>`;
      }).join("");
    };
    win.FilterMonth.toArray  = function(){
      var s =[];
      for(var i=1;i<=12;i++){
        if(i>month)break;
        var m= i<10?"0"+i:i;
        s.push(`${year}-${m}`);
      }
      return s;
    };
    win.FilterMonth.toJSON  = function(){
      
      return JSON.stringify(win.FilterMonth.toArray());
    };
    if(window.$){
       $.FilterMonth = function (ele,options) {
          win.FilterMonth($(this)[0],options);
       };
       $.fn.FilterMonth = function (options) {
          return this.each(function(){
             win.FilterMonth(this,options);
          });
       };
    }
    
    ////
    win.FilterDate  = function(ele){
      $(ele).html(FilterDate.HTML());
    };
    win.FilterDate.HTML  = function(){
       
      return FilterDate.toArray().map(function(v){
        return `<option value="${v}">${v}</option>`;
      }).join("");
    };
    win.FilterDate.toArray  = function(){
      var dates = date.monthDays();
      var d = date.getDate();
      var s =[];
      for(var i=1;i<=dates;i++){
        if(i>d)break;
        var m= i<10?"0"+i:i;
        s.push(`${year}-${month}-${d}`);
      }
      return s;
    };
    win.FilterDate.toJSON  = function(){
      
      return JSON.stringify(win.FilterDate.toArray());
    };
    if(window.$){
       $.FilterDate = function (ele,options) {
          win.FilterDate($(this)[0],options);
       };
       $.fn.FilterDate = function (options) {
          return this.each(function(){
             win.FilterDate(this,options);
          });
       };
    }
})(window);
(function(win){

win.onDeeplink = function(data){
  $(document).trigger("onDeeplink",[data]);
};
 
 })(window);
(function(win){
	$.fn.loaderdata = function(f){
		return this.each(function(){
			var v = this;
			$(v).addClass("loaderdata");
			function next(){

					$(v).removeClass("loaderdata");
			 
			}
			if(f){
				f(next);
			}else{
				setTimeout(next,1000);
			}
		});
	};
	
 
	 $.fn.eleloader = function(options){

	  return this.each(function(){
	      win.eleloader($(this));
	  });
	};
	var loaded =0;
	win.eleloader  =function(ele,timer){
		  if(loaded==0){
		  	loaded=1;
		  	$("body").append(`<style>
				    .loaddata,[data-loader],[data-setbg],[data-lazy]{
				  min-height: 130px;
				  position: relative;
				  top: 0;
				  width: 100%;
				      overflow: hidden;
				      pointer-events: none;
				}
				button.loaddata,.btn.loaddata,input[type="submit"]{
				      min-height: initial!important;
				      width: auto;
				}
				.loaddata:before,[data-loader]:before,[data-setbg]:before,[data-lazy]:before{
				  content: " ";
				    position: absolute;
				    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOy8qIGJhY2tncm91bmQ6IHJnYigyNDEsIDI0MiwgMjQzKTsgKi9kaXNwbGF5OiBibG9jazsiIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+CjxwYXRoIGQ9Ik0xMCA1MEE0MCA0MCAwIDAgMCA5MCA1MEE0MCA0MiAwIDAgMSAxMCA1MCIgZmlsbD0iI2M0NDEyOSIgc3Ryb2tlPSJub25lIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MTszNjAgNTAgNTEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9wYXRoPgo8L3N2Zz4=) no-repeat;
				    z-index: 1000000000;
				    background-position: center;
				    background-size: contain;
				    height: 45px;
				    width: 45px;
				    display: block;
				}
				.loaddata:after,[data-loader]:after{    
				 content: " ";
				    position: absolute;
				     z-index: 100000000; 
				    height: 100%;
				    width: 100%;
				    top: 0;
				    left: 0;
				    right: 0;
				    bottom: 0;
				    display: block;
				    background-color: rgb(51 51 51 / 39%); 
				}   
				    </style>`);

		  }
	    ele.addClass("loaddata");
	    setTimeout(function(){
	        ele.removeClass("loaddata");
	    },timer||3000);
	};
	

  $(document).on("click",'form button,form input[type="submit"]',function(){
      win.eleloader($(this));
  });
 
})(window);
/*! @license Firebase v2.4.1
    License: https://www.firebase.com/terms/terms-of-service.html */
(function(){var h,n=this;function p(t){return void 0!==t}function aa(){}function ba(t){t.yb=function(){return t.zf?t.zf:t.zf=new t}}function ca(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function da(t){return"array"==ca(t)}function ea(t){var e=ca(t);return"array"==e||"object"==e&&"number"==typeof t.length}function q(t){return"string"==typeof t}function fa(t){return"number"==typeof t}function r(t){return"function"==ca(t)}function ga(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ha(t,e,n){return t.call.apply(t.bind,arguments)}function ia(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function u(t,e,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia).apply(null,arguments)}var ja=Date.now||function(){return+new Date};function ka(t,e){function n(){}n.prototype=e.prototype,t.oh=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.kh=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function la(t){if(Error.captureStackTrace)Error.captureStackTrace(this,la);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function v(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ma(t,e){var n,i={};for(n in t)i[n]=e.call(void 0,t[n],n,t);return i}function na(t,e){for(var n in t)if(!e.call(void 0,t[n],n,t))return!1;return!0}function oa(t){var e,n=0;for(e in t)n++;return n}function pa(t){for(var e in t)return e}function qa(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n}function ra(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n}function sa(t,e){for(var n in t)if(t[n]==e)return!0;return!1}function ta(t,e,n){for(var i in t)if(e.call(n,t[i],i,t))return i}function ua(t,e){var n=ta(t,e,void 0);return n&&t[n]}function va(t){for(var e in t)return!1;return!0}function wa(t){var e,n={};for(e in t)n[e]=t[e];return n}ka(la,Error),la.prototype.name="CustomError";var xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<xa.length;o++)n=xa[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function za(a){if(a=String(a),!/^\s*$/.test(a)&&/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Aa(){this.Vd=void 0}function Ba(t,e,n){switch(typeof e){case"string":Ca(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":n.push(e);break;case"undefined":n.push("null");break;case"object":if(null==e){n.push("null");break}if(da(e)){var i=e.length;n.push("[");for(var r="",o=0;o<i;o++)n.push(r),r=e[o],Ba(t,t.Vd?t.Vd.call(e,String(o),r):r,n),r=",";n.push("]");break}for(o in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,o)&&("function"!=typeof(r=e[o])&&(n.push(i),Ca(o,n),n.push(":"),Ba(t,t.Vd?t.Vd.call(e,o,r):r,n),i=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof e)}}var Da={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ea=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,w;function Ca(t,e){e.push('"',t.replace(Ea,(function(t){if(t in Da)return Da[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),Da[t]=n+e.toString(16)})),'"')}function Fa(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ja()).toString(36)}t:{var Ga=n.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){w=Ha;break t}}w=""}function Ia(){this.Ya=-1}function Ja(){this.Ya=-1,this.Ya=64,this.P=[],this.pe=[],this.eg=[],this.Od=[],this.Od[0]=128;for(var t=1;t<this.Ya;++t)this.Od[t]=0;this.ge=this.ec=0,this.reset()}function Ka(t,e,n){n||(n=0);var i=t.eg;if(q(e))for(var r=0;16>r;r++)i[r]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(r=0;16>r;r++)i[r]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(r=16;80>r;r++){var o=i[r-3]^i[r-8]^i[r-14]^i[r-16];i[r]=4294967295&(o<<1|o>>>31)}e=t.P[0],n=t.P[1];var a,s=t.P[2],h=t.P[3],u=t.P[4];for(r=0;80>r;r++)40>r?20>r?(o=h^n&(s^h),a=1518500249):(o=n^s^h,a=1859775393):60>r?(o=n&s|h&(n|s),a=2400959708):(o=n^s^h,a=3395469782),o=(e<<5|e>>>27)+o+u+a+i[r]&4294967295,u=h,h=s,s=4294967295&(n<<30|n>>>2),n=e,e=o;t.P[0]=t.P[0]+e&4294967295,t.P[1]=t.P[1]+n&4294967295,t.P[2]=t.P[2]+s&4294967295,t.P[3]=t.P[3]+h&4294967295,t.P[4]=t.P[4]+u&4294967295}ka(Ja,Ia),Ja.prototype.reset=function(){this.P[0]=1732584193,this.P[1]=4023233417,this.P[2]=2562383102,this.P[3]=271733878,this.P[4]=3285377520,this.ge=this.ec=0},Ja.prototype.update=function(t,e){if(null!=t){p(e)||(e=t.length);for(var n=e-this.Ya,i=0,r=this.pe,o=this.ec;i<e;){if(0==o)for(;i<=n;)Ka(this,t,i),i+=this.Ya;if(q(t)){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o==this.Ya){Ka(this,r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o==this.Ya){Ka(this,r),o=0;break}}this.ec=o,this.ge+=e}};var x=Array.prototype,La=x.indexOf?function(t,e,n){return x.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,q(t))return q(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ma=x.forEach?function(t,e,n){x.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=q(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)},Na=x.filter?function(t,e,n){return x.filter.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=[],o=0,a=q(t)?t.split(""):t,s=0;s<i;s++)if(s in a){var h=a[s];e.call(n,h,s,t)&&(r[o++]=h)}return r},Oa=x.map?function(t,e,n){return x.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=Array(i),o=q(t)?t.split(""):t,a=0;a<i;a++)a in o&&(r[a]=e.call(n,o[a],a,t));return r},Pa=x.reduce?function(t,e,n,i){for(var r=[],o=1,a=arguments.length;o<a;o++)r.push(arguments[o]);return i&&(r[0]=u(e,i)),x.reduce.apply(t,r)}:function(t,e,n,i){var r=n;return Ma(t,(function(n,o){r=e.call(i,r,n,o,t)})),r},Qa=x.every?function(t,e,n){return x.every.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=q(t)?t.split(""):t,o=0;o<i;o++)if(o in r&&!e.call(n,r[o],o,t))return!1;return!0},Ya,ab;function Ra(t,e){var n=Sa(t,e,void 0);return 0>n?null:q(t)?t.charAt(n):t[n]}function Sa(t,e,n){for(var i=t.length,r=q(t)?t.split(""):t,o=0;o<i;o++)if(o in r&&e.call(n,r[o],o,t))return o;return-1}function Ta(t,e){var n=La(t,e);0<=n&&x.splice.call(t,n,1)}function Ua(t,e,n){return 2>=arguments.length?x.slice.call(t,e):x.slice.call(t,e,n)}function Va(t,e){t.sort(e||Wa)}function Wa(t,e){return t>e?1:t<e?-1:0}function Xa(t){n.setTimeout((function(){throw t}),0)}function Za(){var t=n.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&-1==w.indexOf("Presto")&&(t=function(){(i=document.createElement("iframe")).style.display="none",i.src="",document.documentElement.appendChild(i);var t=i.contentWindow;(i=t.document).open(),i.write(""),i.close();var e="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,i=u((function(t){"*"!=n&&t.origin!=n||t.data!=e||this.port1.onmessage()}),this);t.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(e,n)}}}),void 0!==t&&-1==w.indexOf("Trident")&&-1==w.indexOf("MSIE")){var e=new t,i={},r=i;return e.port1.onmessage=function(){if(p(i.next)){var t=(i=i.next).hb;i.hb=null,t()}},function(t){r.next={hb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}function $a(t,e){ab||bb(),cb||(ab(),cb=!0),db.push(new eb(t,e))}function bb(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve();ab=function(){t.then(fb)}}else ab=function(){var t=fb;!r(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ya||(Ya=Za()),Ya(t)):n.setImmediate(t)}}var cb=!1,db=[];function fb(){for(;db.length;){var t=db;db=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.yg.call(n.scope)}catch(t){Xa(t)}}}cb=!1}function eb(t,e){this.yg=t,this.scope=e}[].push((function(){cb=!1,db=[]}));var gb=-1!=w.indexOf("Opera")||-1!=w.indexOf("OPR"),hb=-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE"),ib=-1!=w.indexOf("Gecko")&&-1==w.toLowerCase().indexOf("webkit")&&!(-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE")),jb=-1!=w.toLowerCase().indexOf("webkit"),b,a;a="",gb&&n.opera?r(a=n.opera.version)&&a():(ib?b=/rv\:([^\);]+)(\)|;)/:hb?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:jb&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(w))?a[1]:""),hb&&(b=(b=n.document)?b.documentMode:void 0)>parseFloat(a)&&String(b));var kb=null,lb=null,mb=null;function nb(t,e){if(!ea(t))throw Error("encodeByteArray takes an array as a parameter");ob();for(var n=e?lb:kb,i=[],r=0;r<t.length;r+=3){var o=t[r],a=r+1<t.length,s=a?t[r+1]:0,h=r+2<t.length,u=o>>2,c=(o=(3&o)<<4|s>>4,s=(15&s)<<2|(c=h?t[r+2]:0)>>6,63&c);h||(c=64,a||(s=64)),i.push(n[u],n[o],n[s],n[c])}return i.join("")}function ob(){if(!kb){kb={},lb={},mb={};for(var t=0;65>t;t++)kb[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),lb[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t),mb[lb[t]]=t,62<=t&&(mb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)]=t)}}function pb(t,e){if(this.N=qb,this.Rf=void 0,this.Ba=this.Ha=null,this.yd=this.ye=!1,t==rb)sb(this,tb,e);else try{var n=this;t.call(e,(function(t){sb(n,tb,t)}),(function(t){if(!(t instanceof ub))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}sb(n,vb,t)}))}catch(t){sb(this,vb,t)}}var qb=0,tb=2,vb=3;function rb(){}function xb(t,e){if(t.N==qb)if(t.Ha){var n=t.Ha;if(n.Ba){for(var i,r=0,o=-1,a=0;(i=n.Ba[a])&&!((i=i.o)&&(r++,i==t&&(o=a),0<=o&&1<r));a++);0<=o&&(n.N==qb&&1==r?xb(n,e):(r=n.Ba.splice(o,1)[0],yb(n,r,vb,e)))}t.Ha=null}else sb(t,vb,e)}function zb(t,e){t.Ba&&t.Ba.length||t.N!=tb&&t.N!=vb||Ab(t),t.Ba||(t.Ba=[]),t.Ba.push(e)}function wb(t,e,n,i){var r={o:null,Hf:null,Jf:null};return r.o=new pb((function(t,o){r.Hf=e?function(n){try{var r=e.call(i,n);t(r)}catch(t){o(t)}}:t,r.Jf=n?function(e){try{var r=n.call(i,e);!p(r)&&e instanceof ub?o(e):t(r)}catch(t){o(t)}}:o})),r.o.Ha=t,zb(t,r),r.o}function sb(t,e,n){if(t.N==qb){if(t==n)e=vb,n=new TypeError("Promise cannot resolve to itself");else{var i;if(n)try{i=!!n.$goog_Thenable}catch(t){i=!1}else i=!1;if(i)return t.N=1,void n.then(t.Yf,t.Zf,t);if(ga(n))try{var o=n.then;if(r(o))return void Bb(t,n,o)}catch(t){e=vb,n=t}}t.Rf=n,t.N=e,t.Ha=null,Ab(t),e!=vb||n instanceof ub||Cb(t,n)}}function Bb(t,e,n){function i(e){r||(r=!0,t.Zf(e))}t.N=1;var r=!1;try{n.call(e,(function(e){r||(r=!0,t.Yf(e))}),i)}catch(t){i(t)}}function Ab(t){t.ye||(t.ye=!0,$a(t.wg,t))}function yb(t,e,n,i){if(n==tb)e.Hf(i);else{if(e.o)for(;t&&t.yd;t=t.Ha)t.yd=!1;e.Jf(i)}}function Cb(t,e){t.yd=!0,$a((function(){t.yd&&Db.call(null,e)}))}pb.prototype.then=function(t,e,n){return wb(this,r(t)?t:null,r(e)?e:null,n)},pb.prototype.then=pb.prototype.then,pb.prototype.$goog_Thenable=!0,h=pb.prototype,h.fh=function(t,e){return wb(this,null,t,e)},h.cancel=function(t){this.N==qb&&$a((function(){xb(this,new ub(t))}),this)},h.Yf=function(t){this.N=qb,sb(this,tb,t)},h.Zf=function(t){this.N=qb,sb(this,vb,t)},h.wg=function(){for(;this.Ba&&this.Ba.length;){var t=this.Ba;this.Ba=null;for(var e=0;e<t.length;e++)yb(this,t[e],this.N,this.Rf)}this.ye=!1};var Db=Xa;function ub(t){la.call(this,t)}ka(ub,la),ub.prototype.name="cancel";var Eb=Eb||"2.4.1";function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Fb(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gb(t){var e={};return Fb(t,(function(t,n){e[t]=n})),e}function Hb(t){return"object"==typeof t&&null!==t}function Ib(t){var e=[];return Fb(t,(function(t,n){da(n)?Ma(n,(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})),e.length?"&"+e.join("&"):""}function Jb(t){var e={};return t=t.replace(/^\?/,"").split("&"),Ma(t,(function(t){t&&(t=t.split("="),e[t[0]]=t[1])})),e}function Kb(t,e){if(!t)throw Lb(e)}function Lb(t){return Error("Firebase ("+Eb+") INTERNAL ASSERT FAILED: "+t)}var Mb=n.Promise||pb;function B(){var t=this;this.reject=this.resolve=null,this.D=new Mb((function(e,n){t.resolve=e,t.reject=n}))}function C(t,e){return function(n,i){n?t.reject(n):t.resolve(i),r(e)&&(Nb(t.D),1===e.length?e(n):e(n,i))}}function Nb(t){t.then(void 0,aa)}function Ob(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);55296<=r&&56319>=r&&(r-=55296,Kb(++i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(r<<10)+(t.charCodeAt(i)-56320)),128>r?e[n++]=r:(2048>r?e[n++]=r>>6|192:(65536>r?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return e}function Pb(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e++:2048>i?e+=2:55296<=i&&56319>=i?(e+=4,n++):e+=3}return e}function D(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")}function E(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+i+" argument "}function F(t,e,n,i){if((!i||p(n))&&!r(n))throw Error(E(t,e,i)+"must be a valid function.")}function Qb(t,e,n){if(p(n)&&(!ga(n)||null===n))throw Error(E(t,e,!0)+"must be a valid context object.")}function Rb(t){return"undefined"!=typeof JSON&&p(JSON.parse)?JSON.parse(t):za(t)}function G(t){if("undefined"!=typeof JSON&&p(JSON.stringify))t=JSON.stringify(t);else{var e=[];Ba(new Aa,t,e),t=e.join("")}return t}function Sb(){this.Zd=H}function Tb(){}pb.prototype.catch=pb.prototype.fh,Sb.prototype.j=function(t){return this.Zd.S(t)},Sb.prototype.toString=function(){return this.Zd.toString()},Tb.prototype.uf=function(){return null},Tb.prototype.Ce=function(){return null};var Ub=new Tb;function Vb(t,e,n){this.bg=t,this.Oa=e,this.Nd=n}function Zb(){this.xb=[]}function $b(t,e){for(var n=null,i=0;i<e.length;i++){var r=e[i],o=r.cc();null===n||o.ea(n.cc())||(t.xb.push(n),n=null),null===n&&(n=new ac(o)),n.add(r)}n&&t.xb.push(n)}function bc(t,e,n){$b(t,n),cc(t,(function(t){return t.ea(e)}))}function dc(t,e,n){$b(t,n),cc(t,(function(t){return t.contains(e)||e.contains(t)}))}function cc(t,e){for(var n=!0,i=0;i<t.xb.length;i++){if(r=t.xb[i])if(e(r=r.cc())){for(var r=t.xb[i],o=0;o<r.xd.length;o++){var a=r.xd[o];if(null!==a){r.xd[o]=null;var s=a.Zb();ec&&fc("event: "+a.toString()),gc(s)}}t.xb[i]=null}else n=!1}n&&(t.xb=[])}function ac(t){this.ta=t,this.xd=[]}function J(t,e,n,i){this.type=t,this.Na=e,this.Za=n,this.Oe=i,this.Td=void 0}function hc(t){return new J(ic,t)}Vb.prototype.uf=function(t){var e=this.Oa.Q;return Wb(e,t)?e.j().T(t):(e=null!=this.Nd?new Xb(this.Nd,!0,!1):this.Oa.w(),this.bg.Bc(t,e))},Vb.prototype.Ce=function(t,e,n){var i=null!=this.Nd?this.Nd:Yb(this.Oa);return 0===(t=this.bg.qe(i,e,1,n,t)).length?null:t[0]},ac.prototype.add=function(t){this.xd.push(t)},ac.prototype.cc=function(){return this.ta};var ic="value";function jc(t,e,n,i){this.xe=e,this.be=n,this.Td=i,this.wd=t}function kc(t,e,n){this.xe=t,this.error=e,this.path=n}function Xb(t,e,n){this.A=t,this.ga=e,this.Yb=n}function lc(t){return t.ga}function mc(t){return t.Yb}function nc(t,e){return e.e()?t.ga&&!t.Yb:Wb(t,K(e))}function Wb(t,e){return t.ga&&!t.Yb||t.A.Fa(e)}function oc(t){this.pg=t,this.Gd=null}function pc(t,e){this.Vf={},this.hd=new oc(t),this.da=e;var n=1e4+2e4*Math.random();setTimeout(u(this.Of,this),Math.floor(n))}function qc(){this.Hc={}}function rc(t,e,n){p(n)||(n=1),y(t.Hc,e)||(t.Hc[e]=0),t.Hc[e]+=n}jc.prototype.cc=function(){var t=this.be.Mb();return"value"===this.wd?t.path:t.parent().path},jc.prototype.De=function(){return this.wd},jc.prototype.Zb=function(){return this.xe.Zb(this)},jc.prototype.toString=function(){return this.cc().toString()+":"+this.wd+":"+G(this.be.qf())},kc.prototype.cc=function(){return this.path},kc.prototype.De=function(){return"cancel"},kc.prototype.Zb=function(){return this.xe.Zb(this)},kc.prototype.toString=function(){return this.path.toString()+":cancel"},Xb.prototype.j=function(){return this.A},oc.prototype.get=function(){var t=this.pg.get(),e=wa(t);if(this.Gd)for(var n in this.Gd)e[n]-=this.Gd[n];return this.Gd=t,e},pc.prototype.Of=function(){var t,e=this.hd.get(),n={},i=!1;for(t in e)0<e[t]&&y(this.Vf,t)&&(n[t]=e[t],i=!0);i&&this.da.Ye(n),setTimeout(u(this.Of,this),Math.floor(6e5*Math.random()))},qc.prototype.get=function(){return wa(this.Hc)};var sc={},tc={};function uc(t){return t=t.toString(),sc[t]||(sc[t]=new qc),sc[t]}function vc(t,e){var n=t.toString();return tc[n]||(tc[n]=e()),tc[n]}function L(t,e){this.name=t,this.U=e}function wc(t,e){return new L(t,e)}function xc(t,e){return yc(t.name,e.name)}function zc(t,e){return yc(t,e)}function Ac(t,e,n){this.type=Bc,this.source=t,this.path=e,this.Ja=n}function Cc(t,e){this.type=Dc,this.source=t,this.path=e}function Ec(t,e){this.Pa=t,this.xa=e||Fc}function Gc(t,e){for(var n,i=t.xa,r=null;!i.e();){if(0===(n=t.Pa(e,i.key))){if(i.left.e())return r?r.key:null;for(i=i.left;!i.right.e();)i=i.right;return i.key}0>n?i=i.left:0<n&&(r=i,i=i.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function Hc(t,e,n,i,r){for(this.Xd=r||null,this.Je=i,this.Ta=[],r=1;!t.e();)if(r=e?n(t.key,e):1,i&&(r*=-1),0>r)t=this.Je?t.left:t.right;else{if(0===r){this.Ta.push(t);break}this.Ta.push(t),t=this.Je?t.right:t.left}}function Ic(t){if(0===t.Ta.length)return null;var e,n=t.Ta.pop();if(e=t.Xd?t.Xd(n.key,n.value):{key:n.key,value:n.value},t.Je)for(n=n.left;!n.e();)t.Ta.push(n),n=n.right;else for(n=n.right;!n.e();)t.Ta.push(n),n=n.left;return e}function Jc(t){return 0===t.Ta.length?null:(e=(e=t.Ta)[e.length-1],t.Xd?t.Xd(e.key,e.value):{key:e.key,value:e.value});var e}function Kc(t,e,n,i,r){this.key=t,this.value=e,this.color=null==n||n,this.left=null!=i?i:Fc,this.right=null!=r?r:Fc}function Lc(t){return t.left.e()?t:Lc(t.left)}function Nc(t){return t.left.e()?Fc:(t.left.ha()||t.left.left.ha()||(t=Oc(t)),Mc(t=t.$(null,null,null,Nc(t.left),null)))}function Mc(t){return t.right.ha()&&!t.left.ha()&&(t=Rc(t)),t.left.ha()&&t.left.left.ha()&&(t=Pc(t)),t.left.ha()&&t.right.ha()&&(t=Qc(t)),t}function Oc(t){return(t=Qc(t)).right.left.ha()&&(t=Qc(t=Rc(t=t.$(null,null,null,null,Pc(t.right))))),t}function Rc(t){return t.right.$(null,null,t.color,t.$(null,null,!0,null,t.right.left),null)}function Pc(t){return t.left.$(null,null,t.color,null,t.$(null,null,!0,t.left.right,null))}function Qc(t){return t.$(null,null,!t.color,t.left.$(null,null,!t.left.color,null,null),t.right.$(null,null,!t.right.color,null,null))}function Sc(){}Ac.prototype.$c=function(t){return this.path.e()?new Ac(this.source,M,this.Ja.T(t)):new Ac(this.source,N(this.path),this.Ja)},Ac.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ja.toString()+")"},Cc.prototype.$c=function(){return this.path.e()?new Cc(this.source,M):new Cc(this.source,N(this.path))},Cc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},h=Ec.prototype,h.Sa=function(t,e){return new Ec(this.Pa,this.xa.Sa(t,e,this.Pa).$(null,null,!1,null,null))},h.remove=function(t){return new Ec(this.Pa,this.xa.remove(t,this.Pa).$(null,null,!1,null,null))},h.get=function(t){for(var e,n=this.xa;!n.e();){if(0===(e=this.Pa(t,n.key)))return n.value;0>e?n=n.left:0<e&&(n=n.right)}return null},h.e=function(){return this.xa.e()},h.count=function(){return this.xa.count()},h.Vc=function(){return this.xa.Vc()},h.jc=function(){return this.xa.jc()},h.ka=function(t){return this.xa.ka(t)},h.ac=function(t){return new Hc(this.xa,null,this.Pa,!1,t)},h.bc=function(t,e){return new Hc(this.xa,t,this.Pa,!1,e)},h.dc=function(t,e){return new Hc(this.xa,t,this.Pa,!0,e)},h.xf=function(t){return new Hc(this.xa,null,this.Pa,!0,t)},h=Kc.prototype,h.$=function(t,e,n,i,r){return new Kc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.ka=function(t){return this.left.ka(t)||t(this.key,this.value)||this.right.ka(t)},h.Vc=function(){return Lc(this).key},h.jc=function(){return this.right.e()?this.key:this.right.jc()},h.Sa=function(t,e,n){var i,r;return Mc(r=0>(i=n(t,(r=this).key))?r.$(null,null,null,r.left.Sa(t,e,n),null):0===i?r.$(null,e,null,null,null):r.$(null,null,null,null,r.right.Sa(t,e,n)))},h.remove=function(t,e){var n,i;if(0>e(t,(n=this).key))n.left.e()||n.left.ha()||n.left.left.ha()||(n=Oc(n)),n=n.$(null,null,null,n.left.remove(t,e),null);else{if(n.left.ha()&&(n=Pc(n)),n.right.e()||n.right.ha()||n.right.left.ha()||(n=Qc(n)).left.left.ha()&&(n=Qc(n=Pc(n))),0===e(t,n.key)){if(n.right.e())return Fc;i=Lc(n.right),n=n.$(i.key,i.value,null,null,Nc(n.right))}n=n.$(null,null,null,null,n.right.remove(t,e))}return Mc(n)},h.ha=function(){return this.color},h=Sc.prototype,h.$=function(){return this},h.Sa=function(t,e){return new Kc(t,e,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.ka=function(){return!1},h.Vc=function(){return null},h.jc=function(){return null},h.ha=function(){return!1};var Fc=new Sc;function Tc(t,e){return t&&"object"==typeof t?(O(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function Uc(t,e){var n=new Vc;return Wc(t,new P(""),(function(t,i){n.rc(t,Xc(i,e))})),n}function Xc(t,e){var n,i=Tc(i=t.C().J(),e);if(t.L()){var r=Tc(t.Ea(),e);return r!==t.Ea()||i!==t.C().J()?new Yc(r,Q(i)):t}return n=t,i!==t.C().J()&&(n=n.ia(new Yc(i))),t.R(R,(function(t,i){var r=Xc(i,e);r!==i&&(n=n.W(t,r))})),n}function Zc(){this.Ac={}}function $c(t){this.Ic=t,this.Sd="firebase:"}function ad(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $c(e)}}catch(t){}return new Zc}Zc.prototype.set=function(t,e){null==e?delete this.Ac[t]:this.Ac[t]=e},Zc.prototype.get=function(t){return y(this.Ac,t)?this.Ac[t]:null},Zc.prototype.remove=function(t){delete this.Ac[t]},Zc.prototype.Af=!0,h=$c.prototype,h.set=function(t,e){null==e?this.Ic.removeItem(this.Sd+t):this.Ic.setItem(this.Sd+t,G(e))},h.get=function(t){return null==(t=this.Ic.getItem(this.Sd+t))?null:Rb(t)},h.remove=function(t){this.Ic.removeItem(this.Sd+t)},h.Af=!1,h.toString=function(){return this.Ic.toString()};var bd=ad("localStorage"),cd=ad("sessionStorage");function dd(t,e,n,i,r){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.ob=e,this.lc=n,this.ih=i,this.Rd=r||"",this.ab=bd.get("host:"+t)||this.host}function ed(t,e){e!==t.ab&&(t.ab=e,"s-"===t.ab.substr(0,2)&&bd.set("host:"+t.host,t.ab))}function fd(t,e,n){if(O("string"==typeof e,"typeof type must == string"),O("object"==typeof n,"typeof params must == object"),e===gd)e=(t.ob?"wss://":"ws://")+t.ab+"/.ws?";else{if(e!==hd)throw Error("Unknown connection type: "+e);e=(t.ob?"https://":"http://")+t.ab+"/.lp?"}t.host!==t.ab&&(n.ns=t.lc);var i=[];return v(n,(function(t,e){i.push(e+"="+t)})),e+i.join("&")}dd.prototype.toString=function(){var t=(this.ob?"https://":"http://")+this.host;return this.Rd&&(t+="<"+this.Rd+">"),t};var id=function(){var t=1;return function(){return t++}}(),O=Kb,jd=Lb;function kd(t){try{var e;if("undefined"!=typeof atob)e=atob(t);else{ob();for(var n=mb,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0,s=++r<t.length?n[t.charAt(r)]:64,h=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==a||null==s||null==h)throw Error();i.push(o<<2|a>>4),64!=s&&(i.push(a<<4&240|s>>2),64!=h&&i.push(s<<6&192|h))}if(8192>i.length)e=String.fromCharCode.apply(null,i);else{for(t="",n=0;n<i.length;n+=8192)t+=String.fromCharCode.apply(null,Ua(i,n,n+8192));e=t}}return e}catch(t){fc("base64Decode failed: ",t)}return null}function ld(t){var e=Ob(t);(t=new Ja).update(e);e=[];var n=8*t.ge;56>t.ec?t.update(t.Od,56-t.ec):t.update(t.Od,t.Ya-(t.ec-56));for(var i=t.Ya-1;56<=i;i--)t.pe[i]=255&n,n/=256;for(Ka(t,t.pe),i=n=0;5>i;i++)for(var r=24;0<=r;r-=8)e[n]=t.P[i]>>r&255,++n;return nb(e)}function md(t){for(var e="",n=0;n<arguments.length;n++)e=ea(arguments[n])?e+md.apply(null,arguments[n]):"object"==typeof arguments[n]?e+G(arguments[n]):e+arguments[n],e+=" ";return e}var ec=null,nd=!0;function od(t,e){Kb(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?ec=u(console.log,console):"object"==typeof console.log&&(ec=function(t){console.log(t)})),e&&cd.set("logging_enabled",!0)):r(t)?ec=t:(ec=null,cd.remove("logging_enabled"))}function fc(t){if(!0===nd&&(nd=!1,null===ec&&!0===cd.get("logging_enabled")&&od(!0)),ec){var e=md.apply(null,arguments);ec(e)}}function pd(t){return function(){fc(t,arguments)}}function qd(t){if("undefined"!=typeof console){var e="FIREBASE INTERNAL ERROR: "+md.apply(null,arguments);void 0!==console.error?console.error(e):console.log(e)}}function rd(t){var e=md.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+e)}function S(t){if("undefined"!=typeof console){var e="FIREBASE WARNING: "+md.apply(null,arguments);void 0!==console.warn?console.warn(e):console.log(e)}}function sd(t){var e="",n="",i="",r="",o=!0,a="https",s=443;if(q(t)){var h=t.indexOf("//");for(0<=h&&(a=t.substring(0,h-1),t=t.substring(h+2)),-1===(h=t.indexOf("/"))&&(h=t.length),e=t.substring(0,h),r="",t=t.substring(h).split("/"),h=0;h<t.length;h++)if(0<t[h].length){var u=t[h];try{u=decodeURIComponent(u.replace(/\+/g," "))}catch(t){}r+="/"+u}3===(t=e.split(".")).length?(n=t[1],i=t[0].toLowerCase()):2===t.length&&(n=t[0]),0<=(h=e.indexOf(":"))&&(o="https"===a||"wss"===a,s=e.substring(h+1),isFinite(s)&&(s=String(s)),s=q(s)?/^\s*-?0x/i.test(s)?parseInt(s,16):parseInt(s,10):NaN)}return{host:e,port:s,domain:n,eh:i,ob:o,scheme:a,bd:r}}function td(t){return fa(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function ud(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}function yc(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=vd(t),i=vd(e);return null!==n?null!==i?0==n-i?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}function wd(t,e){if(e&&t in e)return e[t];throw Error("Missing required key ("+t+") in object: "+G(e))}function xd(t){if("object"!=typeof t||null===t)return G(t);var e,n=[];for(e in t)n.push(e);n.sort(),e="{";for(var i=0;i<n.length;i++)0!==i&&(e+=","),e+=G(n[i]),e+=":",e+=xd(t[n[i]]);return e+"}"}function yd(t,e){if(t.length<=e)return[t];for(var n=[],i=0;i<t.length;i+=e)i+e>t?n.push(t.substring(i,t.length)):n.push(t.substring(i,i+e));return n}function zd(t,e){if(da(t))for(var n=0;n<t.length;++n)e(n,t[n]);else v(t,e)}function Ad(t){var e,n,i,r;for(O(!td(t),"Invalid JSON number"),0===t?(i=n=0,e=-1/0==1/t?1:0):(e=0>t,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074)))),r=[],t=52;t;--t)r.push(i%2?1:0),i=Math.floor(i/2);for(t=11;t;--t)r.push(n%2?1:0),n=Math.floor(n/2);for(r.push(e?1:0),r.reverse(),e=r.join(""),n="",t=0;64>t;t+=8)1===(i=parseInt(e.substr(t,8),2).toString(16)).length&&(i="0"+i),n+=i;return n.toLowerCase()}var Bd=/^-?\d{1,10}$/;function vd(t){return Bd.test(t)&&(-2147483648<=(t=Number(t))&&2147483647>=t)?t:null}function gc(t){try{t()}catch(t){setTimeout((function(){throw S("Exception was thrown by user callback.",t.stack||""),t}),Math.floor(0))}}function T(t,e){if(r(t)){var n=Array.prototype.slice.call(arguments,1).slice();gc((function(){t.apply(null,n)}))}}function Cd(t){var e={},n={},i={},r="";try{var o=t.split(".");e=Rb(kd(o[0])||""),n=Rb(kd(o[1])||""),r=o[2],i=n.d||{};delete n.d}catch(t){}return{lh:e,Ec:n,data:i,ah:r}}function Dd(t){return"object"==typeof(t=Cd(t).Ec)&&t.hasOwnProperty("iat")?z(t,"iat"):null}function Ed(t){var e=(t=Cd(t)).Ec;return!!t.ah&&!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}function Fd(t){this.Y=t,this.g=t.n.g}function Gd(t,e,n,i){var r=[],o=[];return Ma(e,(function(e){"child_changed"===e.type&&t.g.Dd(e.Oe,e.Na)&&o.push(new J("child_moved",e.Na,e.Za))})),Hd(t,r,"child_removed",e,i,n),Hd(t,r,"child_added",e,i,n),Hd(t,r,"child_moved",o,i,n),Hd(t,r,"child_changed",e,i,n),Hd(t,r,ic,e,i,n),r}function Hd(t,e,n,i,r,o){i=Na(i,(function(t){return t.type===n})),Va(i,u(t.qg,t)),Ma(i,(function(n){var i=Id(t,n,o);Ma(r,(function(r){r.Qf(n.type)&&e.push(r.createEvent(i,t.Y))}))}))}function Id(t,e,n){return"value"!==e.type&&"child_removed"!==e.type&&(e.Td=n.wf(e.Za,e.Na,t.g)),e}function Jd(){this.ib={}}function Kd(t,e){var n=e.type,i=e.Za;O("child_added"==n||"child_changed"==n||"child_removed"==n,"Only child changes supported for tracking"),O(".priority"!==i,"Only non-priority child changes can be tracked.");var r=z(t.ib,i);if(r){var o=r.type;if("child_added"==n&&"child_removed"==o)t.ib[i]=new J("child_changed",e.Na,i,r.Na);else if("child_removed"==n&&"child_added"==o)delete t.ib[i];else if("child_removed"==n&&"child_changed"==o)t.ib[i]=new J("child_removed",r.Oe,i);else if("child_changed"==n&&"child_added"==o)t.ib[i]=new J("child_added",e.Na,i);else{if("child_changed"!=n||"child_changed"!=o)throw jd("Illegal combination of changes: "+e+" occurred after "+r);t.ib[i]=new J("child_changed",e.Na,i,r.Oe)}}else t.ib[i]=e}function Ld(t){this.g=t}function Md(t){var e;this.Fe=new Ld(t.g),this.g=t.g,t.oa?(e=Nd(t),e=t.g.Sc(Od(t),e)):e=t.g.Wc(),this.gd=e,t.ra?(e=Pd(t),t=t.g.Sc(Rd(t),e)):t=t.g.Tc(),this.Jc=t}function Sd(t){this.ua=new Md(t),this.g=t.g,O(t.la,"Only valid if limit has been set"),this.ma=t.ma,this.Nb=!Td(t)}function Ud(t,e,n,i,r,o){var a;if(t.Nb){var s=Vd(t.g);a=function(t,e){return s(e,t)}}else a=Vd(t.g);O(e.Hb()==t.ma,"");var h=new L(n,i),u=t.Nb?Wd(e,t.g):Xd(e,t.g),c=t.ua.matches(h);if(e.Fa(n)){var f=e.T(n);for(u=r.Ce(t.g,u,t.Nb);null!=u&&(u.name==n||e.Fa(u.name));)u=r.Ce(t.g,u,t.Nb);return r=null==u?1:a(u,h),c&&!i.e()&&0<=r?(null!=o&&Kd(o,new J("child_changed",i,n,f)),e.W(n,i)):(null!=o&&Kd(o,new J("child_removed",f,n)),e=e.W(n,H),null!=u&&t.ua.matches(u)?(null!=o&&Kd(o,new J("child_added",u.U,u.name)),e.W(u.name,u.U)):e)}return i.e()?e:c&&0<=a(u,h)?(null!=o&&(Kd(o,new J("child_removed",u.U,u.name)),Kd(o,new J("child_added",i,n))),e.W(n,i).W(u.name,H)):e}function Yd(t,e){this.me=t,this.og=e}function Zd(t){this.X=t}function ie(t,e,n,i,r,o){var a,s=e.Q;if(null!=i.xc(n))return e;if(n.e())O(lc(e.w()),"If change path is empty, we must have complete server data"),mc(e.w())?(r=Yb(e),i=i.Cc(r instanceof fe?r:H)):i=i.Aa(Yb(e)),o=t.X.ya(e.Q.j(),i,o);else{var h=K(n);if(".priority"==h)O(1==le(n),"Can't have a priority with additional path components"),o=s.j(),a=e.w().j(),o=null!=(i=i.nd(n,o,a))?t.X.ia(o,i):s.j();else{var u=N(n);Wb(s,h)?(a=e.w().j(),i=null!=(i=i.nd(n,s.j(),a))?s.j().T(h).H(u,i):s.j().T(h)):i=i.Bc(h,e.w()),o=null!=i?t.X.H(s.j(),h,i,u,r,o):s.j()}}return ge(e,o,s.ga||n.e(),t.X.Ra())}function ae(t,e,n,i,r,o,a,s){var h=e.w();if(a=a?t.X:t.X.$b(),n.e())i=a.ya(h.j(),i,null);else if(a.Ra()&&!h.Yb)i=h.j().H(n,i),i=a.ya(h.j(),i,null);else{var u=K(n);if(!nc(h,n)&&1<le(n))return e;var c=N(n);i=h.j().T(u).H(c,i),i=".priority"==u?a.ia(h.j(),i):a.H(h.j(),u,i,c,Ub,null)}return h=h.ga||n.e(),ie(t,e=new je(e.Q,new Xb(i,h,a.Ra())),n,r,new Vb(r,e,o),s)}function $d(t,e,n,i,r,o,a){var s=e.Q;if(r=new Vb(r,e,o),n.e())a=t.X.ya(e.Q.j(),i,a),t=ge(e,a,!0,t.X.Ra());else if(".priority"===(o=K(n)))a=t.X.ia(e.Q.j(),i),t=ge(e,a,s.ga,s.Yb);else{n=N(n);var h=s.j().T(o);if(!n.e()){var u=r.uf(o);i=null!=u?".priority"===me(n)&&u.S(n.parent()).e()?u:u.H(n,i):H}h.ea(i)?t=e:(a=t.X.H(s.j(),o,i,n,r,a),t=ge(e,a,s.ga,t.X.Ra()))}return t}function ce(t,e,n,i,r,o,a){var s=e;return ne(i,(function(i,h){var u=n.o(i);Wb(e.Q,K(u))&&(s=$d(t,s,u,h,r,o,a))})),ne(i,(function(i,h){var u=n.o(i);Wb(e.Q,K(u))||(s=$d(t,s,u,h,r,o,a))})),s}function oe(t,e){return ne(e,(function(e,n){t=t.H(e,n)})),t}function de(t,e,n,i,r,o,a,s){if(e.w().j().e()&&!lc(e.w()))return e;var h=e;n=n.e()?i:pe(qe,n,i);var u=e.w().j();return n.children.ka((function(n,i){if(u.Fa(n)){var c=oe(c=e.w().j().T(n),i);h=ae(t,h,new P(n),c,r,o,a,s)}})),n.children.ka((function(n,i){var c=!Wb(e.w(),n)&&null==i.value;u.Fa(n)||c||(c=oe(c=e.w().j().T(n),i),h=ae(t,h,new P(n),c,r,o,a,s))})),h}function he(t,e,n,i,r,o,a){if(null!=r.xc(n))return e;var s=mc(e.w()),h=e.w();if(null!=i.value){if(n.e()&&h.ga||nc(h,n))return ae(t,e,n,h.j().S(n),r,o,s,a);if(n.e()){var u=qe;return h.j().R(re,(function(t,e){u=u.set(new P(t),e)})),de(t,e,n,u,r,o,s,a)}return e}return u=qe,ne(i,(function(t){var e=n.o(t);nc(h,e)&&(u=u.set(t,h.j().S(e)))})),de(t,e,n,u,r,o,s,a)}function se(){}Fd.prototype.qg=function(t,e){if(null==t.Za||null==e.Za)throw jd("Should only compare child_ events.");return this.g.compare(new L(t.Za,t.Na),new L(e.Za,e.Na))},h=Ld.prototype,h.H=function(t,e,n,i,r,o){return O(t.Mc(this.g),"A node must be indexed if only a child is updated"),(r=t.T(e)).S(i).ea(n.S(i))&&r.e()==n.e()?t:(null!=o&&(n.e()?t.Fa(e)?Kd(o,new J("child_removed",r,e)):O(t.L(),"A child remove without an old child only makes sense on a leaf node"):r.e()?Kd(o,new J("child_added",n,e)):Kd(o,new J("child_changed",n,e,r))),t.L()&&n.e()?t:t.W(e,n).pb(this.g))},h.ya=function(t,e,n){return null!=n&&(t.L()||t.R(R,(function(t,i){e.Fa(t)||Kd(n,new J("child_removed",i,t))})),e.L()||e.R(R,(function(e,i){if(t.Fa(e)){var r=t.T(e);r.ea(i)||Kd(n,new J("child_changed",i,e,r))}else Kd(n,new J("child_added",i,e))}))),e.pb(this.g)},h.ia=function(t,e){return t.e()?H:t.ia(e)},h.Ra=function(){return!1},h.$b=function(){return this},h=Md.prototype,h.matches=function(t){return 0>=this.g.compare(this.gd,t)&&0>=this.g.compare(t,this.Jc)},h.H=function(t,e,n,i,r,o){return this.matches(new L(e,n))||(n=H),this.Fe.H(t,e,n,i,r,o)},h.ya=function(t,e,n){e.L()&&(e=H);var i=(i=e.pb(this.g)).ia(H),r=this;return e.R(R,(function(t,e){r.matches(new L(t,e))||(i=i.W(t,H))})),this.Fe.ya(t,i,n)},h.ia=function(t){return t},h.Ra=function(){return!0},h.$b=function(){return this.Fe},h=Sd.prototype,h.H=function(t,e,n,i,r,o){return this.ua.matches(new L(e,n))||(n=H),t.T(e).ea(n)?t:t.Hb()<this.ma?this.ua.$b().H(t,e,n,i,r,o):Ud(this,t,e,n,r,o)},h.ya=function(t,e,n){var i;if(e.L()||e.e())i=H.pb(this.g);else if(2*this.ma<e.Hb()&&e.Mc(this.g)){i=H.pb(this.g),e=this.Nb?e.dc(this.ua.Jc,this.g):e.bc(this.ua.gd,this.g);for(var r=0;0<e.Ta.length&&r<this.ma;){var o=Ic(e);if(!(this.Nb?0>=this.g.compare(this.ua.gd,o):0>=this.g.compare(o,this.ua.Jc)))break;i=i.W(o.name,o.U),r++}}else{var a,s,h;if(i=(i=e.pb(this.g)).ia(H),this.Nb){e=i.xf(this.g),a=this.ua.Jc,s=this.ua.gd;var u=Vd(this.g);h=function(t,e){return u(e,t)}}else e=i.ac(this.g),a=this.ua.gd,s=this.ua.Jc,h=Vd(this.g);r=0;for(var c=!1;0<e.Ta.length;)o=Ic(e),!c&&0>=h(a,o)&&(c=!0),c&&r<this.ma&&0>=h(o,s)?r++:i=i.W(o.name,H)}return this.ua.$b().ya(t,i,n)},h.ia=function(t){return t},h.Ra=function(){return!0},h.$b=function(){return this.ua.$b()},Zd.prototype.gb=function(t,e,n,i){var r,o=new Jd;if(e.type===Bc)e.source.Ae?n=$d(this,t,e.path,e.Ja,n,i,o):(O(e.source.tf,"Unknown source."),r=e.source.ef||mc(t.w())&&!e.path.e(),n=ae(this,t,e.path,e.Ja,n,i,r,o));else if(e.type===be)e.source.Ae?n=ce(this,t,e.path,e.children,n,i,o):(O(e.source.tf,"Unknown source."),r=e.source.ef||mc(t.w()),n=de(this,t,e.path,e.children,n,i,r,o));else if(e.type===ee)if(e.Yd)if(e=e.path,null!=n.xc(e))n=t;else{if(r=new Vb(n,t,i),i=t.Q.j(),e.e()||".priority"===K(e))lc(t.w())?e=n.Aa(Yb(t)):(e=t.w().j(),O(e instanceof fe,"serverChildren would be complete if leaf node"),e=n.Cc(e)),e=this.X.ya(i,e,o);else{var a=K(e),s=n.Bc(a,t.w());null==s&&Wb(t.w(),a)&&(s=i.T(a)),(e=null!=s?this.X.H(i,a,s,N(e),r,o):t.Q.j().Fa(a)?this.X.H(i,a,H,N(e),r,o):i).e()&&lc(t.w())&&((i=n.Aa(Yb(t))).L()&&(e=this.X.ya(e,i,o)))}i=lc(t.w())||null!=n.xc(M),n=ge(t,e,i,this.X.Ra())}else n=he(this,t,e.path,e.Ub,n,i,o);else{if(e.type!==Dc)throw jd("Unknown operation type: "+e.type);i=e.path,r=(e=t.w()).j(),a=e.ga||i.e(),n=ie(this,new je(t.Q,new Xb(r,a,e.Yb)),i,n,Ub,o)}return o=qa(o.ib),(e=(i=n).Q).ga&&(r=e.j().L()||e.j().e(),a=ke(t),(0<o.length||!t.Q.ga||r&&!e.j().ea(a)||!e.j().C().ea(a.C()))&&o.push(hc(ke(i)))),new Yd(n,o)};var te={};function Vd(t){return u(t.compare,t)}function ve(t){O(!t.e()&&".priority"!==K(t),"Can't create PathIndex with empty path or .priority key"),this.gc=t}function xe(){}se.prototype.Dd=function(t,e){return 0!==this.compare(new L("[MIN_NAME]",t),new L("[MIN_NAME]",e))},se.prototype.Wc=function(){return ue},ka(ve,se),h=ve.prototype,h.Lc=function(t){return!t.S(this.gc).e()},h.compare=function(t,e){var n=t.U.S(this.gc),i=e.U.S(this.gc);return 0===(n=n.Gc(i))?yc(t.name,e.name):n},h.Sc=function(t,e){var n=Q(t);return new L(e,n=H.H(this.gc,n))},h.Tc=function(){return new L("[MAX_NAME]",H.H(this.gc,we))},h.toString=function(){return this.gc.slice().join("/")},ka(xe,se),h=xe.prototype,h.compare=function(t,e){var n=t.U.C(),i=e.U.C();return 0===(n=n.Gc(i))?yc(t.name,e.name):n},h.Lc=function(t){return!t.C().e()},h.Dd=function(t,e){return!t.C().ea(e.C())},h.Wc=function(){return ue},h.Tc=function(){return new L("[MAX_NAME]",new Yc("[PRIORITY-POST]",we))},h.Sc=function(t,e){return new L(e,new Yc("[PRIORITY-POST]",Q(t)))},h.toString=function(){return".priority"};var R=new xe;function ye(){}ka(ye,se),h=ye.prototype,h.compare=function(t,e){return yc(t.name,e.name)},h.Lc=function(){throw jd("KeyIndex.isDefinedOn not expected to be called.")},h.Dd=function(){return!1},h.Wc=function(){return ue},h.Tc=function(){return new L("[MAX_NAME]",H)},h.Sc=function(t){return O(q(t),"KeyIndex indexValue must always be a string."),new L(t,H)},h.toString=function(){return".key"};var re=new ye;function ze(){}ka(ze,se),h=ze.prototype,h.compare=function(t,e){var n=t.U.Gc(e.U);return 0===n?yc(t.name,e.name):n},h.Lc=function(){return!0},h.Dd=function(t,e){return!t.ea(e)},h.Wc=function(){return ue},h.Tc=function(){return Ae},h.Sc=function(t,e){return new L(e,Q(t))},h.toString=function(){return".value"};var Be=new ze;function Ce(){this.Xb=this.ra=this.Pb=this.oa=this.la=!1,this.ma=0,this.Rb="",this.ic=null,this.Bb="",this.fc=null,this.zb="",this.g=R}var De=new Ce;function Td(t){return""===t.Rb?t.oa:"l"===t.Rb}function Od(t){return O(t.oa,"Only valid if start has been set"),t.ic}function Nd(t){return O(t.oa,"Only valid if start has been set"),t.Pb?t.Bb:"[MIN_NAME]"}function Rd(t){return O(t.ra,"Only valid if end has been set"),t.fc}function Pd(t){return O(t.ra,"Only valid if end has been set"),t.Xb?t.zb:"[MAX_NAME]"}function Ee(t){var e=new Ce;return e.la=t.la,e.ma=t.ma,e.oa=t.oa,e.ic=t.ic,e.Pb=t.Pb,e.Bb=t.Bb,e.ra=t.ra,e.fc=t.fc,e.Xb=t.Xb,e.zb=t.zb,e.g=t.g,e}function Fe(t,e){var n=Ee(t);return n.g=e,n}function Ge(t){var e={};if(t.oa&&(e.sp=t.ic,t.Pb&&(e.sn=t.Bb)),t.ra&&(e.ep=t.fc,t.Xb&&(e.en=t.zb)),t.la){e.l=t.ma;var n=t.Rb;""===n&&(n=Td(t)?"l":"r"),e.vf=n}return t.g!==R&&(e.i=t.g.toString()),e}function He(t){return!(t.oa||t.ra||t.la)}function Ie(t){return He(t)&&t.g==R}function Je(t){var e,n={};return Ie(t)||(t.g===R?e="$priority":t.g===Be?e="$value":t.g===re?e="$key":(O(t.g instanceof ve,"Unrecognized index type!"),e=t.g.toString()),n.orderBy=G(e),t.oa&&(n.startAt=G(t.ic),t.Pb&&(n.startAt+=","+G(t.Bb))),t.ra&&(n.endAt=G(t.fc),t.Xb&&(n.endAt+=","+G(t.zb))),t.la&&(Td(t)?n.limitToFirst=t.ma:n.limitToLast=t.ma)),n}function Ke(t,e){this.Ed=t,this.hc=e}function Le(t,e,n){return new Ke(ma(t.Ed,(function(i,r){var o=z(t.hc,r);if(O(o,"Missing index implementation for "+r),i===te){if(o.Lc(e.U)){for(var a=[],s=n.ac(wc),h=Ic(s);h;)h.name!=e.name&&a.push(h),h=Ic(s);return a.push(e),Me(a,Vd(o))}return te}return a=i,(o=n.get(e.name))&&(a=a.remove(new L(e.name,o))),a.Sa(e,e.U)})),t.hc)}function Ne(t,e,n){var i=ma(t.Ed,(function(t){if(t===te)return t;var i=n.get(e.name);return i?t.remove(new L(e.name,i)):t}));return new Ke(i,t.hc)}h=Ce.prototype,h.Le=function(t){var e=Ee(this);return e.la=!0,e.ma=t,e.Rb="",e},h.Me=function(t){var e=Ee(this);return e.la=!0,e.ma=t,e.Rb="l",e},h.Ne=function(t){var e=Ee(this);return e.la=!0,e.ma=t,e.Rb="r",e},h.ce=function(t,e){var n=Ee(this);return n.oa=!0,p(t)||(t=null),n.ic=t,null!=e?(n.Pb=!0,n.Bb=e):(n.Pb=!1,n.Bb=""),n},h.vd=function(t,e){var n=Ee(this);return n.ra=!0,p(t)||(t=null),n.fc=t,p(e)?(n.Xb=!0,n.zb=e):(n.nh=!1,n.zb=""),n},h.toString=function(){return G(Ge(this))},Ke.prototype.get=function(t){var e=z(this.Ed,t);if(!e)throw Error("No index defined for "+t);return e===te?null:e};var Oe=new Ke({".priority":te},{".priority":R});function Yc(t,e){this.B=t,O(p(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.ca=e||H,Pe(this.ca),this.Gb=null}var Qe=["object","boolean","number","string"];function fe(t,e,n){this.m=t,(this.ca=e)&&Pe(this.ca),t.e()&&O(!this.ca||this.ca.e(),"An empty node cannot have a priority"),this.Ab=n,this.Gb=null}h=Yc.prototype,h.L=function(){return!0},h.C=function(){return this.ca},h.ia=function(t){return new Yc(this.B,t)},h.T=function(t){return".priority"===t?this.ca:H},h.S=function(t){return t.e()?this:".priority"===K(t)?this.ca:H},h.Fa=function(){return!1},h.wf=function(){return null},h.W=function(t,e){return".priority"===t?this.ia(e):e.e()&&".priority"!==t?this:H.W(t,e).ia(this.ca)},h.H=function(t,e){var n=K(t);return null===n?e:e.e()&&".priority"!==n?this:(O(".priority"!==n||1===le(t),".priority must be the last token in a path"),this.W(n,H.H(N(t),e)))},h.e=function(){return!1},h.Hb=function(){return 0},h.R=function(){return!1},h.J=function(t){return t&&!this.C().e()?{".value":this.Ea(),".priority":this.C().J()}:this.Ea()},h.hash=function(){if(null===this.Gb){var t="";this.ca.e()||(t+="priority:"+Re(this.ca.J())+":");var e=typeof this.B;t=t+(e+":"),t="number"===e?t+Ad(this.B):t+this.B;this.Gb=ld(t)}return this.Gb},h.Ea=function(){return this.B},h.Gc=function(t){if(t===H)return 1;if(t instanceof fe)return-1;O(t.L(),"Unknown node type");var e=typeof t.B,n=typeof this.B,i=La(Qe,e),r=La(Qe,n);return O(0<=i,"Unknown leaf type: "+e),O(0<=r,"Unknown leaf type: "+n),i===r?"object"===n?0:this.B<t.B?-1:this.B===t.B?0:1:r-i},h.pb=function(){return this},h.Mc=function(){return!0},h.ea=function(t){return t===this||!!t.L()&&(this.B===t.B&&this.ca.ea(t.ca))},h.toString=function(){return G(this.J(!0))},h=fe.prototype,h.L=function(){return!1},h.C=function(){return this.ca||H},h.ia=function(t){return this.m.e()?this:new fe(this.m,t,this.Ab)},h.T=function(t){return".priority"===t?this.C():null===(t=this.m.get(t))?H:t},h.S=function(t){var e=K(t);return null===e?this:this.T(e).S(N(t))},h.Fa=function(t){return null!==this.m.get(t)},h.W=function(t,e){if(O(e,"We should always be passing snapshot nodes"),".priority"===t)return this.ia(e);var n,i,r=new L(t,e);return e.e()?(n=this.m.remove(t),r=Ne(this.Ab,r,this.m)):(n=this.m.Sa(t,e),r=Le(this.Ab,r,this.m)),i=n.e()?H:this.ca,new fe(n,i,r)},h.H=function(t,e){var n=K(t);if(null===n)return e;O(".priority"!==K(t)||1===le(t),".priority must be the last token in a path");var i=this.T(n).H(N(t),e);return this.W(n,i)},h.e=function(){return this.m.e()},h.Hb=function(){return this.m.count()};var Se=/^(0|[1-9]\d*)$/;function Wd(t,e){var n;return(n=(n=Te(t,e))?(n=n.Vc())&&n.name:t.m.Vc())?new L(n,t.m.get(n)):null}function Xd(t,e){var n;return(n=(n=Te(t,e))?(n=n.jc())&&n.name:t.m.jc())?new L(n,t.m.get(n)):null}function Te(t,e){return e===re?null:t.Ab.get(e.toString())}function Q(t,e){if(null===t)return H;var n=null;if("object"==typeof t&&".priority"in t?n=t[".priority"]:void 0!==e&&(n=e),O(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yc(t,Q(n));if(t instanceof Array){var i=H,r=t;return v(r,(function(t,e){if(y(r,e)&&"."!==e.substring(0,1)){var n=Q(t);!n.L()&&n.e()||(i=i.W(e,n))}})),i.ia(Q(n))}var o=[],a=!1,s=t;if(Fb(s,(function(t){if("string"!=typeof t||"."!==t.substring(0,1)){var e=Q(s[t]);e.e()||(a=a||!e.C().e(),o.push(new L(t,e)))}})),0==o.length)return H;var h=Me(o,xc,(function(t){return t.name}),zc);if(a){var u=Me(o,Vd(R));return new fe(h,Q(n),new Ke({".priority":u},{".priority":R}))}return new fe(h,Q(n),Oe)}h=fe.prototype,h.J=function(t){if(this.e())return null;var e={},n=0,i=0,r=!0;if(this.R(R,(function(o,a){e[o]=a.J(t),n++,r&&Se.test(o)?i=Math.max(i,Number(o)):r=!1})),!t&&r&&i<2*n){var o,a=[];for(o in e)a[o]=e[o];return a}return t&&!this.C().e()&&(e[".priority"]=this.C().J()),e},h.hash=function(){if(null===this.Gb){var t="";this.C().e()||(t+="priority:"+Re(this.C().J())+":"),this.R(R,(function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.Gb=""===t?"":ld(t)}return this.Gb},h.wf=function(t,e,n){return(n=Te(this,n))?(t=Gc(n,new L(t,e)))?t.name:null:Gc(this.m,t)},h.R=function(t,e){var n=Te(this,t);return n?n.ka((function(t){return e(t.name,t.U)})):this.m.ka(e)},h.ac=function(t){return this.bc(t.Wc(),t)},h.bc=function(t,e){if(n=Te(this,e))return n.bc(t,(function(t){return t}));for(var n,i=Jc(n=this.m.bc(t.name,wc));null!=i&&0>e.compare(i,t);)Ic(n),i=Jc(n);return n},h.xf=function(t){return this.dc(t.Tc(),t)},h.dc=function(t,e){if(n=Te(this,e))return n.dc(t,(function(t){return t}));for(var n,i=Jc(n=this.m.dc(t.name,wc));null!=i&&0<e.compare(i,t);)Ic(n),i=Jc(n);return n},h.Gc=function(t){return this.e()?t.e()?0:-1:t.L()||t.e()?1:t===we?-1:0},h.pb=function(t){if(t===re||sa(this.Ab.hc,t.toString()))return this;var e=this.Ab,n=this.m;O(t!==re,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i=[],r=!1,o=Ic(n=n.ac(wc));o;)r=r||t.Lc(o.U),i.push(o),o=Ic(n);return i=r?Me(i,Vd(t)):te,r=t.toString(),(n=wa(e.hc))[r]=t,(t=wa(e.Ed))[r]=i,new fe(this.m,this.ca,new Ke(t,n))},h.Mc=function(t){return t===re||sa(this.Ab.hc,t.toString())},h.ea=function(t){if(t===this)return!0;if(t.L())return!1;if(this.C().ea(t.C())&&this.m.count()===t.m.count()){var e=this.ac(R);t=t.ac(R);for(var n=Ic(e),i=Ic(t);n&&i;){if(n.name!==i.name||!n.U.ea(i.U))return!1;n=Ic(e),i=Ic(t)}return null===n&&null===i}return!1},h.toString=function(){return G(this.J(!0))};var Ue=Math.log(2);function Ve(t){this.count=parseInt(Math.log(t+1)/Ue,10),this.nf=this.count-1,this.ng=t+1&parseInt(Array(this.count+1).join("1"),2)}function We(t){var e=!(t.ng&1<<t.nf);return t.nf--,e}function Me(t,e,n,i){function r(e,i){if(0==(a=i-e))return null;if(1==a){var o=t[e];return new Kc(n?n(o):o,o.U,!1,null,null)}var a=r(e,o=parseInt(a/2,10)+e),s=r(o+1,i);o=t[o];return new Kc(n?n(o):o,o.U,!1,a,s)}t.sort(e);var o=function(e){function i(e,i){var h=s-e,u=s;s-=e;u=r(h+1,u),h=t[h],u=new Kc(n?n(h):h,h.U,i,null,u);o?o.left=u:a=u,o=u}for(var o=null,a=null,s=t.length,h=0;h<e.count;++h){var u=We(e),c=Math.pow(2,e.count-(h+1));u?i(c,!1):(i(c,!1),i(c,!0))}return a}(new Ve(t.length));return null!==o?new Ec(i||e,o):new Ec(i||e)}function Re(t){return"number"==typeof t?"number:"+Ad(t):"string:"+t}function Pe(t){if(t.L()){var e=t.J();O("string"==typeof e||"number"==typeof e||"object"==typeof e&&y(e,".sv"),"Priority must be a string or number.")}else O(t===we||t.e(),"priority of unexpected type.");O(t===we||t.C().e(),"Priority nodes can't have a priority of their own.")}var H=new fe(new Ec(zc),null,Oe);function Xe(){fe.call(this,new Ec(zc),H,Oe)}ka(Xe,fe),h=Xe.prototype,h.Gc=function(t){return t===this?0:1},h.ea=function(t){return t===this},h.C=function(){return this},h.T=function(){return H},h.e=function(){return!1};var we=new Xe,ue=new L("[MIN_NAME]",H),Ae=new L("[MAX_NAME]",we);function je(t,e){this.Q=t,this.ae=e}function ge(t,e,n,i){return new je(new Xb(e,n,i),t.ae)}function ke(t){return t.Q.ga?t.Q.j():null}function Yb(t){return t.ae.ga?t.ae.j():null}function Ye(t,e){this.Y=t;var n=new Ld((i=t.n).g),i=He(i)?new Ld(i.g):i.la?new Sd(i):new Md(i);this.Nf=new Zd(i);var r=e.w(),o=e.Q,a=n.ya(H,r.j(),null),s=i.ya(H,o.j(),null);this.Oa=new je(new Xb(s,o.ga,i.Ra()),new Xb(a,r.ga,n.Ra())),this.$a=[],this.ug=new Fd(t)}function Ze(t){return t.Y}function af(t,e){var n=t.Oa.Q,i=[];return n.j().L()||n.j().R(R,(function(t,e){i.push(new J("child_added",e,t))})),n.ga&&i.push(hc(n.j())),$e(t,i,n.j(),e)}function $e(t,e,n,i){return Gd(t.ug,e,n,i?[i]:t.$a)}function bf(t,e,n){this.type=be,this.source=t,this.path=e,this.children=n}function cf(t,e){this.f=pd("p:rest:"),this.G=t,this.Kb=e,this.Ca=null,this.ba={}}function df(t,e){return p(e)?"tag$"+e:(O(Ie(t.n),"should have a tag if it's not a default query."),t.path.toString())}function ef(t,e,n,i){(n=n||{}).format="export",t.Ca&&(n.auth=t.Ca);var r=(t.G.ob?"https://":"http://")+t.G.host+e+"?"+Ib(n);t.f("Sending REST request for "+r);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(i&&4===o.readyState){t.f("REST Response for "+r+" received. status:",o.status,"response:",o.responseText);var e=null;if(200<=o.status&&300>o.status){try{e=Rb(o.responseText)}catch(t){S("Failed to parse JSON response for "+r+": "+o.responseText)}i(null,e)}else 401!==o.status&&404!==o.status&&S("Got unsuccessful REST response for "+r+" Status: "+o.status),i(o.status);i=null}},o.open("GET",r,!0),o.send()}function ff(t){O(da(t)&&0<t.length,"Requires a non-empty array"),this.fg=t,this.Rc={}}function gf(t,e){O(Ra(t.fg,(function(t){return t===e})),"Unknown event: "+e)}je.prototype.w=function(){return this.ae},h=Ye.prototype,h.w=function(){return this.Oa.w().j()},h.kb=function(t){var e=Yb(this.Oa);return e&&(He(this.Y.n)||!t.e()&&!e.T(K(t)).e())?e.S(t):null},h.e=function(){return 0===this.$a.length},h.Tb=function(t){this.$a.push(t)},h.nb=function(t,e){var n=[];if(e){O(null==t,"A cancel should cancel all event registrations.");var i=this.Y.path;Ma(this.$a,(function(t){(t=t.lf(e,i))&&n.push(t)}))}if(t){for(var r=[],o=0;o<this.$a.length;++o){var a=this.$a[o];if(a.matches(t)){if(t.yf()){r=r.concat(this.$a.slice(o+1));break}}else r.push(a)}this.$a=r}else this.$a=[];return n},h.gb=function(t,e,n){t.type===be&&null!==t.source.Lb&&(O(Yb(this.Oa),"We should always have a full cache before handling merges"),O(ke(this.Oa),"Missing event cache, even though we have a server cache"));var i=this.Oa;return t=this.Nf.gb(i,t,e,n),e=this.Nf,n=t.me,O(n.Q.j().Mc(e.X.g),"Event snap not indexed"),O(n.w().j().Mc(e.X.g),"Server snap not indexed"),O(lc(t.me.w())||!lc(i.w()),"Once a server snap is complete, it should never go back"),this.Oa=t.me,$e(this,t.og,t.me.Q.j(),null)},bf.prototype.$c=function(t){return this.path.e()?(t=this.children.subtree(new P(t))).e()?null:t.value?new Ac(this.source,M,t.value):new bf(this.source,M,t):(O(K(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new bf(this.source,N(this.path),this.children))},bf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},h=cf.prototype,h.Cf=function(t,e,n,i){var r=t.path.toString();this.f("Listen called for "+r+" "+t.wa());var o=df(t,n),a={};this.ba[o]=a,t=Je(t.n);var s=this;ef(this,r+".json",t,(function(t,e){var h=e;404===t&&(t=h=null),null===t&&s.Kb(r,h,!1,n),z(s.ba,o)===a&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)}))},h.$f=function(t,e){var n=df(t,e);delete this.ba[n]},h.O=function(t,e){this.Ca=t;var n=(i=Cd(t)).data,i=i.Ec&&i.Ec.exp;e&&e("ok",{auth:n,expires:i})},h.je=function(t){this.Ca=null,t("ok",null)},h.Qe=function(){},h.Gf=function(){},h.Md=function(){},h.put=function(){},h.Df=function(){},h.Ye=function(){},ff.prototype.ie=function(t,e){var n,i=(n=this.Rc[t]||[]).length;if(0<i){for(var r=Array(i),o=0;o<i;o++)r[o]=n[o];n=r}else n=[];for(i=0;i<n.length;i++)n[i].Dc.apply(n[i].Qa,Array.prototype.slice.call(arguments,1))},ff.prototype.Ib=function(t,e,n){gf(this,t),this.Rc[t]=this.Rc[t]||[],this.Rc[t].push({Dc:e,Qa:n}),(t=this.Ee(t))&&e.apply(n,t)},ff.prototype.mc=function(t,e,n){gf(this,t),t=this.Rc[t]||[];for(var i=0;i<t.length;i++)if(t[i].Dc===e&&(!n||n===t[i].Qa)){t.splice(i,1);break}};var hf=function(){var t=0,e=[];return function(n){var i=n===t;t=n;for(var r=Array(8),o=7;0<=o;o--)r[o]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(O(0===n,"Cannot push at time == 0"),n=r.join(""),i){for(o=11;0<=o&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;12>o;o++)e[o]=Math.floor(64*Math.random());for(o=0;12>o;o++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e[o]);return O(20===n.length,"nextPushId: Length should be 20."),n}}();function jf(){if(ff.call(this,["online"]),this.oc=!0,"undefined"!=typeof window&&void 0!==window.addEventListener){var t=this;window.addEventListener("online",(function(){t.oc||(t.oc=!0,t.ie("online",!0))}),!1),window.addEventListener("offline",(function(){t.oc&&(t.oc=!1,t.ie("online",!1))}),!1)}}function kf(){var t,e;if(ff.call(this,["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.Sb=!0,e){var n=this;document.addEventListener(e,(function(){var e=!document[t];e!==n.Sb&&(n.Sb=e,n.ie("visible",e))}),!1)}}function P(t,e){if(1==arguments.length){this.u=t.split("/");for(var n=0,i=0;i<this.u.length;i++)0<this.u[i].length&&(this.u[n]=this.u[i],n++);this.u.length=n,this.aa=0}else this.u=t,this.aa=e}function lf(t,e){var n=K(t);if(null===n)return e;if(n===K(e))return lf(N(t),N(e));throw Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function mf(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=yc(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1}function K(t){return t.aa>=t.u.length?null:t.u[t.aa]}function le(t){return t.u.length-t.aa}function N(t){var e=t.aa;return e<t.u.length&&e++,new P(t.u,e)}function me(t){return t.aa<t.u.length?t.u[t.u.length-1]:null}ka(jf,ff),jf.prototype.Ee=function(t){return O("online"===t,"Unknown event type: "+t),[this.oc]},ba(jf),ka(kf,ff),kf.prototype.Ee=function(t){return O("visible"===t,"Unknown event type: "+t),[this.Sb]},ba(kf),h=P.prototype,h.toString=function(){for(var t="",e=this.aa;e<this.u.length;e++)""!==this.u[e]&&(t+="/"+this.u[e]);return t||"/"},h.slice=function(t){return this.u.slice(this.aa+(t||0))},h.parent=function(){if(this.aa>=this.u.length)return null;for(var t=[],e=this.aa;e<this.u.length-1;e++)t.push(this.u[e]);return new P(t,0)},h.o=function(t){for(var e=[],n=this.aa;n<this.u.length;n++)e.push(this.u[n]);if(t instanceof P)for(n=t.aa;n<t.u.length;n++)e.push(t.u[n]);else for(t=t.split("/"),n=0;n<t.length;n++)0<t[n].length&&e.push(t[n]);return new P(e,0)},h.e=function(){return this.aa>=this.u.length},h.ea=function(t){if(le(this)!==le(t))return!1;for(var e=this.aa,n=t.aa;e<=this.u.length;e++,n++)if(this.u[e]!==t.u[n])return!1;return!0},h.contains=function(t){var e=this.aa,n=t.aa;if(le(this)>le(t))return!1;for(;e<this.u.length;){if(this.u[e]!==t.u[n])return!1;++e,++n}return!0};var M=new P("");function nf(t,e){this.Ua=t.slice(),this.Ka=Math.max(1,this.Ua.length),this.pf=e;for(var n=0;n<this.Ua.length;n++)this.Ka+=Pb(this.Ua[n]);of(this)}function of(t){if(768<t.Ka)throw Error(t.pf+"has a key path longer than 768 bytes ("+t.Ka+").");if(32<t.Ua.length)throw Error(t.pf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pf(t))}function pf(t){return 0==t.Ua.length?"":"in property '"+t.Ua.join(".")+"'"}function qf(t,e){this.value=t,this.children=e||rf}nf.prototype.push=function(t){0<this.Ua.length&&(this.Ka+=1),this.Ua.push(t),this.Ka+=Pb(t),of(this)},nf.prototype.pop=function(){var t=this.Ua.pop();this.Ka-=Pb(t),0<this.Ua.length&&--this.Ka};var rf=new Ec((function(t,e){return t===e?0:t<e?-1:1}));function sf(t){var e=qe;return v(t,(function(t,n){e=e.set(new P(n),t)})),e}function tf(t,e,n){if(null!=t.value&&n(t.value))return{path:M,value:t.value};if(e.e())return null;var i=K(e);return null!==(t=t.children.get(i))?null!=(e=tf(t,N(e),n))?{path:new P(i).o(e.path),value:e.value}:null:null}function uf(t,e){return tf(t,e,(function(){return!0}))}function pe(t,e,n){if(e.e())return n;var i=K(e);return i=(e=pe(t.children.get(i)||qe,N(e),n)).e()?t.children.remove(i):t.children.Sa(i,e),new qf(t.value,i)}function vf(t,e){return wf(t,M,e)}function wf(t,e,n){var i={};return t.children.ka((function(t,r){i[t]=wf(r,e.o(t),n)})),n(e,t.value,i)}function xf(t,e,n){return yf(t,e,M,n)}function yf(t,e,n,i){var r=!!t.value&&i(n,t.value);return r||(e.e()?null:(r=K(e),(t=t.children.get(r))?yf(t,N(e),n.o(r),i):null))}function zf(t,e,n){Af(t,e,M,n)}function Af(t,e,n,i){if(e.e())return t;t.value&&i(n,t.value);var r=K(e);return(t=t.children.get(r))?Af(t,N(e),n.o(r),i):qe}function ne(t,e){Bf(t,M,e)}function Bf(t,e,n){t.children.ka((function(t,i){Bf(i,e.o(t),n)})),t.value&&n(e,t.value)}function Cf(t,e){t.children.ka((function(t,n){n.value&&e(t,n.value)}))}h=qf.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(t){if(t.e())return this;var e=this.children.get(K(t));return null!==e?e.subtree(N(t)):qe},h.set=function(t,e){if(t.e())return new qf(e,this.children);var n=K(t),i=(this.children.get(n)||qe).set(N(t),e);n=this.children.Sa(n,i);return new qf(this.value,n)},h.remove=function(t){if(t.e())return this.children.e()?qe:new qf(null,this.children);var e=K(t),n=this.children.get(e);return n?(e=(t=n.remove(N(t))).e()?this.children.remove(e):this.children.Sa(e,t),null===this.value&&e.e()?qe:new qf(this.value,e)):this},h.get=function(t){if(t.e())return this.value;var e=this.children.get(K(t));return e?e.get(N(t)):null};var qe=new qf(null);function Df(t,e,n){this.type=ee,this.source=Ef,this.path=t,this.Ub=e,this.Yd=n}qf.prototype.toString=function(){var t={};return ne(this,(function(e,n){t[e.toString()]=n.toString()})),G(t)},Df.prototype.$c=function(t){return this.path.e()?null!=this.Ub.value?(O(this.Ub.children.e(),"affectedTree should not have overlapping affected paths."),this):(t=this.Ub.subtree(new P(t)),new Df(M,t,this.Yd)):(O(K(this.path)===t,"operationForChild called for unrelated child."),new Df(N(this.path),this.Ub,this.Yd))},Df.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Yd+" affectedTree="+this.Ub+")"};var Bc=0,be=1,ee=2,Dc=3;function Ff(t,e,n,i){this.Ae=t,this.tf=e,this.Lb=n,this.ef=i,O(!i||e,"Tagged queries must be from server.")}var Ef=new Ff(!0,!1,null,!1),Gf=new Ff(!1,!0,null,!1);function Hf(t){this.Z=t}Ff.prototype.toString=function(){return this.Ae?"user":this.ef?"server(queryID="+this.Lb+")":"server"};var If=new Hf(new qf(null));function Jf(t,e,n){if(e.e())return new Hf(new qf(n));if(null!=(r=uf(t.Z,e))){var i=r.path,r=r.value;return e=lf(i,e),r=r.H(e,n),new Hf(t.Z.set(i,r))}return new Hf(t=pe(t.Z,e,new qf(n)))}function Kf(t,e,n){var i=t;return Fb(n,(function(t,n){i=Jf(i,e.o(t),n)})),i}function Lf(t,e){var n=uf(t.Z,e);return null!=n?t.Z.get(n.path).S(lf(n.path,e)):null}function Mf(t){var e=[],n=t.Z.value;return null!=n?n.L()||n.R(R,(function(t,n){e.push(new L(t,n))})):t.Z.children.ka((function(t,n){null!=n.value&&e.push(new L(t,n.value))})),e}function Nf(t,e){if(e.e())return t;var n=Lf(t,e);return new Hf(null!=n?new qf(n):t.Z.subtree(e))}function Of(t,e,n){if(null!=e.value)return n.H(t,e.value);var i=null;return e.children.ka((function(e,r){".priority"===e?(O(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Of(t.o(e),r,n)})),n.S(t).e()||null===i||(n=n.H(t.o(".priority"),i)),n}function Pf(){this.V=If,this.pa=[],this.Pc=-1}function Qf(t,e){for(var n=0;n<t.pa.length;n++){var i=t.pa[n];if(i.md===e)return i}return null}function Rf(t,e){return t.Ja?t.path.contains(e):!!ta(t.children,(function(n,i){return t.path.o(i).contains(e)}))}function Tf(t){return t.visible}function Sf(t,e,n){for(var i=If,r=0;r<t.length;++r){var o=t[r];if(e(o)){var a=o.path;if(o.Ja)n.contains(a)?i=Jf(i,a=lf(n,a),o.Ja):a.contains(n)&&(a=lf(a,n),i=Jf(i,M,o.Ja.S(a)));else{if(!o.children)throw jd("WriteRecord should have .snap or .children");n.contains(a)?i=Kf(i,a=lf(n,a),o.children):a.contains(n)&&((a=lf(a,n)).e()?i=Kf(i,M,o.children):(o=z(o.children,K(a)))&&(o=o.S(N(a)),i=Jf(i,M,o)))}}}return i}function Uf(t,e){this.Qb=t,this.Z=e}function Vf(){this.children={},this.pd=0,this.value=null}function Wf(t,e,n){this.Jd=t||"",this.Ha=e||null,this.A=n||new Vf}function Xf(t,e){for(var n,i=e instanceof P?e:new P(e),r=t;null!==(n=K(i));)r=new Wf(n,r,z(r.A.children,n)||new Vf),i=N(i);return r}function Yf(t,e){O(void 0!==e,"Cannot set value to undefined"),t.A.value=e,Zf(t)}function $f(t,e,n,i){n&&!i&&e(t),t.R((function(t){$f(t,e,!0,i)})),n&&i&&e(t)}function ag(t,e){for(var n=t.parent();null!==n&&!e(n);)n=n.parent()}function Zf(t){if(null!==t.Ha){var e=t.Ha,n=t.Jd,i=t.e(),r=y(e.A.children,n);i&&r?(delete e.A.children[n],e.A.pd--,Zf(e)):i||r||(e.A.children[n]=t.A,e.A.pd++,Zf(e))}}Hf.prototype.Ud=function(t){return t.e()?If:new Hf(t=pe(this.Z,t,qe))},Hf.prototype.e=function(){return this.Z.e()},Hf.prototype.apply=function(t){return Of(M,this.Z,t)},h=Pf.prototype,h.Ud=function(t){var e=Sa(this.pa,(function(e){return e.md===t}));O(0<=e,"removeWrite called with nonexistent writeId.");var n=this.pa[e];this.pa.splice(e,1);for(var i=n.visible,r=!1,o=this.pa.length-1;i&&0<=o;){var a=this.pa[o];a.visible&&(o>=e&&Rf(a,n.path)?i=!1:n.path.contains(a.path)&&(r=!0)),o--}if(i){if(r)this.V=Sf(this.pa,Tf,M),this.Pc=0<this.pa.length?this.pa[this.pa.length-1].md:-1;else if(n.Ja)this.V=this.V.Ud(n.path);else{var s=this;v(n.children,(function(t,e){s.V=s.V.Ud(n.path.o(e))}))}return!0}return!1},h.Aa=function(t,e,n,i){if(n||i){var r=Nf(this.V,t);return!i&&r.e()?e:i||null!=e||null!=Lf(r,M)?(r=Sf(this.pa,(function(e){return(e.visible||i)&&(!n||!(0<=La(n,e.md)))&&(e.path.contains(t)||t.contains(e.path))}),t),e=e||H,r.apply(e)):null}return null!=(r=Lf(this.V,t))?r:(r=Nf(this.V,t)).e()?e:null!=e||null!=Lf(r,M)?(e=e||H,r.apply(e)):null},h.Cc=function(t,e){var n=H,i=Lf(this.V,t);if(i)i.L()||i.R(R,(function(t,e){n=n.W(t,e)}));else if(e){var r=Nf(this.V,t);e.R(R,(function(t,e){var i=Nf(r,new P(t)).apply(e);n=n.W(t,i)})),Ma(Mf(r),(function(t){n=n.W(t.name,t.U)}))}else r=Nf(this.V,t),Ma(Mf(r),(function(t){n=n.W(t.name,t.U)}));return n},h.nd=function(t,e,n,i){return O(n||i,"Either existingEventSnap or existingServerSnap must exist"),t=t.o(e),null!=Lf(this.V,t)?null:(t=Nf(this.V,t)).e()?i.S(e):t.apply(i.S(e))},h.Bc=function(t,e,n){t=t.o(e);var i=Lf(this.V,t);return null!=i?i:Wb(n,e)?Nf(this.V,t).apply(n.j().T(e)):null},h.xc=function(t){return Lf(this.V,t)},h.qe=function(t,e,n,i,r,o){var a;if(null==(a=Lf(t=Nf(this.V,t),M))){if(null==e)return[];a=t.apply(e)}if((a=a.pb(o)).e()||a.L())return[];for(e=[],t=Vd(o),o=Ic(r=r?a.dc(n,o):a.bc(n,o));o&&e.length<i;)0!==t(o,n)&&e.push(o),o=Ic(r);return e},h=Uf.prototype,h.Aa=function(t,e,n){return this.Z.Aa(this.Qb,t,e,n)},h.Cc=function(t){return this.Z.Cc(this.Qb,t)},h.nd=function(t,e,n){return this.Z.nd(this.Qb,t,e,n)},h.xc=function(t){return this.Z.xc(this.Qb.o(t))},h.qe=function(t,e,n,i,r){return this.Z.qe(this.Qb,t,e,n,i,r)},h.Bc=function(t,e){return this.Z.Bc(this.Qb,t,e)},h.o=function(t){return new Uf(this.Qb.o(t),this.Z)},h=Wf.prototype,h.Ea=function(){return this.A.value},h.clear=function(){this.A.value=null,this.A.children={},this.A.pd=0,Zf(this)},h.zd=function(){return 0<this.A.pd},h.e=function(){return null===this.Ea()&&!this.zd()},h.R=function(t){var e=this;v(this.A.children,(function(n,i){t(new Wf(i,e,n))}))},h.path=function(){return new P(null===this.Ha?this.Jd:this.Ha.path()+"/"+this.Jd)},h.name=function(){return this.Jd},h.parent=function(){return this.Ha};var bg=/[\[\].#$\/\u0000-\u001F\u007F]/,cg=/[\[\].#$\u0000-\u001F\u007F]/,dg=/^[a-zA-Z][a-zA-Z._\-+]+$/;function eg(t){return q(t)&&0!==t.length&&!bg.test(t)}function fg(t){return null===t||q(t)||fa(t)&&!td(t)||ga(t)&&y(t,".sv")}function gg(t,e,n,i){i&&!p(e)||hg(E(t,1,i),e,n)}function hg(t,e,n){if(n instanceof P&&(n=new nf(n,t)),!p(e))throw Error(t+"contains undefined "+pf(n));if(r(e))throw Error(t+"contains a function "+pf(n)+" with contents: "+e.toString());if(td(e))throw Error(t+"contains "+e.toString()+" "+pf(n));if(q(e)&&e.length>10485760/3&&10485760<Pb(e))throw Error(t+"contains a string greater than 10485760 utf8 bytes "+pf(n)+" ('"+e.substring(0,50)+"...')");if(ga(e)){var i=!1,o=!1;if(Fb(e,(function(e,r){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!eg(e)))throw Error(t+" contains an invalid key ("+e+") "+pf(n)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.push(e),hg(t,r,n),n.pop()})),i&&o)throw Error(t+' contains ".value" child '+pf(n)+" in addition to actual children.")}}function ig(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if((".priority"!==r[o]||o!==r.length-1)&&!eg(r[o]))throw Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');for(e.sort(mf),r=null,n=0;n<e.length;n++){if(i=e[n],null!==r&&r.contains(i))throw Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}function jg(t,e,n){var i=E(t,1,!1);if(!ga(e)||da(e))throw Error(i+" must be an object containing the children to replace.");var r=[];Fb(e,(function(t,e){var o=new P(t);if(hg(i,e,n.o(o)),".priority"===me(o)&&!fg(e))throw Error(i+"contains an invalid value for '"+o.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(o)})),ig(i,r)}function kg(t,e,n){if(td(n))throw Error(E(t,e,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fg(n))throw Error(E(t,e,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function lg(t,e,n){if(!n||p(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(E(t,1,n)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function mg(t,e){if(p(e)&&!eg(e))throw Error(E(t,2,!0)+'was an invalid key: "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function ng(t,e){if(!q(e)||0===e.length||cg.test(e))throw Error(E(t,1,!1)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function og(t,e){if(".info"===K(e))throw Error(t+" failed: Can't modify data under /.info/")}function pg(t,e){if(!q(e))throw Error(E(t,1,!1)+"must be a valid credential (a string).")}function qg(t,e,n){if(!q(n))throw Error(E(t,e,!1)+"must be a valid string.")}function rg(t,e){if(qg(t,1,e),!dg.test(e))throw Error(E(t,1,!1)+"'"+e+"' is not a valid authentication provider.")}function sg(t,e,n,i){if((!i||p(n))&&(!ga(n)||null===n))throw Error(E(t,e,i)+"must be a valid object.")}function tg(t,e,n){if(!ga(e)||!y(e,n))throw Error(E(t,1,!1)+'must contain the key "'+n+'"');if(!q(z(e,n)))throw Error(E(t,1,!1)+'must contain the key "'+n+'" with type "string"')}function ug(){this.set={}}function vg(t,e){v(t.set,(function(t,n){e(n,t)}))}function Vc(){this.m=this.B=null}function wg(t,e){if(e.e())return t.B=null,t.m=null,!0;if(null!==t.B){if(t.B.L())return!1;var n=t.B;return t.B=null,n.R(R,(function(e,n){t.rc(new P(e),n)})),wg(t,e)}return null===t.m||(n=K(e),e=N(e),t.m.contains(n)&&wg(t.m.get(n),e)&&t.m.remove(n),!!t.m.e()&&(t.m=null,!0))}function Wc(t,e,n){null!==t.B?n(e,t.B):t.R((function(t,i){Wc(i,new P(e.toString()+"/"+t),n)}))}h=ug.prototype,h.add=function(t,e){this.set[t]=null===e||e},h.contains=function(t){return y(this.set,t)},h.get=function(t){return this.contains(t)?this.set[t]:void 0},h.remove=function(t){delete this.set[t]},h.clear=function(){this.set={}},h.e=function(){return va(this.set)},h.count=function(){return oa(this.set)},h.keys=function(){var t=[];return v(this.set,(function(e,n){t.push(n)})),t},Vc.prototype.find=function(t){if(null!=this.B)return this.B.S(t);if(t.e()||null==this.m)return null;var e=K(t);return t=N(t),this.m.contains(e)?this.m.get(e).find(t):null},Vc.prototype.rc=function(t,e){if(t.e())this.B=e,this.m=null;else if(null!==this.B)this.B=this.B.H(t,e);else{null==this.m&&(this.m=new ug);var n=K(t);this.m.contains(n)||this.m.add(n,new Vc),n=this.m.get(n),t=N(t),n.rc(t,e)}},Vc.prototype.R=function(t){null!==this.m&&vg(this.m,(function(e,n){t(e,n)}))};var xg="auth.firebase.com";function yg(t,e,n){this.qd=t||{},this.he=e||{},this.fb=n||{},this.qd.remember||(this.qd.remember="default")}var zg=["remember","redirectTo"];function Ag(t){var e={},n={};return Fb(t||{},(function(t,i){0<=La(zg,t)?e[t]=i:n[t]=i})),new yg(e,{},n)}function Bg(t,e){this.Ue=["session",t.Rd,t.lc].join(":"),this.ee=e}function Cg(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Dg(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cg())}function Eg(){return"undefined"!=typeof location&&/^file:\//.test(location.href)}function Fg(t){var e=Cg();if(""===e)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((e=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<e.length)return parseFloat(e[1])>=t}else if(-1<e.indexOf("Trident")&&(e=e.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<e.length)return parseFloat(e[1])>=t;return!1}function Gg(){var t,e=window.opener.frames;for(t=e.length-1;0<=t;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&"__winchan_relay_frame"===e[t].name)return e[t]}catch(t){}return null}function Hg(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,!1)}function Ig(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener&&t.removeEventListener(e,n,!1)}function Jg(t){/^https?:\/\//.test(t)||(t=window.location.href);var e=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(t);return e?e[1]:t}function Kg(t){var e="";try{var n=Jb(t=t.replace(/.*\?/,""));n&&y(n,"__firebase_request_key")&&(e=z(n,"__firebase_request_key"))}catch(t){}return e}function Lg(){try{var t=(t=(t=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")).replace(/\?$/,"")).replace(/^#+$/,"");document.location.hash=t}catch(t){}}function Mg(){var t=sd(xg);return t.scheme+"://"+t.host+"/v2"}function Ng(t){return Mg()+"/"+t+"/auth/channel"}function Og(t){var e=this;if(this.hb=t,this.fe="*",Fg(8)?this.Uc=this.Cd=Gg():(this.Uc=window.opener,this.Cd=window),!e.Uc)throw"Unable to find relay frame";Hg(this.Cd,"message",u(this.nc,this)),Hg(this.Cd,"message",u(this.Ff,this));try{Pg(this,{a:"ready"})}catch(t){Hg(this.Uc,"load",(function(){Pg(e,{a:"ready"})}))}Hg(window,"unload",u(this.Mg,this))}function Pg(t,e){e=G(e),Fg(8)?t.Uc.doPost(e,t.fe):t.Uc.postMessage(e,t.fe)}function Qg(t){this.tc=Fa()+Fa()+Fa(),this.Kf=t}Bg.prototype.set=function(t,e){if(!e){if(!this.ee.length)throw Error("fb.login.SessionManager : No storage options available!");e=this.ee[0]}e.set(this.Ue,t)},Bg.prototype.get=function(){var t=Oa(this.ee,u(this.Bg,this));return Va(t=Na(t,(function(t){return null!==t})),(function(t,e){return Dd(e.token)-Dd(t.token)})),0<t.length?t.shift():null},Bg.prototype.Bg=function(t){try{var e=t.get(this.Ue);if(e&&e.token)return e}catch(t){}return null},Bg.prototype.clear=function(){var t=this;Ma(this.ee,(function(e){e.remove(t.Ue)}))},Og.prototype.nc=function(t){var e,n=this;try{e=Rb(t.data)}catch(t){}e&&"request"===e.a&&(Ig(window,"message",this.nc),this.fe=t.origin,this.hb&&setTimeout((function(){n.hb(n.fe,e.d,(function(t,e){n.mg=!e,n.hb=void 0,Pg(n,{a:"response",d:t,forceKeepWindowOpen:e})}))}),0))},Og.prototype.Mg=function(){try{Ig(this.Cd,"message",this.Ff)}catch(t){}this.hb&&(Pg(this,{a:"error",d:"unknown closed window"}),this.hb=void 0);try{window.close()}catch(t){}},Og.prototype.Ff=function(t){if(this.mg&&"die"===t.data)try{window.close()}catch(t){}},Qg.prototype.open=function(t,e){cd.set("redirect_request_id",this.tc),cd.set("redirect_request_id",this.tc),e.requestId=this.tc,e.redirectTo=e.redirectTo||window.location.href,t+=(/\?/.test(t)?"":"?")+Ib(e),window.location=t},Qg.isAvailable=function(){return!Eg()&&!Dg()},Qg.prototype.Fc=function(){return"redirect"};var Rg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function Sg(t){var e=Error(z(Rg,t),t);return e.code=t,e}function Tg(t){var e;(e=!t.window_features)||(e=-1!==(e=Cg()).indexOf("Fennec/")||-1!==e.indexOf("Firefox/")&&-1!==e.indexOf("Android")),e&&(t.window_features=void 0),t.window_name||(t.window_name="_blank"),this.options=t}function Ug(t){t.method||(t.method="GET"),t.headers||(t.headers={}),t.headers.content_type||(t.headers.content_type="application/json"),t.headers.content_type=t.headers.content_type.toLowerCase(),this.options=t}function Vg(t){this.tc=Fa()+Fa()+Fa(),this.Kf=t}function Wg(t){t.callback_parameter||(t.callback_parameter="callback"),this.options=t,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function Xg(t,e,n){setTimeout((function(){try{var i=document.createElement("script");i.type="text/javascript",i.id=t,i.async=!0,i.src=e,i.onerror=function(){var e=document.getElementById(t);null!==e&&e.parentNode.removeChild(e),n&&n(Sg("NETWORK_ERROR"))};var r=document.getElementsByTagName("head");(r&&0!=r.length?r[0]:document.documentElement).appendChild(i)}catch(t){n&&n(Sg("NETWORK_ERROR"))}}),0)}function Yg(t,e,n,i){ff.call(this,["auth_status"]),this.G=t,this.hf=e,this.hh=n,this.Pe=i,this.wc=new Bg(t,[bd,cd]),this.qb=null,this.We=!1,Zg(this)}function Zg(t){cd.get("redirect_request_id")&&$g(t);var e=t.wc.get();e&&e.token?(ah(t,e),t.hf(e.token,(function(n,i){bh(t,n,i,!1,e.token,e)}),(function(e,n){ch(t,"resumeSession()",e,n)}))):ah(t,null)}function dh(t,e,n,i,r,o){"firebaseio-demo.com"===t.G.domain&&S("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),t.hf(e,(function(o,a){bh(t,o,a,!0,e,n,i||{},r)}),(function(e,n){ch(t,"auth()",e,n,o)}))}function eh(t,e){t.wc.clear(),ah(t,null),t.hh((function(t,n){if("ok"===t)T(e,null);else{var i=(t||"error").toUpperCase(),r=i;n&&(r+=": "+n),(r=Error(r)).code=i,T(e,r)}}))}function bh(t,e,n,i,r,o,a,s){"ok"===e?(i&&(e=n.auth,o.auth=e,o.expires=n.expires,o.token=Ed(r)?r:"",n=null,e&&y(e,"uid")?n=z(e,"uid"):y(o,"uid")&&(n=z(o,"uid")),o.uid=n,n="custom",e&&y(e,"provider")?n=z(e,"provider"):y(o,"provider")&&(n=z(o,"provider")),o.provider=n,t.wc.clear(),Ed(r)&&(n=bd,"sessionOnly"===(a=a||{}).remember&&(n=cd),"none"!==a.remember&&t.wc.set(o,n)),ah(t,o)),T(s,null,o)):(t.wc.clear(),ah(t,null),o=t=(e||"error").toUpperCase(),n&&(o+=": "+n),(o=Error(o)).code=t,T(s,o))}function ch(t,e,n,i,r){S(e+" was canceled: "+i),t.wc.clear(),ah(t,null),(t=Error(i)).code=n.toUpperCase(),T(r,t)}function fh(t,e,n,i,r){gh(t),hh(t,[Ug,Wg],"/auth/"+e,n=new yg(i||{},{},n||{}),r)}function ih(t,e,n,i){gh(t);var r=[Tg,Vg];n=Ag(n);var o=625;"anonymous"===e||"password"===e?setTimeout((function(){T(i,Sg("TRANSPORT_UNAVAILABLE"))}),0):("github"===e&&(o=1025),n.he.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width="+o+",top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-o):0),n.he.relay_url=Ng(t.G.lc),n.he.requestWithCredential=u(t.uc,t),hh(t,r,"/auth/"+e,n,i))}function $g(t){if(n=cd.get("redirect_request_id")){var e=cd.get("redirect_client_options");cd.remove("redirect_request_id"),cd.remove("redirect_client_options");var n,i=[Ug,Wg];e=new yg(e,{},n={requestId:n,requestKey:Kg(document.location.hash)});t.We=!0,Lg(),hh(t,i,"/auth/session",e,function(){this.We=!1}.bind(t))}}function hh(t,e,n,i,r){jh(t,e,n,i,(function(e,n){!e&&n&&n.token&&n.uid?dh(t,n.token,n,i.qd,(function(t,e){t?T(r,t):T(r,null,e)})):T(r,e||Sg("UNKNOWN_ERROR"))}))}function jh(t,e,n,i,r){e=Na(e,(function(t){return"function"==typeof t.isAvailable&&t.isAvailable()})),0===e.length?setTimeout((function(){T(r,Sg("TRANSPORT_UNAVAILABLE"))}),0):(e=new(e.shift())(i.he),(i=Gb(i.fb)).v="js-"+Eb,i.transport=e.Fc(),i.suppress_status_codes=!0,t=Mg()+"/"+t.G.lc+n,e.open(t,i,(function(t,e){if(t)T(r,t);else if(e&&e.error){var n=Error(e.error.message);n.code=e.error.code,n.details=e.error.details,T(r,n)}else T(r,null,e)})))}function ah(t,e){var n=null!==t.qb||null!==e;t.qb=e,n&&t.ie("auth_status",e),t.Pe(null!==e)}function gh(t){var e=t.G;if("firebaseio.com"!==e.domain&&"firebaseio-demo.com"!==e.domain&&"auth.firebase.com"===xg)throw Error("This custom Firebase server ('"+t.G.domain+"') does not support delegated login.")}Tg.prototype.open=function(t,e,n){function i(t){if(o&&(document.body.removeChild(o),o=void 0),c&&(c=clearInterval(c)),Ig(window,"message",r),Ig(window,"unload",i),u&&!t)try{u.close()}catch(t){a.postMessage("die",h)}u=a=void 0}function r(t){if(t.origin===h)try{var e=Rb(t.data);"ready"===e.a?a.postMessage(f,h):"error"===e.a?(i(!1),n&&(n(e.d),n=null)):"response"===e.a&&(i(e.forceKeepWindowOpen),n&&(n(null,e.d),n=null))}catch(t){}}var o,a,s=Fg(8);if(!this.options.relay_url)return n(Error("invalid arguments: origin of url and relay_url must match"));var h=Jg(t);if(h!==Jg(this.options.relay_url))n&&setTimeout((function(){n(Error("invalid arguments: origin of url and relay_url must match"))}),0);else{s&&((o=document.createElement("iframe")).setAttribute("src",this.options.relay_url),o.style.display="none",o.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(o),a=o.contentWindow),t+=(/\?/.test(t)?"":"?")+Ib(e);var u=window.open(t,this.options.window_name,this.options.window_features);a||(a=u);var c=setInterval((function(){u&&u.closed&&(i(!1),n&&(n(Sg("USER_CANCELLED")),n=null))}),500),f=G({a:"request",d:e});Hg(window,"unload",i),Hg(window,"message",r)}},Tg.isAvailable=function(){var t;return(t="postMessage"in window&&!Eg())&&((t=Dg()||"undefined"!=typeof navigator&&(!!Cg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(t=Cg(),t="undefined"!=typeof navigator&&"undefined"!=typeof window&&!!(t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||t.match(/CriOS/)||t.match(/Twitter for iPhone/)||t.match(/FBAN\/FBIOS/)||window.navigator.standalone)),t=!t),t&&!Cg().match(/PhantomJS/)},Tg.prototype.Fc=function(){return"popup"},Ug.prototype.open=function(t,e,n){function i(){n&&(n(Sg("REQUEST_INTERRUPTED")),n=null)}var r,o=new XMLHttpRequest,a=this.options.method.toUpperCase();if(Hg(window,"beforeunload",i),o.onreadystatechange=function(){if(n&&4===o.readyState){var t;if(200<=o.status&&300>o.status){try{t=Rb(o.responseText)}catch(t){}n(null,t)}else 500<=o.status&&600>o.status?n(Sg("SERVER_ERROR")):n(Sg("NETWORK_ERROR"));n=null,Ig(window,"beforeunload",i)}},"GET"===a)t+=(/\?/.test(t)?"":"?")+Ib(e),r=null;else{var s=this.options.headers.content_type;"application/json"===s&&(r=G(e)),"application/x-www-form-urlencoded"===s&&(r=Ib(e))}for(var h in o.open(a,t,!0),ya(t={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},this.options.headers),t)o.setRequestHeader(h,t[h]);o.send(r)},Ug.isAvailable=function(){var t;return(t=!!window.XMLHttpRequest)&&(t=!((t=Cg()).match(/MSIE/)||t.match(/Trident/))||Fg(10)),t},Ug.prototype.Fc=function(){return"json"},Vg.prototype.open=function(t,e,n){function i(){n&&(n(Sg("USER_CANCELLED")),n=null)}var o,a=this,s=sd(xg);e.requestId=this.tc,e.redirectTo=s.scheme+"://"+s.host+"/blank/page.html",t+=/\?/.test(t)?"":"?",t+=Ib(e),(o=window.open(t,"_blank","location=no"))&&r(o.addEventListener)?(o.addEventListener("loadstart",(function(t){var e;if(e=t&&t.url)t:{try{var r=document.createElement("a");r.href=t.url,e=r.host===s.host&&"/blank/page.html"===r.pathname;break t}catch(t){}e=!1}e&&(t=Kg(t.url),o.removeEventListener("exit",i),o.close(),t=new yg(null,null,{requestId:a.tc,requestKey:t}),a.Kf.requestWithCredential("/auth/session",t,n),n=null)})),o.addEventListener("exit",i)):n(Sg("TRANSPORT_UNAVAILABLE"))},Vg.isAvailable=function(){return Dg()},Vg.prototype.Fc=function(){return"redirect"},Wg.prototype.open=function(t,e,n){function i(){n&&(n(Sg("REQUEST_INTERRUPTED")),n=null)}var r="fn"+(new Date).getTime()+Math.floor(99999*Math.random());e[this.options.callback_parameter]="__firebase_auth_jsonp."+r,t+=(/\?/.test(t)?"":"?")+Ib(e),Hg(window,"beforeunload",i),window.__firebase_auth_jsonp[r]=function(t){n&&(n(null,t),n=null),setTimeout((function(){window.__firebase_auth_jsonp[r]=void 0,va(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var t=document.getElementById(r);t&&t.parentNode.removeChild(t)}catch(t){}}),1),Ig(window,"beforeunload",i)},Xg(r,t,n)},Wg.isAvailable=function(){return"undefined"!=typeof document&&null!=document.createElement},Wg.prototype.Fc=function(){return"json"},ka(Yg,ff),h=Yg.prototype,h.Be=function(){return this.qb||null},h.ve=function(t,e){gh(this);var n=Ag(t);n.fb._method="POST",this.uc("/users",n,(function(t,n){t?T(e,t):T(e,t,n)}))},h.Xe=function(t,e){var n=this;gh(this);var i="/users/"+encodeURIComponent(t.email),r=Ag(t);r.fb._method="DELETE",this.uc(i,r,(function(t,i){!t&&i&&i.uid&&n.qb&&n.qb.uid&&n.qb.uid===i.uid&&eh(n),T(e,t)}))},h.se=function(t,e){gh(this);var n="/users/"+encodeURIComponent(t.email)+"/password",i=Ag(t);i.fb._method="PUT",i.fb.password=t.newPassword,this.uc(n,i,(function(t){T(e,t)}))},h.re=function(t,e){gh(this);var n="/users/"+encodeURIComponent(t.oldEmail)+"/email",i=Ag(t);i.fb._method="PUT",i.fb.email=t.newEmail,i.fb.password=t.password,this.uc(n,i,(function(t){T(e,t)}))},h.Ze=function(t,e){gh(this);var n="/users/"+encodeURIComponent(t.email)+"/password",i=Ag(t);i.fb._method="POST",this.uc(n,i,(function(t){T(e,t)}))},h.uc=function(t,e,n){jh(this,[Ug,Wg],t,e,n)},h.Ee=function(t){return O("auth_status"===t,'initial event must be of type "auth_status"'),this.We?null:[this.qb]};var gd="websocket",hd="long_polling",oh,ph;function kh(t){this.nc=t,this.Qd=[],this.Wb=0,this.te=-1,this.Jb=null}function lh(t,e,n){t.te=e,t.Jb=n,t.te<t.Wb&&(t.Jb(),t.Jb=null)}function mh(t,e,n){for(t.Qd[e]=n;t.Qd[t.Wb];){var i=t.Qd[t.Wb];delete t.Qd[t.Wb];for(var r=0;r<i.length;++r)if(i[r]){var o=t;gc((function(){o.nc(i[r])}))}if(t.Wb===t.te){t.Jb&&(clearTimeout(t.Jb),t.Jb(),t.Jb=null);break}t.Wb++}}function nh(t,e,n,i){this.ue=t,this.f=pd(t),this.rb=this.sb=0,this.Xa=uc(e),this.Xf=n,this.Kc=!1,this.Fb=i,this.ld=function(t){return fd(e,hd,t)}}function rh(t,e){var n=G(e).length;t.rb+=n,rc(t.Xa,"bytes_received",n)}function qh(t,e,n,i){if(this.ld=i,this.lb=n,this.Te=new ug,this.cd=[],this.we=Math.floor(1e8*Math.random()),this.$d=!0,this.ke=id(),window["pLPCommand"+this.ke]=t,window["pRTLPCB"+this.ke]=e,(t=document.createElement("iframe")).style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||fc("No IE domain setting required")}catch(e){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}t.contentDocument?t.jb=t.contentDocument:t.contentWindow?t.jb=t.contentWindow.document:t.document&&(t.jb=t.document),this.Ga=t,t="",this.Ga.src&&"javascript:"===this.Ga.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";<\/script>'),t="<html><body>"+t+"</body></html>";try{this.Ga.jb.open(),this.Ga.jb.write(t),this.Ga.jb.close()}catch(t){fc("frame writing exception"),t.stack&&fc(t.stack),fc(t)}}function th(t){if(t.oe&&t.$d&&t.Te.count()<(0<t.cd.length?2:1)){t.we++,(e={}).id=t.Fg,e.pw=t.Gg,e.ser=t.we;for(var e=t.ld(e),n="",i=0;0<t.cd.length&&1870>=t.cd[0].of.length+30+n.length;){var r=t.cd.shift();n=n+"&seg"+i+"="+r.Xg+"&ts"+i+"="+r.gh+"&d"+i+"="+r.of;i++}return uh(t,e+n,t.we),!0}return!1}function uh(t,e,n){function i(){t.Te.remove(n),th(t)}t.Te.add(n,1);var r=setTimeout(i,Math.floor(25e3));sh(t,e,(function(){clearTimeout(r),i()}))}function sh(t,e,n){setTimeout((function(){try{if(t.$d){var i=t.Ga.jb.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){fc("Long-poll script failed to load: "+e),t.$d=!1,t.close()},t.Ga.jb.body.appendChild(i)}}catch(t){}}),Math.floor(1))}nh.prototype.open=function(t,e){this.mf=0,this.na=e,this.Ef=new kh(t),this.Db=!1;var n=this;this.ub=setTimeout((function(){n.f("Timed out trying to connect."),n.bb(),n.ub=null}),Math.floor(3e4)),ud((function(){if(!n.Db){n.Wa=new qh((function(t,e,i,r,o){if(rh(n,arguments),n.Wa)if(n.ub&&(clearTimeout(n.ub),n.ub=null),n.Kc=!0,"start"==t)n.id=e,n.Mf=i;else{if("close"!==t)throw Error("Unrecognized command received: "+t);e?(n.Wa.$d=!1,lh(n.Ef,e,(function(){n.bb()}))):n.bb()}}),(function(t,e){rh(n,arguments),mh(n.Ef,t,e)}),(function(){n.bb()}),n.ld);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.Wa.ke&&(t.cb=n.Wa.ke),t.v="5",n.Xf&&(t.s=n.Xf),n.Fb&&(t.ls=n.Fb),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f"),t=n.ld(t),n.f("Connecting via long-poll to "+t),sh(n.Wa,t,(function(){}))}}))},nh.prototype.start=function(){var t=this.Wa,e=this.Mf;for(t.Fg=this.id,t.Gg=e,t.oe=!0;th(t););t=this.id,e=this.Mf,this.kc=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.kc.src=this.ld(n),this.kc.style.display="none",document.body.appendChild(this.kc)},nh.isAvailable=function(){return oh||!ph&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.jh)&&!0},h=nh.prototype,h.Hd=function(){},h.fd=function(){this.Db=!0,this.Wa&&(this.Wa.close(),this.Wa=null),this.kc&&(document.body.removeChild(this.kc),this.kc=null),this.ub&&(clearTimeout(this.ub),this.ub=null)},h.bb=function(){this.Db||(this.f("Longpoll is closing itself"),this.fd(),this.na&&(this.na(this.Kc),this.na=null))},h.close=function(){this.Db||(this.f("Longpoll is being closed."),this.fd())},h.send=function(t){t=G(t),this.sb+=t.length,rc(this.Xa,"bytes_sent",t.length),t=yd(t=nb(t=Ob(t),!0),1840);for(var e=0;e<t.length;e++){var n=this.Wa;n.cd.push({Xg:this.mf,gh:t.length,of:t[e]}),n.oe&&th(n),this.mf++}},qh.prototype.close=function(){if(this.oe=!1,this.Ga){this.Ga.jb.body.innerHTML="";var t=this;setTimeout((function(){null!==t.Ga&&(document.body.removeChild(t.Ga),t.Ga=null)}),Math.floor(0))}var e=this.lb;e&&(this.lb=null,e())};var vh=null,xh;function wh(t,e,n,i){this.ue=t,this.f=pd(this.ue),this.frames=this.Nc=null,this.rb=this.sb=this.ff=0,this.Xa=uc(e),t={v:"5"},"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f"),n&&(t.s=n),i&&(t.ls=i),this.jf=fd(e,gd,t)}function zh(t,e){if(t.frames.push(e),t.frames.length==t.ff){var n=t.frames.join("");t.frames=null,n=Rb(n),t.Kg(n)}}function yh(t){clearInterval(t.Nc),t.Nc=setInterval((function(){t.La&&Ah(t,"0"),yh(t)}),Math.floor(45e3))}function Ah(t,e){try{t.La.send(e)}catch(e){t.f("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(u(t.bb,t),0)}}function Bh(t){Ch(this,t)}"undefined"!=typeof MozWebSocket?vh=MozWebSocket:"undefined"!=typeof WebSocket&&(vh=WebSocket),wh.prototype.open=function(t,e){this.lb=e,this.Kg=t,this.f("Websocket connecting to "+this.jf),this.Kc=!1,bd.set("previous_websocket_failure",!0);try{this.La=new vh(this.jf)}catch(t){this.f("Error instantiating WebSocket.");var n=t.message||t.data;return n&&this.f(n),void this.bb()}var i=this;this.La.onopen=function(){i.f("Websocket connected."),i.Kc=!0},this.La.onclose=function(){i.f("Websocket connection was disconnected."),i.La=null,i.bb()},this.La.onmessage=function(t){if(null!==i.La)if(t=t.data,i.rb+=t.length,rc(i.Xa,"bytes_received",t.length),yh(i),null!==i.frames)zh(i,t);else{t:{if(O(null===i.frames,"We already have a frame buffer"),6>=t.length){var e=Number(t);if(!isNaN(e)){i.ff=e,i.frames=[],t=null;break t}}i.ff=1,i.frames=[]}null!==t&&zh(i,t)}},this.La.onerror=function(t){i.f("WebSocket error.  Closing connection."),(t=t.message||t.data)&&i.f(t),i.bb()}},wh.prototype.start=function(){},wh.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&4.4>parseFloat(e[1])&&(t=!0)}return!t&&null!==vh&&!xh},wh.responsesRequiredToBeHealthy=2,wh.healthyTimeout=3e4,h=wh.prototype,h.Hd=function(){bd.remove("previous_websocket_failure")},h.send=function(t){yh(this),t=G(t),this.sb+=t.length,rc(this.Xa,"bytes_sent",t.length),1<(t=yd(t,16384)).length&&Ah(this,String(t.length));for(var e=0;e<t.length;e++)Ah(this,t[e])},h.fd=function(){this.Db=!0,this.Nc&&(clearInterval(this.Nc),this.Nc=null),this.La&&(this.La.close(),this.La=null)},h.bb=function(){this.Db||(this.f("WebSocket is closing itself"),this.fd(),this.lb&&(this.lb(this.Kc),this.lb=null))},h.close=function(){this.Db||(this.f("WebSocket is being closed"),this.fd())};var Dh=[nh,wh];function Ch(t,e){var n=wh&&wh.isAvailable(),i=n&&!(bd.Af||!0===bd.get("previous_websocket_failure"));if(e.ih&&(n||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)t.jd=[wh];else{var r=t.jd=[];zd(Dh,(function(t,e){e&&e.isAvailable()&&r.push(e)}))}}function Eh(t){if(0<t.jd.length)return t.jd[0];throw Error("No transports available")}function Fh(t,e,n,i,r,o,a){this.id=t,this.f=pd("c:"+this.id+":"),this.nc=n,this.Zc=i,this.na=r,this.Re=o,this.G=e,this.Pd=[],this.kf=0,this.Wf=new Bh(e),this.N=0,this.Fb=a,this.f("Connection created"),Gh(this)}function Gh(t){var e=Eh(t.Wf);t.K=new e("c:"+t.id+":"+t.kf++,t.G,void 0,t.Fb),t.Ve=e.responsesRequiredToBeHealthy||0;var n=Hh(t,t.K),i=Ih(t,t.K);t.kd=t.K,t.ed=t.K,t.F=null,t.Eb=!1,setTimeout((function(){t.K&&t.K.open(n,i)}),Math.floor(0)),0<(e=e.healthyTimeout||0)&&(t.Bd=setTimeout((function(){t.Bd=null,t.Eb||(t.K&&102400<t.K.rb?(t.f("Connection exceeded healthy timeout but has received "+t.K.rb+" bytes.  Marking connection healthy."),t.Eb=!0,t.K.Hd()):t.K&&10240<t.K.sb?t.f("Connection exceeded healthy timeout but has sent "+t.K.sb+" bytes.  Leaving connection alive."):(t.f("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(e)))}function Ih(t,e){return function(n){e===t.K?(t.K=null,n||0!==t.N?1===t.N&&t.f("Realtime connection lost."):(t.f("Realtime connection failed."),"s-"===t.G.ab.substr(0,2)&&(bd.remove("host:"+t.G.host),t.G.ab=t.G.host)),t.close()):e===t.F?(t.f("Secondary connection lost."),n=t.F,t.F=null,t.kd!==n&&t.ed!==n||t.close()):t.f("closing an old connection")}}function Hh(t,e){return function(n){if(2!=t.N)if(e===t.ed){var i=wd("t",n);if(n=wd("d",n),"c"==i){if(i=wd("t",n),"d"in n)if(n=n.d,"h"===i){i=n.ts;var r=n.v,o=n.h;t.Uf=n.s,ed(t.G,o),0==t.N&&(t.K.start(),Jh(t,t.K,i),"5"!==r&&S("Protocol version mismatch detected"),(n=1<(n=t.Wf).jd.length?n.jd[1]:null)&&Kh(t,n))}else if("n"===i){for(t.f("recvd end transmission on primary"),t.ed=t.F,n=0;n<t.Pd.length;++n)t.Ld(t.Pd[n]);t.Pd=[],Lh(t)}else"s"===i?(t.f("Connection shutdown command received. Shutting down..."),t.Re&&(t.Re(n),t.Re=null),t.na=null,t.close()):"r"===i?(t.f("Reset packet received.  New host: "+n),ed(t.G,n),1===t.N?t.close():(Mh(t),Gh(t))):"e"===i?qd("Server Error: "+n):"o"===i?(t.f("got pong on primary."),Nh(t),Oh(t)):qd("Unknown control packet command: "+i)}else"d"==i&&t.Ld(n)}else if(e===t.F)if(i=wd("t",n),n=wd("d",n),"c"==i)"t"in n&&("a"===(n=n.t)?Ph(t):"r"===n?(t.f("Got a reset on secondary, closing it"),t.F.close(),t.kd!==t.F&&t.ed!==t.F||t.close()):"o"===n&&(t.f("got pong on secondary."),t.Tf--,Ph(t)));else{if("d"!=i)throw Error("Unknown protocol layer: "+i);t.Pd.push(n)}else t.f("message on old connection")}}function Lh(t){t.kd===t.F&&t.ed===t.F&&(t.f("cleaning up and promoting a connection: "+t.F.ue),t.K=t.F,t.F=null)}function Ph(t){0>=t.Tf?(t.f("Secondary connection is healthy."),t.Eb=!0,t.F.Hd(),t.F.start(),t.f("sending client ack on secondary"),t.F.send({t:"c",d:{t:"a",d:{}}}),t.f("Ending transmission on primary"),t.K.send({t:"c",d:{t:"n",d:{}}}),t.kd=t.F,Lh(t)):(t.f("sending ping on secondary."),t.F.send({t:"c",d:{t:"p",d:{}}}))}function Nh(t){t.Eb||(t.Ve--,0>=t.Ve&&(t.f("Primary connection is healthy."),t.Eb=!0,t.K.Hd()))}function Kh(t,e){t.F=new e("c:"+t.id+":"+t.kf++,t.G,t.Uf),t.Tf=e.responsesRequiredToBeHealthy||0,t.F.open(Hh(t,t.F),Ih(t,t.F)),setTimeout((function(){t.F&&(t.f("Timed out trying to upgrade."),t.F.close())}),Math.floor(6e4))}function Jh(t,e,n){t.f("Realtime connection established."),t.K=e,t.N=1,t.Zc&&(t.Zc(n,t.Uf),t.Zc=null),0===t.Ve?(t.f("Primary connection is healthy."),t.Eb=!0):setTimeout((function(){Oh(t)}),Math.floor(5e3))}function Oh(t){t.Eb||1!==t.N||(t.f("sending ping on primary."),Qh(t,{t:"c",d:{t:"p",d:{}}}))}function Qh(t,e){if(1!==t.N)throw"Connection is not connected";t.kd.send(e)}function Mh(t){t.f("Shutting down all connections"),t.K&&(t.K.close(),t.K=null),t.F&&(t.F.close(),t.F=null),t.Bd&&(clearTimeout(t.Bd),t.Bd=null)}function Rh(t,e,n,i){this.id=Sh++,this.f=pd("p:"+this.id+":"),this.Bf=this.Ie=!1,this.ba={},this.sa=[],this.ad=0,this.Yc=[],this.qa=!1,this.eb=1e3,this.Id=3e5,this.Kb=e,this.Xc=n,this.Se=i,this.G=t,this.wb=this.Ca=this.Ma=this.Fb=this.$e=null,this.Sb=!1,this.Wd={},this.Wg=0,this.rf=!0,this.Oc=this.Ke=null,Th(this,0),kf.yb().Ib("visible",this.Ng,this),-1===t.host.indexOf("fblocal")&&jf.yb().Ib("online",this.Lg,this)}Fh.prototype.Ia=function(t){Qh(this,{t:"d",d:t})},Fh.prototype.Ld=function(t){Nh(this),this.nc(t)},Fh.prototype.close=function(){2!==this.N&&(this.f("Closing realtime connection."),this.N=2,Mh(this),this.na&&(this.na(),this.na=null))};var Sh=0,Uh=0;function Vh(t,e){var n=e.Tg,i=n.path.toString(),r=n.wa();t.f("Listen on "+i+" for "+r);var o={p:i};e.tag&&(o.q=Ge(n.n),o.t=e.tag),o.h=e.Ad(),t.Ia("q",o,(function(o){var a=o.d,s=o.s;if(a&&"object"==typeof a&&y(a,"w")){var h=z(a,"w");da(h)&&0<=La(h,"no_index")&&S('Using an unspecified index. Consider adding ".indexOn": "'+n.n.g.toString()+'" at '+n.path.toString()+" to your security rules for better performance")}(t.ba[i]&&t.ba[i][r])===e&&(t.f("listen response",o),"ok"!==s&&Wh(t,i,r),e.I&&e.I(s,a))}))}function Xh(t){var e=t.Ca;t.qa&&e&&t.Ia("auth",{cred:e.rg},(function(n){var i=n.s;n=n.d||"error","ok"!==i&&t.Ca===e&&(t.Ca=null),e.sf?"ok"!==i&&e.od&&e.od(i,n):(e.sf=!0,e.Dc&&e.Dc(i,n))}))}function Yh(t,e,n,i,r){n={p:n,d:i},t.f("onDisconnect "+e,n),t.Ia(e,n,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))}function Zh(t,e,n,i,r,o){i={p:n,d:i},p(o)&&(i.h=o),t.sa.push({action:e,Pf:i,I:r}),t.ad++,e=t.sa.length-1,t.qa?$h(t,e):t.f("Buffering put: "+n)}function $h(t,e){var n=t.sa[e].action,i=t.sa[e].Pf,r=t.sa[e].I;t.sa[e].Ug=t.qa,t.Ia(n,i,(function(i){t.f(n+" response",i),delete t.sa[e],t.ad--,0===t.ad&&(t.sa=[]),r&&r(i.s,i.d)}))}function Th(t,e){O(!t.Ma,"Scheduling a connect when we're already connected/ing?"),t.wb&&clearTimeout(t.wb),t.wb=setTimeout((function(){t.wb=null,ci(t)}),Math.floor(e))}function ci(t){if(di(t)){t.f("Making a connection attempt"),t.Ke=(new Date).getTime(),t.Oc=null;var e=u(t.Ld,t),n=u(t.Zc,t),i=u(t.If,t),r=t.id+":"+Uh++;t.Ma=new Fh(r,t.G,e,n,i,(function(e){S(e+" ("+t.G.toString()+")"),t.Bf=!0}),t.Fb)}}function ai(t,e,n){n=n?Oa(n,(function(t){return xd(t)})).join("$"):"default",(t=Wh(t,e,n))&&t.I&&t.I("permission_denied")}function Wh(t,e,n){var i;return e=new P(e).toString(),p(t.ba[e])?(i=t.ba[e][n],delete t.ba[e][n],0===oa(t.ba[e])&&delete t.ba[e]):i=void 0,i}function bi(t){Xh(t),v(t.ba,(function(e){v(e,(function(e){Vh(t,e)}))}));for(var e=0;e<t.sa.length;e++)t.sa[e]&&$h(t,e);for(;t.Yc.length;)e=t.Yc.shift(),Yh(t,e.action,e.bd,e.data,e.I)}function di(t){var e;return e=jf.yb().oc,!t.Bf&&!t.Ie&&e}h=Rh.prototype,h.Ia=function(t,e,n){var i=++this.Wg;t={r:i,a:t,b:e},this.f(G(t)),O(this.qa,"sendRequest call when we're not connected not allowed."),this.Ma.Ia(t),n&&(this.Wd[i]=n)},h.Cf=function(t,e,n,i){var r=t.wa(),o=t.path.toString();this.f("Listen called for "+o+" "+r),this.ba[o]=this.ba[o]||{},O(Ie(t.n)||!He(t.n),"listen() called for non-default but complete query"),O(!this.ba[o][r],"listen() called twice for same path/queryId."),t={I:i,Ad:e,Tg:t,tag:n},this.ba[o][r]=t,this.qa&&Vh(this,t)},h.O=function(t,e,n){this.Ca={rg:t,sf:!1,Dc:e,od:n},this.f("Authenticating using credential: "+t),Xh(this),(e=40==t.length)||(e="object"==typeof(t=Cd(t).Ec)&&!0===z(t,"admin")),e&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Id=3e4)},h.je=function(t){this.Ca=null,this.qa&&this.Ia("unauth",{},(function(e){t(e.s,e.d)}))},h.$f=function(t,e){var n=t.path.toString(),i=t.wa();if(this.f("Unlisten called for "+n+" "+i),O(Ie(t.n)||!He(t.n),"unlisten() called for non-default but complete query"),Wh(this,n,i)&&this.qa){var r=Ge(t.n);this.f("Unlisten on "+n+" for "+i),n={p:n},e&&(n.q=r,n.t=e),this.Ia("n",n)}},h.Qe=function(t,e,n){this.qa?Yh(this,"o",t,e,n):this.Yc.push({bd:t,action:"o",data:e,I:n})},h.Gf=function(t,e,n){this.qa?Yh(this,"om",t,e,n):this.Yc.push({bd:t,action:"om",data:e,I:n})},h.Md=function(t,e){this.qa?Yh(this,"oc",t,null,e):this.Yc.push({bd:t,action:"oc",data:null,I:e})},h.put=function(t,e,n,i){Zh(this,"p",t,e,n,i)},h.Df=function(t,e,n,i){Zh(this,"m",t,e,n,i)},h.Ye=function(t){this.qa&&(t={c:t},this.f("reportStats",t),this.Ia("s",t,(function(t){"ok"!==t.s&&this.f("reportStats","Error sending stats: "+t.d)})))},h.Ld=function(t){if("r"in t){this.f("from server: "+G(t));var e=t.r,n=this.Wd[e];n&&(delete this.Wd[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&(e=t.a,n=t.b,this.f("handleServerMessage",e,n),"d"===e?this.Kb(n.p,n.d,!1,n.t):"m"===e?this.Kb(n.p,n.d,!0,n.t):"c"===e?ai(this,n.p,n.q):"ac"===e?(t=n.s,e=n.d,n=this.Ca,this.Ca=null,n&&n.od&&n.od(t,e)):"sd"===e?this.$e?this.$e(n):"msg"in n&&"undefined"!=typeof console&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: ")):qd("Unrecognized action received from server: "+G(e)+"\nAre you using the latest client?"))}},h.Zc=function(t,e){if(this.f("connection ready"),this.qa=!0,this.Oc=(new Date).getTime(),this.Se({serverTimeOffset:t-(new Date).getTime()}),this.Fb=e,this.rf){var n={};n["sdk.js."+Eb.replace(/\./g,"-")]=1,Dg()?n["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(n["framework.reactnative"]=1),this.Ye(n)}bi(this),this.rf=!1,this.Xc(!0)},h.Ng=function(t){t&&!this.Sb&&this.eb===this.Id&&(this.f("Window became visible.  Reducing delay."),this.eb=1e3,this.Ma||Th(this,0)),this.Sb=t},h.Lg=function(t){t?(this.f("Browser went online."),this.eb=1e3,this.Ma||Th(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ma&&this.Ma.close())},h.If=function(){this.f("data client disconnected"),this.qa=!1,this.Ma=null;for(var t=0;t<this.sa.length;t++){var e=this.sa[t];e&&"h"in e.Pf&&e.Ug&&(e.I&&e.I("disconnect"),delete this.sa[t],this.ad--)}0===this.ad&&(this.sa=[]),this.Wd={},di(this)&&(this.Sb?this.Oc&&(3e4<(new Date).getTime()-this.Oc&&(this.eb=1e3),this.Oc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.eb=this.Id,this.Ke=(new Date).getTime()),t=Math.max(0,this.eb-((new Date).getTime()-this.Ke)),t*=Math.random(),this.f("Trying to reconnect in "+t+"ms"),Th(this,t),this.eb=Math.min(this.Id,1.3*this.eb)),this.Xc(!1)},h.Cb=function(){this.Ie=!0,this.Ma?this.Ma.close():(this.wb&&(clearTimeout(this.wb),this.wb=null),this.qa&&this.If())},h.vc=function(){this.Ie=!1,this.eb=1e3,this.Ma||Th(this,0)};var U={zg:function(){oh=xh=!0}};function ei(t,e){this.committed=t,this.snapshot=e}function V(t,e){this.dd=t,this.ta=e}function W(t,e,n){this.A=t,this.Y=e,this.g=n}function ii(t,e,n){this.Vb=t,this.tb=e,this.vb=n||null}function ji(t,e,n){this.ja=t,this.tb=e,this.vb=n}function ki(){this.za={}}function mi(t){return Na(qa(t.za),(function(t){return!He(t.Y.n)}))}function ni(t,e){if(He(e.n))return li(t);var n=e.wa();return z(t.za,n)}function li(t){return ua(t.za,(function(t){return He(t.Y.n)}))||null}function oi(t){this.va=qe,this.mb=new Pf,this.df={},this.qc={},this.Qc=t}function pi(t,e,n,i,r){var o=t.mb,a=r;return O(i>o.Pc,"Stacking an older write on top of newer ones"),p(a)||(a=!0),o.pa.push({path:e,Ja:n,md:i,visible:a}),a&&(o.V=Jf(o.V,e,n)),o.Pc=i,r?qi(t,new Ac(Ef,e,n)):[]}function ri(t,e,n,i){var r=t.mb;return O(i>r.Pc,"Stacking an older merge on top of newer ones"),r.pa.push({path:e,children:n,md:i,visible:!0}),r.V=Kf(r.V,e,n),r.Pc=i,n=sf(n),qi(t,new bf(Ef,e,n))}function si(t,e,n){n=n||!1;var i=Qf(t.mb,e);if(t.mb.Ud(e)){var r=qe;return null!=i.Ja?r=r.set(M,!0):Fb(i.children,(function(t,e){r=r.set(new P(t),e)})),qi(t,new Df(i.path,r,n))}return[]}function ti(t,e,n){return n=sf(n),qi(t,new bf(Gf,e,n))}function ui(t,e,n,i){if(null!=(i=vi(t,i))){var r=wi(i);return i=r.path,r=r.Lb,e=lf(i,e),xi(t,i,n=new Ac(new Ff(!1,!0,r,!0),e,n))}return[]}function yi(t,e,n,i){if(i=vi(t,i)){var r=wi(i);return i=r.path,r=r.Lb,e=lf(i,e),n=sf(n),xi(t,i,n=new bf(new Ff(!1,!0,r,!0),e,n))}return[]}function Ci(t){return vf(t,(function(t,e,n){if(e&&null!=li(e))return[li(e)];var i=[];return e&&(i=mi(e)),v(n,(function(t){i=i.concat(t)})),i}))}function Gi(t,e){for(var n=0;n<e.length;++n){if(!He((i=e[n]).n)){var i=zi(i),r=t.qc[i];delete t.qc[i],delete t.df["_"+r]}}}function Ei(t){return He(t.n)&&!Ie(t.n)?t.Mb():t}function Bi(t,e,n){var i=e.path,r=Fi(t,e);if(n=Di(t,n),e=t.Qc.af(Ei(e),r,n.Ad,n.I),i=t.va.subtree(i),r)O(null==li(i.value),"If we're adding a query, it shouldn't be shadowed");else for(r=vf(i,(function(t,e,n){if(!t.e()&&e&&null!=li(e))return[Ze(li(e))];var i=[];return e&&(i=i.concat(Oa(mi(e),(function(t){return t.Y})))),v(n,(function(t){i=i.concat(t)})),i})),i=0;i<r.length;++i)n=r[i],t.Qc.de(Ei(n),Fi(t,n));return e}function Di(t,e){var n=e.Y,i=Fi(t,n);return{Ad:function(){return(e.w()||H).hash()},I:function(e){if("ok"===e){if(i){var r=n.path;if(e=vi(t,i)){var o=wi(e);e=o.path,o=o.Lb,r=lf(e,r),r=new Cc(new Ff(!1,!0,o,!0),r),e=xi(t,e,r)}else e=[]}else e=qi(t,new Cc(Gf,n.path));return e}return r="Unknown Error","too_big"===e?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?r="Client doesn't have permission to access the desired data.":"unavailable"==e&&(r="The service is unavailable"),(r=Error(e+" at "+n.path.toString()+": "+r)).code=e.toUpperCase(),t.nb(n,null,r)}}}function zi(t){return t.path.toString()+"$"+t.wa()}function wi(t){var e=t.indexOf("$");return O(-1!==e&&e<t.length-1,"Bad queryKey."),{Lb:t.substr(e+1),path:new P(t.substr(0,e))}}function vi(t,e){var n=t.df,i="_"+e;return i in n?n[i]:void 0}function Fi(t,e){var n=zi(e);return z(t.qc,n)}U.forceLongPolling=U.zg,U.Ag=function(){ph=!0},U.forceWebSockets=U.Ag,U.$g=function(t,e){t.k.Va.$e=e},U.setSecurityDebugCallback=U.$g,U.bf=function(t,e){t.k.bf(e)},U.stats=U.bf,U.cf=function(t,e){t.k.cf(e)},U.statsIncrementCounter=U.cf,U.ud=function(t){return t.k.ud},U.dataUpdateCount=U.ud,U.Dg=function(t,e){t.k.He=e},U.interceptServerData=U.Dg,U.Jg=function(t){new Og(t)},U.onPopupOpen=U.Jg,U.Yg=function(t){xg=t},U.setAuthenticationServer=U.Yg,V.prototype.cancel=function(t){D("Firebase.onDisconnect().cancel",0,1,arguments.length),F("Firebase.onDisconnect().cancel",1,t,!0);var e=new B;return this.dd.Md(this.ta,C(e,t)),e.D},V.prototype.cancel=V.prototype.cancel,V.prototype.remove=function(t){D("Firebase.onDisconnect().remove",0,1,arguments.length),og("Firebase.onDisconnect().remove",this.ta),F("Firebase.onDisconnect().remove",1,t,!0);var e=new B;return fi(this.dd,this.ta,null,C(e,t)),e.D},V.prototype.remove=V.prototype.remove,V.prototype.set=function(t,e){D("Firebase.onDisconnect().set",1,2,arguments.length),og("Firebase.onDisconnect().set",this.ta),gg("Firebase.onDisconnect().set",t,this.ta,!1),F("Firebase.onDisconnect().set",2,e,!0);var n=new B;return fi(this.dd,this.ta,t,C(n,e)),n.D},V.prototype.set=V.prototype.set,V.prototype.Ob=function(t,e,n){D("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),og("Firebase.onDisconnect().setWithPriority",this.ta),gg("Firebase.onDisconnect().setWithPriority",t,this.ta,!1),kg("Firebase.onDisconnect().setWithPriority",2,e),F("Firebase.onDisconnect().setWithPriority",3,n,!0);var i=new B;return gi(this.dd,this.ta,t,e,C(i,n)),i.D},V.prototype.setWithPriority=V.prototype.Ob,V.prototype.update=function(t,e){if(D("Firebase.onDisconnect().update",1,2,arguments.length),og("Firebase.onDisconnect().update",this.ta),da(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,S("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return jg("Firebase.onDisconnect().update",t,this.ta),F("Firebase.onDisconnect().update",2,e,!0),n=new B,hi(this.dd,this.ta,t,C(n,e)),n.D},V.prototype.update=V.prototype.update,W.prototype.J=function(){return D("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.J()},W.prototype.val=W.prototype.J,W.prototype.qf=function(){return D("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.J(!0)},W.prototype.exportVal=W.prototype.qf,W.prototype.xg=function(){return D("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},W.prototype.exists=W.prototype.xg,W.prototype.o=function(t){D("Firebase.DataSnapshot.child",0,1,arguments.length),fa(t)&&(t=String(t)),ng("Firebase.DataSnapshot.child",t);var e=new P(t),n=this.Y.o(e);return new W(this.A.S(e),n,R)},W.prototype.child=W.prototype.o,W.prototype.Fa=function(t){D("Firebase.DataSnapshot.hasChild",1,1,arguments.length),ng("Firebase.DataSnapshot.hasChild",t);var e=new P(t);return!this.A.S(e).e()},W.prototype.hasChild=W.prototype.Fa,W.prototype.C=function(){return D("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.C().J()},W.prototype.getPriority=W.prototype.C,W.prototype.forEach=function(t){if(D("Firebase.DataSnapshot.forEach",1,1,arguments.length),F("Firebase.DataSnapshot.forEach",1,t,!1),this.A.L())return!1;var e=this;return!!this.A.R(this.g,(function(n,i){return t(new W(i,e.Y.o(n),R))}))},W.prototype.forEach=W.prototype.forEach,W.prototype.zd=function(){return D("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),!this.A.L()&&!this.A.e()},W.prototype.hasChildren=W.prototype.zd,W.prototype.name=function(){return S("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),D("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},W.prototype.name=W.prototype.name,W.prototype.key=function(){return D("Firebase.DataSnapshot.key",0,0,arguments.length),this.Y.key()},W.prototype.key=W.prototype.key,W.prototype.Hb=function(){return D("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.Hb()},W.prototype.numChildren=W.prototype.Hb,W.prototype.Mb=function(){return D("Firebase.DataSnapshot.ref",0,0,arguments.length),this.Y},W.prototype.ref=W.prototype.Mb,h=ii.prototype,h.Qf=function(t){return"value"===t},h.createEvent=function(t,e){var n=e.n.g;return new jc("value",this,new W(t.Na,e.Mb(),n))},h.Zb=function(t){var e=this.vb;if("cancel"===t.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var n=this.tb;return function(){n.call(e,t.error)}}var i=this.Vb;return function(){i.call(e,t.be)}},h.lf=function(t,e){return this.tb?new kc(this,t,e):null},h.matches=function(t){return t instanceof ii&&(!t.Vb||!this.Vb||t.Vb===this.Vb&&t.vb===this.vb)},h.yf=function(){return null!==this.Vb},h=ji.prototype,h.Qf=function(t){return("children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t)in this.ja},h.lf=function(t,e){return this.tb?new kc(this,t,e):null},h.createEvent=function(t,e){O(null!=t.Za,"Child events should have a childName.");var n=e.Mb().o(t.Za);return new jc(t.type,this,new W(t.Na,n,e.n.g),t.Td)},h.Zb=function(t){var e=this.vb;if("cancel"===t.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var n=this.tb;return function(){n.call(e,t.error)}}var i=this.ja[t.wd];return function(){i.call(e,t.be,t.Td)}},h.matches=function(t){if(t instanceof ji){if(!this.ja||!t.ja)return!0;if(this.vb===t.vb)if((e=oa(t.ja))===oa(this.ja)){if(1===e){var e=pa(t.ja),n=pa(this.ja);return!(n!==e||t.ja[e]&&this.ja[n]&&t.ja[e]!==this.ja[n])}return na(this.ja,(function(e,n){return t.ja[n]===e}))}}return!1},h.yf=function(){return null!==this.ja},h=ki.prototype,h.e=function(){return va(this.za)},h.gb=function(t,e,n){var i=t.source.Lb;if(null!==i)return i=z(this.za,i),O(null!=i,"SyncTree gave us an op for an invalid query."),i.gb(t,e,n);var r=[];return v(this.za,(function(i){r=r.concat(i.gb(t,e,n))})),r},h.Tb=function(t,e,n,i,r){var o=t.wa();if(!(a=z(this.za,o))){var a,s=!1;(a=n.Aa(r?i:null))?s=!0:(a=i instanceof fe?n.Cc(i):H,s=!1),a=new Ye(t,new je(new Xb(a,s,!1),new Xb(i,r,!1))),this.za[o]=a}return a.Tb(e),af(a,e)},h.nb=function(t,e,n){var i=t.wa(),r=[],o=[],a=null!=li(this);if("default"===i){var s=this;v(this.za,(function(t,i){o=o.concat(t.nb(e,n)),t.e()&&(delete s.za[i],He(t.Y.n)||r.push(t.Y))}))}else{var h=z(this.za,i);h&&(o=o.concat(h.nb(e,n)),h.e()&&(delete this.za[i],He(h.Y.n)||r.push(h.Y)))}return a&&null==li(this)&&r.push(new X(t.k,t.path)),{Vg:r,vg:o}},h.kb=function(t){var e=null;return v(this.za,(function(n){e=e||n.kb(t)})),e},oi.prototype.Tb=function(t,e){var n=t.path,i=null,r=!1;zf(this.va,n,(function(t,e){var o=lf(t,n);i=i||e.kb(o),r=r||null!=li(e)}));var o,a=this.va.get(n);a?(r=r||null!=li(a),i=i||a.kb(M)):(a=new ki,this.va=this.va.set(n,a)),null!=i?o=!0:(o=!1,i=H,Cf(this.va.subtree(n),(function(t,e){var n=e.kb(M);n&&(i=i.W(t,n))})));var s=null!=ni(a,t);if(!s&&!He(t.n)){var h=zi(t);O(!(h in this.qc),"View does not exist, but we have a tag");var u=Ai++;this.qc[h]=u,this.df["_"+u]=h}return o=a.Tb(t,e,new Uf(n,this.mb),i,o),s||r||(a=ni(a,t),o=o.concat(Bi(this,t,a))),o},oi.prototype.nb=function(t,e,n){var i=t.path,r=this.va.get(i),o=[];if(r&&("default"===t.wa()||null!=ni(r,t))){o=r.nb(t,e,n),r.e()&&(this.va=this.va.remove(i)),r=o.Vg,o=o.vg,e=-1!==Sa(r,(function(t){return He(t.n)}));var a=xf(this.va,i,(function(t,e){return null!=li(e)}));if(e&&!a&&!(i=this.va.subtree(i)).e()){i=Ci(i);for(var s=0;s<i.length;++s){var h=(u=i[s]).Y,u=Di(this,u);this.Qc.af(Ei(h),Fi(this,h),u.Ad,u.I)}}if(!a&&0<r.length&&!n)if(e)this.Qc.de(Ei(t),null);else{var c=this;Ma(r,(function(t){t.wa();var e=c.qc[zi(t)];c.Qc.de(Ei(t),e)}))}Gi(this,r)}return o},oi.prototype.Aa=function(t,e){var n=this.mb,i=xf(this.va,t,(function(e,n){var i=lf(e,t);if(i=n.kb(i))return i}));return n.Aa(t,i,e,!0)};var Ai=1;function xi(t,e,n){var i=t.va.get(e);return O(i,"Missing sync point for query tag that we're tracking"),i.gb(n,new Uf(e,t.mb),null)}function qi(t,e){return Hi(t,e,t.va,null,new Uf(M,t.mb))}function Hi(t,e,n,i,r){if(e.path.e())return Ii(t,e,n,i,r);var o=n.get(M);null==i&&null!=o&&(i=o.kb(M));var a=[],s=K(e.path),h=e.$c(s);if((n=n.children.get(s))&&h){var u=i?i.T(s):null;s=r.o(s),a=a.concat(Hi(t,h,n,u,s))}return o&&(a=a.concat(o.gb(e,r,i))),a}function Ii(t,e,n,i,r){var o=n.get(M);null==i&&null!=o&&(i=o.kb(M));var a=[];return n.children.ka((function(n,o){var s=i?i.T(n):null,h=r.o(n),u=e.$c(n);u&&(a=a.concat(Ii(t,u,o,s,h)))})),o&&(a=a.concat(o.gb(e,r,i))),a}function Ji(t,e){this.G=t,this.Xa=uc(t),this.hd=null,this.fa=new Zb,this.Kd=1,this.Va=null,e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.da=new cf(this.G,u(this.Kb,this)),setTimeout(u(this.Xc,this,!0),0)):this.da=this.Va=new Rh(this.G,u(this.Kb,this),u(this.Xc,this),u(this.Se,this)),this.dh=vc(t,u((function(){return new pc(this.Xa,this.da)}),this)),this.yc=new Wf,this.Ge=new Sb;var n=this;this.Fd=new oi({af:function(t,e,i,r){return e=[],(i=n.Ge.j(t.path)).e()||(e=qi(n.Fd,new Ac(Gf,t.path,i)),setTimeout((function(){r("ok")}),0)),e},de:aa}),Ki(this,"connected",!1),this.na=new Vc,this.O=new Yg(t,u(this.da.O,this.da),u(this.da.je,this.da),u(this.Pe,this)),this.ud=0,this.He=null,this.M=new oi({af:function(t,e,i,r){return n.da.Cf(t,i,e,(function(e,i){var o=r(e,i);dc(n.fa,t.path,o)})),[]},de:function(t,e){n.da.$f(t,e)}})}function Li(t){return t=t.Ge.j(new P(".info/serverTimeOffset")).J()||0,(new Date).getTime()+t}function Mi(t){return(t=t={timestamp:Li(t)}).timestamp=t.timestamp||(new Date).getTime(),t}function Ki(t,e,n){e=new P("/.info/"+e),n=Q(n);var i=t.Ge;i.Zd=i.Zd.H(e,n),n=qi(t.Fd,new Ac(Gf,e,n)),dc(t.fa,e,n)}function Oi(t){t.f("onDisconnectEvents");var e=Mi(t),n=[];Wc(Uc(t.na,e),M,(function(e,i){n=n.concat(qi(t.M,new Ac(Gf,e,i)));var r=Qi(t,e);Ni(t,r)})),t.na=new Vc,dc(t.fa,M,n)}function fi(t,e,n,i){var r=Q(n);t.da.Qe(e.toString(),r.J(!0),(function(n,o){"ok"===n&&t.na.rc(e,r),Pi(i,n,o)}))}function gi(t,e,n,i,r){var o=Q(n,i);t.da.Qe(e.toString(),o.J(!0),(function(n,i){"ok"===n&&t.na.rc(e,o),Pi(r,n,i)}))}function hi(t,e,n,i){var r,o=!0;for(r in n)o=!1;o?(fc("onDisconnect().update() called with empty data.  Don't do anything."),Pi(i,"ok")):t.da.Gf(e.toString(),n,(function(r,o){if("ok"===r)for(var a in n){var s=Q(n[a]);t.na.rc(e.o(a),s)}Pi(i,r,o)}))}function Ri(t,e,n){n=".info"===K(e.path)?t.Fd.Tb(e,n):t.M.Tb(e,n),bc(t.fa,e.path,n)}function Pi(t,e,n){t&&gc((function(){if("ok"==e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n),(r=Error(r)).code=i,t(r)}}))}function Si(t,e,n,i,r){function o(){}t.f("transaction on "+e);var a=new X(t,e);if(a.Ib("value",o),n={path:e,update:n,I:i,status:null,Lf:id(),gf:r,Sf:0,le:function(){a.mc("value",o)},ne:null,Da:null,rd:null,sd:null,td:null},i=t.M.Aa(e,void 0)||H,n.rd=i,p(i=n.update(i.J()))){hg("transaction failed: Data returned ",i,n.path),n.status=1;var s=(r=Xf(t.yc,e)).Ea()||[];s.push(n),Yf(r,s),"object"==typeof i&&null!==i&&y(i,".priority")?(s=z(i,".priority"),O(fg(s),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):s=(t.M.Aa(e)||H).C().J(),r=Mi(t),r=Xc(i=Q(i,s),r),n.sd=i,n.td=r,n.Da=t.Kd++,n=pi(t.M,e,r,n.Da,n.gf),dc(t.fa,e,n),Ti(t)}else n.le(),n.sd=null,n.td=null,n.I&&(t=new W(n.rd,new X(t,n.path),R),n.I(null,!1,t))}function Ti(t,e){var n=e||t.yc;if(e||Ui(t,n),null!==n.Ea()){var i=Vi(t,n);O(0<i.length,"Sending zero length transaction queue"),Qa(i,(function(t){return 1===t.status}))&&Wi(t,n.path(),i)}else n.zd()&&n.R((function(e){Ti(t,e)}))}function Wi(t,e,n){for(var i=Oa(n,(function(t){return t.Da})),r=(i=r=t.M.Aa(e,i)||H,r.hash()),o=0;o<n.length;o++){var a=n[o];O(1===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=2,a.Sf++;var s=lf(e,a.path);i=i.H(s,a.sd)}i=i.J(!0),t.da.put(e.toString(),i,(function(i){t.f("transaction put response",{path:e.toString(),status:i});var r=[];if("ok"===i){for(i=[],o=0;o<n.length;o++){if(n[o].status=3,r=r.concat(si(t.M,n[o].Da)),n[o].I){var a=n[o].td,s=new X(t,n[o].path);i.push(u(n[o].I,null,null,!0,new W(a,s,R)))}n[o].le()}for(Ui(t,Xf(t.yc,e)),Ti(t),dc(t.fa,e,r),o=0;o<i.length;o++)gc(i[o])}else{if("datastale"===i)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(S("transaction at "+e.toString()+" failed: "+i),o=0;o<n.length;o++)n[o].status=5,n[o].ne=i;Ni(t,e)}}),r)}function Ni(t,e){var n,i=(n=Xi(t,e)).path();return Yi(t,n=Vi(t,n),i),i}function Yi(t,e,n){if(0!==e.length){for(var i=[],r=[],o=Oa(e,(function(t){return t.Da})),a=0;a<e.length;a++){var s,h=e[a],c=lf(n,h.path),f=!1;if(O(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),5===h.status)f=!0,s=h.ne,r=r.concat(si(t.M,h.Da,!0));else if(1===h.status)if(25<=h.Sf)f=!0,s="maxretry",r=r.concat(si(t.M,h.Da,!0));else{var l=t.M.Aa(h.path,o)||H;h.rd=l;var d=e[a].update(l.J());p(d)?(hg("transaction failed: Data returned ",d,h.path),c=Q(d),"object"==typeof d&&null!=d&&y(d,".priority")||(c=c.ia(l.C())),l=h.Da,d=Xc(c,d=Mi(t)),h.sd=c,h.td=d,h.Da=t.Kd++,Ta(o,l),r=(r=r.concat(pi(t.M,h.path,d,h.Da,h.gf))).concat(si(t.M,l,!0))):(f=!0,s="nodata",r=r.concat(si(t.M,h.Da,!0)))}dc(t.fa,n,r),r=[],f&&(e[a].status=3,setTimeout(e[a].le,Math.floor(0)),e[a].I&&("nodata"===s?(h=new X(t,e[a].path),i.push(u(e[a].I,null,null,!1,new W(e[a].rd,h,R)))):i.push(u(e[a].I,null,Error(s),!1,null))))}for(Ui(t,t.yc),a=0;a<i.length;a++)gc(i[a]);Ti(t)}}function Xi(t,e){for(var n,i=t.yc;null!==(n=K(e))&&null===i.Ea();)i=Xf(i,n),e=N(e);return i}function Vi(t,e){var n=[];return Zi(t,e,n),n.sort((function(t,e){return t.Lf-e.Lf})),n}function Zi(t,e,n){var i=e.Ea();if(null!==i)for(var r=0;r<i.length;r++)n.push(i[r]);e.R((function(e){Zi(t,e,n)}))}function Ui(t,e){var n=e.Ea();if(n){for(var i=0,r=0;r<n.length;r++)3!==n[r].status&&(n[i]=n[r],i++);n.length=i,Yf(e,0<n.length?n:null)}e.R((function(e){Ui(t,e)}))}function Qi(t,e){var n=Xi(t,e).path(),i=Xf(t.yc,e);return ag(i,(function(e){$i(t,e)})),$i(t,i),$f(i,(function(e){$i(t,e)})),n}function $i(t,e){var n=e.Ea();if(null!==n){for(var i=[],r=[],o=-1,a=0;a<n.length;a++)4!==n[a].status&&(2===n[a].status?(O(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=4,n[a].ne="set"):(O(1===n[a].status,"Unexpected transaction status in abort"),n[a].le(),r=r.concat(si(t.M,n[a].Da,!0)),n[a].I&&i.push(u(n[a].I,null,Error("set"),!1,null))));for(-1===o?Yf(e,null):n.length=o+1,dc(t.fa,e.path(),r),a=0;a<i.length;a++)gc(i[a])}}function aj(){this.sc={},this.ag=!1}function Y(t,e,n,i){this.k=t,this.path=e,this.n=n,this.pc=i}function bj(t){var e=null,n=null;if(t.oa&&(e=Od(t)),t.ra&&(n=Rd(t)),t.g===re){if(t.oa){if("[MIN_NAME]"!=Nd(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof e)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(t.ra){if("[MAX_NAME]"!=Pd(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(t.g===R){if(null!=e&&!fg(e)||null!=n&&!fg(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(t.g instanceof ve||t.g===Be,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function cj(t){if(t.oa&&t.ra&&t.la&&(!t.la||""===t.Rb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function dj(t,e){if(!0===t.pc)throw Error(e+": You can't combine multiple orderBy calls.")}function ej(t,e,n){var i={cancel:null,Qa:null};if(e&&n)i.cancel=e,F(t,3,i.cancel,!0),i.Qa=n,Qb(t,4,i.Qa);else if(e)if("object"==typeof e&&null!==e)i.Qa=e;else{if("function"!=typeof e)throw Error(E(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i}h=Ji.prototype,h.toString=function(){return(this.G.ob?"https://":"http://")+this.G.host},h.name=function(){return this.G.lc},h.Kb=function(t,e,n,i){this.ud++;var r=new P(t);e=this.He?this.He(t,e):e,t=[],i?n?(e=ma(e,(function(t){return Q(t)})),t=yi(this.M,r,e,i)):(e=Q(e),t=ui(this.M,r,e,i)):n?(i=ma(e,(function(t){return Q(t)})),t=ti(this.M,r,i)):(i=Q(e),t=qi(this.M,new Ac(Gf,r,i))),i=r,0<t.length&&(i=Ni(this,r)),dc(this.fa,i,t)},h.Xc=function(t){Ki(this,"connected",t),!1===t&&Oi(this)},h.Se=function(t){var e=this;zd(t,(function(t,n){Ki(e,n,t)}))},h.Pe=function(t){Ki(this,"authenticated",t)},h.Ob=function(t,e,n,i){this.f("set",{path:t.toString(),value:e,mh:n});var r=Mi(this),o=(r=Xc(e=Q(e,n),r),this.Kd++);r=pi(this.M,t,r,o,!0);$b(this.fa,r);var a=this;this.da.put(t.toString(),e.J(!0),(function(e,n){var r="ok"===e;r||S("set at "+t+" failed: "+e),r=si(a.M,o,!r),dc(a.fa,t,r),Pi(i,e,n)})),Ni(this,r=Qi(this,t)),dc(this.fa,r,[])},h.update=function(t,e,n){this.f("update",{path:t.toString(),value:e});var i=!0,r=Mi(this),o={};if(v(e,(function(t,e){i=!1;var n=Q(t);o[e]=Xc(n,r)})),i)fc("update() called with empty data.  Don't do anything."),Pi(n,"ok");else{var a=this.Kd++,s=ri(this.M,t,o,a);$b(this.fa,s);var h=this;this.da.Df(t.toString(),e,(function(e,i){(r="ok"===e)||S("update at "+t+" failed: "+e);var r=si(h.M,a,!r),o=t;0<r.length&&(o=Ni(h,t)),dc(h.fa,o,r),Pi(n,e,i)})),Ni(this,e=Qi(this,t)),dc(this.fa,t,[])}},h.Md=function(t,e){var n=this;this.da.Md(t.toString(),(function(i,r){"ok"===i&&wg(n.na,t),Pi(e,i,r)}))},h.Cb=function(){this.Va&&this.Va.Cb()},h.vc=function(){this.Va&&this.Va.vc()},h.bf=function(t){if("undefined"!=typeof console){t?(this.hd||(this.hd=new oc(this.Xa)),t=this.hd.get()):t=this.Xa.get();var e,n=Pa(ra(t),(function(t,e){return Math.max(e.length,t)}),0);for(e in t){for(var i=t[e],r=e.length;r<n+2;r++)e+=" ";console.log(e+i)}}},h.cf=function(t){rc(this.Xa,t),this.dh.Vf[t]=!0},h.f=function(t){var e="";this.Va&&(e=this.Va.id+":"),fc(e,arguments)},aj.prototype.Cb=function(){for(var t in this.sc)this.sc[t].Cb()},aj.prototype.vc=function(){for(var t in this.sc)this.sc[t].vc()},aj.prototype.ze=function(){this.ag=!0},ba(aj),aj.prototype.interrupt=aj.prototype.Cb,aj.prototype.resume=aj.prototype.vc,h=Y.prototype,h.Mb=function(){return D("Query.ref",0,0,arguments.length),new X(this.k,this.path)},h.Ib=function(t,e,n,i){D("Query.on",2,4,arguments.length),lg("Query.on",t,!1),F("Query.on",2,e,!1);var r=ej("Query.on",n,i);if("value"===t)Ri(this.k,this,new ii(e,r.cancel||null,r.Qa||null));else{var o={};o[t]=e,Ri(this.k,this,new ji(o,r.cancel,r.Qa))}return e},h.mc=function(t,e,n){D("Query.off",0,3,arguments.length),lg("Query.off",t,!0),F("Query.off",2,e,!0),Qb("Query.off",3,n);var i=null,r=null;"value"===t?i=new ii(e||null,null,n||null):t&&(e&&((r={})[t]=e),i=new ji(r,null,n||null)),r=this.k,i=".info"===K(this.path)?r.Fd.nb(this,i):r.M.nb(this,i),bc(r.fa,this.path,i)},h.Og=function(t,e){function n(s){o&&(o=!1,r.mc(t,n),e&&e.call(i.Qa,s),a.resolve(s))}D("Query.once",1,4,arguments.length),lg("Query.once",t,!1),F("Query.once",2,e,!0);var i=ej("Query.once",arguments[2],arguments[3]),r=this,o=!0,a=new B;return Nb(a.D),this.Ib(t,n,(function(e){r.mc(t,n),i.cancel&&i.cancel.call(i.Qa,e),a.reject(e)})),a.D},h.Le=function(t){if(S("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),D("Query.limit",1,1,arguments.length),!fa(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var e=this.n.Le(t);return cj(e),new Y(this.k,this.path,e,this.pc)},h.Me=function(t){if(D("Query.limitToFirst",1,1,arguments.length),!fa(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Me(t),this.pc)},h.Ne=function(t){if(D("Query.limitToLast",1,1,arguments.length),!fa(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ne(t),this.pc)},h.Pg=function(t){if(D("Query.orderByChild",1,1,arguments.length),"$key"===t)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ng("Query.orderByChild",t),dj(this,"Query.orderByChild");var e=new P(t);if(e.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return e=new ve(e),bj(e=Fe(this.n,e)),new Y(this.k,this.path,e,!0)},h.Qg=function(){D("Query.orderByKey",0,0,arguments.length),dj(this,"Query.orderByKey");var t=Fe(this.n,re);return bj(t),new Y(this.k,this.path,t,!0)},h.Rg=function(){D("Query.orderByPriority",0,0,arguments.length),dj(this,"Query.orderByPriority");var t=Fe(this.n,R);return bj(t),new Y(this.k,this.path,t,!0)},h.Sg=function(){D("Query.orderByValue",0,0,arguments.length),dj(this,"Query.orderByValue");var t=Fe(this.n,Be);return bj(t),new Y(this.k,this.path,t,!0)},h.ce=function(t,e){D("Query.startAt",0,2,arguments.length),gg("Query.startAt",t,this.path,!0),mg("Query.startAt",e);var n=this.n.ce(t,e);if(cj(n),bj(n),this.n.oa)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return p(t)||(e=t=null),new Y(this.k,this.path,n,this.pc)},h.vd=function(t,e){D("Query.endAt",0,2,arguments.length),gg("Query.endAt",t,this.path,!0),mg("Query.endAt",e);var n=this.n.vd(t,e);if(cj(n),bj(n),this.n.ra)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,n,this.pc)},h.tg=function(t,e){if(D("Query.equalTo",1,2,arguments.length),gg("Query.equalTo",t,this.path,!1),mg("Query.equalTo",e),this.n.oa)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.ra)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.ce(t,e).vd(t,e)},h.toString=function(){D("Query.toString",0,0,arguments.length);for(var t=this.path,e="",n=t.aa;n<t.u.length;n++)""!==t.u[n]&&(e+="/"+encodeURIComponent(String(t.u[n])));return this.k.toString()+(e||"/")},h.wa=function(){var t=xd(Ge(this.n));return"{}"===t?"default":t},Y.prototype.ref=Y.prototype.Mb,Y.prototype.on=Y.prototype.Ib,Y.prototype.off=Y.prototype.mc,Y.prototype.once=Y.prototype.Og,Y.prototype.limit=Y.prototype.Le,Y.prototype.limitToFirst=Y.prototype.Me,Y.prototype.limitToLast=Y.prototype.Ne,Y.prototype.orderByChild=Y.prototype.Pg,Y.prototype.orderByKey=Y.prototype.Qg,Y.prototype.orderByPriority=Y.prototype.Rg,Y.prototype.orderByValue=Y.prototype.Sg,Y.prototype.startAt=Y.prototype.ce,Y.prototype.endAt=Y.prototype.vd,Y.prototype.equalTo=Y.prototype.tg,Y.prototype.toString=Y.prototype.toString;var Z={};function X(t,e){var n,i,r;if(t instanceof Ji)n=t,i=e;else{var o;if(D("new Firebase",1,2,arguments.length),n=(i=sd(arguments[0])).eh,"firebase"===i.domain&&rd(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||rd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.ob||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new dd(i.host,i.ob,n,"ws"===i.scheme||"wss"===i.scheme),r=(i=new P(i.bd)).toString(),!(o=!q(n.host)||0===n.host.length||!eg(n.lc))&&(o=0!==r.length)&&(r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),o=!(q(r)&&0!==r.length&&!cg.test(r))),o)throw Error(E("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(e)if(e instanceof aj)r=e;else{if(!q(e))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");r=aj.yb(),n.Rd=e}else r=aj.yb();o=n.toString();var a=z(r.sc,o);a||(a=new Ji(n,r.ag),r.sc[o]=a),n=a}Y.call(this,n,i,De,!1),this.then=void 0,this.catch=void 0}Z.zc=Rh,Z.DataConnection=Z.zc,Rh.prototype.bh=function(t,e){this.Ia("q",{p:t},e)},Z.zc.prototype.simpleListen=Z.zc.prototype.bh,Rh.prototype.sg=function(t,e){this.Ia("echo",{d:t},e)},Z.zc.prototype.echo=Z.zc.prototype.sg,Rh.prototype.interrupt=Rh.prototype.Cb,Z.dg=Fh,Z.RealTimeConnection=Z.dg,Fh.prototype.sendRequest=Fh.prototype.Ia,Fh.prototype.close=Fh.prototype.close,Z.Cg=function(t){var e=Rh.prototype.put;return Rh.prototype.put=function(n,i,r,o){p(o)&&(o=t()),e.call(this,n,i,r,o)},function(){Rh.prototype.put=e}},Z.hijackHash=Z.Cg,Z.cg=dd,Z.ConnectionTarget=Z.cg,Z.wa=function(t){return t.wa()},Z.queryIdentifier=Z.wa,Z.Eg=function(t){return t.k.Va.ba},Z.listens=Z.Eg,Z.ze=function(t){t.ze()},Z.forceRestClient=Z.ze,ka(X,Y);var fj=X,gj=["Firebase"],hj=n,ij;gj[0]in hj||!hj.execScript||hj.execScript("var "+gj[0]);for(;gj.length&&(ij=gj.shift());)!gj.length&&p(fj)?hj[ij]=fj:hj=hj[ij]?hj[ij]:hj[ij]={};X.goOffline=function(){D("Firebase.goOffline",0,0,arguments.length),aj.yb().Cb()},X.goOnline=function(){D("Firebase.goOnline",0,0,arguments.length),aj.yb().vc()},X.enableLogging=od,X.ServerValue={TIMESTAMP:{".sv":"timestamp"}},X.SDK_VERSION=Eb,X.INTERNAL=U,X.Context=aj,X.TEST_ACCESS=Z,X.prototype.name=function(){return S("Firebase.name() being deprecated. Please use Firebase.key() instead."),D("Firebase.name",0,0,arguments.length),this.key()},X.prototype.name=X.prototype.name,X.prototype.key=function(){return D("Firebase.key",0,0,arguments.length),this.path.e()?null:me(this.path)},X.prototype.key=X.prototype.key,X.prototype.o=function(t){if(D("Firebase.child",1,1,arguments.length),fa(t))t=String(t);else if(!(t instanceof P))if(null===K(this.path)){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ng("Firebase.child",e)}else ng("Firebase.child",t);return new X(this.k,this.path.o(t))},X.prototype.child=X.prototype.o,X.prototype.parent=function(){D("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new X(this.k,t)},X.prototype.parent=X.prototype.parent,X.prototype.root=function(){D("Firebase.ref",0,0,arguments.length);for(var t=this;null!==t.parent();)t=t.parent();return t},X.prototype.root=X.prototype.root,X.prototype.set=function(t,e){D("Firebase.set",1,2,arguments.length),og("Firebase.set",this.path),gg("Firebase.set",t,this.path,!1),F("Firebase.set",2,e,!0);var n=new B;return this.k.Ob(this.path,t,null,C(n,e)),n.D},X.prototype.set=X.prototype.set,X.prototype.update=function(t,e){if(D("Firebase.update",1,2,arguments.length),og("Firebase.update",this.path),da(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return jg("Firebase.update",t,this.path),F("Firebase.update",2,e,!0),n=new B,this.k.update(this.path,t,C(n,e)),n.D},X.prototype.update=X.prototype.update,X.prototype.Ob=function(t,e,n){if(D("Firebase.setWithPriority",2,3,arguments.length),og("Firebase.setWithPriority",this.path),gg("Firebase.setWithPriority",t,this.path,!1),kg("Firebase.setWithPriority",2,e),F("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";var i=new B;return this.k.Ob(this.path,t,e,C(i,n)),i.D},X.prototype.setWithPriority=X.prototype.Ob,X.prototype.remove=function(t){return D("Firebase.remove",0,1,arguments.length),og("Firebase.remove",this.path),F("Firebase.remove",1,t,!0),this.set(null,t)},X.prototype.remove=X.prototype.remove,X.prototype.transaction=function(t,e,n){if(D("Firebase.transaction",1,3,arguments.length),og("Firebase.transaction",this.path),F("Firebase.transaction",1,t,!1),F("Firebase.transaction",2,e,!0),p(n)&&"boolean"!=typeof n)throw Error(E("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";void 0===n&&(n=!0);var i=new B;return r(e)&&Nb(i.D),Si(this.k,this.path,t,(function(t,n,o){t?i.reject(t):i.resolve(new ei(n,o)),r(e)&&e(t,n,o)}),n),i.D},X.prototype.transaction=X.prototype.transaction,X.prototype.Zg=function(t,e){D("Firebase.setPriority",1,2,arguments.length),og("Firebase.setPriority",this.path),kg("Firebase.setPriority",1,t),F("Firebase.setPriority",2,e,!0);var n=new B;return this.k.Ob(this.path.o(".priority"),t,null,C(n,e)),n.D},X.prototype.setPriority=X.prototype.Zg,X.prototype.push=function(t,e){D("Firebase.push",0,2,arguments.length),og("Firebase.push",this.path),gg("Firebase.push",t,this.path,!0),F("Firebase.push",2,e,!0);var n=Li(this.k),i=hf(n);n=this.o(i);if(null!=t){var o=this,a=n.set(t,e).then((function(){return o.o(i)}));n.then=u(a.then,a),n.catch=u(a.then,a,void 0),r(e)&&Nb(a)}return n},X.prototype.push=X.prototype.push,X.prototype.lb=function(){return og("Firebase.onDisconnect",this.path),new V(this.k,this.path)},X.prototype.onDisconnect=X.prototype.lb,X.prototype.O=function(t,e,n){S("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),D("Firebase.auth",1,3,arguments.length),pg("Firebase.auth",t),F("Firebase.auth",2,e,!0),F("Firebase.auth",3,e,!0);var i=new B;return dh(this.k.O,t,{},{remember:"none"},C(i,e),n),i.D},X.prototype.auth=X.prototype.O,X.prototype.je=function(t){D("Firebase.unauth",0,1,arguments.length),F("Firebase.unauth",1,t,!0);var e=new B;return eh(this.k.O,C(e,t)),e.D},X.prototype.unauth=X.prototype.je,X.prototype.Be=function(){return D("Firebase.getAuth",0,0,arguments.length),this.k.O.Be()},X.prototype.getAuth=X.prototype.Be,X.prototype.Ig=function(t,e){D("Firebase.onAuth",1,2,arguments.length),F("Firebase.onAuth",1,t,!1),Qb("Firebase.onAuth",2,e),this.k.O.Ib("auth_status",t,e)},X.prototype.onAuth=X.prototype.Ig,X.prototype.Hg=function(t,e){D("Firebase.offAuth",1,2,arguments.length),F("Firebase.offAuth",1,t,!1),Qb("Firebase.offAuth",2,e),this.k.O.mc("auth_status",t,e)},X.prototype.offAuth=X.prototype.Hg,X.prototype.hg=function(t,e,n){D("Firebase.authWithCustomToken",1,3,arguments.length),2===arguments.length&&Hb(e)&&(n=e,e=void 0),pg("Firebase.authWithCustomToken",t),F("Firebase.authWithCustomToken",2,e,!0),sg("Firebase.authWithCustomToken",3,n,!0);var i=new B;return dh(this.k.O,t,{},n||{},C(i,e)),i.D},X.prototype.authWithCustomToken=X.prototype.hg,X.prototype.ig=function(t,e,n){D("Firebase.authWithOAuthPopup",1,3,arguments.length),2===arguments.length&&Hb(e)&&(n=e,e=void 0),rg("Firebase.authWithOAuthPopup",t),F("Firebase.authWithOAuthPopup",2,e,!0),sg("Firebase.authWithOAuthPopup",3,n,!0);var i=new B;return ih(this.k.O,t,n,C(i,e)),i.D},X.prototype.authWithOAuthPopup=X.prototype.ig,X.prototype.jg=function(t,e,n){D("Firebase.authWithOAuthRedirect",1,3,arguments.length),2===arguments.length&&Hb(e)&&(n=e,e=void 0),rg("Firebase.authWithOAuthRedirect",t),F("Firebase.authWithOAuthRedirect",2,e,!1),sg("Firebase.authWithOAuthRedirect",3,n,!0);var i=new B,r=this.k.O,o=n,a=C(i,e);gh(r);var s=[Qg];o=Ag(o);return"anonymous"===t||"firebase"===t?T(a,Sg("TRANSPORT_UNAVAILABLE")):(cd.set("redirect_client_options",o.qd),hh(r,s,"/auth/"+t,o,a)),i.D},X.prototype.authWithOAuthRedirect=X.prototype.jg,X.prototype.kg=function(t,e,n,i){D("Firebase.authWithOAuthToken",2,4,arguments.length),3===arguments.length&&Hb(n)&&(i=n,n=void 0),rg("Firebase.authWithOAuthToken",t),F("Firebase.authWithOAuthToken",3,n,!0),sg("Firebase.authWithOAuthToken",4,i,!0);var r=new B;return q(e)?(qg("Firebase.authWithOAuthToken",2,e),fh(this.k.O,t+"/token",{access_token:e},i,C(r,n))):(sg("Firebase.authWithOAuthToken",2,e,!1),fh(this.k.O,t+"/token",e,i,C(r,n))),r.D},X.prototype.authWithOAuthToken=X.prototype.kg,X.prototype.gg=function(t,e){D("Firebase.authAnonymously",0,2,arguments.length),1===arguments.length&&Hb(t)&&(e=t,t=void 0),F("Firebase.authAnonymously",1,t,!0),sg("Firebase.authAnonymously",2,e,!0);var n=new B;return fh(this.k.O,"anonymous",{},e,C(n,t)),n.D},X.prototype.authAnonymously=X.prototype.gg,X.prototype.lg=function(t,e,n){D("Firebase.authWithPassword",1,3,arguments.length),2===arguments.length&&Hb(e)&&(n=e,e=void 0),sg("Firebase.authWithPassword",1,t,!1),tg("Firebase.authWithPassword",t,"email"),tg("Firebase.authWithPassword",t,"password"),F("Firebase.authWithPassword",2,e,!0),sg("Firebase.authWithPassword",3,n,!0);var i=new B;return fh(this.k.O,"password",t,n,C(i,e)),i.D},X.prototype.authWithPassword=X.prototype.lg,X.prototype.ve=function(t,e){D("Firebase.createUser",1,2,arguments.length),sg("Firebase.createUser",1,t,!1),tg("Firebase.createUser",t,"email"),tg("Firebase.createUser",t,"password"),F("Firebase.createUser",2,e,!0);var n=new B;return this.k.O.ve(t,C(n,e)),n.D},X.prototype.createUser=X.prototype.ve,X.prototype.Xe=function(t,e){D("Firebase.removeUser",1,2,arguments.length),sg("Firebase.removeUser",1,t,!1),tg("Firebase.removeUser",t,"email"),tg("Firebase.removeUser",t,"password"),F("Firebase.removeUser",2,e,!0);var n=new B;return this.k.O.Xe(t,C(n,e)),n.D},X.prototype.removeUser=X.prototype.Xe,X.prototype.se=function(t,e){D("Firebase.changePassword",1,2,arguments.length),sg("Firebase.changePassword",1,t,!1),tg("Firebase.changePassword",t,"email"),tg("Firebase.changePassword",t,"oldPassword"),tg("Firebase.changePassword",t,"newPassword"),F("Firebase.changePassword",2,e,!0);var n=new B;return this.k.O.se(t,C(n,e)),n.D},X.prototype.changePassword=X.prototype.se,X.prototype.re=function(t,e){D("Firebase.changeEmail",1,2,arguments.length),sg("Firebase.changeEmail",1,t,!1),tg("Firebase.changeEmail",t,"oldEmail"),tg("Firebase.changeEmail",t,"newEmail"),tg("Firebase.changeEmail",t,"password"),F("Firebase.changeEmail",2,e,!0);var n=new B;return this.k.O.re(t,C(n,e)),n.D},X.prototype.changeEmail=X.prototype.re,X.prototype.Ze=function(t,e){D("Firebase.resetPassword",1,2,arguments.length),sg("Firebase.resetPassword",1,t,!1),tg("Firebase.resetPassword",t,"email"),F("Firebase.resetPassword",2,e,!0);var n=new B;return this.k.O.Ze(t,C(n,e)),n.D},X.prototype.resetPassword=X.prototype.Ze})();
(function(win){
   
 $(document).on('click','.groupactive>*',function(){
    console.log(this);
    var ele = $(this);
    ele.addClass('active').siblings().removeClass('active');
});

    
 
 

win.renderData = function(u,modal){ 
    for(var i in u){
      var a = modal.find('.'+i);
      if(a.length==0){
        a = modal.find(`[name="${i}"]`);
      }
      if(a.length){
          switch(a[0].nodeName.toLowerCase()){
            case 'input':
                if(a[0].type=='radio' || a[0].type=='checkbox' ){
                    a[0].checked = a[0].value==u[i];
                }else{
                  a.val(u[i]);
                }
            break;
            case 'select':
            case 'textarea':
                a.val(u[i]);    
            break;
            default:
                a.html(u[i]);   
            break;
          }
          
        }
    }   
};

$.bindData = function(ele,data){
     (typeof ele=="string"?$(ele):ele).bindData(data);
   };

   $.fn.bindData  = function(settings) {
      return this.each(function(){
        var form = $(this);
         for(var i in settings){
          if(i){
              
              var e = form.find("."+i);
              if(e.length==0){
                e = form.find("[name='"+i+"']");
              }
              if(e.length==0){
                e = form.find("[value='"+i+"']");
              }
              if(e.length){
                  if(e[0].nodeName=="INPUT"){

                      if(e[0].type=="checkbox" || this.type=='radio'){


                          if(settings[i] == e[0].value){
                              e.attr("checked","checked");
                          }else{
                              e.removeAttr("checked");
                          } 
                      }else{
                          e.val(settings[i]);
                      }
                  }else if(e[0].nodeName=="TEXTAREA"){
                    

                    //check embed ckeditor
                    if(e.attr("data-ckeditor")&&window.CKEDITOR_GO){
                      CKEDITOR_GO(e[0],settings[i],{
                       callback: function(){
                        
                       }
                     });
                    }else{
                      e.val(settings[i]);
                    }

                  }else if(e[0].nodeName=="SELECT"){
                     e.val(settings[i]);
                  }else if(e[0].nodeName=="IMG"){
                    e.attr("src",settings[i]);
                  }else if(e[0].nodeName=="A"){
                    e.attr("href",settings[i]).html(settings[i]);
                  }else{
                      e.html(settings[i]);
                  }
              }
          }


         }
      });
   };



(function(){
    $('body').on('keydown', 'input', function(ev) {
        if (ev.which == 13) {
            var enterEv = $.extend({}, ev, { type: 'enterKey' });
            return $(ev.target).trigger(enterEv);
        }
    });

    $.fn.enterKey = function(selector, data, fn) {
        return this.on('enterKey', selector, data, fn);
    };
})();


(function(){
    $('body').on('change', '.delay', delay(function(ev) {
        
        var enterEv = $.extend({}, ev, { type: 'onDelay' });
        return $(ev.target).trigger(enterEv);
         
    },700));

    $.fn.onDelay = function(selector, data, fn) {
        return this.on('onDelay', selector, data, fn);
    };
})();

/*

<div class="formdiv">

                            <label for="fname">Enter amount</label>

                            <input id="fname" type="text" class="cool"/>

                          </div>

 */
 $.fn.formValidate = function(options) {
      return this.each(function(){
          var settings = $.extend({},options,true);
          settings.submitHandler = function(form){

             if(window.CKEDITOR){
                for(var i in CKEDITOR.instances){
                    var a  = $(form).find("#"+i);
                    if(a.length){
                      CKEDITOR.instances[i].updateElement();
                      // a.val(encodeURIComponent(a.val()));
                    }
                }
             }

             form.data = $(form).serializeObject();
             var buttons = $(form).find("button,.btn,input[type='submit']").attr("disabled","disabled");
             if(options.submitHandler)options.submitHandler(form);
             setTimeout(function(){
                buttons.removeAttr("disabled");;
             },4000);
          };
          $(this).validate(settings);
      });
  };

//button
 $(document).on('focusin','input', function() {

  $(this).parent().find('label').addClass('active');

  

}).on('focusout','input', function() {

  if (!this.value) {

    $(this).parent().find('label').removeClass('active');

  }

});
$.fn.formdiv = function(val){
    return this.each(function(){
        var ele = $(this);
        win.formdiv(ele).active(val);
    });
};
win.formdiv = function(ele){

  return {

     active : function(v){

      if(ele[0].nodeName=="INPUT"){

          ele.closest(".formdiv").find('label').addClass('active');

          ele.val(v||"");

      }else{

         ele.find('label').addClass('active');

          ele.find('input').val(v||"");

      }

     },

    unactive : function(v){

      if(ele[0].nodeName=="INPUT"){

          ele.closest(".formdiv").find('label').removeClass('active');

          ele.val(v||"");

      }else{

        ele.find('label').addClass('active');

          ele.find('input').val(v||"");

      }

     }

  }

};
 
})(window);
String.prototype.change = function(f){
   $(document).on('change',this.toString(),f);
};
String.prototype.click  = function(ele,f){
    var name = String(this); 

    if(typeof ele=="object"){
        ele.on("click",function(e){
            e.data = name.pageData();
            f.apply(this,arguments);
        });
    }else{
        if(typeof ele=="function"){
            $(document).on("click",name,function(e){ 
                ele.apply(this,arguments);
            });
        }else{
            $(document).on("click",ele,function(e){
                e.data = name.pageData();
                f.apply(this,arguments);
            });
        }
        
    }
    
};
String.prototype.a  = function(ele,f){
    var name = String(this); 
    a.click(ele,f);
};

/**
 * Ge Log History router
 * @param  {[type]} ){                 var historylog [description]
 * @return {[type]}     [description]
 */
window.getLogRouter = (function(){
    var historylog =null;
    var key= document.location.host.replaceAll(/[^0-9a-z]/ig,"")+"f7_history";

    //for debug
    window.app.debug = {
        router : window.localStorage.getItem(key+"f7_history_url"),
        data : (function(){
           var a=  window.localStorage.getItem(key+"f7_history_url_data");
           try{
            a = JSON.parse(a);
           }catch(e){

           }
           return a?a:{};
        })()
    };
         
    return function(){
        if(historylog==null){
            historylog = window.localStorage.getItem(key);
            historylog=historylog?JSON.parse(historylog):{path:null,data:null,history:null,log:{}};
            historylog.get  =function(path){
                return this.log[path];
            };
            historylog.set  =function(path,data){
                this.log[path] = data;
               
                return this;
            };
            historylog.key = function(k){
                return key+k;
            };
            historylog.save  =function(){ 
                window.localStorage.setItem(key, JSON.stringify(this));
                return this;
            };
        }
        return historylog;
    };
})();

window.AEventPage = function(name_route){
    return {name:name_route,o:{ 
       
        pageAfterIn: function (e, page) {

            // console.log(name_route);
            $(document).trigger(name_route+"_Before",[e,page]);


        },
        pageInit: function (e, page) {
            var modal = $(page.el);
            var hasloader  = modal.attr("has-loader");
            page.el._template = modal.find(".page-content").eq(0).html();

            page.el.template = function(data){
                var s = Handlebars.compile(this._template);

                $(this).find(".page-content").eq(0).html(s(data));
            };

            if(window.app.config&&window.app.config.image){
                $(page.el).find("img").attr("onerror","this.src='"+window.app.config.image+"';");
            }
            page.el.template({});

            var historylog =getLogRouter();

            var hash = app.views.main.router.currentRoute.path;
            historylog.path = hash;
            window.localStorage.setItem(historylog.key("f7_history_url"), hash);
            var a= $.extend({},name_route.pageData(),true);
            if(a['bs.tab'])delete a['bs.tab'];
            window.localStorage.setItem(historylog.key("f7_history_url_data"), JSON.stringify(a));

            historylog.data = a;
            historylog.history = app.views.main.router.history; 
            historylog.set(hash,a);
            historylog.save();
            

            setTimeout(function(){ 
                $(document).trigger(name_route+"_Init",[e,page]);
            },100); 


             //bg
             modal.find('[data-setbg]').each(function () {
                var me = $(this);
                  var bg = me.attr('data-setbg');
                  if(parseInt(this.style.height)<75 && window.innerWidth<1050){
                            me.css("height","125px");
                  }

                  if(this.nodeName=="IMG"){
                    this.src=bg;
                  }else{
                     me.css('background-image', 'url(' + bg + ')');
                  }
                 me.removeAttr('data-setbg');
              });

            //repeat
            modal.find('[data-repeat]').each(function () {
                var me = $(this);
                var num = me.attr("data-repeat")*1; 
                var s = me.attr("data-repeat-template")?$(me.attr("data-repeat-template")).html():me.html();
                s = Handlebars.compile(s);
                // console.log(s);
                for(var i=0;i<num;i++){
                     me.append(s({id:i,name:"Name "+i}));
                }
                // me.html(me.html().repeat(num));
            });

            if(hasloader!=undefined)window.showLoader(hasloader*1||3);
            
        },
        pageBeforeRemove: function (e, page) {
           $(document).trigger(name_route+"_Leave",[e,page]);
        }
    }};
};
 
function alertbox(title,message,buttons){
     
    

   return  new Promise(function(a,b){
       var opts = {
            title: title||'Title',
            message: message||"...",
            size: 'large',
            
        };
        if(!buttons){
            opts.buttons= {
                cancel: {
                    label: "Cancel",
                    className: 'btn-danger',
                    callback: b
                }, 
                ok: {
                    label: "Ok",
                    className: 'btn-info',
                    callback: a
                }
            };
        }
        var dialog = bootbox.dialog(opts);
   });
}

setTimeout(function(){
    $(document).ready(function(){
    
    var id = Date.now();
    $(".view-main").append(` <div class="sheet-modal search-sheet${id}" data-close-on-escape="true" data-swipe-to-close="true" style="height: 50%;">
            <div class="toolbar">
            <div class="toolbar-inner">
              <div class="left"></div>
              <div class="right">
                <a class="link sheet-close">Close</a>
              </div>
            </div>
          </div>
            <div class="sheet-modal-inner" style="    background-color: #fff;">
                <div class="swipe-handler"></div>
                <div class="page-content-inner">
                  <div class="searchbar-backdrop"></div>  
                   
                    <form data-search-container=".search-list${id}" data-search-in=".item-title" class="searchbar searchbar-init">
                      <div class="searchbar-inner">
                        <div class="searchbar-input-wrap">
                          <input type="search" placeholder="Search" />
                          <i class="searchbar-icon"></i>
                          <span class="input-clear-button"></span>
                        </div>
                        <span class="searchbar-disable-button">Cancel</span>
                      </div>
                    </form>
                    <div style="    margin: 0;" class="list list-strong-ios list-outline-ios list-dividers-ios simple-list${id} searchbar-not-found">
                          <ul>
                            <li>Nothing found</li>
                          </ul>
                    </div>
                    <div style="    margin: 0;" class="list simple-list search-list${id} searchbar-found">
                     <ul>
                        <li class="item-content">
                          <div class="item-inner">
                            <div class="item-title">---</div>
                          </div>
                        </li> 
                      </ul>
                    </div>
                </div>
            </div>
        </div>`);
    var callback = null; 
    var sheet = null;
    var multiline =0;
    var multilinedata =null;
    $(document).on("click",".search-list"+id+" li",function(){
        var me = $(this);
        // console.log(this);
        var info = me.data("info");
        if(typeof callback=="function" && multiline==0){
            callback(info);

            sheetSwipeToClose.close();
        }else{
            if(me.hasClass("active")){
                me.removeClass("active");
                delete multilinedata["i_"+me.index()];
            }else{
                me.addClass("active");
                multilinedata["i_"+me.index()] = info;
            }
            
        }
    }).on("click",".search-list"+id+" .btn-choose",function(){
         
        if(typeof callback=="function"){
             sheetSwipeToClose.close();
            
            callback(multilinedata); 
           multilinedata = null;
        }
    });
    var sheetSwipeToClose = app.sheet.create({
        el: '.search-sheet'+id,
        swipeToClose: true,
        push: true,
        backdrop: true,
    });
    function renderItem(data,index){
        return `<li class="item-content" data-id="{{id}}" data-info='${JSON.stringify(data)}'>
          <div class="item-inner">
            <div class="item-title">${data.title||data.name}</div>
          </div>
        </li>`;
    }
    function render(options){

         
           var s =  (options.data||[]).map(function(v,i){
                return typeof options.renderItem=="function"?options.renderItem(v,i):renderItem(v,i);
            }).join("");

           sheet.find(".search-list"+id).html(s);
         
    }

    window.searchSheet = function(data,f){
        data = $.extend({
            key:".item-title",
            multiline:multiline,
            language:{

            }
        },data,true);
        sheet= $('.search-sheet'+id);
        sheet.find("form").attr("data-search-in",data.key);

        multiline = data.multiline;

        if(multiline){
            multilinedata ={};
            //apend ui
            sheet.append(`<button class="button button-fill btn-choose">Choose</button>`);
        }else{
            sheet.find(".btn-choose").remove();
        }
        //
        render(data);

        callback =f;
        sheetSwipeToClose.open();
        //show data
        //
        
    };
    /*
     searchSheet({data:[{name:"hello"}]},function(r){
    
    })
     */
  });
},3000); 
function ptfdemo($ptrContent,options){
    options = $.extend({
        maxItems:60,
        loading:false,
        itemsPerLoad:20,
    },options,true);
//https://jsfiddle.net/hfwq58rd/
    // Dummy Content
            var songs = ['Yellow Submarine', "Don't Stop Me Now", 'Billie Jean', 'Californication'];
            var authors = ['Beatles', 'Queen', 'Michael Jackson', 'Red Hot Chili Peppers'];
            let items = [
              {
                picURL: 'https://cdn.framework7.io/placeholder/abstract-88x88-1.jpg',
                song: 'Yellow Submarine',
                author: 'Beatles',
              },
              {
                picURL: 'https://cdn.framework7.io/placeholder/abstract-88x88-2.jpg',
                song: "Don't Stop Me Now",
                author: 'Queen',
              },
              {
                picURL: 'https://cdn.framework7.io/placeholder/abstract-88x88-3.jpg',
                song: 'Billie Jean',
                author: 'Michael Jackson',
              },
            ]

            var loadMore = function(e, done)  {
              // Emulate 2s loading
              setTimeout(function() {
                var picURL = 'https://cdn.framework7.io/placeholder/abstract-88x88-' + (Math.floor(Math.random() * 10) + 1) + '.jpg';
                var song = songs[Math.floor(Math.random() * songs.length)];
                var author = authors[Math.floor(Math.random() * authors.length)];
                // Add new item
                items.push({
                  picURL,
                  song,
                  author,
                });
                //update
                
                done();
              }, 2000);
            };
            
        


            // Loading flag
         var loading = options.loading;

         // Last loaded index
         var lastIndex = $ptrContent.find('li').length;

         // Max items to load
         var maxItems = options.maxItems;

         // Append items per load
         var itemsPerLoad = options.itemsPerLoad;


            // Add 'refresh' listener on it
            $ptrContent.on('ptr:refresh', function (e,done) {
                console.log("pull to refresh");

                loadMore(e,function(){
                     // Update state to rerender
                    e.detail();
                })
            }).on('infinite', function (e) {
                console.log("infinite",e);

                    // Exit, if loading in progress
                if (loading) return;

                // Set loading flag
                loading = true;

                // Emulate 1s loading
                setTimeout(function () {
                   // Reset loading flag
                   loading = false;

                   if (lastIndex >= maxItems) {
                

                     
                      
                      // Remove preloader
                      $$('.infinite-scroll-preloader').remove();
                      return;
                   }

                   // Generate new items HTML
                   var html = '';
                   for (var i = lastIndex + 1; i <= lastIndex + itemsPerLoad; i++) {
                      html += `<li class = "item-content">
                         <div class = "item-inner">
                            <div class = "item-title">
                               Item ${i}
                            </div>
                         </div>
                      </li>`;
                   }

                   // Append new items
                   $ptrContent.find('ul').append(html);

                   // Update last loaded index
                   lastIndex = $ptrContent.find('li').length;
                }, 1000);
            });
}




(function(win){
	/**
    var picker =  pickerAddress({
                    title:'a ch ca bn', 
                    onChange:function(data){
                        console.log(data);
                    },
                    onSubmit:function(data){
                        console.log(data);
                    }
                 });
     */
    win.pickerAddress = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;
        var picker = null;

      
        function setCode(data){ 
             
        }
        function clearCode(){ 
         
             modal.find('input').val('');
             
        }

        return function(options){
            options = $.extend({ 
                onChange:function(data){ 
                },
                    onSubmit:function(data){
                        // console.log(data);
                    }
            },options,true);

            if(loaded==0){
                loaded=1;

                picker = f7PickerContent({
                    title:'a ch',
                    content:`
                        <style>
                     
     
    </style>
                        <div class="otp-screen-title"></div>
                        <div class="countrycode" style='min-height: 120px;'> 
                            
                        </div>
                        <div class="text-center"> 
                             <button type="button" class="btn btn-primary btnok">Xc nhn</button>
                        </div>
                    `,
                    init : function(e){
                        var sheet = e.sheet;
                       

                        sheet.find('.countrycode').country($.extend({
                            type:'address',
                            init: function(){
                                console.log(arguments);
                            },
                            onChange:function(data){
                                options.onChange(data);
                            }
                        },options,true));
                       
                        sheet.find('.btnok').on('click',function(){
                            options.onSubmit(modal.find('.countrycode').data('country').geData());
                            picker.close();
                        });
                    }
                 });
                modal = picker.sheet; 
            }else{
                modal.find('.countrycode').data('country').bindData(options);
            }
            console.log('abcd');

            modal.find('.left').html(options.title?options.title:`a ch`);
            modal.find('.otp-screen-title').html(options.content?options.content:`Vui lng nhp a ch:`);
     
     
            clearCode(); 

            picker.open();  



            return picker;
        };
    })();  
    /*
    var picker =  pickerKYCPhone({
                    title:'Xc thc s in thoi',
                    onClick:function(data){
                       postajax("user.php?a=kyc_phone",data,function(r){
                            if(r.code==1){
                                 picker.otp = r.data;
                            }else{
                                // alert(r.error);
                            }
                        });
                       console.log(data);
                    },
                    onReset:function(){
                        picker.otp = null;  
                    },
                    onValidate:function(data){
                        console.log(data);
                        //ask server
                        if(picker.otp==data.code){
                            postajax("user.php?a=kyc_email",data,function(r){
                                if(r.code==1){
                                     picker.otp = r.data;
                                }else{
                                    // alert(r.error);
                                }
                            });
                            picker.close();
                        }else{
                            $.toast('Invalid OTP');
                        }
                    },
                 });
     */
    win.pickerKYCPhone = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;
        var picker = null;

        var id_timer = null;

        function getCode(){
            var code =[];
             modal.find("input").each(function(v){
                if(this.value)
                code.push(this.value);
             });
             return modal.find("input").length==code.length?code.join(''):'';
        }
        function setCode(code){ 
            code = code+'';
            
            modal.find("input").each(function(i,v){
                this.value=code[i];
            });
        }
        function clearCode(){ 
         
            
            modal.find("input").each(function(v){
                this.value='';
            });
             
        }

        return function(options){
            options = $.extend({
                num:4,
                timer:150,
                onClick:function(data,ele){
                   // console.log(data);
                },
                onValidate:function(data,ele){
                    console.log(data);
                },
                onReset:function(next){
                     
                }
            },options,true);

            if(loaded==0){
                loaded=1;

                picker = f7PickerContent({
                    title:'Xc thc a ch Email',
                    content:`
                        <style>
                     
    .digit-group {
        min-height70px;
        width: 100%;
    display:flex;
    justify-content:center;
                        }
                        .digit-group input {
      width: 50px;
      height: 70px;
      background-color: #18182a;
      border: none;
      line-height: 50px;
      text-align: center;
      font-size: 24px;
      font-family: "Raleway", sans-serif;
      font-weight: 200;
      color: white;
      margin: 0 2px;
    }
    .digit-group .splitter {
      padding: 0 5px;
      color: white;
      font-size: 24px;
    }

    .prompt {
      margin-bottom: 20px;
      font-size: 20px;
      color: white;
    }
    </style>
                        <div class="otp-screen-title">Vui lng S in thoi:</div>
                        <div class="form-group flex-row"> 
                            <select style="width:105px;">
                                <option value='+84'>Vit Nam(+84)</option>
                            </select> <input type="tel" maxlength=14 onkeyup="$(this).val($(this).val().replace(/[^0-9\.]/ig,''))" placeholder="ex: +84 909656" id="otpemail" autofocus class="form-control otpphone" value="" /> 
                            <button type="button" class="btn btn-primary btnconfirm" style="width:75px">Tip tc</button>
                        </div>
                        <div class="form-group otpphonecode" style="display:none;"> 
                        <p>Vui lng kim tra m OTP trong tin nhn ca bn.</p>
                           
                             <div  class="digit-group">
    </div>
                            <div>thi gian cn li <span data-timer=150>0</span></div>
                            <div><button type="button" class="btn btn-primary btnok" style="display:none;">Xc nhn</button></div>
                        </div>
                    `,
                    init : function(e){
                        var sheet = e.sheet;
                        sheet.find('.btnconfirm').on('click',function(){
                            $(this).attr('disabled');
                            sheet.find('.otpphonecode').show();

                            var t = sheet.find('[data-timer]').attr('data-timer')*1;
                            var id = setInterval(function(){
                                
                                if(t--<=0){
                                    sheet.find('.btnconfirm').removeAttr('disabled');
                                    sheet.find('.btnok').hide();
                                    if(id)clearInterval(id);
                                    sheet.find('.otpphonecode').hide();
                                }

                                sheet.find('[data-timer]').html(t);
                                
                            },1000);

                            if(options.onClick){
                                options.onClick({prefix:sheet.find('select').val(),phone:sheet.find('.otpphone').val()},this);
                            }
                        });
                        
                       
                    }
                 });
                modal = picker.sheet;
     
                
            }
             modal.find('.otpphonecode').hide();

            modal.find('.left').html(options.title?options.title:`Xc thc OTP`);
            modal.find('.otp-screen-title').html(options.content?options.content:`Vui lng nhp a ch email bn di:`);

            var str = '';
            for(var i=0;i<options.num;i++){
                str += `<input type="tel" class="digit-${i+1}" maxlength="1" ${i>0?`data-previous="digit-${i}"`:''} ${i<options.num?`data-next="digit-${i+2}`:''}" />`;
            }
            modal.find('.digit-group').html(str); 

            modal.find('[data-timer]').attr('data-timer',options.timer); 
            clearCode();
     
            if(options.code)setCode(options.code);

            picker.open(); 

            modal.find('.digit-group').find('input').each(function () {
              $(this).attr('maxlength', 1);
              $(this).on('keyup', function (e) {
                var parent = $($(this).parent());

                if (e.keyCode === 8 || e.keyCode === 37) {
                  var prev = parent.find('input#' + $(this).data('previous'));

                  if (prev.length) {
                    $(prev).select();
                  }
                } else if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 65 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105 || e.keyCode === 39) {
                  var next = parent.find('input.' + $(this).data('next'));

                  if (next.length) {
                    $(next).select();
                  } else {
                    
                       var abc = getCode();
                       if(abc&&options.onValidate)options.onValidate({prefix:modal.find('select').val(),phone:modal.find('.otpphone').val(),code:abc});
                  }
                }
              });
            });

            modal.find('.digit-group .input').eq(0).focus(); 

            return picker;
        };
    })();  
    /*
    var picker =  pickerKYCEmail({
                    title:'Xc thc a ch Email',
                    onClick:function(data){
                       postajax("user.php?a=kyc_email",data,function(r){
                            if(r.code==1){
                                 picker.otp = r.data;
                            }else{
                                // alert(r.error);
                            }
                        });
                       console.log(data);
                    },
                    onReset:function(){
                        picker.otp = null;  
                    },
                    onValidate:function(data){
                        console.log(data);
                        //ask server
                        if(picker.otp==data.code){
                            postajax("user.php?a=kyc_email",data,function(r){
                                if(r.code==1){
                                     picker.otp = r.data;
                                }else{
                                    // alert(r.error);
                                }
                            });
                            picker.close();
                        }else{
                            $.toast('Invalid OTP');
                        }
                    },
                 });
     */
    win.pickerKYCEmail = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;
        var picker = null;

        var id_timer = null;

        function getCode(){
            var code =[];
             modal.find("input").each(function(v){
                if(this.value)
                code.push(this.value);
             });
             return modal.find("input").length==code.length?code.join(''):'';
        }
        function setCode(code){ 
            code = code+'';
            
            modal.find("input").each(function(i,v){
                this.value=code[i];
            });
        }
        function clearCode(){ 
         
            
            modal.find("input").each(function(v){
                this.value='';
            });
             
        }

        return function(options){
            options = $.extend({
                num:4,
                timer:150,
                type:"number",
                onClick:function(data,ele){
                   // console.log(data);
                },
                onValidate:function(data,ele){
                    console.log(data);
                },
                onReset:function(next){
                     
                }
            },options,true);

            if(loaded==0){
                loaded=1;

                picker = f7PickerContent({
                    title:'Xc thc a ch Email',
                    content:`
                        <style>
                     
    .digit-group {
        min-height70px;
        width: 100%;
    display:flex;
    justify-content:center;
                        }
                        .digit-group input {
      width: 50px;
      height: 70px;
      background-color: #18182a;
      border: none;
      line-height: 50px;
      text-align: center;
      font-size: 24px;
      font-family: "Raleway", sans-serif;
      font-weight: 200;
      color: white;
      margin: 0 2px;
    }
    .digit-group .splitter {
      padding: 0 5px;
      color: white;
      font-size: 24px;
    }

    .prompt {
      margin-bottom: 20px;
      font-size: 20px;
      color: white;
    }
    </style>
                        <div class="otp-screen-title">Vui lng nhp a ch email bn di:</div>
                        <div class="form-group flex-row"> 
                             <input type="email" onkeyup="$(this).val($(this).val().replace(/[^0-9a-z@\.]/ig,''))" placeholder="ex: abc@gmail.com" id="otpemail" autofocus name="otpemail" class="form-control otpemail" value="" /> 
                            <button type="button" class="btn btn-primary btnconfirm" style="width:75px">Tip tc</button>
                        </div>
                        <div class="error"></div>
                        <div class="form-group otpemailcode" style="display:none;"> 
                             <p>Vui lng kim tra m OTP trong hp th email ca bn. Trong trng hp khgn tm thy. Vui lng kim tra th mc Spam</p>
                             <div  class="digit-group">
    </div>
                            <div>thi gian cn li <span data-timer=150>0</span></div>
                            <div><button type="button" class="btn btn-primary btnok" style="display:none;">Xc nhn</button></div>
                        </div>
                    `,
                    init : function(e){
                        var sheet = e.sheet;
                        sheet.find('.btnconfirm').on('click',function(){
                            $(this).attr('disabled');
                            sheet.find('.otpemailcode').show();

                            var t = sheet.find('[data-timer]').attr('data-timer')*1;
                            var id = setInterval(function(){
                                
                                if(t--<=0){
                                    sheet.find('.btnconfirm').removeAttr('disabled');
                                    sheet.find('.btnok').hide();
                                    if(id)clearInterval(id);
                                    sheet.find('.otpemailcode').hide();
                                }

                                sheet.find('[data-timer]').html(t);
                                
                            },1000);

                            if(options.onClick){
                                options.onClick({email:sheet.find('#otpemail').val()},this);
                            }
                        });
                        
                       
                    }
                 });
                modal = picker.sheet;
     
                
            }


            modal.find('.otpemailcode').hide();

            modal.find('.left').html(options.title?options.title:`Xc thc OTP`);
            modal.find('.otp-screen-title').html(options.content?options.content:`Vui lng nhp a ch email bn di:`);

            var str = '';
            for(var i=0;i<options.num;i++){
                str += `<input type="tel" class="digit-${i+1}" maxlength="1" ${i>0?`data-previous="digit-${i}"`:''} ${i<options.num?`data-next="digit-${i+2}`:''}" />`;
            }
            modal.find('.digit-group').html(str); 

            modal.find('[data-timer]').attr('data-timer',options.timer); 
            clearCode();
     
            if(options.code)setCode(options.code);

            picker.open(); 

            modal.find('.digit-group').find('input').each(function () {
              modal.find('.error').html(""); 
               if(options.type=="number"&&isNaN(this.value)){
                    this.value="";
                    return;
                }

              $(this).attr('maxlength', 1);
              $(this).on('keyup', function (e) {


                var parent = $($(this).parent());

                if (e.keyCode === 8 || e.keyCode === 37) {
                  var prev = parent.find('input#' + $(this).data('previous'));

                  if (prev.length) {
                    $(prev).select();
                  }
                } else if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 65 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105 || e.keyCode === 39) {
                  var next = parent.find('input.' + $(this).data('next'));

                  if (next.length) {
                    $(next).select();
                  } else {
                    
                       var abc = getCode();
                       if(abc&&options.onValidate)options.onValidate({email:modal.find('#otpemail').val(),code:abc});
                  }
                }
              });
            });

            modal.find('.digit-group .input').eq(0).focus(); 
            sheetSwipeToClose.error = function(str){
                modal.find('.error').html(str); 
                modal.find('.wrapper-otp').css("pointer-events","auto"); 
            };
            sheetSwipeToClose.loading = {
                show: function(){
                    modal.find('.digit-group').css("pointer-events","auto"); 
                },
                hide: function(){
                     modal.find('.digit-group').css("pointer-events","none"); 
                }
            };

            return picker;
        };
    })();   

    win.pickerOTP = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;

        var id_timer = null;

        function getcode(){
            var code =[];
             modal.find("form .field").each(function(v){
                if(this.value)
                code.push(this.value);
             });
             return code.join('');
        }
        function setcode(code){ 
            code = code+'';
            
            modal.find("form .field").each(function(i,v){
                this.value=code[i];
            });
        }
        function clearcode(){ 
         
            
            modal.find("form .field").each(function(v){
                this.value='';
            });
             
        }

        return function(options){
            options = $.extend({
                num:4,
                type:"number",
                timer:150,
                onClick:function(data,ele){
                   // console.log(data);
                },
                onValidate:function(data,ele){
                    console.log(data);
                },
                onReset:function(next){
                     
                }
            },options,true);

            if(loaded==0){
                loaded=1;

                var tlp =`<style>
                .sheet-otp-picker form{}.sheet-otp-picker .otp-screen-title{text-align: center;color: #fff;}.sheet-otp-picker .otp-screen-title p{font-size: 16px;text-align: left;color: #a9a9a9;}.sheet-otp-picker .wrapper-otp {width: 100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-otp-picker .wrapper-otp input.field {width: 50px;line-height: 50px;font-size: 40px;font-family: 'Roboto-Black';text-align: center;text-transform: uppercase;color: #ff8a00 !important;margin: 30px 0;border-bottom: 4px solid #ff8a00;}.sheet-otp-picker .wrapper-otp input.field:focus {outline: none;}.sheet-otp-picker .time-sent-otp{display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-otp-picker .timer{-webkit-box-flex: 1;-ms-flex: 1;flex: 1;}.sheet-otp-picker button.resendcode{width: 120px;color: #ff8a00 ;font-size: 15px;}

                </style>
                <div class="sheet-modal sheet-otp-picker" data-close-on-escape="true" data-swipe-to-close="true" style="height: 45%;">
                        <div class="toolbar">
                        <div class="toolbar-inner">
                          <div class="left">--</div>
                          <div class="right">
                            <a class="link sheet-close">ng</a>
                          </div>
                        </div>
                      </div>
                        <div class="sheet-modal-inner">
                            <div class="swipe-handler"></div>
                            <div class="page-content">
                                 <form>
                                    <input type="hidden" name="code" class="code">
                                    <div class="otp-screen-title">
                                    </div>
                                <div class="wrapper-otp">
                                 
                                </div>
                                <div class="error"></div>
                                    <div class="time-sent-otp"> 
                                      <div class="timer">
                                        <span>Thi gian hiu lc: </span>
                                        <span class="timer timercounter" data-timer="150">0</span>
                                      </div>
                                      <button type="button" class="resendcode">Gi li OTP <i class="fa-solid fa-play"></i></button>
                                    </div>
                                </form>   
                            </div>
                        </div>
                    </div>`;
                $('body').append(tlp);
                modal = $('.sheet-otp-picker');

                sheetSwipeToClose = app.sheet.create({
                    el: '.sheet-otp-picker',
                    swipeToClose: true,
                    push: true,
                    customSearch:true,
                    backdrop: true,
                    closeByBackdropClick:false
                });
                modal.on('keyup',"form .field",function(){
                    modal.find('.error').html(""); 
                    
                    if(options.type=="number"&&isNaN(this.value)){
                        this.value="";
                        return;
                    }
                    var code = getcode();
                    if(code.length==modal.find("form .field").length){

                        options.onValidate(code);
                    }else{
                        if (event.key === 'Delete' || event.key === 'Backspace') {
                            $(this).prev().focus(); 
                        }else{
                            $(this).next().focus(); 
                        }
                        
                    } 
                });



                modal.find(".resendcode").on("click",function(){


                    options.onReset(function(status){
                        // postajax("userforgot.php?a=getOTP",params,function(res){
                        //     if(res.code){
                        //             params.session_id = res.session_id;
                        //             if(res.faker){
                        //               alert("OTP: "+res.faker);
                        //               // setcode(res.faker);
                        //               // modal.find("form").submit();
                        //             }else{
                        //               alert(res.message);
                        //             }

                        //             modal.find("form .field").eq(0).focus();
                        //         }else{
                        //             alert(res.error);
                        //         }
                        // });
                        
                        if(status){
                            if(id_timer){
                                clearInterval(id_timer);
                                sheetSwipeToClose.close();
                            }
                        }
                    });
                    if(id_timer){
                        clearInterval(id_timer);
                    }
                    var timer = modal.find(".timercounter").attr("data-timer")*1;
                    id_timer = setInterval(function(){
                        if(--timer>0){
                          modal.find(".timercounter").html(timer);
                        }else{
                           clearInterval(id_timer);
                           id_timer = null;
                        }
                    },1000);
                }); 
            }

            modal.find('.left').html(options.title?options.title:`Xc thc OTP`);
            modal.find('.otp-screen-title').html(options.content?options.content:`<p>  Nhp m OTP  c gi n s in thoi  </p> <p class="phone">0909656110</p>`);

            var str = '';
            for(var i=0;i<options.num;i++){
                str += `<input type="tel" class="field ${i+1}" maxlength="1">`;
            }
            modal.find('.wrapper-otp').html(str); 

            modal.find('[data-timer]').attr('data-timer',options.timer);
     
            if(options.code)setcode(options.code);
            sheetSwipeToClose.open();
             

            modal.find(".resendcode").trigger("click");
            modal.find('.wrapper-otp .field').eq(0).focus();

            sheetSwipeToClose.error = function(str){
                modal.find('.error').html(str); 
                modal.find('.wrapper-otp').css("pointer-events","auto"); 
            };

            sheetSwipeToClose.loading = {
                show: function(){
                    modal.find('.wrapper-otp').css("pointer-events","auto"); 
                },
                hide: function(){
                     modal.find('.wrapper-otp').css("pointer-events","none"); 
                }
            };

            return sheetSwipeToClose;
        };
    })();    
    win.pickerPasscode = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;

        var id_timer = null;

        function getcode(){
            var code =[];
             modal.find("form .field").each(function(v){
                if(this.value)
                code.push(this.value);
             });
             return code.join('');
        }
        function setcode(code){ 
            code = code+'';
            
            modal.find("form .field").each(function(i,v){
                this.value=code[i];
            });
        }
        function clearcode(){ 
         
            
            modal.find("form .field").each(function(v){
                this.value='';
            });
             
        }

        return function(options){
            options = $.extend({
                num:6,
                type:"number",
                onClick:function(data,ele){
                   // console.log(data);
                },
                onValidate:function(data,ele){
                    console.log(data);
                },
                onReset:function(next){
                     
                }
            },options,true);

            if(loaded==0){
                loaded=1;

                var tlp =`<style>
                .sheet-otp-picker form{}.sheet-otp-picker .otp-screen-title{text-align: center;color: #fff;}.sheet-otp-picker .otp-screen-title p{font-size: 16px;text-align: left;color: #a9a9a9;}.sheet-otp-picker .wrapper-otp {width: 100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-otp-picker .wrapper-otp input.field {width: 50px;line-height: 50px;font-size: 40px;font-family: 'Roboto-Black';text-align: center;text-transform: uppercase;color: #ff8a00 !important;margin: 30px 0;border-bottom: 4px solid #ff8a00;}.sheet-otp-picker .wrapper-otp input.field:focus {outline: none;}.sheet-otp-picker .time-sent-otp{display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-otp-picker .timer{-webkit-box-flex: 1;-ms-flex: 1;flex: 1;}.sheet-otp-picker button.resendcode{width: 120px;color: #ff8a00 ;font-size: 15px;}

                </style>
                <div class="sheet-modal sheet-otp-picker" data-close-on-escape="true" data-swipe-to-close="true" style="height: 45%;">
                        <div class="toolbar">
                        <div class="toolbar-inner">
                          <div class="left">--</div>
                          <div class="right">
                            <a class="link sheet-close">ng</a>
                          </div>
                        </div>
                      </div>
                        <div class="sheet-modal-inner">
                            <div class="swipe-handler"></div>
                            <div class="page-content">
                                 <form>
                                    <input type="hidden" name="code" class="code">
                                    <div class="otp-screen-title">
                                    </div>
                                <div class="wrapper-otp">
                                 
                                </div>
                                <div class="error"></div>
                                    <div class="time-sent-otp"> 
                                      <div class="timer">
                                        <span>Thi gian hiu lc: </span>
                                        <span class="timer timercounter" data-timer="150">0</span>
                                      </div>
                                      <button type="button" class="resendcode">Gi li OTP <i class="fa-solid fa-play"></i></button>
                                    </div>
                                </form>   
                            </div>
                        </div>
                    </div>`;
                $('body').append(tlp);
                modal = $('.sheet-otp-picker');

                sheetSwipeToClose = app.sheet.create({
                    el: '.sheet-otp-picker',
                    swipeToClose: true,
                    push: true,
                    customSearch:true,
                    backdrop: true,
                    closeByBackdropClick:false
                });
                modal.on('keyup',"form .field",function(){
                    modal.find('.error').html(""); 
                    
                    if(options.type=="number"&&isNaN(this.value)){
                        this.value="";
                        return;
                    }
                    var code = getcode();
                    if(code.length==modal.find("form .field").length){

                        options.onValidate(code);
                    }else{
                        if (event.key === 'Delete' || event.key === 'Backspace') {
                            $(this).prev().focus(); 
                        }else{
                            $(this).next().focus(); 
                        }
                        
                    } 
                });



                modal.find(".resendcode").on("click",function(){


                    options.onReset(function(status){
                        // postajax("userforgot.php?a=getOTP",params,function(res){
                        //     if(res.code){
                        //             params.session_id = res.session_id;
                        //             if(res.faker){
                        //               alert("OTP: "+res.faker);
                        //               // setcode(res.faker);
                        //               // modal.find("form").submit();
                        //             }else{
                        //               alert(res.message);
                        //             }

                        //             modal.find("form .field").eq(0).focus();
                        //         }else{
                        //             alert(res.error);
                        //         }
                        // });
                        
                        if(status){
                            if(id_timer){
                                clearInterval(id_timer);
                                sheetSwipeToClose.close();
                            }
                        }
                    });
                    if(id_timer){
                        clearInterval(id_timer);
                    }
                    var timer = modal.find(".timercounter").attr("data-timer")*1;
                    id_timer = setInterval(function(){
                        if(--timer>0){
                          modal.find(".timercounter").html(timer);
                        }else{
                           clearInterval(id_timer);
                           id_timer = null;
                        }
                    },1000);
                }); 
            }

            modal.find('.left').html(options.title?options.title:`Xc thc OTP`);
            modal.find('.otp-screen-title').html(options.content?options.content:`<p>  Nhp m OTP  c gi n s in thoi  </p> <p class="phone">0909656110</p>`);

            var str = '';
            for(var i=0;i<options.num;i++){
                str += `<input type="tel" class="field ${i+1}" maxlength="1">`;
            }
            modal.find('.wrapper-otp').html(str); 
     
            if(options.code)setcode(options.code)
            sheetSwipeToClose.open();
         

            modal.find(".resendcode").trigger("click");
            modal.find('.wrapper-otp .field').eq(0).focus(); 

            sheetSwipeToClose.error = function(str){
                modal.find('.error').html(str); 
                modal.find('.wrapper-otp').css("pointer-events","auto"); 
            };
            sheetSwipeToClose.loading = {
                show: function(){
                    modal.find('.wrapper-otp').css("pointer-events","auto"); 
                },
                hide: function(){
                     modal.find('.wrapper-otp').css("pointer-events","none"); 
                }
            };

            return sheetSwipeToClose;
        };
    })();   

    win.pickerPasscodeConfirm = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;
     

        function getcode(){
            var code =[];
             modal.find("form .field").each(function(v){
                if(this.value)
                code.push(this.value);
             });
             return code.join('');
        }
        function setcode(code){ 
            code = code+'';
            
            modal.find("form .field").each(function(i,v){
                this.value=code[i];
            });
        }
        function clearcode(){ 
         
            
            modal.find("form .field").each(function(v){
                this.value='';
            });
             
        }

        return function(options){
            options = $.extend({
                num:6,
                type:"number",
                onClick:function(data,ele){
                   // console.log(data);
                },
                onValidate:function(data,ele){
                    console.log(data);
                },
                onReset:function(next){
                     
                }
            },options,true);

            if(loaded==0){
                loaded=1;

                var tlp =`<style>
                .sheet-passcode-picker form{}.sheet-passcode-picker .otp-screen-title{text-align: center;color: #fff;}.sheet-passcode-picker .otp-screen-title p{font-size: 16px;text-align: left;color: #a9a9a9;}.sheet-passcode-picker .wrapper-otp {width: 100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-passcode-picker .wrapper-otp input.field {width: 50px;line-height: 50px;font-size: 40px;font-family: 'Roboto-Black';text-align: center;text-transform: uppercase;color: #ff8a00 !important;margin: 30px 0;border-bottom: 4px solid #ff8a00;}.sheet-passcode-picker .wrapper-otp input.field:focus {outline: none;}.sheet-passcode-picker .time-sent-otp{display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;-webkit-box-align: center;-ms-flex-align: center;align-items: center;}.sheet-passcode-picker .timer{-webkit-box-flex: 1;-ms-flex: 1;flex: 1;}.sheet-passcode-picker button.resendcode{width: 120px;color: #ff8a00 ;font-size: 15px;}

                </style>
                <div class="sheet-modal sheet-passcode-picker" data-close-on-escape="true" data-swipe-to-close="true" style="height: 45%;">
                        <div class="toolbar">
                        <div class="toolbar-inner">
                          <div class="left">--</div>
                          <div class="right">
                            <a class="link sheet-close">ng</a>
                          </div>
                        </div>
                      </div>
                        <div class="sheet-modal-inner">
                            <div class="swipe-handler"></div>
                            <div class="page-content">
                                 <form>
                                    <input type="hidden"  name="code" class="code">
                                    <div class="otp-screen-title">
                                    </div>
                                <div class="wrapper-otp">
                                 
                                </div> 
                                <div class="error"></div>
                                </form>   
                            </div>
                        </div>
                    </div>`;
                $('body').append(tlp);
                modal = $('.sheet-passcode-picker');

                sheetSwipeToClose = app.sheet.create({
                    el: '.sheet-passcode-picker',
                    swipeToClose: true,
                    push: true,
                    customSearch:true,
                    backdrop: true,
                    closeByBackdropClick:false
                });
                modal.on('keyup',"form .field",function(event){
                    var code = getcode();
                    modal.find('.error').html(""); 
                    if(options.type=="number"&&isNaN(this.value)){
                        this.value="";
                        return;
                    }
                    
                    if(code.length==modal.find("form .field").length){

                        options.onValidate(code);
                    }else{
                        if (event.key === 'Delete' || event.key === 'Backspace') {
                            $(this).prev().focus(); 
                        }else{
                            $(this).next().focus(); 
                        }
                        
                    } 
                });
                
            }

            modal.find('.left').html(options.title?options.title:`Nhp m OTP`);
            modal.find('.otp-screen-title').html(options.content?options.content:`<p>Vui lng nhp m OTP  tip tc</p>`);

            var str = '';
            for(var i=0;i<options.num;i++){
                str += `<input type="tel" class="field ${i+1}" maxlength="1">`;
            }
            modal.find('.wrapper-otp').html(str); 


     
            if(options.code)setcode(options.code)
            sheetSwipeToClose.open();

            modal.find('.wrapper-otp .field').eq(0).focus(); 

            sheetSwipeToClose.error = function(str){
                modal.find('.error').html(str); 
                modal.find('.wrapper-otp').css("pointer-events","auto"); 
            };
            sheetSwipeToClose.loading = {
                show: function(){
                    modal.find('.wrapper-otp').css("pointer-events","auto"); 
                },
                hide: function(){
                     modal.find('.wrapper-otp').css("pointer-events","none"); 
                }
            };

            return sheetSwipeToClose;
        };
    })();   

    win.pickerBox = (function(){

        var loaded = 0;
        var sheetSwipeToClose = null;
        var modal = null;
     
     
        return function(options){
            options = $.extend({
                title:'',
                content:'',
                height:'50%'
            },options,true);

            if(loaded==0){
                loaded=1;

                var tlp =` 
                <div class="sheet-modal sheet-pickerBox-picker" data-close-on-escape="true" data-swipe-to-close="true" style="height: 50%;">
                        <div class="toolbar">
                        <div class="toolbar-inner">
                          <div class="left">--</div>
                          <div class="right">
                            <a class="link sheet-close">ng</a>
                          </div>
                        </div>
                      </div>
                        <div class="sheet-modal-inner">
                            <div class="swipe-handler"></div>
                            <div class="page-content">
                                 
                            </div>
                        </div>
                    </div>`;
                $('body').append(tlp);
                modal = $('.sheet-pickerBox-picker');

                sheetSwipeToClose = app.sheet.create({
                    el: '.sheet-pickerBox-picker',
                    swipeToClose: true,
                    push: true,
                    customSearch:true,
                    backdrop: true,
                });
               
            }

            modal.find('.left').html(options.title);
            modal.find('.page-content').html(options.content);
            modal.css('height',options.height);
      
            sheetSwipeToClose.open(); 
            return sheetSwipeToClose;
        };
    })();   
    win.f7PickerContent = function (options){
        options = $.extend({autoopen:1,content:'',id:'d'+Date.now(),init:function(e){}},options,true);
        
        var tlp =`<div class="sheet-modal sheet-${options.id}-picker ${options.id}" data-close-on-escape="true" data-swipe-to-close="true">
                <div class="toolbar">
                <div class="toolbar-inner">
                  <div class="left">${options.title}</div>
                  <div class="right">
                    <a class="link sheet-close">ng</a>
                  </div>
                </div>
              </div>
                <div class="sheet-modal-inner">
                    <div class="swipe-handler"></div>
                    <div class="page-content">
                        
                    </div>
                </div>
        </div>`;
        $('body').append(tlp);


        var ele = $(`.sheet-${options.id}-picker`);
        var sheetSwipeToClose = app.sheet.create({
            el: '.sheet-'+options.id+'-picker',
            swipeToClose: true,
            push: true, 
            backdrop: true,
        });
        if(options.height) ele.css('height','50%');
        var methods = {
            sheet : ele,
            open : function(){
                 sheetSwipeToClose.open();
            },
            close : function(){
                 sheetSwipeToClose.close();
            },
            remove : function(){
                 ele.remove();
            }
        };
        if(typeof options.content=='function'){
            options.content(function(d){
                ele.find('.page-content').html(d.map(function(v){
                    return options.renderItem(v);
                }));
            });
        }else{
            ele.find('.page-content').html(options.content);
        } 
        if(options.autoopen){
            methods.open();
        }
        
        setTimeout(function(){
            options.init(methods);
        },500);
        return methods;

    };
    win.f7Picker =function (target,options){

        options = $.extend({data:[],id:'d'+Date.now(),title:'...',renderItem: function(v){
            if(typeof v=='object'){
                return `<li data-info='${JSON.stringify({id:v,name:v})}'><a class="item-link item-content">
                <div class="item-media"><i class="icon icon-f7"></i></div>
                <div class="item-inner">
                  <div class="item-title">${v.name}</div>
                </div>
              </a></li> `;
            }
            return `<li class="" data-info='${JSON.stringify({id:v,name:v})}'><a class="item-link item-content">
                <div class="item-media"><i class="icon icon-f7"></i></div>
                <div class="item-inner">
                  <div class="item-title">${v}</div>
                </div>
              </a></li>`;
        },onChange : function(v){

        }},options,true);

        if(target[0].nodeName=='SELECT'){
            options.data=[];
            target.find('option').each(function(i,v){
                options.data.push({id:this.value,name:$(this).text()});
            });

            var value = target.val();

            target.hide().wrap(`<div class="filter-selection btn-primary btn-small"></div>`);
            target = target.parent();
            target.append(`<span class=" filter-selection-val">${value}</span><i class="fa fa-arrow-down" aria-hidden="true"></i>`);
        }
     
        
        var tlp =`<div class="sheet-modal sheet-${options.id}-picker ${options.id}" data-close-on-escape="true" data-swipe-to-close="true">
                <div class="toolbar">
                <div class="toolbar-inner">
                  <div class="left">${options.title}</div>
                  <div class="right">
                    <a class="link sheet-close">ng</a>
                  </div>
                </div>
              </div>
                <div class="sheet-modal-inner">
                    <div class="swipe-handler"></div>
                    <div class="page-content">
                       <ul class="list list-outline-ios list-strong-ios list-dividers-ios"></ul>

                    </div>
                </div>
        </div>`;
        $('body').append(tlp);


        var ele = $(`.sheet-${options.id}-picker`);
        var sheetSwipeToClose = app.sheet.create({
            el: '.sheet-'+options.id+'-picker',
            swipeToClose: true,
            push: true, 
            backdrop: true,
        });
        var methods = {
            sheet : ele,
            open : function(){
                 sheetSwipeToClose.open();
            },
            close : function(){
                 sheetSwipeToClose.close();
            },
            remove : function(){
                if(target.find('select').length){

                   target.find('select').show().insertAfter(target.find('select').parent());
                   target.remove();
                }

                ele.remove();
            }
        };
        if(typeof options.data=='function'){
            options.data(function(d){
                ele.find('.page-content ul').html(d.map(function(v){
                    return options.renderItem(v);
                }));
            });
        }else{
            ele.find('.page-content ul').html(options.data.map(function(v){
                return options.renderItem(v);
            }));
        }
       

        ele.find('.page-content').on('click','ul li',function(e){
            options.onChange.call(this,$(this).data('info'),methods);
            methods.close();
        });
        target.data('sheet',methods).on('click',function(e){
            methods.open();
        });
      
        return methods;

    };
   win.f7PickerSearch = function (options){
        var id = options.id?options.id:'d'+Date.now();
        var placeholder=options.placeholder?options.placeholder:'Tm kim';
        var title = options.title?options.title:'...';

        var tlp =`<div class="sheet-modal sheet-${id}-picker ${id}" data-close-on-escape="true" data-swipe-to-close="true">
                <div class="toolbar">
                <div class="toolbar-inner">
                  <div class="left">${title}</div>
                  <div class="right">
                    <a class="link sheet-close">ng</a>
                  </div>
                </div>
              </div>
                <div class="sheet-modal-inner">
                    <div class="swipe-handler"></div>
                    <div class="page-content">
                     
                      <form class="searchbar searchbar${id}">
                        <div class="searchbar-inner">
                          <div class="searchbar-input-wrap">
                            <input type="search" placeholder="${placeholder}" />
                            <i class="searchbar-icon"></i>
                            <span class="input-clear-button"></span>
                          </div>
                          <span class="searchbar-disable-button">Hy</span>
                        </div>
                      </form>
                       <div class="searchbar-backdrop"></div>
                      <div class="list list-strong-ios list-outline-ios list-dividers-ios simple-list searchbar-not-found">
                  <ul>
                    <li>Nothing found</li>
                  </ul>
                </div>
                <div class="list list-strong-ios list-outline-ios list-dividers-ios searchbar-found">
                        <ul class="${id}-picker"></ul>
                      </div>

                    </div>
                </div>
            </div>`;
        $('body').append(tlp);
        
        var sheetSwipeToClose = app.sheet.create({
            el: '.sheet-'+id+'-picker',
            swipeToClose: true,
            push: true,
            customSearch:true,
            backdrop: true,
        });
        var sa = app.searchbar.create({
            el: '.searchbar'+id,
             searchContainer:'.'+id+'-picker',
             searchIn:'.'+id+'itemtitle'  ,    
             on:{
                search: delay(function(searchbar, query,previousQuery){
                    console.log(query);
                }, 500)
             }   
        });

        return {
            sheet: sheetSwipeToClose,
            input: sa
        };

    };
})(window);
// (function(win){
// 	win.googleTranslateElementInit= function () {
// 	  new google.translate.TranslateElement({
// 	    pageLanguage: language,
// 	    autoDisplay: false,
// 	    includedLanguages: 'ar,en,es,fr,nl,ja,vi,ru,,zh-CN,zh-TW,pt,it,de',
// 	    layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL },'google_translate_element');

// 	  delete win.googleTranslateElementInit;
// 	}
// 	win.showLanguage = function(){
// 		//get language
// 		var s =[];

// 		var select = $("#google_translate_element select.goog-te-combo");
// 		select.find("option").each(function(v){
// 			if(this.value){
// 				s.push(`<li class="${language==this.value?"selected":""}" data-id="${this.value}">${$(this).text()}</li>`);
// 			}
// 		});

// 		$("#google_translate_element").addClass("active");

// 		// var sheet = win.openSheet({
// 		// 	data:`
// 		// 	<h2>Chn ngn ng</h2>
// 		// 	<ul translate="no">
// 		// 		${s.join("")}
// 		// 	</ul>
// 		// 	<button id="closeButton">close</button>`,
// 		// 	beforeOpen: function(sheetId) {
// 		// 	   var me = this;
// 		// 	  document.querySelector("#closeButton").onclick = function(){
// 		// 	    me.close(sheetId);
// 		// 	  };

// 		// 	  $("#"+sheetId).find("li").on("click",function(){
// 		// 	  	var lang = $(this).text().trim().toLowerCase();
// 		// 	  	language = $(this).data("id");
			  	 
// 		// 	  	win.localStorage.setItem("googtrans",language);

// 		// 	  	 $('iframe.skiptranslate').eq(1).contents().find('table a').each(function () {
// 		// 			    var a = $(this).find(".text").text().trim().toLowerCase();
// 		// 			    console.log(a=="vietnamese");
// 		// 			    if(a==lang){
// 		// 			    	this.click();
// 		// 			    	return false;
// 		// 			    }
// 		// 			});
// 		// 	  });
// 		// 	}
// 		// });
// 	};
// 	var language ="";
// 	$(document).ready(function(){


// 		language = win.localStorage.getItem("googtrans");
// 		language = language||$("html").attr("language")||"en";

// 		$("body").addClass("hastranslate").append('<div id="google_translate_element"></div>');
// 		$("body").append(`<style>
// 			body.hastranslate{top:0!important}body.hastranslate>.skiptranslate{opacity:0}
// 			.skiptranslate.goog-te-gadget{
// 			    position: absolute;
     
//     top: 0;
//      z-index: 10;

//     width: 80%;
//     height: 80%;
//     margin: 20% 10%;
//     background-color: #fff;
//     padding: 8px;
//     border-radius: 8px;}
    
//     .btncloselng{
//     	position: absolute;
//     bottom: 18px;
//     width: 100%;
//     }
//     .selectlang{
//     	    display: block !important;
//     margin-top: 24px;
//     }

//     #google_translate_element:before{
//     	    content: " ";
//     background-color: #33333396;
//     position: absolute;
//     z-index: 1;
//     width: 100%;
//     height: 100%;
//     top: 0;
//     left: 0;
//     }
//     .goog-te-gadget .goog-te-combo{
//     	    width: 100%;
//     border: 1px solid #f3f3f3;
//     padding: 8px;
//     border-radius: 8px;
//     }

//     #google_translate_element{
//     	position: fixed;
//     height: 100%;
//     width: 100%;
//     opacity:0;
//     	visibility:hidden;
//     	z-index:-1;
//     top: 0;
//     left: 0;
//     }

//     #google_translate_element.active{
//     	opacity:1;
//     	visibility:visible;
//     	z-index:1000000000000000;
//     }

//     </style>`);
// 		loadJS('https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit&languages=en,es',function(){

// 			var $translateBar = $('#translate-a'),
// 			  $translateToggle = $('.translate-toggle'),
// 			  $picker = $translateBar.find('select'),
// 			  visibleClass = "visible",
// 			  hideOnChange = true; // hide bar after choice

// 			  $translateToggle.on('click', function (e) {
// 			    e.preventDefault();
// 			    $translateBar.toggleClass(visibleClass);
// 			  });

// 			  if (hideOnChange) {
// 			    $translateBar.on('change', 'select', function () {
// 			      if ($translateBar.hasClass(visibleClass)) {
// 			        $translateBar.removeClass(visibleClass);
// 			      }
// 			    });
// 			  }

// 			setTimeout(function(){
// 				$(".goog-te-gadget>div").addClass("selectlang");
// 				  var btnclose = $(`<div><button class="btn btncloselng" type="button">ng</button></div>`);
// 				  $(".goog-te-gadget").append(btnclose);
// 				  $(".goog-te-gadget").prepend(`<p>Chn ngn ng:</p>`);

// 				btnclose.on("click",function(){
// 					$("#google_translate_element").removeClass("active");
// 				});

// 			},3000);

			 
			  
// 		});

// 	});
// })(window);
(function(win){
	setTimeout(function(){

		if(!win.GPS){
			win.GPS = function(f){
				if(win.top==win.self){
			      var data = {
			         native:"gps",
			         request:{}
			      };
			      win.native.call(data,function(res){
			         f(res);
			      });
			      return;
			   }

				navigator.geolocation.getCurrentPosition(function(loc){
				  win.GPS.cache = {lat:loc.coords.latitude, lng:loc.coords.longitude};
				  f(win.GPS.cache);
				});
			};
		}

	    
		  if(win.ALocation){
		    var loc = location.loc.split(",");
		    win.GPS.cache={lat: loc[0]*1, lng: loc[1]*1};
		  } 


		  
		  win.GPS.openMap = function(lat,lng,lat1,lng1){
		  	var ahref = document.createElement('a');
		  ahref.target="_blank";
		  ahref.style.disply="none";
		      if(typeof lat=="object"){
		      	 lng = lat.A.lng;
		      	 lat1 = lat.B.lat;
		      	 lng1 = lat.B.lng;
		         lat = lat.A.lat;
		      }
			  ahref.href = "https://www.google.com/maps/dir/?api=1&origin="+lat+","+lng+"&destination="+lat1+","+lng1+"";
			 
			  ahref.onclick = function(){
			  	document.body.removeChild(this);
			  };

			  document.body.appendChild(ahref);
			  ahref.click();
		  };
		   win.GPS.direction = function(A,B){
		      win.GPS.openMap(A.lat,A.lng,B.lat,B.lng);
		  };

		  win.GPS.openMapNow = function(lat1,lng1){
		    win.GPS(function(data){
				win.GPS.openMap(data.lat,data.lng,lat1,lng1);
			});
		  };


		  win.GPS.distance = function(lat1, lon1, lat2, lon2, unit) {

		    if ((lat1 == lat2) && (lon1 == lon2)) {
		        return 0;
		    }
		    else {
		        var radlat1 = Math.PI * lat1/180;
		        var radlat2 = Math.PI * lat2/180;
		        var theta = lon1-lon2;
		        var radtheta = Math.PI * theta/180;
		        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
		        if (dist > 1) {
		            dist = 1;
		        }
		        dist = Math.acos(dist);
		        dist = dist * 180/Math.PI;
		        dist = dist * 60 * 1.1515;
		        if (unit=="K") { dist = dist * 1.609344 }
		        if (unit=="N") { dist = dist * 0.8684 }
		        return dist;
		    }
		 };

		 win.GPS.distanceNow = function(options) {
		    
		    win.GPS(function(data){
				options.callback(data.lat,data.lng,options.lat,options.lng,options.unit)
			}); 
		 };



		  

	},3000);


	
})(window);
Handlebars.registerHelper('slug', function (title) {
      return title.toString().make_slug();
  });
  Handlebars.registerHelper('tel', function (phone) {
      return new Handlebars.SafeString('<a href="tel:'+phone+'">'+phone+'</a>');
  });
  // {{time_left created_date}}
  Handlebars.registerHelper('time_left', function (s) {
      return s?window.time_left(s).rendershort():"";
  });

  Handlebars.registerHelper('view', function (info) {
    var data = info.data.root;
    // return new Handlebars.SafeString('<span class="badge">'+data.view+ '</span>');
    return new Handlebars.SafeString('<span class="badge">'+data.view+ ' <i style="font-size: 11px;" class="fal fa-eye"></i></span>');
  });
  Handlebars.registerHelper('rate', function (info) {
    var data = info.data.root;
    var rate = 70;
    return new Handlebars.SafeString('<div class="star-rating" title="'+rate+'%"> <div class="back-stars"> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <div class="front-stars" style="width: '+rate+'%"> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> </div> </div> </div>');
  });
  //{{number money}}
  Handlebars.registerHelper('number', function (s) {
      var sign = s<0?"-":"";
      return sign+(s?show_money_none(parse_money(s)):0);
  });
  //{{km}}
  Handlebars.registerHelper('km', function (info) {
    var res = info.data.root;
    if(res.lat&&res.lng&&GPS&&GPS.cache){
     var s = calDistance(res.lat,res.lng,GPS.cache.lat,GPS.cache.lng);
      return s!="0.00"?s+"km":"";
    } 
      return "";
  });
  

  //{{address}}
  Handlebars.registerHelper('address', function (info) {
     var data = info.data.root;
     if(!data.province){
       return data.address;
     }
      var s =[];
     if(data.steet)s.push(data.steet);
     if(data.ward)s.push(data.ward);
     if(data.district)s.push(data.district);
     if(data.province)s.push(data.province);
     return s.join(', ');
  });

  //{{mapaddress}}
  Handlebars.registerHelper('mapaddress', function (info) {
     var data = info.data.root;
     var s =[];
     if(data.steet)s.push(data.steet);
     if(data.ward)s.push(data.ward);
     if(data.district)s.push(data.district);
     if(data.province)s.push(data.province);
     s= s.join(', ');
     return new Handlebars.SafeString('<a href="https://www.google.com/maps/dir/'+GPS.cache.lat+','+GPS.cache.lng+'/@'+data.lat+','+data.lng+',12z?open=true">'+s+'</a>');
  });
  //{{mapaddressaction}}
  Handlebars.registerHelper('mapaddressaction', function (info) {
     var data = info.data.root;
     var s =[];
     if(data.steet)s.push(data.steet);
     if(data.ward)s.push(data.ward);
     if(data.district)s.push(data.district);
     if(data.province)s.push(data.province);
     s= s.join(', ');
     return new Handlebars.SafeString('<a href="https://www.google.com/maps/dir/'+GPS.cache.lat+','+GPS.cache.lng+'/@'+data.lat+','+data.lng+',12z?open=true">Xem map</a>');
  });
  //{{time created_date}}
  //{{time created_date "timer"}}
  //{{time created_date "date"}}
  Handlebars.registerHelper('time', function (date,action) {
    if(!date)return date;
    // console.log(date,action);  
     
     switch(action){
        case "format":
          date= new Handlebars.SafeString(date.split(" ").join("<br/>"));
       break;
       case "date":
          date= date.split(" ")[0];
       break;
       case "timeago":
          date= $.timeago(date);
       break;
       case "timer":

          date= time_left(isNaN(date)?(new Date(date)).getTime():date*1000).rendershort();
       break;
     }
     return date;
  }); 

//{{block created_date "Barcode"}}
//{{block created_date "Barcode"}}
Handlebars.registerHelper('block', function (data,action) { 

   data = data||"--";
 
  return new Handlebars.SafeString(`<div class="lr">
          <div>${action}</div> 
          <div><span class="barcode">${data}</span><i data-copy="${data}" class="fa fa-share-square-o" aria-hidden="true"></i></div>
        </div>`);
});


  Handlebars.registerHelper('parser_html', function (s) {
     s = s.replace(/\n/ig,"<br/>");
     s = urls_parser(s,function(url) {
                        //embed youtube
          if(url.match(/\/embed\//ig)){
            return url;
          }else if(url.indexOf("youtube.")!=-1){
             return window.Youtube.Embed(url);
          }
      });
     return  new Handlebars.SafeString(s);
  });


Handlebars.registerHelper('image', function (s) {
  
  if(typeof s =='object'){
    s = s.data.root[s.name];
  }
     return s||"https://via.placeholder.com/1900x680/FEFEFE/333333/?text="+document.title;
});

/**
<select>
    {{html_select status '[{"value":"...","option":"..."}]'}}
</select>
 */
   Handlebars.registerHelper('html_select', function (data,name,json) {
    var sm=[];

    try{

      json = JSON.parse(json);

      sm = json.map(function(v){
        return `<option value="${v.value}" ${v.value==data?"selected":""}>${v.value}</option>`;
      });

       
    }catch(e){}
     
    var s=  u.avatar?u.avatar:"https://cdn-icons-png.flaticon.com/128/3899/3899618.png";
   
    return sm.join("");
  });
/**
<select>
    {{#select status}}
    <option>Option 1</option>
    <option>Option 2</option>
    <option value="Option 3">Option 3 (extra info)</option>
    <option value="Option 4">Option 4 (more extra)</option>
    {{/select}}
</select>
 */
  Handlebars.registerHelper('select', function(value, options) {
    // Create a select element 
    var select = document.createElement('select');

    // Populate it with the option HTML
    select.innerHTML = options.fn(this);

    // Set the value
    select.value = value;

    // Find the selected node, if it exists, add the selected attribute to it
    if (select.children[select.selectedIndex])
        select.children[select.selectedIndex].setAttribute('selected', 'selected');

    return select.innerHTML;
});

 Handlebars.registerHelper('display_name', function (info) {
    var u = info.data.root;
     

    var s=  u.fullname_user?u.fullname_user:(u.username_user?u.username_user:(u.email_user?u.email_user:(u.phone_user?u.phone_user:null)));
    if(!s){
      s = u.fullname?u.fullname:(u.username?u.username:(u.email?u.email:(u.phone?u.phone:null)));
    }

    return s;
  });

  Handlebars.registerHelper('price', function (s) {
      if(typeof s =='object'){
        s = s.data.root[s.name];
      }
      var sign = s<0?"-":"";
      return sign+(s?show_money_none(parse_money(s)):0);
  });


  Handlebars.registerHelper('undefined', function (s) {
      return s||"--";
  });
  Handlebars.registerHelper('null', function (s) {
      return s||"--";
  });
  Handlebars.registerHelper('empty', function (s) {
      return s||"--";
  });
  Handlebars.registerHelper('number', function (s) {
      var sign = s<0?"-":"";
      return sign+(s?show_money_none(parse_money(s)):0);
  });
  //{{status_text}}
  Handlebars.registerHelper('status_text', function (info) {
    var res = info.data.root;
    var str="";
    switch(res.status){
       case "complete":
          str='<span class="text-success">Hon thnh</span>';
       break;
       case "shipping":
          str='<span class="text-warning">ang giao</span>';
       break;
       case "cancel":
          str='<span class="text-danger">Hu b</span>';
       break;
       default:
          str='<span class="text-primary">ang x l</span>';
       break;
    }
    return new Handlebars.SafeString(str);
  });  


  
var __Html5QrcodeLibrary__;(()=>{var t={449:function(t,e,r){!function(t){"use strict";function e(t){return null==t}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};var i,o=function(t){function e(e){var r,n,i,o=this.constructor,s=t.call(this,e)||this;return Object.defineProperty(s,"name",{value:o.name,enumerable:!1}),r=s,n=o.prototype,(i=Object.setPrototypeOf)?i(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(s),s}return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);class s extends o{constructor(t=undefined){super(t),this.message=t}getKind(){return this.constructor.kind}}s.kind="Exception";class a extends s{}a.kind="ArgumentException";class c extends s{}c.kind="IllegalArgumentException";class l{constructor(t){if(this.binarizer=t,null===t)throw new c("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,r,n){const i=this.binarizer.getLuminanceSource().crop(t,e,r,n);return new l(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new l(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new l(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class h extends s{static getChecksumInstance(){return new h}}h.kind="ChecksumException";class u{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class d{static arraycopy(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}static currentTimeMillis(){return Date.now()}}class f extends s{}f.kind="IndexOutOfBoundsException";class g extends f{constructor(t=undefined,e=undefined){super(e),this.index=t,this.message=e}}g.kind="ArrayIndexOutOfBoundsException";class w{static fill(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e}static fillWithin(t,e,r,n){w.rangeCheck(t.length,e,r);for(let i=e;i<r;i++)t[i]=n}static rangeCheck(t,e,r){if(e>r)throw new c("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new g(e);if(r>t)throw new g(r)}static asList(...t){return t}static create(t,e,r){return Array.from({length:t}).map((t=>Array.from({length:e}).fill(r)))}static createInt32Array(t,e,r){return Array.from({length:t}).map((t=>Int32Array.from({length:e}).fill(r)))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const r of t)e=31*e+r;return e}static fillUint8Array(t,e){for(let r=0;r!==t.length;r++)t[r]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)}static copyOfRange(t,e,r){const n=r-e,i=new Int32Array(n);return d.arraycopy(t,e,i,0,n),i}static binarySearch(t,e,r){void 0===r&&(r=w.numberComparator);let n=0,i=t.length-1;for(;n<=i;){const o=i+n>>1,s=r(e,t[o]);if(s>0)n=o+1;else{if(!(s<0))return o;i=o-1}}return-n-1}static numberComparator(t,e){return t-e}}class m{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let r=31;return e=t<<16,0!==e&&(r-=16,t=e),e=t<<8,0!==e&&(r-=8,t=e),e=t<<4,0!==e&&(r-=4,t=e),e=t<<2,0!==e&&(r-=2,t=e),r-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e=undefined){return parseInt(t,e)}}m.MIN_VALUE_32_BITS=-2147483648,m.MAX_VALUE=Number.MAX_SAFE_INTEGER;class p{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==e?p.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=p.makeArray(t);d.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),i=r[n];i&=~((1<<(31&t))-1);const o=r.length;for(;0===i;){if(++n===o)return e;i=r[n]}const s=32*n+m.numberOfTrailingZeros(i);return s>e?e:s}getNextUnset(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),i=~r[n];i&=~((1<<(31&t))-1);const o=r.length;for(;0===i;){if(++n===o)return e;i=~r[n]}const s=32*n+m.numberOfTrailingZeros(i);return s>e?e:s}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new c;if(e===t)return;e--;const r=Math.floor(t/32),n=Math.floor(e/32),i=this.bits;for(let o=r;o<=n;o++){const s=(2<<(o<n?31:31&e))-(1<<(o>r?0:31&t));i[o]|=s}}clear(){const t=this.bits.length,e=this.bits;for(let r=0;r<t;r++)e[r]=0}isRange(t,e,r){if(e<t||t<0||e>this.size)throw new c;if(e===t)return!0;e--;const n=Math.floor(t/32),i=Math.floor(e/32),o=this.bits;for(let s=n;s<=i;s++){const a=(2<<(s<i?31:31&e))-(1<<(s>n?0:31&t))&4294967295;if((o[s]&a)!==(r?a:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new c("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let r=e;r>0;r--)this.appendBit(1==(t>>r-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let r=0;r<e;r++)this.appendBit(t.get(r))}xor(t){if(this.size!==t.size)throw new c("Sizes don't match");const e=this.bits;for(let r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]}toBytes(t,e,r,n){for(let i=0;i<n;i++){let n=0;for(let e=0;e<8;e++)this.get(t)&&(n|=1<<7-e),t++;e[r+i]=n}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits;for(let i=0;i<r;i++){let r=n[i];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,t[e-i]=r}if(this.size!==32*r){const e=32*r-this.size;let n=t[0]>>>e;for(let i=1;i<r;i++){const r=t[i];n|=r<<32-e,t[i-1]=n,n=r>>>e}t[r-1]=n}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof p))return!1;const e=t;return this.size===e.size&&w.equals(this.bits,e.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let t="";for(let e=0,r=this.size;e<r;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new p(this.size,this.bits.slice())}}!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(i||(i={}));var A,C=i;class E extends s{static getFormatInstance(){return new E}}E.kind="FormatException",function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(A||(A={}));class I{constructor(t,e,r,...n){this.valueIdentifier=t,this.name=r,this.values="number"==typeof e?Int32Array.from([e]):e,this.otherEncodingNames=n,I.VALUE_IDENTIFIER_TO_ECI.set(t,this),I.NAME_TO_ECI.set(r,this);const i=this.values;for(let t=0,e=i.length;t!==e;t++){const e=i[t];I.VALUES_TO_ECI.set(e,this)}for(const t of n)I.NAME_TO_ECI.set(t,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new E("incorect value");const e=I.VALUES_TO_ECI.get(t);if(void 0===e)throw new E("incorect value");return e}static getCharacterSetECIByName(t){const e=I.NAME_TO_ECI.get(t);if(void 0===e)throw new E("incorect value");return e}equals(t){if(!(t instanceof I))return!1;const e=t;return this.getName()===e.getName()}}I.VALUE_IDENTIFIER_TO_ECI=new Map,I.VALUES_TO_ECI=new Map,I.NAME_TO_ECI=new Map,I.Cp437=new I(A.Cp437,Int32Array.from([0,2]),"Cp437"),I.ISO8859_1=new I(A.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),I.ISO8859_2=new I(A.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),I.ISO8859_3=new I(A.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),I.ISO8859_4=new I(A.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),I.ISO8859_5=new I(A.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),I.ISO8859_6=new I(A.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),I.ISO8859_7=new I(A.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),I.ISO8859_8=new I(A.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),I.ISO8859_9=new I(A.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),I.ISO8859_10=new I(A.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),I.ISO8859_11=new I(A.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),I.ISO8859_13=new I(A.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),I.ISO8859_14=new I(A.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),I.ISO8859_15=new I(A.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),I.ISO8859_16=new I(A.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),I.SJIS=new I(A.SJIS,20,"SJIS","Shift_JIS"),I.Cp1250=new I(A.Cp1250,21,"Cp1250","windows-1250"),I.Cp1251=new I(A.Cp1251,22,"Cp1251","windows-1251"),I.Cp1252=new I(A.Cp1252,23,"Cp1252","windows-1252"),I.Cp1256=new I(A.Cp1256,24,"Cp1256","windows-1256"),I.UnicodeBigUnmarked=new I(A.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),I.UTF8=new I(A.UTF8,26,"UTF8","UTF-8"),I.ASCII=new I(A.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),I.Big5=new I(A.Big5,28,"Big5"),I.GB18030=new I(A.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),I.EUC_KR=new I(A.EUC_KR,30,"EUC_KR","EUC-KR");class S extends s{}S.kind="UnsupportedOperationException";class _{static decode(t,e){const r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)}static shouldDecodeOnFallback(t){return!_.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"==typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof I?t:I.getCharacterSetECIByName(t)}static decodeFallback(t,e){const r=this.encodingCharacterSet(e);if(_.isDecodeFallbackSupported(r)){let e="";for(let r=0,n=t.length;r<n;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+="%"+n}return decodeURIComponent(e)}if(r.equals(I.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new S(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(I.UTF8)||t.equals(I.ISO8859_1)||t.equals(I.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))).split(""),r=[];for(let t=0;t<e.length;t++)r.push(e[t].charCodeAt(0));return new Uint8Array(r)}}class T{static castAsNonUtf8Char(t,e=null){const r=e?e.getName():this.ISO88591;return _.decode(new Uint8Array([t]),r)}static guessEncoding(t,e){if(null!=e&&void 0!==e.get(C.CHARACTER_SET))return e.get(C.CHARACTER_SET).toString();const r=t.length;let n=!0,i=!0,o=!0,s=0,a=0,c=0,l=0,h=0,u=0,d=0,f=0,g=0,w=0,m=0;const p=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let e=0;e<r&&(n||i||o);e++){const r=255&t[e];o&&(s>0?0==(128&r)?o=!1:s--:0!=(128&r)&&(0==(64&r)?o=!1:(s++,0==(32&r)?a++:(s++,0==(16&r)?c++:(s++,0==(8&r)?l++:o=!1))))),n&&(r>127&&r<160?n=!1:r>159&&(r<192||215===r||247===r)&&m++),i&&(h>0?r<64||127===r||r>252?i=!1:h--:128===r||160===r||r>239?i=!1:r>160&&r<224?(u++,f=0,d++,d>g&&(g=d)):r>127?(h++,d=0,f++,f>w&&(w=f)):(d=0,f=0))}return o&&s>0&&(o=!1),i&&h>0&&(i=!1),o&&(p||a+c+l>0)?T.UTF8:i&&(T.ASSUME_SHIFT_JIS||g>=3||w>=3)?T.SHIFT_JIS:n&&i?2===g&&2===u||10*m>=r?T.SHIFT_JIS:T.ISO88591:n?T.ISO88591:i?T.SHIFT_JIS:o?T.UTF8:T.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(t,n,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++r])return;t=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=e[r];break;case"c":c=e[r][0];break;case"f":c=parseFloat(e[r]).toFixed(t);break;case"p":c=parseFloat(e[r]).toPrecision(t);break;case"e":c=parseFloat(e[r]).toExponential(t);break;case"x":c=parseInt(e[r]).toString(l||16);break;case"d":c=parseFloat(parseInt(e[r],l||10).toPrecision(t)).toFixed(0)}c="object"==typeof c?JSON.stringify(c):(+c).toString(l);let h=parseInt(i),u=i&&i[0]+""=="0"?"0":" ";for(;c.length<h;)c=void 0!==n?c+u:u+c;return c}))}static getBytes(t,e){return _.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}T.SHIFT_JIS=I.SJIS.getName(),T.GB2312="GB2312",T.ISO88591=I.ISO8859_1.getName(),T.EUC_JP="EUC_JP",T.UTF8=I.UTF8.getName(),T.PLATFORM_DEFAULT_ENCODING=T.UTF8,T.ASSUME_SHIFT_JIS=!1;class y{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return"string"==typeof t?this.value+=t.toString():this.encoding?this.value+=T.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,e,r){for(let n=e;e<e+r;n++)this.append(t[n]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class N{constructor(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new c("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,r=t[0].length,n=new N(r,e);for(let i=0;i<e;i++){const e=t[i];for(let t=0;t<r;t++)e[t]&&n.set(t,i)}return n}static parseFromString(t,e,r){if(null===t)throw new c("stringRepresentation cannot be null");const n=new Array(t.length);let i=0,o=0,s=-1,a=0,l=0;for(;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new c("row lengths do not match");o=i,a++}l++}else if(t.substring(l,l+e.length)===e)l+=e.length,n[i]=!0,i++;else{if(t.substring(l,l+r.length)!==r)throw new c("illegal character encountered: "+t.substring(l));l+=r.length,n[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new c("row lengths do not match");a++}const h=new N(s,a);for(let t=0;t<i;t++)n[t]&&h.set(Math.floor(t%s),Math.floor(t/s));return h}get(t,e){const r=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)}set(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295}unset(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)}flip(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new c("input matrix dimensions do not match");const e=new p(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*r,s=t.getRow(i,e).getBitArray();for(let t=0;t<r;t++)n[o+t]^=s[t]}}clear(){const t=this.bits,e=t.length;for(let r=0;r<e;r++)t[r]=0}setRegion(t,e,r,n){if(e<0||t<0)throw new c("Left and top must be nonnegative");if(n<1||r<1)throw new c("Height and width must be at least 1");const i=t+r,o=e+n;if(o>this.height||i>this.width)throw new c("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let r=e;r<o;r++){const e=r*s;for(let r=t;r<i;r++)a[e+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(t,e){null==e||e.getSize()<this.width?e=new p(this.width):e.clear();const r=this.rowSize,n=this.bits,i=t*r;for(let t=0;t<r;t++)e.setBulk(32*t,n[i+t]);return e}setRow(t,e){d.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let r=new p(t),n=new p(t);for(let t=0,i=Math.floor((e+1)/2);t<i;t++)r=this.getRow(t,r),n=this.getRow(e-1-t,n),r.reverse(),n.reverse(),this.setRow(t,n),this.setRow(e-1-t,r)}getEnclosingRectangle(){const t=this.width,e=this.height,r=this.rowSize,n=this.bits;let i=t,o=e,s=-1,a=-1;for(let t=0;t<e;t++)for(let e=0;e<r;e++){const c=n[t*r+e];if(0!==c){if(t<o&&(o=t),t>a&&(a=t),32*e<i){let t=0;for(;0==(c<<31-t&4294967295);)t++;32*e+t<i&&(i=32*e+t)}if(32*e+31>s){let t=31;for(;c>>>t==0;)t--;32*e+t>s&&(s=32*e+t)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let r=0;for(;r<e.length&&0===e[r];)r++;if(r===e.length)return null;const n=r/t;let i=r%t*32;const o=e[r];let s=0;for(;0==(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,n])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let r=e.length-1;for(;r>=0&&0===e[r];)r--;if(r<0)return null;const n=Math.floor(r/t);let i=32*Math.floor(r%t);const o=e[r];let s=31;for(;o>>>s==0;)s--;return i+=s,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof N))return!1;const e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&w.equals(this.bits,e.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+w.hashCode(this.bits),t}toString(t="X ",e="  ",r="\n"){return this.buildToString(t,e,r)}buildToString(t,e,r){let n=new y;for(let i=0,o=this.height;i<o;i++){for(let r=0,o=this.width;r<o;r++)n.append(this.get(r,i)?t:e);n.append(r)}return n.toString()}clone(){return new N(this.width,this.height,this.rowSize,this.bits.slice())}}class D extends s{static getNotFoundInstance(){return new D}}D.kind="NotFoundException";class M extends u{constructor(t){super(t),this.luminances=M.EMPTY,this.buckets=new Int32Array(M.LUMINANCE_BUCKETS)}getBlackRow(t,e){const r=this.getLuminanceSource(),n=r.getWidth();null==e||e.getSize()<n?e=new p(n):e.clear(),this.initArrays(n);const i=r.getRow(t,this.luminances),o=this.buckets;for(let t=0;t<n;t++)o[(255&i[t])>>M.LUMINANCE_SHIFT]++;const s=M.estimateBlackPoint(o);if(n<3)for(let t=0;t<n;t++)(255&i[t])<s&&e.set(t);else{let t=255&i[0],r=255&i[1];for(let o=1;o<n-1;o++){const n=255&i[o+1];(4*r-t-n)/2<s&&e.set(o),t=r,r=n}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight(),n=new N(e,r);this.initArrays(e);const i=this.buckets;for(let n=1;n<5;n++){const o=Math.floor(r*n/5),s=t.getRow(o,this.luminances),a=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<a;t++)i[(255&s[t])>>M.LUMINANCE_SHIFT]++}const o=M.estimateBlackPoint(i),s=t.getMatrix();for(let t=0;t<r;t++){const r=t*e;for(let i=0;i<e;i++)(255&s[r+i])<o&&n.set(i,t)}return n}createBinarizer(t){return new M(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let t=0;t<M.LUMINANCE_BUCKETS;t++)e[t]=0}static estimateBlackPoint(t){const e=t.length;let r=0,n=0,i=0;for(let o=0;o<e;o++)t[o]>i&&(n=o,i=t[o]),t[o]>r&&(r=t[o]);let o=0,s=0;for(let r=0;r<e;r++){const e=r-n,i=t[r]*e*e;i>s&&(o=r,s=i)}if(n>o){const t=n;n=o,o=t}if(o-n<=e/16)throw new D;let a=o-1,c=-1;for(let e=o-1;e>n;e--){const i=e-n,s=i*i*(o-e)*(r-t[e]);s>c&&(a=e,c=s)}return a<<M.LUMINANCE_SHIFT}}M.LUMINANCE_BITS=5,M.LUMINANCE_SHIFT=8-M.LUMINANCE_BITS,M.LUMINANCE_BUCKETS=1<<M.LUMINANCE_BITS,M.EMPTY=Uint8ClampedArray.from([0]);class R extends M{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight();if(e>=R.MINIMUM_DIMENSION&&r>=R.MINIMUM_DIMENSION){const n=t.getMatrix();let i=e>>R.BLOCK_SIZE_POWER;0!=(e&R.BLOCK_SIZE_MASK)&&i++;let o=r>>R.BLOCK_SIZE_POWER;0!=(r&R.BLOCK_SIZE_MASK)&&o++;const s=R.calculateBlackPoints(n,i,o,e,r),a=new N(e,r);R.calculateThresholdForBlock(n,i,o,e,r,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new R(t)}static calculateThresholdForBlock(t,e,r,n,i,o,s){const a=i-R.BLOCK_SIZE,c=n-R.BLOCK_SIZE;for(let i=0;i<r;i++){let l=i<<R.BLOCK_SIZE_POWER;l>a&&(l=a);const h=R.cap(i,2,r-3);for(let r=0;r<e;r++){let i=r<<R.BLOCK_SIZE_POWER;i>c&&(i=c);const a=R.cap(r,2,e-3);let u=0;for(let t=-2;t<=2;t++){const e=o[h+t];u+=e[a-2]+e[a-1]+e[a]+e[a+1]+e[a+2]}const d=u/25;R.thresholdBlock(t,i,l,d,n,s)}}}static cap(t,e,r){return t<e?e:t>r?r:t}static thresholdBlock(t,e,r,n,i,o){for(let s=0,a=r*i+e;s<R.BLOCK_SIZE;s++,a+=i)for(let i=0;i<R.BLOCK_SIZE;i++)(255&t[a+i])<=n&&o.set(e+i,r+s)}static calculateBlackPoints(t,e,r,n,i){const o=i-R.BLOCK_SIZE,s=n-R.BLOCK_SIZE,a=new Array(r);for(let i=0;i<r;i++){a[i]=new Int32Array(e);let r=i<<R.BLOCK_SIZE_POWER;r>o&&(r=o);for(let o=0;o<e;o++){let e=o<<R.BLOCK_SIZE_POWER;e>s&&(e=s);let c=0,l=255,h=0;for(let i=0,o=r*n+e;i<R.BLOCK_SIZE;i++,o+=n){for(let e=0;e<R.BLOCK_SIZE;e++){const r=255&t[o+e];c+=r,r<l&&(l=r),r>h&&(h=r)}if(h-l>R.MIN_DYNAMIC_RANGE)for(i++,o+=n;i<R.BLOCK_SIZE;i++,o+=n)for(let e=0;e<R.BLOCK_SIZE;e++)c+=255&t[o+e]}let u=c>>2*R.BLOCK_SIZE_POWER;if(h-l<=R.MIN_DYNAMIC_RANGE&&(u=l/2,i>0&&o>0)){const t=(a[i-1][o]+2*a[i][o-1]+a[i-1][o-1])/4;l<t&&(u=t)}a[i][o]=u}}return a}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class O{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,r,n){throw new S("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new S("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new S("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new y;for(let r=0;r<this.height;r++){const n=this.getRow(r,t);for(let t=0;t<this.width;t++){const r=255&n[t];let i;i=r<64?"#":r<128?"+":r<192?".":" ",e.append(i)}e.append("\n")}return e.toString()}}class b extends O{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const r=this.delegate.getRow(t,e),n=this.getWidth();for(let t=0;t<n;t++)r[t]=255-(255&r[t]);return r}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e);for(let n=0;n<e;n++)r[n]=255-(255&t[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,r,n){return new b(this.delegate.crop(t,e,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new b(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new b(this.delegate.rotateCounterClockwise45())}}class B extends O{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=B.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return B.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){const n=new Uint8ClampedArray(e*r);for(let e=0,r=0,i=t.length;e<i;e+=4,r++){let i;i=0===t[e+3]?255:306*t[e]+601*t[e+1]+117*t[e+2]+512>>10,n[r]=i}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);const r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),r=e.getContext("2d"),n=t*B.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*o),a=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*o);return e.width=s,e.height=a,r.translate(s/2,a/2),r.rotate(n),r.drawImage(this.canvas,i/-2,o/-2),this.buffer=B.makeBufferFromCanvasImageData(e),this}invert(){return new b(this)}}B.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var P,v=(globalThis||r.g||self||window?(globalThis||r.g||self||window||void 0).__awaiter:void 0)||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class F{constructor(t,e=500,r){this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return v(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const r of t){const t="video"===r.kind?"videoinput":r.kind;if("videoinput"!==t)continue;const n={deviceId:r.deviceId||r.id,label:r.label||`Video device ${e.length+1}`,kind:t,groupId:r.groupId};e.push(n)}return e}))}getVideoInputDevices(){return v(this,void 0,void 0,(function*(){return(yield this.listVideoInputDevices()).map((t=>new L(t.deviceId,t.label)))}))}findDeviceById(t){return v(this,void 0,void 0,(function*(){const e=yield this.listVideoInputDevices();return e?e.find((e=>e.deviceId===t)):null}))}decodeFromInputVideoDevice(t,e){return v(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(t,e)}))}decodeOnceFromVideoDevice(t,e){return v(this,void 0,void 0,(function*(){let r;this.reset(),r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,e)}))}decodeOnceFromConstraints(t,e){return v(this,void 0,void 0,(function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)}))}decodeOnceFromStream(t,e){return v(this,void 0,void 0,(function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeOnce(r)}))}decodeFromInputVideoDeviceContinuously(t,e,r){return v(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(t,e,r)}))}decodeFromVideoDevice(t,e,r){return v(this,void 0,void 0,(function*(){let n;n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const i={video:n};return yield this.decodeFromConstraints(i,e,r)}))}decodeFromConstraints(t,e,r){return v(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(n,e,r)}))}decodeFromStream(t,e,r){return v(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(n,r)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return v(this,void 0,void 0,(function*(){const r=this.prepareVideoElement(e);return this.addVideoSource(r,t),this.videoElement=r,this.stream=t,yield this.playVideoOnLoadAsync(r),r}))}playVideoOnLoadAsync(t){return new Promise(((e,r)=>this.playVideoOnLoad(t,(()=>e()))))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return v(this,void 0,void 0,(function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(t){console.warn("It was not possible to play the video.")}}))}getMediaElement(t,e){const r=document.getElementById(t);if(!r)throw new a(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new a(`element with id '${t}' must be an ${e} element`);return r}decodeFromImage(t,e){if(!t&&!e)throw new a("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new a("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,r){if(void 0===t&&void 0===e)throw new a("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)}decodeFromImageElement(t){if(!t)throw new a("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let r;return this.imageElement=e,r=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),r}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)}_decodeFromVideoElementSetup(t){if(!t)throw new a("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new a("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const r=this._decodeOnLoadImage(e);return e.src=t,r}decodeFromVideoUrl(t){if(!t)throw new a("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r}decodeFromVideoUrlContinuously(t,e){if(!t)throw new a("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n}_decodeOnLoadImage(t){return new Promise(((e,r)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,r),t.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(t){return v(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)}))}_decodeOnLoadVideoContinuously(t,e){return v(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)}))}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return void 0===t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"==typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,r=!0){this._stopAsyncDecode=!1;const n=(i,o)=>{if(this._stopAsyncDecode)return o(new D("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(t))}catch(t){if(e&&t instanceof D||(t instanceof h||t instanceof E)&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,o);o(t)}};return new Promise(((t,e)=>n(t,e)))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(t);e(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(t){e(null,t),(t instanceof h||t instanceof E||t instanceof D)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}_isHTMLVideoElement(t){return 0!==t.videoWidth}drawFrameOnCanvas(t,e,r){e||(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}drawImageOnCanvas(t,e,r=this.captureCanvasContext){e||(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const e=this.getCaptureCanvas(t),r=new B(e),n=new R(r);return new l(n)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let r,n;return void 0!==t&&(t instanceof HTMLVideoElement?(r=t.videoWidth,n=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,n=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=n+"px",e.width=r,e.height=n,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((t=>t.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class x{constructor(t,e,r=(null==e?0:8*e.length),n,i,o=d.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=o,this.text=t,this.rawBytes=e,this.numBits=null==r?null==e?0:8*e.length:r,this.resultPoints=n,this.format=i,this.resultMetadata=null,this.timestamp=null==o?d.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(null===this.resultMetadata?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const r=new Array(e.length+t.length);d.arraycopy(e,0,r,0,e.length),d.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(P||(P={}));var k,U=P;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(k||(k={}));var H,V,z,G,Y,X,W=k;class j{constructor(t,e,r,n,i=-1,o=-1){this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=null==t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(t){return this.expTable[t]}log(t){if(0===t)throw new c;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class Q{constructor(t,e){if(0===e.length)throw new c;this.field=t;const r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-t),d.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let r;if(1===t){r=0;for(let t=0,n=e.length;t!==n;t++){const n=e[t];r=Z.addOrSubtract(r,n)}return r}r=e[0];const n=e.length,i=this.field;for(let o=1;o<n;o++)r=Z.addOrSubtract(i.multiply(t,r),e[o]);return r}addOrSubtract(t){if(!this.field.equals(t.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){const t=e;e=r,r=t}let n=new Int32Array(r.length);const i=r.length-e.length;d.arraycopy(r,0,n,0,i);for(let t=i;t<r.length;t++)n[t]=Z.addOrSubtract(e[t-i],r[t]);return new Q(this.field,n)}multiply(t){if(!this.field.equals(t.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,r=e.length,n=t.coefficients,i=n.length,o=new Int32Array(r+i-1),s=this.field;for(let t=0;t<r;t++){const r=e[t];for(let e=0;e<i;e++)o[t+e]=Z.addOrSubtract(o[t+e],s.multiply(r,n[e]))}return new Q(s,o)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,r=this.field,n=new Int32Array(e),i=this.coefficients;for(let o=0;o<e;o++)n[o]=r.multiply(i[o],t);return new Q(r,n)}multiplyByMonomial(t,e){if(t<0)throw new c;if(0===e)return this.field.getZero();const r=this.coefficients,n=r.length,i=new Int32Array(n+t),o=this.field;for(let t=0;t<n;t++)i[t]=o.multiply(r[t],e);return new Q(o,i)}divide(t){if(!this.field.equals(t.field))throw new c("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new c("Divide by 0");const e=this.field;let r=e.getZero(),n=this;const i=t.getCoefficient(t.getDegree()),o=e.inverse(i);for(;n.getDegree()>=t.getDegree()&&!n.isZero();){const i=n.getDegree()-t.getDegree(),s=e.multiply(n.getCoefficient(n.getDegree()),o),a=t.multiplyByMonomial(i,s),c=e.buildMonomial(i,s);r=r.addOrSubtract(c),n=n.addOrSubtract(a)}return[r,n]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){const e=this.field.log(r);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class K extends s{}K.kind="ArithmeticException";class q extends Z{constructor(t,e,r){super(),this.primitive=t,this.size=e,this.generatorBase=r;const n=new Int32Array(e);let i=1;for(let r=0;r<e;r++)n[r]=i,i*=2,i>=e&&(i^=t,i&=e-1);this.expTable=n;const o=new Int32Array(e);for(let t=0;t<e-1;t++)o[n[t]]=t;this.logTable=o,this.zero=new Q(this,Int32Array.from([0])),this.one=new Q(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new c;if(0===e)return this.zero;const r=new Int32Array(t+1);return r[0]=e,new Q(this,r)}inverse(t){if(0===t)throw new K;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+m.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}q.AZTEC_DATA_12=new q(4201,4096,1),q.AZTEC_DATA_10=new q(1033,1024,1),q.AZTEC_DATA_6=new q(67,64,1),q.AZTEC_PARAM=new q(19,16,1),q.QR_CODE_FIELD_256=new q(285,256,0),q.DATA_MATRIX_FIELD_256=new q(301,256,1),q.AZTEC_DATA_8=q.DATA_MATRIX_FIELD_256,q.MAXICODE_FIELD_64=q.AZTEC_DATA_6;class J extends s{}J.kind="ReedSolomonException";class $ extends s{}$.kind="IllegalStateException";class tt{constructor(t){this.field=t}decode(t,e){const r=this.field,n=new Q(r,t),i=new Int32Array(e);let o=!0;for(let t=0;t<e;t++){const e=n.evaluateAt(r.exp(t+r.getGeneratorBase()));i[i.length-1-t]=e,0!==e&&(o=!1)}if(o)return;const s=new Q(r,i),a=this.runEuclideanAlgorithm(r.buildMonomial(e,1),s,e),c=a[0],l=a[1],h=this.findErrorLocations(c),u=this.findErrorMagnitudes(l,h);for(let e=0;e<h.length;e++){const n=t.length-1-r.log(h[e]);if(n<0)throw new J("Bad error location");t[n]=q.addOrSubtract(t[n],u[e])}}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){const r=t;t=e,e=r}const n=this.field;let i=t,o=e,s=n.getZero(),a=n.getOne();for(;o.getDegree()>=(r/2|0);){let t=i,e=s;if(i=o,s=a,i.isZero())throw new J("r_{i-1} was zero");o=t;let r=n.getZero();const c=i.getCoefficient(i.getDegree()),l=n.inverse(c);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const t=o.getDegree()-i.getDegree(),e=n.multiply(o.getCoefficient(o.getDegree()),l);r=r.addOrSubtract(n.buildMonomial(t,e)),o=o.addOrSubtract(i.multiplyByMonomial(t,e))}if(a=r.multiply(s).addOrSubtract(e),o.getDegree()>=i.getDegree())throw new $("Division algorithm failed to reduce polynomial?")}const c=a.getCoefficient(0);if(0===c)throw new J("sigmaTilde(0) was zero");const l=n.inverse(c);return[a.multiplyScalar(l),o.multiplyScalar(l)]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const r=new Int32Array(e);let n=0;const i=this.field;for(let o=1;o<i.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=i.inverse(o),n++);if(n!==e)throw new J("Error locator degree does not match number of roots");return r}findErrorMagnitudes(t,e){const r=e.length,n=new Int32Array(r),i=this.field;for(let o=0;o<r;o++){const s=i.inverse(e[o]);let a=1;for(let t=0;t<r;t++)if(o!==t){const r=i.multiply(e[t],s),n=0==(1&r)?1|r:-2&r;a=i.multiply(a,n)}n[o]=i.multiply(t.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(n[o]=i.multiply(n[o],s))}return n}}!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(H||(H={}));class et{decode(t){this.ddata=t;let e=t.getBits(),r=this.extractBits(e),n=this.correctBits(r),i=et.convertBoolArrayToByteArray(n),o=et.getEncodedData(n),s=new j(i,o,null,null);return s.setNumBits(n.length),s}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,r=H.UPPER,n=H.UPPER,i="",o=0;for(;o<e;)if(n===H.BINARY){if(e-o<5)break;let s=et.readCode(t,o,5);if(o+=5,0===s){if(e-o<11)break;s=et.readCode(t,o,11)+31,o+=11}for(let r=0;r<s;r++){if(e-o<8){o=e;break}const r=et.readCode(t,o,8);i+=T.castAsNonUtf8Char(r),o+=8}n=r}else{let s=n===H.DIGIT?4:5;if(e-o<s)break;let a=et.readCode(t,o,s);o+=s;let c=et.getCharacter(n,a);c.startsWith("CTRL_")?(r=n,n=et.getTable(c.charAt(5)),"L"===c.charAt(6)&&(r=n)):(i+=c,n=r)}return i}static getTable(t){switch(t){case"L":return H.LOWER;case"P":return H.PUNCT;case"M":return H.MIXED;case"D":return H.DIGIT;case"B":return H.BINARY;default:return H.UPPER}}static getCharacter(t,e){switch(t){case H.UPPER:return et.UPPER_TABLE[e];case H.LOWER:return et.LOWER_TABLE[e];case H.MIXED:return et.MIXED_TABLE[e];case H.PUNCT:return et.PUNCT_TABLE[e];case H.DIGIT:return et.DIGIT_TABLE[e];default:throw new $("Bad table")}}correctBits(t){let e,r;this.ddata.getNbLayers()<=2?(r=6,e=q.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=q.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=q.AZTEC_DATA_10):(r=12,e=q.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=t.length/r;if(i<n)throw new E;let o=t.length%r,s=new Int32Array(i);for(let e=0;e<i;e++,o+=r)s[e]=et.readCode(t,o,r);try{new tt(e).decode(s,i-n)}catch(t){throw new E(t)}let a=(1<<r)-1,c=0;for(let t=0;t<n;t++){let e=s[t];if(0===e||e===a)throw new E;1!==e&&e!==a-1||c++}let l=new Array(n*r-c),h=0;for(let t=0;t<n;t++){let e=s[t];if(1===e||e===a-1)l.fill(e>1,h,h+r-1),h+=r-1;else for(let t=r-1;t>=0;--t)l[h++]=0!=(e&1<<t)}return l}extractBits(t){let e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,i=new Int32Array(n),o=new Array(this.totalBitsInLayer(r,e));if(e)for(let t=0;t<i.length;t++)i[t]=t;else{let t=n+1+2*m.truncDivision(m.truncDivision(n,2)-1,15),e=n/2,r=m.truncDivision(t,2);for(let t=0;t<e;t++){let n=t+m.truncDivision(t,15);i[e-t-1]=r-n-1,i[e+t]=r+n+1}}for(let s=0,a=0;s<r;s++){let c=4*(r-s)+(e?9:12),l=2*s,h=n-1-l;for(let e=0;e<c;e++){let r=2*e;for(let n=0;n<2;n++)o[a+r+n]=t.get(i[l+n],i[l+e]),o[a+2*c+r+n]=t.get(i[l+e],i[h-n]),o[a+4*c+r+n]=t.get(i[h-n],i[h-e]),o[a+6*c+r+n]=t.get(i[h-e],i[l+n])}a+=8*c}return o}static readCode(t,e,r){let n=0;for(let i=e;i<e+r;i++)n<<=1,t[i]&&(n|=1);return n}static readByte(t,e){let r=t.length-e;return r>=8?et.readCode(t,e,8):et.readCode(t,e,r)<<8-r}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let r=0;r<e.length;r++)e[r]=et.readByte(t,8*r);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],et.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class rt{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,r,n){const i=t-r,o=e-n;return Math.sqrt(i*i+o*o)}static sum(t){let e=0;for(let r=0,n=t.length;r!==n;r++)e+=t[r];return e}}class nt{static floatToIntBits(t){return t}}nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class it{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof it){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*nt.floatToIntBits(this.x)+nt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),n=this.distance(t[0],t[2]);let i,o,s;if(r>=e&&r>=n?(o=t[0],i=t[1],s=t[2]):n>=r&&n>=e?(o=t[1],i=t[0],s=t[2]):(o=t[2],i=t[0],s=t[1]),this.crossProductZ(i,o,s)<0){const t=i;i=s,s=t}t[0]=i,t[1]=o,t[2]=s}static distance(t,e){return rt.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,r){const n=e.x,i=e.y;return(r.x-n)*(t.y-i)-(r.y-i)*(t.x-n)}}class ot{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class st extends ot{constructor(t,e,r,n,i){super(t,e),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class at{constructor(t,e,r,n){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==e&&(e=at.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==n&&(n=t.getHeight()/2|0);const i=e/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new D}detect(){let t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,i=!1,o=!0,s=!1,a=!1,c=!1,l=!1,h=!1;const u=this.width,d=this.height;for(;o;){o=!1;let f=!0;for(;(f||!a)&&e<u;)f=this.containsBlackPoint(r,n,e,!1),f?(e++,o=!0,a=!0):a||e++;if(e>=u){i=!0;break}let g=!0;for(;(g||!c)&&n<d;)g=this.containsBlackPoint(t,e,n,!0),g?(n++,o=!0,c=!0):c||n++;if(n>=d){i=!0;break}let w=!0;for(;(w||!l)&&t>=0;)w=this.containsBlackPoint(r,n,t,!1),w?(t--,o=!0,l=!0):l||t--;if(t<0){i=!0;break}let m=!0;for(;(m||!h)&&r>=0;)m=this.containsBlackPoint(t,e,r,!0),m?(r--,o=!0,h=!0):h||r--;if(r<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=e-t;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,n-e,t+e,n);if(null==o)throw new D;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,r+e,t+e,r);if(null==s)throw new D;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,r+t,e-t,r);if(null==a)throw new D;let c=null;for(let t=1;null===c&&t<i;t++)c=this.getBlackPointOnSegment(e,n-t,e-t,n);if(null==c)throw new D;return this.centerEdges(c,o,a,s)}throw new D}getBlackPointOnSegment(t,e,r,n){const i=rt.round(rt.distance(t,e,r,n)),o=(r-t)/i,s=(n-e)/i,a=this.image;for(let r=0;r<i;r++){const n=rt.round(t+r*o),i=rt.round(e+r*s);if(a.get(n,i))return new it(n,i)}return null}centerEdges(t,e,r,n){const i=t.getX(),o=t.getY(),s=e.getX(),a=e.getY(),c=r.getX(),l=r.getY(),h=n.getX(),u=n.getY(),d=at.CORR;return i<this.width/2?[new it(h-d,u+d),new it(s+d,a+d),new it(c-d,l-d),new it(i+d,o-d)]:[new it(h+d,u+d),new it(s+d,a-d),new it(c-d,l+d),new it(i-d,o-d)]}containsBlackPoint(t,e,r,n){const i=this.image;if(n){for(let n=t;n<=e;n++)if(i.get(n,r))return!0}else for(let n=t;n<=e;n++)if(i.get(r,n))return!0;return!1}}at.INIT_SIZE=10,at.CORR=1;class ct{static checkAndNudgePoints(t,e){const r=t.getWidth(),n=t.getHeight();let i=!0;for(let t=0;t<e.length&&i;t+=2){const o=Math.floor(e[t]),s=Math.floor(e[t+1]);if(o<-1||o>r||s<-1||s>n)throw new D;i=!1,-1===o?(e[t]=0,i=!0):o===r&&(e[t]=r-1,i=!0),-1===s?(e[t+1]=0,i=!0):s===n&&(e[t+1]=n-1,i=!0)}i=!0;for(let t=e.length-2;t>=0&&i;t-=2){const o=Math.floor(e[t]),s=Math.floor(e[t+1]);if(o<-1||o>r||s<-1||s>n)throw new D;i=!1,-1===o?(e[t]=0,i=!0):o===r&&(e[t]=r-1,i=!0),-1===s?(e[t+1]=0,i=!0):s===n&&(e[t+1]=n-1,i=!0)}}}class lt{constructor(t,e,r,n,i,o,s,a,c){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=c}static quadrilateralToQuadrilateral(t,e,r,n,i,o,s,a,c,l,h,u,d,f,g,w){const m=lt.quadrilateralToSquare(t,e,r,n,i,o,s,a);return lt.squareToQuadrilateral(c,l,h,u,d,f,g,w).times(m)}transformPoints(t){const e=t.length,r=this.a11,n=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,h=this.a33;for(let u=0;u<e;u+=2){const e=t[u],d=t[u+1],f=i*e+a*d+h;t[u]=(r*e+o*d+c)/f,t[u+1]=(n*e+s*d+l)/f}}transformPointsWithValues(t,e){const r=this.a11,n=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,h=this.a33,u=t.length;for(let d=0;d<u;d++){const u=t[d],f=e[d],g=i*u+a*f+h;t[d]=(r*u+o*f+c)/g,e[d]=(n*u+s*f+l)/g}}static squareToQuadrilateral(t,e,r,n,i,o,s,a){const c=t-r+i-s,l=e-n+o-a;if(0===c&&0===l)return new lt(r-t,i-r,t,n-e,o-n,e,0,0,1);{const h=r-i,u=s-i,d=n-o,f=a-o,g=h*f-u*d,w=(c*f-u*l)/g,m=(h*l-c*d)/g;return new lt(r-t+w*r,s-t+m*s,t,n-e+w*n,a-e+m*a,e,w,m,1)}}static quadrilateralToSquare(t,e,r,n,i,o,s,a){return lt.squareToQuadrilateral(t,e,r,n,i,o,s,a).buildAdjoint()}buildAdjoint(){return new lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new lt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class ht extends ct{sampleGrid(t,e,r,n,i,o,s,a,c,l,h,u,d,f,g,w,m,p,A){const C=lt.quadrilateralToQuadrilateral(n,i,o,s,a,c,l,h,u,d,f,g,w,m,p,A);return this.sampleGridWithTransform(t,e,r,C)}sampleGridWithTransform(t,e,r,n){if(e<=0||r<=0)throw new D;const i=new N(e,r),o=new Float32Array(2*e);for(let e=0;e<r;e++){const r=o.length,s=e+.5;for(let t=0;t<r;t+=2)o[t]=t/2+.5,o[t+1]=s;n.transformPoints(o),ct.checkAndNudgePoints(t,o);try{for(let n=0;n<r;n+=2)t.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,e)}catch(t){throw new D}}return i}}class ut{static setGridSampler(t){ut.gridSampler=t}static getInstance(){return ut.gridSampler}}ut.gridSampler=new ht;class dt{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new it(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ft{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){let t=r[0];r[0]=r[2],r[2]=t}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new st(n,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new D;let e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);let n=0;for(let t=0;t<4;t++){let e=r[(this.shift+t)%4];this.compact?(n<<=7,n+=e>>1&127):(n<<=10,n+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(t,e){let r=0;t.forEach(((t,n,i)=>{r=(t>>e-2<<1)+(1&t)+(r<<3)})),r=((1&r)<<11)+(r>>1);for(let t=0;t<4;t++)if(m.bitCount(r^this.EXPECTED_CORNER_BITS[t])<=2)return t;throw new D}getCorrectedParameterData(t,e){let r,n;e?(r=7,n=2):(r=10,n=4);let i=r-n,o=new Int32Array(r);for(let e=r-1;e>=0;--e)o[e]=15&t,t>>=4;try{new tt(q.AZTEC_PARAM).decode(o,i)}catch(t){throw new D}let s=0;for(let t=0;t<n;t++)s=(s<<4)+o[t];return s}getBullsEyeCorners(t){let e=t,r=t,n=t,i=t,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,o,1,-1),s=this.getFirstDifferent(r,o,1,1),a=this.getFirstDifferent(n,o,-1,1),c=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(c,t)*this.nbCenterLayers/(this.distancePoint(i,e)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(t,s,a,c))break}e=t,r=s,n=a,i=c,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new D;this.compact=5===this.nbCenterLayers;let s=new it(e.getX()+.5,e.getY()-.5),a=new it(r.getX()+.5,r.getY()+.5),c=new it(n.getX()-.5,n.getY()+.5),l=new it(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,c,l],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,r,n;try{let i=new at(this.image).detect();t=i[0],e=i[1],r=i[2],n=i[3]}catch(i){let o=this.image.getWidth()/2,s=this.image.getHeight()/2;t=this.getFirstDifferent(new dt(o+7,s-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new dt(o+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new dt(o-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new dt(o-7,s-7),!1,-1,-1).toResultPoint()}let i=rt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),o=rt.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{let s=new at(this.image,15,i,o).detect();t=s[0],e=s[1],r=s[2],n=s[3]}catch(s){t=this.getFirstDifferent(new dt(i+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new dt(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new dt(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new dt(i-7,o-7),!1,-1,-1).toResultPoint()}return i=rt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),o=rt.round((t.getY()+n.getY()+e.getY()+r.getY())/4),new dt(i,o)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,r,n,i){let o=ut.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(t,s,s,a,a,c,a,c,c,a,c,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(t,e,r){let n=0,i=this.distanceResultPoint(t,e),o=i/r,s=t.getX(),a=t.getY(),c=o*(e.getX()-t.getX())/i,l=o*(e.getY()-t.getY())/i;for(let t=0;t<r;t++)this.image.get(rt.round(s+t*c),rt.round(a+t*l))&&(n|=1<<r-t-1);return n}isWhiteOrBlackRectangle(t,e,r,n){t=new dt(t.getX()-3,t.getY()+3),e=new dt(e.getX()-3,e.getY()-3),r=new dt(r.getX()+3,r.getY()-3),n=new dt(n.getX()+3,n.getY()+3);let i=this.getColor(n,t);if(0===i)return!1;let o=this.getColor(t,e);return o===i&&(o=this.getColor(e,r),o===i&&(o=this.getColor(r,n),o===i))}getColor(t,e){let r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,i=(e.getY()-t.getY())/r,o=0,s=t.getX(),a=t.getY(),c=this.image.get(t.getX(),t.getY()),l=Math.ceil(r);for(let t=0;t<l;t++)s+=n,a+=i,this.image.get(rt.round(s),rt.round(a))!==c&&o++;let h=o/r;return h>.1&&h<.9?0:h<=.1===c?1:-1}getFirstDifferent(t,e,r,n){let i=t.getX()+r,o=t.getY()+n;for(;this.isValid(i,o)&&this.image.get(i,o)===e;)i+=r,o+=n;for(i-=r,o-=n;this.isValid(i,o)&&this.image.get(i,o)===e;)i+=r;for(i-=r;this.isValid(i,o)&&this.image.get(i,o)===e;)o+=n;return o-=n,new dt(i,o)}expandSquare(t,e,r){let n=r/(2*e),i=t[0].getX()-t[2].getX(),o=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,c=new it(s+n*i,a+n*o),l=new it(s-n*i,a-n*o);return i=t[1].getX()-t[3].getX(),o=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2,[c,new it(s+n*i,a+n*o),l,new it(s-n*i,a-n*o)]}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=rt.round(t.getX()),r=rt.round(t.getY());return this.isValid(e,r)}distancePoint(t,e){return rt.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return rt.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(m.truncDivision(this.nbLayers-4,8)+1)+15}}class gt{decode(t,e=null){let r=null,n=new ft(t.getBlackMatrix()),i=null,o=null;try{let t=n.detectMirror(!1);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new et).decode(t)}catch(t){r=t}if(null==o)try{let t=n.detectMirror(!0);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new et).decode(t)}catch(t){if(null!=r)throw r;throw t}let s=new x(o.getText(),o.getRawBytes(),o.getNumBits(),i,U.AZTEC,d.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(W.BYTE_SEGMENTS,a);let c=o.getECLevel();return null!=c&&s.putMetadata(W.ERROR_CORRECTION_LEVEL,c),s}reportFoundResultPoints(t,e){if(null!=t){let r=t.get(C.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach(((t,e,n)=>{r.foundPossibleResultPoint(t)}))}}reset(){}}class wt{decode(t,e){try{return this.doDecode(t,e)}catch(r){if(e&&!0===e.get(C.TRY_HARDER)&&t.isRotateSupported()){const r=t.rotateCounterClockwise(),n=this.doDecode(r,e),i=n.getResultMetadata();let o=270;null!==i&&!0===i.get(W.ORIENTATION)&&(o+=i.get(W.ORIENTATION)%360),n.putMetadata(W.ORIENTATION,o);const s=n.getResultPoints();if(null!==s){const t=r.getHeight();for(let e=0;e<s.length;e++)s[e]=new it(t-s[e].getY()-1,s[e].getX())}return n}throw new D}}reset(){}doDecode(t,e){const r=t.getWidth(),n=t.getHeight();let i=new p(r);const o=e&&!0===e.get(C.TRY_HARDER),s=Math.max(1,n>>(o?8:5));let a;a=o?n:15;const c=Math.trunc(n/2);for(let o=0;o<a;o++){const a=Math.trunc((o+1)/2),l=c+s*(0==(1&o)?a:-a);if(l<0||l>=n)break;try{i=t.getBlackRow(l,i)}catch(t){continue}for(let t=0;t<2;t++){if(1===t&&(i.reverse(),e&&!0===e.get(C.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach(((e,r)=>t.set(r,e))),t.delete(C.NEED_RESULT_POINT_CALLBACK),e=t}try{const n=this.decodeRow(l,i,e);if(1===t){n.putMetadata(W.ORIENTATION,180);const t=n.getResultPoints();null!==t&&(t[0]=new it(r-t[0].getX()-1,t[0].getY()),t[1]=new it(r-t[1].getX()-1,t[1].getY()))}return n}catch(t){}}}throw new D}static recordPattern(t,e,r){const n=r.length;for(let t=0;t<n;t++)r[t]=0;const i=t.getSize();if(e>=i)throw new D;let o=!t.get(e),s=0,a=e;for(;a<i;){if(t.get(a)!==o)r[s]++;else{if(++s===n)break;r[s]=1,o=!o}a++}if(s!==n&&(s!==n-1||a!==i))throw new D}static recordPatternInReverse(t,e,r){let n=r.length,i=t.get(e);for(;e>0&&n>=0;)t.get(--e)!==i&&(n--,i=!i);if(n>=0)throw new D;wt.recordPattern(t,e+1,r)}static patternMatchVariance(t,e,r){const n=t.length;let i=0,o=0;for(let r=0;r<n;r++)i+=t[r],o+=e[r];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;r*=s;let a=0;for(let i=0;i<n;i++){const n=t[i],o=e[i]*s,c=n>o?n-o:o-n;if(c>r)return Number.POSITIVE_INFINITY;a+=c}return a/i}}class mt extends wt{static findStartPattern(t){const e=t.getSize(),r=t.getNextSet(0);let n=0,i=Int32Array.from([0,0,0,0,0,0]),o=r,s=!1;for(let a=r;a<e;a++)if(t.get(a)!==s)i[n]++;else{if(5===n){let e=mt.MAX_AVG_VARIANCE,r=-1;for(let t=mt.CODE_START_A;t<=mt.CODE_START_C;t++){const n=wt.patternMatchVariance(i,mt.CODE_PATTERNS[t],mt.MAX_INDIVIDUAL_VARIANCE);n<e&&(e=n,r=t)}if(r>=0&&t.isRange(Math.max(0,o-(a-o)/2),o,!1))return Int32Array.from([o,a,r]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[n-1]=0,i[n]=0,n--}else n++;i[n]=1,s=!s}throw new D}static decodeCode(t,e,r){wt.recordPattern(t,r,e);let n=mt.MAX_AVG_VARIANCE,i=-1;for(let t=0;t<mt.CODE_PATTERNS.length;t++){const r=mt.CODE_PATTERNS[t],o=this.patternMatchVariance(e,r,mt.MAX_INDIVIDUAL_VARIANCE);o<n&&(n=o,i=t)}if(i>=0)return i;throw new D}decodeRow(t,e,r){const n=r&&!0===r.get(C.ASSUME_GS1),i=mt.findStartPattern(e),o=i[2];let s=0;const a=new Uint8Array(20);let c;switch(a[s++]=o,o){case mt.CODE_START_A:c=mt.CODE_CODE_A;break;case mt.CODE_START_B:c=mt.CODE_CODE_B;break;case mt.CODE_START_C:c=mt.CODE_CODE_C;break;default:throw new E}let l=!1,u=!1,d="",f=i[0],g=i[1];const w=Int32Array.from([0,0,0,0,0,0]);let m=0,p=0,A=o,I=0,S=!0,_=!1,T=!1;for(;!l;){const t=u;switch(u=!1,m=p,p=mt.decodeCode(e,w,g),a[s++]=p,p!==mt.CODE_STOP&&(S=!0),p!==mt.CODE_STOP&&(I++,A+=I*p),f=g,g+=w.reduce(((t,e)=>t+e),0),p){case mt.CODE_START_A:case mt.CODE_START_B:case mt.CODE_START_C:throw new E}switch(c){case mt.CODE_CODE_A:if(p<64)d+=T===_?String.fromCharCode(" ".charCodeAt(0)+p):String.fromCharCode(" ".charCodeAt(0)+p+128),T=!1;else if(p<96)d+=T===_?String.fromCharCode(p-64):String.fromCharCode(p+64),T=!1;else switch(p!==mt.CODE_STOP&&(S=!1),p){case mt.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_A:!_&&T?(_=!0,T=!1):_&&T?(_=!1,T=!1):T=!0;break;case mt.CODE_SHIFT:u=!0,c=mt.CODE_CODE_B;break;case mt.CODE_CODE_B:c=mt.CODE_CODE_B;break;case mt.CODE_CODE_C:c=mt.CODE_CODE_C;break;case mt.CODE_STOP:l=!0}break;case mt.CODE_CODE_B:if(p<96)d+=T===_?String.fromCharCode(" ".charCodeAt(0)+p):String.fromCharCode(" ".charCodeAt(0)+p+128),T=!1;else switch(p!==mt.CODE_STOP&&(S=!1),p){case mt.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_B:!_&&T?(_=!0,T=!1):_&&T?(_=!1,T=!1):T=!0;break;case mt.CODE_SHIFT:u=!0,c=mt.CODE_CODE_A;break;case mt.CODE_CODE_A:c=mt.CODE_CODE_A;break;case mt.CODE_CODE_C:c=mt.CODE_CODE_C;break;case mt.CODE_STOP:l=!0}break;case mt.CODE_CODE_C:if(p<100)p<10&&(d+="0"),d+=p;else switch(p!==mt.CODE_STOP&&(S=!1),p){case mt.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case mt.CODE_CODE_A:c=mt.CODE_CODE_A;break;case mt.CODE_CODE_B:c=mt.CODE_CODE_B;break;case mt.CODE_STOP:l=!0}}t&&(c=c===mt.CODE_CODE_A?mt.CODE_CODE_B:mt.CODE_CODE_A)}const y=g-f;if(g=e.getNextUnset(g),!e.isRange(g,Math.min(e.getSize(),g+(g-f)/2),!1))throw new D;if(A-=I*m,A%103!==m)throw new h;const N=d.length;if(0===N)throw new D;N>0&&S&&(d=c===mt.CODE_CODE_C?d.substring(0,N-2):d.substring(0,N-1));const M=(i[1]+i[0])/2,R=f+y/2,O=a.length,b=new Uint8Array(O);for(let t=0;t<O;t++)b[t]=a[t];const B=[new it(M,t),new it(R,t)];return new x(d,b,0,B,U.CODE_128,(new Date).getTime())}}mt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],mt.MAX_AVG_VARIANCE=.25,mt.MAX_INDIVIDUAL_VARIANCE=.7,mt.CODE_SHIFT=98,mt.CODE_CODE_C=99,mt.CODE_CODE_B=100,mt.CODE_CODE_A=101,mt.CODE_FNC_1=102,mt.CODE_FNC_2=97,mt.CODE_FNC_3=96,mt.CODE_FNC_4_A=101,mt.CODE_FNC_4_B=100,mt.CODE_START_A=103,mt.CODE_START_B=104,mt.CODE_START_C=105,mt.CODE_STOP=106;class pt extends wt{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let i,o,s=pt.findAsteriskPattern(e,n),a=e.getNextSet(s[1]),c=e.getSize();do{pt.recordPattern(e,a,n);let t=pt.toNarrowWidePattern(n);if(t<0)throw new D;i=pt.patternToChar(t),this.decodeRowResult+=i,o=a;for(let t of n)a+=t;a=e.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let l,u=0;for(let t of n)u+=t;if(a!==c&&2*(a-o-u)<u)throw new D;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let r=0;r<t;r++)e+=pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(t)!==pt.ALPHABET_STRING.charAt(e%43))throw new h;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new D;l=this.extendedMode?pt.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(s[1]+s[0])/2,f=o+u/2;return new x(l,null,0,[new it(d,t),new it(f,t)],U.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let r=t.getSize(),n=t.getNextSet(0),i=0,o=n,s=!1,a=e.length;for(let c=n;c<r;c++)if(t.get(c)!==s)e[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(e)===pt.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((c-o)/2)),o,!1))return[o,c];o+=e[0]+e[1],e.copyWithin(0,2,2+i-1),e[i-1]=0,e[i]=0,i--}else i++;e[i]=1,s=!s}throw new D}static toNarrowWidePattern(t){let e,r=t.length,n=0;do{let i=2147483647;for(let e of t)e<i&&e>n&&(i=e);n=i,e=0;let o=0,s=0;for(let i=0;i<r;i++){let a=t[i];a>n&&(s|=1<<r-1-i,e++,o+=a)}if(3===e){for(let i=0;i<r&&e>0;i++){let r=t[i];if(r>n&&(e--,2*r>=o))return-1}return s}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<pt.CHARACTER_ENCODINGS.length;e++)if(pt.CHARACTER_ENCODINGS[e]===t)return pt.ALPHABET_STRING.charAt(e);if(t===pt.ASTERISK_ENCODING)return"*";throw new D}static decodeExtended(t){let e=t.length,r="";for(let n=0;n<e;n++){let e=t.charAt(n);if("+"===e||"$"===e||"%"===e||"/"===e){let i=t.charAt(n+1),o="\0";switch(e){case"+":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new E;o=""}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new E;o=":"}}r+=o,n++}else r+=e}return r}}pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pt.ASTERISK_ENCODING=148;class At extends wt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,r){let n=this.decodeStart(e),i=this.decodeEnd(e),o=new y;At.decodeMiddle(e,n[1],i[0],o);let s=o.toString(),a=null;null!=r&&(a=r.get(C.ALLOWED_LENGTHS)),null==a&&(a=At.DEFAULT_ALLOWED_LENGTHS);let c=s.length,l=!1,h=0;for(let t of a){if(c===t){l=!0;break}t>h&&(h=t)}if(!l&&c>h&&(l=!0),!l)throw new E;const u=[new it(n[1],t),new it(i[0],t)];return new x(s,null,0,u,U.ITF,(new Date).getTime())}static decodeMiddle(t,e,r,n){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);e<r;){wt.recordPattern(t,e,i);for(let t=0;t<5;t++){let e=2*t;o[t]=i[e],s[t]=i[e+1]}let r=At.decodeDigit(o);n.append(r.toString()),r=this.decodeDigit(s),n.append(r.toString()),i.forEach((function(t){e+=t}))}}decodeStart(t){let e=At.skipWhiteSpace(t),r=At.findGuardPattern(t,e,At.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(t,r[0]),r}validateQuietZone(t,e){let r=10*this.narrowLineWidth;r=r<e?r:e;for(let n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new D}static skipWhiteSpace(t){const e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new D;return r}decodeEnd(t){t.reverse();try{let e,r=At.skipWhiteSpace(t);try{e=At.findGuardPattern(t,r,At.END_PATTERN_REVERSED[0])}catch(n){n instanceof D&&(e=At.findGuardPattern(t,r,At.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,e[0]);let n=e[0];return e[0]=t.getSize()-e[1],e[1]=t.getSize()-n,e}finally{t.reverse()}}static findGuardPattern(t,e,r){let n=r.length,i=new Int32Array(n),o=t.getSize(),s=!1,a=0,c=e;i.fill(0);for(let l=e;l<o;l++)if(t.get(l)!==s)i[a]++;else{if(a===n-1){if(wt.patternMatchVariance(i,r,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return[c,l];c+=i[0]+i[1],d.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new D}static decodeDigit(t){let e=At.MAX_AVG_VARIANCE,r=-1,n=At.PATTERNS.length;for(let i=0;i<n;i++){let n=At.PATTERNS[i],o=wt.patternMatchVariance(t,n,At.MAX_INDIVIDUAL_VARIANCE);o<e?(e=o,r=i):o===e&&(r=-1)}if(r>=0)return r%10;throw new D}}At.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],At.MAX_AVG_VARIANCE=.38,At.MAX_INDIVIDUAL_VARIANCE=.5,At.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],At.START_PATTERN=Int32Array.from([1,1,1,1]),At.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends wt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,r=!1,n=0,i=Int32Array.from([0,0,0]);for(;!r;){i=Int32Array.from([0,0,0]),e=Ct.findGuardPattern(t,n,!1,this.START_END_PATTERN,i);let o=e[0];n=e[1];let s=o-(n-o);s>=0&&(r=t.isRange(s,o,!1))}return e}static checkChecksum(t){return Ct.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return Ct.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return Ct.findGuardPattern(t,e,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))}static findGuardPattern(t,e,r,n,i){let o=t.getSize(),s=0,a=e=r?t.getNextUnset(e):t.getNextSet(e),c=n.length,l=r;for(let r=e;r<o;r++)if(t.get(r)!==l)i[s]++;else{if(s===c-1){if(wt.patternMatchVariance(i,n,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([a,r]);a+=i[0]+i[1];let t=i.slice(2,i.length-1);for(let e=0;e<s-1;e++)i[e]=t[e];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,l=!l}throw new D}static decodeDigit(t,e,r,n){this.recordPattern(t,r,e);let i=this.MAX_AVG_VARIANCE,o=-1,s=n.length;for(let t=0;t<s;t++){let r=n[t],s=wt.patternMatchVariance(e,r,Ct.MAX_INDIVIDUAL_VARIANCE);s<i&&(i=s,o=t)}if(o>=0)return o;throw new D}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Et{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(e,r,n),o=n.toString(),s=Et.parseExtensionString(o),a=[new it((r[0]+r[1])/2,t),new it(i,t)],c=new x(o,null,0,a,U.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),o=e[1],s=0;for(let e=0;e<5&&o<i;e++){let i=Ct.decodeDigit(t,n,o,Ct.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+i%10);for(let t of n)o+=t;i>=10&&(s|=1<<4-e),4!==e&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(5!==r.length)throw new D;let a=this.determineCheckDigit(s);if(Et.extensionChecksum(r.toString())!==a)throw new D;return o}static extensionChecksum(t){let e=t.length,r=0;for(let n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new D}static parseExtensionString(t){if(5!==t.length)return null;let e=Et.parseExtension5String(t);return null==e?null:new Map([[W.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}let r=parseInt(t.substring(1)),n=r%100;return e+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class It{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(e,r,n),o=n.toString(),s=It.parseExtensionString(o),a=[new it((r[0]+r[1])/2,t),new it(i,t)],c=new x(o,null,0,a,U.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),o=e[1],s=0;for(let e=0;e<2&&o<i;e++){let i=Ct.decodeDigit(t,n,o,Ct.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+i%10);for(let t of n)o+=t;i>=10&&(s|=1<<1-e),1!==e&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(2!==r.length)throw new D;if(parseInt(r.toString())%4!==s)throw new D;return o}static parseExtensionString(t){return 2!==t.length?null:new Map([[W.ISSUE_NUMBER,parseInt(t)]])}}class St{static decodeRow(t,e,r){let n=Ct.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Et).decodeRow(t,e,n)}catch(r){return(new It).decodeRow(t,e,n)}}}St.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends Ct{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map((t=>Int32Array.from(t)));for(let t=10;t<20;t++){let e=_t.L_PATTERNS[t-10],r=new Int32Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[e.length-t-1];_t.L_AND_G_PATTERNS[t]=r}}decodeRow(t,e,r){let n=_t.findStartGuardPattern(e),i=null==r?null:r.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=i){const e=new it((n[0]+n[1])/2,t);i.foundPossibleResultPoint(e)}let o=this.decodeMiddle(e,n,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const e=new it(s,t);i.foundPossibleResultPoint(e)}let c=this.decodeEnd(e,s);if(null!=i){const e=new it((c[0]+c[1])/2,t);i.foundPossibleResultPoint(e)}let l=c[1],u=l+(l-c[0]);if(u>=e.getSize()||!e.isRange(l,u,!1))throw new D;let d=a.toString();if(d.length<8)throw new E;if(!_t.checkChecksum(d))throw new h;let f=(n[1]+n[0])/2,g=(c[1]+c[0])/2,w=this.getBarcodeFormat(),m=[new it(f,t),new it(g,t)],p=new x(d,null,0,m,w,(new Date).getTime()),A=0;try{let r=St.decodeRow(t,e,c[1]);p.putMetadata(W.UPC_EAN_EXTENSION,r.getText()),p.putAllMetadata(r.getResultMetadata()),p.addResultPoints(r.getResultPoints()),A=r.getText().length}catch(t){}let I=null==r?null:r.get(C.ALLOWED_EAN_EXTENSIONS);if(null!=I){let t=!1;for(let e in I)if(A.toString()===e){t=!0;break}if(!t)throw new D}return p}decodeEnd(t,e){return _t.findGuardPattern(t,e,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return _t.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return _t.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;r+=e}return(1e3-r)%10}}class Tt extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),o=e[1],s=0;for(let e=0;e<6&&o<i;e++){let i=_t.decodeDigit(t,n,o,_t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+i%10);for(let t of n)o+=t;i>=10&&(s|=1<<5-e)}r=Tt.determineFirstDigit(r,s),o=_t.findGuardPattern(t,o,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let e=0;e<6&&o<i;e++){let e=_t.decodeDigit(t,n,o,_t.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)o+=t}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return U.EAN_13}static determineFirstDigit(t,e){for(let r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode("0".charCodeAt(0)+r)+t;throw new D}}Tt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class yt extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),o=e[1];for(let e=0;e<4&&o<i;e++){let e=_t.decodeDigit(t,n,o,_t.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)o+=t}o=_t.findGuardPattern(t,o,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let e=0;e<4&&o<i;e++){let e=_t.decodeDigit(t,n,o,_t.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)o+=t}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return U.EAN_8}}class Nt extends _t{constructor(){super(...arguments),this.ean13Reader=new Tt}getBarcodeFormat(){return U.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))}decodeMiddle(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let r=new x(e.substring(1),null,null,t.getResultPoints(),U.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new D}reset(){this.ean13Reader.reset()}}class Dt extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters.map((t=>t));n[0]=0,n[1]=0,n[2]=0,n[3]=0;const i=t.getSize();let o=e[1],s=0;for(let e=0;e<6&&o<i;e++){const i=Dt.decodeDigit(t,n,o,Dt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+i%10);for(let t of n)o+=t;i>=10&&(s|=1<<5-e)}return{rowOffset:o,resultString:Dt.determineNumSysAndCheckDigit(r,s)}}decodeEnd(t,e){return Dt.findGuardPatternWithoutCounters(t,e,!0,Dt.MIDDLE_END_PATTERN)}checkChecksum(t){return _t.checkChecksum(Dt.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode("0".charCodeAt(0)+r)+t+String.fromCharCode("0".charCodeAt(0)+n);throw D.getNotFoundInstance()}getBarcodeFormat(){return U.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map((t=>t.charCodeAt(0))),r=new y;r.append(t.charAt(0));let n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()}}Dt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Mt extends wt{constructor(t){super();let r=null==t?null:t.get(C.POSSIBLE_FORMATS),n=[];e(r)?(n.push(new Tt),n.push(new Nt),n.push(new yt),n.push(new Dt)):(r.indexOf(U.EAN_13)>-1&&n.push(new Tt),r.indexOf(U.UPC_A)>-1&&n.push(new Nt),r.indexOf(U.EAN_8)>-1&&n.push(new yt),r.indexOf(U.UPC_E)>-1&&n.push(new Dt)),this.readers=n}decodeRow(t,e,r){for(let n of this.readers)try{const i=n.decodeRow(t,e,r),o=i.getBarcodeFormat()===U.EAN_13&&"0"===i.getText().charAt(0),s=null==r?null:r.get(C.POSSIBLE_FORMATS),a=null==s||s.includes(U.UPC_A);if(o&&a){const t=i.getRawBytes(),e=new x(i.getText().substring(1),t,t?t.length:null,i.getResultPoints(),U.UPC_A);return e.putAllMetadata(i.getResultMetadata()),e}return i}catch(t){}throw new D}reset(){for(let t of this.readers)t.reset()}}class Rt extends wt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let r=0;r<e.length;r++)if(wt.patternMatchVariance(t,e[r],Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return r;throw new D}static count(t){return rt.sum(new Int32Array(t))}static increment(t,e){let r=0,n=e[0];for(let i=1;i<t.length;i++)e[i]>n&&(n=e[i],r=i);t[r]++}static decrement(t,e){let r=0,n=e[0];for(let i=1;i<t.length;i++)e[i]<n&&(n=e[i],r=i);t[r]--}static isFinderPattern(t){let e=t[0]+t[1],r=e/(e+t[2]+t[3]);if(r>=Rt.MIN_FINDER_PATTERN_RATIO&&r<=Rt.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of t)n>r&&(r=n),n<e&&(e=n);return r<10*e}return!1}}Rt.MAX_AVG_VARIANCE=.2,Rt.MAX_INDIVIDUAL_VARIANCE=.45,Rt.MIN_FINDER_PATTERN_RATIO=9.5/12,Rt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ot{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Ot))return!1;const e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bt{constructor(t,e,r,n,i){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new it(r,i)),this.resultPoints.push(new it(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof bt))return!1;const e=t;return this.value===e.value}hashCode(){return this.value}}class Bt{constructor(){}static getRSSvalue(t,e,r){let n=0;for(let e of t)n+=e;let i=0,o=0,s=t.length;for(let a=0;a<s-1;a++){let c;for(c=1,o|=1<<a;c<t[a];c++,o&=~(1<<a)){let t=Bt.combins(n-c-1,s-a-2);if(r&&0===o&&n-c-(s-a-1)>=s-a-1&&(t-=Bt.combins(n-c-(s-a),s-a-2)),s-a-1>1){let r=0;for(let t=n-c-(s-a-2);t>e;t--)r+=Bt.combins(n-c-t-1,s-a-3);t-=r*(s-1-a)}else n-c>e&&t--;i+=t}n-=c}return i}static combins(t,e){let r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);let i=1,o=1;for(let e=t;e>r;e--)i*=e,o<=n&&(i/=o,o++);for(;o<=n;)i/=o,o++;return i}}class Lt{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let r=new p(12*e),n=0,i=t[0].getRightChar().getValue();for(let t=11;t>=0;--t)0!=(i&1<<t)&&r.set(n),n++;for(let e=1;e<t.length;++e){let i=t[e],o=i.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(o&1<<t)&&r.set(n),n++;if(null!=i.getRightChar()){let t=i.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&r.set(n),n++}}return r}}class Pt{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class vt{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Ft extends vt{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===Ft.FNC1}}Ft.FNC1="$";class xt extends vt{constructor(t,e,r){super(t),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class kt extends vt{constructor(t,e,r){if(super(t),e<0||e>10||r<0||r>10)throw new E;this.firstDigit=e,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===kt.FNC1}isSecondDigitFNC1(){return this.secondDigit===kt.FNC1}isAnyFNC1(){return this.firstDigit===kt.FNC1||this.secondDigit===kt.FNC1}}kt.FNC1=10;class Ut{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new D;let e=t.substring(0,2);for(let r of Ut.TWO_DIGIT_DATA_LENGTH)if(r[0]===e)return r[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(2,r[2],t):Ut.processFixedAI(2,r[1],t);if(t.length<3)throw new D;let r=t.substring(0,3);for(let e of Ut.THREE_DIGIT_DATA_LENGTH)if(e[0]===r)return e[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(3,e[2],t):Ut.processFixedAI(3,e[1],t);for(let e of Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(e[0]===r)return e[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,e[2],t):Ut.processFixedAI(4,e[1],t);if(t.length<4)throw new D;let n=t.substring(0,4);for(let e of Ut.FOUR_DIGIT_DATA_LENGTH)if(e[0]===n)return e[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,e[2],t):Ut.processFixedAI(4,e[1],t);throw new D}static processFixedAI(t,e,r){if(r.length<t)throw new D;let n=r.substring(0,t);if(r.length<t+e)throw new D;let i=r.substring(t,t+e),o=r.substring(t+e),s="("+n+")"+i,a=Ut.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(t,e,r){let n,i=r.substring(0,t);n=r.length<t+e?r.length:t+e;let o=r.substring(t,n),s=r.substring(n),a="("+i+")"+o,c=Ut.parseFieldsInGeneralPurpose(s);return null==c?a:a+c}}Ut.VARIABLE_LENGTH=[],Ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ut.VARIABLE_LENGTH,20],["22",Ut.VARIABLE_LENGTH,29],["30",Ut.VARIABLE_LENGTH,8],["37",Ut.VARIABLE_LENGTH,8],["90",Ut.VARIABLE_LENGTH,30],["91",Ut.VARIABLE_LENGTH,30],["92",Ut.VARIABLE_LENGTH,30],["93",Ut.VARIABLE_LENGTH,30],["94",Ut.VARIABLE_LENGTH,30],["95",Ut.VARIABLE_LENGTH,30],["96",Ut.VARIABLE_LENGTH,30],["97",Ut.VARIABLE_LENGTH,3],["98",Ut.VARIABLE_LENGTH,30],["99",Ut.VARIABLE_LENGTH,30]],Ut.THREE_DIGIT_DATA_LENGTH=[["240",Ut.VARIABLE_LENGTH,30],["241",Ut.VARIABLE_LENGTH,30],["242",Ut.VARIABLE_LENGTH,6],["250",Ut.VARIABLE_LENGTH,30],["251",Ut.VARIABLE_LENGTH,30],["253",Ut.VARIABLE_LENGTH,17],["254",Ut.VARIABLE_LENGTH,20],["400",Ut.VARIABLE_LENGTH,30],["401",Ut.VARIABLE_LENGTH,30],["402",17],["403",Ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ut.VARIABLE_LENGTH,20],["421",Ut.VARIABLE_LENGTH,15],["422",3],["423",Ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ut.VARIABLE_LENGTH,15],["391",Ut.VARIABLE_LENGTH,18],["392",Ut.VARIABLE_LENGTH,15],["393",Ut.VARIABLE_LENGTH,18],["703",Ut.VARIABLE_LENGTH,30]],Ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ut.VARIABLE_LENGTH,20],["8003",Ut.VARIABLE_LENGTH,30],["8004",Ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ut.VARIABLE_LENGTH,30],["8008",Ut.VARIABLE_LENGTH,12],["8018",18],["8020",Ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ut.VARIABLE_LENGTH,70],["8200",Ut.VARIABLE_LENGTH,70]];class Ht{constructor(t){this.buffer=new y,this.information=t}decodeAllCodes(t,e){let r=e,n=null;for(;;){let e=this.decodeGeneralPurposeField(r,n),i=Ut.parseFieldsInGeneralPurpose(e.getNewString());if(null!=i&&t.append(i),n=e.isRemaining()?""+e.getRemainingValue():null,r===e.getNewPosition())break;r=e.getNewPosition()}return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new kt(this.information.getSize(),0===e?kt.FNC1:e-1,kt.FNC1)}let e=this.extractNumericValueFromBitArray(t,7);return new kt(t+7,(e-8)/11,(e-8)%11)}extractNumericValueFromBitArray(t,e){return Ht.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,r){let n=0;for(let i=0;i<r;++i)t.get(e+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new xt(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new xt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let r=this.current.getPosition();if(this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished()),r===this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new xt(this.current.getPosition(),this.buffer.toString()):new xt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Pt(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new xt(this.current.getPosition(),this.buffer.toString());return new Pt(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Pt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new xt(this.current.getPosition(),this.buffer.toString());return new Pt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Pt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new xt(this.current.getPosition(),this.buffer.toString());return new Pt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Pt(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Ft(t+5,Ft.FNC1);if(e>=5&&e<15)return new Ft(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new Ft(t+7,""+(n+1));if(n>=90&&n<116)return new Ft(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new E}return new Ft(t+8,r)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Ft(t+5,Ft.FNC1);if(e>=5&&e<15)return new Ft(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new Ft(t+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new $("Decoding invalid alphanumeric value: "+n)}return new Ft(t+6,r)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class Vt{constructor(t){this.information=t,this.generalDecoder=new Ht(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class zt extends Vt{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)}encodeCompressedGtinWithoutAI(t,e,r){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*r,10);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n)}zt.appendCheckDigit(t,r)}static appendCheckDigit(t,e){let r=0;for(let n=0;n<13;n++){let i=t.charAt(n+e).charCodeAt(0)-"0".charCodeAt(0);r+=0==(1&n)?3*i:i}r=10-r%10,10===r&&(r=0),t.append(r)}}zt.GTIN_SIZE=40;class Gt extends zt{constructor(t){super(t)}parseInformation(){let t=new y;t.append("(01)");let e=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Gt.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,Gt.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,Gt.HEADER_SIZE+44)}}Gt.HEADER_SIZE=4;class Yt extends Vt{constructor(t){super(t)}parseInformation(){let t=new y;return this.getGeneralDecoder().decodeAllCodes(t,Yt.HEADER_SIZE)}}Yt.HEADER_SIZE=5;class Xt extends zt{constructor(t){super(t)}encodeCompressedWeight(t,e,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);let i=this.checkWeight(n),o=1e5;for(let e=0;e<5;++e)i/o==0&&t.append("0"),o/=10;t.append(i)}}class Wt extends Xt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Wt.HEADER_SIZE+Xt.GTIN_SIZE+Wt.WEIGHT_SIZE)throw new D;let t=new y;return this.encodeCompressedGtin(t,Wt.HEADER_SIZE),this.encodeCompressedWeight(t,Wt.HEADER_SIZE+Xt.GTIN_SIZE,Wt.WEIGHT_SIZE),t.toString()}}Wt.HEADER_SIZE=5,Wt.WEIGHT_SIZE=15;class jt extends Wt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Zt extends Wt{constructor(t){super(t)}addWeightCode(t,e){e<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Qt extends zt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qt.HEADER_SIZE+zt.GTIN_SIZE)throw new D;let t=new y;this.encodeCompressedGtin(t,Qt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+zt.GTIN_SIZE,Qt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Qt.HEADER_SIZE+zt.GTIN_SIZE+Qt.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}Qt.HEADER_SIZE=8,Qt.LAST_DIGIT_SIZE=2;class Kt extends zt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Kt.HEADER_SIZE+zt.GTIN_SIZE)throw new D;let t=new y;this.encodeCompressedGtin(t,Kt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Kt.HEADER_SIZE+zt.GTIN_SIZE,Kt.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Kt.HEADER_SIZE+zt.GTIN_SIZE+Kt.LAST_DIGIT_SIZE,Kt.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(Kt.HEADER_SIZE+zt.GTIN_SIZE+Kt.LAST_DIGIT_SIZE+Kt.FIRST_THREE_DIGITS_SIZE,null);return t.append(n.getNewString()),t.toString()}}Kt.HEADER_SIZE=8,Kt.LAST_DIGIT_SIZE=2,Kt.FIRST_THREE_DIGITS_SIZE=10;class qt extends Xt{constructor(t,e,r){super(t),this.dateCode=r,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE+qt.DATE_SIZE)throw new D;let t=new y;return this.encodeCompressedGtin(t,qt.HEADER_SIZE),this.encodeCompressedWeight(t,qt.HEADER_SIZE+qt.GTIN_SIZE,qt.WEIGHT_SIZE),this.encodeCompressedDate(t,qt.HEADER_SIZE+qt.GTIN_SIZE+qt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,qt.DATE_SIZE);if(38400==r)return;t.append("("),t.append(this.dateCode),t.append(")");let n=r%32;r/=32;let i=r%12+1;r/=12;let o=r;o/10==0&&t.append("0"),t.append(o),i/10==0&&t.append("0"),t.append(i),n/10==0&&t.append("0"),t.append(n)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}function Jt(t){try{if(t.get(1))return new Gt(t);if(!t.get(2))return new Yt(t);switch(Ht.extractNumericValueFromBitArray(t,1,4)){case 4:return new jt(t);case 5:return new Zt(t)}switch(Ht.extractNumericValueFromBitArray(t,1,5)){case 12:return new Qt(t);case 13:return new Kt(t)}switch(Ht.extractNumericValueFromBitArray(t,1,7)){case 56:return new qt(t,"310","11");case 57:return new qt(t,"320","11");case 58:return new qt(t,"310","13");case 59:return new qt(t,"320","13");case 60:return new qt(t,"310","15");case 61:return new qt(t,"320","15");case 62:return new qt(t,"310","17");case 63:return new qt(t,"320","17")}}catch(e){throw console.log(e),new $("unknown decoder: "+t)}}qt.HEADER_SIZE=8,qt.WEIGHT_SIZE=20,qt.DATE_SIZE=16;class $t{constructor(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof $t&&$t.equalsOrNull(t.leftchar,e.leftchar)&&$t.equalsOrNull(t.rightchar,e.rightchar)&&$t.equalsOrNull(t.finderpattern,e.finderpattern)}static equalsOrNull(t,e){return null===t?null===e:$t.equals(t,e)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class te{constructor(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof te&&this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed}checkEqualitity(t,e){if(!t||!e)return;let r;return t.forEach(((t,n)=>{e.forEach((e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)}))})),r}}class ee extends Rt{constructor(t){super(...arguments),this.pairs=new Array(ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===t}decodeRow(t,e,r){this.pairs.length=0,this.startFromEven=!1;try{return ee.constructResult(this.decodeRow2pairs(t,e))}catch(t){this.verbose&&console.log(t)}return this.pairs.length=0,this.startFromEven=!0,ee.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(t){if(t instanceof D){if(!this.pairs.length)throw new D;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new D}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(t){this.verbose&&console.log(t)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let r=e;r<this.rows.length;r++){let e=this.rows[r];this.pairs.length=0;for(let e of t)this.pairs.push(e.getPairs());if(this.pairs.push(e.getPairs()),!ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let n=new Array(t);n.push(e);try{return this.checkRows(n,r+1)}catch(t){this.verbose&&console.log(t)}}throw new D}static isValidSequence(t){for(let e of ee.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n].getFinderPattern().getValue()!=e[n]){r=!1;break}if(r)return!0}return!1}storeRow(t,e){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let e=this.rows[r];if(e.getRowNumber()>t){i=e.isEquivalent(this.pairs);break}n=e.isEquivalent(this.pairs),r++}i||n||ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new te(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let r of e)if(r.getPairs().length!==t.length)for(let e of r.getPairs())for(let r of t)if($t.equals(e,r))break}static isPartialRow(t,e){for(let r of e){let e=!0;for(let n of t){let t=!1;for(let e of r.getPairs())if(n.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=Jt(Lt.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints(),i=[r[0],r[1],n[0],n[1]];return new x(e,null,null,i,U.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let t=1;t<this.pairs.size();++t){let e=this.pairs.get(t);n+=e.getLeftChar().getChecksumPortion(),i++;let r=e.getRightChar();null!=r&&(n+=r.getChecksumPortion(),i++)}return n%=211,211*(i-4)+n==e.getValue()}static getNextSecondBar(t,e){let r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r}retrieveNextPair(t,e,r){let n,i=e.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(t,e,s),n=this.parseFoundFinderPattern(t,r,i),null==n?s=ee.getNextSecondBar(t,this.startEnd[0]):o=!1}while(o);let a,c=this.decodeDataCharacter(t,n,i,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new D;try{a=this.decodeDataCharacter(t,n,i,!1)}catch(t){a=null,this.verbose&&console.log(t)}return new $t(c,a,n,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i,o=t.getSize();i=r>=0?r:this.isEmptyPair(e)?0:e[e.length-1].getFinderPattern().getStartEnd()[1];let s=e.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;i<o&&(a=!t.get(i),a);)i++;let c=0,l=i;for(let e=i;e<o;e++)if(t.get(e)!=a)n[c]++;else{if(3==c){if(s&&ee.reverseCounters(n),ee.isFinderPattern(n))return this.startEnd[0]=l,void(this.startEnd[1]=e);s&&ee.reverseCounters(n),l+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,c--}else c++;n[c]=1,a=!a}throw new D}static reverseCounters(t){let e=t.length;for(let r=0;r<e/2;++r){let n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}}parseFoundFinderPattern(t,e,r){let n,i,o;if(r){let e=this.startEnd[0]-1;for(;e>=0&&!t.get(e);)e--;e++,n=this.startEnd[0]-e,i=e,o=this.startEnd[1]}else i=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),n=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();d.arraycopy(a,0,a,1,a.length-1),a[0]=n;try{s=this.parseFinderValue(a,ee.FINDER_PATTERNS)}catch(t){return null}return new bt(s,[i,o],i,o,e)}decodeDataCharacter(t,e,r,n){let i=this.getDataCharacterCounters();for(let t=0;t<i.length;t++)i[t]=0;if(n)ee.recordPatternInReverse(t,e.getStartEnd()[0],i);else{ee.recordPattern(t,e.getStartEnd()[1],i);for(let t=0,e=i.length-1;t<e;t++,e--){let r=i[t];i[t]=i[e],i[e]=r}}let o=rt.sum(new Int32Array(i))/17,s=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(o-s)/s>.3)throw new D;let a=this.getOddCounts(),c=this.getEvenCounts(),l=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let t=0;t<i.length;t++){let e=1*i[t]/o,r=e+.5;if(r<1){if(e<.3)throw new D;r=1}else if(r>8){if(e>8.7)throw new D;r=8}let n=t/2;0==(1&t)?(a[n]=r,l[n]=e-r):(c[n]=r,h[n]=e-r)}this.adjustOddEvenCounts(17);let u=4*e.getValue()+(r?0:2)+(n?0:1)-1,d=0,f=0;for(let t=a.length-1;t>=0;t--){if(ee.isNotA1left(e,r,n)){let e=ee.WEIGHTS[u][2*t];f+=a[t]*e}d+=a[t]}let g=0;for(let t=c.length-1;t>=0;t--)if(ee.isNotA1left(e,r,n)){let e=ee.WEIGHTS[u][2*t+1];g+=c[t]*e}let w=f+g;if(0!=(1&d)||d>13||d<4)throw new D;let m=(13-d)/2,p=ee.SYMBOL_WIDEST[m],A=9-p,C=Bt.getRSSvalue(a,p,!0),E=Bt.getRSSvalue(c,A,!1),I=ee.EVEN_TOTAL_SUBSET[m],S=ee.GSUM[m];return new Ot(C*I+E+S,w)}static isNotA1left(t,e,r){return!(0==t.getValue()&&e&&r)}adjustOddEvenCounts(t){let e=rt.sum(new Int32Array(this.getOddCounts())),r=rt.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;e>13?i=!0:e<4&&(n=!0);let o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);let a=e+r-t,c=1==(1&e),l=0==(1&r);if(1==a)if(c){if(l)throw new D;i=!0}else{if(!l)throw new D;s=!0}else if(-1==a)if(c){if(l)throw new D;n=!0}else{if(!l)throw new D;o=!0}else{if(0!=a)throw new D;if(c){if(!l)throw new D;e<r?(n=!0,s=!0):(i=!0,o=!0)}else if(l)throw new D}if(n){if(i)throw new D;ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new D;ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ee.SYMBOL_WIDEST=[7,5,4,3,1],ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ee.GSUM=[0,348,1388,2948,3988],ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ee.FINDER_PAT_A=0,ee.FINDER_PAT_B=1,ee.FINDER_PAT_C=2,ee.FINDER_PAT_D=3,ee.FINDER_PAT_E=4,ee.FINDER_PAT_F=5,ee.FINDER_PATTERN_SEQUENCES=[[ee.FINDER_PAT_A,ee.FINDER_PAT_A],[ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B],[ee.FINDER_PAT_A,ee.FINDER_PAT_C,ee.FINDER_PAT_B,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_C],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F]],ee.MAX_PAIRS=11;class re extends Ot{constructor(t,e,r){super(t,e),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ne extends Rt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,r){const n=this.decodePair(e,!1,t,r);ne.addOrTally(this.possibleLeftPairs,n),e.reverse();let i=this.decodePair(e,!0,t,r);ne.addOrTally(this.possibleRightPairs,i),e.reverse();for(let t of this.possibleLeftPairs)if(t.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&ne.checkChecksum(t,e))return ne.constructResult(t,e);throw new D}static addOrTally(t,e){if(null==e)return;let r=!1;for(let n of t)if(n.getValue()===e.getValue()){n.incrementCount(),r=!0;break}r||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let r=4537077*t.getValue()+e.getValue(),n=new String(r).toString(),i=new y;for(let t=13-n.length;t>0;t--)i.append("0");i.append(n);let o=0;for(let t=0;t<13;t++){let e=i.charAt(t).charCodeAt(0)-"0".charCodeAt(0);o+=0==(1&t)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=t.getFinderPattern().getResultPoints(),a=e.getFinderPattern().getResultPoints();return new x(i.toString(),null,0,[s[0],s[1],a[0],a[1]],U.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(t,e,r,n){try{let i=this.findFinderPattern(t,e),o=this.parseFoundFinderPattern(t,r,e,i),s=null==n?null:n.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=s){let n=(i[0]+i[1])/2;e&&(n=t.getSize()-1-n),s.foundPossibleResultPoint(new it(n,r))}let a=this.decodeDataCharacter(t,o,!0),c=this.decodeDataCharacter(t,o,!1);return new re(1597*a.getValue()+c.getValue(),a.getChecksumPortion()+4*c.getChecksumPortion(),o)}catch(t){return null}}decodeDataCharacter(t,e,r){let n=this.getDataCharacterCounters();for(let t=0;t<n.length;t++)n[t]=0;if(r)wt.recordPatternInReverse(t,e.getStartEnd()[0],n);else{wt.recordPattern(t,e.getStartEnd()[1]+1,n);for(let t=0,e=n.length-1;t<e;t++,e--){let r=n[t];n[t]=n[e],n[e]=r}}let i=r?16:15,o=rt.sum(new Int32Array(n))/i,s=this.getOddCounts(),a=this.getEvenCounts(),c=this.getOddRoundingErrors(),l=this.getEvenRoundingErrors();for(let t=0;t<n.length;t++){let e=n[t]/o,r=Math.floor(e+.5);r<1?r=1:r>8&&(r=8);let i=Math.floor(t/2);0==(1&t)?(s[i]=r,c[i]=e-r):(a[i]=r,l[i]=e-r)}this.adjustOddEvenCounts(r,i);let h=0,u=0;for(let t=s.length-1;t>=0;t--)u*=9,u+=s[t],h+=s[t];let d=0,f=0;for(let t=a.length-1;t>=0;t--)d*=9,d+=a[t],f+=a[t];let g=u+3*d;if(r){if(0!=(1&h)||h>12||h<4)throw new D;let t=(12-h)/2,e=ne.OUTSIDE_ODD_WIDEST[t],r=9-e,n=Bt.getRSSvalue(s,e,!1),i=Bt.getRSSvalue(a,r,!0),o=ne.OUTSIDE_EVEN_TOTAL_SUBSET[t],c=ne.OUTSIDE_GSUM[t];return new Ot(n*o+i+c,g)}{if(0!=(1&f)||f>10||f<4)throw new D;let t=(10-f)/2,e=ne.INSIDE_ODD_WIDEST[t],r=9-e,n=Bt.getRSSvalue(s,e,!0),i=Bt.getRSSvalue(a,r,!1),o=ne.INSIDE_ODD_TOTAL_SUBSET[t],c=ne.INSIDE_GSUM[t];return new Ot(i*o+n+c,g)}}findFinderPattern(t,e){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=t.getSize(),i=!1,o=0;for(;o<n&&(i=!t.get(o),e!==i);)o++;let s=0,a=o;for(let e=o;e<n;e++)if(t.get(e)!==i)r[s]++;else{if(3===s){if(Rt.isFinderPattern(r))return[a,e];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,s--}else s++;r[s]=1,i=!i}throw new D}parseFoundFinderPattern(t,e,r,n){let i=t.get(n[0]),o=n[0]-1;for(;o>=0&&i!==t.get(o);)o--;o++;const s=n[0]-o,a=this.getDecodeFinderCounters(),c=new Int32Array(a.length);d.arraycopy(a,0,c,1,a.length-1),c[0]=s;const l=this.parseFinderValue(c,ne.FINDER_PATTERNS);let h=o,u=n[1];return r&&(h=t.getSize()-1-h,u=t.getSize()-1-u),new bt(l,[o,n[1]],h,u,e)}adjustOddEvenCounts(t,e){let r=rt.sum(new Int32Array(this.getOddCounts())),n=rt.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;t?(r>12?o=!0:r<4&&(i=!0),n>12?a=!0:n<4&&(s=!0)):(r>11?o=!0:r<5&&(i=!0),n>10?a=!0:n<4&&(s=!0));let c=r+n-e,l=(1&r)==(t?1:0),h=1==(1&n);if(1===c)if(l){if(h)throw new D;o=!0}else{if(!h)throw new D;a=!0}else if(-1===c)if(l){if(h)throw new D;i=!0}else{if(!h)throw new D;s=!0}else{if(0!==c)throw new D;if(l){if(!h)throw new D;r<n?(i=!0,a=!0):(o=!0,s=!0)}else if(h)throw new D}if(i){if(o)throw new D;Rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new D;Rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ne.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ne.OUTSIDE_GSUM=[0,161,961,2015,2715],ne.INSIDE_GSUM=[0,336,1036,1516],ne.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ne.INSIDE_ODD_WIDEST=[2,4,6,8],ne.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ie extends wt{constructor(t,e){super(),this.readers=[],this.verbose=!0===e;const r=t?t.get(C.POSSIBLE_FORMATS):null,n=t&&void 0!==t.get(C.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(U.EAN_13)||r.includes(U.UPC_A)||r.includes(U.EAN_8)||r.includes(U.UPC_E))&&this.readers.push(new Mt(t)),r.includes(U.CODE_39)&&this.readers.push(new pt(n)),r.includes(U.CODE_128)&&this.readers.push(new mt),r.includes(U.ITF)&&this.readers.push(new At),r.includes(U.RSS_14)&&this.readers.push(new ne),r.includes(U.RSS_EXPANDED)&&this.readers.push(new ee(this.verbose))):(this.readers.push(new Mt(t)),this.readers.push(new pt),this.readers.push(new Mt(t)),this.readers.push(new mt),this.readers.push(new At),this.readers.push(new ne),this.readers.push(new ee(this.verbose)))}decodeRow(t,e,r){for(let n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(t,e,r)}catch(t){}throw new D}reset(){this.readers.forEach((t=>t.reset()))}}class oe{constructor(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class se{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ae{constructor(t,e,r,n,i,o){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),c=o.getECBlocks();for(let t of c)s+=t.getCount()*(t.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!=(1&t)||0!=(1&e))throw new E;for(let r of ae.VERSIONS)if(r.symbolSizeRows===t&&r.symbolSizeColumns===e)return r;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new ae(1,10,10,8,8,new oe(5,new se(1,3))),new ae(2,12,12,10,10,new oe(7,new se(1,5))),new ae(3,14,14,12,12,new oe(10,new se(1,8))),new ae(4,16,16,14,14,new oe(12,new se(1,12))),new ae(5,18,18,16,16,new oe(14,new se(1,18))),new ae(6,20,20,18,18,new oe(18,new se(1,22))),new ae(7,22,22,20,20,new oe(20,new se(1,30))),new ae(8,24,24,22,22,new oe(24,new se(1,36))),new ae(9,26,26,24,24,new oe(28,new se(1,44))),new ae(10,32,32,14,14,new oe(36,new se(1,62))),new ae(11,36,36,16,16,new oe(42,new se(1,86))),new ae(12,40,40,18,18,new oe(48,new se(1,114))),new ae(13,44,44,20,20,new oe(56,new se(1,144))),new ae(14,48,48,22,22,new oe(68,new se(1,174))),new ae(15,52,52,24,24,new oe(42,new se(2,102))),new ae(16,64,64,14,14,new oe(56,new se(2,140))),new ae(17,72,72,16,16,new oe(36,new se(4,92))),new ae(18,80,80,18,18,new oe(48,new se(4,114))),new ae(19,88,88,20,20,new oe(56,new se(4,144))),new ae(20,96,96,22,22,new oe(68,new se(4,174))),new ae(21,104,104,24,24,new oe(56,new se(6,136))),new ae(22,120,120,18,18,new oe(68,new se(6,175))),new ae(23,132,132,20,20,new oe(62,new se(8,163))),new ae(24,144,144,22,22,new oe(62,new se(8,156),new se(2,155))),new ae(25,8,18,6,16,new oe(7,new se(1,5))),new ae(26,8,32,6,14,new oe(11,new se(1,10))),new ae(27,12,26,10,24,new oe(14,new se(1,16))),new ae(28,12,36,10,16,new oe(18,new se(1,22))),new ae(29,16,36,14,16,new oe(24,new se(1,32))),new ae(30,16,48,14,22,new oe(28,new se(1,49)))]}}ae.VERSIONS=ae.buildVersions();class ce{constructor(t){const e=t.getHeight();if(e<8||e>144||0!=(1&e))throw new E;this.version=ce.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new N(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),r=t.getWidth();return ae.getVersionForDimensions(e,r)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,r=4,n=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,c=!1,l=!1;do{if(r!==i||0!==n||s)if(r!==i-2||0!==n||0==(3&o)||a)if(r!==i+4||2!==n||0!=(7&o)||c)if(r!==i-2||0!==n||4!=(7&o)||l){do{r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,i,o)),r-=2,n+=2}while(r>=0&&n<o);r+=1,n+=3;do{r>=0&&n<o&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,i,o)),r+=2,n-=2}while(r<i&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(i,o),r-=2,n+=2,l=!0;else t[e++]=255&this.readCorner3(i,o),r-=2,n+=2,c=!0;else t[e++]=255&this.readCorner2(i,o),r-=2,n+=2,a=!0;else t[e++]=255&this.readCorner1(i,o),r-=2,n+=2,s=!0}while(r<i||n<o);if(e!==this.version.getTotalCodewords())throw new E;return t}readModule(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,r,n){let i=0;return this.readModule(t-2,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t-2,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e,r,n)&&(i|=1),i<<=1,this.readModule(t,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t,e,r,n)&&(i|=1),i}readCorner1(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}readCorner2(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner3(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner4(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new c("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=e/n|0,s=r/i|0,a=new N(s*i,o*n);for(let e=0;e<o;++e){const r=e*n;for(let o=0;o<s;++o){const s=o*i;for(let c=0;c<n;++c){const l=e*(n+2)+1+c,h=r+c;for(let e=0;e<i;++e){const r=o*(i+2)+1+e;if(t.get(r,l)){const t=s+e;a.set(t,h)}}}}}return a}}class le{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const r=e.getECBlocks();let n=0;const i=r.getECBlocks();for(let t of i)n+=t.getCount();const o=new Array(n);let s=0;for(let t of i)for(let e=0;e<t.getCount();e++){const e=t.getDataCodewords(),n=r.getECCodewords()+e;o[s++]=new le(e,new Uint8Array(n))}const a=o[0].codewords.length-r.getECCodewords(),l=a-1;let h=0;for(let e=0;e<l;e++)for(let r=0;r<s;r++)o[r].codewords[e]=t[h++];const u=24===e.getVersionNumber(),d=u?8:s;for(let e=0;e<d;e++)o[e].codewords[a-1]=t[h++];const f=o[0].codewords.length;for(let e=a;e<f;e++)for(let r=0;r<s;r++){const n=u?(r+8)%s:r,i=u&&n>7?e-1:e;o[n].codewords[i]=t[h++]}if(h!==t.length)throw new c;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class he{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new c(""+t);let e=0,r=this.bitOffset,n=this.byteOffset;const i=this.bytes;if(r>0){const o=8-r,s=t<o?t:o,a=o-s,c=255>>8-s<<a;e=(i[n]&c)>>a,t-=s,r+=s,8===r&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&i[n],n++,t-=8;if(t>0){const o=8-t,s=255>>o<<o;e=e<<t|(i[n]&s)>>o,r+=t}}return this.bitOffset=r,this.byteOffset=n,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(V||(V={}));class ue{static decode(t){const e=new he(t),r=new y,n=new y,i=new Array;let o=V.ASCII_ENCODE;do{if(o===V.ASCII_ENCODE)o=this.decodeAsciiSegment(e,r,n);else{switch(o){case V.C40_ENCODE:this.decodeC40Segment(e,r);break;case V.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case V.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case V.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case V.BASE256_ENCODE:this.decodeBase256Segment(e,r,i);break;default:throw new E}o=V.ASCII_ENCODE}}while(o!==V.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new j(t,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(t,e,r){let n=!1;do{let i=t.readBits(8);if(0===i)throw new E;if(i<=128)return n&&(i+=128),e.append(String.fromCharCode(i-1)),V.ASCII_ENCODE;if(129===i)return V.PAD_ENCODE;if(i<=229){const t=i-130;t<10&&e.append("0"),e.append(""+t)}else switch(i){case 230:return V.C40_ENCODE;case 231:return V.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return V.ANSIX12_ENCODE;case 239:return V.TEXT_ENCODE;case 240:return V.EDIFACT_ENCODE;default:if(254!==i||0!==t.available())throw new E}}while(t.available()>0);return V.ASCII_ENCODE}static decodeC40Segment(t,e){let r=!1;const n=[];let i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),n);for(let t=0;t<3;t++){const o=n[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new E;{const t=this.C40_BASIC_SET_CHARS[o];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(o+128)),r=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[o];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:r?(e.append(String.fromCharCode(o+224)),r=!1):e.append(String.fromCharCode(o+96)),i=0;break;default:throw new E}}}while(t.available()>0)}static decodeTextSegment(t,e){let r=!1,n=[],i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),n);for(let t=0;t<3;t++){const o=n[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const t=this.TEXT_BASIC_SET_CHARS[o];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(o+128)),r=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[o];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const t=this.TEXT_SHIFT3_SET_CHARS[o];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t),i=0}break;default:throw new E}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const r=[];do{if(8===t.available())return;const n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(let t=0;t<3;t++){const n=r[t];switch(n){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(n<14)e.append(String.fromCharCode(n+44));else{if(!(n<40))throw new E;e.append(String.fromCharCode(n+51))}}}}while(t.available()>0)}static parseTwoBytes(t,e,r){let n=(t<<8)+e-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let r=0;r<4;r++){let r=t.readBits(6);if(31===r){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0==(32&r)&&(r|=64),e.append(String.fromCharCode(r))}}while(t.available()>0)}static decodeBase256Segment(t,e,r){let n=1+t.getByteOffset();const i=this.unrandomize255State(t.readBits(8),n++);let o;if(o=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),n++),o<0)throw new E;const s=new Uint8Array(o);for(let e=0;e<o;e++){if(t.available()<8)throw new E;s[e]=this.unrandomize255State(t.readBits(8),n++)}r.push(s);try{e.append(_.decode(s,T.ISO88591))}catch(t){throw new $("Platform does not support required encoding: "+t.message)}}static unrandomize255State(t,e){const r=t-(149*e%255+1);return r>=0?r:r+256}}ue.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ue.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ue.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ue.TEXT_SHIFT2_SET_CHARS=ue.C40_SHIFT2_SET_CHARS,ue.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class de{constructor(){this.rsDecoder=new tt(q.DATA_MATRIX_FIELD_256)}decode(t){const e=new ce(t),r=e.getVersion(),n=e.readCodewords(),i=le.getDataBlocks(n,r);let o=0;for(let t of i)o+=t.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let t=0;t<a;t++){const e=i[t],r=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(r,n);for(let e=0;e<n;e++)s[e*a+t]=r[e]}return ue.decode(s)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new h}for(let n=0;n<e;n++)t[n]=r[n]}}class fe{constructor(t){this.image=t,this.rectangleDetector=new at(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new D;e=this.shiftToModuleCenter(e);const r=e[0],n=e[1],i=e[2],o=e[3];let s=this.transitionsBetween(r,o)+1,a=this.transitionsBetween(i,o)+1;1==(1&s)&&(s+=1),1==(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let c=fe.sampleGrid(this.image,r,n,i,o,s,a);return new ot(c,[r,n,i,o])}static shiftPoint(t,e,r){let n=(e.getX()-t.getX())/(r+1),i=(e.getY()-t.getY())/(r+1);return new it(t.getX()+n,t.getY()+i)}static moveAway(t,e,r){let n=t.getX(),i=t.getY();return n<e?n-=1:n+=1,i<r?i-=1:i+=1,new it(n,i)}detectSolid1(t){let e=t[0],r=t[1],n=t[3],i=t[2],o=this.transitionsBetween(e,r),s=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),c=this.transitionsBetween(i,e),l=o,h=[i,e,r,n];return l>s&&(l=s,h[0]=e,h[1]=r,h[2]=n,h[3]=i),l>a&&(l=a,h[0]=r,h[1]=n,h[2]=i,h[3]=e),l>c&&(h[0]=n,h[1]=i,h[2]=e,h[3]=r),h}detectSolid2(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=this.transitionsBetween(e,i),s=fe.shiftPoint(r,n,4*(o+1)),a=fe.shiftPoint(n,r,4*(o+1));return this.transitionsBetween(s,e)<this.transitionsBetween(a,i)?(t[0]=e,t[1]=r,t[2]=n,t[3]=i):(t[0]=r,t[1]=n,t[2]=i,t[3]=e),t}correctTopRight(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=this.transitionsBetween(e,i),s=this.transitionsBetween(r,i),a=fe.shiftPoint(e,r,4*(s+1)),c=fe.shiftPoint(n,r,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(c,i);let l=new it(i.getX()+(n.getX()-r.getX())/(o+1),i.getY()+(n.getY()-r.getY())/(o+1)),h=new it(i.getX()+(e.getX()-r.getX())/(s+1),i.getY()+(e.getY()-r.getY())/(s+1));return this.isValid(l)?this.isValid(h)?this.transitionsBetween(a,l)+this.transitionsBetween(c,l)>this.transitionsBetween(a,h)+this.transitionsBetween(c,h)?l:h:l:this.isValid(h)?h:null}shiftToModuleCenter(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=this.transitionsBetween(e,i)+1,s=this.transitionsBetween(n,i)+1,a=fe.shiftPoint(e,r,4*s),c=fe.shiftPoint(n,r,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(c,i)+1,1==(1&o)&&(o+=1),1==(1&s)&&(s+=1);let l,h,u=(e.getX()+r.getX()+n.getX()+i.getX())/4,d=(e.getY()+r.getY()+n.getY()+i.getY())/4;return e=fe.moveAway(e,u,d),r=fe.moveAway(r,u,d),n=fe.moveAway(n,u,d),i=fe.moveAway(i,u,d),a=fe.shiftPoint(e,r,4*s),a=fe.shiftPoint(a,i,4*o),l=fe.shiftPoint(r,e,4*s),l=fe.shiftPoint(l,n,4*o),c=fe.shiftPoint(n,i,4*s),c=fe.shiftPoint(c,r,4*o),h=fe.shiftPoint(i,n,4*s),h=fe.shiftPoint(h,e,4*o),[a,l,c,h]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,r,n,i,o,s){return ut.getInstance().sampleGrid(t,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,e.getX(),e.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(t,e){let r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),s=Math.abs(o-n)>Math.abs(i-r);if(s){let t=r;r=n,n=t,t=i,i=o,o=t}let a=Math.abs(i-r),c=Math.abs(o-n),l=-a/2,h=n<o?1:-1,u=r<i?1:-1,d=0,f=this.image.get(s?n:r,s?r:n);for(let t=r,e=n;t!==i;t+=u){let r=this.image.get(s?e:t,s?t:e);if(r!==f&&(d++,f=r),l+=c,l>0){if(e===o)break;e+=h,l-=a}}return d}}class ge{constructor(){this.decoder=new de}decode(t,e=null){let r,n;if(null!=e&&e.has(C.PURE_BARCODE)){const e=ge.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(e),n=ge.NO_POINTS}else{const e=new fe(t.getBlackMatrix()).detect();r=this.decoder.decode(e.getBits()),n=e.getPoints()}const i=r.getRawBytes(),o=new x(r.getText(),i,8*i.length,n,U.DATA_MATRIX,d.currentTimeMillis()),s=r.getByteSegments();null!=s&&o.putMetadata(W.BYTE_SEGMENTS,s);const a=r.getECLevel();return null!=a&&o.putMetadata(W.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new D;const n=this.moduleSize(e,t);let i=e[1];const o=r[1];let s=e[0];const a=(r[0]-s+1)/n,c=(o-i+1)/n;if(a<=0||c<=0)throw new D;const l=n/2;i+=l,s+=l;const h=new N(a,c);for(let e=0;e<c;e++){const r=i+e*n;for(let i=0;i<a;i++)t.get(s+i*n,r)&&h.set(i,e)}return h}static moduleSize(t,e){const r=e.getWidth();let n=t[0];const i=t[1];for(;n<r&&e.get(n,i);)n++;if(n===r)throw new D;const o=n-t[0];if(0===o)throw new D;return o}}ge.NO_POINTS=[];!function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(z||(z={}));class we{constructor(t,e,r){this.value=t,this.stringValue=e,this.bits=r,we.FOR_BITS.set(r,this),we.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return we.L;case"M":return we.M;case"Q":return we.Q;case"H":return we.H;default:throw new a(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof we))return!1;const e=t;return this.value===e.value}static forBits(t){if(t<0||t>=we.FOR_BITS.size)throw new c;return we.FOR_BITS.get(t)}}we.FOR_BITS=new Map,we.FOR_VALUE=new Map,we.L=new we(z.L,"L",1),we.M=new we(z.M,"M",0),we.Q=new we(z.Q,"Q",3),we.H=new we(z.H,"H",2);class me{constructor(t){this.errorCorrectionLevel=we.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return m.bitCount(t^e)}static decodeFormatInformation(t,e){const r=me.doDecodeFormatInformation(t,e);return null!==r?r:me.doDecodeFormatInformation(t^me.FORMAT_INFO_MASK_QR,e^me.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;for(const i of me.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===t||o===e)return new me(i[1]);let s=me.numBitsDiffering(t,o);s<r&&(n=i[1],r=s),t!==e&&(s=me.numBitsDiffering(e,o),s<r&&(n=i[1],r=s))}return r<=3?new me(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof me))return!1;const e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}me.FORMAT_INFO_MASK_QR=21522,me.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class pe{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const r of e)t+=r.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ae{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ce{constructor(t,e,...r){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=r;let n=0;const i=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const t of o)n+=t.getCount()*(t.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!=1)throw new E;try{return this.getVersionForNumber((t-17)/4)}catch(t){throw new E}}static getVersionForNumber(t){if(t<1||t>40)throw new c;return Ce.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<Ce.VERSION_DECODE_INFO.length;n++){const i=Ce.VERSION_DECODE_INFO[n];if(i===t)return Ce.getVersionForNumber(n+7);const o=me.numBitsDiffering(t,i);o<e&&(r=n+7,e=o)}return e<=3?Ce.getVersionForNumber(r):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new N(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const r=this.alignmentPatternCenters.length;for(let t=0;t<r;t++){const n=this.alignmentPatternCenters[t]-2;for(let i=0;i<r;i++)0===t&&(0===i||i===r-1)||t===r-1&&0===i||e.setRegion(this.alignmentPatternCenters[i]-2,n,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}Ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ce.VERSIONS=[new Ce(1,new Int32Array(0),new pe(7,new Ae(1,19)),new pe(10,new Ae(1,16)),new pe(13,new Ae(1,13)),new pe(17,new Ae(1,9))),new Ce(2,Int32Array.from([6,18]),new pe(10,new Ae(1,34)),new pe(16,new Ae(1,28)),new pe(22,new Ae(1,22)),new pe(28,new Ae(1,16))),new Ce(3,Int32Array.from([6,22]),new pe(15,new Ae(1,55)),new pe(26,new Ae(1,44)),new pe(18,new Ae(2,17)),new pe(22,new Ae(2,13))),new Ce(4,Int32Array.from([6,26]),new pe(20,new Ae(1,80)),new pe(18,new Ae(2,32)),new pe(26,new Ae(2,24)),new pe(16,new Ae(4,9))),new Ce(5,Int32Array.from([6,30]),new pe(26,new Ae(1,108)),new pe(24,new Ae(2,43)),new pe(18,new Ae(2,15),new Ae(2,16)),new pe(22,new Ae(2,11),new Ae(2,12))),new Ce(6,Int32Array.from([6,34]),new pe(18,new Ae(2,68)),new pe(16,new Ae(4,27)),new pe(24,new Ae(4,19)),new pe(28,new Ae(4,15))),new Ce(7,Int32Array.from([6,22,38]),new pe(20,new Ae(2,78)),new pe(18,new Ae(4,31)),new pe(18,new Ae(2,14),new Ae(4,15)),new pe(26,new Ae(4,13),new Ae(1,14))),new Ce(8,Int32Array.from([6,24,42]),new pe(24,new Ae(2,97)),new pe(22,new Ae(2,38),new Ae(2,39)),new pe(22,new Ae(4,18),new Ae(2,19)),new pe(26,new Ae(4,14),new Ae(2,15))),new Ce(9,Int32Array.from([6,26,46]),new pe(30,new Ae(2,116)),new pe(22,new Ae(3,36),new Ae(2,37)),new pe(20,new Ae(4,16),new Ae(4,17)),new pe(24,new Ae(4,12),new Ae(4,13))),new Ce(10,Int32Array.from([6,28,50]),new pe(18,new Ae(2,68),new Ae(2,69)),new pe(26,new Ae(4,43),new Ae(1,44)),new pe(24,new Ae(6,19),new Ae(2,20)),new pe(28,new Ae(6,15),new Ae(2,16))),new Ce(11,Int32Array.from([6,30,54]),new pe(20,new Ae(4,81)),new pe(30,new Ae(1,50),new Ae(4,51)),new pe(28,new Ae(4,22),new Ae(4,23)),new pe(24,new Ae(3,12),new Ae(8,13))),new Ce(12,Int32Array.from([6,32,58]),new pe(24,new Ae(2,92),new Ae(2,93)),new pe(22,new Ae(6,36),new Ae(2,37)),new pe(26,new Ae(4,20),new Ae(6,21)),new pe(28,new Ae(7,14),new Ae(4,15))),new Ce(13,Int32Array.from([6,34,62]),new pe(26,new Ae(4,107)),new pe(22,new Ae(8,37),new Ae(1,38)),new pe(24,new Ae(8,20),new Ae(4,21)),new pe(22,new Ae(12,11),new Ae(4,12))),new Ce(14,Int32Array.from([6,26,46,66]),new pe(30,new Ae(3,115),new Ae(1,116)),new pe(24,new Ae(4,40),new Ae(5,41)),new pe(20,new Ae(11,16),new Ae(5,17)),new pe(24,new Ae(11,12),new Ae(5,13))),new Ce(15,Int32Array.from([6,26,48,70]),new pe(22,new Ae(5,87),new Ae(1,88)),new pe(24,new Ae(5,41),new Ae(5,42)),new pe(30,new Ae(5,24),new Ae(7,25)),new pe(24,new Ae(11,12),new Ae(7,13))),new Ce(16,Int32Array.from([6,26,50,74]),new pe(24,new Ae(5,98),new Ae(1,99)),new pe(28,new Ae(7,45),new Ae(3,46)),new pe(24,new Ae(15,19),new Ae(2,20)),new pe(30,new Ae(3,15),new Ae(13,16))),new Ce(17,Int32Array.from([6,30,54,78]),new pe(28,new Ae(1,107),new Ae(5,108)),new pe(28,new Ae(10,46),new Ae(1,47)),new pe(28,new Ae(1,22),new Ae(15,23)),new pe(28,new Ae(2,14),new Ae(17,15))),new Ce(18,Int32Array.from([6,30,56,82]),new pe(30,new Ae(5,120),new Ae(1,121)),new pe(26,new Ae(9,43),new Ae(4,44)),new pe(28,new Ae(17,22),new Ae(1,23)),new pe(28,new Ae(2,14),new Ae(19,15))),new Ce(19,Int32Array.from([6,30,58,86]),new pe(28,new Ae(3,113),new Ae(4,114)),new pe(26,new Ae(3,44),new Ae(11,45)),new pe(26,new Ae(17,21),new Ae(4,22)),new pe(26,new Ae(9,13),new Ae(16,14))),new Ce(20,Int32Array.from([6,34,62,90]),new pe(28,new Ae(3,107),new Ae(5,108)),new pe(26,new Ae(3,41),new Ae(13,42)),new pe(30,new Ae(15,24),new Ae(5,25)),new pe(28,new Ae(15,15),new Ae(10,16))),new Ce(21,Int32Array.from([6,28,50,72,94]),new pe(28,new Ae(4,116),new Ae(4,117)),new pe(26,new Ae(17,42)),new pe(28,new Ae(17,22),new Ae(6,23)),new pe(30,new Ae(19,16),new Ae(6,17))),new Ce(22,Int32Array.from([6,26,50,74,98]),new pe(28,new Ae(2,111),new Ae(7,112)),new pe(28,new Ae(17,46)),new pe(30,new Ae(7,24),new Ae(16,25)),new pe(24,new Ae(34,13))),new Ce(23,Int32Array.from([6,30,54,78,102]),new pe(30,new Ae(4,121),new Ae(5,122)),new pe(28,new Ae(4,47),new Ae(14,48)),new pe(30,new Ae(11,24),new Ae(14,25)),new pe(30,new Ae(16,15),new Ae(14,16))),new Ce(24,Int32Array.from([6,28,54,80,106]),new pe(30,new Ae(6,117),new Ae(4,118)),new pe(28,new Ae(6,45),new Ae(14,46)),new pe(30,new Ae(11,24),new Ae(16,25)),new pe(30,new Ae(30,16),new Ae(2,17))),new Ce(25,Int32Array.from([6,32,58,84,110]),new pe(26,new Ae(8,106),new Ae(4,107)),new pe(28,new Ae(8,47),new Ae(13,48)),new pe(30,new Ae(7,24),new Ae(22,25)),new pe(30,new Ae(22,15),new Ae(13,16))),new Ce(26,Int32Array.from([6,30,58,86,114]),new pe(28,new Ae(10,114),new Ae(2,115)),new pe(28,new Ae(19,46),new Ae(4,47)),new pe(28,new Ae(28,22),new Ae(6,23)),new pe(30,new Ae(33,16),new Ae(4,17))),new Ce(27,Int32Array.from([6,34,62,90,118]),new pe(30,new Ae(8,122),new Ae(4,123)),new pe(28,new Ae(22,45),new Ae(3,46)),new pe(30,new Ae(8,23),new Ae(26,24)),new pe(30,new Ae(12,15),new Ae(28,16))),new Ce(28,Int32Array.from([6,26,50,74,98,122]),new pe(30,new Ae(3,117),new Ae(10,118)),new pe(28,new Ae(3,45),new Ae(23,46)),new pe(30,new Ae(4,24),new Ae(31,25)),new pe(30,new Ae(11,15),new Ae(31,16))),new Ce(29,Int32Array.from([6,30,54,78,102,126]),new pe(30,new Ae(7,116),new Ae(7,117)),new pe(28,new Ae(21,45),new Ae(7,46)),new pe(30,new Ae(1,23),new Ae(37,24)),new pe(30,new Ae(19,15),new Ae(26,16))),new Ce(30,Int32Array.from([6,26,52,78,104,130]),new pe(30,new Ae(5,115),new Ae(10,116)),new pe(28,new Ae(19,47),new Ae(10,48)),new pe(30,new Ae(15,24),new Ae(25,25)),new pe(30,new Ae(23,15),new Ae(25,16))),new Ce(31,Int32Array.from([6,30,56,82,108,134]),new pe(30,new Ae(13,115),new Ae(3,116)),new pe(28,new Ae(2,46),new Ae(29,47)),new pe(30,new Ae(42,24),new Ae(1,25)),new pe(30,new Ae(23,15),new Ae(28,16))),new Ce(32,Int32Array.from([6,34,60,86,112,138]),new pe(30,new Ae(17,115)),new pe(28,new Ae(10,46),new Ae(23,47)),new pe(30,new Ae(10,24),new Ae(35,25)),new pe(30,new Ae(19,15),new Ae(35,16))),new Ce(33,Int32Array.from([6,30,58,86,114,142]),new pe(30,new Ae(17,115),new Ae(1,116)),new pe(28,new Ae(14,46),new Ae(21,47)),new pe(30,new Ae(29,24),new Ae(19,25)),new pe(30,new Ae(11,15),new Ae(46,16))),new Ce(34,Int32Array.from([6,34,62,90,118,146]),new pe(30,new Ae(13,115),new Ae(6,116)),new pe(28,new Ae(14,46),new Ae(23,47)),new pe(30,new Ae(44,24),new Ae(7,25)),new pe(30,new Ae(59,16),new Ae(1,17))),new Ce(35,Int32Array.from([6,30,54,78,102,126,150]),new pe(30,new Ae(12,121),new Ae(7,122)),new pe(28,new Ae(12,47),new Ae(26,48)),new pe(30,new Ae(39,24),new Ae(14,25)),new pe(30,new Ae(22,15),new Ae(41,16))),new Ce(36,Int32Array.from([6,24,50,76,102,128,154]),new pe(30,new Ae(6,121),new Ae(14,122)),new pe(28,new Ae(6,47),new Ae(34,48)),new pe(30,new Ae(46,24),new Ae(10,25)),new pe(30,new Ae(2,15),new Ae(64,16))),new Ce(37,Int32Array.from([6,28,54,80,106,132,158]),new pe(30,new Ae(17,122),new Ae(4,123)),new pe(28,new Ae(29,46),new Ae(14,47)),new pe(30,new Ae(49,24),new Ae(10,25)),new pe(30,new Ae(24,15),new Ae(46,16))),new Ce(38,Int32Array.from([6,32,58,84,110,136,162]),new pe(30,new Ae(4,122),new Ae(18,123)),new pe(28,new Ae(13,46),new Ae(32,47)),new pe(30,new Ae(48,24),new Ae(14,25)),new pe(30,new Ae(42,15),new Ae(32,16))),new Ce(39,Int32Array.from([6,26,54,82,110,138,166]),new pe(30,new Ae(20,117),new Ae(4,118)),new pe(28,new Ae(40,47),new Ae(7,48)),new pe(30,new Ae(43,24),new Ae(22,25)),new pe(30,new Ae(10,15),new Ae(67,16))),new Ce(40,Int32Array.from([6,30,58,86,114,142,170]),new pe(30,new Ae(19,118),new Ae(6,119)),new pe(28,new Ae(18,47),new Ae(31,48)),new pe(30,new Ae(34,24),new Ae(34,25)),new pe(30,new Ae(20,15),new Ae(61,16)))],function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class Ee{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let r=0;r<e;r++)for(let n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)}}Ee.values=new Map([[G.DATA_MASK_000,new Ee(G.DATA_MASK_000,((t,e)=>0==(t+e&1)))],[G.DATA_MASK_001,new Ee(G.DATA_MASK_001,((t,e)=>0==(1&t)))],[G.DATA_MASK_010,new Ee(G.DATA_MASK_010,((t,e)=>e%3==0))],[G.DATA_MASK_011,new Ee(G.DATA_MASK_011,((t,e)=>(t+e)%3==0))],[G.DATA_MASK_100,new Ee(G.DATA_MASK_100,((t,e)=>0==(Math.floor(t/2)+Math.floor(e/3)&1)))],[G.DATA_MASK_101,new Ee(G.DATA_MASK_101,((t,e)=>t*e%6==0))],[G.DATA_MASK_110,new Ee(G.DATA_MASK_110,((t,e)=>t*e%6<3))],[G.DATA_MASK_111,new Ee(G.DATA_MASK_111,((t,e)=>0==(t+e+t*e%3&1)))]]);class Ie{constructor(t){const e=t.getHeight();if(e<21||1!=(3&e))throw new E;this.bitMatrix=t}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let e=5;e>=0;e--)t=this.copyBit(8,e,t);const e=this.bitMatrix.getHeight();let r=0;const n=e-7;for(let t=e-1;t>=n;t--)r=this.copyBit(8,t,r);for(let t=e-8;t<e;t++)r=this.copyBit(t,8,r);if(this.parsedFormatInfo=me.decodeFormatInformation(t,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return Ce.getVersionForNumber(e);let r=0;const n=t-11;for(let e=5;e>=0;e--)for(let i=t-9;i>=n;i--)r=this.copyBit(i,e,r);let i=Ce.decodeVersionInformation(r);if(null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;r=0;for(let e=5;e>=0;e--)for(let i=t-9;i>=n;i--)r=this.copyBit(e,i,r);if(i=Ce.decodeVersionInformation(r),null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;throw new E}copyBit(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),r=Ee.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const i=e.buildFunctionPattern();let o=!0;const s=new Uint8Array(e.getTotalCodewords());let a=0,c=0,l=0;for(let t=n-1;t>0;t-=2){6===t&&t--;for(let e=0;e<n;e++){const r=o?n-1-e:e;for(let e=0;e<2;e++)i.get(t-e,r)||(l++,c<<=1,this.bitMatrix.get(t-e,r)&&(c|=1),8===l&&(s[a++]=c,l=0,c=0))}o=!o}if(a!==e.getTotalCodewords())throw new E;return s}remask(){if(null===this.parsedFormatInfo)return;const t=Ee.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,r=t.getWidth();e<r;e++)for(let r=e+1,n=t.getHeight();r<n;r++)t.get(e,r)!==t.get(r,e)&&(t.flip(r,e),t.flip(e,r))}}class Se{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,r){if(t.length!==e.getTotalCodewords())throw new c;const n=e.getECBlocksForLevel(r);let i=0;const o=n.getECBlocks();for(const t of o)i+=t.getCount();const s=new Array(i);let a=0;for(const t of o)for(let e=0;e<t.getCount();e++){const e=t.getDataCodewords(),r=n.getECCodewordsPerBlock()+e;s[a++]=new Se(e,new Uint8Array(r))}const l=s[0].codewords.length;let h=s.length-1;for(;h>=0&&s[h].codewords.length!==l;)h--;h++;const u=l-n.getECCodewordsPerBlock();let d=0;for(let e=0;e<u;e++)for(let r=0;r<a;r++)s[r].codewords[e]=t[d++];for(let e=h;e<a;e++)s[e].codewords[u]=t[d++];const f=s[0].codewords.length;for(let e=u;e<f;e++)for(let r=0;r<a;r++){const n=r<h?e:e+1;s[r].codewords[n]=t[d++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(Y||(Y={}));class _e{constructor(t,e,r,n){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=n,_e.FOR_BITS.set(n,this),_e.FOR_VALUE.set(t,this)}static forBits(t){const e=_e.FOR_BITS.get(t);if(void 0===e)throw new c;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let r;return r=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof _e))return!1;const e=t;return this.value===e.value}toString(){return this.stringValue}}_e.FOR_BITS=new Map,_e.FOR_VALUE=new Map,_e.TERMINATOR=new _e(Y.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),_e.NUMERIC=new _e(Y.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),_e.ALPHANUMERIC=new _e(Y.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),_e.STRUCTURED_APPEND=new _e(Y.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),_e.BYTE=new _e(Y.BYTE,"BYTE",Int32Array.from([8,16,16]),4),_e.ECI=new _e(Y.ECI,"ECI",Int32Array.from([0,0,0]),7),_e.KANJI=new _e(Y.KANJI,"KANJI",Int32Array.from([8,10,12]),8),_e.FNC1_FIRST_POSITION=new _e(Y.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),_e.FNC1_SECOND_POSITION=new _e(Y.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),_e.HANZI=new _e(Y.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Te{static decode(t,e,r,n){const i=new he(t);let o=new y;const s=new Array;let a=-1,c=-1;try{let t,r=null,l=!1;do{if(i.available()<4)t=_e.TERMINATOR;else{const e=i.readBits(4);t=_e.forBits(e)}switch(t){case _e.TERMINATOR:break;case _e.FNC1_FIRST_POSITION:case _e.FNC1_SECOND_POSITION:l=!0;break;case _e.STRUCTURED_APPEND:if(i.available()<16)throw new E;a=i.readBits(8),c=i.readBits(8);break;case _e.ECI:const h=Te.parseECIValue(i);if(r=I.getCharacterSetECIByValue(h),null===r)throw new E;break;case _e.HANZI:const u=i.readBits(4),d=i.readBits(t.getCharacterCountBits(e));u===Te.GB2312_SUBSET&&Te.decodeHanziSegment(i,o,d);break;default:const f=i.readBits(t.getCharacterCountBits(e));switch(t){case _e.NUMERIC:Te.decodeNumericSegment(i,o,f);break;case _e.ALPHANUMERIC:Te.decodeAlphanumericSegment(i,o,f,l);break;case _e.BYTE:Te.decodeByteSegment(i,o,f,r,s,n);break;case _e.KANJI:Te.decodeKanjiSegment(i,o,f);break;default:throw new E}}}while(t!==_e.TERMINATOR)}catch(t){throw new E}return new j(t,o.toString(),0===s.length?null:s,null===r?null:r.toString(),a,c)}static decodeHanziSegment(t,e,r){if(13*r>t.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const e=t.readBits(13);let o=e/96<<8&4294967295|e%96;o+=o<959?41377:42657,n[i]=o>>8&255,n[i+1]=255&o,i+=2,r--}try{e.append(_.decode(n,T.GB2312))}catch(t){throw new E(t)}}static decodeKanjiSegment(t,e,r){if(13*r>t.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const e=t.readBits(13);let o=e/192<<8&4294967295|e%192;o+=o<7936?33088:49472,n[i]=o>>8,n[i+1]=o,i+=2,r--}try{e.append(_.decode(n,T.SHIFT_JIS))}catch(t){throw new E(t)}}static decodeByteSegment(t,e,r,n,i,o){if(8*r>t.available())throw new E;const s=new Uint8Array(r);for(let e=0;e<r;e++)s[e]=t.readBits(8);let a;a=null===n?T.guessEncoding(s,o):n.getName();try{e.append(_.decode(s,a))}catch(t){throw new E(t)}i.push(s)}static toAlphaNumericChar(t){if(t>=Te.ALPHANUMERIC_CHARS.length)throw new E;return Te.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,r,n){const i=e.length();for(;r>1;){if(t.available()<11)throw new E;const n=t.readBits(11);e.append(Te.toAlphaNumericChar(Math.floor(n/45))),e.append(Te.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(t.available()<6)throw new E;e.append(Te.toAlphaNumericChar(t.readBits(6)))}if(n)for(let t=i;t<e.length();t++)"%"===e.charAt(t)&&(t<e.length()-1&&"%"===e.charAt(t+1)?e.deleteCharAt(t+1):e.setCharAt(t,String.fromCharCode(29)))}static decodeNumericSegment(t,e,r){for(;r>=3;){if(t.available()<10)throw new E;const n=t.readBits(10);if(n>=1e3)throw new E;e.append(Te.toAlphaNumericChar(Math.floor(n/100))),e.append(Te.toAlphaNumericChar(Math.floor(n/10)%10)),e.append(Te.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(t.available()<7)throw new E;const r=t.readBits(7);if(r>=100)throw new E;e.append(Te.toAlphaNumericChar(Math.floor(r/10))),e.append(Te.toAlphaNumericChar(r%10))}else if(1===r){if(t.available()<4)throw new E;const r=t.readBits(4);if(r>=10)throw new E;e.append(Te.toAlphaNumericChar(r))}}static parseECIValue(t){const e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new E}}Te.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Te.GB2312_SUBSET=1;class ye{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class Ne{constructor(){this.rsDecoder=new tt(q.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(N.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const r=new Ie(t);let n=null;try{return this.decodeBitMatrixParser(r,e)}catch(t){n=t}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const t=this.decodeBitMatrixParser(r,e);return t.setOther(new ye(!0)),t}catch(t){if(null!==n)throw n;throw t}}decodeBitMatrixParser(t,e){const r=t.readVersion(),n=t.readFormatInformation().getErrorCorrectionLevel(),i=t.readCodewords(),o=Se.getDataBlocks(i,r,n);let s=0;for(const t of o)s+=t.getNumDataCodewords();const a=new Uint8Array(s);let c=0;for(const t of o){const e=t.getCodewords(),r=t.getNumDataCodewords();this.correctErrors(e,r);for(let t=0;t<r;t++)a[c++]=e[t]}return Te.decode(a,r,n,e)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new h}for(let n=0;n<e;n++)t[n]=r[n]}}class De extends it{constructor(t,e,r){super(t,e),this.estimatedModuleSize=r}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=(this.getX()+e)/2,i=(this.getY()+t)/2,o=(this.estimatedModuleSize+r)/2;return new De(n,i,o)}}class Me{constructor(t,e,r,n,i,o,s){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,i=new Int32Array(3),o=this.image;for(let s=0;s<e;s++){const e=n+(0==(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=t;for(;a<r&&!o.get(a,e);)a++;let c=0;for(;a<r;){if(o.get(a,e))if(1===c)i[1]++;else if(2===c){if(this.foundPatternCross(i)){const t=this.handlePossibleCenter(i,e,a);if(null!==t)return t}i[0]=i[2],i[1]=1,i[2]=0,c=1}else i[++c]++;else 1===c&&c++,i[c]++;a++}if(this.foundPatternCross(i)){const t=this.handlePossibleCenter(i,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new D}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,r=e/2;for(let n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0}crossCheckVertical(t,e,r,n){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=t;for(;a>=0&&i.get(e,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&!i.get(e,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<o&&i.get(e,a)&&s[1]<=r;)s[1]++,a++;if(a===o||s[1]>r)return NaN;for(;a<o&&!i.get(e,a)&&s[2]<=r;)s[2]++,a++;if(s[2]>r)return NaN;const c=s[0]+s[1]+s[2];return 5*Math.abs(c-n)>=2*n?NaN:this.foundPatternCross(s)?Me.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,r){const n=t[0]+t[1]+t[2],i=Me.centerFromEnd(t,r),o=this.crossCheckVertical(e,i,2*t[1],n);if(!isNaN(o)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,o,i))return t.combineEstimate(o,i,e);const r=new De(i,o,e);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Re extends it{constructor(t,e,r,n){super(t,e),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=this.count+1,i=(this.count*this.getX()+e)/n,o=(this.count*this.getY()+t)/n,s=(this.count*this.estimatedModuleSize+r)/n;return new Re(i,o,s,n)}}class Oe{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class be{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!=t&&void 0!==t.get(C.TRY_HARDER),r=null!=t&&void 0!==t.get(C.PURE_BARCODE),n=this.image,i=n.getHeight(),o=n.getWidth();let s=Math.floor(3*i/(4*be.MAX_MODULES));(s<be.MIN_SKIP||e)&&(s=be.MIN_SKIP);let a=!1;const c=new Int32Array(5);for(let t=s-1;t<i&&!a;t+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;let e=0;for(let i=0;i<o;i++)if(n.get(i,t))1==(1&e)&&e++,c[e]++;else if(0==(1&e))if(4===e)if(be.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,t,i,r)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,e=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>c[2]&&(t+=e-c[2]-s,i=o-1)}e=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,e=3;else c[++e]++;else c[e]++;be.foundPatternCross(c)&&!0===this.handlePossibleCenter(c,t,o,r)&&(s=c[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const l=this.selectBestPatterns();return it.orderBestPatterns(l),new Oe(l)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let r=0;r<5;r++){const n=t[r];if(0===n)return!1;e+=n}if(e<7)return!1;const r=e/7,n=r/2;return Math.abs(r-t[0])<n&&Math.abs(r-t[1])<n&&Math.abs(3*r-t[2])<3*n&&Math.abs(r-t[3])<n&&Math.abs(r-t[4])<n}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,r,n){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;for(;t>=o&&e>=o&&s.get(e-o,t-o);)i[2]++,o++;if(t<o||e<o)return!1;for(;t>=o&&e>=o&&!s.get(e-o,t-o)&&i[1]<=r;)i[1]++,o++;if(t<o||e<o||i[1]>r)return!1;for(;t>=o&&e>=o&&s.get(e-o,t-o)&&i[0]<=r;)i[0]++,o++;if(i[0]>r)return!1;const a=s.getHeight(),c=s.getWidth();for(o=1;t+o<a&&e+o<c&&s.get(e+o,t+o);)i[2]++,o++;if(t+o>=a||e+o>=c)return!1;for(;t+o<a&&e+o<c&&!s.get(e+o,t+o)&&i[3]<r;)i[3]++,o++;if(t+o>=a||e+o>=c||i[3]>=r)return!1;for(;t+o<a&&e+o<c&&s.get(e+o,t+o)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return!1;const l=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(l-n)<2*n&&be.foundPatternCross(i)}crossCheckVertical(t,e,r,n){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=t;for(;a>=0&&i.get(e,a);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(e,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&i.get(e,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<o&&i.get(e,a);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(e,a)&&s[3]<r;)s[3]++,a++;if(a===o||s[3]>=r)return NaN;for(;a<o&&i.get(e,a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-n)>=2*n?NaN:be.foundPatternCross(s)?be.centerFromEnd(s,a):NaN}crossCheckHorizontal(t,e,r,n){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=t;for(;a>=0&&i.get(a,e);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,e)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&i.get(a,e)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<o&&i.get(a,e);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(a,e)&&s[3]<r;)s[3]++,a++;if(a===o||s[3]>=r)return NaN;for(;a<o&&i.get(a,e)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-n)>=n?NaN:be.foundPatternCross(s)?be.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,r,n){const i=t[0]+t[1]+t[2]+t[3]+t[4];let o=be.centerFromEnd(t,r),s=this.crossCheckVertical(e,Math.floor(o),t[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),t[2],i),!isNaN(o)&&(!n||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),t[2],i)))){const t=i/7;let e=!1;const r=this.possibleCenters;for(let n=0,i=r.length;n<i;n++){const i=r[n];if(i.aboutEquals(t,s,o)){r[n]=i.combineEstimate(s,o,t),e=!0;break}}if(!e){const e=new Re(o,s,t);r.push(e),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const e of this.possibleCenters)if(e.getCount()>=be.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-e.getX())-Math.abs(t.getY()-e.getY()))/2);t=e}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const r=this.possibleCenters.length;for(const r of this.possibleCenters)r.getCount()>=be.CENTER_QUORUM&&(t++,e+=r.getEstimatedModuleSize());if(t<3)return!1;const n=e/r;let i=0;for(const t of this.possibleCenters)i+=Math.abs(t.getEstimatedModuleSize()-n);return i<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new D;const e=this.possibleCenters;let r;if(t>3){let n=0,i=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();n+=e,i+=e*e}r=n/t;let o=Math.sqrt(i/t-r*r);e.sort(((t,e)=>{const n=Math.abs(e.getEstimatedModuleSize()-r),i=Math.abs(t.getEstimatedModuleSize()-r);return n<i?-1:n>i?1:0}));const s=Math.max(.2*r,o);for(let t=0;t<e.length&&e.length>3;t++){const n=e[t];Math.abs(n.getEstimatedModuleSize()-r)>s&&(e.splice(t,1),t--)}}if(e.length>3){let t=0;for(const r of e)t+=r.getEstimatedModuleSize();r=t/e.length,e.sort(((t,e)=>{if(e.getCount()===t.getCount()){const n=Math.abs(e.getEstimatedModuleSize()-r),i=Math.abs(t.getEstimatedModuleSize()-r);return n<i?1:n>i?-1:0}return e.getCount()-t.getCount()})),e.splice(3)}return[e[0],e[1],e[2]]}}be.CENTER_QUORUM=2,be.MIN_SKIP=3,be.MAX_MODULES=57;class Be{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null==t?null:t.get(C.NEED_RESULT_POINT_CALLBACK);const e=new be(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)}processFinderPatternInfo(t){const e=t.getTopLeft(),r=t.getTopRight(),n=t.getBottomLeft(),i=this.calculateModuleSize(e,r,n);if(i<1)throw new D("No pattern found in proccess finder.");const o=Be.computeDimension(e,r,n,i),s=Ce.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let c=null;if(s.getAlignmentPatternCenters().length>0){const t=r.getX()-e.getX()+n.getX(),o=r.getY()-e.getY()+n.getY(),s=1-3/a,l=Math.floor(e.getX()+s*(t-e.getX())),h=Math.floor(e.getY()+s*(o-e.getY()));for(let t=4;t<=16;t<<=1)try{c=this.findAlignmentInRegion(i,l,h,t);break}catch(t){if(!(t instanceof D))throw t}}const l=Be.createTransform(e,r,n,c,o),h=Be.sampleGrid(this.image,l,o);let u;return u=null===c?[n,e,r]:[n,e,r,c],new ot(h,u)}static createTransform(t,e,r,n,i){const o=i-3.5;let s,a,c,l;return null!==n?(s=n.getX(),a=n.getY(),c=o-3,l=c):(s=e.getX()-t.getX()+r.getX(),a=e.getY()-t.getY()+r.getY(),c=o,l=o),lt.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,l,3.5,o,t.getX(),t.getY(),e.getX(),e.getY(),s,a,r.getX(),r.getY())}static sampleGrid(t,e,r){return ut.getInstance().sampleGridWithTransform(t,r,r,e)}static computeDimension(t,e,r,n){const i=rt.round(it.distance(t,e)/n),o=rt.round(it.distance(t,r)/n);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new D("Dimensions could be not found.")}return s}calculateModuleSize(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2}calculateModuleSizeOneWay(t,e){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,r,n){let i=this.sizeOfBlackWhiteBlackRun(t,e,r,n),o=1,s=t-(r-t);s<0?(o=t/(t-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);let a=Math.floor(e-(n-e)*o);return o=1,a<0?(o=e/(e-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),s=Math.floor(t+(s-t)*o),i+=this.sizeOfBlackWhiteBlackRun(t,e,s,a),i-1}sizeOfBlackWhiteBlackRun(t,e,r,n){const i=Math.abs(n-e)>Math.abs(r-t);if(i){let i=t;t=e,e=i,i=r,r=n,n=i}const o=Math.abs(r-t),s=Math.abs(n-e);let a=-o/2;const c=t<r?1:-1,l=e<n?1:-1;let h=0;const u=r+c;for(let r=t,d=e;r!==u;r+=c){const c=i?d:r,u=i?r:d;if(1===h===this.image.get(c,u)){if(2===h)return rt.distance(r,d,t,e);h++}if(a+=s,a>0){if(d===n)break;d+=l,a-=o}}return 2===h?rt.distance(r+c,n,t,e):NaN}findAlignmentInRegion(t,e,r,n){const i=Math.floor(n*t),o=Math.max(0,e-i),s=Math.min(this.image.getWidth()-1,e+i);if(s-o<3*t)throw new D("Alignment top exceeds estimated module size.");const a=Math.max(0,r-i),c=Math.min(this.image.getHeight()-1,r+i);if(c-a<3*t)throw new D("Alignment bottom exceeds estimated module size.");return new Me(this.image,o,a,s-o,c-a,t,this.resultPointCallback).find()}}class Le{constructor(){this.decoder=new Ne}getDecoder(){return this.decoder}decode(t,e){let r,n;if(null!=e&&void 0!==e.get(C.PURE_BARCODE)){const i=Le.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,e),n=Le.NO_POINTS}else{const i=new Be(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(i.getBits(),e),n=i.getPoints()}r.getOther()instanceof ye&&r.getOther().applyMirroredCorrection(n);const i=new x(r.getText(),r.getRawBytes(),void 0,n,U.QR_CODE,void 0),o=r.getByteSegments();null!==o&&i.putMetadata(W.BYTE_SEGMENTS,o);const s=r.getECLevel();return null!==s&&i.putMetadata(W.ERROR_CORRECTION_LEVEL,s),r.hasStructuredAppend()&&(i.putMetadata(W.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(W.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new D;const n=this.moduleSize(e,t);let i=e[1],o=r[1],s=e[0],a=r[0];if(s>=a||i>=o)throw new D;if(o-i!=a-s&&(a=s+(o-i),a>=t.getWidth()))throw new D;const c=Math.round((a-s+1)/n),l=Math.round((o-i+1)/n);if(c<=0||l<=0)throw new D;if(l!==c)throw new D;const h=Math.floor(n/2);i+=h,s+=h;const u=s+Math.floor((c-1)*n)-a;if(u>0){if(u>h)throw new D;s-=u}const d=i+Math.floor((l-1)*n)-o;if(d>0){if(d>h)throw new D;i-=d}const f=new N(c,l);for(let e=0;e<l;e++){const r=i+Math.floor(e*n);for(let i=0;i<c;i++)t.get(s+Math.floor(i*n),r)&&f.set(i,e)}return f}static moduleSize(t,e){const r=e.getHeight(),n=e.getWidth();let i=t[0],o=t[1],s=!0,a=0;for(;i<n&&o<r;){if(s!==e.get(i,o)){if(5==++a)break;s=!s}i++,o++}if(i===n||o===r)throw new D;return(i-t[0])/7}}Le.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(t){return rt.sum(t)}static toIntArray(t){if(null==t||!t.length)return Pe.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let r=0;for(const n of t)e[r++]=n;return e}static getCodeword(t){const e=w.binarySearch(Pe.SYMBOL_TABLE,262143&t);return e<0?-1:(Pe.CODEWORD_TABLE[e]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ve{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class Fe{static detectMultiple(t,e,r){let n=t.getBlackMatrix(),i=Fe.detect(r,n);return i.length||(n=n.clone(),n.rotate180(),i=Fe.detect(r,n)),new ve(n,i)}static detect(t,e){const r=new Array;let n=0,i=0,o=!1;for(;n<e.getHeight();){const s=Fe.findVertices(e,n,i);if(null!=s[0]||null!=s[3]){if(o=!0,r.push(s),!t)break;null!=s[2]?(i=Math.trunc(s[2].getX()),n=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const t of r)null!=t[1]&&(n=Math.trunc(Math.max(n,t[1].getY()))),null!=t[3]&&(n=Math.max(n,Math.trunc(t[3].getY())));n+=Fe.ROW_STEP}}return r}static findVertices(t,e,r){const n=t.getHeight(),i=t.getWidth(),o=new Array(8);return Fe.copyToResult(o,Fe.findRowsWithPattern(t,n,i,e,r,Fe.START_PATTERN),Fe.INDEXES_START_PATTERN),null!=o[4]&&(r=Math.trunc(o[4].getX()),e=Math.trunc(o[4].getY())),Fe.copyToResult(o,Fe.findRowsWithPattern(t,n,i,e,r,Fe.STOP_PATTERN),Fe.INDEXES_STOP_PATTERN),o}static copyToResult(t,e,r){for(let n=0;n<r.length;n++)t[r[n]]=e[n]}static findRowsWithPattern(t,e,r,n,i,o){const s=new Array(4);let a=!1;const c=new Int32Array(o.length);for(;n<e;n+=Fe.ROW_STEP){let e=Fe.findGuardPattern(t,i,n,r,!1,o,c);if(null!=e){for(;n>0;){const s=Fe.findGuardPattern(t,i,--n,r,!1,o,c);if(null==s){n++;break}e=s}s[0]=new it(e[0],n),s[1]=new it(e[1],n),a=!0;break}}let l=n+1;if(a){let n=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;l<e;l++){const e=Fe.findGuardPattern(t,i[0],l,r,!1,o,c);if(null!=e&&Math.abs(i[0]-e[0])<Fe.MAX_PATTERN_DRIFT&&Math.abs(i[1]-e[1])<Fe.MAX_PATTERN_DRIFT)i=e,n=0;else{if(n>Fe.SKIPPED_ROW_COUNT_MAX)break;n++}}l-=n+1,s[2]=new it(i[0],l),s[3]=new it(i[1],l)}return l-n<Fe.BARCODE_MIN_HEIGHT&&w.fill(s,null),s}static findGuardPattern(t,e,r,n,i,o,s){w.fillWithin(s,0,s.length,0);let a=e,c=0;for(;t.get(a,r)&&a>0&&c++<Fe.MAX_PIXEL_DRIFT;)a--;let l=a,h=0,u=o.length;for(let e=i;l<n;l++)if(t.get(l,r)!==e)s[h]++;else{if(h===u-1){if(Fe.patternMatchVariance(s,o,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE)return new Int32Array([a,l]);a+=s[0]+s[1],d.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,e=!e}return h===u-1&&Fe.patternMatchVariance(s,o,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE?new Int32Array([a,l-1]):null}static patternMatchVariance(t,e,r){let n=t.length,i=0,o=0;for(let r=0;r<n;r++)i+=t[r],o+=e[r];if(i<o)return 1/0;let s=i/o;r*=s;let a=0;for(let i=0;i<n;i++){let n=t[i],o=e[i]*s,c=n>o?n-o:o-n;if(c>r)return 1/0;a+=c}return a/i}}Fe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Fe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Fe.MAX_AVG_VARIANCE=.42,Fe.MAX_INDIVIDUAL_VARIANCE=.8,Fe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Fe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Fe.MAX_PIXEL_DRIFT=3,Fe.MAX_PATTERN_DRIFT=5,Fe.SKIPPED_ROW_COUNT_MAX=25,Fe.ROW_STEP=5,Fe.BARCODE_MIN_HEIGHT=10;class xe{constructor(t,e){if(0===e.length)throw new c;this.field=t;let r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-t),d.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)e=this.field.add(this.field.multiply(t,e),this.coefficients[n]);return e}add(t){if(!this.field.equals(t.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){let t=e;e=r,r=t}let n=new Int32Array(r.length),i=r.length-e.length;d.arraycopy(r,0,n,0,i);for(let t=i;t<r.length;t++)n[t]=this.field.add(e[t-i],r[t]);return new xe(this.field,n)}subtract(t){if(!this.field.equals(t.field))throw new c("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof xe?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new xe(this.field,new Int32Array([0]));let e=this.coefficients,r=e.length,n=t.coefficients,i=n.length,o=new Int32Array(r+i-1);for(let t=0;t<r;t++){let r=e[t];for(let e=0;e<i;e++)o[t+e]=this.field.add(o[t+e],this.field.multiply(r,n[e]))}return new xe(this.field,o)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new xe(this.field,e)}multiplyScalar(t){if(0===t)return new xe(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new xe(this.field,r)}multiplyByMonomial(t,e){if(t<0)throw new c;if(0===e)return new xe(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+t);for(let t=0;t<r;t++)n[t]=this.field.multiply(this.coefficients[t],e);return new xe(this.field,n)}toString(){let t=new y;for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),0!==e&&1===r||t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class ke{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new c;return this.logTable[t]}inverse(t){if(0===t)throw new K;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Ue extends ke{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let r=1;for(let n=0;n<t;n++)this.expTable[n]=r,r=r*e%t;for(let e=0;e<t-1;e++)this.logTable[this.expTable[e]]=e;this.zero=new xe(this,new Int32Array([0])),this.one=new xe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new c;if(0===e)return this.zero;let r=new Int32Array(t+1);return r[0]=e,new xe(this,r)}}Ue.PDF417_GF=new Ue(Pe.NUMBER_OF_CODEWORDS,3);class He{constructor(){this.field=Ue.PDF417_GF}decode(t,e,r){let n=new xe(this.field,t),i=new Int32Array(e),o=!1;for(let t=e;t>0;t--){let r=n.evaluateAt(this.field.exp(t));i[e-t]=r,0!==r&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=r)for(const e of r){let r=this.field.exp(t.length-1-e),n=new xe(this.field,new Int32Array([this.field.subtract(0,r),1]));s=s.multiply(n)}let a=new xe(this.field,i),c=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),l=c[0],u=c[1],d=this.findErrorLocations(l),f=this.findErrorMagnitudes(u,l,d);for(let e=0;e<d.length;e++){let r=t.length-1-this.field.log(d[e]);if(r<0)throw h.getChecksumInstance();t[r]=this.field.subtract(t[r],f[e])}return d.length}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){let r=t;t=e,e=r}let n=t,i=e,o=this.field.getZero(),s=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let t=n,e=o;if(n=i,o=s,n.isZero())throw h.getChecksumInstance();i=t;let r=this.field.getZero(),a=n.getCoefficient(n.getDegree()),c=this.field.inverse(a);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let t=i.getDegree()-n.getDegree(),e=this.field.multiply(i.getCoefficient(i.getDegree()),c);r=r.add(this.field.buildMonomial(t,e)),i=i.subtract(n.multiplyByMonomial(t,e))}s=r.multiply(o).subtract(e).negative()}let a=s.getCoefficient(0);if(0===a)throw h.getChecksumInstance();let c=this.field.inverse(a);return[s.multiply(c),i.multiply(c)]}findErrorLocations(t){let e=t.getDegree(),r=new Int32Array(e),n=0;for(let i=1;i<this.field.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==e)throw h.getChecksumInstance();return r}findErrorMagnitudes(t,e,r){let n=e.getDegree(),i=new Int32Array(n);for(let t=1;t<=n;t++)i[n-t]=this.field.multiply(t,e.getCoefficient(t));let o=new xe(this.field,i),s=r.length,a=new Int32Array(s);for(let e=0;e<s;e++){let n=this.field.inverse(r[e]),i=this.field.subtract(0,t.evaluateAt(n)),s=this.field.inverse(o.evaluateAt(n));a[e]=this.field.multiply(i,s)}return a}}class Ve{constructor(t,e,r,n,i){t instanceof Ve?this.constructor_2(t):this.constructor_1(t,e,r,n,i)}constructor_1(t,e,r,n,i){const o=null==e||null==r,s=null==n||null==i;if(o&&s)throw new D;o?(e=new it(0,n.getY()),r=new it(0,i.getY())):s&&(n=new it(t.getWidth()-1,e.getY()),i=new it(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new Ve(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,r){let n=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(t>0){let e=r?this.topLeft:this.topRight,i=Math.trunc(e.getY()-t);i<0&&(i=0);let s=new it(e.getX(),i);r?n=s:o=s}if(e>0){let t=r?this.bottomLeft:this.bottomRight,n=Math.trunc(t.getY()+e);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let o=new it(t.getX(),n);r?i=o:s=o}return new Ve(this.image,n,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ze{constructor(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ge{constructor(){this.buffer=""}static form(t,e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(t,n,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++r])return;t=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=e[r];break;case"c":c=e[r][0];break;case"f":c=parseFloat(e[r]).toFixed(t);break;case"p":c=parseFloat(e[r]).toPrecision(t);break;case"e":c=parseFloat(e[r]).toExponential(t);break;case"x":c=parseInt(e[r]).toString(l||16);break;case"d":c=parseFloat(parseInt(e[r],l||10).toPrecision(t)).toFixed(0)}c="object"==typeof c?JSON.stringify(c):(+c).toString(l);let h=parseInt(i),u=i&&i[0]+""=="0"?"0":" ";for(;c.length<h;)c=void 0!==n?c+u:u+c;return c}))}format(t,...e){this.buffer+=Ge.form(t,e)}toString(){return this.buffer}}class Ye{constructor(t){this.boundingBox=new Ve(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let r=1;r<Ye.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(t)-r;if(n>=0&&(e=this.codewords[n],null!=e))return e;if(n=this.imageRowToCodewordIndex(t)+r,n<this.codewords.length&&(e=this.codewords[n],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Ge;let e=0;for(const r of this.codewords)null!=r?t.format("%3d: %3d|%3d%n",e++,r.getRowNumber(),r.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ye.MAX_NEARBY_DISTANCE=5;class Xe{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[r,n]of this.values.entries()){const i={getKey:()=>r,getValue:()=>n};i.getValue()>t?(t=i.getValue(),e=[],e.push(i.getKey())):i.getValue()===t&&e.push(i.getKey())}return Pe.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class We extends Ye{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,c=1,l=0;for(let r=o;r<s;r++){if(null==e[r])continue;let n=e[r],i=n.getRowNumber()-a;if(0===i)l++;else if(1===i)c=Math.max(c,l),l=1,a=n.getRowNumber();else if(i<0||n.getRowNumber()>=t.getRowCount()||i>r)e[r]=null;else{let t;t=c>2?(c-2)*i:i;let o=t>=r;for(let n=1;n<=t&&!o;n++)o=null!=e[r-n];o?e[r]=null:(a=n.getRowNumber(),l=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let t of this.getCodewords())if(null!=t){let r=t.getRowNumber();if(r>=e.length)continue;e[r]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.getCodewords(),a=-1;for(let e=i;e<o;e++){if(null==s[e])continue;let r=s[e];r.setRowNumberAsRowIndicatorColumn();let n=r.getRowNumber()-a;0===n||(1===n?a=r.getRowNumber():r.getRowNumber()>=t.getRowCount()?s[e]=null:a=r.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new Xe,r=new Xe,n=new Xe,i=new Xe;for(let o of t){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let t=o.getValue()%30,s=o.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:r.setValue(3*t+1);break;case 1:i.setValue(t/3),n.setValue(t%3);break;case 2:e.setValue(t+1)}}if(0===e.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||e.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let o=new ze(e.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(t,o),o}removeIncorrectCodewords(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(null==t[r])continue;let i=n.getValue()%30,o=n.getRowNumber();if(o>e.getRowCount())t[r]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:Math.trunc(i/3)===e.getErrorCorrectionLevel()&&i%3===e.getRowCountLowerPart()||(t[r]=null);break;case 2:i+1!==e.getColumnCount()&&(t[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class je{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=Pe.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let r=0;r<e.length;r++)null!=e[r]&&(e[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,e))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let n=this.detectionResultColumns[e].getCodewords()[r];null!=n&&(n.setRowNumber(t[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),i=0;for(let e=this.barcodeColumnCount+1;e>0&&i<this.ADJUST_ROW_NUMBER_SKIP;e--){let o=this.detectionResultColumns[e].getCodewords()[r];null!=o&&(i=je.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),i=0;for(let e=1;e<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;e++){let o=this.detectionResultColumns[e].getCodewords()[r];null!=o&&(i=je.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,r){if(!this.detectionResultColumns[t-1])return;let n=r[e],i=this.detectionResultColumns[t-1].getCodewords(),o=i;null!=this.detectionResultColumns[t+1]&&(o=this.detectionResultColumns[t+1].getCodewords());let s=new Array(14);s[2]=i[e],s[3]=o[e],e>0&&(s[0]=r[e-1],s[4]=i[e-1],s[5]=o[e-1]),e>1&&(s[8]=r[e-2],s[10]=i[e-2],s[11]=o[e-2]),e<r.length-1&&(s[1]=r[e+1],s[6]=i[e+1],s[7]=o[e+1]),e<r.length-2&&(s[9]=r[e+2],s[12]=i[e+2],s[13]=o[e+2]);for(let t of s)if(je.adjustRowNumber(n,t))return}static adjustRowNumber(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new Ge;for(let r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let n=this.detectionResultColumns[t].getCodewords()[r];null!=n?e.format(" %3d|%3d",n.getRowNumber(),n.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class Ze{constructor(t,e,r,n){this.rowNumber=Ze.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Ze.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Ze.BARCODE_ROW_UNKNOWN=-1;class Qe{static initialize(){for(let t=0;t<Pe.SYMBOL_TABLE.length;t++){let e=Pe.SYMBOL_TABLE[t],r=1&e;for(let n=0;n<Pe.BARS_IN_MODULE;n++){let i=0;for(;(1&e)===r;)i+=1,e>>=1;r=1&e,Qe.RATIOS_TABLE[t]||(Qe.RATIOS_TABLE[t]=new Array(Pe.BARS_IN_MODULE)),Qe.RATIOS_TABLE[t][Pe.BARS_IN_MODULE-n-1]=Math.fround(i/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=Qe.getDecodedCodewordValue(Qe.sampleBitCounts(t));return-1!==e?e:Qe.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=rt.sum(t),r=new Int32Array(Pe.BARS_IN_MODULE),n=0,i=0;for(let o=0;o<Pe.MODULES_IN_CODEWORD;o++){let s=e/(2*Pe.MODULES_IN_CODEWORD)+o*e/Pe.MODULES_IN_CODEWORD;i+t[n]<=s&&(i+=t[n],n++),r[n]++}return r}static getDecodedCodewordValue(t){let e=Qe.getBitValue(t);return-1===Pe.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let r=0;r<t.length;r++)for(let n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=rt.sum(t),r=new Array(Pe.BARS_IN_MODULE);if(e>1)for(let n=0;n<r.length;n++)r[n]=Math.fround(t[n]/e);let n=nt.MAX_VALUE,i=-1;this.bSymbolTableReady||Qe.initialize();for(let t=0;t<Qe.RATIOS_TABLE.length;t++){let e=0,o=Qe.RATIOS_TABLE[t];for(let t=0;t<Pe.BARS_IN_MODULE;t++){let i=Math.fround(o[t]-r[t]);if(e+=Math.fround(i*i),e>=n)break}e<n&&(n=e,i=Pe.SYMBOL_TABLE[t])}return i}}Qe.bSymbolTableReady=!1,Qe.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map((t=>new Array(Pe.BARS_IN_MODULE)));class Ke{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class qe{static parseLong(t,e=undefined){return parseInt(t,e)}}class Je extends s{}Je.kind="NullPointerException";class $e{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,r){if(null==t)throw new Je;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new f;if(0!==r)for(let n=0;n<r;n++)this.write(t[e+n])}flush(){}close(){}}class tr extends s{}class er extends $e{constructor(t=32){if(super(),this.count=0,t<0)throw new c("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new tr;e=m.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,e)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new f;this.ensureCapacity(this.count+r),d.arraycopy(t,e,this.buf,this.count,r),this.count+=r}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function rr(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==r.g)return r.g.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let nr;function ir(t){if(void 0===nr&&(nr=rr()),null===nr)throw new Error("BigInt is not supported!");return nr(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(X||(X={}));class or{static decode(t,e){let r=new y(""),n=I.ISO8859_1;r.enableDecoding(n);let i=1,o=t[i++],s=new Ke;for(;i<t[0];){switch(o){case or.TEXT_COMPACTION_MODE_LATCH:i=or.textCompaction(t,i,r);break;case or.BYTE_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH_6:i=or.byteCompaction(o,t,n,i,r);break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case or.NUMERIC_COMPACTION_MODE_LATCH:i=or.numericCompaction(t,i,r);break;case or.ECI_CHARSET:I.getCharacterSetECIByValue(t[i++]);break;case or.ECI_GENERAL_PURPOSE:i+=2;break;case or.ECI_USER_DEFINED:i++;break;case or.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=or.decodeMacroBlock(t,i,s);break;case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case or.MACRO_PDF417_TERMINATOR:throw new E;default:i--,i=or.textCompaction(t,i,r)}if(!(i<t.length))throw E.getFormatInstance();o=t[i++]}if(0===r.length())throw E.getFormatInstance();let a=new j(null,r.toString(),null,e);return a.setOther(s),a}static decodeMacroBlock(t,e,r){if(e+or.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw E.getFormatInstance();let n=new Int32Array(or.NUMBER_OF_SEQUENCE_CODEWORDS);for(let r=0;r<or.NUMBER_OF_SEQUENCE_CODEWORDS;r++,e++)n[r]=t[e];r.setSegmentIndex(m.parseInt(or.decodeBase900toBase10(n,or.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new y;e=or.textCompaction(t,e,i),r.setFileId(i.toString());let o=-1;for(t[e]===or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);e<t[0];)switch(t[e]){case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++e]){case or.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new y;e=or.textCompaction(t,e+1,n),r.setFileName(n.toString());break;case or.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new y;e=or.textCompaction(t,e+1,i),r.setSender(i.toString());break;case or.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new y;e=or.textCompaction(t,e+1,o),r.setAddressee(o.toString());break;case or.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new y;e=or.numericCompaction(t,e+1,s),r.setSegmentCount(m.parseInt(s.toString()));break;case or.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new y;e=or.numericCompaction(t,e+1,a),r.setTimestamp(qe.parseLong(a.toString()));break;case or.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let c=new y;e=or.numericCompaction(t,e+1,c),r.setChecksum(m.parseInt(c.toString()));break;case or.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let l=new y;e=or.numericCompaction(t,e+1,l),r.setFileSize(qe.parseLong(l.toString()));break;default:throw E.getFormatInstance()}break;case or.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==o){let n=e-o;r.isLastSegment()&&n--,r.setOptionalData(w.copyOfRange(t,o,o+n))}return e}static textCompaction(t,e,r){let n=new Int32Array(2*(t[0]-e)),i=new Int32Array(2*(t[0]-e)),o=0,s=!1;for(;e<t[0]&&!s;){let r=t[e++];if(r<or.TEXT_COMPACTION_MODE_LATCH)n[o]=r/30,n[o+1]=r%30,o+=2;else switch(r){case or.TEXT_COMPACTION_MODE_LATCH:n[o++]=or.TEXT_COMPACTION_MODE_LATCH;break;case or.BYTE_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH_6:case or.NUMERIC_COMPACTION_MODE_LATCH:case or.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case or.MACRO_PDF417_TERMINATOR:e--,s=!0;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[o]=or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=t[e++],i[o]=r,o++}}return or.decodeTextCompaction(n,i,o,r),e}static decodeTextCompaction(t,e,r,n){let i=X.ALPHA,o=X.ALPHA,s=0;for(;s<r;){let r=t[s],a="";switch(i){case X.ALPHA:if(r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case or.LL:i=X.LOWER;break;case or.ML:i=X.MIXED;break;case or.PS:o=i,i=X.PUNCT_SHIFT;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.LOWER:if(r<26)a=String.fromCharCode(97+r);else switch(r){case 26:a=" ";break;case or.AS:o=i,i=X.ALPHA_SHIFT;break;case or.ML:i=X.MIXED;break;case or.PS:o=i,i=X.PUNCT_SHIFT;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.MIXED:if(r<or.PL)a=or.MIXED_CHARS[r];else switch(r){case or.PL:i=X.PUNCT;break;case 26:a=" ";break;case or.LL:i=X.LOWER;break;case or.AL:i=X.ALPHA;break;case or.PS:o=i,i=X.PUNCT_SHIFT;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT:if(r<or.PAL)a=or.PUNCT_CHARS[r];else switch(r){case or.PAL:i=X.ALPHA;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.ALPHA_SHIFT:if(i=o,r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT_SHIFT:if(i=o,r<or.PAL)a=or.PUNCT_CHARS[r];else switch(r){case or.PAL:i=X.ALPHA;break;case or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case or.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}}""!==a&&n.append(a),s++}}static byteCompaction(t,e,r,n,i){let o=new er,s=0,a=0,c=!1;switch(t){case or.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),r=e[n++];for(;n<e[0]&&!c;)switch(t[s++]=r,a=900*a+r,r=e[n++],r){case or.TEXT_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH:case or.NUMERIC_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH_6:case or.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case or.MACRO_PDF417_TERMINATOR:n--,c=!0;break;default:if(s%5==0&&s>0){for(let t=0;t<6;++t)o.write(Number(ir(a)>>ir(8*(5-t))));a=0,s=0}}n===e[0]&&r<or.TEXT_COMPACTION_MODE_LATCH&&(t[s++]=r);for(let e=0;e<s;e++)o.write(t[e]);break;case or.BYTE_COMPACTION_MODE_LATCH_6:for(;n<e[0]&&!c;){let t=e[n++];if(t<or.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+t;else switch(t){case or.TEXT_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH:case or.NUMERIC_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH_6:case or.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case or.MACRO_PDF417_TERMINATOR:n--,c=!0}if(s%5==0&&s>0){for(let t=0;t<6;++t)o.write(Number(ir(a)>>ir(8*(5-t))));a=0,s=0}}}return i.append(_.decode(o.toByteArray(),r)),n}static numericCompaction(t,e,r){let n=0,i=!1,o=new Int32Array(or.MAX_NUMERIC_CODEWORDS);for(;e<t[0]&&!i;){let s=t[e++];if(e===t[0]&&(i=!0),s<or.TEXT_COMPACTION_MODE_LATCH)o[n]=s,n++;else switch(s){case or.TEXT_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH:case or.BYTE_COMPACTION_MODE_LATCH_6:case or.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case or.MACRO_PDF417_TERMINATOR:e--,i=!0}(n%or.MAX_NUMERIC_CODEWORDS==0||s===or.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(or.decodeBase900toBase10(o,n)),n=0)}return e}static decodeBase900toBase10(t,e){let r=ir(0);for(let n=0;n<e;n++)r+=or.EXP900[e-n-1]*ir(t[n]);let n=r.toString();if("1"!==n.charAt(0))throw new E;return n.substring(1)}}or.TEXT_COMPACTION_MODE_LATCH=900,or.BYTE_COMPACTION_MODE_LATCH=901,or.NUMERIC_COMPACTION_MODE_LATCH=902,or.BYTE_COMPACTION_MODE_LATCH_6=924,or.ECI_USER_DEFINED=925,or.ECI_GENERAL_PURPOSE=926,or.ECI_CHARSET=927,or.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,or.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,or.MACRO_PDF417_TERMINATOR=922,or.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,or.MAX_NUMERIC_CODEWORDS=15,or.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,or.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,or.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,or.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,or.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,or.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,or.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,or.PL=25,or.LL=27,or.AS=27,or.ML=28,or.AL=28,or.PS=29,or.PAL=29,or.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",or.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",or.EXP900=rr()?function(){let t=[];t[0]=ir(1);let e=ir(900);t[1]=e;for(let r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],or.NUMBER_OF_SEQUENCE_CODEWORDS=2;class sr{constructor(){}static decode(t,e,r,n,i,o,s){let a,c=new Ve(t,e,r,n,i),l=null,h=null;for(let r=!0;;r=!1){if(null!=e&&(l=sr.getRowIndicatorColumn(t,c,e,!0,o,s)),null!=n&&(h=sr.getRowIndicatorColumn(t,c,n,!1,o,s)),a=sr.merge(l,h),null==a)throw D.getNotFoundInstance();let i=a.getBoundingBox();if(!r||null==i||!(i.getMinY()<c.getMinY()||i.getMaxY()>c.getMaxY()))break;c=i}a.setBoundingBox(c);let u=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,l),a.setDetectionResultColumn(u,h);let d=null!=l;for(let e=1;e<=u;e++){let r,n=d?e:u-e;if(void 0!==a.getDetectionResultColumn(n))continue;r=0===n||n===u?new We(c,0===n):new Ye(c),a.setDetectionResultColumn(n,r);let i=-1,l=i;for(let e=c.getMinY();e<=c.getMaxY();e++){if(i=sr.getStartColumn(a,n,e,d),i<0||i>c.getMaxX()){if(-1===l)continue;i=l}let h=sr.detectCodeword(t,c.getMinX(),c.getMaxX(),d,i,e,o,s);null!=h&&(r.setCodeword(e,h),l=i,o=Math.min(o,h.getWidth()),s=Math.max(s,h.getWidth()))}}return sr.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let r=sr.getBarcodeMetadata(t,e);if(null==r)return null;let n=Ve.merge(sr.adjustBoundingBox(t),sr.adjustBoundingBox(e));return new je(r,n)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let r=sr.getMax(e),n=0;for(let t of e)if(n+=r-t,t>0)break;let i=t.getCodewords();for(let t=0;n>0&&null==i[t];t++)n--;let o=0;for(let t=e.length-1;t>=0&&(o+=r-e[t],!(e[t]>0));t--);for(let t=i.length-1;o>0&&null==i[t];t--)o--;return t.getBoundingBox().addMissingRows(n,o,t.isLeft())}static getMax(t){let e=-1;for(let r of t)e=Math.max(e,r);return e}static getBarcodeMetadata(t,e){let r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(t,e,r,n,i,o){let s=new We(e,n);for(let a=0;a<2;a++){let c=0===a?1:-1,l=Math.trunc(Math.trunc(r.getX()));for(let a=Math.trunc(Math.trunc(r.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=c){let e=sr.detectCodeword(t,0,t.getWidth(),n,l,a,i,o);null!=e&&(s.setCodeword(a,e),l=n?e.getStartX():e.getEndX())}}return s}static adjustCodewordCount(t,e){let r=e[0][1],n=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-sr.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===n.length){if(i<1||i>Pe.MAX_CODEWORDS_IN_BARCODE)throw D.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(t){let e=sr.createBarcodeMatrix(t);sr.adjustCodewordCount(t,e);let r=new Array,n=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],o=new Array;for(let s=0;s<t.getBarcodeRowCount();s++)for(let a=0;a<t.getBarcodeColumnCount();a++){let c=e[s][a+1].getValue(),l=s*t.getBarcodeColumnCount()+a;0===c.length?r.push(l):1===c.length?n[l]=c[0]:(o.push(l),i.push(c))}let s=new Array(i.length);for(let t=0;t<s.length;t++)s[t]=i[t];return sr.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),n,Pe.toIntArray(r),Pe.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(t,e,r,n,i){let o=new Int32Array(n.length),s=100;for(;s-- >0;){for(let t=0;t<o.length;t++)e[n[t]]=i[t][o[t]];try{return sr.decodeCodewords(e,t,r)}catch(t){if(!(t instanceof h))throw t}if(0===o.length)throw h.getChecksumInstance();for(let t=0;t<o.length;t++){if(o[t]<i[t].length-1){o[t]++;break}if(o[t]=0,t===o.length-1)throw h.getChecksumInstance()}}throw h.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},(()=>new Array(t.getBarcodeColumnCount()+2)));for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=new Xe;let r=0;for(let n of t.getDetectionResultColumns()){if(null!=n)for(let t of n.getCodewords())if(null!=t){let n=t.getRowNumber();if(n>=0){if(n>=e.length)continue;e[n][r].setValue(t.getValue())}}r++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,r,n){let i=n?1:-1,o=null;if(sr.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodeword(r)),null!=o)return n?o.getEndX():o.getStartX();if(o=t.getDetectionResultColumn(e).getCodewordNearby(r),null!=o)return n?o.getStartX():o.getEndX();if(sr.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodewordNearby(r)),null!=o)return n?o.getEndX():o.getStartX();let s=0;for(;sr.isValidBarcodeColumn(t,e-i);){e-=i;for(let r of t.getDetectionResultColumn(e).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+i*s*(r.getEndX()-r.getStartX());s++}return n?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,r,n,i,o,s,a){i=sr.adjustCodewordStartColumn(t,e,r,n,i,o);let c,l=sr.getModuleBitCount(t,e,r,n,i,o);if(null==l)return null;let h=rt.sum(l);if(n)c=i+h;else{for(let t=0;t<l.length/2;t++){let e=l[t];l[t]=l[l.length-1-t],l[l.length-1-t]=e}c=i,i=c-h}if(!sr.checkCodewordSkew(h,s,a))return null;let u=Qe.getDecodedValue(l),d=Pe.getCodeword(u);return-1===d?null:new Ze(i,c,sr.getCodewordBucketNumber(u),d)}static getModuleBitCount(t,e,r,n,i,o){let s=i,a=new Int32Array(8),c=0,l=n?1:-1,h=n;for(;(n?s<r:s>=e)&&c<a.length;)t.get(s,o)===h?(a[c]++,s+=l):(c++,h=!h);return c===a.length||s===(n?r:e)&&c===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,r,n,i,o){let s=i,a=n?-1:1;for(let c=0;c<2;c++){for(;(n?s>=e:s<r)&&n===t.get(s,o);){if(Math.abs(i-s)>sr.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,n=!n}return s}static checkCodewordSkew(t,e,r){return e-sr.CODEWORD_SKEW_SIZE<=t&&t<=r+sr.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,r){if(0===t.length)throw E.getFormatInstance();let n=1<<e+1,i=sr.correctErrors(t,r,n);sr.verifyCodewordCount(t,n);let o=or.decode(t,""+e);return o.setErrorsCorrected(i),o.setErasures(r.length),o}static correctErrors(t,e,r){if(null!=e&&e.length>r/2+sr.MAX_ERRORS||r<0||r>sr.MAX_EC_CODEWORDS)throw h.getChecksumInstance();return sr.errorCorrection.decode(t,r,e)}static verifyCodewordCount(t,e){if(t.length<4)throw E.getFormatInstance();let r=t[0];if(r>t.length)throw E.getFormatInstance();if(0===r){if(!(e<t.length))throw E.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),r=0,n=e.length-1;for(;!((1&t)!==r&&(r=1&t,n--,n<0));)e[n]++,t>>=1;return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return sr.getCodewordBucketNumber(sr.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new Ge;for(let r=0;r<t.length;r++){e.format("Row %2d: ",r);for(let n=0;n<t[r].length;n++){let i=t[r][n];0===i.getValue().length?e.format("        ",null):e.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}e.format("%n")}return e.toString()}}sr.CODEWORD_SKEW_SIZE=2,sr.MAX_ERRORS=3,sr.MAX_EC_CODEWORDS=512,sr.errorCorrection=new He;class ar{decode(t,e=null){let r=ar.decode(t,e,!1);if(null==r||0===r.length||null==r[0])throw D.getNotFoundInstance();return r[0]}decodeMultiple(t,e=null){try{return ar.decode(t,e,!0)}catch(t){if(t instanceof E||t instanceof h)throw D.getNotFoundInstance();throw t}}static decode(t,e,r){const n=new Array,i=Fe.detectMultiple(t,e,r);for(const t of i.getPoints()){const e=sr.decode(i.getBits(),t[4],t[5],t[6],t[7],ar.getMinCodewordWidth(t),ar.getMaxCodewordWidth(t)),r=new x(e.getText(),e.getRawBytes(),void 0,t,U.PDF_417);r.putMetadata(W.ERROR_CORRECTION_LEVEL,e.getECLevel());const o=e.getOther();null!=o&&r.putMetadata(W.PDF417_EXTRA_METADATA,o),n.push(r)}return n.map((t=>t))}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?m.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(ar.getMaxWidth(t[0],t[4]),ar.getMaxWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(ar.getMaxWidth(t[1],t[5]),ar.getMaxWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(ar.getMinWidth(t[0],t[4]),ar.getMinWidth(t[6],t[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(ar.getMinWidth(t[1],t[5]),ar.getMinWidth(t[7],t[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class cr extends s{}cr.kind="ReaderException";class lr{constructor(t,e){this.verbose=!0===t,e&&this.setHints(e)}decode(t,e){return e&&this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!e(t)&&!0===t.get(C.TRY_HARDER),n=e(t)?null:t.get(C.POSSIBLE_FORMATS),i=new Array;if(!e(n)){const e=n.some((t=>t===U.UPC_A||t===U.UPC_E||t===U.EAN_13||t===U.EAN_8||t===U.CODABAR||t===U.CODE_39||t===U.CODE_93||t===U.CODE_128||t===U.ITF||t===U.RSS_14||t===U.RSS_EXPANDED));e&&!r&&i.push(new ie(t,this.verbose)),n.includes(U.QR_CODE)&&i.push(new Le),n.includes(U.DATA_MATRIX)&&i.push(new ge),n.includes(U.AZTEC)&&i.push(new gt),n.includes(U.PDF_417)&&i.push(new ar),e&&r&&i.push(new ie(t,this.verbose))}0===i.length&&(r||i.push(new ie(t,this.verbose)),i.push(new Le),i.push(new ge),i.push(new gt),i.push(new ar),r&&i.push(new ie(t,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new cr("No readers where selected, nothing can be read.");for(const e of this.readers)try{return e.decode(t,this.hints)}catch(t){if(t instanceof cr)continue}throw new D("No MultiFormat Readers were able to detect the code.")}}var hr;!function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(hr||(hr={}));var ur=hr;class dr{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Q(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let r=e[e.length-1];const n=this.field;for(let i=e.length;i<=t;i++){const t=r.multiply(new Q(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));e.push(t),r=t}}return e[t]}encode(t,e){if(0===e)throw new c("No error correction bytes");const r=t.length-e;if(r<=0)throw new c("No data bytes provided");const n=this.buildGenerator(e),i=new Int32Array(r);d.arraycopy(t,0,i,0,r);let o=new Q(this.field,i);o=o.multiplyByMonomial(e,1);const s=o.divide(n)[1].getCoefficients(),a=e-s.length;for(let e=0;e<a;e++)t[r+e]=0;d.arraycopy(s,0,t,r+a,s.length)}}class fr{constructor(){}static applyMaskPenaltyRule1(t){return fr.applyMaskPenaltyRule1Internal(t,!0)+fr.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i-1;t++){const i=r[t];for(let o=0;o<n-1;o++){const n=i[o];n===i[o+1]&&n===r[t+1][o]&&n===r[t+1][o+1]&&e++}}return fr.N2*e}static applyMaskPenaltyRule3(t){let e=0;const r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i;t++)for(let o=0;o<n;o++){const s=r[t];o+6<n&&1===s[o]&&0===s[o+1]&&1===s[o+2]&&1===s[o+3]&&1===s[o+4]&&0===s[o+5]&&1===s[o+6]&&(fr.isWhiteHorizontal(s,o-4,o)||fr.isWhiteHorizontal(s,o+7,o+11))&&e++,t+6<i&&1===r[t][o]&&0===r[t+1][o]&&1===r[t+2][o]&&1===r[t+3][o]&&1===r[t+4][o]&&0===r[t+5][o]&&1===r[t+6][o]&&(fr.isWhiteVertical(r,o,t-4,t)||fr.isWhiteVertical(r,o,t+7,t+11))&&e++}return e*fr.N3}static isWhiteHorizontal(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(let n=e;n<r;n++)if(1===t[n])return!1;return!0}static isWhiteVertical(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(let i=r;i<n;i++)if(1===t[i][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i;t++){const i=r[t];for(let t=0;t<n;t++)1===i[t]&&e++}const o=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*e-o)/o)*fr.N4}static getDataMaskBit(t,e,r){let n,i;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:i=r*e,n=(1&i)+i%3;break;case 6:i=r*e,n=(1&i)+i%3&1;break;case 7:i=r*e,n=i%3+(r+e&1)&1;break;default:throw new c("Invalid mask pattern: "+t)}return 0===n}static applyMaskPenaltyRule1Internal(t,e){let r=0;const n=e?t.getHeight():t.getWidth(),i=e?t.getWidth():t.getHeight(),o=t.getArray();for(let t=0;t<n;t++){let n=0,s=-1;for(let a=0;a<i;a++){const i=e?o[t][a]:o[a][t];i===s?n++:(n>=5&&(r+=fr.N1+(n-5)),n=1,s=i)}n>=5&&(r+=fr.N1+(n-5))}return r}}fr.N1=3,fr.N2=3,fr.N3=40,fr.N4=10;class gr{constructor(t,e){this.width=t,this.height=e;const r=new Array(e);for(let n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,r){this.bytes[e][t]=r}setBoolean(t,e,r){this.bytes[e][t]=r?1:0}clear(t){for(const e of this.bytes)w.fill(e,t)}equals(t){if(!(t instanceof gr))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let t=0,r=this.height;t<r;++t){const r=this.bytes[t],n=e.bytes[t];for(let t=0,e=this.width;t<e;++t)if(r[t]!==n[t])return!1}return!0}toString(){const t=new y;for(let e=0,r=this.height;e<r;++e){const r=this.bytes[e];for(let e=0,n=this.width;e<n;++e)switch(r[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()}}class wr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new y;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<wr.NUM_MASK_PATTERNS}}wr.NUM_MASK_PATTERNS=8;class mr extends s{}mr.kind="WriterException";class pr{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,r,n,i){pr.clearMatrix(i),pr.embedBasicPatterns(r,i),pr.embedTypeInfo(e,n,i),pr.maybeEmbedVersionInfo(r,i),pr.embedDataBits(t,n,i)}static embedBasicPatterns(t,e){pr.embedPositionDetectionPatternsAndSeparators(e),pr.embedDarkDotAtLeftBottomCorner(e),pr.maybeEmbedPositionAdjustmentPatterns(t,e),pr.embedTimingPatterns(e)}static embedTypeInfo(t,e,r){const n=new p;pr.makeTypeInfoBits(t,e,n);for(let t=0,e=n.getSize();t<e;++t){const e=n.get(n.getSize()-1-t),i=pr.TYPE_INFO_COORDINATES[t],o=i[0],s=i[1];if(r.setBoolean(o,s,e),t<8){const n=r.getWidth()-t-1,i=8;r.setBoolean(n,i,e)}else{const n=8,i=r.getHeight()-7+(t-8);r.setBoolean(n,i,e)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const r=new p;pr.makeVersionInfoBits(t,r);let n=17;for(let t=0;t<6;++t)for(let i=0;i<3;++i){const o=r.get(n);n--,e.setBoolean(t,e.getHeight()-11+i,o),e.setBoolean(e.getHeight()-11+i,t,o)}}static embedDataBits(t,e,r){let n=0,i=-1,o=r.getWidth()-1,s=r.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);s>=0&&s<r.getHeight();){for(let i=0;i<2;++i){const a=o-i;if(!pr.isEmpty(r.get(a,s)))continue;let c;n<t.getSize()?(c=t.get(n),++n):c=!1,255!==e&&fr.getDataMaskBit(e,a,s)&&(c=!c),r.setBoolean(a,s,c)}s+=i}i=-i,s+=i,o-=2}if(n!==t.getSize())throw new mr("Not all bits consumed: "+n+"/"+t.getSize())}static findMSBSet(t){return 32-m.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new c("0 polynomial");const r=pr.findMSBSet(e);for(t<<=r-1;pr.findMSBSet(t)>=r;)t^=e<<pr.findMSBSet(t)-r;return t}static makeTypeInfoBits(t,e,r){if(!wr.isValidMaskPattern(e))throw new mr("Invalid mask pattern");const n=t.getBits()<<3|e;r.appendBits(n,5);const i=pr.calculateBCHCode(n,pr.TYPE_INFO_POLY);r.appendBits(i,10);const o=new p;if(o.appendBits(pr.TYPE_INFO_MASK_PATTERN,15),r.xor(o),15!==r.getSize())throw new mr("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const r=pr.calculateBCHCode(t.getVersionNumber(),pr.VERSION_INFO_POLY);if(e.appendBits(r,12),18!==e.getSize())throw new mr("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const r=(e+1)%2;pr.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),pr.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new mr;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,r){for(let n=0;n<8;++n){if(!pr.isEmpty(r.get(t+n,e)))throw new mr;r.setNumber(t+n,e,0)}}static embedVerticalSeparationPattern(t,e,r){for(let n=0;n<7;++n){if(!pr.isEmpty(r.get(t,e+n)))throw new mr;r.setNumber(t,e+n,0)}}static embedPositionAdjustmentPattern(t,e,r){for(let n=0;n<5;++n){const i=pr.POSITION_ADJUSTMENT_PATTERN[n];for(let o=0;o<5;++o)r.setNumber(t+o,e+n,i[o])}}static embedPositionDetectionPattern(t,e,r){for(let n=0;n<7;++n){const i=pr.POSITION_DETECTION_PATTERN[n];for(let o=0;o<7;++o)r.setNumber(t+o,e+n,i[o])}}static embedPositionDetectionPatternsAndSeparators(t){const e=pr.POSITION_DETECTION_PATTERN[0].length;pr.embedPositionDetectionPattern(0,0,t),pr.embedPositionDetectionPattern(t.getWidth()-e,0,t),pr.embedPositionDetectionPattern(0,t.getWidth()-e,t);pr.embedHorizontalSeparationPattern(0,7,t),pr.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),pr.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);pr.embedVerticalSeparationPattern(7,0,t),pr.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),pr.embedVerticalSeparationPattern(7,t.getHeight()-7,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const r=t.getVersionNumber()-1,n=pr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let t=0,r=n.length;t!==r;t++){const i=n[t];if(i>=0)for(let t=0;t!==r;t++){const r=n[t];r>=0&&pr.isEmpty(e.get(r,i))&&pr.embedPositionAdjustmentPattern(r-2,i-2,e)}}}}pr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),pr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),pr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),pr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),pr.VERSION_INFO_POLY=7973,pr.TYPE_INFO_POLY=1335,pr.TYPE_INFO_MASK_PATTERN=21522;class Ar{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Cr{constructor(){}static calculateMaskPenalty(t){return fr.applyMaskPenaltyRule1(t)+fr.applyMaskPenaltyRule2(t)+fr.applyMaskPenaltyRule3(t)+fr.applyMaskPenaltyRule4(t)}static encode(t,e,r=null){let n=Cr.DEFAULT_BYTE_MODE_ENCODING;const i=null!==r&&void 0!==r.get(ur.CHARACTER_SET);i&&(n=r.get(ur.CHARACTER_SET).toString());const o=this.chooseMode(t,n),s=new p;if(o===_e.BYTE&&(i||Cr.DEFAULT_BYTE_MODE_ENCODING!==n)){const t=I.getCharacterSetECIByName(n);void 0!==t&&this.appendECI(t,s)}this.appendModeInfo(o,s);const a=new p;let c;if(this.appendBytes(t,o,a,n),null!==r&&void 0!==r.get(ur.QR_VERSION)){const t=Number.parseInt(r.get(ur.QR_VERSION).toString(),10);c=Ce.getVersionForNumber(t);const n=this.calculateBitsNeeded(o,s,a,c);if(!this.willFit(n,c,e))throw new mr("Data too big for requested version")}else c=this.recommendVersion(e,o,s,a);const l=new p;l.appendBitArray(s);const h=o===_e.BYTE?a.getSizeInBytes():t.length;this.appendLengthInfo(h,c,o,l),l.appendBitArray(a);const u=c.getECBlocksForLevel(e),d=c.getTotalCodewords()-u.getTotalECCodewords();this.terminateBits(d,l);const f=this.interleaveWithECBytes(l,c.getTotalCodewords(),d,u.getNumBlocks()),g=new wr;g.setECLevel(e),g.setMode(o),g.setVersion(c);const w=c.getDimensionForVersion(),m=new gr(w,w),A=this.chooseMaskPattern(f,e,c,m);return g.setMaskPattern(A),pr.buildMatrix(f,e,c,A,m),g.setMatrix(m),g}static recommendVersion(t,e,r,n){const i=this.calculateBitsNeeded(e,r,n,Ce.getVersionForNumber(1)),o=this.chooseVersion(i,t),s=this.calculateBitsNeeded(e,r,n,o);return this.chooseVersion(s,t)}static calculateBitsNeeded(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(t){return t<Cr.ALPHANUMERIC_TABLE.length?Cr.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(I.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return _e.KANJI;let r=!1,n=!1;for(let e=0,i=t.length;e<i;++e){const i=t.charAt(e);if(Cr.isDigit(i))r=!0;else{if(-1===this.getAlphanumericCode(i.charCodeAt(0)))return _e.BYTE;n=!0}}return n?_e.ALPHANUMERIC:r?_e.NUMERIC:_e.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=_.encode(t,I.SJIS)}catch(t){return!1}const r=e.length;if(r%2!=0)return!1;for(let t=0;t<r;t+=2){const r=255&e[t];if((r<129||r>159)&&(r<224||r>235))return!1}return!0}static chooseMaskPattern(t,e,r,n){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<wr.NUM_MASK_PATTERNS;s++){pr.buildMatrix(t,e,r,s,n);let a=this.calculateMaskPenalty(n);a<i&&(i=a,o=s)}return o}static chooseVersion(t,e){for(let r=1;r<=40;r++){const n=Ce.getVersionForNumber(r);if(Cr.willFit(t,n,e))return n}throw new mr("Data too big")}static willFit(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8}static terminateBits(t,e){const r=8*t;if(e.getSize()>r)throw new mr("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(let t=0;t<4&&e.getSize()<r;++t)e.appendBit(!1);const n=7&e.getSize();if(n>0)for(let t=n;t<8;t++)e.appendBit(!1);const i=t-e.getSizeInBytes();for(let t=0;t<i;++t)e.appendBits(0==(1&t)?236:17,8);if(e.getSize()!==r)throw new mr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,r,n,i,o){if(n>=r)throw new mr("Block ID too large");const s=t%r,a=r-s,c=Math.floor(t/r),l=c+1,h=Math.floor(e/r),u=h+1,d=c-h,f=l-u;if(d!==f)throw new mr("EC bytes mismatch");if(r!==a+s)throw new mr("RS blocks mismatch");if(t!==(h+d)*a+(u+f)*s)throw new mr("Total bytes mismatch");n<a?(i[0]=h,o[0]=d):(i[0]=u,o[0]=f)}static interleaveWithECBytes(t,e,r,n){if(t.getSizeInBytes()!==r)throw new mr("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let c=0;c<n;++c){const l=new Int32Array(1),h=new Int32Array(1);Cr.getNumDataBytesAndNumECBytesForBlockID(e,r,n,c,l,h);const u=l[0],d=new Uint8Array(u);t.toBytes(8*i,d,0,u);const f=Cr.generateECBytes(d,h[0]);a.push(new Ar(d,f)),o=Math.max(o,u),s=Math.max(s,f.length),i+=l[0]}if(r!==i)throw new mr("Data bytes does not match offset");const c=new p;for(let t=0;t<o;++t)for(const e of a){const r=e.getDataBytes();t<r.length&&c.appendBits(r[t],8)}for(let t=0;t<s;++t)for(const e of a){const r=e.getErrorCorrectionBytes();t<r.length&&c.appendBits(r[t],8)}if(e!==c.getSizeInBytes())throw new mr("Interleaving error: "+e+" and "+c.getSizeInBytes()+" differ.");return c}static generateECBytes(t,e){const r=t.length,n=new Int32Array(r+e);for(let e=0;e<r;e++)n[e]=255&t[e];new dr(q.QR_CODE_FIELD_256).encode(n,e);const i=new Uint8Array(e);for(let t=0;t<e;t++)i[t]=n[r+t];return i}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,r,n){const i=r.getCharacterCountBits(e);if(t>=1<<i)throw new mr(t+" is bigger than "+((1<<i)-1));n.appendBits(t,i)}static appendBytes(t,e,r,n){switch(e){case _e.NUMERIC:Cr.appendNumericBytes(t,r);break;case _e.ALPHANUMERIC:Cr.appendAlphanumericBytes(t,r);break;case _e.BYTE:Cr.append8BitBytes(t,r,n);break;case _e.KANJI:Cr.appendKanjiBytes(t,r);break;default:throw new mr("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=Cr.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const i=Cr.getDigit(t.charAt(n));if(n+2<r){const r=Cr.getDigit(t.charAt(n+1)),o=Cr.getDigit(t.charAt(n+2));e.appendBits(100*i+10*r+o,10),n+=3}else if(n+1<r){const r=Cr.getDigit(t.charAt(n+1));e.appendBits(10*i+r,7),n+=2}else e.appendBits(i,4),n++}}static appendAlphanumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const i=Cr.getAlphanumericCode(t.charCodeAt(n));if(-1===i)throw new mr;if(n+1<r){const r=Cr.getAlphanumericCode(t.charCodeAt(n+1));if(-1===r)throw new mr;e.appendBits(45*i+r,11),n+=2}else e.appendBits(i,6),n++}}static append8BitBytes(t,e,r){let n;try{n=_.encode(t,r)}catch(t){throw new mr(t)}for(let t=0,r=n.length;t!==r;t++){const r=n[t];e.appendBits(r,8)}}static appendKanjiBytes(t,e){let r;try{r=_.encode(t,I.SJIS)}catch(t){throw new mr(t)}const n=r.length;for(let t=0;t<n;t+=2){const n=(255&r[t])<<8&4294967295|255&r[t+1];let i=-1;if(n>=33088&&n<=40956?i=n-33088:n>=57408&&n<=60351&&(i=n-49472),-1===i)throw new mr("Invalid byte sequence");const o=192*(i>>8)+(255&i);e.appendBits(o,13)}}static appendECI(t,e){e.appendBits(_e.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}Cr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Cr.DEFAULT_BYTE_MODE_ENCODING=I.UTF8.getName();class Er{write(t,e,r,n=null){if(0===t.length)throw new c("Found empty contents");if(e<0||r<0)throw new c("Requested dimensions are too small: "+e+"x"+r);let i=we.L,o=Er.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(ur.ERROR_CORRECTION)&&(i=we.fromString(n.get(ur.ERROR_CORRECTION).toString())),void 0!==n.get(ur.MARGIN)&&(o=Number.parseInt(n.get(ur.MARGIN).toString(),10)));const s=Cr.encode(t,i,n);return this.renderResult(s,e,r,o)}writeToDom(t,e,r,n,i=null){"string"==typeof t&&(t=document.querySelector(t));const o=this.write(e,r,n,i);t&&t.appendChild(o)}renderResult(t,e,r,n){const i=t.getMatrix();if(null===i)throw new $;const o=i.getWidth(),s=i.getHeight(),a=o+2*n,c=s+2*n,l=Math.max(e,a),h=Math.max(r,c),u=Math.min(Math.floor(l/a),Math.floor(h/c)),d=Math.floor((l-o*u)/2),f=Math.floor((h-s*u)/2),g=this.createSVGElement(l,h);for(let t=0,e=f;t<s;t++,e+=u)for(let r=0,n=d;r<o;r++,n+=u)if(1===i.get(r,t)){const t=this.createSvgRectElement(n,e,u,u);g.appendChild(t)}return g}createSVGElement(t,e){const r=document.createElementNS(Er.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",e.toString()),r}createSvgRectElement(t,e,r,n){const i=document.createElementNS(Er.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",e.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Er.QUIET_ZONE_SIZE=4,Er.SVG_NS="http://www.w3.org/2000/svg";class Ir{encode(t,e,r,n,i){if(0===t.length)throw new c("Found empty contents");if(e!==U.QR_CODE)throw new c("Can only encode QR_CODE, but got "+e);if(r<0||n<0)throw new c(`Requested dimensions are too small: ${r}x${n}`);let o=we.L,s=Ir.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(ur.ERROR_CORRECTION)&&(o=we.fromString(i.get(ur.ERROR_CORRECTION).toString())),void 0!==i.get(ur.MARGIN)&&(s=Number.parseInt(i.get(ur.MARGIN).toString(),10)));const a=Cr.encode(t,o,i);return Ir.renderResult(a,r,n,s)}static renderResult(t,e,r,n){const i=t.getMatrix();if(null===i)throw new $;const o=i.getWidth(),s=i.getHeight(),a=o+2*n,c=s+2*n,l=Math.max(e,a),h=Math.max(r,c),u=Math.min(Math.floor(l/a),Math.floor(h/c)),d=Math.floor((l-o*u)/2),f=Math.floor((h-s*u)/2),g=new N(l,h);for(let t=0,e=f;t<s;t++,e+=u)for(let r=0,n=d;r<o;r++,n+=u)1===i.get(r,t)&&g.setRegion(n,e,u,u);return g}}Ir.QUIET_ZONE_SIZE=4;class Sr extends O{constructor(t,e,r,n,i,o,s,a){if(super(o,s),this.yuvData=t,this.dataWidth=e,this.dataHeight=r,this.left=n,this.top=i,n+o>e||i+s>r)throw new c("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);const r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));const n=(t+this.top)*this.dataWidth+this.left;return d.arraycopy(this.yuvData,n,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const r=t*e,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return d.arraycopy(this.yuvData,i,n,0,r),n;for(let r=0;r<e;r++){const e=r*t;d.arraycopy(this.yuvData,i,n,e,t),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(t,e,r,n){return new Sr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,r,n,!1)}renderThumbnail(){const t=this.getWidth()/Sr.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/Sr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*e),n=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<e;o++){const e=o*t;for(let o=0;o<t;o++){const t=255&n[i+o*Sr.THUMBNAIL_SCALE_FACTOR];r[e+o]=4278190080|65793*t}i+=this.dataWidth*Sr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/Sr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Sr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<e;n++,i+=this.dataWidth){const e=i+t/2;for(let n=i,o=i+t-1;n<e;n++,o--){const t=r[n];r[n]=r[o],r[o]=t}}}invert(){return new b(this)}}Sr.THUMBNAIL_SCALE_FACTOR=2;class _r extends O{constructor(t,e,r,n,i,o,s){if(super(e,r),this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=s,4===t.BYTES_PER_ELEMENT){const n=e*r,i=new Uint8ClampedArray(n);for(let e=0;e<n;e++){const r=t[e],n=r>>16&255,o=r>>7&510,s=255&r;i[e]=(n+o+s)/4&255}this.luminances=i}else this.luminances=t;if(void 0===n&&(this.dataWidth=e),void 0===i&&(this.dataHeight=r),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+e>this.dataWidth||this.top+r>this.dataHeight)throw new c("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);const r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));const n=(t+this.top)*this.dataWidth+this.left;return d.arraycopy(this.luminances,n,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const r=t*e,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return d.arraycopy(this.luminances,i,n,0,r),n;for(let r=0;r<e;r++){const e=r*t;d.arraycopy(this.luminances,i,n,e,t),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(t,e,r,n){return new _r(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new b(this)}}class Tr extends I{static forName(t){return this.getCharacterSetECIByName(t)}}class yr{}yr.ISO_8859_1=I.ISO8859_1;class Nr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Dr{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class Mr{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Rr extends Mr{constructor(t,e,r){super(t),this.value=e,this.bitCount=r}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new Rr(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Rr(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+m.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Or extends Rr{constructor(t,e,r){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=r}appendTo(t,e){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===r?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)}addBinaryShift(t,e){return new Or(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function br(t,e,r){return new Rr(t,e,r)}const Br=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Lr=0,Pr=1,vr=2,Fr=3,xr=4,kr=new Rr(null,0,0),Ur=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const Hr=function(t){for(let e of t)w.fill(e,-1);return t[Lr][xr]=0,t[Pr][xr]=0,t[Pr][Lr]=28,t[Fr][xr]=0,t[vr][xr]=0,t[vr][Lr]=15,t}(w.createInt32Array(6,6));class Vr{constructor(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let r=this.bitCount,n=this.token;if(t!==this.mode){let e=Ur[this.mode][t];n=br(n,65535&e,e>>16),r+=e>>16}let i=t===vr?4:5;return n=br(n,e,i),new Vr(n,t,0,r+i)}shiftAndAppend(t,e){let r=this.token,n=this.mode===vr?4:5;return r=br(r,Hr[this.mode][t],n),r=br(r,e,5),new Vr(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(t){let e=this.token,r=this.mode,n=this.bitCount;if(this.mode===xr||this.mode===vr){let t=Ur[r][Lr];e=br(e,65535&t,t>>16),n+=t>>16,r=Lr}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new Vr(e,r,this.binaryShiftByteCount+1,n+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=function(t,e,r){return new Or(t,e,r)}(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vr(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Ur[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=Vr.calculateBinaryShiftCost(t)-Vr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);let r=new p;for(const n of e)n.appendTo(r,t);return r}toString(){return T.format("%s bits=%d bytes=%d",Br[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Vr.INITIAL_STATE=new Vr(kr,Lr,0,0);const zr=function(t){const e=T.getCharCode(" "),r=T.getCharCode("."),n=T.getCharCode(",");t[Lr][e]=1;const i=T.getCharCode("Z"),o=T.getCharCode("A");for(let e=o;e<=i;e++)t[Lr][e]=e-o+2;t[Pr][e]=1;const s=T.getCharCode("z"),a=T.getCharCode("a");for(let e=a;e<=s;e++)t[Pr][e]=e-a+2;t[vr][e]=1;const c=T.getCharCode("9"),l=T.getCharCode("0");for(let e=l;e<=c;e++)t[vr][e]=e-l+2;t[vr][n]=12,t[vr][r]=13;const h=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(let e=0;e<h.length;e++)t[Fr][T.getCharCode(h[e])]=e;const u=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let e=0;e<u.length;e++)T.getCharCode(u[e])>0&&(t[xr][T.getCharCode(u[e])]=e);return t}(w.createInt32Array(5,256));class Gr{constructor(t){this.text=t}encode(){const t=T.getCharCode(" "),e=T.getCharCode("\n");let r=Dr.singletonList(Vr.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i,o=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case T.getCharCode("\r"):i=o===e?2:0;break;case T.getCharCode("."):i=o===t?3:0;break;case T.getCharCode(","):i=o===t?4:0;break;case T.getCharCode(":"):i=o===t?5:0;break;default:i=0}i>0?(r=Gr.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}return Dr.min(r,((t,e)=>t.getBitCount()-e.getBitCount())).toBitArray(this.text)}updateStateListForChar(t,e){const r=[];for(let n of t)this.updateStateForChar(n,e,r);return Gr.simplifyStates(r)}updateStateForChar(t,e,r){let n=255&this.text[e],i=zr[t.getMode()][n]>0,o=null;for(let s=0;s<=xr;s++){let a=zr[s][n];if(a>0){if(null==o&&(o=t.endBinaryShift(e)),!i||s===t.getMode()||s===vr){const t=o.latchAndAppend(s,a);r.push(t)}if(!i&&Hr[t.getMode()][s]>=0){const t=o.shiftAndAppend(s,a);r.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===zr[t.getMode()][n]){let n=t.addBinaryShiftChar(e);r.push(n)}}static updateStateListForPair(t,e,r){const n=[];for(let i of t)this.updateStateForPair(i,e,r,n);return this.simplifyStates(n)}static updateStateForPair(t,e,r,n){let i=t.endBinaryShift(e);if(n.push(i.latchAndAppend(xr,r)),t.getMode()!==xr&&n.push(i.shiftAndAppend(xr,r)),3===r||4===r){let t=i.latchAndAppend(vr,16-r).latchAndAppend(vr,1);n.push(t)}if(t.getBinaryShiftByteCount()>0){let r=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(r)}}static simplifyStates(t){let e=[];for(const r of t){let t=!0;for(const n of e){if(n.isBetterThanOrEqualTo(r)){t=!1;break}r.isBetterThanOrEqualTo(n)&&(e=e.filter((t=>t!==n)))}t&&e.push(r)}return e}}class Yr{constructor(){}static encodeBytes(t){return Yr.encode(t,Yr.DEFAULT_EC_PERCENT,Yr.DEFAULT_AZTEC_LAYERS)}static encode(t,e,r){let n,i,o,s,a,l=new Gr(t).encode(),h=m.truncDivision(l.getSize()*e,100)+11,u=l.getSize()+h;if(r!==Yr.DEFAULT_AZTEC_LAYERS){if(n=r<0,i=Math.abs(r),i>(n?Yr.MAX_NB_BITS_COMPACT:Yr.MAX_NB_BITS))throw new c(T.format("Illegal value %s for layers",r));o=Yr.totalBitsInLayer(i,n),s=Yr.WORD_SIZE[i];let t=o-o%s;if(a=Yr.stuffBits(l,s),a.getSize()+h>t)throw new c("Data to large for user specified layer");if(n&&a.getSize()>64*s)throw new c("Data to large for user specified layer")}else{s=0,a=null;for(let t=0;;t++){if(t>Yr.MAX_NB_BITS)throw new c("Data too large for an Aztec code");if(n=t<=3,i=n?t+1:t,o=Yr.totalBitsInLayer(i,n),u>o)continue;null!=a&&s===Yr.WORD_SIZE[i]||(s=Yr.WORD_SIZE[i],a=Yr.stuffBits(l,s));let e=o-o%s;if(!(n&&a.getSize()>64*s)&&a.getSize()+h<=e)break}}let d,f=Yr.generateCheckWords(a,o,s),g=a.getSize()/s,w=Yr.generateModeMessage(n,i,g),p=(n?11:14)+4*i,A=new Int32Array(p);if(n){d=p;for(let t=0;t<A.length;t++)A[t]=t}else{d=p+1+2*m.truncDivision(m.truncDivision(p,2)-1,15);let t=m.truncDivision(p,2),e=m.truncDivision(d,2);for(let r=0;r<t;r++){let n=r+m.truncDivision(r,15);A[t-r-1]=e-n-1,A[t+r]=e+n+1}}let C=new N(d);for(let t=0,e=0;t<i;t++){let r=4*(i-t)+(n?9:12);for(let n=0;n<r;n++){let i=2*n;for(let o=0;o<2;o++)f.get(e+i+o)&&C.set(A[2*t+o],A[2*t+n]),f.get(e+2*r+i+o)&&C.set(A[2*t+n],A[p-1-2*t-o]),f.get(e+4*r+i+o)&&C.set(A[p-1-2*t-o],A[p-1-2*t-n]),f.get(e+6*r+i+o)&&C.set(A[p-1-2*t-n],A[2*t+o])}e+=8*r}if(Yr.drawModeMessage(C,n,d,w),n)Yr.drawBullsEye(C,m.truncDivision(d,2),5);else{Yr.drawBullsEye(C,m.truncDivision(d,2),7);for(let t=0,e=0;t<m.truncDivision(p,2)-1;t+=15,e+=16)for(let t=1&m.truncDivision(d,2);t<d;t+=2)C.set(m.truncDivision(d,2)-e,t),C.set(m.truncDivision(d,2)+e,t),C.set(t,m.truncDivision(d,2)-e),C.set(t,m.truncDivision(d,2)+e)}let E=new Nr;return E.setCompact(n),E.setSize(d),E.setLayers(i),E.setCodeWords(g),E.setMatrix(C),E}static drawBullsEye(t,e,r){for(let n=0;n<r;n+=2)for(let r=e-n;r<=e+n;r++)t.set(r,e-n),t.set(r,e+n),t.set(e-n,r),t.set(e+n,r);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)}static generateModeMessage(t,e,r){let n=new p;return t?(n.appendBits(e-1,2),n.appendBits(r-1,6),n=Yr.generateCheckWords(n,28,4)):(n.appendBits(e-1,5),n.appendBits(r-1,11),n=Yr.generateCheckWords(n,40,4)),n}static drawModeMessage(t,e,r,n){let i=m.truncDivision(r,2);if(e)for(let e=0;e<7;e++){let r=i-3+e;n.get(e)&&t.set(r,i-5),n.get(e+7)&&t.set(i+5,r),n.get(20-e)&&t.set(r,i+5),n.get(27-e)&&t.set(i-5,r)}else for(let e=0;e<10;e++){let r=i-5+e+m.truncDivision(e,5);n.get(e)&&t.set(r,i-7),n.get(e+10)&&t.set(i+7,r),n.get(29-e)&&t.set(r,i+7),n.get(39-e)&&t.set(i-7,r)}}static generateCheckWords(t,e,r){let n=t.getSize()/r,i=new dr(Yr.getGF(r)),o=m.truncDivision(e,r),s=Yr.bitsToWords(t,r,o);i.encode(s,o-n);let a=e%r,c=new p;c.appendBits(0,a);for(const t of Array.from(s))c.appendBits(t,r);return c}static bitsToWords(t,e,r){let n,i,o=new Int32Array(r);for(n=0,i=t.getSize()/e;n<i;n++){let r=0;for(let i=0;i<e;i++)r|=t.get(n*e+i)?1<<e-i-1:0;o[n]=r}return o}static getGF(t){switch(t){case 4:return q.AZTEC_PARAM;case 6:return q.AZTEC_DATA_6;case 8:return q.AZTEC_DATA_8;case 10:return q.AZTEC_DATA_10;case 12:return q.AZTEC_DATA_12;default:throw new c("Unsupported word size "+t)}}static stuffBits(t,e){let r=new p,n=t.getSize(),i=(1<<e)-2;for(let o=0;o<n;o+=e){let s=0;for(let r=0;r<e;r++)(o+r>=n||t.get(o+r))&&(s|=1<<e-1-r);(s&i)===i?(r.appendBits(s&i,e),o--):0==(s&i)?(r.appendBits(1|s,e),o--):r.appendBits(s,e)}return r}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}Yr.DEFAULT_EC_PERCENT=33,Yr.DEFAULT_AZTEC_LAYERS=0,Yr.MAX_NB_BITS=32,Yr.MAX_NB_BITS_COMPACT=4,Yr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Xr{encode(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)}encodeWithHints(t,e,r,n,i){let o=yr.ISO_8859_1,s=Yr.DEFAULT_EC_PERCENT,a=Yr.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(ur.CHARACTER_SET)&&(o=Tr.forName(i.get(ur.CHARACTER_SET).toString())),i.has(ur.ERROR_CORRECTION)&&(s=m.parseInt(i.get(ur.ERROR_CORRECTION).toString())),i.has(ur.AZTEC_LAYERS)&&(a=m.parseInt(i.get(ur.AZTEC_LAYERS).toString()))),Xr.encodeLayers(t,e,r,n,o,s,a)}static encodeLayers(t,e,r,n,i,o,s){if(e!==U.AZTEC)throw new c("Can only encode AZTEC, but got "+e);let a=Yr.encode(T.getBytes(t,i),o,s);return Xr.renderResult(a,r,n)}static renderResult(t,e,r){let n=t.getMatrix();if(null==n)throw new $;let i=n.getWidth(),o=n.getHeight(),s=Math.max(e,i),a=Math.max(r,o),c=Math.min(s/i,a/o),l=(s-i*c)/2,h=(a-o*c)/2,u=new N(s,a);for(let t=0,e=h;t<o;t++,e+=c)for(let r=0,o=l;r<i;r++,o+=c)n.get(r,t)&&u.setRegion(o,e,c,c);return u}}t.AbstractExpandedDecoder=Vt,t.ArgumentException=a,t.ArithmeticException=K,t.AztecCode=Nr,t.AztecCodeReader=gt,t.AztecCodeWriter=Xr,t.AztecDecoder=et,t.AztecDetector=ft,t.AztecDetectorResult=st,t.AztecEncoder=Yr,t.AztecHighLevelEncoder=Gr,t.AztecPoint=dt,t.BarcodeFormat=U,t.Binarizer=u,t.BinaryBitmap=l,t.BitArray=p,t.BitMatrix=N,t.BitSource=he,t.BrowserAztecCodeReader=class extends F{constructor(t=500){super(new gt,t)}},t.BrowserBarcodeReader=class extends F{constructor(t=500,e){super(new ie(e),t,e)}},t.BrowserCodeReader=F,t.BrowserDatamatrixCodeReader=class extends F{constructor(t=500){super(new ge,t)}},t.BrowserMultiFormatReader=class extends F{constructor(t=null,e=500){const r=new lr;r.setHints(t),super(r,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}},t.BrowserPDF417Reader=class extends F{constructor(t=500){super(new ar,t)}},t.BrowserQRCodeReader=class extends F{constructor(t=500){super(new Le,t)}},t.BrowserQRCodeSvgWriter=Er,t.CharacterSetECI=I,t.ChecksumException=h,t.Code128Reader=mt,t.Code39Reader=pt,t.DataMatrixDecodedBitStreamParser=ue,t.DataMatrixReader=ge,t.DecodeHintType=C,t.DecoderResult=j,t.DefaultGridSampler=ht,t.DetectorResult=ot,t.EAN13Reader=Tt,t.EncodeHintType=ur,t.Exception=s,t.FormatException=E,t.GenericGF=q,t.GenericGFPoly=Q,t.GlobalHistogramBinarizer=M,t.GridSampler=ct,t.GridSamplerInstance=ut,t.HTMLCanvasElementLuminanceSource=B,t.HybridBinarizer=R,t.ITFReader=At,t.IllegalArgumentException=c,t.IllegalStateException=$,t.InvertedLuminanceSource=b,t.LuminanceSource=O,t.MathUtils=rt,t.MultiFormatOneDReader=ie,t.MultiFormatReader=lr,t.MultiFormatWriter=class{encode(t,e,r,n,i){let o;if(e!==U.QR_CODE)throw new c("No encoder available for format "+e);return o=new Ir,o.encode(t,e,r,n,i)}},t.NotFoundException=D,t.OneDReader=wt,t.PDF417DecodedBitStreamParser=or,t.PDF417DecoderErrorCorrection=He,t.PDF417Reader=ar,t.PDF417ResultMetadata=Ke,t.PerspectiveTransform=lt,t.PlanarYUVLuminanceSource=Sr,t.QRCodeByteMatrix=gr,t.QRCodeDataMask=Ee,t.QRCodeDecodedBitStreamParser=Te,t.QRCodeDecoderErrorCorrectionLevel=we,t.QRCodeDecoderFormatInformation=me,t.QRCodeEncoder=Cr,t.QRCodeEncoderQRCode=wr,t.QRCodeMaskUtil=fr,t.QRCodeMatrixUtil=pr,t.QRCodeMode=_e,t.QRCodeReader=Le,t.QRCodeVersion=Ce,t.QRCodeWriter=Ir,t.RGBLuminanceSource=_r,t.RSS14Reader=ne,t.RSSExpandedReader=ee,t.ReaderException=cr,t.ReedSolomonDecoder=tt,t.ReedSolomonEncoder=dr,t.ReedSolomonException=J,t.Result=x,t.ResultMetadataType=W,t.ResultPoint=it,t.StringUtils=T,t.UnsupportedOperationException=S,t.VideoInputDevice=L,t.WhiteRectangleDetector=at,t.WriterException=mr,t.ZXingArrays=w,t.ZXingCharset=Tr,t.ZXingInteger=m,t.ZXingStandardCharsets=yr,t.ZXingStringBuilder=y,t.ZXingStringEncoding=_,t.ZXingSystem=d,t.createAbstractExpandedDecoder=Jt,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";var t;r.r(n),r.d(n,{Html5Qrcode:()=>W,Html5QrcodeScanType:()=>i,Html5QrcodeScanner:()=>ft,Html5QrcodeScannerState:()=>w,Html5QrcodeSupportedFormats:()=>t}),function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(t||(t={}));var e,i,o=new Map([[t.QR_CODE,"QR_CODE"],[t.AZTEC,"AZTEC"],[t.CODABAR,"CODABAR"],[t.CODE_39,"CODE_39"],[t.CODE_93,"CODE_93"],[t.CODE_128,"CODE_128"],[t.DATA_MATRIX,"DATA_MATRIX"],[t.MAXICODE,"MAXICODE"],[t.ITF,"ITF"],[t.EAN_13,"EAN_13"],[t.EAN_8,"EAN_8"],[t.PDF_417,"PDF_417"],[t.RSS_14,"RSS_14"],[t.RSS_EXPANDED,"RSS_EXPANDED"],[t.UPC_A,"UPC_A"],[t.UPC_E,"UPC_E"],[t.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function s(e){return Object.values(t).includes(e)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"}(e||(e={})),function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(i||(i={}));var a,c=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[i.SCAN_TYPE_CAMERA,i.SCAN_TYPE_FILE],t}(),l=function(){function t(t,e){this.format=t,this.formatName=e}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!o.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,o.get(e))},t}(),h=function(){function t(){}return t.createFromText=function(t){return{decodedText:t,result:{text:t}}},t.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},t}();!function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(a||(a={}));var u=function(){function t(){}return t.createFrom=function(t){return{errorMessage:t,type:a.UNKWOWN_ERROR}},t}(),d=function(){function t(t){this.verbose=t}return t.prototype.log=function(t){this.verbose&&console.log(t)},t.prototype.warn=function(t){this.verbose&&console.warn(t)},t.prototype.logError=function(t,e){(this.verbose||!0===e)&&console.error(t)},t.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},t}();function f(t){return null==t}var g,w,m=function(){function t(){}return t.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},t.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),p=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(t){return"Last Match: ".concat(t)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),A=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),C=function(){function t(){}return t.isMediaStreamConstraintsValid=function(t,e){if("object"!=typeof t){var r=typeof t;return e.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if(n.has(s))return e.logError("".concat(s," is not supported videoConstaints."),!0),!1}return!0},t}(),E=r(449),I=function(){function e(e,r,n){if(this.formatMap=new Map([[t.QR_CODE,E.BarcodeFormat.QR_CODE],[t.AZTEC,E.BarcodeFormat.AZTEC],[t.CODABAR,E.BarcodeFormat.CODABAR],[t.CODE_39,E.BarcodeFormat.CODE_39],[t.CODE_93,E.BarcodeFormat.CODE_93],[t.CODE_128,E.BarcodeFormat.CODE_128],[t.DATA_MATRIX,E.BarcodeFormat.DATA_MATRIX],[t.MAXICODE,E.BarcodeFormat.MAXICODE],[t.ITF,E.BarcodeFormat.ITF],[t.EAN_13,E.BarcodeFormat.EAN_13],[t.EAN_8,E.BarcodeFormat.EAN_8],[t.PDF_417,E.BarcodeFormat.PDF_417],[t.RSS_14,E.BarcodeFormat.RSS_14],[t.RSS_EXPANDED,E.BarcodeFormat.RSS_EXPANDED],[t.UPC_A,E.BarcodeFormat.UPC_A],[t.UPC_E,E.BarcodeFormat.UPC_E],[t.UPC_EAN_EXTENSION,E.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!E)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(e),o=new Map;o.set(E.DecodeHintType.POSSIBLE_FORMATS,i),o.set(E.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var e=this;return new Promise((function(r,n){try{r(e.decode(t))}catch(t){n(t)}}))},e.prototype.decode=function(t){var e=new E.MultiFormatReader(this.verbose,this.hints),r=new E.HTMLCanvasElementLuminanceSource(t),n=new E.BinaryBitmap(new E.HybridBinarizer(r)),i=e.decode(n);return{text:i.text,format:l.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,r,n){t.set(e,r)})),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var e=[],r=0,n=t;r<n.length;r++){var i=n[r];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return e},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),S=function(){function e(r,n,i){if(this.formatMap=new Map([[t.QR_CODE,"qr_code"],[t.AZTEC,"aztec"],[t.CODABAR,"codabar"],[t.CODE_39,"code_39"],[t.CODE_93,"code_93"],[t.CODE_128,"code_128"],[t.DATA_MATRIX,"data_matrix"],[t.ITF,"itf"],[t.EAN_13,"ean_13"],[t.EAN_8,"ean_8"],[t.PDF_417,"pdf417"],[t.UPC_A,"upc_a"],[t.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&void 0!==new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(t){return e=this,r=void 0,i=function(){var e,r;return function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(n){switch(n.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(e=n.sent())||0===e.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(e)).rawValue,format:l.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}}))},new((n=void 0)||(n=Promise))((function(t,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(s,a)}c((i=i.apply(e,r||[])).next())}));var e,r,n,i},e.prototype.selectLargestBarcode=function(t){for(var e=null,r=0,n=0,i=t;n<i.length;n++){var o=i[n],s=o.boundingBox.width*o.boundingBox.height;s>r&&(r=s,e=o)}if(!e)throw"No largest barcode found";return e},e.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],r=0,n=t;r<n.length;r++){var i=n[r];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:e}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,r,n){t.set(e,r)})),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),_=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},T=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},y=function(){function t(t,e,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,e&&S.isSupported()?(this.primaryDecoder=new S(t,r,n),this.secondaryDecoder=new I(t,r,n)):this.primaryDecoder=new I(t,r,n)}return t.prototype.decodeAsync=function(t){return _(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}}))}))},t.prototype.decodeRobustlyAsync=function(t){return _(this,void 0,void 0,(function(){var e,r;return T(this,(function(n){switch(n.label){case 0:e=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}}))}))},t.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,r=this.executionResults;e<r.length;e++)t+=r[e];var n=t/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),N=(g=function(t,e){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},g(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),D=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},M=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},R=function(){function t(t,e){this.name=t,this.track=e}return t.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},t.prototype.apply=function(t){var e={};e[this.name]=t;var r={advanced:[e]};return this.track.applyConstraints(r)},t.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},t}(),O=function(t){function e(e){return t.call(this,"zoom",e)||this}return N(e,t),e}(function(t){function e(e,r){return t.call(this,e,r)||this}return N(e,t),e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var e={};e[this.name]=t;var r={advanced:[e]};return this.track.applyConstraints(r)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities()[this.name];return{min:t.min,max:t.max,step:t.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(R)),b=function(t){function e(e){return t.call(this,"torch",e)||this}return N(e,t),e}(R),B=function(){function t(t){this.track=t}return t.prototype.zoomFeature=function(){return new O(this.track)},t.prototype.torchFeature=function(){return new b(this.track)},t}(),L=function(){function t(t,e,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return t.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width="".concat(t,"px"),e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},t.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var r=t.surface.clientWidth,n=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,n),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,i){return D(this,void 0,void 0,(function(){var o,s;return M(this,(function(a){switch(a.label){case 0:return o=new t(e,r,i),n.aspectRatio?(s={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}}))}))},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(t){this.failIfClosed();var e=this,r=function(){setTimeout(t,200),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(t){return D(this,void 0,void 0,(function(){return M(this,(function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]}))}))},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise((function(e,r){var n=t.mediaStream.getVideoTracks().length,i=0;t.mediaStream.getVideoTracks().forEach((function(r){t.mediaStream.removeTrack(r),r.stop(),++i>=n&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())}))}))},t.prototype.getCapabilities=function(){return new B(this.getFirstTrackOrFail())},t}(),P=function(){function t(t){this.mediaStream=t}return t.prototype.render=function(t,e,r){return D(this,void 0,void 0,(function(){return M(this,(function(n){return[2,L.create(t,this.mediaStream,e,r)]}))}))},t.create=function(e){return D(this,void 0,void 0,(function(){var r;return M(this,(function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new t(n.sent())]}}))}))},t}(),v=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},F=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},x=function(){function t(){}return t.failIfNotSupported=function(){return v(this,void 0,void 0,(function(){return F(this,(function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]}))}))},t.prototype.create=function(t){return v(this,void 0,void 0,(function(){return F(this,(function(e){return[2,P.create(t)]}))}))},t}(),k=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=m.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=m.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},t.getCamerasFromMediaDevices=function(){return t=this,e=void 0,n=function(){var t,e,r,n,i,o,s;return function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(a){switch(a.label){case 0:return t=function(t){for(var e=0,r=t.getVideoTracks();e<r.length;e++){var n=r[e];n.enabled=!1,n.stop(),t.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=a.sent(),n=[],i=0,o=r;i<o.length;i++)"videoinput"===(s=o[i]).kind&&n.push({id:s.deviceId,label:s.label});return t(e),[2,n]}}))},new((r=void 0)||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}));var t,e,r,n},t.getCamerasFromMediaStreamTrack=function(){return new Promise((function(t,e){MediaStreamTrack.getSources((function(e){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];"video"===o.kind&&r.push({id:o.id,label:o.label})}t(r)}))}))},t}();!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"}(w||(w={}));var U,H=function(){function t(){this.state=w.NOT_STARTED,this.onGoingTransactionNewState=w.UNKNOWN}return t.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},t.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===w.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=w.UNKNOWN,this.directTransition(t)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===w.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=w.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==w.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(t){switch(this.state){case w.UNKNOWN:throw"Transition from unknown is not allowed";case w.NOT_STARTED:this.failIfNewStateIs(t,[w.PAUSED]);case w.SCANNING:case w.PAUSED:}},t.prototype.failIfNewStateIs=function(t,e){for(var r=0,n=e;r<n.length;r++)if(t===n[r])throw"Cannot transition from ".concat(this.state," to ").concat(t)},t}(),V=function(){function t(t){this.stateManager=t}return t.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},t.prototype.directTransition=function(t){this.stateManager.directTransition(t)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===w.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==w.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===w.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===w.PAUSED},t}(),z=function(){function t(){}return t.create=function(){return new V(new H)},t}(),G=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return G(e,t),e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(c),X=function(){function t(t,e){this.logger=e,this.fps=Y.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Y.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?C.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!f(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),W=function(){function e(t,e){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");var r;this.elementId=t,this.verbose=!1,"boolean"==typeof e?this.verbose=!0===e:e&&(r=e,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new d(this.verbose),this.qrcode=new y(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=z.create()}return e.prototype.start=function(t,e,r,n){var i,o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";i=n||(this.verbose?this.logger.log:function(){});var s=X.create(e,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=a,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:Y.DEFAULT_WIDTH,l.style.position="relative",this.shouldScan=!0,this.element=l;var h=this,u=this.stateManagerProxy.startTransition(w.SCANNING);return new Promise((function(e,n){var a=c?s.videoConstraints:h.createVideoConstraints(t);if(!a)return u.cancel(),void n("videoConstraints should be defined");var l={};c&&!s.aspectRatio||(l.aspectRatio=s.aspectRatio);var d={onRenderSurfaceReady:function(t,e){h.setupUi(t,e,s),h.isScanning=!0,h.foreverScan(s,r,i)}};x.failIfNotSupported().then((function(t){t.create(a).then((function(t){return t.render(o.element,l,d).then((function(t){h.renderedCamera=t,u.execute(),e(null)})).catch((function(t){u.cancel(),n(t)}))})).catch((function(t){u.cancel(),n(m.errorGettingUserMedia(t))}))})).catch((function(t){u.cancel(),n(m.cameraStreamingNotSupported())}))}))},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(w.PAUSED),this.showPausedState(),(f(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(w.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){e()})):e()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(w.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=this;return this.renderedCamera.close().then((function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),function(){if(t.element){var e=document.getElementById(Y.SHADED_REGION_ELEMENT_ID);e&&t.element.removeChild(e)}}(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),e.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()}))},e.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then((function(t){return t.decodedText}))},e.prototype.scanFileV2=function(t,e){var r=this;if(!(t&&t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(f(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var t=o.width,s=o.height,a=document.getElementById(r.elementId),c=a.clientWidth?a.clientWidth:Y.DEFAULT_WIDTH,l=Math.max(a.clientHeight?a.clientHeight:s,Y.FILE_SCAN_MIN_HEIGHT),u=r.computeCanvasDrawConfig(t,s,c,l);if(e){var d=r.createCanvasElement(c,l,"qr-canvas-visible");d.style.display="inline-block",a.appendChild(d);var f=d.getContext("2d");if(!f)throw"Unable to get 2d context from canvas";f.canvas.width=c,f.canvas.height=l,f.drawImage(o,0,0,t,s,u.x,u.y,u.width,u.height)}var g=Y.FILE_SCAN_HIDDEN_CANVAS_PADDING,w=Math.max(o.width,u.width),m=Math.max(o.height,u.height),p=w+2*g,A=m+2*g,C=r.createCanvasElement(p,A);a.appendChild(C);var E=C.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=p,E.canvas.height=A,E.drawImage(o,0,0,t,s,g,g,w,m);try{r.qrcode.decodeRobustlyAsync(C).then((function(t){n(h.createFromQrcodeResult(t))})).catch(i)}catch(t){i("QR code parse error, error = ".concat(t))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return k.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!C.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var r=[t.QR_CODE,t.AZTEC,t.CODABAR,t.CODE_39,t.CODE_93,t.CODE_128,t.DATA_MATRIX,t.MAXICODE,t.ITF,t.EAN_13,t.EAN_8,t.PDF_417,t.RSS_14,t.RSS_EXPANDED,t.UPC_A,t.UPC_E,t.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return r;if(!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,o=e.formatsToSupport;i<o.length;i++){var a=o[i];s(a)?n.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(f(t))return!0;if(!f(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(f(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return!!f(e.useBarCodeDetectorIfSupported)||!1!==e.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(t,e,r){var n=r.qrbox;this.validateQrboxConfig(n);var i,o=this.toQrdimensions(t,e,n),s=function(t){if(t<Y.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Y.MIN_QR_BOX_SIZE,"px.")};s(o.width),s(o.height),o.width=((i=o.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),i=t),i)},e.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,e,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,e)}catch(t){throw new Error("qrbox config was passed as a function but it failed with unknown error"+t)}return r},e.prototype.setupUi=function(t,e,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,r);var n=f(r.qrbox)?{width:t,height:e}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(t,e,n);i.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=e,s={x:0,y:0,width:t,height:e},a=o?this.getShadedRegionBounds(t,e,i):s,c=this.createCanvasElement(a.width,a.height),l=c.getContext("2d",{willReadFrequently:!0});l.canvas.width=a.width,l.canvas.height=a.height,this.element.append(c),o&&this.possiblyInsertShadingElement(this.element,t,e,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=l,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText=m.scannerPaused(),e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="rgba(9, 9, 9, 0.46)",e.style.color="#FFECEC",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},e.prototype.scanContext=function(t,e){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(e){return t(e.text,h.createFromQrcodeResult(e)),r.possiblyUpdateShaders(!0),!0})).catch((function(t){r.possiblyUpdateShaders(!1);var n=m.codeParseError(t);return e(n,u.createFrom(n)),!1}))},e.prototype.foreverScan=function(t,e,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,c=this.qrRegion.height*s,l=this.qrRegion.x*o,h=this.qrRegion.y*s;this.context.drawImage(i,l,h,a,c,0,0,this.qrRegion.width,this.qrRegion.height);var u=function(){n.foreverScanTimeout=setTimeout((function(){n.foreverScan(t,e,r)}),n.getTimeoutFps(t.fps))};this.scanContext(e,r).then((function(i){i||!0===t.disableFlip?u():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(e,r).finally((function(){u()})))})).catch((function(t){n.logger.logError("Error happend while scanning context",t),u()}))}},e.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var e="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",o=function(t){if(t in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(t,"'")},s=Object.keys(t);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var a=Object.keys(t)[0];if(a!==e&&a!==r)throw"Only '".concat(e,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==e){var c=t.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c){if(i in c)return{deviceId:{exact:c["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof c)}var l=t.facingMode;if("string"==typeof l){if(o(l))return{facingMode:l}}else{if("object"!=typeof l)throw"Invalid type of 'facingMode' = ".concat(typeof l);if(!(i in l))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(l["".concat(i)]))return{facingMode:{exact:l["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof t)},e.prototype.computeCanvasDrawConfig=function(t,e,r,n){if(t<=r&&e<=n)return{x:(r-t)/2,y:(n-e)/2,width:t,height:e};var i=t,o=e;return t>r&&(e*=r/t,t=r),e>n&&(t*=n/e,e=n),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(t,"X").concat(e,".")),this.computeCanvasDrawConfig(t,e,r,n)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(e){e.style.backgroundColor=t?Y.BORDER_SHADER_MATCH_COLOR:Y.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,e,r){var n=t,i=e,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=f(r)?"qr-canvas":r,o},e.prototype.getShadedRegionBounds=function(t,e,r){if(r.width>t||r.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(e-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,e,r,n){if(!(e-n.width<1||r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(e-n.width)/2,s=(r-n.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Y.SHADED_REGION_ELEMENT_ID),e-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{this.insertShaderBorders(i,40,5,-5,null,0,!0),this.insertShaderBorders(i,40,5,-5,null,0,!1),this.insertShaderBorders(i,40,5,null,-5,0,!0),this.insertShaderBorders(i,40,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,e,r,n,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=Y.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(e,"px"),a.style.height="".concat(r,"px"),null!==n&&(a.style.top="".concat(n,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),s?a.style.left="".concat(o,"px"):a.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),t.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),j="data:image/svg+xml;base64,",Z=j+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Q=j+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",K=j+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",q=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),J=function(){function t(){this.data=q.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},t.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=q.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),$=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=A.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var i=document.createElement("a");i.innerText=A.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),t.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),tt=function(){function t(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=K,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(t){return e.onHoverIn()},this.infoIcon.onmouseout=function(t){return e.onHoverOut()},this.infoIcon.onclick=function(t){return e.onClick()},t.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=K,this.infoIcon.style.opacity="0.6")},t}(),et=function(){function t(){var t=this;this.infoDiv=new $,this.infoIcon=new tt((function(){t.infoDiv.show()}),(function(){t.infoDiv.hide()}))}return t.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},t}(),rt=function(){function t(){}return t.hasPermissions=function(){return t=this,e=void 0,n=function(){var t,e,r,n;return function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=i.sent(),e=0,r=t;e<r.length;e++)if("videoinput"===(n=r[e]).kind&&n.label)return[2,!0];return[2,!1]}}))},new((r=void 0)||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}));var t,e,r,n},t}(),nt=function(){function t(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(t){return t===i.SCAN_TYPE_CAMERA},t.isFileScanType=function(t){return t===i.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return c.DEFAULT_SUPPORTED_SCAN_TYPE;var e=c.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max ".concat(e," values expected for ")+"supportedScanTypes";for(var r=0,n=t;r<n.length;r++){var i=n[r];if(!c.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return t},t}(),it=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),ot=function(){function t(){}return t.createElement=function(t,e){var r=document.createElement(t);return r.id=e,r.classList.add(it.ALL_ELEMENT_CLASS),"button"===t&&r.setAttribute("type","button"),r},t}(),st=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},at=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ct=function(){function t(t,e,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return st(this,void 0,void 0,(function(){var t,e;return at(this,(function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=r.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},t.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?p.torchOffButton():p.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},t.prototype.propagateFailure=function(t,e){var r=t?p.torchOnFailedMessage():p.torchOffFailedMessage();e&&(r+="; Error = "+e),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),lt=function(){function t(t,e){this.onTorchActionFailureCallback=e,this.torchButton=ot.createElement("button",it.TORCH_BUTTON_ID),this.torchController=new ct(t,this,e)}return t.prototype.render=function(t,e){var r=this;this.torchButton.innerText=p.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var n=this;this.torchButton.addEventListener("click",(function(t){return st(r,void 0,void 0,(function(){return at(this,(function(t){switch(t.label){case 0:return[4,n.torchController.flipState()];case 1:return t.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(it.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(it.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(it.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(it.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new ct(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=p.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,i){var o=new t(r,i);return o.render(e,n),o},t}(),ht=function(){function t(t,e,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=ot.createElement("button",it.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(t){n.click()})),n.append(this.fileSelectionButton),this.fileScanInput=ot.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",(function(t){if(null!=t&&null!=t.target){var e=t.target;if(!e.files||0!==e.files.length){var n=e.files[0],o=n.name;i.setImageNameToButton(o),r(n)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var e=t.dataTransfer;if(e){var n=e.files;if(!n||0===n.length)return;for(var s=!1,a=0;a<n.length;++a){var c=n.item(a);if(c&&c.type.match(/image.*/)){s=!0;var l=c.name;i.setImageNameToButton(l),r(c),o.innerText=p.dragAndDropMessage();break}}s||(o.innerText=p.dragAndDropMessageOnlyImages())}}))}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=p.dragAndDropMessage(),t.style.fontWeight="400",t},t.prototype.setImageNameToButton=function(t){if(t.length>20){var e=t.substring(0,8),r=t.length,n=t.substring(r-8,r);t="".concat(e,"....").concat(n)}var i=p.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=i},t.prototype.setInitialValueToButton=function(){var t=p.fileSelectionChooseImage()+" - "+p.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){return new t(e,r,n)},t}(),ut=function(){function t(t){this.selectElement=ot.createElement("select",it.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return t.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)e.style.display="none";else{var n=p.selectCamera();e.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],c=a.id,l=null==a.label?c:a.label;l&&""!==l||(l=[p.anonymousCameraPrefix(),i++].join(" "));var h=document.createElement("option");h.value=c,h.innerText=l,this.options.push(h),this.selectElement.appendChild(h)}e.appendChild(this.selectElement),t.appendChild(e)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return!0===this.selectElement.disabled},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(t){for(var e=0,r=this.options;e<r.length;e++)if(r[e].value===t)return!0;return!1},t.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},t.prototype.hasSingleItem=function(){return 1===this.cameras.length},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),dt=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ot.createElement("input",it.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=p.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",(function(){return n.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return n.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var t=p.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(t,e,r,n){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}();!function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(U||(U={}));var ft=function(){function t(t,e,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(e),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new nt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new d(this.verbose),this.persistedDataManager=new J,!0!==e.rememberLastUsedCamera&&this.persistedDataManager.reset()}return t.prototype.render=function(t,e){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(e,n){if(t)t(e,n);else{if(r.lastMatchFound===e)return;r.lastMatchFound=e,r.setHeaderMessage(p.lastMatch(e),U.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(t,r){e&&e(t,r)};var n,i,o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new W(this.getScanRegionId(),(n=this.config,i=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:i}))},t.prototype.pause=function(t){(f(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var t=this,e=function(){var e=document.getElementById(t.elementId);e&&(e.innerHTML="",t.resetBasicLayout(e))};return this.html5Qrcode?new Promise((function(r,n){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then((function(n){t.html5Qrcode?(t.html5Qrcode.clear(),e(),r()):r()})).catch((function(e){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",e),n(e)})):(t.html5Qrcode.clear(),e(),r()):r()})):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(t){return t?(t.fps||(t.fps=c.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!c.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=c.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=c.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:c.SCAN_DEFAULT_FPS,rememberLastUsedCamera:c.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:c.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var e=document.createElement("div"),r=this.getScanRegionId();e.id=r,e.style.width="100%",e.style.minHeight="100px",e.style.textAlign="center",t.appendChild(e),nt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div"),i=this.getDashboardId();n.id=i,n.style.width="100%",t.appendChild(n),this.setupInitialDashboard(n)},t.prototype.resetBasicLayout=function(t){t.style.border="none"},t.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e),(new et).renderInto(e);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",e.appendChild(r)},t.prototype.createSection=function(t){var e=document.createElement("div");e.id=this.getDashboardSectionId(),e.style.width="100%",e.style.padding="10px 0px 10px 0px",e.style.textAlign="left",t.appendChild(e)},t.prototype.createCameraListUi=function(t,e,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(p.cameraPermissionRequesting());var i=function(){r||n.createPermissionButton(t,e)};W.getCameras().then((function(r){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),r&&r.length>0?(t.removeChild(e),n.renderCameraSelection(r)):(n.setHeaderMessage(p.noCameraFound(),U.STATUS_WARNING),i())})).catch((function(t){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:i(),n.setHeaderMessage(t,U.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)}))},t.prototype.createPermissionButton=function(t,e){var r=this,n=ot.createElement("button",this.getCameraPermissionButtonId());n.innerText=p.cameraPermissionTitle(),n.addEventListener("click",(function(){n.disabled=!0,r.createCameraListUi(t,e,n)})),e.appendChild(n)},t.prototype.createPermissionsUi=function(t,e){var r=this;nt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?rt.hasPermissions().then((function(n){n?r.createCameraListUi(t,e):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,e))})).catch((function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,e)})):this.createPermissionButton(t,e)},t.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");t.appendChild(e);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=nt.isCameraScanType(this.currentScanType)?"block":"none",e.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(e)},t.prototype.renderFileScanUi=function(t){var e=nt.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=ht.create(t,e,(function(t){if(!r.html5Qrcode)throw"html5Qrcode not defined";nt.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(p.loadingImage()),r.html5Qrcode.scanFileV2(t,!0).then((function(t){r.resetHeaderMessage(),r.qrCodeSuccessCallback(t.decodedText,t)})).catch((function(t){r.setHeaderMessage(t,U.STATUS_WARNING),r.qrCodeErrorCallback(t,u.createFrom(t))})))}))},t.prototype.renderCameraSelection=function(t){var e=this,r=this,n=document.getElementById(this.getDashboardSectionCameraScanRegionId());n.style.textAlign="center";var i=dt.create(n,!1),o=ut.create(n,t),s=document.createElement("span"),a=ot.createElement("button",it.CAMERA_START_BUTTON_ID);a.innerText=p.scanButtonStartScanningText(),s.appendChild(a);var c,l=ot.createElement("button",it.CAMERA_STOP_BUTTON_ID);l.innerText=p.scanButtonStopScanningText(),l.style.display="none",l.disabled=!0,s.appendChild(l),n.appendChild(s);var h=function(t){t||(a.style.display="none"),a.innerText=p.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,t&&(a.style.display="inline-block")};if(a.addEventListener("click",(function(t){a.innerText=p.scanButtonScanningStarting(),o.disable(),a.disabled=!0,a.style.opacity="0.5",e.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var n,u=o.getValue();r.persistedDataManager.setLastUsedCameraId(u),r.html5Qrcode.start(u,(n=r.config,{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then((function(t){l.disabled=!1,l.style.display="inline-block",h(!1);var n=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===e.config.showTorchButtonIfSupported&&function(t){t.torchFeature().isSupported()?(c?c.updateTorchCapability(t.torchFeature()):c=lt.create(s,t.torchFeature(),{display:"none",marginLeft:"5px"},(function(t){r.setHeaderMessage(t,U.STATUS_WARNING)})),c.show()):c&&c.hide()}(n),!0===e.config.showZoomSliderIfSupported&&function(t){var r=t.zoomFeature();if(r.isSupported()){i.setOnCameraZoomValueChangeCallback((function(t){r.apply(t)}));var n,o,s,a=1;e.config.defaultZoomValueIfSupported&&(a=e.config.defaultZoomValueIfSupported),n=a,o=r.min(),a=n>(s=r.max())?s:n<o?o:n,i.setValues(r.min(),r.max(),a,r.step()),i.show()}}(n)})).catch((function(t){r.showHideScanTypeSwapLink(!0),o.enable(),h(!0),r.setHeaderMessage(t,U.STATUS_WARNING)}))})),o.hasSingleItem()&&a.click(),l.addEventListener("click",(function(t){if(!r.html5Qrcode)throw"html5Qrcode not defined";l.disabled=!0,r.html5Qrcode.stop().then((function(t){e.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),o.enable(),a.disabled=!1,l.style.display="none",a.style.display="inline-block",c&&(c.reset(),c.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),r.insertCameraScanImageToScanRegion()})).catch((function(t){l.disabled=!1,r.setHeaderMessage(t,U.STATUS_WARNING)}))})),r.persistedDataManager.getLastUsedCameraId()){var u=r.persistedDataManager.getLastUsedCameraId();o.hasValue(u)?(o.setValue(u),a.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var t=this,e=p.textIfCameraScanSelected(),r=p.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var s=ot.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=nt.isCameraScanType(this.currentScanType)?e:r,s.addEventListener("click",(function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,nt.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),s.innerText=r,t.currentScanType=i.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),s.innerText=e,t.currentScanType=i.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")})),o.appendChild(s),n.appendChild(o)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;this.persistedDataManager.hasCameraPermissions()&&rt.hasPermissions().then((function(r){if(r){var n=document.getElementById(e.getCameraPermissionButtonId());if(!n)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else e.persistedDataManager.setHasPermission(!1)})).catch((function(t){e.persistedDataManager.setHasPermission(!1)}))},t.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},t.prototype.setHeaderMessage=function(t,e){e||(e=U.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",e){case U.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case U.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case U.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},t.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return e.innerHTML="<br>",void e.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){e.innerHTML="<br>",e.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Z,this.cameraScanImage.alt=p.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return e.innerHTML="<br>",void e.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){e.innerHTML="<br>",e.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Q,this.fileScanImage.alt=p.fileScanAltText()},t.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return it.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return it.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}()})(),__Html5QrcodeLibrary__=n})();if (window) { if (!Html5QrcodeScanner) { var Html5QrcodeScanner = window.__Html5QrcodeLibrary__.Html5QrcodeScanner; } if (!Html5Qrcode) { var Html5Qrcode = window.__Html5QrcodeLibrary__.Html5Qrcode; } if (!Html5QrcodeSupportedFormats) { var Html5QrcodeSupportedFormats = window.__Html5QrcodeLibrary__.Html5QrcodeSupportedFormats } if (!Html5QrcodeScannerState) { var Html5QrcodeScannerState = window.__Html5QrcodeLibrary__.Html5QrcodeScannerState; } if (!Html5QrcodeScanType) { var Html5QrcodeScanType = window.__Html5QrcodeLibrary__.Html5QrcodeScanType; }}
 (function(){
 
    window.IframePost = function(options){
        var keyaccess = options?options.key:"_crossiddata";
        var callback_bridges = {};

        return {
             iframe:null,
             onload : function(){
                this.iframe = this.contentWindow;
                delete this.onload;
             },
             send2Host : function(data,target){
                var e = {"side":'c'};
                e[keyaccess] = data;
                
                (target||(window.opener||window.parent)).postMessage(JSON.stringify(e),"*");
                return this;
             },
             listen : function(callback){
             
                   
                  //listen from data -> any domain
                    window.addEventListener("message",function(e) {
                            var key = e.message ? "message" : "data";
                            var data = e[key];

                            if(data=="uclose"){
                                // $('#'+popupid).removeClass('active');
                            }

                            // console.log(e);
                            try{
                                data=JSON.parse(data);
                            }catch(e){}


 

                            //server trigger me
                            if(typeof data=='object' && data.side=='s'){

                                data = data[keyaccess]; 
                                if(callback)callback(data);
                              
                                
                               var call_ = callback_bridges[data.id_callback];   
                              if(call_ && data.response){

                                call_.success.call(callback_bridges,data.response);
                                if(call_.live==0){
                                 delete callback_bridges[data.id_callback];
                                }
                              }
                               
                            }
                           
                    },true);
                 
                return this;
             },
            once: function(data,f,ff){
               
               if(this.iframe){
                    if(f){
                        var e ={
                            data : data
                        };
                        e.id_callback = "fn"+Date.now();
                        e.success = f;
                        e.live =1;
                        e.error = ff;
                        callback_bridges[e.id_callback] = e;

                        data.id_callback = e.id_callback;
                    }
                  
                  this.send2Host(data);
                }else{
                    console.error('Can not connect to server');
                }
               
            },
            on: function(data,f,ff){
               
               if(this.iframe){
                    if(f){
                        var e ={
                            data : data
                        };
                        e.id_callback = "fn"+Date.now();
                        e.success = f;
                        e.error = ff;
                        e.live =0;
                        callback_bridges[e.id_callback] = e;

                        data.id_callback = e.id_callback;
                    }
                  
                  this.send2Host(data);
                }else{
                    console.error('Can not connect to server');
                }
               
            },
            call: function(data,f,ff){
               
               if(this.iframe){
                    if(f){
                        var e ={
                            data : data
                        };
                        e.id_callback = "fn"+Date.now();
                        e.success = f;
                        e.error = ff;
                        callback_bridges[e.id_callback] = e;

                        data.id_callback = e.id_callback;
                    }
                  var ee ={side:'c'};
                  ee[keyaccess] = data;
                  this.iframe.postMessage(JSON.stringify(ee),"*");
                }else{
                    console.error('Can not connect to server');
                }
               
            }
          };

    }; 

})();

(function(win){
    
        setTimeout(function(){
            
            var nn = win.$||win.jQuery;
            if(nn){
                nn(document).on("onBack",function(e,info){
                    if(nn(".iframewindpow.active").length){
                        //stop back
                        info.data =0;
                        nn(".iframewindpow.active").last().removeClass("active");
                    }
                });
            }
             
        },2*1000);
    
    var iframes ={};
    var iframeWindowload = 0;
    var lists = {};
    var history =[];
    win.iframeWindow= function (options){
         if(iframeWindowload==0){
            iframeWindowload =1;
            jQuery("body").append(`<style>
.iframewindpow,.iframewindpow iframe{width:100%;height:100%;    border-radius:25px 25px 0 0 }.iframewindpow{visibility:hidden!important;z-index:10000000000000;-webkit-transition:.3s ease-in;-o-transition:.3s ease-in;transition:.3s ease-in;background-color:rgb(51 51 51 / 19%);-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}.iframewindpow .body{height:90%;border-radius:24px 24px 0 0;padding:0;width:100%;background-color:#fff;color:#333;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.iframewindpow,.iframewindpow .body{position:absolute;bottom:0;left:0}.iframewindpow.active{z-index:10000000000001;visibility:visible!important;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}.iframewindpow .flex{-webkit-box-flex:1;-ms-flex:1;flex:1}.iframewindpow .btnok{width:100%;text-align:center}.iframewindpow .ac{top: -7%;position:absolute;left: 45%;}.iframewindpow .ac span{    font-size: 20px;
    color: #fff;
    background-color: #333;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: inline-block;
    text-align: center;
    line-height: 40px;}
    .iframewindpow .flex-body{
            border-radius: 16px 16px 0 0;
    overflow: hidden;
    }

    @media   (min-width: 1200px) {
      .iframewindpow .body{
            width: 70%;
            margin-left: 15%;
      }
    }
            </style>`);
         }
         options = typeof options=="object"?options:{url:options,ads:"",icon_close:"X"};
         options.url = decodeURIComponent(options.url);

         var id = md5(options.url);

         if(lists[id]){
            return lists[id].open();
            
         }
 
         var frame = jQuery("#"+id);
         if(frame.length==0){
            jQuery("body").append(`<div id="${id}" class="iframewindpow">

                   <div class="body">

                     <div class="ac">

                      <span onclick="$(this).closest('.iframewindpow').removeClass(&quot;active&quot;)">${options.icon_close}</span>

                     </div>

                     <div class="flex">
                        <iframe  frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen src="${options.url}" name="${id}" />
                     </div>
                    
                     <div class="adblock">
                     </div>
                  </div>

                </div>`);
             frame = jQuery("#"+id);   
             frame.find("iframe").load(function(){
                frame.window = this.contentWindow;
                if(options.callback)options.callback();

                if(win.ADevice){
                    var aaa = encodeURIComponent("adevice:"+JSON.stringify(ADevice));
                    frame.window.postMessage(aaa,"*");
                }
                

             });
         }
        frame.callbacks ={};
         var methods={
            settings : options,
            open : function(){
                 history.push(id);
                setTimeout(function(){
                    frame.addClass("active");
                    if(frame.window){
                        frame.window.postMessage(encodeURIComponent("onfocus:"+Date.now()),"*");
                    }
                    if(methods.settings.ads){
                        frame.find(".adblock").html(methods.settings.ads);
                    }
                    jQuery("body").addClass("iframewindowactive");
                },500);
                return this;
            },
            close : function(){
                frame.removeClass("active");
                jQuery("body").removeClass("iframewindowactive");
                return this;
            },
            remove : function(){
                frame.remove();
                jQuery("body").removeClass("iframewindowactive");
                delete iframes["frame"+id];
                delete lists[id];
                return this;
            },
            send:function(e,data,f){
                if(frame.window){
                    data.id =e+Date.now();
                    data.bridge = "frame"+id;
                    data.ac = e;
                    data.data = data;
                    data.callback = f||function(){};
                    frame.callbacks[data.id] = data; 
                    frame.window.postMessage(encodeURIComponent(JSON.stringify(data||{})),"*");
                }
            }
         };

         iframes["frame"+id] = frame;
         lists[id] = methods;
         return methods;
     };

      win.addEventListener("message",function(e){
        var data = decodeURIComponent(e.data);
        if(typeof data =="string"&&data.includes("iframewindow:")){
            
            //check in level top 0
            if(win.top==win.self){
                var url = decodeURIComponent(data.replace("iframewindow:",""));
                // alert(document.location.href+" OK: "+url);
                iframeWindow(url).open();
            }
            
            return;   
        }
        try{
            data = JSON.parse(data);
        }catch(eee){}

        if(typeof data =="object"&& data.bridge){
            
            if(iframes[data.bridge]){
               
               //callback
               if(iframes[data.bridge].callbacks[data.id]){
                  iframes[data.bridge].callbacks[data.id].callback(data.response);
               }
       
            }
        }
    });
     /**
      * Tell sub sub iframe tel open window
      * @param  {[type]} url [description]
      * @return {[type]}     [description]
      */
     win.openWindow = function(url){
         if(win.top==win.self){
            iframeWindow(url).open();
         }else{
            (win.opener||win.parent).postMessage(encodeURIComponent("iframewindow:"+url),"*");
         }
         
     };
     openWindow.reset = function(idframe){
        history=[idframe];
        $(".iframewindpow").removeClass("active");
        $("#"+idframe).removeClass("active");
     };
     openWindow.navigate = function(idframe){
        history.push(idframe);
         $("#"+idframe).addClass("active"); 
     };
     openWindow.back = function(){
        if(history.length){
            var n = history.pop();
            $("#"+n).removeClass("active");
            var last = history[history.length];
            if(last)
            $("#"+last).addClass("active");
        }
        
     };
     var underOpen = function(items){
       
            var l = items.length;
            

            function next(i){
                var href = items[i];
                if(href){
                    iframeWindow({url:href,callback:function(){
                        if(i<l){
                            next(i+1);
                        }
                    }});
                }
                
            }

            next(0);
         
    };

     openWindow.underOpen = function(ele){
       
            var items = jQuery(ele);
            var l = [];
             items.each(function(){
                var href = this.href||$(this).attr("data-href");
                if(href)l.push(href);
             });
         
            underOpen(l);
             
     };

})(window);


(function(){
   //<div class="fastimage" src="https://img.freepik.com/free-vector/flat-geometric-background_23-2148957201.jpg?size=626&ext=jpg"> </div>
   var cls=  ".fastimage[src]";
   function loader(me){
     var ll = me.find(".ll");
    if(ll.length==0){
      me.html('<div class="ll"> <div class="l green"></div></div>');
      ll = me.find(".ll");
    }

    return ll;
   }
   $(document).ready(function () {
    $("body").append('<style>.fastimage{position:relative;background-size:cover;background-repeat:no-repeat;width:105px;height:75px;border-radius: 8px;display:inline-block;background-color:#9e9e9e}.fastimage.favatar{width: 55px!important;height: 55px!important;border-radius: 50%;}.fastimage.ffull{width:100%;height:100%}.fastimage.fthumbnail{width:305px;height:275px}.fastimage.favatar{width:75px;height:75px}.fastimage.fitem{width:175px;height:125px}.fastimage .ll{z-index:10;position:absolute;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%}.fastimage .l,.fastimage .l:after{border-radius:50%;width:5em;height:5em}.fastimage .l.green{border-top:0.5em solid rgb(0 150 136 / 75%);border-right:0.5em solid rgb(0 150 136 / 75%);border-bottom:0.5em solid rgb(0 150 136 / 75%);border-left:0.5em solid #fff}.fastimage .l{font-size:6px;text-indent:-9999em;border-top:0.5em solid rgba(255,255,255,.2);border-right:0.5em solid rgba(255,255,255,.2);border-bottom:0.5em solid rgba(255,255,255,.2);border-left:0.5em solid #fff;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:lload8 1.1s infinite linear;animation:lload8 1.1s infinite linear}@-webkit-keyframes lload8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lload8{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}<\/style>');
  });
   window.fastimage = {
    image :"https://static.thenounproject.com/png/210732-200.png",
    refresh: function (ele) {
      (ele?ele.find(cls):$(cls)).each(function (i,v) {
        if(v.loading){return;}
        var me = $(this);
        v.loading  =  true;
        var ll = loader(me);
        ll.show();

        var src = me.attr("src");
        me.removeAttr("src");
        var img = new Image();
        img.async = true;
        img.onload = function () {
          v.loading  =false;
          me.css("background-image", "url(" + this.src + ")");
          ll.delay(300).remove();
        };
        img.onerror = function () {
          v.loading  =false;
          me.css("background-image", "url(" +window.fastimage.image + ")");
          ll.remove();
        };
        img.src=src;
        
      });
    }
  };
 })();
(function(){
	/* https://codepen.io/timothylong/pen/HhAer */
/*https://jsfiddle.net/SySZL/*/
	function ZoomImg(ele_img){
         var MIN_SCALE = 1; // 1=scaling when first loaded
      var MAX_SCALE = 64;

      // HammerJS fires "pinch" and "pan" events that are cumulative in nature and not
      // deltas. Therefore, we need to store the "last" values of scale, x and y so that we can
      // adjust the UI accordingly. It isn't until the "pinchend" and "panend" events are received
      // that we can set the "last" values.

      // Our "raw" coordinates are not scaled. This allows us to only have to modify our stored
      // coordinates when the UI is updated. It also simplifies our calculations as these
      // coordinates are without respect to the current scale.

      var imgWidth = null;
      var imgHeight = null;
      var viewportWidth = null;
      var viewportHeight = null;
      var scale = null;
      var lastScale = null;
      var container = null;
      var img = null;
      var x = 0;
      var lastX = 0;
      var y = 0;
      var lastY = 0;
      var pinchCenter = null;

      // We need to disable the following event handlers so that the browser doesn't try to
      // automatically handle our image drag gestures.
      var disableImgEventHandlers = function () {
        var events = ['onclick', 'onmousedown', 'onmousemove', 'onmouseout', 'onmouseover',
                      'onmouseup', 'ondblclick', 'onfocus', 'onblur'];

        events.forEach(function (event) {
          img[event] = function () {
            return false;
          };
        });
      };

      // Traverse the DOM to calculate the absolute position of an element
      var absolutePosition = function (el) {
        var x = 0,
          y = 0;

        while (el !== null) {
          x += el.offsetLeft;
          y += el.offsetTop;
          el = el.offsetParent;
        }

        return { x: x, y: y };
      };

      var restrictScale = function (scale) {
        if (scale < MIN_SCALE) {
          scale = MIN_SCALE;
        } else if (scale > MAX_SCALE) {
          scale = MAX_SCALE;
        }
        return scale;
      };

      var restrictRawPos = function (pos, viewportDim, imgDim) {
        if (pos < viewportDim/scale - imgDim) { // too far left/up?
          pos = viewportDim/scale - imgDim;
        } else if (pos > 0) { // too far right/down?
          pos = 0;
        }
        return pos;
      };

      var updateLastPos = function (deltaX, deltaY) {
        lastX = x;
        lastY = y;
      };

      var translate = function (deltaX, deltaY) {
        // We restrict to the min of the viewport width/height or current width/height as the
        // current width/height may be smaller than the viewport width/height

        var newX = restrictRawPos(lastX + deltaX/scale,
                                  Math.min(viewportWidth, curWidth), imgWidth);
        x = newX;
        img.style.marginLeft = Math.ceil(newX*scale) + 'px';

        var newY = restrictRawPos(lastY + deltaY/scale,
                                  Math.min(viewportHeight, curHeight), imgHeight);
        y = newY;
        img.style.marginTop = Math.ceil(newY*scale) + 'px';
      };

      var zoom = function (scaleBy) {
        scale = restrictScale(lastScale*scaleBy);

        curWidth = imgWidth*scale;
        curHeight = imgHeight*scale;

        img.style.width = Math.ceil(curWidth) + 'px';
        img.style.height = Math.ceil(curHeight) + 'px';

        // Adjust margins to make sure that we aren't out of bounds
        translate(0, 0);
      };

      var rawCenter = function (e) {
        var pos = absolutePosition(container);

        // We need to account for the scroll position
        var scrollLeft = window.pageXOffset ? window.pageXOffset : document.body.scrollLeft;
        var scrollTop = window.pageYOffset ? window.pageYOffset : document.body.scrollTop;

        var zoomX = -x + (e.center.x - pos.x + scrollLeft)/scale;
        var zoomY = -y + (e.center.y - pos.y + scrollTop)/scale;

        return { x: zoomX, y: zoomY };
      };

      var updateLastScale = function () {
        lastScale = scale;
      };

      var zoomAround = function (scaleBy, rawZoomX, rawZoomY, doNotUpdateLast) {
        // Zoom
        zoom(scaleBy);

        // New raw center of viewport
        var rawCenterX = -x + Math.min(viewportWidth, curWidth)/2/scale;
        var rawCenterY = -y + Math.min(viewportHeight, curHeight)/2/scale;

        // Delta
        var deltaX = (rawCenterX - rawZoomX)*scale;
        var deltaY = (rawCenterY - rawZoomY)*scale;

        // Translate back to zoom center
        translate(deltaX, deltaY);

        if (!doNotUpdateLast) {
          updateLastScale();
          updateLastPos();
        }
      };

      var zoomCenter = function (scaleBy) {
        // Center of viewport
        var zoomX = -x + Math.min(viewportWidth, curWidth)/2/scale;
        var zoomY = -y + Math.min(viewportHeight, curHeight)/2/scale;

        zoomAround(scaleBy, zoomX, zoomY);
      };


      var init = function (ele) {

          img = ele;
          $(ele).addClass('pinch-zoom-image');
          // .wrap( "<div class='pinch-zoom-container'></div>" );
 		  container = img.parentElement;
 		  var maxh = window.innerHeight-200;
 		  	$(container).height(img.height> maxh?maxh:img.height);	

          disableImgEventHandlers();

          imgWidth = img.width;
          imgHeight = img.height;
          viewportWidth = img.offsetWidth;
          scale = viewportWidth/imgWidth;
          lastScale = scale;
          viewportHeight = img.parentElement.offsetHeight;
          curWidth = imgWidth*scale;
          curHeight = imgHeight*scale;

          var hammer = new Hammer(container, {
            domEvents: true
          });

          hammer.get('pinch').set({
            enable: true
          });

          hammer.on('pan', function (e) {
            translate(e.deltaX, e.deltaY);
          });

          hammer.on('panend', function (e) {
            updateLastPos();
          });

          hammer.on('pinch', function (e) {

            // We only calculate the pinch center on the first pinch event as we want the center to
            // stay consistent during the entire pinch
            if (pinchCenter === null) {
              pinchCenter = rawCenter(e);
              var offsetX = pinchCenter.x*scale - (-x*scale + Math.min(viewportWidth, curWidth)/2);
              var offsetY = pinchCenter.y*scale - (-y*scale + Math.min(viewportHeight, curHeight)/2);
              pinchCenterOffset = { x: offsetX, y: offsetY };
            }

            // When the user pinch zooms, she/he expects the pinch center to remain in the same
            // relative location of the screen. To achieve this, the raw zoom center is calculated by
            // first storing the pinch center and the scaled offset to the current center of the
            // image. The new scale is then used to calculate the zoom center. This has the effect of
            // actually translating the zoom center on each pinch zoom event.
            var newScale = restrictScale(scale*e.scale);
            var zoomX = pinchCenter.x*newScale - pinchCenterOffset.x;
            var zoomY = pinchCenter.y*newScale - pinchCenterOffset.y;
            var zoomCenter = { x: zoomX/newScale, y: zoomY/newScale };

            zoomAround(e.scale, zoomCenter.x, zoomCenter.y, true);
          });

          hammer.on('pinchend', function (e) {
            updateLastScale();
            updateLastPos();
            pinchCenter = null;
          });

          hammer.on('doubletap', function (e) {
            var c = rawCenter(e);
            zoomAround(2, c.x, c.y);
          });

        };

        init(ele_img);

        return {
          zoomIn : function (num) {
            zoomCenter(num?num:2);
            return this;
          },zoomOut : function (num) {
            zoomCenter(num?num:1/2);
            return this;
          }
        };
      }
 
    window.ZoomImg = ZoomImg;  
    $.ZoomImg  = function (options){
    	options = $.extend({
    		ui : true
    	},options,true);
    	var modal = $("#open-modal");
    	modal.find(".pinch-zoom-container").html('<img class="pinch-zoom-image" src="'+options.src+'">');
	    modal.addClass('active');
	    var img = ZoomImg(modal.find(".pinch-zoom-container img")[0]);
	    if(options.ui){
	   		modal.on('click',".btn-in",function(){
	         img.zoomIn();
	       });
	       modal.on('click',".btn-out",function(){
	         img.zoomOut();
	       });
	    }
    };
    $.fn.ZoomImg = function(options){

    	return this.each(function(){ 
    		var a = new ZoomImg(this);
    		$(this).addClass('zoom-image').data("ZoomImg",a);
    		this.ZoomImg = a;
    	});
	};

	$(document).ready(function(){
		$("body").append('<div id="open-modal" class="modal-window"><div class="b"> <a href="#" title="Close" class="modal-close" onclick="$(this).closest(\'.modal-window\').removeClass(\'active\')">ng</a><div><div class="pinch-zoom-container"></div><div class="btns" style="text-align: center;"> <button class="btn btn-primary btn-in btn-sm">Phng to</button> <button class="btn btn-primary btn-out btn-sm">Thu nh</button></div></div></div></div><style>.pinch-zoom-container{overflow:hidden;    margin-bottom: 16px;}.pinch-zoom-image{width:100%;max-width: initial!important;}.modal-window{position:fixed;background-color:rgba(255,255,255,.25);top:0;right:0;bottom:0;left:0;z-index:100000000000000;visibility:hidden;opacity:0;pointer-events:none;transition:all .3s}.modal-window.active,.modal-window:target{visibility:visible;opacity:1;pointer-events:auto}.modal-window:before{content:" ";position:absolute;top:0;left:0;height:100%;width:100%;z-index:1;background-color:rgb(0 0 0 / 84%)}.modal-window>div{z-index:2;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:16px}.modal-window header{font-weight:700}.modal-window h1{font-size:150%;margin:0 0 15px}.modal-close{color:#fff;line-height:50px;font-size:80%;position:absolute;right:10px;text-align:center;top:-30px;width:70px;text-decoration:none}.modal-close:hover{color:#000}<\/style>');
	});
})();
/*
var onLoad = function () {
        
        document.getElementById('pinch-zoom-image-id').onclick = function () {
           $("#open-modal .pinch-zoom-container").html('<img class="pinch-zoom-image" src="'+this.src+'">');
           $("#open-modal").addClass('active');
            var img = $("#open-modal img").ZoomImg();
           $("#open-modal .btn-in").on('click',function(){
             zoom.zoomIn();
           });
           $("#open-modal .btn-out").on('click',function(){
             zoom.zoomOut();
           });
        };


      };
 */




$(document).on("onePage",function(event,e){
    var modal = $(e.page);



    modal.find(".page-content").on("scroll",function(){
        var owl = this;
        
        $(this).find("[data-setbg]:not(.loaded)").each(function(){
            isInViewport(owl,this);
        });
         
    });
    
});







/*!
 * The Final Countdown for jQuery v2.2.0 (http://hilios.github.io/jQuery.countdown/)
 * Copyright (c) 2016 Edson Hilios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a){if(a instanceof Date)return a;if(String(a).match(g))return String(a).match(/^[0-9]*$/)&&(a=Number(a)),String(a).match(/\-/)&&(a=String(a).replace(/\-/g,"/")),new Date(a);throw new Error("Couldn't cast `"+a+"` to a date object.")}function c(a){var b=a.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(b)}function d(a){return function(b){var d=b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(d)for(var f=0,g=d.length;f<g;++f){var h=d[f].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),j=c(h[0]),k=h[1]||"",l=h[3]||"",m=null;h=h[2],i.hasOwnProperty(h)&&(m=i[h],m=Number(a[m])),null!==m&&("!"===k&&(m=e(l,m)),""===k&&m<10&&(m="0"+m.toString()),b=b.replace(j,m.toString()))}return b=b.replace(/%%/,"%")}}function e(a,b){var c="s",d="";return a&&(a=a.replace(/(:|;|\s)/gi,"").split(/\,/),1===a.length?c=a[0]:(d=a[0],c=a[1])),Math.abs(b)>1?c:d}var f=[],g=[],h={precision:100,elapse:!1,defer:!1};g.push(/^[0-9]*$/.source),g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g=new RegExp(g.join("|"));var i={Y:"years",m:"months",n:"daysToMonth",d:"daysToWeek",w:"weeks",W:"weeksToMonth",H:"hours",M:"minutes",S:"seconds",D:"totalDays",I:"totalHours",N:"totalMinutes",T:"totalSeconds"},j=function(b,c,d){this.el=b,this.$el=a(b),this.interval=null,this.offset={},this.options=a.extend({},h),this.firstTick=!0,this.instanceNumber=f.length,f.push(this),this.$el.data("countdown-instance",this.instanceNumber),d&&("function"==typeof d?(this.$el.on("update.countdown",d),this.$el.on("stoped.countdown",d),this.$el.on("finish.countdown",d)):this.options=a.extend({},h,d)),this.setFinalDate(c),this.options.defer===!1&&this.start()};a.extend(j.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var a=this;this.update(),this.interval=setInterval(function(){a.update.call(a)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),f[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(a){this.finalDate=b(a)},update:function(){if(0===this.$el.closest("html").length)return void this.remove();var a,b=new Date;return a=this.finalDate.getTime()-b.getTime(),a=Math.ceil(a/1e3),a=!this.options.elapse&&a<0?0:Math.abs(a),this.totalSecsLeft===a||this.firstTick?void(this.firstTick=!1):(this.totalSecsLeft=a,this.elapsed=b>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-b.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft},void(this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish"))))},dispatchEvent:function(b){var c=a.Event(b+".countdown");c.finalDate=this.finalDate,c.elapsed=this.elapsed,c.offset=a.extend({},this.offset),c.strftime=d(this.offset),this.$el.trigger(c)}}),a.fn.countdown=function(){var b=Array.prototype.slice.call(arguments,0);return this.each(function(){var c=a(this).data("countdown-instance");if(void 0!==c){var d=f[c],e=b[0];j.prototype.hasOwnProperty(e)?d[e].apply(d,b.slice(1)):null===String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(d.setFinalDate.call(d,e),d.start()):a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,e))}else new j(this,b[0],b[1])})}});
;(function ($, document, window) {
    var
    // default settings object.
        defaults = {
            label: 'MENU',
            duplicate: true,
            duration: 200,
            easingOpen: 'swing',
            easingClose: 'swing',
            closedSymbol: '&#9658;',
            openedSymbol: '&#9660;',
            prependTo: 'body',
            appendTo: '',
            parentTag: 'a',
            closeOnClick: false,
            allowParentLinks: false,
            nestedParentLinks: true,
            showChildren: false,
            removeIds: true,
            removeClasses: false,
            removeStyles: false,
            brand: '',
            animations: 'jquery',
            init: function () {},
            beforeOpen: function () {},
            beforeClose: function () {},
            afterOpen: function () {},
            afterClose: function () {}
        },
        mobileMenu = 'slicknav',
        prefix = 'slicknav',

        Keyboard = {
            DOWN: 40,
            ENTER: 13,
            ESCAPE: 27,
            LEFT: 37,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38,
        };

    function Plugin(element, options) {
        this.element = element;

        // jQuery has an extend method which merges the contents of two or
        // more objects, storing the result in the first object. The first object
        // is generally empty as we don't want to alter the default options for
        // future instances of the plugin
        this.settings = $.extend({}, defaults, options);

        // Don't remove IDs by default if duplicate is false
        if (!this.settings.duplicate && !options.hasOwnProperty("removeIds")) {
          this.settings.removeIds = false;
        }

        this._defaults = defaults;
        this._name = mobileMenu;

        this.init();
    }

    Plugin.prototype.init = function () {
        var $this = this,
            menu = $(this.element),
            settings = this.settings,
            iconClass,
            menuBar;

        // clone menu if needed
        if (settings.duplicate) {
            $this.mobileNav = menu.clone();
        } else {
            $this.mobileNav = menu;
        }

        // remove IDs if set
        if (settings.removeIds) {
          $this.mobileNav.removeAttr('id');
          $this.mobileNav.find('*').each(function (i, e) {
              $(e).removeAttr('id');
          });
        }

        // remove classes if set
        if (settings.removeClasses) {
            $this.mobileNav.removeAttr('class');
            $this.mobileNav.find('*').each(function (i, e) {
                $(e).removeAttr('class');
            });
        }

        // remove styles if set
        if (settings.removeStyles) {
            $this.mobileNav.removeAttr('style');
            $this.mobileNav.find('*').each(function (i, e) {
                $(e).removeAttr('style');
            });
        }

        // styling class for the button
        iconClass = prefix + '_icon';

        if (settings.label === '') {
            iconClass += ' ' + prefix + '_no-text';
        }

        if (settings.parentTag == 'a') {
            settings.parentTag = 'a href="#"';
        }

        // create menu bar
        $this.mobileNav.attr('class', prefix + '_nav');
        menuBar = $('<div class="' + prefix + '_menu"></div>');
        if (settings.brand !== '') {
            var brand = $('<div class="' + prefix + '_brand">'+settings.brand+'</div>');
            $(menuBar).append(brand);
        }
        $this.btn = $(
            ['<' + settings.parentTag + ' aria-haspopup="true" role="button" tabindex="0" class="' + prefix + '_btn ' + prefix + '_collapsed">',
                '<span class="' + prefix + '_menutxt">' + settings.label + '</span>',
                '<span class="' + iconClass + '">',
                    '<span class="' + prefix + '_icon-bar"></span>',
                    '<span class="' + prefix + '_icon-bar"></span>',
                    '<span class="' + prefix + '_icon-bar"></span>',
                '</span>',
            '</' + settings.parentTag + '>'
            ].join('')
        );
        $(menuBar).append($this.btn);
        if(settings.appendTo !== '') {
            $(settings.appendTo).append(menuBar);
        } else {
            $(settings.prependTo).prepend(menuBar);
        }
        menuBar.append($this.mobileNav);

        // iterate over structure adding additional structure
        var items = $this.mobileNav.find('li');
        $(items).each(function () {
            var item = $(this),
                data = {};
            data.children = item.children('ul').attr('role', 'menu');
            item.data('menu', data);

            // if a list item has a nested menu
            if (data.children.length > 0) {

                // select all text before the child menu
                // check for anchors

                var a = item.contents(),
                    containsAnchor = false,
                    nodes = [];

                $(a).each(function () {
                    if (!$(this).is('ul')) {
                        nodes.push(this);
                    } else {
                        return false;
                    }

                    if($(this).is("a")) {
                        containsAnchor = true;
                    }
                });

                var wrapElement = $(
                    '<' + settings.parentTag + ' role="menuitem" aria-haspopup="true" tabindex="-1" class="' + prefix + '_item"/>'
                );

                // wrap item text with tag and add classes unless we are separating parent links
                if ((!settings.allowParentLinks || settings.nestedParentLinks) || !containsAnchor) {
                    var $wrap = $(nodes).wrapAll(wrapElement).parent();
                    $wrap.addClass(prefix+'_row');
                } else
                    $(nodes).wrapAll('<span class="'+prefix+'_parent-link '+prefix+'_row"/>').parent();

                if (!settings.showChildren) {
                    item.addClass(prefix+'_collapsed');
                } else {
                    item.addClass(prefix+'_open');
                }

                item.addClass(prefix+'_parent');

                // create parent arrow. wrap with link if parent links and separating
                var arrowElement = $('<span class="'+prefix+'_arrow">'+(settings.showChildren?settings.openedSymbol:settings.closedSymbol)+'</span>');

                if (settings.allowParentLinks && !settings.nestedParentLinks && containsAnchor)
                    arrowElement = arrowElement.wrap(wrapElement).parent();

                //append arrow
                $(nodes).last().after(arrowElement);


            } else if ( item.children().length === 0) {
                 item.addClass(prefix+'_txtnode');
            }

            // accessibility for links
            item.children('a').attr('role', 'menuitem').click(function(event){
                //Ensure that it's not a parent
                if (settings.closeOnClick && !$(event.target).parent().closest('li').hasClass(prefix+'_parent')) {
                        //Emulate menu close if set
                        $($this.btn).click();
                    }
            });

            //also close on click if parent links are set
            if (settings.closeOnClick && settings.allowParentLinks) {
                item.children('a').children('a').click(function (event) {
                    //Emulate menu close
                    $($this.btn).click();
                });

                item.find('.'+prefix+'_parent-link a:not(.'+prefix+'_item)').click(function(event){
                    //Emulate menu close
                        $($this.btn).click();
                });
            }
        });

        // structure is in place, now hide appropriate items
        $(items).each(function () {
            var data = $(this).data('menu');
            if (!settings.showChildren){
                $this._visibilityToggle(data.children, null, false, null, true);
            }
        });

        // finally toggle entire menu
        $this._visibilityToggle($this.mobileNav, null, false, 'init', true);

        // accessibility for menu button
        $this.mobileNav.attr('role','menu');

        // outline prevention when using mouse
        $(document).mousedown(function(){
            $this._outlines(false);
        });

        $(document).keyup(function(){
            $this._outlines(true);
        });

        // menu button click
        $($this.btn).click(function (e) {
            e.preventDefault();
            $this._menuToggle();
        });

        // click on menu parent
        $this.mobileNav.on('click', '.' + prefix + '_item', function (e) {
            e.preventDefault();
            $this._itemClick($(this));
        });

        // check for keyboard events on menu button and menu parents
        $($this.btn).keydown(function (e) {
            var ev = e || event;

            switch(ev.keyCode) {
                case Keyboard.ENTER:
                case Keyboard.SPACE:
                case Keyboard.DOWN:
                    e.preventDefault();
                    if (ev.keyCode !== Keyboard.DOWN || !$($this.btn).hasClass(prefix+'_open')){
                        $this._menuToggle();
                    }
                    
                    $($this.btn).next().find('[role="menuitem"]').first().focus();
                    break;
            }

            
        });

        $this.mobileNav.on('keydown', '.'+prefix+'_item', function(e) {
            var ev = e || event;

            switch(ev.keyCode) {
                case Keyboard.ENTER:
                    e.preventDefault();
                    $this._itemClick($(e.target));
                    break;
                case Keyboard.RIGHT:
                    e.preventDefault();
                    if ($(e.target).parent().hasClass(prefix+'_collapsed')) {
                        $this._itemClick($(e.target));
                    }
                    $(e.target).next().find('[role="menuitem"]').first().focus();
                    break;
            }
        });

        $this.mobileNav.on('keydown', '[role="menuitem"]', function(e) {
            var ev = e || event;

            switch(ev.keyCode){
                case Keyboard.DOWN:
                    e.preventDefault();
                    var allItems = $(e.target).parent().parent().children().children('[role="menuitem"]:visible');
                    var idx = allItems.index( e.target );
                    var nextIdx = idx + 1;
                    if (allItems.length <= nextIdx) {
                        nextIdx = 0;
                    }
                    var next = allItems.eq( nextIdx );
                    next.focus();
                break;
                case Keyboard.UP:
                    e.preventDefault();
                    var allItems = $(e.target).parent().parent().children().children('[role="menuitem"]:visible');
                    var idx = allItems.index( e.target );
                    var next = allItems.eq( idx - 1 );
                    next.focus();
                break;
                case Keyboard.LEFT:
                    e.preventDefault();
                    if ($(e.target).parent().parent().parent().hasClass(prefix+'_open')) {
                        var parent = $(e.target).parent().parent().prev();
                        parent.focus();
                        $this._itemClick(parent);
                    } else if ($(e.target).parent().parent().hasClass(prefix+'_nav')){
                        $this._menuToggle();
                        $($this.btn).focus();
                    }
                    break;
                case Keyboard.ESCAPE:
                    e.preventDefault();
                    $this._menuToggle();
                    $($this.btn).focus();
                    break;    
            }
        });

        // allow links clickable within parent tags if set
        if (settings.allowParentLinks && settings.nestedParentLinks) {
            $('.'+prefix+'_item a').click(function(e){
                    e.stopImmediatePropagation();
            });
        }
    };

    //toggle menu
    Plugin.prototype._menuToggle = function (el) {
        var $this = this;
        var btn = $this.btn;
        var mobileNav = $this.mobileNav;

        if (btn.hasClass(prefix+'_collapsed')) {
            btn.removeClass(prefix+'_collapsed');
            btn.addClass(prefix+'_open');
        } else {
            btn.removeClass(prefix+'_open');
            btn.addClass(prefix+'_collapsed');
        }
        btn.addClass(prefix+'_animating');
        $this._visibilityToggle(mobileNav, btn.parent(), true, btn);
    };

    // toggle clicked items
    Plugin.prototype._itemClick = function (el) {
        var $this = this;
        var settings = $this.settings;
        var data = el.data('menu');
        if (!data) {
            data = {};
            data.arrow = el.children('.'+prefix+'_arrow');
            data.ul = el.next('ul');
            data.parent = el.parent();
            //Separated parent link structure
            if (data.parent.hasClass(prefix+'_parent-link')) {
                data.parent = el.parent().parent();
                data.ul = el.parent().next('ul');
            }
            el.data('menu', data);
        }
        if (data.parent.hasClass(prefix+'_collapsed')) {
            data.arrow.html(settings.openedSymbol);
            data.parent.removeClass(prefix+'_collapsed');
            data.parent.addClass(prefix+'_open');
            data.parent.addClass(prefix+'_animating');
            $this._visibilityToggle(data.ul, data.parent, true, el);
        } else {
            data.arrow.html(settings.closedSymbol);
            data.parent.addClass(prefix+'_collapsed');
            data.parent.removeClass(prefix+'_open');
            data.parent.addClass(prefix+'_animating');
            $this._visibilityToggle(data.ul, data.parent, true, el);
        }
    };

    // toggle actual visibility and accessibility tags
    Plugin.prototype._visibilityToggle = function(el, parent, animate, trigger, init) {
        var $this = this;
        var settings = $this.settings;
        var items = $this._getActionItems(el);
        var duration = 0;
        if (animate) {
            duration = settings.duration;
        }
        
        function afterOpen(trigger, parent) {
            $(trigger).removeClass(prefix+'_animating');
            $(parent).removeClass(prefix+'_animating');

            //Fire afterOpen callback
            if (!init) {
                settings.afterOpen(trigger);
            }
        }
        
        function afterClose(trigger, parent) {
            el.attr('aria-hidden','true');
            items.attr('tabindex', '-1');
            $this._setVisAttr(el, true);
            el.hide(); //jQuery 1.7 bug fix

            $(trigger).removeClass(prefix+'_animating');
            $(parent).removeClass(prefix+'_animating');

            //Fire init or afterClose callback
            if (!init){
                settings.afterClose(trigger);
            } else if (trigger == 'init'){
                settings.init();
            }
        }

        if (el.hasClass(prefix+'_hidden')) {
            el.removeClass(prefix+'_hidden');
             //Fire beforeOpen callback
            if (!init) {
                settings.beforeOpen(trigger);
            }
            if (settings.animations === 'jquery') {
                el.stop(true,true).slideDown(duration, settings.easingOpen, function(){
                    afterOpen(trigger, parent);
                });
            } else if(settings.animations === 'velocity') {
                el.velocity("finish").velocity("slideDown", {
                    duration: duration,
                    easing: settings.easingOpen,
                    complete: function() {
                        afterOpen(trigger, parent);
                    }
                });
            }
            el.attr('aria-hidden','false');
            items.attr('tabindex', '0');
            $this._setVisAttr(el, false);
        } else {
            el.addClass(prefix+'_hidden');

            //Fire init or beforeClose callback
            if (!init){
                settings.beforeClose(trigger);
            }

            if (settings.animations === 'jquery') {
                el.stop(true,true).slideUp(duration, this.settings.easingClose, function() {
                    afterClose(trigger, parent)
                });
            } else if (settings.animations === 'velocity') {
                
                el.velocity("finish").velocity("slideUp", {
                    duration: duration,
                    easing: settings.easingClose,
                    complete: function() {
                        afterClose(trigger, parent);
                    }
                });
            }
        }
    };

    // set attributes of element and children based on visibility
    Plugin.prototype._setVisAttr = function(el, hidden) {
        var $this = this;

        // select all parents that aren't hidden
        var nonHidden = el.children('li').children('ul').not('.'+prefix+'_hidden');

        // iterate over all items setting appropriate tags
        if (!hidden) {
            nonHidden.each(function(){
                var ul = $(this);
                ul.attr('aria-hidden','false');
                var items = $this._getActionItems(ul);
                items.attr('tabindex', '0');
                $this._setVisAttr(ul, hidden);
            });
        } else {
            nonHidden.each(function(){
                var ul = $(this);
                ul.attr('aria-hidden','true');
                var items = $this._getActionItems(ul);
                items.attr('tabindex', '-1');
                $this._setVisAttr(ul, hidden);
            });
        }
    };

    // get all 1st level items that are clickable
    Plugin.prototype._getActionItems = function(el) {
        var data = el.data("menu");
        if (!data) {
            data = {};
            var items = el.children('li');
            var anchors = items.find('a');
            data.links = anchors.add(items.find('.'+prefix+'_item'));
            el.data('menu', data);
        }
        return data.links;
    };

    Plugin.prototype._outlines = function(state) {
        if (!state) {
            $('.'+prefix+'_item, .'+prefix+'_btn').css('outline','none');
        } else {
            $('.'+prefix+'_item, .'+prefix+'_btn').css('outline','');
        }
    };

    Plugin.prototype.toggle = function(){
        var $this = this;
        $this._menuToggle();
    };

    Plugin.prototype.open = function(){
        var $this = this;
        if ($this.btn.hasClass(prefix+'_collapsed')) {
            $this._menuToggle();
        }
    };

    Plugin.prototype.close = function(){
        var $this = this;
        if ($this.btn.hasClass(prefix+'_open')) {
            $this._menuToggle();
        }
    };

    $.fn[mobileMenu] = function ( options ) {
        var args = arguments;

        // Is the first parameter an object (options), or was omitted, instantiate a new instance
        if (options === undefined || typeof options === 'object') {
            return this.each(function () {

                // Only allow the plugin to be instantiated once due to methods
                if (!$.data(this, 'plugin_' + mobileMenu)) {

                    // if it has no instance, create a new one, pass options to our plugin constructor,
                    // and store the plugin instance in the elements jQuery data object.
                    $.data(this, 'plugin_' + mobileMenu, new Plugin( this, options ));
                }
            });

        // If is a string and doesn't start with an underscore or 'init' function, treat this as a call to a public method.
        } else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {

            // Cache the method call to make it possible to return a value
            var returns;

            this.each(function () {
                var instance = $.data(this, 'plugin_' + mobileMenu);

                // Tests that there's already a plugin-instance and checks that the requested public method exists
                if (instance instanceof Plugin && typeof instance[options] === 'function') {

                    // Call the method of our plugin instance, and pass it the supplied arguments.
                    returns = instance[options].apply( instance, Array.prototype.slice.call( args, 1 ) );
                }
            });

            // If the earlier cached method gives a value back return the value, otherwise return this to preserve chainability.
            return returns !== undefined ? returns : this;
        }
    };
}(jQuery, document, window));
//     jquery-comments.js 1.1.0

//     (c) 2016 Joona Tykkylinen, Viima Solutions Oy
//     jquery-comments may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viima.github.io/jquery-comments/
//     <!-- https://codepen.io/ranstey/pen/LRJkbG -->

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node/CommonJS
        module.exports = function( root, jQuery ) {
            if ( jQuery === undefined ) {
                // require('jQuery') returns a factory that requires window to
                // build a jQuery instance, we normalize how we use modules
                // that require this pattern but the window provided is a noop
                // if it's defined (how jquery works)
                if ( typeof window !== 'undefined' ) {
                    jQuery = require('jquery');
                }
                else {
                    jQuery = require('jquery')(root);
                }
            }
            factory(jQuery);
            return jQuery;
        };
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function($) {

    var Comments = {

        // Instance variables
        // ==================

        $el: null,
        commentsById: {},
        currentSortKey: '',

        options: {

            // User
            profilePictureURL: '',
            currentUserIsAdmin: false,

            // Font awesome icon overrides
            spinnerIconURL: '',
            upvoteIconURL: '',
            replyIconURL: '',
            uploadIconURL: '',
            attachmentIconURL: '',
            fileIconURL: '',
            noCommentsIconURL: '',

            // Strings to be formatted (for example localization)
            textareaPlaceholderText: 'Add a comment',
            newestText: 'Newest',
            oldestText: 'Oldest',
            popularText: 'Popular',
            attachmentsText: 'Attachments',
            sendText: 'Send',
            replyText: 'Reply',
            editText: 'Edit',
            editedText: 'Edited',
            youText: 'You',
            saveText: 'Save',
            deleteText: 'Delete',
            viewAllRepliesText: 'View all __replyCount__ replies',
            hideRepliesText: 'Hide replies',
            noCommentsText: 'No comments',
            noAttachmentsText: 'No attachments',
            attachmentDropText: 'Drop files here',
            textFormatter: function(text) {
                return text;
            },

            // Functionalities
            enableReplying: true,
            enableEditing: true,
            enableUpvoting: true,
            enableDeleting: true,
            enableAttachments: false,
            enableDeletingCommentWithReplies: false,
            enableNavigation: true,
            postCommentOnEnter: false,
            forceResponsive: false,
            readOnly: false,
            defaultNavigationSortKey: 'newest',

            // Colors
            highlightColor: '#2793e6',
            deleteButtonColor: '#C9302C',

            roundProfilePictures: false,
            textareaRows: 2,
            textareaRowsOnFocus: 2,
            textareaMaxRows: 5,
            maxRepliesVisible: 2,

            fieldMappings: {
                id: 'id',
                parent: 'parent',
                created: 'created',
                modified: 'modified',
                content: 'content',
                file: 'file',
                fileURL: 'file_url',
                fileMimeType: 'file_mime_type',
                fullname: 'fullname',
                profileURL: 'profile_url',
                profilePictureURL: 'profile_picture_url',
                createdByAdmin: 'created_by_admin',
                createdByCurrentUser: 'created_by_current_user',
                upvoteCount: 'upvote_count',
                userHasUpvoted: 'user_has_upvoted'
            },

            getComments: function(success, error) {success([])},
            postComment: function(commentJSON, success, error) {success(commentJSON)},
            putComment: function(commentJSON, success, error) {success(commentJSON)},
            deleteComment: function(commentJSON, success, error) {success()},
            upvoteComment: function(commentJSON, success, error) {success(commentJSON)},
            uploadAttachments: function(commentArray, success, error) {success(commentArray)},
            refresh: function() {},
            timeFormatter: function(time) {
                return new Date(time).toLocaleDateString();
            }
        },

        events: {
            // Close dropdowns
            'click': 'closeDropdowns',

            // Save comment on keydown
            'keydown [contenteditable]' : 'saveOnKeydown',

            // Listening changes in contenteditable fields (due to input event not working with IE)
            'focus [contenteditable]' : 'saveEditableContent',
            'keyup [contenteditable]' : 'checkEditableContentForChange',
            'paste [contenteditable]' : 'checkEditableContentForChange',
            'input [contenteditable]' : 'checkEditableContentForChange',
            'blur [contenteditable]' : 'checkEditableContentForChange',

            // Navigation
            'click .navigation li[data-sort-key]' : 'navigationElementClicked',
            'click .navigation li.title' : 'toggleNavigationDropdown',

            // Main comenting field
            'click .commenting-field.main .textarea': 'showMainCommentingField',
            'click .commenting-field.main .close' : 'hideMainCommentingField',

            // All commenting fields
            'click .commenting-field .textarea' : 'increaseTextareaHeight',
            'change .commenting-field .textarea' : 'increaseTextareaHeight textareaContentChanged',
            'click .commenting-field:not(.main) .close' : 'removeCommentingField',

            // Edit mode actions
            'click .commenting-field .send.enabled' : 'postComment',
            'click .commenting-field .update.enabled' : 'putComment',
            'click .commenting-field .delete.enabled' : 'deleteComment',
            'change .commenting-field .upload.enabled input[type="file"]' : 'fileInputChanged',

            // Other actions
            'click li.comment button.upvote' : 'upvoteComment',
            'click li.comment button.delete.enabled' : 'deleteComment',

            // Other
            'click li.comment ul.child-comments .toggle-all': 'toggleReplies',
            'click li.comment button.reply': 'replyButtonClicked',
            'click li.comment button.edit': 'editButtonClicked',

            // Drag & dropping attachments
            'dragenter' : 'showDroppableOverlay',

            'dragenter .droppable-overlay' : 'handleDragEnter',
            'dragleave .droppable-overlay' : 'handleDragLeaveForOverlay',
            'dragenter .droppable-overlay .droppable' : 'handleDragEnter',
            'dragleave .droppable-overlay .droppable' : 'handleDragLeaveForDroppable',

            'dragover .droppable-overlay' : 'handleDragOverForOverlay',
            'drop .droppable-overlay' : 'handleDrop'
        },


        // Initialization
        // ==============

        init: function(options, el) {
            this.$el = $(el);
            this.$el.addClass('jquery-comments');
            this.undelegateEvents();
            this.delegateEvents();

            // Detect mobile devices
            (function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
            if($.browser.mobile) this.$el.addClass('mobile');

            // Init options
            if(options.fieldMappings) {
                options = $.extend({}, options);
                $.extend(this.options.fieldMappings, options.fieldMappings);

                // Field mappings needs to be deleted so that the field won't get overidden
                delete options['fieldMappings'];
            }
            $.extend(this.options, options);

            // Read-only mode
            if(this.options.readOnly) this.$el.addClass('read-only');

            // Set initial sort key
            this.currentSortKey = this.options.defaultNavigationSortKey;

            // Create CSS declarations for highlight color
            this.createCssDeclarations();

            // Fetching data and rendering
            this.fetchDataAndRender();
        },

        delegateEvents: function() {
            this.bindEvents(false);
        },

        undelegateEvents: function() {
            this.bindEvents(true);
        },

        bindEvents: function(unbind) {
            var bindFunction = unbind ? 'off' : 'on';
            for (var key in this.events) {
                var eventName = key.split(' ')[0];
                var selector = key.split(' ').slice(1).join(' ');
                var methodNames = this.events[key].split(' ');

                for(var index in methodNames) {
                    if(methodNames.hasOwnProperty(index)) {
                        var method = this[methodNames[index]];

                        // Keep the context
                        method = $.proxy(method, this);

                        if (selector == '') {
                            this.$el[bindFunction](eventName, method);
                        } else {
                            this.$el[bindFunction](eventName, selector, method);
                        }
                    }
                }
            }
        },


        // Basic functionalities
        // =====================

        fetchDataAndRender: function () {
            var self = this;

            this.$el.empty();
            this.createHTML();

            // Get comments
            this.commentsById = {};

            var success = function(commentsArray) {
                // Convert comments to custom data model
                var commentModels = commentsArray.map(function(commentsJSON){
                    return self.createCommentModel(commentsJSON)
                });

                // Sort comments by date (oldest first so that they can be appended to the data model
                // without caring dependencies)
                self.sortComments(commentModels, 'oldest');

                $(commentModels).each(function(index, commentModel) {
                    self.addCommentToDataModel(commentModel);
                });

                self.render();
            };

            var error = function() {
                success([]);
            };

            this.options.getComments(success, error);
        },

        fetchNext: function() {
            var self = this;

            // Loading indicator
            var spinner = this.createSpinner();
            this.$el.find('ul#comment-list').append(spinner);

            var success = function (commentModels) {
                $(commentModels).each(function(index, commentModel) {
                    self.createComment(commentModel);
                });
                spinner.remove();
            }

            var error = function() {
                spinner.remove();
            }

            this.options.getComments(success, error);
        },

        createCommentModel: function(commentJSON) {
            var commentModel = this.applyInternalMappings(commentJSON);
            commentModel.childs = [];
            return commentModel;
        },

        addCommentToDataModel: function(commentModel) {
            if(!(commentModel.id in this.commentsById)) {
                this.commentsById[commentModel.id] = commentModel;

                // Update child array of the parent (append childs to the array of outer most parent)
                if(commentModel.parent) {
                    var outermostParent = this.getOutermostParent(commentModel.parent);
                    outermostParent.childs.push(commentModel.id);
                }
            }
        },

        updateCommentModel: function(commentModel) {
            $.extend(this.commentsById[commentModel.id], commentModel);
        },

        render: function() {
            var self = this;

            // Show active container
            this.showActiveContainer();

            // Create comments
            this.createComments();

            // Create attachments if enabled
            if(this.options.enableAttachments) this.createAttachments();

            // Remove spinner
            this.$el.find('> .spinner').remove();

            this.options.refresh();
        },

        showActiveContainer: function() {
            var activeNavigationEl = this.$el.find('.navigation li[data-container-name].active');
            var containerName = activeNavigationEl.data('container-name');
            var containerEl = this.$el.find('[data-container="' + containerName + '"]');
            containerEl.siblings('[data-container]').hide();
            containerEl.show();
        },

        createComments: function() {
            var self = this;

            // Create the list element before appending to DOM in order to reach better performance
            this.$el.find('#comment-list').remove();
            var commentList = $('<ul/>', {
                id: 'comment-list',
                'class': 'main'
            });

            // Divide commments into main level comments and replies
            var mainLevelComments = [];
            var replies = [];
            $(this.getComments()).each(function(index, commentModel) {
                if(commentModel.parent == null) {
                    mainLevelComments.push(commentModel);
                } else {
                    replies.push(commentModel);
                }
            });

            // Append main level comments
            this.sortComments(mainLevelComments, this.currentSortKey);
            mainLevelComments.reverse();    // Reverse the order as they are prepended to DOM
            $(mainLevelComments).each(function(index, commentModel) {
                self.addComment(commentModel, commentList);
            });

            // Append replies in chronological order
            this.sortComments(replies, 'oldest');
            $(replies).each(function(index, commentModel) {
                self.addComment(commentModel, commentList);
            });

            // Appned list to DOM
            this.$el.find('[data-container="comments"]').prepend(commentList);
        },

        createAttachments: function() {
            var self = this;

            // Create the list element before appending to DOM in order to reach better performance
            this.$el.find('#attachment-list').remove();
            var attachmentList = $('<ul/>', {
                id: 'attachment-list',
                'class': 'main'
            });

            var attachments = this.getAttachments();
            this.sortComments(attachments, 'newest');
            attachments.reverse();    // Reverse the order as they are prepended to DOM
            $(attachments).each(function(index, commentModel) {
                self.addAttachment(commentModel, attachmentList);
            });

            // Appned list to DOM
            this.$el.find('[data-container="attachments"]').prepend(attachmentList);
        },

        addComment: function(commentModel, commentList) {
            commentList = commentList || this.$el.find('#comment-list');
            var commentEl = this.createCommentElement(commentModel);

            // Case: reply
            if(commentModel.parent) {
                var directParentEl = commentList.find('.comment[data-id="'+commentModel.parent+'"]');

                // Re-render action bar of direct parent element
                this.reRenderCommentActionBar(commentModel.parent);

                // Force replies into one level only
                var outerMostParent = directParentEl.parents('.comment').last();
                if(outerMostParent.length == 0) outerMostParent = directParentEl;

                // Append element to DOM
                var childCommentsEl = outerMostParent.find('.child-comments');
                var commentingField = childCommentsEl.find('.commenting-field');
                if(commentingField.length) {
                    commentingField.before(commentEl)
                } else {
                    childCommentsEl.append(commentEl);
                }

                // Update toggle all -button
                this.updateToggleAllButton(outerMostParent);

            // Case: main level comment
            } else {
                commentList.prepend(commentEl);
            }
        },

        addAttachment: function(commentModel, commentList) {
            commentList = commentList || this.$el.find('#attachment-list');
            var commentEl = this.createCommentElement(commentModel);
            commentList.prepend(commentEl);
        },

        removeComment: function(commentId) {
            var self = this;
            var commentModel = this.commentsById[commentId];

            // Remove child comments recursively
            var childComments = this.getChildComments(commentModel.id);
            $(childComments).each(function(index, childComment) {
                self.removeComment(childComment.id);
            });

            // Update the child array of outermost parent
            if(commentModel.parent) {
                var outermostParent = this.getOutermostParent(commentModel.parent);
                var indexToRemove = outermostParent.childs.indexOf(commentModel.id);
                outermostParent.childs.splice(indexToRemove, 1);
            }

            // Remove the comment from data model
            delete this.commentsById[commentId];

            var commentElements = this.$el.find('li.comment[data-id="'+commentId+'"]');
            var parentEl = commentElements.parents('li.comment').last();

            // Remove the element
            commentElements.remove();

            // Update the toggle all button
            this.updateToggleAllButton(parentEl);
        },

        uploadAttachments: function(files, commentingField) {
            var self = this;
            if(!commentingField) commentingField = this.$el.find('.commenting-field.main');
            var isReply = !commentingField.hasClass('main');
            var fileCount = files.length;

            if(fileCount) {
                var uploadButton = commentingField.find('.upload');
                var textarea = commentingField.find('.textarea');

                // Disable upload button and append spinners while request is pending
                uploadButton.removeClass('enabled');
                var attachmentListSpinner = this.createSpinner();
                var commentListSpinner = this.createSpinner();
                this.$el.find('ul#attachment-list').prepend(attachmentListSpinner);
                if(isReply) {
                    commentingField.before(commentListSpinner);
                } else {
                    this.$el.find('ul#comment-list').prepend(commentListSpinner);
                }

                var success = function(commentArray) {
                	$(commentArray).each(function(index, commentJSON) {
	                    var commentModel = self.createCommentModel(commentJSON);
	                    self.addCommentToDataModel(commentModel);
	                    self.addComment(commentModel);
	                    self.addAttachment(commentModel);
                	});

                    // Close the commenting field if all the uploads were successfull
                    // and there's no content besides the attachment
                    if(commentArray.length == fileCount && self.getTextareaContent(textarea).length == 0) {
                        commentingField.find('.close').trigger('click');
                    }

                    // Enable upload button and remove spinners
                    uploadButton.addClass('enabled');
                    commentListSpinner.remove();
                    attachmentListSpinner.remove();
                };

                var error = function() {
                    // Enable upload button and remove spinners
                    uploadButton.addClass('enabled');
                    commentListSpinner.remove();
                    attachmentListSpinner.remove();
                };

                var commentArray = [];
                $(files).each(function(index, file) {

                    // Create comment JSON
                    var commentJSON = self.createCommentJSON(textarea);
                    commentJSON.id += '-' + index;
                    commentJSON.content = '';
                    commentJSON.file = file;
                    commentJSON.fileURL = 'C:/fakepath/' + file.name;
                    commentJSON.fileMimeType = file.type;

                    // Reverse mapping
                    commentJSON = self.applyExternalMappings(commentJSON);
                    commentArray.push(commentJSON);
                });

                self.options.uploadAttachments(commentArray, success, error);
            }

            // Clear the input field
            uploadButton.find('input').val('');
        },

        updateToggleAllButton: function(parentEl) {
            var childCommentsEl = parentEl.find('.child-comments');
            var childComments = childCommentsEl.find('.comment');
            var toggleAllButton = childCommentsEl.find('li.toggle-all');
            childComments.removeClass('hidden-reply');

            // Add identifying class for hidden replies so they can be toggled
            var hiddenReplies = childComments.slice(0, -this.options.maxRepliesVisible);
            hiddenReplies.addClass('hidden-reply');

            // Show all replies if replies are expanded
            if(toggleAllButton.find('span.text').text() == this.options.textFormatter(this.options.hideRepliesText)) {
                hiddenReplies.addClass('visible');
            }

            // Make sure that toggle all button is present
            if(childComments.length > this.options.maxRepliesVisible) {

                // Append button to toggle all replies if necessary
                if(!toggleAllButton.length) {

                    toggleAllButton = $('<li/>', {
                        'class': 'toggle-all highlight-font-bold'
                    });
                    var toggleAllButtonText = $('<span/>', {
                        'class': 'text'
                    });
                    var caret = $('<span/>', {
                        'class': 'caret'
                    });

                    // Append toggle button to DOM
                    toggleAllButton.append(toggleAllButtonText).append(caret);
                    childCommentsEl.prepend(toggleAllButton);
                }

                // Update the text of toggle all -button
                this.setToggleAllButtonText(toggleAllButton, false);

            // Make sure that toggle all button is not present
            } else {
                toggleAllButton.remove();
            }
        },

        sortComments: function (comments, sortKey) {
            var self = this;

            // Sort by popularity
            if(sortKey == 'popularity') {
                comments.sort(function(commentA, commentB) {
                    var pointsOfA = commentA.childs.length;
                    var pointsOfB = commentB.childs.length;

                    if(self.options.enableUpvoting) {
                        pointsOfA += commentA.upvoteCount;
                        pointsOfB += commentB.upvoteCount;
                    }

                    if(pointsOfB != pointsOfA) {
                        return pointsOfB - pointsOfA;

                    } else {
                        // Return newer if popularity is the same
                        var createdA = new Date(commentA.created).getTime();
                        var createdB = new Date(commentB.created).getTime();
                        return createdB - createdA;
                    }
                });

            // Sort by date
            } else {
                comments.sort(function(commentA, commentB) {
                    var createdA = new Date(commentA.created).getTime();
                    var createdB = new Date(commentB.created).getTime();
                    if(sortKey == 'oldest') {
                        return createdA - createdB;
                    } else {
                        return createdB - createdA;
                    }
                });
            }
        },

        sortAndReArrangeComments: function(sortKey) {
            var commentList = this.$el.find('#comment-list');

            // Get main level comments
            var mainLevelComments = this.getComments().filter(function(commentModel){return !commentModel.parent});
            this.sortComments(mainLevelComments, sortKey);

            // Rearrange the main level comments
            $(mainLevelComments).each(function(index, commentModel) {
                var commentEl = commentList.find('> li.comment[data-id='+commentModel.id+']');
                commentList.append(commentEl);
            });
        },

        showActiveSort: function() {
            var activeElements = this.$el.find('.navigation li[data-sort-key="' + this.currentSortKey + '"]');

            // Indicate active sort
            this.$el.find('.navigation li').removeClass('active');
            activeElements.addClass('active');

            // Update title for dropdown
            var titleEl = this.$el.find('.navigation .title');
            if(this.currentSortKey != 'attachments') {
                titleEl.addClass('active');
                titleEl.find('header').html(activeElements.first().html());
             } else {
                var defaultDropdownEl = this.$el.find('.navigation ul.dropdown').children().first();
                titleEl.find('header').html(defaultDropdownEl.html());
             }

            // Show active container
            this.showActiveContainer();
        },

        forceResponsive: function() {
            this.$el.addClass('responsive');
        },

        // Event handlers
        // ==============

        closeDropdowns: function() {
            this.$el.find('.dropdown').hide();
        },

        saveOnKeydown: function(ev) {
            // Save comment on cmd/ctrl + enter
            if(ev.keyCode == 13) {
                var metaKey = ev.metaKey || ev.ctrlKey;
                if(this.options.postCommentOnEnter || metaKey) {
                    var el = $(ev.currentTarget);
                    el.siblings('.control-row').find('.save').trigger('click');
                    ev.stopPropagation();
                    ev.preventDefault();
                }
            }
        },

        saveEditableContent: function(ev) {
            var el = $(ev.currentTarget);
            el.data('before', el.html());
        },

        checkEditableContentForChange: function(ev) {
            var el = $(ev.currentTarget);
            if (el.data('before') != el.html()) {
                el.data('before', el.html());
                el.trigger('change');
            }
        },

        navigationElementClicked: function(ev) {
            var navigationEl = $(ev.currentTarget);
            var sortKey = navigationEl.data().sortKey;

            // Sort the comments if necessary
            if(sortKey != 'attachments') {
                this.sortAndReArrangeComments(sortKey);
            }

            // Save the current sort key
            this.currentSortKey = sortKey;
            this.showActiveSort();
        },

        toggleNavigationDropdown: function(ev) {
            // Prevent closing immediately
            ev.stopPropagation();

            var dropdown = $(ev.currentTarget).find('~ .dropdown');
            dropdown.toggle();
        },

        showMainCommentingField: function(ev) {
            var mainTextarea = $(ev.currentTarget);
            mainTextarea.siblings('.control-row').show();
            mainTextarea.parent().find('.close').show();
            mainTextarea.focus();
        },

        hideMainCommentingField: function(ev) {
            var closeButton = $(ev.currentTarget);
            var mainTextarea = this.$el.find('.commenting-field.main .textarea');
            var mainControlRow = this.$el.find('.commenting-field.main .control-row');

            this.clearTextarea(mainTextarea);
            this.adjustTextareaHeight(mainTextarea, false);

            mainControlRow.hide();
            closeButton.hide();
            mainTextarea.blur();
        },

        increaseTextareaHeight: function(ev) {
            var textarea = $(ev.currentTarget);
            this.adjustTextareaHeight(textarea, true);
        },

        textareaContentChanged: function(ev) {
            var textarea = $(ev.currentTarget);
            var content = this.getTextareaContent(textarea);
            var saveButton = textarea.siblings('.control-row').find('.save');

            // Update parent id if reply-to-badge was removed
            if(!textarea.find('.reply-to-badge').length) {
                var commentId = textarea.attr('data-comment');

                // Case: editing comment
                if(commentId) {
                    var parentComments = textarea.parents('li.comment');
                    if(parentComments.length > 1) {
                        var parentId = parentComments.last().data('id');
                        textarea.attr('data-parent', parentId);
                    }

                // Case: new comment
                } else {
                    var parentId = textarea.parents('li.comment').last().data('id');
                    textarea.attr('data-parent', parentId);
                }
            }

            // Move close button if scrollbar is visible
            var commentingField = textarea.parents('.commenting-field').first();
            if(textarea[0].scrollHeight > textarea.outerHeight()) {
                commentingField.addClass('scrollable');
            } else {
                commentingField.removeClass('scrollable');
            }

            // Check if content or parent has changed if editing
            var contentOrParentChangedIfEditing = true;
            if(commentId = textarea.attr('data-comment')) {
                var contentChanged = content != this.commentsById[commentId].content;
                var parentFromModel;
                if(this.commentsById[commentId].parent) {
                    parentFromModel = this.commentsById[commentId].parent.toString();
                }
                var parentChanged = textarea.attr('data-parent') != parentFromModel;
                contentOrParentChangedIfEditing = contentChanged || parentChanged;
            }

            // Check whether save button needs to be enabled
            if(content.length && contentOrParentChangedIfEditing) {
                saveButton.addClass('enabled');
            } else {
                saveButton.removeClass('enabled');
            }
        },

        removeCommentingField: function(ev) {
            var closeButton = $(ev.currentTarget);

            // Remove edit class from comment if user was editing the comment
            var textarea = closeButton.siblings('.textarea');
            if(textarea.attr('data-comment')) {
                closeButton.parents('li.comment').first().removeClass('edit');
            }

            // Remove the field
            var commentingField = closeButton.parents('.commenting-field').first();
            commentingField.remove();
        },

        postComment: function(ev) {
            var self = this;
            var sendButton = $(ev.currentTarget);
            var commentingField = sendButton.parents('.commenting-field').first();
            var textarea = commentingField.find('.textarea');

            // Disable send button while request is pending
            sendButton.removeClass('enabled');

            // Create comment JSON
            var commentJSON = this.createCommentJSON(textarea);

            // Reverse mapping
            commentJSON = this.applyExternalMappings(commentJSON);

            var success = function(commentJSON) {
                self.createComment(commentJSON);
                commentingField.find('.close').trigger('click');
            };

            var error = function() {
                sendButton.addClass('enabled');
            };

            this.options.postComment(commentJSON, success, error);
        },

        createComment: function(commentJSON) {
            var commentModel = this.createCommentModel(commentJSON);
            this.addCommentToDataModel(commentModel);
            this.addComment(commentModel);
        },

        putComment: function(ev) {
            var self = this;
            var saveButton = $(ev.currentTarget);
            var commentingField = saveButton.parents('.commenting-field').first();
            var textarea = commentingField.find('.textarea');

            // Disable send button while request is pending
            saveButton.removeClass('enabled');

            // Use a clone of the existing model and update the model after succesfull update
            var commentJSON =  $.extend({}, this.commentsById[textarea.attr('data-comment')]);
            $.extend(commentJSON, {
                parent: textarea.attr('data-parent') || null,
                content: this.getTextareaContent(textarea),
                modified: new Date().getTime()
            });

            // Reverse mapping
            commentJSON = this.applyExternalMappings(commentJSON);

            var success = function(commentJSON) {
                // The outermost parent can not be changed by editing the comment so the childs array
                // of parent does not require an update

                var commentModel = self.createCommentModel(commentJSON);

                // Delete childs array from new comment model since it doesn't need an update
                delete commentModel['childs'];
                self.updateCommentModel(commentModel);

                // Close the editing field
                commentingField.find('.close').trigger('click');

                // Re-render the comment
                self.reRenderComment(commentModel.id);
            };

            var error = function() {
                saveButton.addClass('enabled');
            };

            this.options.putComment(commentJSON, success, error);
        },

        deleteComment: function(ev) {
            var self = this;
            var deleteButton = $(ev.currentTarget);
            var commentEl = deleteButton.parents('.comment').first();
            var commentJSON =  $.extend({}, this.commentsById[commentEl.attr('data-id')]);
            var commentId = commentJSON.id;
            var parentId = commentJSON.parent;

            // Disable send button while request is pending
            deleteButton.removeClass('enabled');

            // Reverse mapping
            commentJSON = this.applyExternalMappings(commentJSON);

            var success = function() {
                self.removeComment(commentId);
                if(parentId) self.reRenderCommentActionBar(parentId);
            };

            var error = function() {
                deleteButton.addClass('enabled');
            };

            this.options.deleteComment(commentJSON, success, error);
        },

        fileInputChanged: function(ev, files) {
            var files = ev.currentTarget.files;
            var commentingField = $(ev.currentTarget).parents('.commenting-field').first();
            this.uploadAttachments(files, commentingField);
        },

        upvoteComment: function(ev) {
            var self = this;
            var commentEl = $(ev.currentTarget).parents('li.comment').first();
            var commentModel = commentEl.data().model;

            // Check whether user upvoted the comment or revoked the upvote
            var previousUpvoteCount = commentModel.upvoteCount;
            var newUpvoteCount;
            if(commentModel.userHasUpvoted) {
                newUpvoteCount = previousUpvoteCount - 1;
            } else {
                newUpvoteCount = previousUpvoteCount + 1;
            }

            // Show changes immediatelly
            commentModel.userHasUpvoted = !commentModel.userHasUpvoted;
            commentModel.upvoteCount = newUpvoteCount;
            this.reRenderUpvotes(commentModel.id);

            // Reverse mapping
            var commentJSON = $.extend({}, commentModel);
            commentJSON = this.applyExternalMappings(commentJSON);

            var success = function(commentJSON) {
                var commentModel = self.createCommentModel(commentJSON);
                self.updateCommentModel(commentModel);
                self.reRenderUpvotes(commentModel.id);
            };

            var error = function() {

                // Revert changes
                commentModel.userHasUpvoted = !commentModel.userHasUpvoted;
                commentModel.upvoteCount = previousUpvoteCount;
                self.reRenderUpvotes(commentModel.id);
            };

            this.options.upvoteComment(commentJSON, success, error);
        },

        toggleReplies: function(ev) {
            var el = $(ev.currentTarget);
            el.siblings('.hidden-reply').toggleClass('visible');
            this.setToggleAllButtonText(el, true);
        },

        replyButtonClicked: function(ev) {
            var replyButton = $(ev.currentTarget);
            var outermostParent = replyButton.parents('li.comment').last();
            var parentId = replyButton.parents('.comment').first().data().id;


            // Remove existing field
            var replyField = outermostParent.find('.child-comments > .commenting-field');
            if(replyField.length) replyField.remove();
            var previousParentId = replyField.find('.textarea').attr('data-parent');

            // Create the reply field (do not re-create)
            // if(previousParentId != parentId) {
                replyField = this.createCommentingFieldElement(parentId);
                outermostParent.find('.child-comments').append(replyField);

                // Move cursor to end
                var textarea = replyField.find('.textarea');
                this.moveCursorToEnd(textarea)
            // }
        },

        editButtonClicked: function(ev) {
            var editButton = $(ev.currentTarget);
            var commentEl = editButton.parents('li.comment').first();
            var commentModel = commentEl.data().model;
            commentEl.addClass('edit');

            // Create the editing field
            var editField = this.createCommentingFieldElement(commentModel.parent, commentModel.id);
            commentEl.find('.comment-wrapper').first().append(editField);

            // Append original content
            var textarea = editField.find('.textarea');
            textarea.attr('data-comment', commentModel.id);

            // Escaping HTML
            textarea.append(this.getTextareaContentAsEscapedHTML(commentModel.content));

            // Move cursor to end
            this.moveCursorToEnd(textarea);
        },

        showDroppableOverlay: function(ev) {
            if(this.options.enableAttachments) {
                this.$el.find('.droppable-overlay').css('top', this.$el[0].scrollTop);
                this.$el.find('.droppable-overlay').show();
                this.$el.addClass('drag-ongoing');
            }
        },

        handleDragEnter: function(ev) {
            var count = $(ev.currentTarget).data('dnd-count') || 0;
            count++;
            $(ev.currentTarget).data('dnd-count', count);
            $(ev.currentTarget).addClass('drag-over');
        },

        handleDragLeave: function(ev, callback) {
            var count = $(ev.currentTarget).data('dnd-count');
            count--;
            $(ev.currentTarget).data('dnd-count', count);

            if(count == 0) {
                $(ev.currentTarget).removeClass('drag-over');
                if(callback) callback();
            }
        },

        handleDragLeaveForOverlay: function(ev) {
            var self = this;
            this.handleDragLeave(ev, function() {
                self.hideDroppableOverlay();
            });
        },

        handleDragLeaveForDroppable: function(ev) {
            this.handleDragLeave(ev);
        },

        handleDragOverForOverlay: function(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            ev.originalEvent.dataTransfer.dropEffect = 'copy';
        },

        hideDroppableOverlay: function() {
            this.$el.find('.droppable-overlay').hide();
            this.$el.removeClass('drag-ongoing');
        },

        handleDrop: function(ev) {
            ev.preventDefault();

            // Reset DND counts
            $(ev.target).trigger('dragleave');

            // Hide the overlay and upload the files
            this.hideDroppableOverlay();
            this.uploadAttachments(ev.originalEvent.dataTransfer.files);
        },


        // HTML elements
        // =============

        createHTML: function() {
            var self = this;

            // Commenting field
            var mainCommentingField = this.createCommentingFieldElement();
            mainCommentingField.addClass('main');
            this.$el.append(mainCommentingField);

            // Hide control row and close button
            var mainControlRow = mainCommentingField.find('.control-row');
            mainControlRow.hide();
            mainCommentingField.find('.close').hide();

            // Navigation bar
            if (this.options.enableNavigation) {
                this.$el.append(this.createNavigationElement());
                this.showActiveSort();
            }

            // Loading spinner
            var spinner = this.createSpinner();
            this.$el.append(spinner);

            // Comments container
            var commentsContainer = $('<div/>', {
                'class': 'data-container',
                'data-container': 'comments'
            });
            this.$el.append(commentsContainer);

            // "No comments" placeholder
            var noComments = $('<div/>', {
                'class': 'no-comments no-data',
                text: this.options.textFormatter(this.options.noCommentsText)
            });
            var noCommentsIcon = $('<i/>', {
                'class': 'fa fa-comments fa-2x'
            });
            if(this.options.noCommentsIconURL.length) {
                noCommentsIcon.css('background-image', 'url("'+this.options.noCommentsIconURL+'")');
                noCommentsIcon.addClass('image');
            }
            noComments.prepend($('<br/>')).prepend(noCommentsIcon);
            commentsContainer.append(noComments);

            // Attachments
            if(this.options.enableAttachments) {

                // Attachments container
                var attachmentsContainer = $('<div/>', {
                    'class': 'data-container',
                    'data-container': 'attachments'
                });
                this.$el.append(attachmentsContainer);

                // "No attachments" placeholder
                var noAttachments = $('<div/>', {
                    'class': 'no-attachments no-data',
                    text: this.options.textFormatter(this.options.noAttachmentsText)
                });
                var noAttachmentsIcon = $('<i/>', {
                    'class': 'fa fa-paperclip fa-2x'
                });
                if(this.options.attachmentIconURL.length) {
                    noAttachmentsIcon.css('background-image', 'url("'+this.options.attachmentIconURL+'")');
                    noAttachmentsIcon.addClass('image');
                }
                noAttachments.prepend($('<br/>')).prepend(noAttachmentsIcon);
                attachmentsContainer.append(noAttachments);


                // Drag & dropping attachments
                var droppableOverlay = $('<div/>', {
                    'class': 'droppable-overlay'
                });

                var droppableContainer = $('<div/>', {
                    'class': 'droppable-container'
                });

                var droppable = $('<div/>', {
                    'class': 'droppable'
                });

                var uploadIcon = $('<i/>', {
                    'class': 'fa fa-upload fa-4x'
                });
                if(this.options.uploadIconURL.length) {
                    uploadIcon.css('background-image', 'url("'+this.options.uploadIconURL+'")');
                    uploadIcon.addClass('image');
                }

                var dropAttachmentText = $('<div/>', {
                    text: this.options.textFormatter(this.options.attachmentDropText)
                });
                droppable.append(uploadIcon);
                droppable.append(dropAttachmentText);

                droppableOverlay.html(droppableContainer.html(droppable)).hide();
                this.$el.append(droppableOverlay);
            }
        },

        createProfilePictureElement: function(src) {
            if(src) {
                var profilePicture = $('<img/>', {
                    src: src
                });
            } else {
                var profilePicture = $('<i/>', {
                    'class': 'fa fa-user'
                });
            }
            profilePicture.addClass('profile-picture');
            if(this.options.roundProfilePictures) profilePicture.addClass('round');
            return profilePicture;
        },

        createCommentingFieldElement: function(parentId, existingCommentId) {
            var self = this;

            // Commenting field
            var commentingField = $('<div/>', {
                'class': 'commenting-field'
            });

            // Profile picture
            var profilePicture = this.createProfilePictureElement(this.options.profilePictureURL);
            profilePicture.addClass('by-current-user');

            // New comment
            var textareaWrapper = $('<div/>', {
                'class': 'textarea-wrapper'
            });

            // Control row
            var controlRow = $('<div/>', {
                'class': 'control-row'
            });

            // Textarea
            var textarea = $('<div/>', {
                'class': 'textarea',
                'data-placeholder': this.options.textFormatter(this.options.textareaPlaceholderText),
                contenteditable: true
            });

            // Setting the initial height for the textarea
            this.adjustTextareaHeight(textarea, false);

            // Close button
            var closeButton = $('<span/>', {
                'class': 'close'
            }).append($('<span class="left"/>')).append($('<span class="right"/>'));

            // Save button text
            if(existingCommentId) {
                var saveButtonText = this.options.textFormatter(this.options.saveText);

                // Append delete button if necessary
                var isAllowedToDelete = this.isAllowedToDelete(existingCommentId);

                if(isAllowedToDelete) {
                    var deleteButton = $('<span/>', {
                        'class': 'enabled delete',
                        text: this.options.textFormatter(this.options.deleteText)
                    }).css('background-color', this.options.deleteButtonColor);
                    controlRow.append(deleteButton);
                }

            } else {
                var saveButtonText = this.options.textFormatter(this.options.sendText);

                // Add upload button if attachments are enabled
                if(this.options.enableAttachments) {
                    var uploadButton = $('<span/>', {
                        'class': 'enabled upload'
                    });
                    var uploadIcon = $('<i/>', {
                        'class': 'fa fa-upload'
                    });
                    var fileInput = $('<input/>', {
                        type: 'file',
                        'data-role': 'none' // Prevent jquery-mobile for adding classes
                    });
                    // Multi file upload might not work with backend as the the file names
                    // may be the same causing duplicates
                    if(!$.browser.mobile) fileInput.attr('multiple', 'multiple');

                    if(this.options.uploadIconURL.length) {
                        uploadIcon.css('background-image', 'url("'+this.options.uploadIconURL+'")');
                        uploadIcon.addClass('image');
                    }
                    uploadButton.append(uploadIcon).append(fileInput);
                    controlRow.append(uploadButton);
                }
            }

            // Save button
            var saveButtonClass = existingCommentId ? 'update' : 'send';
            var saveButton = $('<span/>', {
                'class': saveButtonClass + ' save highlight-background',
                text: saveButtonText
            });

            // Populate the element
            controlRow.prepend(saveButton);
            textareaWrapper.append(closeButton).append(textarea).append(controlRow);
            commentingField.append(profilePicture).append(textareaWrapper);


            if(parentId) {

                // Set the parent id to the field if necessary
                textarea.attr('data-parent', parentId);

                // Append reply-to badge if necessary
                var parentModel = this.commentsById[parentId];
                if(parentModel.parent) {
                    textarea.html('&nbsp;');    // Needed to set the cursor to correct place

                    // Creating the reply-to badge
                    var replyToBadge = $('<input/>', {
                        'class': 'reply-to-badge highlight-font-bold',
                        type: 'button'
                    });
                    var replyToName = '@' + parentModel.fullname;
                    replyToBadge.val(replyToName);
                    textarea.prepend(replyToBadge);
                }
            }

            return commentingField;
        },

        createNavigationElement: function() {
            var navigationEl = $('<ul/>', {
                'class': 'navigation'
            });
            var navigationWrapper = $('<div/>', {
                'class': 'navigation-wrapper'
            });
            navigationEl.append(navigationWrapper);

            // Newest
            var newest = $('<li/>', {
                text: this.options.textFormatter(this.options.newestText),
                'data-sort-key': 'newest',
                'data-container-name': 'comments'
            });

            // Oldest
            var oldest = $('<li/>', {
                text: this.options.textFormatter(this.options.oldestText),
                'data-sort-key': 'oldest',
                'data-container-name': 'comments'
            });

            // Popular
            var popular = $('<li/>', {
                text: this.options.textFormatter(this.options.popularText),
                'data-sort-key': 'popularity',
                'data-container-name': 'comments'
            });

            // Attachments
            var attachments = $('<li/>', {
                text: this.options.textFormatter(this.options.attachmentsText),
                'data-sort-key': 'attachments',
                'data-container-name': 'attachments'
            });

            // Attachments icon
            var attachmentsIcon = $('<i/>', {
                'class': 'fa fa-paperclip'
            });
            if(this.options.attachmentIconURL.length) {
                attachmentsIcon.css('background-image', 'url("'+this.options.attachmentIconURL+'")');
                attachmentsIcon.addClass('image');
            }
            attachments.prepend(attachmentsIcon);


            // Responsive navigation
            var dropdownNavigationWrapper = $('<div/>', {
                'class': 'navigation-wrapper responsive'
            });
            var dropdownNavigation = $('<ul/>', {
                'class': 'dropdown'
            });
            var dropdownTitle = $('<li/>', {
                'class': 'title'
            });
            var dropdownTitleHeader = $('<header/>');

            dropdownTitle.append(dropdownTitleHeader);
            dropdownNavigationWrapper.append(dropdownTitle);
            dropdownNavigationWrapper.append(dropdownNavigation);
            navigationEl.append(dropdownNavigationWrapper);


            // Populate elements
            navigationWrapper.append(newest).append(oldest);
            dropdownNavigation.append(newest.clone()).append(oldest.clone());

            if(this.options.enableReplying || this.options.enableUpvoting) {
                navigationWrapper.append(popular);
                dropdownNavigation.append(popular.clone());
            }
            if(this.options.enableAttachments) {
                navigationWrapper.append(attachments);
                dropdownNavigationWrapper.append(attachments.clone());
            }

            if(this.options.forceResponsive) this.forceResponsive();
            return navigationEl;
        },

        createSpinner: function() {
        	var spinner = $('<div/>', {
        	    'class': 'spinner'
        	});
        	var spinnerIcon = $('<i/>', {
        	    'class': 'fa fa-spinner fa-spin'
        	});
        	if(this.options.spinnerIconURL.length) {
        	    spinnerIcon.css('background-image', 'url("'+this.options.spinnerIconURL+'")');
        	    spinnerIcon.addClass('image');
        	}
        	spinner.html(spinnerIcon);
        	return spinner;
        },

        createCommentElement: function(commentModel) {

            // Comment container element
            var commentEl = $('<li/>', {
                'data-id': commentModel.id,
                'class': 'comment'
            }).data('model', commentModel);

            if(commentModel.createdByCurrentUser) commentEl.addClass('by-current-user');
            if(commentModel.createdByAdmin) commentEl.addClass('by-admin');

            // Child comments
            var childComments = $('<ul/>', {
                'class': 'child-comments'
            });

            // Comment wrapper
            var commentWrapper = this.createCommentWrapperElement(commentModel);

            commentEl.append(commentWrapper);
            if(!commentModel.parent) commentEl.append(childComments);
            return commentEl;
        },

        createCommentWrapperElement: function(commentModel) {
            var commentWrapper = $('<div/>', {
                'class': 'comment-wrapper'
            });

            // Profile picture
            var profilePicture = this.createProfilePictureElement(commentModel.profilePictureURL);

            // Time
            var time = $('<time/>', {
                text: this.options.timeFormatter(commentModel.created),
                'data-original': commentModel.created
            });

            // Name
            // var nameText = commentModel.createdByCurrentUser ? this.options.textFormatter(this.options.youText) : commentModel.fullname;
            var nameText = commentModel.fullname ? commentModel.fullname :this.options.youText;
            var name = $('<div/>', {
                'class': 'name'
            });
            if(commentModel.profileURL) {
                var link = $('<a/>', {
                    href: commentModel.profileURL,
                    text: nameText
                });
                name.html(link);
            } else {
                name.text(nameText);
            }

            // Highlight name for own comments and admin
            if(commentModel.createdByCurrentUser || commentModel.createdByAdmin) name.addClass('highlight-font-bold');

            // Show reply-to name if parent of parent exists
            if(commentModel.parent) {
                var parent = this.commentsById[commentModel.parent];
                if(parent.parent) {
                    var replyTo = $('<span/>', {
                        'class': 'reply-to',
                        text: parent.fullname
                    });

                    // reply icon
                    var replyIcon = $('<i/>', {
                        'class': 'fa fa-share'
                    });
                    if(this.options.replyIconURL.length) {
                        replyIcon.css('background-image', 'url("'+this.options.replyIconURL+'")');
                        replyIcon.addClass('image');
                    }

                    replyTo.prepend(replyIcon);
                    name.append(replyTo);
                }
            }

            // Wrapper
            var wrapper = $('<div/>', {
                'class': 'wrapper'
            });

            // Content
            var content = $('<div/>', {
                'class': 'content'
            });

            // Case: attachment
            var isAttachment = commentModel.fileURL != undefined;
            if(isAttachment) {
                var format = null;
                var type = null;

                // Type and format
                if(commentModel.fileMimeType) {
                    var mimeTypeParts = commentModel.fileMimeType.split('/');
                    if(mimeTypeParts.length == 2) {
                        format = mimeTypeParts[1];
                        type = mimeTypeParts[0];
                    }
                }

                // Attachment link
                var link = $('<a/>', {
                    'class': 'attachment',
                    href: commentModel.fileURL,
                    target: '_blank'
                });

                // Case: image preview
                if(type == 'image') {
                    var image = $('<img/>', {
                        src: commentModel.fileURL
                    });
                    link.html(image);

                // Case: video preview
                } else if(type == 'video') {
                    var video = $('<video/>', {
                        src: commentModel.fileURL,
                        type: commentModel.fileMimeType,
                        controls: 'controls'
                    });
                    link.html(video);

                // Case: icon and text
                } else {

                    // Icon
                    var availableIcons = ['archive', 'audio', 'code', 'excel', 'image', 'movie', 'pdf', 'photo',
                        'picture', 'powerpoint', 'sound', 'video', 'word', 'zip'];

                    var iconClass = 'fa fa-file-o';
                    if(availableIcons.indexOf(format) > 0) {
                        iconClass = 'fa fa-file-' + format + '-o';
                    } else if(availableIcons.indexOf(type) > 0) {
                        iconClass = 'fa fa-file-' + type + '-o';
                    }

                    var fileIcon = $('<i/>', {
                        'class': iconClass
                    });
                    if(this.options.fileIconURL.length) {
                        fileIcon.css('background-image', 'url("'+this.options.fileIconURL+'")');
                        fileIcon.addClass('image');
                    }

                    // File name
                    var parts = commentModel.fileURL.split('/');
                    var fileName = parts[parts.length - 1];
                    fileName = fileName.split('?')[0];
                    fileName = decodeURIComponent(fileName);

                    link.text(fileName);
                    link.prepend(fileIcon);
                }
                content.html(link);

            // Case: regular comment
            } else {
                content.html(this.linkify(this.escape(commentModel.content)));
            }

            // Edited timestamp
            if(commentModel.modified && commentModel.modified != commentModel.created) {
                var editedTime = this.options.timeFormatter(commentModel.modified);
                var edited = $('<time/>', {
                    'class': 'edited',
                    text: this.options.textFormatter(this.options.editedText) + ' ' + editedTime,
                    'data-original': commentModel.modified
                });
                content.append(edited);
            }

            // Actions
            var actions = $('<span/>', {
                'class': 'actions'
            });

            // Separator
            var separator = $('<span/>', {
                'class': 'separator',
                text: ''
            });

            // Reply
            var reply = $('<button/>', {
                'class': 'action reply',
                'type': 'button',
                text: this.options.textFormatter(this.options.replyText)
            });

            // Upvote icon
            var upvoteIcon = $('<i/>', {
                'class': 'fa fa-thumbs-up'
            });
            if(this.options.upvoteIconURL.length) {
                upvoteIcon.css('background-image', 'url("'+this.options.upvoteIconURL+'")');
                upvoteIcon.addClass('image');
            }

            // Upvotes
            var upvotes = this.createUpvoteElement(commentModel);

            // Append buttons for actions that are enabled
            if(this.options.enableReplying) actions.append(reply);
            if(this.options.enableUpvoting) actions.append(upvotes);

            if(commentModel.createdByCurrentUser || this.options.currentUserIsAdmin) {

                // Case: delete button for attachment
                if(isAttachment && this.isAllowedToDelete(commentModel.id)) {
                    var deleteButton = $('<button/>', {
                        'class': 'action delete enabled',
                        text: this.options.textFormatter(this.options.deleteText)
                    });
                    actions.append(deleteButton);

                // Case: edit button for regular comment
                } else if(!isAttachment && this.options.enableEditing) {
                    var editButton = $('<button/>', {
                        'class': 'action edit',
                        text: this.options.textFormatter(this.options.editText)
                    });
                    actions.append(editButton);
                }
            }

            // Append separators between the actions
            actions.children().each(function(index, actionEl) {
                if(!$(actionEl).is(':last-child')) {
                    $(actionEl).after(separator.clone());
                }
            });

            wrapper.append(content);
            wrapper.append(actions);
            commentWrapper.append(profilePicture).append(time).append(name).append(wrapper);
            return commentWrapper;
        },

        createUpvoteElement: function(commentModel) {
            // Upvote icon
            var upvoteIcon = $('<i/>', {
                'class': 'fa fa-thumbs-up'
            });
            if(this.options.upvoteIconURL.length) {
                upvoteIcon.css('background-image', 'url("'+this.options.upvoteIconURL+'")');
                upvoteIcon.addClass('image');
            }

            // Upvotes
            var upvoteEl = $('<button/>', {
                'class': 'action upvote' + (commentModel.userHasUpvoted ? ' highlight-font' : '')
            }).append($('<span/>', {
                text: commentModel.upvoteCount,
                'class': 'upvote-count'
            })).append(upvoteIcon);

            return upvoteEl;
        },

        reRenderComment: function(id) {
            var commentModel = this.commentsById[id];
            var commentElements = this.$el.find('li.comment[data-id="'+commentModel.id+'"]');

            var self = this;
            commentElements.each(function(index, commentEl) {
                var commentWrapper = self.createCommentWrapperElement(commentModel);
                $(commentEl).find('.comment-wrapper').first().replaceWith(commentWrapper);
            });
        },

        reRenderCommentActionBar: function(id) {
            var commentModel = this.commentsById[id];
            var commentElements = this.$el.find('li.comment[data-id="'+commentModel.id+'"]');

            var self = this;
            commentElements.each(function(index, commentEl) {
                var commentWrapper = self.createCommentWrapperElement(commentModel);
                $(commentEl).find('.actions').first().replaceWith(commentWrapper.find('.actions'));
            });
        },

        reRenderUpvotes: function(id) {
            var commentModel = this.commentsById[id];
            var commentElements = this.$el.find('li.comment[data-id="'+commentModel.id+'"]');

            var self = this;
            commentElements.each(function(index, commentEl) {
                var upvotes = self.createUpvoteElement(commentModel);
                $(commentEl).find('.upvote').first().replaceWith(upvotes);
            });
        },


        // Styling
        // =======

        createCssDeclarations: function() {

            // Remove previous css-declarations
            $('head style.jquery-comments-css').remove();

            // Navigation underline
            this.createCss('.jquery-comments ul.navigation li.active:after {background: '
                + this.options.highlightColor  + ' !important;',
                +'}');

            // Dropdown active element
            this.createCss('.jquery-comments ul.navigation ul.dropdown li.active {background: '
                + this.options.highlightColor  + ' !important;',
                +'}');

            // Background highlight
            this.createCss('.jquery-comments .highlight-background {background: '
                + this.options.highlightColor  + ' !important;',
                +'}');

            // Font highlight
            this.createCss('.jquery-comments .highlight-font {color: '
                + this.options.highlightColor + ' !important;'
                +'}');
            this.createCss('.jquery-comments .highlight-font-bold {color: '
                + this.options.highlightColor + ' !important;'
                + 'font-weight: bold;'
                +'}');
        },

        createCss: function(css) {
            var styleEl = $('<style/>', {
                type: 'text/css',
                'class': 'jquery-comments-css',
                text: css
            });
            $('head').append(styleEl);
        },


        // Utilities
        // =========

        getComments: function() {
            var self = this;
            return Object.keys(this.commentsById).map(function(id){return self.commentsById[id]});
        },

        getChildComments: function(parentId) {
            return this.getComments().filter(function(comment){return comment.parent == parentId});
        },

        getAttachments: function() {
            return this.getComments().filter(function(comment){return comment.fileURL != undefined});
        },

        getOutermostParent: function(directParentId) {
            var parentId = directParentId;
            do {
                var parentComment = this.commentsById[parentId];
                parentId = parentComment.parent;
            } while(parentComment.parent);
            return parentComment;
        },

        createCommentJSON: function(textarea) {
            var time = new Date().toISOString();
            var commentJSON = {
                // id: 'c' +  (this.getComments().length + 1),   // Temporary id
                id: 'c' + Date.now() + Math.floor(Math.random()*10000),
                parent: textarea.attr('data-parent') || null,
                created: time,
                modified: time,
                content: this.getTextareaContent(textarea),
                fullname: this.options.textFormatter(this.options.youText),
                profilePictureURL: this.options.profilePictureURL,
                createdByCurrentUser: true,
                upvoteCount: 0,
                userHasUpvoted: false
            };
            return commentJSON;
        },

        isAllowedToDelete: function(commentId) {
            if(this.options.enableDeleting) {
                var isAllowedToDelete = true;
                if(!this.options.enableDeletingCommentWithReplies) {
                    $(this.getComments()).each(function(index, comment) {
                        if(comment.parent == commentId) isAllowedToDelete = false;
                    });
                }
                return isAllowedToDelete;
            }
            return false;
        },

        setToggleAllButtonText: function(toggleAllButton, toggle) {
            var self = this;
            var textContainer = toggleAllButton.find('span.text');
            var caret = toggleAllButton.find('.caret');

            var showExpandingText = function() {
                var text = self.options.textFormatter(self.options.viewAllRepliesText);
                var replyCount = toggleAllButton.siblings('.comment').length;
                text = text.replace('__replyCount__', replyCount);
                textContainer.text(text);
            };

            var hideRepliesText = this.options.textFormatter(this.options.hideRepliesText);

            if(toggle) {

                // Toggle text
                if(textContainer.text() == hideRepliesText) {
                    showExpandingText();
                } else {
                    textContainer.text(hideRepliesText);
                }
                // Toggle direction of the caret
                caret.toggleClass('up');

            } else {

                // Update text if necessary
                if(textContainer.text() != hideRepliesText) {
                    showExpandingText();
                }
            }
        },

        adjustTextareaHeight: function(textarea, focus) {
            var textareaBaseHeight = 2.2;
            var lineHeight = 1.45;

            var setRows = function(rows) {
                var height = textareaBaseHeight + (rows - 1) * lineHeight;
                textarea.css('height', height + 'em');
            };

            textarea = $(textarea);
            var rowCount = focus == true ? this.options.textareaRowsOnFocus : this.options.textareaRows;
            do {
                setRows(rowCount);
                rowCount++;
                var isAreaScrollable = textarea[0].scrollHeight > textarea.outerHeight();
                var maxRowsUsed = this.options.textareaMaxRows == false ?
                    false : rowCount > this.options.textareaMaxRows;
            } while(isAreaScrollable && !maxRowsUsed);
        },

        clearTextarea: function(textarea) {
            textarea.empty().trigger('input');
        },

        getTextareaContent: function(textarea) {
            var ce = $('<pre/>').html(textarea.html());
            ce.find('div, p, br').replaceWith(function() { return '\n' + this.innerHTML; });

            // Trim leading spaces
            var text = ce.text().replace(/^\s+/g, '');
            return text;
        },

        getTextareaContentAsEscapedHTML: function(html) {
            // Escaping HTML except the new lines
            var escaped = this.escape(html);
            return escaped.replace(/(?:\n)/g, '<br>');
        },

        moveCursorToEnd: function(el) {
            el = $(el)[0];

            // Trigger input to adjust size
            $(el).trigger('input');

            // Scroll to bottom
            $(el).scrollTop(el.scrollHeight);

            // Move cursor to end
            if (typeof window.getSelection != 'undefined' && typeof document.createRange != 'undefined') {
                var range = document.createRange();
                range.selectNodeContents(el);
                range.collapse(false);
                var sel = window.getSelection();
                sel.removeAllRanges();
                sel.addRange(range);
            } else if (typeof document.body.createTextRange != 'undefined') {
                var textRange = document.body.createTextRange();
                textRange.moveToElementText(el);
                textRange.collapse(false);
                textRange.select();
            }

            // Focus
            el.focus();
        },

        escape: function(inputText) {
            return $('<pre/>').text(inputText).html();
        },

        linkify: function(inputText) {
            var replacedText, replacePattern1, replacePattern2, replacePattern3;

            // URLs starting with http://, https://, file:// or ftp://
            replacePattern1 = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
            replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_blank">$1</a>');

            // URLs starting with "www." (without // before it, or it'd re-link the ones done above).
            replacePattern2 = /(^|[^\/f])(www\.[\S]+(\b|$))/gim;
            replacedText = replacedText.replace(replacePattern2, '$1<a href="http://$2" target="_blank">$2</a>');

            // Change email addresses to mailto:: links.
            replacePattern3 = /(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim;
            replacedText = replacedText.replace(replacePattern3, '<a href="mailto:$1">$1</a>');

            // If there are hrefs in the original text, let's split
            // the text up and only work on the parts that don't have urls yet.
            var count = inputText.match(/<a href/g) || [];

            if(count.length > 0){
                // Keep delimiter when splitting
                var splitInput = inputText.split(/(<\/a>)/g);
                for (var i = 0 ; i < splitInput.length ; i++){
                    if(splitInput[i].match(/<a href/g) == null){
                        splitInput[i] = splitInput[i].replace(replacePattern1, '<a href="$1" target="_blank">$1</a>').replace(replacePattern2, '$1<a href="http://$2" target="_blank">$2</a>').replace(replacePattern3, '<a href="mailto:$1">$1</a>');
                    }
                }
                var combinedReplacedText = splitInput.join('');
                return combinedReplacedText;
            } else {
                return replacedText;
            }
        },

        applyInternalMappings: function(commentJSON) {

            // Inverting field mappings
            var invertedMappings = {};
            var mappings = this.options.fieldMappings;
            for (var prop in mappings) {
                if(mappings.hasOwnProperty(prop)) {
                    invertedMappings[mappings[prop]] = prop;
                }
            }

            return this.applyMappings(invertedMappings, commentJSON);
        },

        applyExternalMappings: function(commentJSON) {
            var mappings = this.options.fieldMappings;
            return this.applyMappings(mappings, commentJSON);
        },

        applyMappings: function(mappings, commentJSON) {
            var result = {};

            for(var key1 in commentJSON) {
                if(key1 in mappings) {
                    var key2 = mappings[key1];
                    result[key2] = commentJSON[key1];
                }
            }
            return result;
        }

    };

    $(document).ready(function(){
        $("body").append('<style>.jquery-comments *{box-sizing:border-box;text-shadow:none}.jquery-comments a{color:#2793e6;text-decoration:none}.jquery-comments a:hover{text-decoration:underline}.jquery-comments .textarea,.jquery-comments button,.jquery-comments input{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;vertical-align:top;border-radius:0;margin:0;padding:0;border:0;outline:0;background:rgba(0,0,0,0)}.jquery-comments button{vertical-align:inherit}.jquery-comments [contentEditable=true]:empty:not(:focus):before{content:attr(data-placeholder);color:#ccc;position:inherit}.jquery-comments i.fa{width:1em;height:1em;background-size:cover}.jquery-comments i.fa.image:before{content:""}.jquery-comments .spinner{font-size:2em;text-align:center;padding:.5em;color:#666}.jquery-comments ul{list-style:none;padding:0;margin:0}.jquery-comments .profile-picture{float:left;width:3.6rem;height:3.6rem;max-width:50px;max-height:50px}.jquery-comments i.profile-picture{font-size:3.4em;text-align:center}.jquery-comments .profile-picture.round{border-radius:50%}.jquery-comments .commenting-field.main{margin-bottom:.75em}.jquery-comments .commenting-field.main .profile-picture{margin-bottom:1rem}.jquery-comments .textarea-wrapper{overflow:hidden;padding-left:15px;position:relative}.jquery-comments .textarea-wrapper:before{content:" ";position:absolute;border:5px solid #d5d5d5;left:5px;top:0;width:10px;height:10px;box-sizing:border-box;border-bottom-color:transparent;border-left-color:transparent}.jquery-comments .textarea-wrapper:after{content:" ";position:absolute;border:7px solid #fff;left:7px;top:1px;width:10px;height:10px;box-sizing:border-box;border-bottom-color:transparent;border-left-color:transparent}.jquery-comments .textarea-wrapper .close{cursor:pointer;width:1em;height:1em;right:0;z-index:10;position:absolute;border:.5em solid transparent;box-sizing:content-box;font-size:inherit;opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jquery-comments .textarea-wrapper .close:hover{opacity:1}.jquery-comments:not(.mobile) .scrollable .textarea-wrapper .close{margin-right:15px}.jquery-comments .textarea-wrapper .close span{background:#999;width:25%;left:37.5%;height:100%;position:absolute;-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg)}.jquery-comments .textarea-wrapper .close .right{-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.jquery-comments .textarea-wrapper .textarea{margin:0;outline:0;overflow-y:auto;cursor:text;border:1px solid #ccc;background:#fff;font-size:1em;line-height:1.45em;padding:.25em .8em;padding-right:2em}.jquery-comments .textarea-wrapper .textarea *{margin:0;padding:0}.jquery-comments:not(.mobile) .scrollable .textarea-wrapper .textarea{padding-right:calc(2em + 15px)}.jquery-comments .textarea-wrapper .textarea .reply-to-badge{background:#eee;border:1px solid #ddd;margin-right:.5em;vertical-align:baseline;line-height:1.4em;padding:0 .5em;font-size:.8em}.jquery-comments .textarea-wrapper .control-row>span{float:right;color:#fff;padding:0 1em;font-size:1em;line-height:1.6em;margin-top:.4em;border:1px solid transparent;opacity:.5}.jquery-comments .textarea-wrapper .control-row>span:not(:first-child){margin-right:.5em}.jquery-comments .textarea-wrapper .control-row>span.enabled{opacity:1;cursor:pointer}.jquery-comments .textarea-wrapper .control-row>span:not(.enabled){pointer-events:none}.jquery-comments .textarea-wrapper .control-row>span.enabled:hover{opacity:.9}.jquery-comments .textarea-wrapper .control-row>span.upload{position:relative;overflow:hidden;background-color:#999}.jquery-comments .textarea-wrapper .control-row>span.upload input{cursor:pointer;position:absolute;top:0;right:0;margin:0;padding:0;opacity:0;height:100%}.jquery-comments ul.navigation{clear:both;color:#ccc;border-bottom:2px solid #ccc;line-height:2em;font-size:1em;margin-bottom:.5em}.jquery-comments ul.navigation .navigation-wrapper{position:relative}.jquery-comments ul.navigation li{display:inline-block;position:relative;padding:0 1em;cursor:pointer;font-weight:700;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jquery-comments ul.navigation li.active,.jquery-comments ul.navigation li:hover{color:#000}.jquery-comments ul.navigation li.active:after{content:" ";display:block;right:0;height:2px;background:#000;position:absolute;bottom:-2px;left:0}.jquery-comments ul.navigation li[data-sort-key=attachments]{float:right}.jquery-comments ul.navigation .navigation-wrapper.responsive{display:none}@media screen and (max-width:600px){.jquery-comments ul.navigation .navigation-wrapper{display:none}.jquery-comments ul.navigation .navigation-wrapper.responsive{display:initial}}.jquery-comments.responsive ul.navigation .navigation-wrapper{display:none}.jquery-comments.responsive ul.navigation .navigation-wrapper.responsive{display:initial}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title{padding:0 1.5em}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title header:after{display:inline-block;content:"";border-left:.3em solid transparent!important;border-right:.3em solid transparent!important;border-top:.4em solid #ccc;margin-left:.5em;position:relative;top:-.1em}.jquery-comments ul.navigation .navigation-wrapper.responsive li.title.active header:after,.jquery-comments ul.navigation .navigation-wrapper.responsive li.title:hover header:after{border-top-color:#000}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown{display:none;position:absolute;left:0;width:100%;background:#fff;border:1px solid;z-index:99;box-shadow:0 6px 12px rgba(0,0,0,.175);-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);-moz-box-shadow:0 6px 12px rgba(0,0,0,.175);-ms-box-shadow:0 6px 12px rgba(0,0,0,.175)}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li{display:block;color:#000;font-weight:400;padding:.25em 0}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li.active{color:#fff}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li:hover:not(.active){background:#f5f5f5}.jquery-comments ul.navigation .navigation-wrapper.responsive ul.dropdown li:after{display:none}.jquery-comments .no-data{display:none;margin:1em;text-align:center;font-size:1.5em;color:#ccc}.jquery-comments ul.main:empty~.no-comments{display:inherit}.jquery-comments ul#attachment-list:empty~.no-attachments{display:inherit}.jquery-comments ul.main li.comment{clear:both}.jquery-comments ul.main li.comment .comment-wrapper,.jquery-comments ul.main li.comment .commenting-field,.jquery-comments ul.main li.toggle-all{padding:.5em}.jquery-comments ul.main li.comment .comment-wrapper{border-top:1px solid #ddd;overflow:hidden}.jquery-comments ul.main>li.comment:first-child>.comment-wrapper{border-top:none}.jquery-comments ul.main li.comment .comment-wrapper>.profile-picture{margin-right:.5rem}.jquery-comments ul.main li.comment time{float:right;line-height:1.4em;margin-left:.5em;font-size:.8em;color:#666}.jquery-comments ul.main li.comment .name{line-height:1.4em;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.jquery-comments ul.main li.comment .name a{color:inherit}.jquery-comments ul.main li.comment .name .reply-to{color:#999;font-size:.8em;font-weight:400;vertical-align:top}.jquery-comments ul.main li.comment .name .reply-to i{margin-left:.5em;margin-right:.25em}.jquery-comments ul.main li.comment .wrapper{line-height:1.3em;overflow:hidden}.jquery-comments.mobile ul.main li.comment .child-comments li.comment .wrapper{overflow:visible}.jquery-comments ul.main li.comment .wrapper .content{white-space:pre-line;word-break:break-word}.jquery-comments ul.main li.comment .wrapper .content a.attachment i{margin-right:.5em}.jquery-comments ul.main li.comment .wrapper .content a.attachment>*{max-width:100%;max-height:200px;width:auto;height:auto;margin-top:.25em;margin-bottom:.25em}.jquery-comments ul.main li.comment .wrapper .content time.edited{float:inherit;margin:0;font-size:.9em;font-style:italic;color:#999}.jquery-comments ul.main li.comment .wrapper .content time.edited:before{content:" - "}.jquery-comments.mobile ul.main li.comment .actions{font-size:1em}.jquery-comments ul.main li.comment .actions>*{color:#999;font-weight:700}.jquery-comments ul.main li.comment .actions .action{display:inline-block;cursor:pointer;margin-left:1em;margin-right:1em;line-height:1.5em;font-size:.9em}.jquery-comments ul.main li.comment .actions .action:first-child{margin-left:0}.jquery-comments ul.main li.comment .actions .action.upvote{cursor:inherit}.jquery-comments ul.main li.comment .actions .action.upvote .upvote-count{margin-right:.5em}.jquery-comments ul.main li.comment .actions .action.upvote .upvote-count:empty{display:none}.jquery-comments ul.main li.comment .actions .action.upvote i{cursor:pointer}.jquery-comments ul.main li.comment .actions .action.upvote:not(.highlight-font) i:hover,.jquery-comments ul.main li.comment .actions .action:not(.upvote):hover{color:#666}.jquery-comments ul.main li.comment .actions .action.delete{opacity:.5;pointer-events:none}.jquery-comments ul.main li.comment .actions .action.delete.enabled{opacity:1;pointer-events:auto}.jquery-comments ul#attachment-list li.comment .actions .action:not(.delete){display:none}.jquery-comments ul#attachment-list li.comment .actions .action.delete{margin:0}.jquery-comments ul#attachment-list li.comment .actions .separator{display:none}.jquery-comments ul.main li.comment .child-comments>:before{content:"";height:1px;float:left;width:calc(3.6em + .5em);max-width:calc(50px + .5em)}.jquery-comments ul.main li.comment .child-comments .profile-picture{width:2.4rem;height:2.4rem}.jquery-comments ul.main li.comment .child-comments i.profile-picture{font-size:2.4em}.jquery-comments ul.main li.comment .child-comments li.toggle-all{padding-top:0}.jquery-comments ul.main li.comment .child-comments li.toggle-all span:first-child{vertical-align:middle}.jquery-comments ul.main li.comment .child-comments li.toggle-all span:first-child:hover{cursor:pointer;text-decoration:underline}.jquery-comments ul.main li.comment .child-comments li.toggle-all .caret{display:inline-block;vertical-align:middle;width:0;height:0;margin-left:.5em;border:.3em solid;margin-top:.35em;border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.jquery-comments ul.main li.comment .child-comments li.toggle-all .caret.up{border-top-color:transparent;border-bottom-color:inherit;margin-top:-.2em}.jquery-comments ul.main li.comment .child-comments .hidden-reply{display:none}.jquery-comments ul.main li.comment .child-comments .visible{display:inherit}.jquery-comments ul.main li.comment.edit>.comment-wrapper>:not(.commenting-field){display:none}.jquery-comments ul.main li.comment.edit>.comment-wrapper .commenting-field{padding:0!important}.jquery-comments.drag-ongoing{overflow-y:hidden!important}.jquery-comments .droppable-overlay{display:table;position:fixed;z-index:99;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.3)}.jquery-comments .droppable-overlay .droppable-container{display:table-cell;vertical-align:middle;text-align:center}.jquery-comments .droppable-overlay .droppable-container .droppable{background:#fff;color:#ccc;padding:6em}.jquery-comments .droppable-overlay .droppable-container .droppable.drag-over{color:#999}.jquery-comments .droppable-overlay .droppable-container .droppable i{margin-bottom:5px}.jquery-comments.read-only .commenting-field{display:none}.jquery-comments.read-only .actions{display:none}</style>');
    });
    $.fn.comments = function(options) {
        return this.each(function() {
            var comments = Object.create(Comments);
            comments.init(options || {}, this);
            $.data(this, 'comments', comments);
        });
    };
    $.fn.comments.data = function(){
        return [{id:1,parent:null,created:"2015-01-01",modified:"2015-01-01",content:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed posuere interdum sem. Quisque ligula eros ullamcorper quis, lacinia quis facilisis sed sapien. Mauris varius diam vitae arcu.",fullname:"Simon Powell",profile_picture_url:"https://i.pinimg.com/564x/6b/63/1b/6b631b0570539afa0f6448e7fc841aad.jpg",created_by_admin:!1,created_by_current_user:!1,upvote_count:3,user_has_upvoted:!1},{id:2,parent:null,created:"2015-01-02",modified:"2015-01-02",content:"Sed posuere interdum sem. Quisque ligula eros ullamcorper quis, lacinia quis facilisis sed sapien. Mauris varius diam vitae arcu.",fullname:"Administrator",profile_picture_url:"https://app.viima.com/static/media/user_profiles/admin-user-icon.png",created_by_admin:!0,created_by_current_user:!1,upvote_count:2,user_has_upvoted:!1},{id:3,parent:null,created:"2015-01-03",modified:"2015-01-03",content:"Sed posuere interdum sem.\nQuisque ligula eros ullamcorper quis, lacinia quis facilisis sed sapien. Mauris varius diam vitae arcu. Sed arcu lectus auctor vitae, consectetuer et venenatis eget velit.",fullname:"Hi Lan",profile_picture_url:"https://app.viima.com/static/media/user_profiles/user-icon.png",created_by_admin:!1,created_by_current_user:!0,upvote_count:2,user_has_upvoted:!0},{id:4,parent:3,created:"2015-01-04",modified:"2015-01-04",file_url:"http://www.w3schools.com/html/mov_bbb.mp4",file_mime_type:"video/mp4",fullname:"Todd Brown",profile_picture_url:"https://app.viima.com/static/media/user_profiles/user-icon.png",created_by_admin:!1,created_by_current_user:!1,upvote_count:0,user_has_upvoted:!1},{id:5,parent:4,created:"2015-01-05",modified:"2015-01-05",content:"Quisque ligula eros ullamcorper quis, lacinia quis facilisis sed sapien. Mauris varius diam vitae arcu. Sed arcu lectus auctor vitae, consectetuer et venenatis eget velit.",fullname:"Hank Smith",profile_picture_url:"https://i.pinimg.com/564x/6b/63/1b/6b631b0570539afa0f6448e7fc841aad.jpg",created_by_admin:!1,created_by_current_user:!0,upvote_count:0,user_has_upvoted:!1}];
    };
}));
$.fn.SearchAjax = function(options){
   return this.each(function(){
      var ele = $(this);
      var settings = $.extend({
        placeholder:"Search...",
        maxChar:3,
        create : function(next){
              $.ajax({
            type:"POST",
            async:true,
            url: "data.json",
            dataType: "json",
            success: next, 
          });
        },
        onSelected : function(e,data){
           console.log(data);
        },
        filterItem : function (val,v){
              
               if(v.label.toLowerCase().includes(val)){
                 return true;
               }

               return false;
            },
            renderItem:function (item){
              
                return `<a href="http://www.bbc.co.uk/">${item.label}</a>`;
            }
      },options,true)
      ele.addClass("searchAJAX").html(`
        <div class="design-search" ><input type="text" placeholder="${settings.placeholder}"></input>
        <i class="fa-light fa-magnifying-glass iconSearch"></i></div>
      <ul class="autocomplete-results">
      </ul>`);

      var input = this.querySelector('input');
       var autocomplete_results = $(".autocomplete-results");

       autocomplete_results.css("bottom",-($(input).height+16)+"px");

      var people = [];
      var results;
      var methods = {



      };

      
      //check again
      if(typeof settings.create==="string"){
        var u__= settings.create;
         settings.create= function(next){
              $.ajax({
            type:"POST",
            async:true,
            url: u__,
            dataType: "json",
            success: next
          });
        };
      }
      

      // functions
      function autocomplete(val) {

        var people_return = [];

        for (i = 0; i < people.length; i++) {
          if (settings.filterItem(val,people[i])) { 
            people_return.push(people[i]);
          }
        }

        return people_return;
      }

       var people_to_show = null;
      // events
      input.onkeyup = function (e) {
        input_val = this.value; // updates the variable on each ocurrence

        if (input_val.length >=settings.maxChar) {
          people_to_show = [];

          
          autocomplete_results.html("");
          people_to_show = autocomplete(input_val);

          for (i = 0; i < people_to_show.length; i++) { 
            autocomplete_results.append('<li data-info=\''+JSON.stringify(people_to_show[i])+'\' data-id="'+(people_to_show[i].id||"")+'" >'+settings.renderItem(people_to_show[i])+'</li>');
          } 
          autocomplete_results.show();
        } else {
          people_to_show = [];
          autocomplete_results.html("");
        }
      };
      // input.onblur = function (e) {
      //   autocomplete_results.hide();
      //   settings.create(function(data){
      //      people = data;
      //   });
      // };
      input.onfocus = function (e) {
      
        if (people_to_show&&people_to_show.length) {
           autocomplete_results.html("");
          for (i = 0; i < people_to_show.length; i++) { 
            autocomplete_results.append('<li data-info=\''+JSON.stringify(people_to_show[i])+'\' data-id="'+(people_to_show[i].id||"")+'">'+settings.renderItem(people_to_show[i])+'</li>');

          } 
          autocomplete_results.show();
        } 
      };


        ele.on("click",".autocomplete-results li",function(e){
           var data = $(this).data("info");

           settings.onSelected.call(methods,this,data);
          

          autocomplete_results.hide();
        });


      settings.create(function(data){
           people = data;
      });
      
      $(this).data("SearchAjax",methods);
   });
};

// $(document).ready(function(){
//   $("#autocomplete-container").SearchAjax({

//   });
// });
/*! jquery.finger - v0.1.6 - 2016-10-05
* https://github.com/ngryman/jquery.finger
* Copyright (c) 2016 Nicolas Gryman; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(c){c.preventDefault(),a.event.remove(u,"click",b)}function c(a,b){return(p?b.originalEvent.touches[0]:b)["page"+a.toUpperCase()]}function d(c,d,e){var h=a.Event(d,w);a.event.trigger(h,{originalEvent:c},c.target),h.isDefaultPrevented()&&(~d.indexOf("tap")&&!p?a.event.add(u,"click",b):c.preventDefault()),e&&(a.event.remove(u,s+"."+t,f),a.event.remove(u,r+"."+t,g))}function e(e){if(!(e.which>1)){var k=e.timeStamp||+new Date;i!=k&&(i=k,v.x=w.x=c("x",e),v.y=w.y=c("y",e),v.time=k,v.target=e.target,w.orientation=null,w.end=!1,h=!1,j=setTimeout(function(){d(e,"press",!0)},x.pressDuration),a.event.add(u,s+"."+t,f),a.event.add(u,r+"."+t,g),x.preventDefault&&(e.preventDefault(),a.event.add(u,"click",b)))}}function f(b){if(w.x=c("x",b),w.y=c("y",b),w.dx=w.x-v.x,w.dy=w.y-v.y,w.adx=Math.abs(w.dx),w.ady=Math.abs(w.dy),h=w.adx>x.motionThreshold||w.ady>x.motionThreshold){for(clearTimeout(j),w.orientation||(w.adx>w.ady?(w.orientation="horizontal",w.direction=w.dx>0?1:-1):(w.orientation="vertical",w.direction=w.dy>0?1:-1));b.target&&b.target!==v.target;)b.target=b.target.parentNode;return b.target!==v.target?(b.target=v.target,void g.call(this,a.Event(r+"."+t,b))):void d(b,"drag")}}function g(a){var b,c=a.timeStamp||+new Date,e=c-v.time;if(clearTimeout(j),h)a.target=v.target,e<x.flickDuration&&d(a,"flick"),w.end=!0,b="drag";else if(a.target===v.target){var f=k===a.target&&c-l<x.doubleTapInterval;b=f?"doubletap":"tap",k=f?null:v.target,l=c}b&&d(a,b,!0)}var h,i,j,k,l,m=navigator.userAgent,n=/chrome/i.exec(m),o=/android/i.exec(m),p="ontouchstart"in window&&!(n&&!o),q=p?"touchstart":"mousedown",r=p?"touchend touchcancel":"mouseup mouseleave",s=p?"touchmove":"mousemove",t="finger",u=a("html")[0],v={},w={},x=a.Finger={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5};return a.event.add(u,q+"."+t,e),a.each("tap doubletap press drag flick".split(" "),function(b,c){a.fn[c]=function(a){return a?this.on(c,a):this.trigger(c)}}),x});
/*!
 * Nestable jQuery Plugin - Copyright (c) 2012 David Bushell - http://dbushell.com/
 * Dual-licensed under the BSD or MIT licenses
 */
;(function($, window, document, undefined)
{
    var hasTouch = 'ontouchstart' in document;

    /**
     * Detect CSS pointer-events property
     * events are normally disabled on the dragging element to avoid conflicts
     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js
     */
    var hasPointerEvents = (function()
    {
        var el    = document.createElement('div'),
            docEl = document.documentElement;
        if (!('pointerEvents' in el.style)) {
            return false;
        }
        el.style.pointerEvents = 'auto';
        el.style.pointerEvents = 'x';
        docEl.appendChild(el);
        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';
        docEl.removeChild(el);
        return !!supports;
    })();

    var defaults = {
            listNodeName    : 'ol',
            itemNodeName    : 'li',
            rootClass       : 'dd',
            listClass       : 'dd-list',
            itemClass       : 'dd-item',
            dragClass       : 'dd-dragel',
            handleClass     : 'dd-handle',
            collapsedClass  : 'dd-collapsed',
            placeClass      : 'dd-placeholder',
            noDragClass     : 'dd-nodrag',
            emptyClass      : 'dd-empty',
            expandBtnHTML   : '<button data-action="expand" type="button">Expand</button>',
            collapseBtnHTML : '<button data-action="collapse" type="button">Collapse</button>',
            group           : 0,
            maxDepth        : 5,
            threshold       : 20
        };

    function Plugin(element, options)
    {
        this.w  = $(document);
        this.el = $(element);
        this.options = $.extend({}, defaults, options);
        this.init();
    }

    Plugin.prototype = {

        init: function()
        {
            var list = this;

            list.reset();

            list.el.data('nestable-group', this.options.group);

            list.placeEl = $('<div class="' + list.options.placeClass + '"/>');

            $.each(this.el.find(list.options.itemNodeName), function(k, el) {
                list.setParent($(el));
            });

            list.el.on('click', 'button', function(e) {
                if (list.dragEl) {
                    return;
                }
                var target = $(e.currentTarget),
                    action = target.data('action'),
                    item   = target.parent(list.options.itemNodeName);
                if (action === 'collapse') {
                    list.collapseItem(item);
                }
                if (action === 'expand') {
                    list.expandItem(item);
                }
            });

            var onStartEvent = function(e)
            {
                var handle = $(e.target);
                if (!handle.hasClass(list.options.handleClass)) {
                    if (handle.closest('.' + list.options.noDragClass).length) {
                        return;
                    }
                    handle = handle.closest('.' + list.options.handleClass);
                }

                if (!handle.length || list.dragEl) {
                    return;
                }

                list.isTouch = /^touch/.test(e.type);
                if (list.isTouch && e.touches.length !== 1) {
                    return;
                }

                e.preventDefault();
                list.dragStart(e.touches ? e.touches[0] : e);
            };

            var onMoveEvent = function(e)
            {
                if (list.dragEl) {
                    e.preventDefault();
                    list.dragMove(e.touches ? e.touches[0] : e);
                }
            };

            var onEndEvent = function(e)
            {
                if (list.dragEl) {
                    e.preventDefault();
                    list.dragStop(e.touches ? e.touches[0] : e);
                }
            };

            if (hasTouch) {
                list.el[0].addEventListener('touchstart', onStartEvent, false);
                window.addEventListener('touchmove', onMoveEvent, false);
                window.addEventListener('touchend', onEndEvent, false);
                window.addEventListener('touchcancel', onEndEvent, false);
            }

            list.el.on('mousedown', onStartEvent);
            list.w.on('mousemove', onMoveEvent);
            list.w.on('mouseup', onEndEvent);

        },

        serialize: function()
        {
            var data,
                depth = 0,
                list  = this;
                step  = function(level, depth)
                {
                    var array = [ ],
                        items = level.children(list.options.itemNodeName);
                    items.each(function()
                    {
                        var li   = $(this),
                            item = $.extend({}, li.data()),
                            sub  = li.children(list.options.listNodeName);
                        if (sub.length) {
                            item.children = step(sub, depth + 1);
                        }
                        array.push(item);
                    });
                    return array;
                };
            data = step(list.el.find(list.options.listNodeName).first(), depth);
            return data;
        },

        serialise: function()
        {
            return this.serialize();
        },

        reset: function()
        {
            this.mouse = {
                offsetX   : 0,
                offsetY   : 0,
                startX    : 0,
                startY    : 0,
                lastX     : 0,
                lastY     : 0,
                nowX      : 0,
                nowY      : 0,
                distX     : 0,
                distY     : 0,
                dirAx     : 0,
                dirX      : 0,
                dirY      : 0,
                lastDirX  : 0,
                lastDirY  : 0,
                distAxX   : 0,
                distAxY   : 0
            };
            this.isTouch    = false;
            this.moving     = false;
            this.dragEl     = null;
            this.dragRootEl = null;
            this.dragDepth  = 0;
            this.hasNewRoot = false;
            this.pointEl    = null;
        },

        expandItem: function(li)
        {
            li.removeClass(this.options.collapsedClass);
            li.children('[data-action="expand"]').hide();
            li.children('[data-action="collapse"]').show();
            li.children(this.options.listNodeName).show();
        },

        collapseItem: function(li)
        {
            var lists = li.children(this.options.listNodeName);
            if (lists.length) {
                li.addClass(this.options.collapsedClass);
                li.children('[data-action="collapse"]').hide();
                li.children('[data-action="expand"]').show();
                li.children(this.options.listNodeName).hide();
            }
        },

        expandAll: function()
        {
            var list = this;
            list.el.find(list.options.itemNodeName).each(function() {
                list.expandItem($(this));
            });
        },

        collapseAll: function()
        {
            var list = this;
            list.el.find(list.options.itemNodeName).each(function() {
                list.collapseItem($(this));
            });
        },

        setParent: function(li)
        {
            if (li.children(this.options.listNodeName).length) {
                li.prepend($(this.options.expandBtnHTML));
                li.prepend($(this.options.collapseBtnHTML));
            }
            li.children('[data-action="expand"]').hide();
        },

        unsetParent: function(li)
        {
            li.removeClass(this.options.collapsedClass);
            li.children('[data-action]').remove();
            li.children(this.options.listNodeName).remove();
        },

        dragStart: function(e)
        {
            var mouse    = this.mouse,
                target   = $(e.target),
                dragItem = target.closest(this.options.itemNodeName);

            this.placeEl.css('height', dragItem.height());

            mouse.offsetX = e.offsetX !== undefined ? e.offsetX : e.pageX - target.offset().left;
            mouse.offsetY = e.offsetY !== undefined ? e.offsetY : e.pageY - target.offset().top;
            mouse.startX = mouse.lastX = e.pageX;
            mouse.startY = mouse.lastY = e.pageY;

            this.dragRootEl = this.el;

            this.dragEl = $(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);
            this.dragEl.css('width', dragItem.width());

            dragItem.after(this.placeEl);
            dragItem[0].parentNode.removeChild(dragItem[0]);
            dragItem.appendTo(this.dragEl);

            $(document.body).append(this.dragEl);
            this.dragEl.css({
                'left' : e.pageX - mouse.offsetX,
                'top'  : e.pageY - mouse.offsetY
            });
            // total depth of dragging item
            var i, depth,
                items = this.dragEl.find(this.options.itemNodeName);
            for (i = 0; i < items.length; i++) {
                depth = $(items[i]).parents(this.options.listNodeName).length;
                if (depth > this.dragDepth) {
                    this.dragDepth = depth;
                }
            }
        },

        dragStop: function(e)
        {
            var el = this.dragEl.children(this.options.itemNodeName).first();
            el[0].parentNode.removeChild(el[0]);
            this.placeEl.replaceWith(el);

            this.dragEl.remove();
            this.el.trigger('change');
            if (this.hasNewRoot) {
                this.dragRootEl.trigger('change');
            }
            this.reset();
        },

        dragMove: function(e)
        {
            var list, parent, prev, next, depth,
                opt   = this.options,
                mouse = this.mouse;

            this.dragEl.css({
                'left' : e.pageX - mouse.offsetX,
                'top'  : e.pageY - mouse.offsetY
            });

            // mouse position last events
            mouse.lastX = mouse.nowX;
            mouse.lastY = mouse.nowY;
            // mouse position this events
            mouse.nowX  = e.pageX;
            mouse.nowY  = e.pageY;
            // distance mouse moved between events
            mouse.distX = mouse.nowX - mouse.lastX;
            mouse.distY = mouse.nowY - mouse.lastY;
            // direction mouse was moving
            mouse.lastDirX = mouse.dirX;
            mouse.lastDirY = mouse.dirY;
            // direction mouse is now moving (on both axis)
            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;
            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;
            // axis mouse is now moving on
            var newAx   = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;

            // do nothing on first move
            if (!mouse.moving) {
                mouse.dirAx  = newAx;
                mouse.moving = true;
                return;
            }

            // calc distance moved on this axis (and direction)
            if (mouse.dirAx !== newAx) {
                mouse.distAxX = 0;
                mouse.distAxY = 0;
            } else {
                mouse.distAxX += Math.abs(mouse.distX);
                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {
                    mouse.distAxX = 0;
                }
                mouse.distAxY += Math.abs(mouse.distY);
                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {
                    mouse.distAxY = 0;
                }
            }
            mouse.dirAx = newAx;

            /**
             * move horizontal
             */
            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {
                // reset move distance on x-axis for new phase
                mouse.distAxX = 0;
                prev = this.placeEl.prev(opt.itemNodeName);
                // increase horizontal level if previous sibling exists and is not collapsed
                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass)) {
                    // cannot increase level when item above is collapsed
                    list = prev.find(opt.listNodeName).last();
                    // check if depth limit has reached
                    depth = this.placeEl.parents(opt.listNodeName).length;
                    if (depth + this.dragDepth <= opt.maxDepth) {
                        // create new sub-level if one doesn't exist
                        if (!list.length) {
                            list = $('<' + opt.listNodeName + '/>').addClass(opt.listClass);
                            list.append(this.placeEl);
                            prev.append(list);
                            this.setParent(prev);
                        } else {
                            // else append to next level up
                            list = prev.children(opt.listNodeName).last();
                            list.append(this.placeEl);
                        }
                    }
                }
                // decrease horizontal level
                if (mouse.distX < 0) {
                    // we can't decrease a level if an item preceeds the current one
                    next = this.placeEl.next(opt.itemNodeName);
                    if (!next.length) {
                        parent = this.placeEl.parent();
                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);
                        if (!parent.children().length) {
                            this.unsetParent(parent.parent());
                        }
                    }
                }
            }

            var isEmpty = false;

            // find list item under cursor
            if (!hasPointerEvents) {
                this.dragEl[0].style.visibility = 'hidden';
            }
            this.pointEl = $(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));
            if (!hasPointerEvents) {
                this.dragEl[0].style.visibility = 'visible';
            }
            if (this.pointEl.hasClass(opt.handleClass)) {
                this.pointEl = this.pointEl.parent(opt.itemNodeName);
            }
            if (this.pointEl.hasClass(opt.emptyClass)) {
                isEmpty = true;
            }
            else if (!this.pointEl.length || !this.pointEl.hasClass(opt.itemClass)) {
                return;
            }

            // find parent list of item under cursor
            var pointElRoot = this.pointEl.closest('.' + opt.rootClass),
                isNewRoot   = this.dragRootEl.data('nestable-id') !== pointElRoot.data('nestable-id');

            /**
             * move vertical
             */
            if (!mouse.dirAx || isNewRoot || isEmpty) {
                // check if groups match if dragging over new root
                if (isNewRoot && opt.group !== pointElRoot.data('nestable-group')) {
                    return;
                }
                // check depth limit
                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;
                if (depth > opt.maxDepth) {
                    return;
                }
                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);
                    parent = this.placeEl.parent();
                // if empty create new list to replace empty placeholder
                if (isEmpty) {
                    list = $(document.createElement(opt.listNodeName)).addClass(opt.listClass);
                    list.append(this.placeEl);
                    this.pointEl.replaceWith(list);
                }
                else if (before) {
                    this.pointEl.before(this.placeEl);
                }
                else {
                    this.pointEl.after(this.placeEl);
                }
                if (!parent.children().length) {
                    this.unsetParent(parent.parent());
                }
                if (!this.dragRootEl.find(opt.itemNodeName).length) {
                    this.dragRootEl.append('<div class="' + opt.emptyClass + '"/>');
                }
                // parent root list has changed
                if (isNewRoot) {
                    this.dragRootEl = pointElRoot;
                    this.hasNewRoot = this.el[0] !== this.dragRootEl[0];
                }
            }
        }

    };

    $.fn.nestable = function(params)
    {
        var lists  = this,
            retval = this;

        lists.each(function()
        {
            var plugin = $(this).data("nestable");

            if (!plugin) {
                $(this).data("nestable", new Plugin(this, params));
                $(this).data("nestable-id", new Date().getTime());
            } else {
                if (typeof params === 'string' && typeof plugin[params] === 'function') {
                    retval = plugin[params]();
                }
            }
        });

        return retval || lists;
    };

})(window.jQuery || window.Zepto, window, document);
(function (factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define(['jquery'], factory);
  } else if (typeof module === "object" && module.exports) {
    var $ = require('jquery');
    module.exports = factory($);
  } else {
    // Browser globals
    factory(jQuery);
  }
}(function (jQuery) {

/*!
 * jQuery.textcomplete
 *
 * Repository: https://github.com/yuku-t/jquery-textcomplete
 * License:    MIT (https://github.com/yuku-t/jquery-textcomplete/blob/master/LICENSE)
 * Author:     Yuku Takahashi
 */

if (typeof jQuery === 'undefined') {
  throw new Error('jQuery.textcomplete requires jQuery');
}

+function ($) {
  'use strict';

  var warn = function (message) {
    if (console.warn) { console.warn(message); }
  };

  var id = 1;

  $.fn.textcomplete = function (strategies, option) {
    var args = Array.prototype.slice.call(arguments);
    return this.each(function () {
      var self = this;
      var $this = $(this);
      var completer = $this.data('textComplete');
      if (!completer) {
        option || (option = {});
        option._oid = id++;  // unique object id
        completer = new $.fn.textcomplete.Completer(this, option);
        $this.data('textComplete', completer);
      }
      if (typeof strategies === 'string') {
        if (!completer) return;
        args.shift()
        completer[strategies].apply(completer, args);
        if (strategies === 'destroy') {
          $this.removeData('textComplete');
        }
      } else {
        // For backward compatibility.
        // TODO: Remove at v0.4
        $.each(strategies, function (obj) {
          $.each(['header', 'footer', 'placement', 'maxCount'], function (name) {
            if (obj[name]) {
              completer.option[name] = obj[name];
              warn(name + 'as a strategy param is deprecated. Use option.');
              delete obj[name];
            }
          });
        });
        completer.register($.fn.textcomplete.Strategy.parse(strategies, {
          el: self,
          $el: $this
        }));
      }
    });
  };

}(jQuery);

+function ($) {
  'use strict';

  // Exclusive execution control utility.
  //
  // func - The function to be locked. It is executed with a function named
  //        `free` as the first argument. Once it is called, additional
  //        execution are ignored until the free is invoked. Then the last
  //        ignored execution will be replayed immediately.
  //
  // Examples
  //
  //   var lockedFunc = lock(function (free) {
  //     setTimeout(function { free(); }, 1000); // It will be free in 1 sec.
  //     console.log('Hello, world');
  //   });
  //   lockedFunc();  // => 'Hello, world'
  //   lockedFunc();  // none
  //   lockedFunc();  // none
  //   // 1 sec past then
  //   // => 'Hello, world'
  //   lockedFunc();  // => 'Hello, world'
  //   lockedFunc();  // none
  //
  // Returns a wrapped function.
  var lock = function (func) {
    var locked, queuedArgsToReplay;

    return function () {
      // Convert arguments into a real array.
      var args = Array.prototype.slice.call(arguments);
      if (locked) {
        // Keep a copy of this argument list to replay later.
        // OK to overwrite a previous value because we only replay
        // the last one.
        queuedArgsToReplay = args;
        return;
      }
      locked = true;
      var self = this;
      args.unshift(function replayOrFree() {
        if (queuedArgsToReplay) {
          // Other request(s) arrived while we were locked.
          // Now that the lock is becoming available, replay
          // the latest such request, then call back here to
          // unlock (or replay another request that arrived
          // while this one was in flight).
          var replayArgs = queuedArgsToReplay;
          queuedArgsToReplay = undefined;
          replayArgs.unshift(replayOrFree);
          func.apply(self, replayArgs);
        } else {
          locked = false;
        }
      });
      func.apply(this, args);
    };
  };

  var isString = function (obj) {
    return Object.prototype.toString.call(obj) === '[object String]';
  };

  var uniqueId = 0;

  function Completer(element, option) {
    this.$el        = $(element);
    this.id         = 'textcomplete' + uniqueId++;
    this.strategies = [];
    this.views      = [];
    this.option     = $.extend({}, Completer.defaults, option);

    if (!this.$el.is('input[type=text]') && !this.$el.is('input[type=search]') && !this.$el.is('textarea') && !element.isContentEditable && element.contentEditable != 'true') {
      throw new Error('textcomplete must be called on a Textarea or a ContentEditable.');
    }

    // use ownerDocument to fix iframe / IE issues
    if (element === element.ownerDocument.activeElement) {
      // element has already been focused. Initialize view objects immediately.
      this.initialize()
    } else {
      // Initialize view objects lazily.
      var self = this;
      this.$el.one('focus.' + this.id, function () { self.initialize(); });

      // Special handling for CKEditor: lazy init on instance load
      if ((!this.option.adapter || this.option.adapter == 'CKEditor') && typeof CKEDITOR != 'undefined' && (this.$el.is('textarea'))) {
        CKEDITOR.on("instanceReady", function(event) {
          event.editor.once("focus", function(event2) {
            // replace the element with the Iframe element and flag it as CKEditor
            self.$el = $(event.editor.editable().$);
            if (!self.option.adapter) {
              self.option.adapter = $.fn.textcomplete['CKEditor'];
              self.option.ckeditor_instance = event.editor;
            }
            self.initialize();
          });
        });
      }
    }
  }

  Completer.defaults = {
    appendTo: 'body',
    className: '',  // deprecated option
    dropdownClassName: 'dropdown-menu textcomplete-dropdown',
    maxCount: 10,
    zIndex: '100',
    rightEdgeOffset: 30
  };

  $.extend(Completer.prototype, {
    // Public properties
    // -----------------

    id:         null,
    option:     null,
    strategies: null,
    adapter:    null,
    dropdown:   null,
    $el:        null,
    $iframe:    null,

    // Public methods
    // --------------

    initialize: function () {
      var element = this.$el.get(0);
      
      // check if we are in an iframe
      // we need to alter positioning logic if using an iframe
      if (this.$el.prop('ownerDocument') !== document && window.frames.length) {
        for (var iframeIndex = 0; iframeIndex < window.frames.length; iframeIndex++) {
          if (this.$el.prop('ownerDocument') === window.frames[iframeIndex].document) {
            this.$iframe = $(window.frames[iframeIndex].frameElement);
            break;
          }
        }
      }
      
      
      // Initialize view objects.
      this.dropdown = new $.fn.textcomplete.Dropdown(element, this, this.option);
      var Adapter, viewName;
      if (this.option.adapter) {
        Adapter = this.option.adapter;
      } else {
        if (this.$el.is('textarea') || this.$el.is('input[type=text]') || this.$el.is('input[type=search]')) {
          viewName = typeof element.selectionEnd === 'number' ? 'Textarea' : 'IETextarea';
        } else {
          viewName = 'ContentEditable';
        }
        Adapter = $.fn.textcomplete[viewName];
      }
      this.adapter = new Adapter(element, this, this.option);
    },

    destroy: function () {
      this.$el.off('.' + this.id);
      if (this.adapter) {
        this.adapter.destroy();
      }
      if (this.dropdown) {
        this.dropdown.destroy();
      }
      this.$el = this.adapter = this.dropdown = null;
    },

    deactivate: function () {
      if (this.dropdown) {
        this.dropdown.deactivate();
      }
    },

    // Invoke textcomplete.
    trigger: function (text, skipUnchangedTerm) {
      if (!this.dropdown) { this.initialize(); }
      text != null || (text = this.adapter.getTextFromHeadToCaret());
      var searchQuery = this._extractSearchQuery(text);
      if (searchQuery.length) {
        var term = searchQuery[1];
        // Ignore shift-key, ctrl-key and so on.
        if (skipUnchangedTerm && this._term === term && term !== "") { return; }
        this._term = term;
        this._search.apply(this, searchQuery);
      } else {
        this._term = null;
        this.dropdown.deactivate();
      }
    },

    fire: function (eventName) {
      var args = Array.prototype.slice.call(arguments, 1);
      this.$el.trigger(eventName, args);
      return this;
    },

    register: function (strategies) {
      Array.prototype.push.apply(this.strategies, strategies);
    },

    // Insert the value into adapter view. It is called when the dropdown is clicked
    // or selected.
    //
    // value    - The selected element of the array callbacked from search func.
    // strategy - The Strategy object.
    // e        - Click or keydown event object.
    select: function (value, strategy, e) {
      this._term = null;
      this.adapter.select(value, strategy, e);
      this.fire('change').fire('textComplete:select', value, strategy);
      this.adapter.focus();
    },

    // Private properties
    // ------------------

    _clearAtNext: true,
    _term:        null,

    // Private methods
    // ---------------

    // Parse the given text and extract the first matching strategy.
    //
    // Returns an array including the strategy, the query term and the match
    // object if the text matches an strategy; otherwise returns an empty array.
    _extractSearchQuery: function (text) {
      for (var i = 0; i < this.strategies.length; i++) {
        var strategy = this.strategies[i];
        var context = strategy.context(text);
        if (context || context === '') {
          var matchRegexp = $.isFunction(strategy.match) ? strategy.match(text) : strategy.match;
          if (isString(context)) { text = context; }
          var match = text.match(matchRegexp);
          if (match) { return [strategy, match[strategy.index], match]; }
        }
      }
      return []
    },

    // Call the search method of selected strategy..
    _search: lock(function (free, strategy, term, match) {
      var self = this;
      strategy.search(term, function (data, stillSearching) {
        if (!self.dropdown.shown) {
          self.dropdown.activate();
        }
        if (self._clearAtNext) {
          // The first callback in the current lock.
          self.dropdown.clear();
          self._clearAtNext = false;
        }
        self.dropdown.setPosition(self.adapter.getCaretPosition());
        self.dropdown.render(self._zip(data, strategy, term));
        if (!stillSearching) {
          // The last callback in the current lock.
          free();
          self._clearAtNext = true; // Call dropdown.clear at the next time.
        }
      }, match);
    }),

    // Build a parameter for Dropdown#render.
    //
    // Examples
    //
    //  this._zip(['a', 'b'], 's');
    //  //=> [{ value: 'a', strategy: 's' }, { value: 'b', strategy: 's' }]
    _zip: function (data, strategy, term) {
      return $.map(data, function (value) {
        return { value: value, strategy: strategy, term: term };
      });
    }
  });

  $.fn.textcomplete.Completer = Completer;
}(jQuery);

+function ($) {
  'use strict';

  var $window = $(window);

  var include = function (zippedData, datum) {
    var i, elem;
    var idProperty = datum.strategy.idProperty
    for (i = 0; i < zippedData.length; i++) {
      elem = zippedData[i];
      if (elem.strategy !== datum.strategy) continue;
      if (idProperty) {
        if (elem.value[idProperty] === datum.value[idProperty]) return true;
      } else {
        if (elem.value === datum.value) return true;
      }
    }
    return false;
  };

  var dropdownViews = {};
  $(document).on('click', function (e) {
    var id = e.originalEvent && e.originalEvent.keepTextCompleteDropdown;
    $.each(dropdownViews, function (key, view) {
      if (key !== id) { view.deactivate(); }
    });
  });

  var commands = {
    SKIP_DEFAULT: 0,
    KEY_UP: 1,
    KEY_DOWN: 2,
    KEY_ENTER: 3,
    KEY_PAGEUP: 4,
    KEY_PAGEDOWN: 5,
    KEY_ESCAPE: 6
  };

  // Dropdown view
  // =============

  // Construct Dropdown object.
  //
  // element - Textarea or contenteditable element.
  function Dropdown(element, completer, option) {
    this.$el       = Dropdown.createElement(option);
    this.completer = completer;
    this.id        = completer.id + 'dropdown';
    this._data     = []; // zipped data.
    this.$inputEl  = $(element);
    this.option    = option;

    // Override setPosition method.
    if (option.listPosition) { this.setPosition = option.listPosition; }
    if (option.height) { this.$el.height(option.height); }
    var self = this;
    $.each(['maxCount', 'placement', 'footer', 'header', 'noResultsMessage', 'className'], function (_i, name) {
      if (option[name] != null) { self[name] = option[name]; }
    });
    this._bindEvents(element);
    dropdownViews[this.id] = this;
  }

  $.extend(Dropdown, {
    // Class methods
    // -------------

    createElement: function (option) {
      var $parent = option.appendTo;
      if (!($parent instanceof $)) { $parent = $($parent); }
      var $el = $('<ul></ul>')
        .addClass(option.dropdownClassName)
        .attr('id', 'textcomplete-dropdown-' + option._oid)
        .css({
          display: 'none',
          left: 0,
          position: 'absolute',
          zIndex: option.zIndex
        })
        .appendTo($parent);
      return $el;
    }
  });

  $.extend(Dropdown.prototype, {
    // Public properties
    // -----------------

    $el:       null,  // jQuery object of ul.dropdown-menu element.
    $inputEl:  null,  // jQuery object of target textarea.
    completer: null,
    footer:    null,
    header:    null,
    id:        null,
    maxCount:  null,
    placement: '',
    shown:     false,
    data:      [],     // Shown zipped data.
    className: '',

    // Public methods
    // --------------

    destroy: function () {
      // Don't remove $el because it may be shared by several textcompletes.
      this.deactivate();

      this.$el.off('.' + this.id);
      this.$inputEl.off('.' + this.id);
      this.clear();
      this.$el.remove();
      this.$el = this.$inputEl = this.completer = null;
      delete dropdownViews[this.id]
    },

    render: function (zippedData) {
      var contentsHtml = this._buildContents(zippedData);
      var unzippedData = $.map(zippedData, function (d) { return d.value; });
      if (zippedData.length) {
        var strategy = zippedData[0].strategy;
        if (strategy.id) {
          this.$el.attr('data-strategy', strategy.id);
        } else {
          this.$el.removeAttr('data-strategy');
        }
        this._renderHeader(unzippedData);
        this._renderFooter(unzippedData);
        if (contentsHtml) {
          this._renderContents(contentsHtml);
          this._fitToBottom();
          this._fitToRight();
          this._activateIndexedItem();
        }
        this._setScroll();
      } else if (this.noResultsMessage) {
        this._renderNoResultsMessage(unzippedData);
      } else if (this.shown) {
        this.deactivate();
      }
    },

    setPosition: function (pos) {
      // Make the dropdown fixed if the input is also fixed
      // This can't be done during init, as textcomplete may be used on multiple elements on the same page
      // Because the same dropdown is reused behind the scenes, we need to recheck every time the dropdown is showed
      var position = 'absolute';
      // Check if input or one of its parents has positioning we need to care about
      this.$inputEl.add(this.$inputEl.parents()).each(function() {
        if($(this).css('position') === 'absolute') // The element has absolute positioning, so it's all OK
          return false;
        if($(this).css('position') === 'fixed') {
          pos.top -= $window.scrollTop();
          pos.left -= $window.scrollLeft();
          position = 'fixed';
          return false;
        }
      });
      this.$el.css(this._applyPlacement(pos));
      this.$el.css({ position: position }); // Update positioning

      return this;
    },

    clear: function () {
      this.$el.html('');
      this.data = [];
      this._index = 0;
      this._$header = this._$footer = this._$noResultsMessage = null;
    },

    activate: function () {
      if (!this.shown) {
        this.clear();
        this.$el.show();
        if (this.className) { this.$el.addClass(this.className); }
        this.completer.fire('textComplete:show');
        this.shown = true;
      }
      return this;
    },

    deactivate: function () {
      if (this.shown) {
        this.$el.hide();
        if (this.className) { this.$el.removeClass(this.className); }
        this.completer.fire('textComplete:hide');
        this.shown = false;
      }
      return this;
    },

    isUp: function (e) {
      return e.keyCode === 38 || (e.ctrlKey && e.keyCode === 80);  // UP, Ctrl-P
    },

    isDown: function (e) {
      return e.keyCode === 40 || (e.ctrlKey && e.keyCode === 78);  // DOWN, Ctrl-N
    },

    isEnter: function (e) {
      var modifiers = e.ctrlKey || e.altKey || e.metaKey || e.shiftKey;
      return !modifiers && (e.keyCode === 13 || e.keyCode === 9 || (this.option.completeOnSpace === true && e.keyCode === 32))  // ENTER, TAB
    },

    isPageup: function (e) {
      return e.keyCode === 33;  // PAGEUP
    },

    isPagedown: function (e) {
      return e.keyCode === 34;  // PAGEDOWN
    },

    isEscape: function (e) {
      return e.keyCode === 27;  // ESCAPE
    },

    // Private properties
    // ------------------

    _data:    null,  // Currently shown zipped data.
    _index:   null,
    _$header: null,
    _$noResultsMessage: null,
    _$footer: null,

    // Private methods
    // ---------------

    _bindEvents: function () {
      this.$el.on('mousedown.' + this.id, '.textcomplete-item', $.proxy(this._onClick, this));
      this.$el.on('touchstart.' + this.id, '.textcomplete-item', $.proxy(this._onClick, this));
      this.$el.on('mouseover.' + this.id, '.textcomplete-item', $.proxy(this._onMouseover, this));
      this.$inputEl.on('keydown.' + this.id, $.proxy(this._onKeydown, this));
    },

    _onClick: function (e) {
      var $el = $(e.target);
      e.preventDefault();
      e.originalEvent.keepTextCompleteDropdown = this.id;
      if (!$el.hasClass('textcomplete-item')) {
        $el = $el.closest('.textcomplete-item');
      }
      var datum = this.data[parseInt($el.data('index'), 10)];
      this.completer.select(datum.value, datum.strategy, e);
      var self = this;
      // Deactive at next tick to allow other event handlers to know whether
      // the dropdown has been shown or not.
      setTimeout(function () {
        self.deactivate();
        if (e.type === 'touchstart') {
          self.$inputEl.focus();
        }
      }, 0);
    },

    // Activate hovered item.
    _onMouseover: function (e) {
      var $el = $(e.target);
      e.preventDefault();
      if (!$el.hasClass('textcomplete-item')) {
        $el = $el.closest('.textcomplete-item');
      }
      this._index = parseInt($el.data('index'), 10);
      this._activateIndexedItem();
    },

    _onKeydown: function (e) {
      if (!this.shown) { return; }

      var command;

      if ($.isFunction(this.option.onKeydown)) {
        command = this.option.onKeydown(e, commands);
      }

      if (command == null) {
        command = this._defaultKeydown(e);
      }

      switch (command) {
        case commands.KEY_UP:
          e.preventDefault();
          this._up();
          break;
        case commands.KEY_DOWN:
          e.preventDefault();
          this._down();
          break;
        case commands.KEY_ENTER:
          e.preventDefault();
          this._enter(e);
          break;
        case commands.KEY_PAGEUP:
          e.preventDefault();
          this._pageup();
          break;
        case commands.KEY_PAGEDOWN:
          e.preventDefault();
          this._pagedown();
          break;
        case commands.KEY_ESCAPE:
          e.preventDefault();
          this.deactivate();
          break;
      }
    },

    _defaultKeydown: function (e) {
      if (this.isUp(e)) {
        return commands.KEY_UP;
      } else if (this.isDown(e)) {
        return commands.KEY_DOWN;
      } else if (this.isEnter(e)) {
        return commands.KEY_ENTER;
      } else if (this.isPageup(e)) {
        return commands.KEY_PAGEUP;
      } else if (this.isPagedown(e)) {
        return commands.KEY_PAGEDOWN;
      } else if (this.isEscape(e)) {
        return commands.KEY_ESCAPE;
      }
    },

    _up: function () {
      if (this._index === 0) {
        this._index = this.data.length - 1;
      } else {
        this._index -= 1;
      }
      this._activateIndexedItem();
      this._setScroll();
    },

    _down: function () {
      if (this._index === this.data.length - 1) {
        this._index = 0;
      } else {
        this._index += 1;
      }
      this._activateIndexedItem();
      this._setScroll();
    },

    _enter: function (e) {
      var datum = this.data[parseInt(this._getActiveElement().data('index'), 10)];
      this.completer.select(datum.value, datum.strategy, e);
      this.deactivate();
    },

    _pageup: function () {
      var target = 0;
      var threshold = this._getActiveElement().position().top - this.$el.innerHeight();
      this.$el.children().each(function (i) {
        if ($(this).position().top + $(this).outerHeight() > threshold) {
          target = i;
          return false;
        }
      });
      this._index = target;
      this._activateIndexedItem();
      this._setScroll();
    },

    _pagedown: function () {
      var target = this.data.length - 1;
      var threshold = this._getActiveElement().position().top + this.$el.innerHeight();
      this.$el.children().each(function (i) {
        if ($(this).position().top > threshold) {
          target = i;
          return false
        }
      });
      this._index = target;
      this._activateIndexedItem();
      this._setScroll();
    },

    _activateIndexedItem: function () {
      this.$el.find('.textcomplete-item.active').removeClass('active');
      this._getActiveElement().addClass('active');
    },

    _getActiveElement: function () {
      return this.$el.children('.textcomplete-item:nth(' + this._index + ')');
    },

    _setScroll: function () {
      var $activeEl = this._getActiveElement();
      var itemTop = $activeEl.position().top;
      var itemHeight = $activeEl.outerHeight();
      var visibleHeight = this.$el.innerHeight();
      var visibleTop = this.$el.scrollTop();
      if (this._index === 0 || this._index == this.data.length - 1 || itemTop < 0) {
        this.$el.scrollTop(itemTop + visibleTop);
      } else if (itemTop + itemHeight > visibleHeight) {
        this.$el.scrollTop(itemTop + itemHeight + visibleTop - visibleHeight);
      }
    },

    _buildContents: function (zippedData) {
      var datum, i, index;
      var html = '';
      for (i = 0; i < zippedData.length; i++) {
        if (this.data.length === this.maxCount) break;
        datum = zippedData[i];
        if (include(this.data, datum)) { continue; }
        index = this.data.length;
        this.data.push(datum);
        html += '<li class="textcomplete-item" data-index="' + index + '"><a>';
        html +=   datum.strategy.template(datum.value, datum.term);
        html += '</a></li>';
      }
      return html;
    },

    _renderHeader: function (unzippedData) {
      if (this.header) {
        if (!this._$header) {
          this._$header = $('<li class="textcomplete-header"></li>').prependTo(this.$el);
        }
        var html = $.isFunction(this.header) ? this.header(unzippedData) : this.header;
        this._$header.html(html);
      }
    },

    _renderFooter: function (unzippedData) {
      if (this.footer) {
        if (!this._$footer) {
          this._$footer = $('<li class="textcomplete-footer"></li>').appendTo(this.$el);
        }
        var html = $.isFunction(this.footer) ? this.footer(unzippedData) : this.footer;
        this._$footer.html(html);
      }
    },

    _renderNoResultsMessage: function (unzippedData) {
      if (this.noResultsMessage) {
        if (!this._$noResultsMessage) {
          this._$noResultsMessage = $('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el);
        }
        var html = $.isFunction(this.noResultsMessage) ? this.noResultsMessage(unzippedData) : this.noResultsMessage;
        this._$noResultsMessage.html(html);
      }
    },

    _renderContents: function (html) {
      if (this._$footer) {
        this._$footer.before(html);
      } else {
        this.$el.append(html);
      }
    },

    _fitToBottom: function() {
      var windowScrollBottom = $window.scrollTop() + $window.height();
      var height = this.$el.height();
      if ((this.$el.position().top + height) > windowScrollBottom) {
        // only do this if we are not in an iframe
        if (!this.completer.$iframe) {
          this.$el.offset({top: windowScrollBottom - height});
        }
      }
    },

    _fitToRight: function() {
      // We don't know how wide our content is until the browser positions us, and at that point it clips us
      // to the document width so we don't know if we would have overrun it. As a heuristic to avoid that clipping
      // (which makes our elements wrap onto the next line and corrupt the next item), if we're close to the right
      // edge, move left. We don't know how far to move left, so just keep nudging a bit.
      var tolerance = this.option.rightEdgeOffset; // pixels. Make wider than vertical scrollbar because we might not be able to use that space.
      var lastOffset = this.$el.offset().left, offset;
      var width = this.$el.width();
      var maxLeft = $window.width() - tolerance;
      while (lastOffset + width > maxLeft) {
        this.$el.offset({left: lastOffset - tolerance});
        offset = this.$el.offset().left;
        if (offset >= lastOffset) { break; }
        lastOffset = offset;
      }
    },

    _applyPlacement: function (position) {
      // If the 'placement' option set to 'top', move the position above the element.
      if (this.placement.indexOf('top') !== -1) {
        // Overwrite the position object to set the 'bottom' property instead of the top.
        position = {
          top: 'auto',
          bottom: this.$el.parent().height() - position.top + position.lineHeight,
          left: position.left
        };
      } else {
        position.bottom = 'auto';
        delete position.lineHeight;
      }
      if (this.placement.indexOf('absleft') !== -1) {
        position.left = 0;
      } else if (this.placement.indexOf('absright') !== -1) {
        position.right = 0;
        position.left = 'auto';
      }
      return position;
    }
  });

  $.fn.textcomplete.Dropdown = Dropdown;
  $.extend($.fn.textcomplete, commands);
}(jQuery);

+function ($) {
  'use strict';

  // Memoize a search function.
  var memoize = function (func) {
    var memo = {};
    return function (term, callback) {
      if (memo[term]) {
        callback(memo[term]);
      } else {
        func.call(this, term, function (data) {
          memo[term] = (memo[term] || []).concat(data);
          callback.apply(null, arguments);
        });
      }
    };
  };

  function Strategy(options) {
    $.extend(this, options);
    if (this.cache) { this.search = memoize(this.search); }
  }

  Strategy.parse = function (strategiesArray, params) {
    return $.map(strategiesArray, function (strategy) {
      var strategyObj = new Strategy(strategy);
      strategyObj.el = params.el;
      strategyObj.$el = params.$el;
      return strategyObj;
    });
  };

  $.extend(Strategy.prototype, {
    // Public properties
    // -----------------

    // Required
    match:      null,
    replace:    null,
    search:     null,

    // Optional
    id:         null,
    cache:      false,
    context:    function () { return true; },
    index:      2,
    template:   function (obj) { return obj; },
    idProperty: null
  });

  $.fn.textcomplete.Strategy = Strategy;

}(jQuery);

+function ($) {
  'use strict';

  var now = Date.now || function () { return new Date().getTime(); };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // `wait` msec.
  //
  // This utility function was originally implemented at Underscore.js.
  var debounce = function (func, wait) {
    var timeout, args, context, timestamp, result;
    var later = function () {
      var last = now() - timestamp;
      if (last < wait) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        result = func.apply(context, args);
        context = args = null;
      }
    };

    return function () {
      context = this;
      args = arguments;
      timestamp = now();
      if (!timeout) {
        timeout = setTimeout(later, wait);
      }
      return result;
    };
  };

  function Adapter () {}

  $.extend(Adapter.prototype, {
    // Public properties
    // -----------------

    id:        null, // Identity.
    completer: null, // Completer object which creates it.
    el:        null, // Textarea element.
    $el:       null, // jQuery object of the textarea.
    option:    null,

    // Public methods
    // --------------

    initialize: function (element, completer, option) {
      this.el        = element;
      this.$el       = $(element);
      this.id        = completer.id + this.constructor.name;
      this.completer = completer;
      this.option    = option;

      if (this.option.debounce) {
        this._onKeyup = debounce(this._onKeyup, this.option.debounce);
      }

      this._bindEvents();
    },

    destroy: function () {
      this.$el.off('.' + this.id); // Remove all event handlers.
      this.$el = this.el = this.completer = null;
    },

    // Update the element with the given value and strategy.
    //
    // value    - The selected object. It is one of the item of the array
    //            which was callbacked from the search function.
    // strategy - The Strategy associated with the selected value.
    select: function (/* value, strategy */) {
      throw new Error('Not implemented');
    },

    // Returns the caret's relative coordinates from body's left top corner.
    getCaretPosition: function () {
      var position = this._getCaretRelativePosition();
      var offset = this.$el.offset();

      // Calculate the left top corner of `this.option.appendTo` element.
      var $parent = this.option.appendTo;
      if ($parent) {
         if (!($parent instanceof $)) { $parent = $($parent); }
         var parentOffset = $parent.offsetParent().offset();
         offset.top -= parentOffset.top;
         offset.left -= parentOffset.left;
      }

      position.top += offset.top;
      position.left += offset.left;
      return position;
    },

    // Focus on the element.
    focus: function () {
      this.$el.focus();
    },

    // Private methods
    // ---------------

    _bindEvents: function () {
      this.$el.on('keyup.' + this.id, $.proxy(this._onKeyup, this));
    },

    _onKeyup: function (e) {
      if (this._skipSearch(e)) { return; }
      this.completer.trigger(this.getTextFromHeadToCaret(), true);
    },

    // Suppress searching if it returns true.
    _skipSearch: function (clickEvent) {
      switch (clickEvent.keyCode) {
        case 9:  // TAB
        case 13: // ENTER
        case 16: // SHIFT
        case 17: // CTRL
        case 18: // ALT
        case 33: // PAGEUP
        case 34: // PAGEDOWN
        case 40: // DOWN
        case 38: // UP
        case 27: // ESC
          return true;
      }
      if (clickEvent.ctrlKey) switch (clickEvent.keyCode) {
        case 78: // Ctrl-N
        case 80: // Ctrl-P
          return true;
      }
    }
  });

  $.fn.textcomplete.Adapter = Adapter;
}(jQuery);

+function ($) {
  'use strict';

  // Textarea adapter
  // ================
  //
  // Managing a textarea. It doesn't know a Dropdown.
  function Textarea(element, completer, option) {
    this.initialize(element, completer, option);
  }

  $.extend(Textarea.prototype, $.fn.textcomplete.Adapter.prototype, {
    // Public methods
    // --------------

    // Update the textarea with the given value and strategy.
    select: function (value, strategy, e) {
      var pre = this.getTextFromHeadToCaret();
      var post = this.el.value.substring(this.el.selectionEnd);
      var newSubstr = strategy.replace(value, e);
      var regExp;
      if (typeof newSubstr !== 'undefined') {
        if ($.isArray(newSubstr)) {
          post = newSubstr[1] + post;
          newSubstr = newSubstr[0];
        }
        regExp = $.isFunction(strategy.match) ? strategy.match(pre) : strategy.match;
        pre = pre.replace(regExp, newSubstr);
        this.$el.val(pre + post);
        this.el.selectionStart = this.el.selectionEnd = pre.length;
      }
    },

    getTextFromHeadToCaret: function () {
      return this.el.value.substring(0, this.el.selectionEnd);
    },

    // Private methods
    // ---------------

    _getCaretRelativePosition: function () {
      var p = $.fn.textcomplete.getCaretCoordinates(this.el, this.el.selectionStart);
      return {
        top: p.top + this._calculateLineHeight() - this.$el.scrollTop(),
        left: p.left - this.$el.scrollLeft(),
        lineHeight: this._calculateLineHeight()
      };
    },

    _calculateLineHeight: function () {
      var lineHeight = parseInt(this.$el.css('line-height'), 10);
      if (isNaN(lineHeight)) {
        // http://stackoverflow.com/a/4515470/1297336
        var parentNode = this.el.parentNode;
        var temp = document.createElement(this.el.nodeName);
        var style = this.el.style;
        temp.setAttribute(
          'style',
          'margin:0px;padding:0px;font-family:' + style.fontFamily + ';font-size:' + style.fontSize
        );
        temp.innerHTML = 'test';
        parentNode.appendChild(temp);
        lineHeight = temp.clientHeight;
        parentNode.removeChild(temp);
      }
      return lineHeight;
    }
  });

  $.fn.textcomplete.Textarea = Textarea;
}(jQuery);

+function ($) {
  'use strict';

  var sentinelChar = '';

  function IETextarea(element, completer, option) {
    this.initialize(element, completer, option);
    $('<span>' + sentinelChar + '</span>').css({
      position: 'absolute',
      top: -9999,
      left: -9999
    }).insertBefore(element);
  }

  $.extend(IETextarea.prototype, $.fn.textcomplete.Textarea.prototype, {
    // Public methods
    // --------------

    select: function (value, strategy, e) {
      var pre = this.getTextFromHeadToCaret();
      var post = this.el.value.substring(pre.length);
      var newSubstr = strategy.replace(value, e);
      var regExp;
      if (typeof newSubstr !== 'undefined') {
        if ($.isArray(newSubstr)) {
          post = newSubstr[1] + post;
          newSubstr = newSubstr[0];
        }
        regExp = $.isFunction(strategy.match) ? strategy.match(pre) : strategy.match;
        pre = pre.replace(regExp, newSubstr);
        this.$el.val(pre + post);
        this.el.focus();
        var range = this.el.createTextRange();
        range.collapse(true);
        range.moveEnd('character', pre.length);
        range.moveStart('character', pre.length);
        range.select();
      }
    },

    getTextFromHeadToCaret: function () {
      this.el.focus();
      var range = document.selection.createRange();
      range.moveStart('character', -this.el.value.length);
      var arr = range.text.split(sentinelChar)
      return arr.length === 1 ? arr[0] : arr[1];
    }
  });

  $.fn.textcomplete.IETextarea = IETextarea;
}(jQuery);

// NOTE: TextComplete plugin has contenteditable support but it does not work
//       fine especially on old IEs.
//       Any pull requests are REALLY welcome.

+function ($) {
  'use strict';

  // ContentEditable adapter
  // =======================
  //
  // Adapter for contenteditable elements.
  function ContentEditable (element, completer, option) {
    this.initialize(element, completer, option);
  }

  $.extend(ContentEditable.prototype, $.fn.textcomplete.Adapter.prototype, {
    // Public methods
    // --------------

    // Update the content with the given value and strategy.
    // When an dropdown item is selected, it is executed.
    select: function (value, strategy, e) {
      var pre = this.getTextFromHeadToCaret();
      // use ownerDocument instead of window to support iframes
      var sel = this.el.ownerDocument.getSelection();
      
      var range = sel.getRangeAt(0);
      var selection = range.cloneRange();
      selection.selectNodeContents(range.startContainer);
      var content = selection.toString();
      var post = content.substring(range.startOffset);
      var newSubstr = strategy.replace(value, e);
      var regExp;
      if (typeof newSubstr !== 'undefined') {
        if ($.isArray(newSubstr)) {
          post = newSubstr[1] + post;
          newSubstr = newSubstr[0];
        }
        regExp = $.isFunction(strategy.match) ? strategy.match(pre) : strategy.match;
        pre = pre.replace(regExp, newSubstr)
            .replace(/ $/, "&nbsp"); // &nbsp necessary at least for CKeditor to not eat spaces
        range.selectNodeContents(range.startContainer);
        range.deleteContents();
        
        // create temporary elements
        var preWrapper = this.el.ownerDocument.createElement("div");
        preWrapper.innerHTML = pre;
        var postWrapper = this.el.ownerDocument.createElement("div");
        postWrapper.innerHTML = post;
        
        // create the fragment thats inserted
        var fragment = this.el.ownerDocument.createDocumentFragment();
        var childNode;
        var lastOfPre;
        while (childNode = preWrapper.firstChild) {
        	lastOfPre = fragment.appendChild(childNode);
        }
        while (childNode = postWrapper.firstChild) {
        	fragment.appendChild(childNode);
        }
        
        // insert the fragment & jump behind the last node in "pre"
        range.insertNode(fragment);
        range.setStartAfter(lastOfPre);
        
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
      }
    },

    // Private methods
    // ---------------

    // Returns the caret's relative position from the contenteditable's
    // left top corner.
    //
    // Examples
    //
    //   this._getCaretRelativePosition()
    //   //=> { top: 18, left: 200, lineHeight: 16 }
    //
    // Dropdown's position will be decided using the result.
    _getCaretRelativePosition: function () {
      var range = this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange();
      var node = this.el.ownerDocument.createElement('span');
      range.insertNode(node);
      range.selectNodeContents(node);
      range.deleteContents();
      var $node = $(node);
      var position = $node.offset();
      position.left -= this.$el.offset().left;
      position.top += $node.height() - this.$el.offset().top;
      position.lineHeight = $node.height();
      
      // special positioning logic for iframes
      // this is typically used for contenteditables such as tinymce or ckeditor
      if (this.completer.$iframe) {
        var iframePosition = this.completer.$iframe.offset();
        position.top += iframePosition.top;
        position.left += iframePosition.left;
        //subtract scrollTop from element in iframe
        position.top -= this.$el.scrollTop(); 
      }
      
      $node.remove();
      return position;
    },

    // Returns the string between the first character and the caret.
    // Completer will be triggered with the result for start autocompleting.
    //
    // Example
    //
    //   // Suppose the html is '<b>hello</b> wor|ld' and | is the caret.
    //   this.getTextFromHeadToCaret()
    //   // => ' wor'  // not '<b>hello</b> wor'
    getTextFromHeadToCaret: function () {
      var range = this.el.ownerDocument.getSelection().getRangeAt(0);
      var selection = range.cloneRange();
      selection.selectNodeContents(range.startContainer);
      return selection.toString().substring(0, range.startOffset);
    }
  });

  $.fn.textcomplete.ContentEditable = ContentEditable;
}(jQuery);

// NOTE: TextComplete plugin has contenteditable support but it does not work
//       fine especially on old IEs.
//       Any pull requests are REALLY welcome.

+function ($) {
  'use strict';

  // CKEditor adapter
  // =======================
  //
  // Adapter for CKEditor, based on contenteditable elements.
  function CKEditor (element, completer, option) {
    this.initialize(element, completer, option);
  }

  $.extend(CKEditor.prototype, $.fn.textcomplete.ContentEditable.prototype, {
    _bindEvents: function () {
      var $this = this;
      this.option.ckeditor_instance.on('key', function(event) {
        var domEvent = event.data;
        $this._onKeyup(domEvent);
        if ($this.completer.dropdown.shown && $this._skipSearch(domEvent)) {
          return false;
        }
      }, null, null, 1); // 1 = Priority = Important!
      // we actually also need the native event, as the CKEditor one is happening to late
      this.$el.on('keyup.' + this.id, $.proxy(this._onKeyup, this));
    },
});

  $.fn.textcomplete.CKEditor = CKEditor;
}(jQuery);

// The MIT License (MIT)
// 
// Copyright (c) 2015 Jonathan Ong me@jongleberry.com
// 
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
// associated documentation files (the "Software"), to deal in the Software without restriction,
// including without limitation the rights to use, copy, modify, merge, publish, distribute,
// sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// The above copyright notice and this permission notice shall be included in all copies or
// substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT
// NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// https://github.com/component/textarea-caret-position

(function ($) {

// The properties that we copy into a mirrored div.
// Note that some browsers, such as Firefox,
// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,
// so we have to do every single property specifically.
var properties = [
  'direction',  // RTL support
  'boxSizing',
  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does
  'height',
  'overflowX',
  'overflowY',  // copy the scrollbar for IE

  'borderTopWidth',
  'borderRightWidth',
  'borderBottomWidth',
  'borderLeftWidth',
  'borderStyle',

  'paddingTop',
  'paddingRight',
  'paddingBottom',
  'paddingLeft',

  // https://developer.mozilla.org/en-US/docs/Web/CSS/font
  'fontStyle',
  'fontVariant',
  'fontWeight',
  'fontStretch',
  'fontSize',
  'fontSizeAdjust',
  'lineHeight',
  'fontFamily',

  'textAlign',
  'textTransform',
  'textIndent',
  'textDecoration',  // might not make a difference, but better be safe

  'letterSpacing',
  'wordSpacing',

  'tabSize',
  'MozTabSize'

];

var isBrowser = (typeof window !== 'undefined');
var isFirefox = (isBrowser && window.mozInnerScreenX != null);

function getCaretCoordinates(element, position, options) {
  if(!isBrowser) {
    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');
  }

  var debug = options && options.debug || false;
  if (debug) {
    var el = document.querySelector('#input-textarea-caret-position-mirror-div');
    if ( el ) { el.parentNode.removeChild(el); }
  }

  // mirrored div
  var div = document.createElement('div');
  div.id = 'input-textarea-caret-position-mirror-div';
  document.body.appendChild(div);

  var style = div.style;
  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9

  // default textarea styles
  style.whiteSpace = 'pre-wrap';
  if (element.nodeName !== 'INPUT')
    style.wordWrap = 'break-word';  // only for textarea-s

  // position off-screen
  style.position = 'absolute';  // required to return coordinates properly
  if (!debug)
    style.visibility = 'hidden';  // not 'display: none' because we want rendering

  // transfer the element's properties to the div
  properties.forEach(function (prop) {
    style[prop] = computed[prop];
  });

  if (isFirefox) {
    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275
    if (element.scrollHeight > parseInt(computed.height))
      style.overflowY = 'scroll';
  } else {
    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'
  }

  div.textContent = element.value.substring(0, position);
  // the second special handling for input type="text" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037
  if (element.nodeName === 'INPUT')
    div.textContent = div.textContent.replace(/\s/g, '\u00a0');

  var span = document.createElement('span');
  // Wrapping must be replicated *exactly*, including when a long word gets
  // onto the next line, with whitespace at the end of the line before (#7).
  // The  *only* reliable way to do that is to copy the *entire* rest of the
  // textarea's content into the <span> created at the caret position.
  // for inputs, just '.' would be enough, but why bother?
  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all
  div.appendChild(span);

  var coordinates = {
    top: span.offsetTop + parseInt(computed['borderTopWidth']),
    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])
  };

  if (debug) {
    span.style.backgroundColor = '#aaa';
  } else {
    document.body.removeChild(div);
  }

  return coordinates;
}

$.fn.textcomplete.getCaretCoordinates = getCaretCoordinates;

}(jQuery));

return jQuery;
}));
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
(function(win){
	var domains = {};
	win.__ =function(str,domain,args){
		if(domains[domain] && domains[domain][str]){
			domains[domain][str].format(args||[]);
		}
		return str.format(args||[]);
	};

	win.__.load = function(domain,info){
		domains[domain] = info;
	};
	win.__.get = function(domain){
		return domains[domain];
	};

})(window);
 (function (root, factory) {
        if(!root){
            root = window;
        }
    if (typeof exports === "object") {
        module.exports = factory(root);
    } else if (typeof define === "function" && define.amd) {
        define([], factory);
    } else {
        root.LazyLoad = factory(root);
    }
}) (typeof global !== "undefined" ? global : this.window || this.global, function (root) {

    "use strict";

    if (typeof define === "function" && define.amd){
        root = window;
    } 

    const defaults = {
        src: "data-src",
        srcset: "data-srcset",
        selector: ".lazyload",
        root: null,
        rootMargin: "0px",
        threshold: 0
    };

    /**
    * Merge two or more objects. Returns a new object.
    * @private
    * @param {Boolean}  deep     If true, do a deep (or recursive) merge [optional]
    * @param {Object}   objects  The objects to merge together
    * @returns {Object}          Merged values of defaults and options
    */
    const extend = function ()  {

        let extended = {};
        let deep = false;
        let i = 0;
        let length = arguments.length;

        /* Check if a deep merge */
        if (Object.prototype.toString.call(arguments[0]) === "[object Boolean]") {
            deep = arguments[0];
            i++;
        }

        /* Merge the object into the extended object */
        let merge = function (obj) {
            for (let prop in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, prop)) {
                    /* If deep merge and property is an object, merge properties */
                    if (deep && Object.prototype.toString.call(obj[prop]) === "[object Object]") {
                        extended[prop] = extend(true, extended[prop], obj[prop]);
                    } else {
                        extended[prop] = obj[prop];
                    }
                }
            }
        };

        /* Loop through each object and conduct a merge */
        for (; i < length; i++) {
            let obj = arguments[i];
            merge(obj);
        }

        return extended;
    };

    function LazyLoad(images, options) {
        this.settings = extend(defaults, options || {});
        this.images = images || document.querySelectorAll(this.settings.selector);
        this.observer = null;
        this.init();
    }

    LazyLoad.prototype = {
        init: function() {
            var me = this;
            /* Without observers load everything and bail out early. */
            if (!root.IntersectionObserver) {
                this.loadImages();
                return;
            }

            let self = this;
            let observerConfig = {
                root: this.settings.root,
                rootMargin: this.settings.rootMargin,
                threshold: [this.settings.threshold]
            };

            this.observer = new IntersectionObserver(function(entries) {
                Array.prototype.forEach.call(entries, function (entry) {
                    if (entry.isIntersecting) {
                        self.observer.unobserve(entry.target);
                        let src = entry.target.getAttribute(self.settings.src);
                        let srcset = entry.target.getAttribute(self.settings.srcset);
                        if ("img" === entry.target.tagName.toLowerCase()) {
                            if (src) {
                                entry.target.src = src;
                            }
                            if (srcset) {
                                entry.target.srcset = srcset;
                            }
                            entry.target.onload = function(){
                                if(me.settings.onLoad)me.settings.onLoad.call(this);
                            }
                        } else if("iframe" === entry.target.tagName.toLowerCase()){
                            entry.target.src= src;
                            entry.target.onload = function(){
                                if(me.settings.onLoad)me.settings.onLoad.call(this);
                            }
                        }else {
                            entry.target.style.backgroundImage = "url(" + src + ")";
                            var a = entry.target;
                            setTimeout(function(){
                                 if(me.settings.onLoad)me.settings.onLoad.call(a);
                            },500);
                        }
                    }
                });
            }, observerConfig);

            Array.prototype.forEach.call(this.images, function (image) {
                self.observer.observe(image);
            });
        },

        loadAndDestroy: function () {
            if (!this.settings) { return; }
            this.loadImages();
            this.destroy();
        },

        loadImages: function () {
            if (!this.settings) { return; }

            let self = this;
            Array.prototype.forEach.call(this.images, function (image) {
                let src = image.getAttribute(self.settings.src);
                let srcset = image.getAttribute(self.settings.srcset);
                if ("img" === image.tagName.toLowerCase()) {
                    if (src) {
                        image.src = src;
                    }
                    if (srcset) {
                        image.srcset = srcset;
                    }
                    image.onload = function(){
                        if(me.settings.onLoad)me.settings.onLoad.call(this);
                    }
                }else if("iframe" === imaget.tagName.toLowerCase()){
                    image.src= src;
                    image.onload = function(){
                        if(me.settings.onLoad)me.settings.onLoad.call(this);
                    }
                } else {
                    image.style.backgroundImage = "url('" + src + "')";
                    var a = image;
                    setTimeout(function(){
                         if(me.settings.onLoad)me.settings.onLoad.call(a);
                    },500);
                }
            });
        },

        destroy: function () {
            if (!this.settings) { return; }
            this.observer.disconnect();
            this.settings = null;
        }
    };

    root.lazyload = function(images, options) {
        return new LazyLoad(images, options);
    };

    if (root.jQuery) {
        const $ = root.jQuery;
        $.fn.lazyload = function (options) {
            options = options || {};
            options.attribute = options.attribute || "data-src";
            new LazyLoad($.makeArray(this), options);
            return this;
        };
    }

    return LazyLoad;
});
  document.location.replaceUrlParam=function(e,t,n){return replaceUrlParam(n||this.href,e,t)};

Array.prototype.generateSlug=function(e){return void 0==e&&(e="-"),remove_ancents(this.join(",")).toLowerCase().replace(/\s+/g,e).replace(/[^a-z0-9\-]/g,"")};


(function ($) {
    $.fn.wysiwygEvt = function () {
        return this.each(function () {
            var $this = $(this);
            $this.attr('contenteditable','true');
            var htmlOld = $this.html();
            $this.bind('blur keyup paste copy cut mouseup', function () {
                var htmlNew = $this.html();
                if (htmlOld !== htmlNew) {
                    $this.trigger('change');
                    htmlOld = htmlNew;
                }
            })
        })
    };

    $(document).on('focus', '[contenteditable]', function() {
        const $this = $(this);
        $this.data('before', $this.html());
    }).on('blur keyup paste input', '[contenteditable]', function() {
        const $this = $(this);
        if ($this.data('before') !== $this.html()) {
            $this.data('before', $this.html());
            $this.trigger('change');
        }
    });

})(jQuery);
(function ($) {
  function startHandler (event) {
    var data = event.data;
    if (event.originalEvent.isPrimary === false) { return; }
    if (typeof event.button === 'number') {
      if (event.button !== 0) { return; }
    } else if (event.touches) {
      if (event.touches.length !== 1) { return; }
    }
    var $elem = $(this)
      .removeData('taphold_triggered');
    data._timer = setTimeout(function () {
      data._timer = null;
      $elem
        .data('taphold_triggered', true)
        .triggerHandler($.Event('taphold', {target: event.target}), data);
    }, data.delay);
  }

  function cancelHandler (event) {
    var data = event.data;
    if (data._timer) {
      clearTimeout(data._timer);
      data._timer = null;
    } else if (event.type === 'touchend' &&
        $(event.delegateTarget).data('taphold_triggered')) {
      // prevent simulated mouse events https://w3c.github.io/touch-events/#mouse-events
      return false;
    }
  }

  function namespaced (name) {
    return name.replace(/\w+/g, '$&.taphold');
  }
  var startevent, cancelevent, clickevent = namespaced('click');
  if (window.PointerEvent) {
    startevent = namespaced('pointerdown');
    cancelevent = namespaced('pointerup pointercancel pointerout');
  } else {
    startevent = namespaced('touchstart mousedown');
    cancelevent = namespaced('touchend touchmove touchcancel mouseup mouseout dragstart');
  }

  $.event.special.taphold = {
    defaults: {
      delay: 500
    },

    setup: function (data) {
      data = $.extend({}, $.event.special.taphold.defaults, data);
      $(this)
        .on(startevent, data, startHandler)
        .on(cancelevent, data, cancelHandler)
        .on(clickevent, $.noop); // to be able to prevent default action
                                 // otherwise $.event.special.click.handle will be skipped
    },

    teardown: function () {
      $(this)
        .off('.taphold')
        .removeData('taphold_triggered');
    }
  };

  $.event.special.click = {
    delegateType: 'click',
    bindType: 'click',
    handle: function (event) {
      var e = event.originalEvent;
      if(e){
         var path = e.path || e.composedPath && e.composedPath() || [event.delegateTarget];
          if (path.some(function (el) { return $(el).data('taphold_triggered'); })) {
            event.preventDefault();
            return false;
          }
      }
      
      return event.handleObj.handler.apply(this, arguments);
    }
  };
})(jQuery);
$.fn.scrollCenter = function(elem, speed) {

  // this = #timepicker
  // elem = .active

  var active = jQuery(this).find(elem); // find the active element
  //var activeWidth = active.width(); // get active width
  var activeWidth = active.width() / 2; // get active width center

  //alert(activeWidth)

  //var pos = jQuery('#timepicker .active').position().left; //get left position of active li
  // var pos = jQuery(elem).position().left; //get left position of active li
  //var pos = jQuery(this).find(elem).position().left; //get left position of active li
  var pos = active.position().left + activeWidth; //get left position of active li + center position
  var elpos = jQuery(this).scrollLeft(); // get current scroll position
  var elW = jQuery(this).width(); //get div width
  //var divwidth = jQuery(elem).width(); //get div width
  pos = pos + elpos - elW / 2; // for center position if you want adjust then change this

  jQuery(this).animate({
    scrollLeft: pos
  }, speed == undefined ? 1000 : speed);
  return this;
};

// http://podzic.com/wp-content/plugins/podzic/include/js/podzic.js
$.fn.scrollCenterORI = function(elem, speed) {
  jQuery(this).animate({
    scrollLeft: jQuery(this).scrollLeft() - jQuery(this).offset().left + jQuery(elem).offset().left
  }, speed == undefined ? 1000 : speed);
  return this;
};


$(document).on("click", ".nav a",function(e){
  e.preventDefault();
  var me = $(this);
  var id = me.attr("href");


  
  
  if(id&&id[0]=="#"){
   
  var li = me.closest('li');
  // var nav = me.closest('nav');
  li.siblings().removeClass("active"); 
  li.addClass('active');
       var tab = $(id); 
    tab.siblings('.tab-pane').removeClass("fade in active");
    tab.addClass("fade in active");
  }

});
//https://codepen.io/jmalatia/pen/eYLzBg
// $(document).on('click','[data-loading-text]', function () {
//   var $this = $(this);
//   $this.addClass("btn-loader").button('loading');
//   setTimeout(function () {
//     $this.button('reset');
//   }, 8000);
// });

window.btnloader = function(ele){
  
  return {
    text : function(html){
       ele.attr('data-loading-text',html);
       return this;
    },
    show : function(){
      ele.addClass("btn-loader").button('loading');
      setTimeout(function () {
          ele.button('reset');
        }, 8000);
      return this;
    },
    hide : function(){
       ele.button('reset');
       // ele.attr('data-loading-text',html);
       return this;
    }
  };
 
};


(function(){
    var pixelLoadOffset = 500;
    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            }, wait);
            if (immediate && !timeout) func.apply(context, args);
        };
    }
    var debouncedScroll = debounce(function () {
        var els = $(this).find('img[data-lazy]');
        if (!els.length) {
            // $(window).off('scroll', debouncedScroll);
            return;
        }
        var wt = $(this).scrollTop();    //* top of the window
        var wb = wt + $(this).height();  //* bottom of the window

        els.each(function () {
            var $this = $(this);
            var ot = $this.offset().top;  //* top of object
            var ob = ot + $this.height(); //* bottom of object
            if (wt <= ob + pixelLoadOffset && wb >= ot - pixelLoadOffset) {
              if(!$this.hasClass("_l")){
                $this.addClass("_l").attr({'src': $this.attr('data-lazy'),load:function(){
                  $this.removeClass("_l").fadeIn();
                }}).removeAttr('data-lazy');
              }
                
            }
        });
    }, 100);
    

    $.fn.fastimage =  function(options) {
       return this.each(function(){
           $(this).on('scroll', debouncedScroll);
       });
    };

    $(document).ready(function(){
        $(document).on("scroll",".fastimage",debouncedScroll);
     });
     

    function createLoader(html){
        return "<div class='loadera' style='position:absolute;bottom:64px;left:0;width:100%;background-color:#fff;padding:8px;text-align:center;color:#333'>"+html+"</div>";
      }
    $.fn.ALoadMore = function(options){
      
      return this.each(function(){
        var root = $(this).addClass("ALoadMore"),settings = $.extend({
          loading:'<p>Loading more items&hellip;</p>'
        },options,true),$loading = $(),
        loading=0, opts = {
            offset: '100%'
        };
        root.on('scroll', function(){
           if(loading)return;
           
           var wt = $(this).scrollTop();    //* top of the window
           var wb =  this.scrollHeight-$(this).height();  //* bottom of the window
           // console.log(wt,wb);
           if(wt>wb-150){
            loading =1;
             root.append(createLoader(settings.loading));

             settings.ajax.call(settings,function(html){

                if(html)root.append(html); 
                 loading=0;

                root.find(".loadera").remove();
             }); 
           }
        });
      });
    };
})();
(function(win){
	/*

 https://codepen.io/vank0/pen/mrRwLg
 
  <span class="loadern-88"></span>
 
*/

	var loader = 0;
	var key = "loadern";
	win.showLoaderInline = function(ele,options){
		if(loader==0){
			loader = 1;
			$("body").append(`<style>.loadern-13,.loadern-14{top:-1em;position:relative}.loadern-03,.loadern-04,.loadern-05,.loadern-07,.loadern-08,.loadern-10,.loadern-12,.loadern-13,.loadern-14,.loadern-15,.loadern-18,.loadern-21,.loadern-36{position:relative}[class*=loadern-]{display:inline-block;width:1em;height:1em;color:inherit;vertical-align:middle;pointer-events:none}.loadern-01{border:.2em dotted currentcolor;border-radius:50%;-webkit-animation:1s linear infinite loader-01;animation:1s linear infinite loader-01}@-webkit-keyframes loader-01{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-01{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-02{border:.2em solid transparent;border-left-color:currentcolor;border-right-color:currentcolor;border-radius:50%;-webkit-animation:1s linear infinite loader-02;animation:1s linear infinite loader-02}@-webkit-keyframes loader-02{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-02{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-03{border:.2em solid currentcolor;border-bottom-color:transparent;border-radius:50%;-webkit-animation:1s linear infinite loader-03;animation:1s linear infinite loader-03}@-webkit-keyframes loader-03{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-03{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-04{border:1px solid currentcolor;border-radius:50%;-webkit-animation:1s linear infinite loader-04;animation:1s linear infinite loader-04}.loadern-04:before,.loadern-05:before{content:"";position:absolute;top:-.2em;border:.2em solid currentcolor;display:block}.loadern-04:before{width:0;height:0;left:50%;border-radius:50%}.loadern-05,.loadern-30{border:.2em solid transparent}@-webkit-keyframes loader-04{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-04{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-05{border-top-color:currentcolor;border-radius:50%;-webkit-animation:1s linear infinite loader-05;animation:1s linear infinite loader-05}.loadern-05:before{width:inherit;height:inherit;left:-.2em;border-radius:50%;opacity:.5}.loadern-07:after,.loadern-07:before,.loadern-08:after,.loadern-08:before{width:inherit;height:inherit;left:0;content:"";position:absolute;top:0}@-webkit-keyframes loader-05{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-05{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-06{border:.2em solid currentcolor;border-radius:50%;-webkit-animation:1s ease-out infinite loader-06;animation:1s ease-out infinite loader-06}@-webkit-keyframes loader-06{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0}50%{opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes loader-06{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0}50%{opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.loadern-07{border:0 solid transparent;border-radius:50%}.loadern-07:after,.loadern-07:before{border:.2em solid currentcolor;border-radius:50%;-webkit-animation:1s linear infinite loader-07;animation:1s linear infinite loader-07;opacity:0}.loadern-08:after,.loadern-08:before,.loadern-09{border-radius:50%;background-color:currentcolor}.loadern-07:before{-webkit-animation-delay:1s;animation-delay:1s}.loadern-07:after{-webkit-animation-delay:.5s;animation-delay:.5s}@-webkit-keyframes loader-07{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0}50%{opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes loader-07{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0}50%{opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.loadern-08:after,.loadern-08:before{opacity:.6;-webkit-animation:2s ease-in-out infinite loader-08;animation:2s ease-in-out infinite loader-08}.loadern-08:after{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes loader-08{0%,100%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes loader-08{0%,100%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1);transform:scale(1)}}.loadern-09{-webkit-animation:1s ease-in-out infinite loader-09;animation:1s ease-in-out infinite loader-09}@-webkit-keyframes loader-09{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes loader-09{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.loadern-10{-webkit-animation:2s linear infinite loader-10-1;animation:2s linear infinite loader-10-1}.loadern-10:after,.loadern-10:before{content:"";width:0;height:0;border:.5em solid currentcolor;display:block;position:absolute;border-radius:100%;-webkit-animation:2s ease-in-out infinite loader-10-2;animation:2s ease-in-out infinite loader-10-2}.loadern-10:before{top:0;left:50%}.loadern-10:after{bottom:0;right:50%;-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes loader-10-1{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-10-1{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loader-10-2{0%,100%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes loader-10-2{0%,100%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1);transform:scale(1)}}.loadern-11{background-color:currentcolor;-webkit-animation:1.2s ease-in-out infinite loader-11;animation:1.2s ease-in-out infinite loader-11}@-webkit-keyframes loader-11{0%{-webkit-transform:perspective(120px) rotateX(0) rotateY(0);transform:perspective(120px) rotateX(0) rotateY(0)}50%{-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0);transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}100%{-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}@keyframes loader-11{0%{-webkit-transform:perspective(120px) rotateX(0) rotateY(0);transform:perspective(120px) rotateX(0) rotateY(0)}50%{-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0);transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}100%{-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}.loadern-12:after,.loadern-12:before{content:"";display:block;position:absolute;background-color:currentcolor;left:50%;right:0;top:0;bottom:50%;-webkit-box-shadow:-.5em 0 0 currentcolor;box-shadow:-.5em 0 0 currentcolor;-webkit-animation:1s linear infinite loader-12;animation:1s linear infinite loader-12}.loadern-12:after{top:50%;bottom:0;-webkit-animation-delay:.25s;animation-delay:.25s}.loadern-13:after,.loadern-13:before,.loadern-16:after,.loadern-16:before{top:0;width:inherit;height:inherit;position:absolute;content:"";display:block}@-webkit-keyframes loader-12{0%,100%{-webkit-box-shadow:-.5em 0 0 transparent;box-shadow:-.5em 0 0 transparent;background-color:currentcolor}50%{-webkit-box-shadow:-.5em 0 0 currentcolor;box-shadow:-.5em 0 0 currentcolor;background-color:transparent}}@keyframes loader-12{0%,100%{-webkit-box-shadow:-.5em 0 0 transparent;box-shadow:-.5em 0 0 transparent;background-color:currentcolor}50%{-webkit-box-shadow:-.5em 0 0 currentcolor;box-shadow:-.5em 0 0 currentcolor;background-color:transparent}}.loadern-13,.loadern-13:after,.loadern-13:before{border-radius:50%;-webkit-animation:1.8s ease-in-out infinite loader-13;animation:1.8s ease-in-out infinite loader-13}.loadern-13{color:currentcolor;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.loadern-13:before{right:100%;-webkit-animation-delay:-.32s;animation-delay:-.32s}.loadern-13:after{left:100%}@-webkit-keyframes loader-13{0%,100%,80%{-webkit-box-shadow:0 1em 0 -1em;box-shadow:0 1em 0 -1em}40%{-webkit-box-shadow:0 1em 0 -.2em;box-shadow:0 1em 0 -.2em}}@keyframes loader-13{0%,100%,80%{-webkit-box-shadow:0 1em 0 -1em;box-shadow:0 1em 0 -1em}40%{-webkit-box-shadow:0 1em 0 -.2em;box-shadow:0 1em 0 -.2em}}.loadern-14{border-radius:50%;-webkit-box-shadow:0 1em 0 -.2em currentcolor;box-shadow:0 1em 0 -.2em currentcolor;-webkit-animation:.8s ease-in-out .32s infinite alternate loader-14;animation:.8s ease-in-out .32s infinite alternate loader-14}.loadern-14:after,.loadern-14:before{content:"";position:absolute;width:inherit;height:inherit;border-radius:inherit;-webkit-box-shadow:inherit;box-shadow:inherit;-webkit-animation:inherit;animation:inherit}.loadern-14:before{left:-1em;-webkit-animation-delay:.48s;animation-delay:.48s}.loadern-14:after{right:-1em;-webkit-animation-delay:.16s;animation-delay:.16s}@-webkit-keyframes loader-14{0%{-webkit-box-shadow:0 2em 0 -.2em currentcolor;box-shadow:0 2em 0 -.2em currentcolor}100%{-webkit-box-shadow:0 1em 0 -.2em currentcolor;box-shadow:0 1em 0 -.2em currentcolor}}@keyframes loader-14{0%{-webkit-box-shadow:0 2em 0 -.2em currentcolor;box-shadow:0 2em 0 -.2em currentcolor}100%{-webkit-box-shadow:0 1em 0 -.2em currentcolor;box-shadow:0 1em 0 -.2em currentcolor}}.loadern-15{background:currentcolor;-webkit-animation:1s ease-in-out .4s infinite loader-15;animation:1s ease-in-out .4s infinite loader-15;width:.25em;height:.5em;margin:0 .5em}.loadern-15:after,.loadern-15:before{content:"";position:absolute;width:inherit;height:inherit;background:inherit;-webkit-animation:inherit;animation:inherit}.loadern-17,.loadern-17:after,.loadern-17:before{background-color:currentcolor}.loadern-15:before{right:.5em;-webkit-animation-delay:.2s;animation-delay:.2s}.loadern-15:after{left:.5em;-webkit-animation-delay:.6s;animation-delay:.6s}@-webkit-keyframes loader-15{0%,100%{-webkit-box-shadow:0 0 0 currentcolor,0 0 0 currentcolor;box-shadow:0 0 0 currentcolor,0 0 0 currentcolor}50%{-webkit-box-shadow:0 -.25em 0 currentcolor,0 .25em 0 currentcolor;box-shadow:0 -.25em 0 currentcolor,0 .25em 0 currentcolor}}@keyframes loader-15{0%,100%{-webkit-box-shadow:0 0 0 currentcolor,0 0 0 currentcolor;box-shadow:0 0 0 currentcolor,0 0 0 currentcolor}50%{-webkit-box-shadow:0 -.25em 0 currentcolor,0 .25em 0 currentcolor;box-shadow:0 -.25em 0 currentcolor,0 .25em 0 currentcolor}}.loadern-16{-webkit-transform:rotateZ(45deg);-ms-transform:rotate(45deg);transform:rotateZ(45deg);-webkit-perspective:1000px;perspective:1000px;border-radius:50%}.loadern-16:after,.loadern-16:before{left:0;border-radius:50%;-webkit-animation:1s linear infinite spin;animation:1s linear infinite spin}.loadern-16:before{-webkit-transform:rotateX(70deg);transform:rotateX(70deg)}.loadern-16:after{-webkit-transform:rotateY(70deg);transform:rotateY(70deg);-webkit-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes rotate{0%{-webkit-transform:translate(-50%,-50%) rotateZ(0);transform:translate(-50%,-50%) rotateZ(0)}100%{-webkit-transform:translate(-50%,-50%) rotateZ(360deg);transform:translate(-50%,-50%) rotateZ(360deg)}}@keyframes rotate{0%{-webkit-transform:translate(-50%,-50%) rotateZ(0);transform:translate(-50%,-50%) rotateZ(0)}100%{-webkit-transform:translate(-50%,-50%) rotateZ(360deg);transform:translate(-50%,-50%) rotateZ(360deg)}}@-webkit-keyframes rotateccw{0%{-webkit-transform:translate(-50%,-50%) rotate(0);transform:translate(-50%,-50%) rotate(0)}100%{-webkit-transform:translate(-50%,-50%) rotate(-360deg);transform:translate(-50%,-50%) rotate(-360deg)}}@keyframes rotateccw{0%{-webkit-transform:translate(-50%,-50%) rotate(0);transform:translate(-50%,-50%) rotate(0)}100%{-webkit-transform:translate(-50%,-50%) rotate(-360deg);transform:translate(-50%,-50%) rotate(-360deg)}}@-webkit-keyframes spin{0%,100%{-webkit-box-shadow:.2em 0 0 0 currentcolor;box-shadow:.2em 0 0 0 currentcolor}12%{-webkit-box-shadow:.2em .2em 0 0 currentcolor;box-shadow:.2em .2em 0 0 currentcolor}25%{-webkit-box-shadow:0 .2em 0 0 currentcolor;box-shadow:0 .2em 0 0 currentcolor}37%{-webkit-box-shadow:-.2em .2em 0 0 currentcolor;box-shadow:-.2em .2em 0 0 currentcolor}50%{-webkit-box-shadow:-.2em 0 0 0 currentcolor;box-shadow:-.2em 0 0 0 currentcolor}62%{-webkit-box-shadow:-.2em -.2em 0 0 currentcolor;box-shadow:-.2em -.2em 0 0 currentcolor}75%{-webkit-box-shadow:0 -.2em 0 0 currentcolor;box-shadow:0 -.2em 0 0 currentcolor}87%{-webkit-box-shadow:.2em -.2em 0 0 currentcolor;box-shadow:.2em -.2em 0 0 currentcolor}}@keyframes spin{0%,100%{-webkit-box-shadow:.2em 0 0 0 currentcolor;box-shadow:.2em 0 0 0 currentcolor}12%{-webkit-box-shadow:.2em .2em 0 0 currentcolor;box-shadow:.2em .2em 0 0 currentcolor}25%{-webkit-box-shadow:0 .2em 0 0 currentcolor;box-shadow:0 .2em 0 0 currentcolor}37%{-webkit-box-shadow:-.2em .2em 0 0 currentcolor;box-shadow:-.2em .2em 0 0 currentcolor}50%{-webkit-box-shadow:-.2em 0 0 0 currentcolor;box-shadow:-.2em 0 0 0 currentcolor}62%{-webkit-box-shadow:-.2em -.2em 0 0 currentcolor;box-shadow:-.2em -.2em 0 0 currentcolor}75%{-webkit-box-shadow:0 -.2em 0 0 currentcolor;box-shadow:0 -.2em 0 0 currentcolor}87%{-webkit-box-shadow:.2em -.2em 0 0 currentcolor;box-shadow:.2em -.2em 0 0 currentcolor}}.loadern-20,.loadern-27{-webkit-box-shadow:inset 0 0 0 .1em currentcolor;position:relative}.loadern-17{position:relative;border-radius:50%}.loadern-17:after,.loadern-17:before{content:"";position:absolute;width:.25em;height:.25em;border-radius:50%;opacity:.8}.loadern-17:after{left:-.5em;top:-.25em;-webkit-transform-origin:0.75em 1em;-ms-transform-origin:0.75em 1em;transform-origin:0.75em 1em;-webkit-animation:1s linear infinite loader-17;animation:1s linear infinite loader-17;opacity:.6}.loadern-17:before{left:-1.25em;top:-.75em;-webkit-transform-origin:1.5em 1em;-ms-transform-origin:1.5em 1em;transform-origin:1.5em 1em;-webkit-animation:2s linear infinite loader-17;animation:2s linear infinite loader-17}@-webkit-keyframes loader-17{0%{-webkit-transform:rotateZ(0) translate3d(0,0,0);transform:rotateZ(0) translate3d(0,0,0)}100%{-webkit-transform:rotateZ(360deg) translate3d(0,0,0);transform:rotateZ(360deg) translate3d(0,0,0)}}@keyframes loader-17{0%{-webkit-transform:rotateZ(0) translate3d(0,0,0);transform:rotateZ(0) translate3d(0,0,0)}100%{-webkit-transform:rotateZ(360deg) translate3d(0,0,0);transform:rotateZ(360deg) translate3d(0,0,0)}}.loadern-18:after,.loadern-18:before{content:"";display:block;position:absolute;border-radius:50%;border:.1em solid transparent;border-bottom-color:currentcolor;top:0;left:0;-webkit-animation:1s linear infinite loader-18;animation:1s linear infinite loader-18}.loadern-18:before{width:1em;height:1em}.loadern-18:after{width:.8em;height:.8em;top:.1em;left:.1em;animation-direction:reverse}@-webkit-keyframes loader-18{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-18{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-19{border-top:.2em solid currentcolor;border-right:.2em solid transparent;-webkit-animation:1s linear infinite loader-19;animation:1s linear infinite loader-19;border-radius:100%;position:relative}@-webkit-keyframes loader-19{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-19{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-20{background-color:transparent;box-shadow:inset 0 0 0 .1em currentcolor;border-radius:50%}.loadern-20:after,.loadern-20:before{position:absolute;content:"";background-color:currentcolor;top:.5em;left:.5em;height:.1em;-webkit-transform-origin:left center;-ms-transform-origin:left center;transform-origin:left center}.loadern-20:after{width:.4em;-webkit-animation:2s linear infinite loader-20;animation:2s linear infinite loader-20}.loadern-20:before{width:.3em;-webkit-animation:8s linear infinite loader-20;animation:8s linear infinite loader-20}@-webkit-keyframes loader-20{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-20{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-21:after,.loadern-21:before,.loadern-24:after,.loadern-24:before,.loadern-33:after,.loadern-33:before{position:absolute;content:""}.loadern-21:before{width:80%;height:80%;left:10%;bottom:10%;border-radius:100% 100% 100% 0;-webkit-box-shadow:0 0 0 .1em currentcolor;box-shadow:0 0 0 .1em currentcolor;-webkit-animation:1s linear infinite loader-21;animation:1s linear infinite loader-21;-webkit-transform:rotate(-46deg);-ms-transform:rotate(-46deg);transform:rotate(-46deg)}.loadern-21:after{width:1em;height:.3em;border-radius:100%;left:0;background-color:rgba(255,255,255,.2);bottom:-.2em;z-index:-1}.loadern-23:after,.loadern-24:before,.loadern-25:after,.loadern-26,.loadern-31,.loadern-33:after{background-color:currentcolor}@-webkit-keyframes loader-21{0%,100%{top:0}50%{top:-5px}}@keyframes loader-21{0%,100%{top:0}50%{top:-5px}}.loadern-22{border:.1em solid currentcolor;border-radius:100%;position:relative;overflow:hidden;z-index:1}.loadern-22:after,.loadern-22:before{position:absolute;content:"";background-color:currentcolor}.loadern-22:after{width:50%;height:.1em;left:50%;top:50%;-webkit-transform-origin:left center;-ms-transform-origin:left center;transform-origin:left center;-webkit-animation:2s linear infinite alternate loader-22;animation:2s linear infinite alternate loader-22}.loadern-22:before{width:100%;height:40%;left:0;bottom:0}@-webkit-keyframes loader-22{0%{-webkit-transform:rotate(-160deg);transform:rotate(-160deg)}100%{-webkit-transform:rotate(-20deg);transform:rotate(-20deg)}}@keyframes loader-22{0%{-webkit-transform:rotate(-160deg);transform:rotate(-160deg)}100%{-webkit-transform:rotate(-20deg);transform:rotate(-20deg)}}.loadern-23{height:.5em;border:.1em solid currentcolor;border-radius:.1em;position:relative;-webkit-animation:5s linear infinite loader-23;animation:5s linear infinite loader-23}.loadern-23:after{width:.07em;height:100%;border-radius:0 .5em .5em 0;position:absolute;content:"";top:0;left:calc(100% + .1em)}.loadern-24,.loadern-24:after{border:.1em solid currentcolor}@-webkit-keyframes loader-23{0%{-webkit-box-shadow:inset 0 0 0 currentcolor;box-shadow:inset 0 0 0 currentcolor}100%{-webkit-box-shadow:inset 1em 0 0 currentcolor;box-shadow:inset 1em 0 0 currentcolor}}@keyframes loader-23{0%{-webkit-box-shadow:inset 0 0 0 currentcolor;box-shadow:inset 0 0 0 currentcolor}100%{-webkit-box-shadow:inset 1em 0 0 currentcolor;box-shadow:inset 1em 0 0 currentcolor}}.loadern-24{width:.8em;height:1em;border-radius:0 0 .2em .2em;position:relative}.loadern-24:after{width:.2em;height:50%;border-left:none;border-radius:0 .5em .5em 0;left:calc(100% + .1em);top:.1em}.loadern-25,.loadern-36:before{border:.1em solid currentcolor}.loadern-24:before{width:.1em;height:.3em;top:-.3em;left:.05em;-webkit-box-shadow:.2em 0 0 0 currentcolor,.2em -.2em 0 0 currentcolor,.4em 0 0 0 currentcolor;box-shadow:.2em 0 0 0 currentcolor,.2em -.2em 0 0 currentcolor,.4em 0 0 0 currentcolor;-webkit-animation:1s linear infinite alternate loader-24;animation:1s linear infinite alternate loader-24}@-webkit-keyframes loader-24{0%{height:0}100%{height:6px}}@keyframes loader-24{0%{height:0}100%{height:6px}}.loadern-25{position:relative;-webkit-animation:5s linear infinite loader-25-1;animation:5s linear infinite loader-25-1}.loadern-25:after{width:.2em;height:.2em;position:absolute;content:"";bottom:calc(100% + .2em);left:-.4em;-webkit-animation:1s ease-in-out infinite loader-25-2;animation:1s ease-in-out infinite loader-25-2}.loadern-27:after,.loadern-28:after{position:absolute;left:50%;content:""}@-webkit-keyframes loader-25-1{0%{-webkit-box-shadow:inset 0 0 0 0 currentcolor;box-shadow:inset 0 0 0 0 currentcolor}100%{-webkit-box-shadow:inset 0 -1em 0 0 currentcolor;box-shadow:inset 0 -1em 0 0 currentcolor}}@keyframes loader-25-1{0%{-webkit-box-shadow:inset 0 0 0 0 currentcolor;box-shadow:inset 0 0 0 0 currentcolor}100%{-webkit-box-shadow:inset 0 -1em 0 0 currentcolor;box-shadow:inset 0 -1em 0 0 currentcolor}}@-webkit-keyframes loader-25-2{25%{left:calc(100% + .2em);bottom:calc(100% + .2em)}50%{left:calc(100% + .2em);bottom:-.4em}75%{left:-.4em;bottom:-.4em}100%{left:-.4em;bottom:calc(100% + .2em)}}@keyframes loader-25-2{25%{left:calc(100% + .2em);bottom:calc(100% + .2em)}50%{left:calc(100% + .2em);bottom:-.4em}75%{left:-.4em;bottom:-.4em}100%{left:-.4em;bottom:calc(100% + .2em)}}.loadern-26{width:.5em;height:.5em;-webkit-box-shadow:1em 0 0 currentcolor;box-shadow:1em 0 0 currentcolor;border-radius:50%;-webkit-animation:1s ease-in-out infinite alternate loader-26;animation:1s ease-in-out infinite alternate loader-26}@-webkit-keyframes loader-26{0%{opacity:.1;-webkit-transform:rotate(0) scale(.5);transform:rotate(0) scale(.5)}100%{opacity:1;-webkit-transform:rotate(360deg) scale(1.2);transform:rotate(360deg) scale(1.2)}}@keyframes loader-26{0%{opacity:.1;-webkit-transform:rotate(0) scale(.5);transform:rotate(0) scale(.5)}100%{opacity:1;-webkit-transform:rotate(360deg) scale(1.2);transform:rotate(360deg) scale(1.2)}}.loadern-27{box-shadow:inset 0 0 0 .1em currentcolor;border-radius:50%;margin-left:1.2em}.loadern-27:before{content:"";display:block;width:inherit;height:inherit;border-radius:50%;position:absolute;right:1.2em;top:0;-webkit-box-shadow:inset 0 0 0 .1em currentcolor;box-shadow:inset 0 0 0 .1em currentcolor}.loadern-27:after{border:.2em solid currentcolor;-webkit-box-shadow:-1.2em 0 0 0 currentcolor;box-shadow:-1.2em 0 0 0 currentcolor;width:0;height:0;border-radius:50%;top:25%;-webkit-animation:2s linear infinite alternate loader-27;animation:2s linear infinite alternate loader-27}@-webkit-keyframes loader-27{0%{left:0}100%{left:.5em}}@keyframes loader-27{0%{left:0}100%{left:.5em}}.loadern-28{position:relative;-webkit-animation:2s infinite loader-28-1;animation:2s infinite loader-28-1}.loadern-28:before{content:"";display:block;width:inherit;height:inherit;border-radius:80% 20%;border:.1em solid currentcolor;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);border-width:.1em .05em .05em .1em}.loadern-28:after{display:block;width:.2em;height:.2em;top:.4em;border-radius:50%;-webkit-box-shadow:-.07em .07em 0 .1em currentcolor;box-shadow:-.07em .07em 0 .1em currentcolor;-webkit-animation:2s linear infinite loader-28-2;animation:2s linear infinite loader-28-2}@-webkit-keyframes loader-28-1{0%,100%,20%{-webkit-transform:scaleY(1);transform:scaleY(1)}10%{-webkit-transform:scaleY(0);transform:scaleY(0)}}@keyframes loader-28-1{0%,100%,20%{-webkit-transform:scaleY(1);transform:scaleY(1)}10%{-webkit-transform:scaleY(0);transform:scaleY(0)}}@-webkit-keyframes loader-28-2{0%,100%{-webkit-transform:translateX(0);transform:translateX(0)}30%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}50%{-webkit-transform:transalteX(200%);transform:transalteX(200%)}}@keyframes loader-28-2{0%,100%{-webkit-transform:translateX(0);transform:translateX(0)}30%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}50%{-webkit-transform:transalteX(200%);transform:transalteX(200%)}}.loadern-29{border-radius:50%;-webkit-box-shadow:inset 0 0 0 .1em currentcolor,-.5em -.5em 0 -.4em currentcolor,0 -.7em 0 -.4em currentcolor,.5em -.5em 0 -.4em currentcolor,-.5em .5em 0 -.4em currentcolor,0 .7em 0 -.4em currentcolor,.5em .5em 0 -.4em currentcolor,-.7em 0 0 -.4em currentcolor,.7em 0 0 -.4em currentcolor;box-shadow:inset 0 0 0 .1em currentcolor,-.5em -.5em 0 -.4em currentcolor,0 -.7em 0 -.4em currentcolor,.5em -.5em 0 -.4em currentcolor,-.5em .5em 0 -.4em currentcolor,0 .7em 0 -.4em currentcolor,.5em .5em 0 -.4em currentcolor,-.7em 0 0 -.4em currentcolor,.7em 0 0 -.4em currentcolor;-webkit-animation:5s linear infinite loader-29;animation:5s linear infinite loader-29}@-webkit-keyframes loader-29{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-29{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-30{border-top-color:currentcolor;border-bottom-color:currentcolor;border-radius:50%;position:relative;-webkit-animation:1s linear infinite loader-30;animation:1s linear infinite loader-30}.loadern-30:after,.loadern-30:before{content:"";display:block;width:0;height:0;position:absolute;border:.2em solid transparent;border-bottom-color:currentcolor}.loadern-31:after,.loadern-31:before,.loadern-32:after,.loadern-32:before{width:inherit;height:inherit;display:block;content:"";position:absolute}.loadern-30:before{-webkit-transform:rotate(135deg);-ms-transform:rotate(135deg);transform:rotate(135deg);right:-.3em;top:-.05em}.loadern-30:after{-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:-.3em;bottom:-.05em}@-webkit-keyframes loader-30{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-30{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loadern-31{-webkit-box-shadow:0 0 2em currentcolor;box-shadow:0 0 2em currentcolor;position:relative;border-radius:50%;-webkit-transform:rotateX(-60deg) perspective(1000px);transform:rotateX(-60deg) perspective(1000px)}.loadern-31:after,.loadern-31:before{top:0;left:0;border-radius:inherit;-webkit-animation:1s ease-out infinite loader-31;animation:1s ease-out infinite loader-31}.loadern-31:after{-webkit-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes loader-31{0%{opacity:1;-webkit-transform:rotate(0);transform:rotate(0);-webkit-box-shadow:0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor;box-shadow:0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor}100%{opacity:0;-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-box-shadow:-1em -1em 0 -.35em currentcolor,0 -1.5em 0 -.35em currentcolor,1em -1em 0 -.35em currentcolor,-1.5em 0 0 -.35em currentcolor,1.5em 0 0 -.35em currentcolor,-1em 1em 0 -.35em currentcolor,0 1.5em 0 -.35em currentcolor,1em 1em 0 -.35em currentcolor;box-shadow:-1em -1em 0 -.35em currentcolor,0 -1.5em 0 -.35em currentcolor,1em -1em 0 -.35em currentcolor,-1.5em 0 0 -.35em currentcolor,1.5em 0 0 -.35em currentcolor,-1em 1em 0 -.35em currentcolor,0 1.5em 0 -.35em currentcolor,1em 1em 0 -.35em currentcolor}}@keyframes loader-31{0%{opacity:1;-webkit-transform:rotate(0);transform:rotate(0);-webkit-box-shadow:0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor;box-shadow:0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor,0 0 0 -.5em currentcolor}100%{opacity:0;-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-box-shadow:-1em -1em 0 -.35em currentcolor,0 -1.5em 0 -.35em currentcolor,1em -1em 0 -.35em currentcolor,-1.5em 0 0 -.35em currentcolor,1.5em 0 0 -.35em currentcolor,-1em 1em 0 -.35em currentcolor,0 1.5em 0 -.35em currentcolor,1em 1em 0 -.35em currentcolor;box-shadow:-1em -1em 0 -.35em currentcolor,0 -1.5em 0 -.35em currentcolor,1em -1em 0 -.35em currentcolor,-1.5em 0 0 -.35em currentcolor,1.5em 0 0 -.35em currentcolor,-1em 1em 0 -.35em currentcolor,0 1.5em 0 -.35em currentcolor,1em 1em 0 -.35em currentcolor}}.loadern-32{position:relative;border-radius:50%;-webkit-box-shadow:0 0 1em 0 currentcolor,inset 0 0 1em 0 currentcolor;box-shadow:0 0 1em 0 currentcolor,inset 0 0 1em 0 currentcolor;-webkit-animation:1s linear infinite loader-32;animation:1s linear infinite loader-32}.loadern-32:after,.loadern-32:before{border-radius:50%}.loadern-32:before{border-top:.2em solid currentcolor;border-right:.2em solid transparent;top:.28em;right:calc(50% - .22em)}.loadern-32:after{border-bottom:.2em solid currentcolor;border-left:.2em solid transparent;bottom:.28em;left:calc(50% - .22em)}@-webkit-keyframes loader-32{0%{-webkit-transform:rotateX(-60deg) rotateZ(0);transform:rotateX(-60deg) rotateZ(0)}100%{-webkit-transform:rotateX(-60deg) rotateZ(360deg);transform:rotateX(-60deg) rotateZ(360deg)}}@keyframes loader-32{0%{-webkit-transform:rotateX(-60deg) rotateZ(0);transform:rotateX(-60deg) rotateZ(0)}100%{-webkit-transform:rotateX(-60deg) rotateZ(360deg);transform:rotateX(-60deg) rotateZ(360deg)}}.loadern-33{border-radius:50%;position:relative}.loadern-33:after{height:.1em;width:1em;border-radius:.1em;bottom:0;left:0;-webkit-transform-origin:bottom center;-ms-transform-origin:bottom center;transform-origin:bottom center;-webkit-animation:.8s ease-in-out infinite alternate loader-33-1;animation:.8s ease-in-out infinite alternate loader-33-1}.loadern-33:before,.loadern-34:after,.loadern-34:before,.loadern-35:before{border-radius:50%;top:0;background-color:currentcolor}.loadern-33:before{height:.2em;width:.2em;left:calc(50% - .1em);-webkit-animation:.4s ease-in-out infinite alternate loader-33-2;animation:.4s ease-in-out infinite alternate loader-33-2}@-webkit-keyframes loader-33-2{0%{height:.24em;-webkit-transform:translateY(0);transform:translateY(0)}75%{height:.2em;width:.2em}100%{height:.1em;width:.24em;-webkit-transform:translateY(.8em);transform:translateY(.8em)}}@keyframes loader-33-2{0%{height:.24em;-webkit-transform:translateY(0);transform:translateY(0)}75%{height:.2em;width:.2em}100%{height:.1em;width:.24em;-webkit-transform:translateY(.8em);transform:translateY(.8em)}}@-webkit-keyframes loader-33-1{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}100%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}}@keyframes loader-33-1{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}100%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}}.loadern-34{position:relative;width:1em;height:.5em}.loadern-34:after,.loadern-34:before{position:absolute;content:"";height:.4em;width:.4em}.loadern-34:after{right:0;-webkit-animation:.5s ease-in-out infinite alternate loader-34-2;animation:.5s ease-in-out infinite alternate loader-34-2}.loadern-34:before{left:0;-webkit-animation:.5s ease-in-out infinite alternate loader-34-1;animation:.5s ease-in-out infinite alternate loader-34-1}@-webkit-keyframes loader-34-1{0%{-webkit-transform:translatex(0);transform:translatex(0)}65%{height:.4em;width:.4em}100%{height:.5em;width:.3em;-webkit-transform:translatex(.2em);transform:translatex(.2em)}}@keyframes loader-34-1{0%{-webkit-transform:translatex(0);transform:translatex(0)}65%{height:.4em;width:.4em}100%{height:.5em;width:.3em;-webkit-transform:translatex(.2em);transform:translatex(.2em)}}@-webkit-keyframes loader-34-2{0%{-webkit-transform:translatex(0);transform:translatex(0)}65%{height:.4em;width:.4em}100%{height:.5em;width:.3em;-webkit-transform:translatex(-.2em);transform:translatex(-.2em)}}@keyframes loader-34-2{0%{-webkit-transform:translatex(0);transform:translatex(0)}65%{height:.4em;width:.4em}100%{height:.5em;width:.3em;-webkit-transform:translatex(-.2em);transform:translatex(-.2em)}}.loadern-35{margin:0 .5em;position:relative}.loadern-35:before{-webkit-animation:3s cubic-bezier(.77,0,.175,1) infinite loader-35;animation:3s cubic-bezier(.77,0,.175,1) infinite loader-35;content:"";width:inherit;height:inherit;left:0;position:absolute}@-webkit-keyframes loader-35{0%,100%,50%{-webkit-transform:translateX(0) scale(1);transform:translateX(0) scale(1)}25%{-webkit-transform:translateX(-100%) scale(.3);transform:translateX(-100%) scale(.3)}75%{-webkit-transform:translateX(100%) scale(.3);transform:translateX(100%) scale(.3)}}@keyframes loader-35{0%,100%,50%{-webkit-transform:translateX(0) scale(1);transform:translateX(0) scale(1)}25%{-webkit-transform:translateX(-100%) scale(.3);transform:translateX(-100%) scale(.3)}75%{-webkit-transform:translateX(100%) scale(.3);transform:translateX(100%) scale(.3)}}.loadern-36:after,.loadern-36:before{content:"";position:absolute;top:0;left:0}.loadern-36:before{width:1em;height:1em;border-radius:50%;-webkit-animation:1.15s -.3s infinite loader-36-1;animation:1.15s -.3s infinite loader-36-1}.loadern-36:after{right:0;bottom:0;margin:auto;width:0;height:0;border:.1em solid currentcolor;border-radius:50%;-webkit-transform:translate(-.2em);-ms-transform:translate(-.2em);transform:translate(-.2em);-webkit-animation:4.6s steps(1) infinite loader-36-2;animation:4.6s steps(1) infinite loader-36-2}@-webkit-keyframes loader-36-1{to{-webkit-transform:rotateX(180deg);transform:rotateX(180deg)}}@keyframes loader-36-1{to{-webkit-transform:rotateX(180deg);transform:rotateX(180deg)}}@-webkit-keyframes loader-36-2{0%{opacity:0}25%{opacity:1}50%{-webkit-box-shadow:.2em 0 0 currentcolor;box-shadow:.2em 0 0 currentcolor}75%{-webkit-box-shadow:.2em 0 0 currentcolor,.4em 0 0 currentcolor;box-shadow:.2em 0 0 currentcolor,.4em 0 0 currentcolor}}@keyframes loader-36-2{0%{opacity:0}25%{opacity:1}50%{-webkit-box-shadow:.2em 0 0 currentcolor;box-shadow:.2em 0 0 currentcolor}75%{-webkit-box-shadow:.2em 0 0 currentcolor,.4em 0 0 currentcolor;box-shadow:.2em 0 0 currentcolor,.4em 0 0 currentcolor}}.loadern-37{border-right:.1em solid currentcolor;border-radius:100%;-webkit-animation:.8s linear infinite loader-37;animation:.8s linear infinite loader-37}.loadern-37:after,.loadern-37:before{content:"";width:.8em;height:.8em;display:block;position:absolute;top:calc(50% - .4em);left:calc(50% - .4em);border-left:.08em solid currentcolor;border-radius:100%;animation:.4s linear infinite reverse loader-37}.loadern-37:after{width:.6em;height:.6em;top:calc(50% - .3em);left:calc(50% - .3em);border:0;border-right:.05em solid currentcolor;-webkit-animation:none;animation:none}@-webkit-keyframes loader-37{from{-webkit-transform:rotate(360deg);transform:rotate(360deg)}to{-webkit-transform:rotate(0);transform:rotate(0)}}@keyframes loader-37{from{-webkit-transform:rotate(360deg);transform:rotate(360deg)}to{-webkit-transform:rotate(0);transform:rotate(0)}}.loadern-38{height:.1em;width:.1em;-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;-webkit-animation:6s infinite loader-38;animation:6s infinite loader-38}@-webkit-keyframes loader-38{0%,100%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor}8.33%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor}16.66%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor}24.99%,74.97%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}33.32%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor}41.65%{-webkit-box-shadow:.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor;box-shadow:.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor}49.98%{-webkit-box-shadow:.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor;box-shadow:.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor}58.31%{-webkit-box-shadow:-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}66.64%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}83.3%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}91.63%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}}@keyframes loader-38{0%,100%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor}8.33%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor}16.66%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor}24.99%,74.97%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}33.32%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor}41.65%{-webkit-box-shadow:.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor;box-shadow:.2em -.2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em -.2em 0 .1em currentcolor}49.98%{-webkit-box-shadow:.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor;box-shadow:.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor}58.31%{-webkit-box-shadow:-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}66.64%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}83.3%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}91.63%{-webkit-box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor;box-shadow:-.2em -.2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor,-.2em .2em 0 .1em currentcolor}}.loadern-39{position:relative;width:.15em;height:.15em;background-color:currentcolor;border-radius:100%;-webkit-animation:30s linear infinite loader-39-1;animation:30s linear infinite loader-39-1}.loadern-39:after,.loadern-39:before{content:"";border-radius:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loadern-40,.loadern-41{border:.05em solid currentcolor;position:relative}.loadern-39:before{width:.3em;height:1em;-webkit-animation:.8s linear infinite loader-39-2;animation:.8s linear infinite loader-39-2}.loadern-39:after{width:1em;height:.3em;-webkit-animation:1.2s linear infinite loader-39-2;animation:1.2s linear infinite loader-39-2}@-webkit-keyframes loader-39-1{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loader-39-1{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loader-39-2{0%,100%{-webkit-box-shadow:.04em -.04em 0 .02em currentcolor;box-shadow:.04em -.04em 0 .02em currentcolor}25%{-webkit-box-shadow:.04em .04em 0 .02em currentcolor;box-shadow:.04em .04em 0 .02em currentcolor}50%{-webkit-box-shadow:-.04em .04em 0 .02em currentcolor;box-shadow:-.04em .04em 0 .02em currentcolor}75%{-webkit-box-shadow:-.04em -.04em 0 .02em currentcolor;box-shadow:-.04em -.04em 0 .02em currentcolor}}@keyframes loader-39-2{0%,100%{-webkit-box-shadow:.04em -.04em 0 .02em currentcolor;box-shadow:.04em -.04em 0 .02em currentcolor}25%{-webkit-box-shadow:.04em .04em 0 .02em currentcolor;box-shadow:.04em .04em 0 .02em currentcolor}50%{-webkit-box-shadow:-.04em .04em 0 .02em currentcolor;box-shadow:-.04em .04em 0 .02em currentcolor}75%{-webkit-box-shadow:-.04em -.04em 0 .02em currentcolor;box-shadow:-.04em -.04em 0 .02em currentcolor}}.loadern-40{border-radius:.2em;overflow:hidden}.loadern-40:after,.loadern-40:before{content:"";border-radius:50%;position:absolute;width:inherit;height:inherit;-webkit-animation:2s linear infinite loader-40;animation:2s linear infinite loader-40}.loadern-40:before{border-top:.2em solid currentcolor;top:-.15em;left:calc(-50% - .15em);-webkit-transform-origin:right center;-ms-transform-origin:right center;transform-origin:right center}.loadern-40:after{border-bottom:.2em solid currentcolor;top:.15em;right:calc(-50% - .15em);-webkit-transform-origin:left center;-ms-transform-origin:left center;transform-origin:left center}@-webkit-keyframes loader-40{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes loader-40{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.loadern-41{border-radius:.2em;background:-o-linear-gradient(45deg,transparent 48%,currentcolor 50%,currentcolor 50%,transparent 52%,transparent),-o-linear-gradient(135deg,transparent 48%,currentcolor 50%,currentcolor 50%,transparent 52%,transparent);background:linear-gradient(45deg,transparent 48%,currentcolor 50%,currentcolor 50%,transparent 52%,transparent),linear-gradient(-45deg,transparent 48%,currentcolor 50%,currentcolor 50%,transparent 52%,transparent);background-size:.5em .5em;background-position:0 0;-webkit-animation:1s linear infinite loader-41;animation:1s linear infinite loader-41}@-webkit-keyframes loader-41{from{background-position:0 0}to{background-position:-1em 0}}@keyframes loader-41{from{background-position:0 0}to{background-position:-1em 0}}.loadern-42{width:2em;height:.66em;border:.05em solid currentcolor;border-radius:.1em;background:-o-linear-gradient(150deg,transparent 0,transparent 50%,currentcolor 50%,currentcolor 75%,transparent 75%,transparent);background:linear-gradient(-60deg,transparent 0,transparent 50%,currentcolor 50%,currentcolor 75%,transparent 75%,transparent);background-size:1em 2em;background-position:0 0;-webkit-animation:.8s linear infinite loader-42;animation:.8s linear infinite loader-42}@-webkit-keyframes loader-42{from{background-position:0 0}to{background-position:-2em 0}}@keyframes loader-42{from{background-position:0 0}to{background-position:-2em 0}}</style>`);
		}
		options = $.extend({style:"01",timeout:2},options,true);
		if(!ele&&$('.page-current').length){
			ele = $('.page-current')
		}else if(!ele&&$('.modal.in').length){
			ele = $('.modal.in')
		}else{
			ele = $("body");
		}
 
		var methods =  {
			hide : function(){
				ele.find("._"+key).removeClass(key+"-"+options.style);
			},
			show : function(timeout){
				if(timeout)options.timeout = timeout; 
				ele.find("._"+key).addClass(key+"-"+options.style);
				setTimeout(methods.hide,options.timeout*1000);
			}
		};
		methods.show();
		return methods;
	};
})(window);
(function(win) {
	 win.Amap = {};
	 win.Amap.google = function(){
	 	
	 	 
	 };
})(window);
(function(win) {
	 win.Amap = {};
	 win.Amap.gps = function(){
	 	
	 	 
	 };
})(window);
(function(win) {
	 win.Amap = win.Amap||{};
	 win.Amap.mapbox = (function(){
    var gps=null;var marker=null;var map=null;var geocoder=null;
 
      return function(options,callback){

        options = $.extend({onChange:function(){},center:[106.6867623,10.8127808],accessToken:Amap.mapbox.accessToken},options,true);
            

        var methods = {
            show: function(){
                $("body").css("overflow","hidden"); 
                $(".popupmap").show(); 
            },
            hide: function(){
                $("body").css("overflow","auto"); 
                $(".popupmap").hide(); 
            }
        };

        if(map==null){
            var width = window.innerWidth<1015?window.innerWidth:414;
            $("body").append(`<style>
                .popupmap{position:fixed;top:0;left:0;height:100%;width:100%;display:none;z-index: 100000000000;    background-color: rgb(59 54 54 / 44%);}
                .popupmap .body{

       background-color: #fff; 
    margin: 5% auto;
    height: 90%;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
     
    width: ${width}px;
     }
    .popupmap .c{
         cursor: pointer;
    position: absolute;
    top: 24px;
    right: 24px;
    z-index: 10;
    padding: 8px;
    font-size: 24px;
    height: 44px;
    background-color: #fff;
    border-radius: 50%;
    width: 44px;
    display: FLEX;
    justify-content: center;
    align-items: center;
    }
   
    .popupmap .mapb{flex:1;height:100%;}
    .popupmap .mapb{flex:1;height:100%;}
    .popupmap .result .lr{
        padding: 8px;
  
    display: flex;
    flex-direction: row;
    }
    .popupmap .mapboxgl-ctrl-top-right{
            left: 0;
    top: 44px;
    }
    .popupmap .mapboxgl-ctrl-geocoder--icon{
            right: 0;
    left: inherit;
    }
                            </style><div class="popupmap">
                            
    <div class="body">
        <div class="c">x</div>
        <div class="mapb"></div>    
        <div class="result">
            
        </div> 
        <div class="">
            <button type="button" class="btnok">Xc nhn </button>
            <button type="button" class="btnno">Hu b </button>
        </div>                    
    </div>
               
                        </div>`);
                        if(options.accessToken) mapboxgl.accessToken = options.accessToken;
                        function load(){
                              var center = options.center;
                              map = new mapboxgl.Map({
                                container: $(".popupmap .mapb")[0],
                                style: 'mapbox://styles/mapbox/streets-v12',
                                center: center,
                                zoom: 16
                              });
             
              
                              map.on('load', function () {
                                // map.addSource('single-point', {
                                //   'type': 'geojson',
                                //   'data': {
                                //     'type': 'FeatureCollection',
                                //     'features': []
                                //   }
                                // });

                                // map.addLayer({
                                //   'id': 'point',
                                //   'source': 'single-point',
                                //   'type': 'circle',
                                //   'paint': {
                                //     'circle-radius': 10,
                                //     'circle-color': '#448ee4'
                                //   }
                                // });

                                
                              });
             
                         
                              marker = new mapboxgl.Marker({
                                draggable: true
                              })
                              .setLngLat(center)
                              .addTo(map);

                              if(window.GPS){
                                window.GPS(function(p){
                                     map.setCenter([p.lng,p.lat]);
                                    marker.setLngLat([p.lng,p.lat]);
                                });
                              }
                               
                              function onDragEnd() {
                                var e = marker.getLngLat();
                                // console.log(e);
                                var l = JSON.stringify(marker.getLngLat());
                                $(".popupmap .result").html(`
                                    <div class="lr"><span class="data" style="flex: 1;">${l}</span><span data-copy='${l}'>Copy</span></div>
                                    <div class="lr"><span class="data" style="flex: 1;">${l}</span><span data-copy='${l}'>Copy</span></div>
                                `);

                                post(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lng},${e.lat}.json?types=address&access_token=`+mapboxgl.accessToken,{},function(e){
                                     console.log(e);
                                },true);

                                if(options.onChange)options.onChange(marker.getLngLat());
                              }
                               
                              marker.on('dragend', onDragEnd);

                              $(".popupmap .c,.popupmap .btnno").on("click",function(){
                                methods.hide();
                                $(".popupmap .result").text("");
                              });
                              $(".popupmap .btnok").on("click",function(){
                                methods.hide();
                                $(".popupmap .result").text("");

                                if(callback)callback(marker.getLngLat());
                              });
                              

                            methods.show();


                            loadJS("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js",function(){

                                loadCSS("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css",function(){
                                     geocoder  = new MapboxGeocoder({
                                        country: 'vn',
                                    // Initialize the geocoder
                                    accessToken: mapboxgl.accessToken, // Set the access token
                                    mapboxgl: mapboxgl, // Set the mapbox-gl instance
                                    marker: false, // Do not use the default marker style
                                    placeholder: 'Tm kim...', // Placeholder text for the search bar
                                    // bbox: [-59.8920050976494, 12.958016032319861, -59.24930490233564, 13.427986048198505], // Boundary for Berkeley
                                    // proximity: {
                                    //   longitude: 13.193114,
                                    //   latitude: -59.570655
                                    // } // Coordinates of UC Berkeley
                                  });

                                    map.addControl(geocoder);
                                    // Listen for the `result` event from the Geocoder // `result` event is triggered when a user makes a selection
                                    //  Add a marker at the result's coordinates
                                    geocoder.on('result', function (e) {
                                        console.log(e.result);
                                        map.setCenter(e.result.center);
                                       marker.setLngLat(e.result.geometry.coordinates);
                                    });
                                });
 
                            });
                        }
                        if(!window.mapboxgl){
                            loadJS("https://api.tiles.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js",function(){
                                loadCSS("https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css",load);
                            });
                        }else{
                           load();
                        }
                        

                    }else{
                       
                       if(options.center){
                         map.setCenter(options.center);
                         map.setLngLat(options.center);
                       } 

                      if(window.GPS){
                        window.GPS(function(p){
                            map.setCenter([p.lng,p.lat]);
                            marker.setLngLat([p.lng,p.lat]);
                        });
                      }
                               
                       methods.show();
                    }

                    return methods;

                  }
    })();
    win.Amap.mapbox.accessToken="pk.eyJ1IjoiYWhsdSIsImEiOiJjbGt6OGl0a28yMDllM2xyMGZnYXN5OTFyIn0.Xba0pVq_21clgD68R_dsvg";
    win.Amap.mapbox.static = function(lat,lng,zoom,accessToken){
    	return `https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/${lng},${lat},${zoom},0,60/245x175?&access_token=${accessToken||win.Amap.mapbox.accessToken}`;
    };
    win.Amap.mapbox.static = function(options){
    	return `<div class="mapimg" style="width:205px;"><img src="${Amap.mapbox.static(options.lat,options.lng,options.zoom,options.accessToken)}" /></div>`;
    };
})(window);
/**!
 * MixItUp v3.3.1
 * A high-performance, dependency-free library for animated filtering, sorting and more
 * Build 94e0fbf6-cd0b-4987-b3c0-14b59b67b8a0
 *
 * @copyright Copyright 2014-2018 KunkaLabs Limited.
 * @author    KunkaLabs Limited.
 * @link      https://www.kunkalabs.com/mixitup/
 *
 * @license   Commercial use requires a commercial license.
 *            https://www.kunkalabs.com/mixitup/licenses/
 *
 *            Non-commercial use permitted under same terms as CC BY-NC 3.0 license.
 *            http://creativecommons.org/licenses/by-nc/3.0/
 */
!function(t){"use strict";var e=null,n=null;!function(){var e=["webkit","moz","o","ms"],n=t.document.createElement("div"),a=-1;for(a=0;a<e.length&&!t.requestAnimationFrame;a++)t.requestAnimationFrame=t[e[a]+"RequestAnimationFrame"];"undefined"==typeof n.nextElementSibling&&Object.defineProperty(t.Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t;){if(1===t.nodeType)return t;t=t.nextSibling}return null}}),function(t){t.matches=t.matches||t.machesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){return Array.prototype.indexOf.call(this.parentElement.querySelectorAll(t),this)>-1}}(t.Element.prototype),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!1,n=[],a=-1;return e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length,function(i){var o=[],r="",s=-1;if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");for(r in i)t.call(i,r)&&o.push(r);if(e)for(s=0;s<a;s++)t.call(i,n[s])&&o.push(n[s]);return o}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),"function"!=typeof Object.create&&(Object.create=function(t){var e=function(){};return function(n,a){if(n!==Object(n)&&null!==n)throw TypeError("Argument must be an object, or null");e.prototype=n||{};var i=new e;return e.prototype=null,a!==t&&Object.defineProperties(i,a),null===n&&(i.__proto__=null),i}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,n,a,i;if(null===this)throw new TypeError;if(a=Object(this),i=a.length>>>0,0===i)return-1;if(e=0,arguments.length>1&&(e=Number(arguments[1]),e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=i)return-1;for(n=e>=0?e:Math.max(i-Math.abs(e),0);n<i;n++)if(n in a&&a[n]===t)return n;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){var e,n,a,i;if("function"!=typeof this)throw new TypeError;return e=Array.prototype.slice.call(arguments,1),n=this,a=function(){},i=function(){return n.apply(this instanceof a?this:t,e.concat(Array.prototype.slice.call(arguments)))},this.prototype&&(a.prototype=this.prototype),i.prototype=new a,i}),t.Element.prototype.dispatchEvent||(t.Element.prototype.dispatchEvent=function(t){try{return this.fireEvent("on"+t.type,t)}catch(e){}})}(),e=function(a,i,o){var r=null,s=!1,l=null,c=null,u=null,f=null,h=[],d="",m=[],g=-1;if(u=o||t.document,(s=arguments[3])&&(s="boolean"==typeof s),"string"==typeof a)m=u.querySelectorAll(a);else if(a&&"object"==typeof a&&n.isElement(a,u))m=[a];else{if(!a||"object"!=typeof a||!a.length)throw new Error(e.messages.errorFactoryInvalidContainer());m=a}if(m.length<1)throw new Error(e.messages.errorFactoryContainerNotFound());for(g=0;(r=m[g])&&(!(g>0)||s);g++)r.id?d=r.id:(d="MixItUp"+n.randomHex(),r.id=d),e.instances[d]instanceof e.Mixer?(l=e.instances[d],(!i||i&&i.debug&&i.debug.showWarnings!==!1)&&console.warn(e.messages.warningFactoryPreexistingInstance())):(l=new e.Mixer,l.attach(r,u,d,i),e.instances[d]=l),c=new e.Facade(l),i&&i.debug&&i.debug.enable?h.push(l):h.push(c);return f=s?new e.Collection(h):h[0]},e.use=function(t){e.Base.prototype.callActions.call(e,"beforeUse",arguments),"function"==typeof t&&"mixitup-extension"===t.TYPE?"undefined"==typeof e.extensions[t.NAME]&&(t(e),e.extensions[t.NAME]=t):t.fn&&t.fn.jquery&&(e.libraries.$=t),e.Base.prototype.callActions.call(e,"afterUse",arguments)},e.instances={},e.extensions={},e.libraries={},n={hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=t.className?" "+e:e)},removeClass:function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}},extend:function(t,e,n,a){var i=[],o="",r=-1;n=n||!1,a=a||!1;try{if(Array.isArray(e))for(r=0;r<e.length;r++)i.push(r);else e&&(i=Object.keys(e));for(r=0;r<i.length;r++)o=i[r],!n||"object"!=typeof e[o]||this.isElement(e[o])?t[o]=e[o]:Array.isArray(e[o])?(t[o]||(t[o]=[]),this.extend(t[o],e[o],n,a)):(t[o]||(t[o]={}),this.extend(t[o],e[o],n,a))}catch(s){if(!a)throw s;this.handleExtendError(s,t)}return t},handleExtendError:function(t,n){var a=/property "?(\w*)"?[,:] object/i,i=null,o="",r="",s="",l="",c="",u=-1,f=-1;if(t instanceof TypeError&&(i=a.exec(t.message))){o=i[1];for(c in n){for(f=0;f<o.length&&o.charAt(f)===c.charAt(f);)f++;f>u&&(u=f,l=c)}throw u>1&&(s=e.messages.errorConfigInvalidPropertySuggestion({probableMatch:l})),r=e.messages.errorConfigInvalidProperty({erroneous:o,suggestion:s}),new TypeError(r)}throw t},template:function(t){for(var e=/\${([\w]*)}/g,n={},a=null;a=e.exec(t);)n[a[1]]=new RegExp("\\${"+a[1]+"}","g");return function(e){var a="",i=t;e=e||{};for(a in n)i=i.replace(n[a],"undefined"!=typeof e[a]?e[a]:"");return i}},on:function(e,n,a,i){e&&(e.addEventListener?e.addEventListener(n,a,i):e.attachEvent&&(e["e"+n+a]=a,e[n+a]=function(){e["e"+n+a](t.event)},e.attachEvent("on"+n,e[n+a])))},off:function(t,e,n){t&&(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&(t.detachEvent("on"+e,t[e+n]),t[e+n]=null))},getCustomEvent:function(e,n,a){var i=null;return a=a||t.document,"function"==typeof t.CustomEvent?i=new t.CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):"function"==typeof a.createEvent?(i=a.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,n)):(i=a.createEventObject(),i.type=e,i.returnValue=!1,i.cancelBubble=!1,i.detail=n),i},getOriginalEvent:function(t){return t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},index:function(t,e){for(var n=0;null!==(t=t.previousElementSibling);)e&&!t.matches(e)||++n;return n},camelCase:function(t){return t.toLowerCase().replace(/([_-][a-z])/g,function(t){return t.toUpperCase().replace(/[_-]/,"")})},pascalCase:function(t){return(t=this.camelCase(t)).charAt(0).toUpperCase()+t.slice(1)},dashCase:function(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()},isElement:function(e,n){return n=n||t.document,!!(t.HTMLElement&&e instanceof t.HTMLElement)||(!!(n.defaultView&&n.defaultView.HTMLElement&&e instanceof n.defaultView.HTMLElement)||null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)},createElement:function(e,n){var a=null,i=null;for(n=n||t.document,a=n.createDocumentFragment(),i=n.createElement("div"),i.innerHTML=e.trim();i.firstChild;)a.appendChild(i.firstChild);return a},removeWhitespace:function(t){for(var e;t&&"#text"===t.nodeName;)e=t,t=t.previousSibling,e.parentElement&&e.parentElement.removeChild(e)},isEqualArray:function(t,e){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0},deepEquals:function(t,e){var n;if("object"==typeof t&&t&&"object"==typeof e&&e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(!e.hasOwnProperty(n)||!this.deepEquals(t[n],e[n]))return!1}else if(t!==e)return!1;return!0},arrayShuffle:function(t){for(var e=t.slice(),n=e.length,a=n,i=-1,o=[];a--;)i=~~(Math.random()*n),o=e[a],e[a]=e[i],e[i]=o;return e},arrayFromList:function(t){var e,n;try{return Array.prototype.slice.call(t)}catch(a){for(e=[],n=0;n<t.length;n++)e.push(t[n]);return e}},debounce:function(t,e,n){var a;return function(){var i=this,o=arguments,r=n&&!a,s=null;s=function(){a=null,n||t.apply(i,o)},clearTimeout(a),a=setTimeout(s,e),r&&t.apply(i,o)}},position:function(t){for(var e=0,n=0,a=t;t;)e-=t.scrollLeft,n-=t.scrollTop,t===a&&(e+=t.offsetLeft,n+=t.offsetTop,a=t.offsetParent),t=t.parentElement;return{x:e,y:n}},getHypotenuse:function(t,e){var n=t.x-e.x,a=t.y-e.y;return n=n<0?n*-1:n,a=a<0?a*-1:a,Math.sqrt(Math.pow(n,2)+Math.pow(a,2))},getIntersectionRatio:function(t,e){var n=t.width*t.height,a=-1,i=-1,o=-1,r=-1;return a=Math.max(0,Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top)),o=i*a,r=o/n},closestParent:function(e,n,a,i){var o=e.parentNode;if(i=i||t.document,a&&e.matches(n))return e;for(;o&&o!=i.body;){if(o.matches&&o.matches(n))return o;if(!o.parentNode)return null;o=o.parentNode}return null},children:function(e,n,a){var i=[],o="";return a=a||t.doc,e&&(e.id||(o="Temp"+this.randomHexKey(),e.id=o),i=a.querySelectorAll("#"+e.id+" > "+n),o&&e.removeAttribute("id")),i},clean:function(t){var e=[],n=-1;for(n=0;n<t.length;n++)""!==t[n]&&e.push(t[n]);return e},defer:function(n){var a=null,i=null,o=null;return i=new this.Deferred,e.features.has.promises?i.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}):(o=t.jQuery||n.$)&&"function"==typeof o.Deferred?(a=o.Deferred(),i.promise=a.promise(),i.resolve=a.resolve,i.reject=a.reject):t.console&&console.warn(e.messages.warningNoPromiseImplementation()),i},all:function(n,a){var i=null;return e.features.has.promises?Promise.all(n):(i=t.jQuery||a.$)&&"function"==typeof i.when?i.when.apply(i,n).done(function(){return arguments}):(t.console&&console.warn(e.messages.warningNoPromiseImplementation()),[])},getPrefix:function(t,e,a){var i=-1,o="";if(n.dashCase(e)in t.style)return"";for(i=0;o=a[i];i++)if(o+e in t.style)return o.toLowerCase();return"unsupported"},randomHex:function(){return("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6).toUpperCase()},getDocumentState:function(e){return e="object"==typeof e.body?e:t.document,{scrollTop:t.pageYOffset,scrollLeft:t.pageXOffset,docHeight:e.documentElement.scrollHeight,docWidth:e.documentElement.scrollWidth,viewportHeight:e.documentElement.clientHeight,viewportWidth:e.documentElement.clientWidth}},bind:function(t,e){return function(){return e.apply(t,arguments)}},isVisible:function(e){var n=null;return!!e.offsetParent||(n=t.getComputedStyle(e),"fixed"===n.position&&"hidden"!==n.visibility&&"0"!==n.opacity)},seal:function(t){"function"==typeof Object.seal&&Object.seal(t)},freeze:function(t){"function"==typeof Object.freeze&&Object.freeze(t)},compareVersions:function(t,e){var n=t.split("."),a=e.split("."),i=-1,o=-1,r=-1;for(r=0;r<n.length;r++){if(i=parseInt(n[r].replace(/[^\d.]/g,"")),o=parseInt(a[r].replace(/[^\d.]/g,"")||0),o<i)return!1;if(o>i)return!0}return!0},Deferred:function(){this.promise=null,this.resolve=null,this.reject=null,this.id=n.randomHex()},isEmptyObject:function(t){var e="";if("function"==typeof Object.keys)return 0===Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},getClassname:function(t,e,n){var a="";return a+=t.block,a.length&&(a+=t.delineatorElement),a+=t["element"+this.pascalCase(e)],n?(a.length&&(a+=t.delineatorModifier),a+=n):a},getProperty:function(t,e){var n=e.split("."),a=null,i="",o=0;if(!e)return t;for(a=function(t){return t?t[i]:null};o<n.length;)i=n[o],t=a(t),o++;return"undefined"!=typeof t?t:null}},e.h=n,e.Base=function(){},e.Base.prototype={constructor:e.Base,callActions:function(t,e){var a=this,i=a.constructor.actions[t],o="";if(i&&!n.isEmptyObject(i))for(o in i)i[o].apply(a,e)},callFilters:function(t,e,a){var i=this,o=i.constructor.filters[t],r=e,s="";if(!o||n.isEmptyObject(o))return r;a=a||[];for(s in o)a=n.arrayFromList(a),a.unshift(r),r=o[s].apply(i,a);return r}},e.BaseStatic=function(){this.actions={},this.filters={},this.extend=function(t){n.extend(this.prototype,t)},this.registerAction=function(t,e,n){(this.actions[t]=this.actions[t]||{})[e]=n},this.registerFilter=function(t,e,n){(this.filters[t]=this.filters[t]||{})[e]=n}},e.Features=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.boxSizingPrefix="",this.transformPrefix="",this.transitionPrefix="",this.boxSizingPrefix="",this.transformProp="",this.transformRule="",this.transitionProp="",this.perspectiveProp="",this.perspectiveOriginProp="",this.has=new e.Has,this.canary=null,this.BOX_SIZING_PROP="boxSizing",this.TRANSITION_PROP="transition",this.TRANSFORM_PROP="transform",this.PERSPECTIVE_PROP="perspective",this.PERSPECTIVE_ORIGIN_PROP="perspectiveOrigin",this.VENDORS=["Webkit","moz","O","ms"],this.TWEENABLE=["opacity","width","height","marginRight","marginBottom","x","y","scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],this.callActions("afterConstruct")},e.BaseStatic.call(e.Features),e.Features.prototype=Object.create(e.Base.prototype),n.extend(e.Features.prototype,{constructor:e.Features,init:function(){var t=this;t.callActions("beforeInit",arguments),t.canary=document.createElement("div"),t.setPrefixes(),t.runTests(),t.callActions("beforeInit",arguments)},runTests:function(){var e=this;e.callActions("beforeRunTests",arguments),e.has.promises="function"==typeof t.Promise,e.has.transitions="unsupported"!==e.transitionPrefix,e.callActions("afterRunTests",arguments),n.freeze(e.has)},setPrefixes:function(){var t=this;t.callActions("beforeSetPrefixes",arguments),t.transitionPrefix=n.getPrefix(t.canary,"Transition",t.VENDORS),t.transformPrefix=n.getPrefix(t.canary,"Transform",t.VENDORS),t.boxSizingPrefix=n.getPrefix(t.canary,"BoxSizing",t.VENDORS),t.boxSizingProp=t.boxSizingPrefix?t.boxSizingPrefix+n.pascalCase(t.BOX_SIZING_PROP):t.BOX_SIZING_PROP,t.transitionProp=t.transitionPrefix?t.transitionPrefix+n.pascalCase(t.TRANSITION_PROP):t.TRANSITION_PROP,t.transformProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.TRANSFORM_PROP):t.TRANSFORM_PROP,t.transformRule=t.transformPrefix?"-"+t.transformPrefix+"-"+t.TRANSFORM_PROP:t.TRANSFORM_PROP,t.perspectiveProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.PERSPECTIVE_PROP):t.PERSPECTIVE_PROP,t.perspectiveOriginProp=t.transformPrefix?t.transformPrefix+n.pascalCase(t.PERSPECTIVE_ORIGIN_PROP):t.PERSPECTIVE_ORIGIN_PROP,t.callActions("afterSetPrefixes",arguments)}}),e.Has=function(){this.transitions=!1,this.promises=!1,n.seal(this)},e.features=new e.Features,e.features.init(),e.ConfigAnimation=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.effects="fade scale",this.effectsIn="",this.effectsOut="",this.duration=600,this.easing="ease",this.applyPerspective=!0,this.perspectiveDistance="3000px",this.perspectiveOrigin="50% 50%",this.queue=!0,this.queueLimit=3,this.animateResizeContainer=!0,this.animateResizeTargets=!1,this.staggerSequence=null,this.reverseOut=!1,this.nudge=!0,this.clampHeight=!0,this.clampWidth=!0,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigAnimation),e.ConfigAnimation.prototype=Object.create(e.Base.prototype),e.ConfigAnimation.prototype.constructor=e.ConfigAnimation,e.ConfigBehavior=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.liveSort=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigBehavior),e.ConfigBehavior.prototype=Object.create(e.Base.prototype),e.ConfigBehavior.prototype.constructor=e.ConfigBehavior,e.ConfigCallbacks=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.onMixStart=null,this.onMixBusy=null,this.onMixEnd=null,this.onMixFail=null,this.onMixClick=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigCallbacks),e.ConfigCallbacks.prototype=Object.create(e.Base.prototype),e.ConfigCallbacks.prototype.constructor=e.ConfigCallbacks,e.ConfigControls=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!0,this.live=!1,this.scope="global",this.toggleLogic="or",this.toggleDefault="all",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigControls),e.ConfigControls.prototype=Object.create(e.Base.prototype),e.ConfigControls.prototype.constructor=e.ConfigControls,e.ConfigClassNames=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.block="mixitup",this.elementContainer="container",this.elementFilter="control",this.elementSort="control",this.elementMultimix="control",this.elementToggle="control",this.modifierActive="active",this.modifierDisabled="disabled",this.modifierFailed="failed",this.delineatorElement="-",this.delineatorModifier="-",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigClassNames),e.ConfigClassNames.prototype=Object.create(e.Base.prototype),e.ConfigClassNames.prototype.constructor=e.ConfigClassNames,e.ConfigData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.uidKey="",this.dirtyCheck=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigData),e.ConfigData.prototype=Object.create(e.Base.prototype),e.ConfigData.prototype.constructor=e.ConfigData,e.ConfigDebug=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.enable=!1,this.showWarnings=!0,this.fauxAsync=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigDebug),e.ConfigDebug.prototype=Object.create(e.Base.prototype),e.ConfigDebug.prototype.constructor=e.ConfigDebug,e.ConfigLayout=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.allowNestedTargets=!0,this.containerClassName="",this.siblingBefore=null,this.siblingAfter=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigLayout),e.ConfigLayout.prototype=Object.create(e.Base.prototype),e.ConfigLayout.prototype.constructor=e.ConfigLayout,e.ConfigLoad=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.filter="all",this.sort="default:asc",this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigLoad),e.ConfigLoad.prototype=Object.create(e.Base.prototype),e.ConfigLoad.prototype.constructor=e.ConfigLoad,e.ConfigSelectors=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.target=".mix",this.control="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigSelectors),e.ConfigSelectors.prototype=Object.create(e.Base.prototype),e.ConfigSelectors.prototype.constructor=e.ConfigSelectors,e.ConfigRender=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.target=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigRender),e.ConfigRender.prototype=Object.create(e.Base.prototype),e.ConfigRender.prototype.constructor=e.ConfigRender,e.ConfigTemplates=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.ConfigTemplates),e.ConfigTemplates.prototype=Object.create(e.Base.prototype),e.ConfigTemplates.prototype.constructor=e.ConfigTemplates,e.Config=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.animation=new e.ConfigAnimation,this.behavior=new e.ConfigBehavior,this.callbacks=new e.ConfigCallbacks,this.controls=new e.ConfigControls,this.classNames=new e.ConfigClassNames,this.data=new e.ConfigData,this.debug=new e.ConfigDebug,this.layout=new e.ConfigLayout,this.load=new e.ConfigLoad,this.selectors=new e.ConfigSelectors,this.render=new e.ConfigRender,this.templates=new e.ConfigTemplates,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Config),e.Config.prototype=Object.create(e.Base.prototype),e.Config.prototype.constructor=e.Config,e.MixerDom=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.document=null,this.body=null,this.container=null,this.parent=null,this.targets=[],this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.MixerDom),e.MixerDom.prototype=Object.create(e.Base.prototype),e.MixerDom.prototype.constructor=e.MixerDom,e.UiClassNames=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.base="",this.active="",this.disabled="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.UiClassNames),e.UiClassNames.prototype=Object.create(e.Base.prototype),e.UiClassNames.prototype.constructor=e.UiClassNames,e.CommandDataset=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.dataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandDataset),e.CommandDataset.prototype=Object.create(e.Base.prototype),e.CommandDataset.prototype.constructor=e.CommandDataset,e.CommandMultimix=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.filter=null,this.sort=null,this.insert=null,this.remove=null,this.changeLayout=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandMultimix),e.CommandMultimix.prototype=Object.create(e.Base.prototype),e.CommandMultimix.prototype.constructor=e.CommandMultimix,e.CommandFilter=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.selector="",this.collection=null,this.action="show",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandFilter),e.CommandFilter.prototype=Object.create(e.Base.prototype),e.CommandFilter.prototype.constructor=e.CommandFilter,e.CommandSort=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.sortString="",this.attribute="",this.order="asc",this.collection=null,this.next=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandSort),e.CommandSort.prototype=Object.create(e.Base.prototype),e.CommandSort.prototype.constructor=e.CommandSort,e.CommandInsert=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.index=0,this.collection=[],this.position="before",this.sibling=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandInsert),e.CommandInsert.prototype=Object.create(e.Base.prototype),e.CommandInsert.prototype.constructor=e.CommandInsert,e.CommandRemove=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.targets=[],this.collection=[],this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandRemove),e.CommandRemove.prototype=Object.create(e.Base.prototype),e.CommandRemove.prototype.constructor=e.CommandRemove,e.CommandChangeLayout=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.containerClassName="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.CommandChangeLayout),e.CommandChangeLayout.prototype=Object.create(e.Base.prototype),e.CommandChangeLayout.prototype.constructor=e.CommandChangeLayout,e.ControlDefinition=function(t,a,i,o){e.Base.call(this),this.callActions("beforeConstruct"),this.type=t,this.selector=a,this.live=i||!1,this.parent=o||"",this.callActions("afterConstruct"),n.freeze(this),n.seal(this)},e.BaseStatic.call(e.ControlDefinition),e.ControlDefinition.prototype=Object.create(e.Base.prototype),e.ControlDefinition.prototype.constructor=e.ControlDefinition,e.controlDefinitions=[],e.controlDefinitions.push(new e.ControlDefinition("multimix","[data-filter][data-sort]")),e.controlDefinitions.push(new e.ControlDefinition("filter","[data-filter]")),e.controlDefinitions.push(new e.ControlDefinition("sort","[data-sort]")),e.controlDefinitions.push(new e.ControlDefinition("toggle","[data-toggle]")),e.Control=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.selector="",this.bound=[],this.pending=-1,this.type="",this.status="inactive",this.filter="",this.sort="",this.canDisable=!1,this.handler=null,this.classNames=new e.UiClassNames,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Control),e.Control.prototype=Object.create(e.Base.prototype),n.extend(e.Control.prototype,{constructor:e.Control,init:function(t,n,a){var i=this;if(this.callActions("beforeInit",arguments),i.el=t,i.type=n,i.selector=a,i.selector)i.status="live";else switch(i.canDisable="boolean"==typeof i.el.disable,i.type){case"filter":i.filter=i.el.getAttribute("data-filter");break;case"toggle":i.filter=i.el.getAttribute("data-toggle");break;case"sort":i.sort=i.el.getAttribute("data-sort");break;case"multimix":i.filter=i.el.getAttribute("data-filter"),i.sort=i.el.getAttribute("data-sort")}i.bindClick(),e.controls.push(i),this.callActions("afterInit",arguments)},isBound:function(t){var e=this,n=!1;return this.callActions("beforeIsBound",arguments),n=e.bound.indexOf(t)>-1,e.callFilters("afterIsBound",n,arguments)},addBinding:function(t){var e=this;this.callActions("beforeAddBinding",arguments),e.isBound()||e.bound.push(t),this.callActions("afterAddBinding",arguments)},removeBinding:function(t){var n=this,a=-1;this.callActions("beforeRemoveBinding",arguments),(a=n.bound.indexOf(t))>-1&&n.bound.splice(a,1),n.bound.length<1&&(n.unbindClick(),a=e.controls.indexOf(n),e.controls.splice(a,1),"active"===n.status&&n.renderStatus(n.el,"inactive")),this.callActions("afterRemoveBinding",arguments)},bindClick:function(){var t=this;this.callActions("beforeBindClick",arguments),t.handler=function(e){t.handleClick(e)},n.on(t.el,"click",t.handler),this.callActions("afterBindClick",arguments)},unbindClick:function(){var t=this;this.callActions("beforeUnbindClick",arguments),n.off(t.el,"click",t.handler),t.handler=null,this.callActions("afterUnbindClick",arguments)},handleClick:function(t){var a=this,i=null,o=null,r=!1,s=void 0,l={},c=null,u=[],f=-1;if(this.callActions("beforeHandleClick",arguments),this.pending=0,o=a.bound[0],i=a.selector?n.closestParent(t.target,o.config.selectors.control+a.selector,!0,o.dom.document):a.el,!i)return void a.callActions("afterHandleClick",arguments);switch(a.type){case"filter":l.filter=a.filter||i.getAttribute("data-filter");break;case"sort":l.sort=a.sort||i.getAttribute("data-sort");break;case"multimix":l.filter=a.filter||i.getAttribute("data-filter"),l.sort=a.sort||i.getAttribute("data-sort");break;case"toggle":l.filter=a.filter||i.getAttribute("data-toggle"),r="live"===a.status?n.hasClass(i,a.classNames.active):"active"===a.status}for(f=0;f<a.bound.length;f++)c=new e.CommandMultimix,n.extend(c,l),u.push(c);for(u=a.callFilters("commandsHandleClick",u,arguments),a.pending=a.bound.length,f=0;o=a.bound[f];f++)l=u[f],l&&(o.lastClicked||(o.lastClicked=i),e.events.fire("mixClick",o.dom.container,{state:o.state,instance:o,originalEvent:t,control:o.lastClicked},o.dom.document),"function"==typeof o.config.callbacks.onMixClick&&(s=o.config.callbacks.onMixClick.call(o.lastClicked,o.state,t,o),s===!1)||("toggle"===a.type?r?o.toggleOff(l.filter):o.toggleOn(l.filter):o.multimix(l)));this.callActions("afterHandleClick",arguments)},update:function(t,n){var a=this,i=new e.CommandMultimix;a.callActions("beforeUpdate",arguments),a.pending--,a.pending=Math.max(0,a.pending),a.pending>0||("live"===a.status?a.updateLive(t,n):(i.sort=a.sort,i.filter=a.filter,a.callFilters("actionsUpdate",i,arguments),a.parseStatusChange(a.el,t,i,n)),a.callActions("afterUpdate",arguments))},updateLive:function(t,n){var a=this,i=null,o=null,r=null,s=-1;if(a.callActions("beforeUpdateLive",arguments),a.el){for(i=a.el.querySelectorAll(a.selector),s=0;r=i[s];s++){switch(o=new e.CommandMultimix,a.type){case"filter":o.filter=r.getAttribute("data-filter");break;case"sort":o.sort=r.getAttribute("data-sort");break;case"multimix":o.filter=r.getAttribute("data-filter"),o.sort=r.getAttribute("data-sort");break;case"toggle":o.filter=r.getAttribute("data-toggle")}o=a.callFilters("actionsUpdateLive",o,arguments),a.parseStatusChange(r,t,o,n)}a.callActions("afterUpdateLive",arguments)}},parseStatusChange:function(t,e,n,a){var i=this,o="",r="",s=-1;switch(i.callActions("beforeParseStatusChange",arguments),i.type){case"filter":e.filter===n.filter?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"multimix":e.sort===n.sort&&e.filter===n.filter?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"sort":e.sort.match(/:asc/g)&&(o=e.sort.replace(/:asc/g,"")),e.sort===n.sort||o===n.sort?i.renderStatus(t,"active"):i.renderStatus(t,"inactive");break;case"toggle":for(a.length<1&&i.renderStatus(t,"inactive"),e.filter===n.filter&&i.renderStatus(t,"active"),s=0;s<a.length;s++){if(r=a[s],r===n.filter){i.renderStatus(t,"active");break}i.renderStatus(t,"inactive")}}i.callActions("afterParseStatusChange",arguments)},renderStatus:function(t,e){var a=this;switch(a.callActions("beforeRenderStatus",arguments),e){case"active":n.addClass(t,a.classNames.active),n.removeClass(t,a.classNames.disabled),a.canDisable&&(a.el.disabled=!1);break;case"inactive":n.removeClass(t,a.classNames.active),n.removeClass(t,a.classNames.disabled),a.canDisable&&(a.el.disabled=!1);break;case"disabled":a.canDisable&&(a.el.disabled=!0),n.addClass(t,a.classNames.disabled),n.removeClass(t,a.classNames.active)}"live"!==a.status&&(a.status=e),a.callActions("afterRenderStatus",arguments)}}),e.controls=[],e.StyleData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.x=0,this.y=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.marginRight=0,this.marginBottom=0,this.opacity=0,this.scale=new e.TransformData,this.translateX=new e.TransformData,this.translateY=new e.TransformData,this.translateZ=new e.TransformData,this.rotateX=new e.TransformData,this.rotateY=new e.TransformData,this.rotateZ=new e.TransformData,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.StyleData),e.StyleData.prototype=Object.create(e.Base.prototype),e.StyleData.prototype.constructor=e.StyleData,e.TransformData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.value=0,this.unit="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TransformData),e.TransformData.prototype=Object.create(e.Base.prototype),e.TransformData.prototype.constructor=e.TransformData,e.TransformDefaults=function(){e.StyleData.apply(this),this.callActions("beforeConstruct"),this.scale.value=.01,this.scale.unit="",this.translateX.value=20,this.translateX.unit="px",this.translateY.value=20,this.translateY.unit="px",this.translateZ.value=20,this.translateZ.unit="px",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateY.value=90,this.rotateY.unit="deg",this.rotateX.value=90,this.rotateX.unit="deg",this.rotateZ.value=180,this.rotateZ.unit="deg",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TransformDefaults),e.TransformDefaults.prototype=Object.create(e.StyleData.prototype),e.TransformDefaults.prototype.constructor=e.TransformDefaults,e.transformDefaults=new e.TransformDefaults,e.EventDetail=function(){this.state=null,this.futureState=null,this.instance=null,this.originalEvent=null},e.Events=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.mixStart=null,this.mixBusy=null,this.mixEnd=null,this.mixFail=null,this.mixClick=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Events),e.Events.prototype=Object.create(e.Base.prototype),e.Events.prototype.constructor=e.Events,e.Events.prototype.fire=function(t,a,i,o){var r=this,s=null,l=new e.EventDetail;if(r.callActions("beforeFire",arguments),"undefined"==typeof r[t])throw new Error('Event type "'+t+'" not found.');l.state=new e.State,n.extend(l.state,i.state),i.futureState&&(l.futureState=new e.State,n.extend(l.futureState,i.futureState)),l.instance=i.instance,i.originalEvent&&(l.originalEvent=i.originalEvent),s=n.getCustomEvent(t,l,o),r.callFilters("eventFire",s,arguments),a.dispatchEvent(s)},e.events=new e.Events,e.QueueItem=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.args=[],this.instruction=null,this.triggerElement=null,this.deferred=null,this.isToggling=!1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.QueueItem),e.QueueItem.prototype=Object.create(e.Base.prototype),e.QueueItem.prototype.constructor=e.QueueItem,e.Mixer=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.config=new e.Config,this.id="",this.isBusy=!1,this.isToggling=!1,this.incPadding=!0,this.controls=[],this.targets=[],this.origOrder=[],this.cache={},this.toggleArray=[],this.targetsMoved=0,this.targetsImmovable=0,this.targetsBound=0,this.targetsDone=0,this.staggerDuration=0,this.effectsIn=null,this.effectsOut=null,this.transformIn=[],this.transformOut=[],this.queue=[],this.state=null,this.lastOperation=null,
this.lastClicked=null,this.userCallback=null,this.userDeferred=null,this.dom=new e.MixerDom,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Mixer),e.Mixer.prototype=Object.create(e.Base.prototype),n.extend(e.Mixer.prototype,{constructor:e.Mixer,attach:function(a,i,o,r){var s=this,l=null,c=-1;for(s.callActions("beforeAttach",arguments),s.id=o,r&&n.extend(s.config,r,!0,!0),s.sanitizeConfig(),s.cacheDom(a,i),s.config.layout.containerClassName&&n.addClass(s.dom.container,s.config.layout.containerClassName),e.features.has.transitions||(s.config.animation.enable=!1),"undefined"==typeof t.console&&(s.config.debug.showWarnings=!1),s.config.data.uidKey&&(s.config.controls.enable=!1),s.indexTargets(),s.state=s.getInitialState(),c=0;l=s.lastOperation.toHide[c];c++)l.hide();s.config.controls.enable&&(s.initControls(),s.buildToggleArray(null,s.state),s.updateControls({filter:s.state.activeFilter,sort:s.state.activeSort})),s.parseEffects(),s.callActions("afterAttach",arguments)},sanitizeConfig:function(){var t=this;t.callActions("beforeSanitizeConfig",arguments),t.config.controls.scope=t.config.controls.scope.toLowerCase().trim(),t.config.controls.toggleLogic=t.config.controls.toggleLogic.toLowerCase().trim(),t.config.controls.toggleDefault=t.config.controls.toggleDefault.toLowerCase().trim(),t.config.animation.effects=t.config.animation.effects.trim(),t.callActions("afterSanitizeConfig",arguments)},getInitialState:function(){var t=this,n=new e.State,a=new e.Operation;if(t.callActions("beforeGetInitialState",arguments),n.activeContainerClassName=t.config.layout.containerClassName,t.config.load.dataset){if(!t.config.data.uidKey||"string"!=typeof t.config.data.uidKey)throw new TypeError(e.messages.errorConfigDataUidKeyNotSet());a.startDataset=a.newDataset=n.activeDataset=t.config.load.dataset.slice(),a.startContainerClassName=a.newContainerClassName=n.activeContainerClassName,a.show=t.targets.slice(),n=t.callFilters("stateGetInitialState",n,arguments)}else n.activeFilter=t.parseFilterArgs([t.config.load.filter]).command,n.activeSort=t.parseSortArgs([t.config.load.sort]).command,n.totalTargets=t.targets.length,n=t.callFilters("stateGetInitialState",n,arguments),n.activeSort.collection||n.activeSort.attribute||"random"===n.activeSort.order||"desc"===n.activeSort.order?(a.newSort=n.activeSort,t.sortOperation(a),t.printSort(!1,a),t.targets=a.newOrder):a.startOrder=a.newOrder=t.targets,a.startFilter=a.newFilter=n.activeFilter,a.startSort=a.newSort=n.activeSort,a.startContainerClassName=a.newContainerClassName=n.activeContainerClassName,"all"===a.newFilter.selector?a.newFilter.selector=t.config.selectors.target:"none"===a.newFilter.selector&&(a.newFilter.selector="");return a=t.callFilters("operationGetInitialState",a,[n]),t.lastOperation=a,a.newFilter&&t.filterOperation(a),n=t.buildState(a)},cacheDom:function(t,e){var n=this;n.callActions("beforeCacheDom",arguments),n.dom.document=e,n.dom.body=n.dom.document.querySelector("body"),n.dom.container=t,n.dom.parent=t,n.callActions("afterCacheDom",arguments)},indexTargets:function(){var t=this,a=null,i=null,o=null,r=-1;if(t.callActions("beforeIndexTargets",arguments),t.dom.targets=t.config.layout.allowNestedTargets?t.dom.container.querySelectorAll(t.config.selectors.target):n.children(t.dom.container,t.config.selectors.target,t.dom.document),t.dom.targets=n.arrayFromList(t.dom.targets),t.targets=[],(o=t.config.load.dataset)&&o.length!==t.dom.targets.length)throw new Error(e.messages.errorDatasetPrerenderedMismatch());if(t.dom.targets.length){for(r=0;i=t.dom.targets[r];r++)a=new e.Target,a.init(i,t,o?o[r]:void 0),a.isInDom=!0,t.targets.push(a);t.dom.parent=t.dom.targets[0].parentElement===t.dom.container?t.dom.container:t.dom.targets[0].parentElement}t.origOrder=t.targets,t.callActions("afterIndexTargets",arguments)},initControls:function(){var t=this,n="",a=null,i=null,o=null,r=null,s=null,l=-1,c=-1;switch(t.callActions("beforeInitControls",arguments),t.config.controls.scope){case"local":o=t.dom.container;break;case"global":o=t.dom.document;break;default:throw new Error(e.messages.errorConfigInvalidControlsScope())}for(l=0;n=e.controlDefinitions[l];l++)if(t.config.controls.live||n.live){if(n.parent){if(r=t.dom[n.parent],!r||r.length<0)continue;"number"!=typeof r.length&&(r=[r])}else r=[o];for(c=0;i=r[c];c++)s=t.getControl(i,n.type,n.selector),t.controls.push(s)}else for(a=o.querySelectorAll(t.config.selectors.control+n.selector),c=0;i=a[c];c++)s=t.getControl(i,n.type,""),s&&t.controls.push(s);t.callActions("afterInitControls",arguments)},getControl:function(t,a,i){var o=this,r=null,s=-1;if(o.callActions("beforeGetControl",arguments),!i)for(s=0;r=e.controls[s];s++){if(r.el===t&&r.isBound(o))return o.callFilters("controlGetControl",null,arguments);if(r.el===t&&r.type===a&&r.selector===i)return r.addBinding(o),o.callFilters("controlGetControl",r,arguments)}return r=new e.Control,r.init(t,a,i),r.classNames.base=n.getClassname(o.config.classNames,a),r.classNames.active=n.getClassname(o.config.classNames,a,o.config.classNames.modifierActive),r.classNames.disabled=n.getClassname(o.config.classNames,a,o.config.classNames.modifierDisabled),r.addBinding(o),o.callFilters("controlGetControl",r,arguments)},getToggleSelector:function(){var t=this,e="or"===t.config.controls.toggleLogic?", ":"",a="";return t.callActions("beforeGetToggleSelector",arguments),t.toggleArray=n.clean(t.toggleArray),a=t.toggleArray.join(e),""===a&&(a=t.config.controls.toggleDefault),t.callFilters("selectorGetToggleSelector",a,arguments)},buildToggleArray:function(t,e){var a=this,i="";if(a.callActions("beforeBuildToggleArray",arguments),t&&t.filter)i=t.filter.selector.replace(/\s/g,"");else{if(!e)return;i=e.activeFilter.selector.replace(/\s/g,"")}i!==a.config.selectors.target&&"all"!==i||(i=""),"or"===a.config.controls.toggleLogic?a.toggleArray=i.split(","):a.toggleArray=a.splitCompoundSelector(i),a.toggleArray=n.clean(a.toggleArray),a.callActions("afterBuildToggleArray",arguments)},splitCompoundSelector:function(t){var e=t.split(/([\.\[])/g),n=[],a="",i=-1;for(""===e[0]&&e.shift(),i=0;i<e.length;i++)i%2===0&&(a=""),a+=e[i],i%2!==0&&n.push(a);return n},updateControls:function(t){var a=this,i=null,o=new e.CommandMultimix,r=-1;for(a.callActions("beforeUpdateControls",arguments),t.filter?o.filter=t.filter.selector:o.filter=a.state.activeFilter.selector,t.sort?o.sort=a.buildSortString(t.sort):o.sort=a.buildSortString(a.state.activeSort),o.filter===a.config.selectors.target&&(o.filter="all"),""===o.filter&&(o.filter="none"),n.freeze(o),r=0;i=a.controls[r];r++)i.update(o,a.toggleArray);a.callActions("afterUpdateControls",arguments)},buildSortString:function(t){var e=this,n="";return n+=t.sortString,t.next&&(n+=" "+e.buildSortString(t.next)),n},insertTargets:function(t,a){var i=this,o=null,r=-1,s=null,l=null,c=null,u=-1;if(i.callActions("beforeInsertTargets",arguments),"undefined"==typeof t.index&&(t.index=0),o=i.getNextSibling(t.index,t.sibling,t.position),s=i.dom.document.createDocumentFragment(),r=o?n.index(o,i.config.selectors.target):i.targets.length,t.collection){for(u=0;c=t.collection[u];u++){if(i.dom.targets.indexOf(c)>-1)throw new Error(e.messages.errorInsertPreexistingElement());c.style.display="none",s.appendChild(c),s.appendChild(i.dom.document.createTextNode(" ")),n.isElement(c,i.dom.document)&&c.matches(i.config.selectors.target)&&(l=new e.Target,l.init(c,i),l.isInDom=!0,i.targets.splice(r,0,l),r++)}i.dom.parent.insertBefore(s,o)}a.startOrder=i.origOrder=i.targets,i.callActions("afterInsertTargets",arguments)},getNextSibling:function(t,e,n){var a=this,i=null;return t=Math.max(t,0),e&&"before"===n?i=e:e&&"after"===n?i=e.nextElementSibling||null:a.targets.length>0&&"undefined"!=typeof t?i=t<a.targets.length||!a.targets.length?a.targets[t].dom.el:a.targets[a.targets.length-1].dom.el.nextElementSibling:0===a.targets.length&&a.dom.parent.children.length>0&&(a.config.layout.siblingAfter?i=a.config.layout.siblingAfter:a.config.layout.siblingBefore?i=a.config.layout.siblingBefore.nextElementSibling:a.dom.parent.children[0]),a.callFilters("elementGetNextSibling",i,arguments)},filterOperation:function(t){var e=this,n=!1,a=-1,i="",o=null,r=-1;for(e.callActions("beforeFilterOperation",arguments),i=t.newFilter.action,r=0;o=t.newOrder[r];r++)n=t.newFilter.collection?t.newFilter.collection.indexOf(o.dom.el)>-1:""!==t.newFilter.selector&&o.dom.el.matches(t.newFilter.selector),e.evaluateHideShow(n,o,i,t);if(t.toRemove.length)for(r=0;o=t.show[r];r++)t.toRemove.indexOf(o)>-1&&(t.show.splice(r,1),(a=t.toShow.indexOf(o))>-1&&t.toShow.splice(a,1),t.toHide.push(o),t.hide.push(o),r--);t.matching=t.show.slice(),0===t.show.length&&""!==t.newFilter.selector&&0!==e.targets.length&&(t.hasFailed=!0),e.callActions("afterFilterOperation",arguments)},evaluateHideShow:function(t,e,n,a){var i=this,o=!1,r=Array.prototype.slice.call(arguments,1);o=i.callFilters("testResultEvaluateHideShow",t,r),i.callActions("beforeEvaluateHideShow",arguments),o===!0&&"show"===n||o===!1&&"hide"===n?(a.show.push(e),!e.isShown&&a.toShow.push(e)):(a.hide.push(e),e.isShown&&a.toHide.push(e)),i.callActions("afterEvaluateHideShow",arguments)},sortOperation:function(t){var a=this,i=[],o=null,r=null,s=-1;if(a.callActions("beforeSortOperation",arguments),t.startOrder=a.targets,t.newSort.collection){for(i=[],s=0;r=t.newSort.collection[s];s++){if(a.dom.targets.indexOf(r)<0)throw new Error(e.messages.errorSortNonExistentElement());o=new e.Target,o.init(r,a),o.isInDom=!0,i.push(o)}t.newOrder=i}else"random"===t.newSort.order?t.newOrder=n.arrayShuffle(t.startOrder):""===t.newSort.attribute?(t.newOrder=a.origOrder.slice(),"desc"===t.newSort.order&&t.newOrder.reverse()):(t.newOrder=t.startOrder.slice(),t.newOrder.sort(function(e,n){return a.compare(e,n,t.newSort)}));n.isEqualArray(t.newOrder,t.startOrder)&&(t.willSort=!1),a.callActions("afterSortOperation",arguments)},compare:function(t,e,n){var a=this,i=n.order,o=a.getAttributeValue(t,n.attribute),r=a.getAttributeValue(e,n.attribute);return isNaN(1*o)||isNaN(1*r)?(o=o.toLowerCase(),r=r.toLowerCase()):(o=1*o,r=1*r),o<r?"asc"===i?-1:1:o>r?"asc"===i?1:-1:o===r&&n.next?a.compare(t,e,n.next):0},getAttributeValue:function(t,n){var a=this,i="";return i=t.dom.el.getAttribute("data-"+n),null===i&&a.config.debug.showWarnings&&console.warn(e.messages.warningInconsistentSortingAttributes({attribute:"data-"+n})),a.callFilters("valueGetAttributeValue",i||0,arguments)},printSort:function(e,a){var i=this,o=e?a.newOrder:a.startOrder,r=e?a.startOrder:a.newOrder,s=o.length?o[o.length-1].dom.el.nextElementSibling:null,l=t.document.createDocumentFragment(),c=null,u=null,f=null,h=-1;for(i.callActions("beforePrintSort",arguments),h=0;u=o[h];h++)f=u.dom.el,"absolute"!==f.style.position&&(n.removeWhitespace(f.previousSibling),f.parentElement.removeChild(f));for(c=s?s.previousSibling:i.dom.parent.lastChild,c&&"#text"===c.nodeName&&n.removeWhitespace(c),h=0;u=r[h];h++)f=u.dom.el,n.isElement(l.lastChild)&&l.appendChild(t.document.createTextNode(" ")),l.appendChild(f);i.dom.parent.firstChild&&i.dom.parent.firstChild!==s&&l.insertBefore(t.document.createTextNode(" "),l.childNodes[0]),s?(l.appendChild(t.document.createTextNode(" ")),i.dom.parent.insertBefore(l,s)):i.dom.parent.appendChild(l),i.callActions("afterPrintSort",arguments)},parseSortString:function(t,a){var i=this,o=t.split(" "),r=a,s=[],l=-1;for(l=0;l<o.length;l++){switch(s=o[l].split(":"),r.sortString=o[l],r.attribute=n.dashCase(s[0]),r.order=s[1]||"asc",r.attribute){case"default":r.attribute="";break;case"random":r.attribute="",r.order="random"}if(!r.attribute||"random"===r.order)break;l<o.length-1&&(r.next=new e.CommandSort,n.freeze(r),r=r.next)}return i.callFilters("commandsParseSort",a,arguments)},parseEffects:function(){var t=this,n="",a=t.config.animation.effectsIn||t.config.animation.effects,i=t.config.animation.effectsOut||t.config.animation.effects;t.callActions("beforeParseEffects",arguments),t.effectsIn=new e.StyleData,t.effectsOut=new e.StyleData,t.transformIn=[],t.transformOut=[],t.effectsIn.opacity=t.effectsOut.opacity=1,t.parseEffect("fade",a,t.effectsIn,t.transformIn),t.parseEffect("fade",i,t.effectsOut,t.transformOut,!0);for(n in e.transformDefaults)e.transformDefaults[n]instanceof e.TransformData&&(t.parseEffect(n,a,t.effectsIn,t.transformIn),t.parseEffect(n,i,t.effectsOut,t.transformOut,!0));t.parseEffect("stagger",a,t.effectsIn,t.transformIn),t.parseEffect("stagger",i,t.effectsOut,t.transformOut,!0),t.callActions("afterParseEffects",arguments)},parseEffect:function(t,n,a,i,o){var r=this,s=/\(([^)]+)\)/,l=-1,c="",u=[],f="",h=["%","px","em","rem","vh","vw","deg"],d="",m=-1;if(r.callActions("beforeParseEffect",arguments),"string"!=typeof n)throw new TypeError(e.messages.errorConfigInvalidAnimationEffects());if(n.indexOf(t)<0)return void("stagger"===t&&(r.staggerDuration=0));switch(l=n.indexOf(t+"("),l>-1&&(c=n.substring(l),u=s.exec(c),f=u[1]),t){case"fade":a.opacity=f?parseFloat(f):0;break;case"stagger":r.staggerDuration=f?parseFloat(f):100;break;default:if(o&&r.config.animation.reverseOut&&"scale"!==t?a[t].value=(f?parseFloat(f):e.transformDefaults[t].value)*-1:a[t].value=f?parseFloat(f):e.transformDefaults[t].value,f){for(m=0;d=h[m];m++)if(f.indexOf(d)>-1){a[t].unit=d;break}}else a[t].unit=e.transformDefaults[t].unit;i.push(t+"("+a[t].value+a[t].unit+")")}r.callActions("afterParseEffect",arguments)},buildState:function(t){var n=this,a=new e.State,i=null,o=-1;for(n.callActions("beforeBuildState",arguments),o=0;i=n.targets[o];o++)(!t.toRemove.length||t.toRemove.indexOf(i)<0)&&a.targets.push(i.dom.el);for(o=0;i=t.matching[o];o++)a.matching.push(i.dom.el);for(o=0;i=t.show[o];o++)a.show.push(i.dom.el);for(o=0;i=t.hide[o];o++)(!t.toRemove.length||t.toRemove.indexOf(i)<0)&&a.hide.push(i.dom.el);return a.id=n.id,a.container=n.dom.container,a.activeFilter=t.newFilter,a.activeSort=t.newSort,a.activeDataset=t.newDataset,a.activeContainerClassName=t.newContainerClassName,a.hasFailed=t.hasFailed,a.totalTargets=n.targets.length,a.totalShow=t.show.length,a.totalHide=t.hide.length,a.totalMatching=t.matching.length,a.triggerElement=t.triggerElement,n.callFilters("stateBuildState",a,arguments)},goMix:function(a,i){var o=this,r=null;return o.callActions("beforeGoMix",arguments),o.config.animation.duration&&o.config.animation.effects&&n.isVisible(o.dom.container)||(a=!1),i.toShow.length||i.toHide.length||i.willSort||i.willChangeLayout||(a=!1),i.startState.show.length||i.show.length||(a=!1),e.events.fire("mixStart",o.dom.container,{state:i.startState,futureState:i.newState,instance:o},o.dom.document),"function"==typeof o.config.callbacks.onMixStart&&o.config.callbacks.onMixStart.call(o.dom.container,i.startState,i.newState,o),n.removeClass(o.dom.container,n.getClassname(o.config.classNames,"container",o.config.classNames.modifierFailed)),r=o.userDeferred?o.userDeferred:o.userDeferred=n.defer(e.libraries),o.isBusy=!0,a&&e.features.has.transitions?(t.pageYOffset!==i.docState.scrollTop&&t.scrollTo(i.docState.scrollLeft,i.docState.scrollTop),o.config.animation.applyPerspective&&(o.dom.parent.style[e.features.perspectiveProp]=o.config.animation.perspectiveDistance,o.dom.parent.style[e.features.perspectiveOriginProp]=o.config.animation.perspectiveOrigin),o.config.animation.animateResizeContainer&&i.startHeight!==i.newHeight&&i.viewportDeltaY!==i.startHeight-i.newHeight&&(o.dom.parent.style.height=i.startHeight+"px"),o.config.animation.animateResizeContainer&&i.startWidth!==i.newWidth&&i.viewportDeltaX!==i.startWidth-i.newWidth&&(o.dom.parent.style.width=i.startWidth+"px"),i.startHeight===i.newHeight&&(o.dom.parent.style.height=i.startHeight+"px"),i.startWidth===i.newWidth&&(o.dom.parent.style.width=i.startWidth+"px"),i.startHeight===i.newHeight&&i.startWidth===i.newWidth&&(o.dom.parent.style.overflow="hidden"),requestAnimationFrame(function(){o.moveTargets(i)}),o.callFilters("promiseGoMix",r.promise,arguments)):(o.config.debug.fauxAsync?setTimeout(function(){o.cleanUp(i)},o.config.animation.duration):o.cleanUp(i),o.callFilters("promiseGoMix",r.promise,arguments))},getStartMixData:function(n){var a=this,i=t.getComputedStyle(a.dom.parent),o=a.dom.parent.getBoundingClientRect(),r=null,s={},l=-1,c=i[e.features.boxSizingProp];for(a.incPadding="border-box"===c,a.callActions("beforeGetStartMixData",arguments),l=0;r=n.show[l];l++)s=r.getPosData(),n.showPosData[l]={startPosData:s};for(l=0;r=n.toHide[l];l++)s=r.getPosData(),n.toHidePosData[l]={startPosData:s};n.startX=o.left,n.startY=o.top,n.startHeight=a.incPadding?o.height:o.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTop)-parseFloat(i.borderBottom),n.startWidth=a.incPadding?o.width:o.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeft)-parseFloat(i.borderRight),a.callActions("afterGetStartMixData",arguments)},setInter:function(t){var e=this,a=null,i=-1;for(e.callActions("beforeSetInter",arguments),e.config.animation.clampHeight&&(e.dom.parent.style.height=t.startHeight+"px",e.dom.parent.style.overflow="hidden"),e.config.animation.clampWidth&&(e.dom.parent.style.width=t.startWidth+"px",e.dom.parent.style.overflow="hidden"),i=0;a=t.toShow[i];i++)a.show();t.willChangeLayout&&(n.removeClass(e.dom.container,t.startContainerClassName),n.addClass(e.dom.container,t.newContainerClassName)),e.callActions("afterSetInter",arguments)},getInterMixData:function(t){var e=this,n=null,a=-1;for(e.callActions("beforeGetInterMixData",arguments),a=0;n=t.show[a];a++)t.showPosData[a].interPosData=n.getPosData();for(a=0;n=t.toHide[a];a++)t.toHidePosData[a].interPosData=n.getPosData();e.callActions("afterGetInterMixData",arguments)},setFinal:function(t){var e=this,n=null,a=-1;for(e.callActions("beforeSetFinal",arguments),t.willSort&&e.printSort(!1,t),a=0;n=t.toHide[a];a++)n.hide();e.callActions("afterSetFinal",arguments)},getFinalMixData:function(e){var a=this,i=null,o=null,r=null,s=-1;for(a.callActions("beforeGetFinalMixData",arguments),s=0;r=e.show[s];s++)e.showPosData[s].finalPosData=r.getPosData();for(s=0;r=e.toHide[s];s++)e.toHidePosData[s].finalPosData=r.getPosData();for((a.config.animation.clampHeight||a.config.animation.clampWidth)&&(a.dom.parent.style.height=a.dom.parent.style.width=a.dom.parent.style.overflow=""),a.incPadding||(i=t.getComputedStyle(a.dom.parent)),o=a.dom.parent.getBoundingClientRect(),e.newX=o.left,e.newY=o.top,e.newHeight=a.incPadding?o.height:o.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTop)-parseFloat(i.borderBottom),e.newWidth=a.incPadding?o.width:o.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeft)-parseFloat(i.borderRight),e.viewportDeltaX=e.docState.viewportWidth-this.dom.document.documentElement.clientWidth,e.viewportDeltaY=e.docState.viewportHeight-this.dom.document.documentElement.clientHeight,e.willSort&&a.printSort(!0,e),s=0;r=e.toShow[s];s++)r.hide();for(s=0;r=e.toHide[s];s++)r.show();e.willChangeLayout&&(n.removeClass(a.dom.container,e.newContainerClassName),n.addClass(a.dom.container,a.config.layout.containerClassName)),a.callActions("afterGetFinalMixData",arguments)},getTweenData:function(t){var n=this,a=null,i=null,o=Object.getOwnPropertyNames(n.effectsIn),r="",s=null,l=-1,c=-1,u=-1,f=-1;for(n.callActions("beforeGetTweenData",arguments),u=0;a=t.show[u];u++)for(i=t.showPosData[u],i.posIn=new e.StyleData,i.posOut=new e.StyleData,i.tweenData=new e.StyleData,a.isShown?(i.posIn.x=i.startPosData.x-i.interPosData.x,i.posIn.y=i.startPosData.y-i.interPosData.y):i.posIn.x=i.posIn.y=0,i.posOut.x=i.finalPosData.x-i.interPosData.x,i.posOut.y=i.finalPosData.y-i.interPosData.y,i.posIn.opacity=a.isShown?1:n.effectsIn.opacity,i.posOut.opacity=1,i.tweenData.opacity=i.posOut.opacity-i.posIn.opacity,a.isShown||n.config.animation.nudge||(i.posIn.x=i.posOut.x,i.posIn.y=i.posOut.y),i.tweenData.x=i.posOut.x-i.posIn.x,i.tweenData.y=i.posOut.y-i.posIn.y,n.config.animation.animateResizeTargets&&(i.posIn.width=i.startPosData.width,i.posIn.height=i.startPosData.height,l=(i.startPosData.width||i.finalPosData.width)-i.interPosData.width,i.posIn.marginRight=i.startPosData.marginRight-l,c=(i.startPosData.height||i.finalPosData.height)-i.interPosData.height,i.posIn.marginBottom=i.startPosData.marginBottom-c,i.posOut.width=i.finalPosData.width,i.posOut.height=i.finalPosData.height,l=(i.finalPosData.width||i.startPosData.width)-i.interPosData.width,i.posOut.marginRight=i.finalPosData.marginRight-l,c=(i.finalPosData.height||i.startPosData.height)-i.interPosData.height,i.posOut.marginBottom=i.finalPosData.marginBottom-c,i.tweenData.width=i.posOut.width-i.posIn.width,i.tweenData.height=i.posOut.height-i.posIn.height,i.tweenData.marginRight=i.posOut.marginRight-i.posIn.marginRight,i.tweenData.marginBottom=i.posOut.marginBottom-i.posIn.marginBottom),f=0;r=o[f];f++)s=n.effectsIn[r],s instanceof e.TransformData&&s.value&&(i.posIn[r].value=s.value,i.posOut[r].value=0,i.tweenData[r].value=i.posOut[r].value-i.posIn[r].value,i.posIn[r].unit=i.posOut[r].unit=i.tweenData[r].unit=s.unit);for(u=0;a=t.toHide[u];u++)for(i=t.toHidePosData[u],i.posIn=new e.StyleData,i.posOut=new e.StyleData,i.tweenData=new e.StyleData,i.posIn.x=a.isShown?i.startPosData.x-i.interPosData.x:0,i.posIn.y=a.isShown?i.startPosData.y-i.interPosData.y:0,i.posOut.x=n.config.animation.nudge?0:i.posIn.x,i.posOut.y=n.config.animation.nudge?0:i.posIn.y,i.tweenData.x=i.posOut.x-i.posIn.x,i.tweenData.y=i.posOut.y-i.posIn.y,n.config.animation.animateResizeTargets&&(i.posIn.width=i.startPosData.width,i.posIn.height=i.startPosData.height,l=i.startPosData.width-i.interPosData.width,i.posIn.marginRight=i.startPosData.marginRight-l,c=i.startPosData.height-i.interPosData.height,i.posIn.marginBottom=i.startPosData.marginBottom-c),i.posIn.opacity=1,i.posOut.opacity=n.effectsOut.opacity,i.tweenData.opacity=i.posOut.opacity-i.posIn.opacity,f=0;r=o[f];f++)s=n.effectsOut[r],s instanceof e.TransformData&&s.value&&(i.posIn[r].value=0,i.posOut[r].value=s.value,i.tweenData[r].value=i.posOut[r].value-i.posIn[r].value,i.posIn[r].unit=i.posOut[r].unit=i.tweenData[r].unit=s.unit);n.callActions("afterGetTweenData",arguments)},moveTargets:function(t){var a=this,i=null,o=null,r=null,s="",l=!1,c=-1,u=-1,f=a.checkProgress.bind(a);for(a.callActions("beforeMoveTargets",arguments),u=0;i=t.show[u];u++)o=new e.IMoveData,r=t.showPosData[u],s=i.isShown?"none":"show",l=a.willTransition(s,t.hasEffect,r.posIn,r.posOut),l&&c++,i.show(),o.posIn=r.posIn,o.posOut=r.posOut,o.statusChange=s,o.staggerIndex=c,o.operation=t,o.callback=l?f:null,i.move(o);for(u=0;i=t.toHide[u];u++)r=t.toHidePosData[u],o=new e.IMoveData,s="hide",l=a.willTransition(s,r.posIn,r.posOut),o.posIn=r.posIn,o.posOut=r.posOut,o.statusChange=s,o.staggerIndex=u,o.operation=t,o.callback=l?f:null,i.move(o);a.config.animation.animateResizeContainer&&(a.dom.parent.style[e.features.transitionProp]="height "+a.config.animation.duration+"ms ease, width "+a.config.animation.duration+"ms ease ",requestAnimationFrame(function(){t.startHeight!==t.newHeight&&t.viewportDeltaY!==t.startHeight-t.newHeight&&(a.dom.parent.style.height=t.newHeight+"px"),t.startWidth!==t.newWidth&&t.viewportDeltaX!==t.startWidth-t.newWidth&&(a.dom.parent.style.width=t.newWidth+"px")})),t.willChangeLayout&&(n.removeClass(a.dom.container,a.config.layout.ContainerClassName),n.addClass(a.dom.container,t.newContainerClassName)),a.callActions("afterMoveTargets",arguments)},hasEffect:function(){var t=this,e=["scale","translateX","translateY","translateZ","rotateX","rotateY","rotateZ"],n="",a=null,i=!1,o=-1,r=-1;if(1!==t.effectsIn.opacity)return t.callFilters("resultHasEffect",!0,arguments);for(r=0;n=e[r];r++)if(a=t.effectsIn[n],o="undefined"!==a.value?a.value:a,0!==o){i=!0;break}return t.callFilters("resultHasEffect",i,arguments)},willTransition:function(t,e,a,i){var o=this,r=!1;return r=!!n.isVisible(o.dom.container)&&(!!("none"!==t&&e||a.x!==i.x||a.y!==i.y)||!!o.config.animation.animateResizeTargets&&(a.width!==i.width||a.height!==i.height||a.marginRight!==i.marginRight||a.marginTop!==i.marginTop)),o.callFilters("resultWillTransition",r,arguments)},checkProgress:function(t){var e=this;e.targetsDone++,e.targetsBound===e.targetsDone&&e.cleanUp(t)},cleanUp:function(t){var a=this,i=null,o=null,r=null,s=null,l=-1;for(a.callActions("beforeCleanUp",arguments),a.targetsMoved=a.targetsImmovable=a.targetsBound=a.targetsDone=0,l=0;i=t.show[l];l++)i.cleanUp(),i.show();for(l=0;i=t.toHide[l];l++)i.cleanUp(),i.hide();if(t.willSort&&a.printSort(!1,t),a.dom.parent.style[e.features.transitionProp]=a.dom.parent.style.height=a.dom.parent.style.width=a.dom.parent.style.overflow=a.dom.parent.style[e.features.perspectiveProp]=a.dom.parent.style[e.features.perspectiveOriginProp]="",t.willChangeLayout&&(n.removeClass(a.dom.container,t.startContainerClassName),n.addClass(a.dom.container,t.newContainerClassName)),t.toRemove.length){for(l=0;i=a.targets[l];l++)t.toRemove.indexOf(i)>-1&&((o=i.dom.el.previousSibling)&&"#text"===o.nodeName&&(r=i.dom.el.nextSibling)&&"#text"===r.nodeName&&n.removeWhitespace(o),t.willSort||a.dom.parent.removeChild(i.dom.el),a.targets.splice(l,1),i.isInDom=!1,l--);a.origOrder=a.targets}t.willSort&&(a.targets=t.newOrder),a.state=t.newState,a.lastOperation=t,a.dom.targets=a.state.targets,e.events.fire("mixEnd",a.dom.container,{state:a.state,instance:a},a.dom.document),"function"==typeof a.config.callbacks.onMixEnd&&a.config.callbacks.onMixEnd.call(a.dom.container,a.state,a),t.hasFailed&&(e.events.fire("mixFail",a.dom.container,{state:a.state,instance:a},a.dom.document),"function"==typeof a.config.callbacks.onMixFail&&a.config.callbacks.onMixFail.call(a.dom.container,a.state,a),n.addClass(a.dom.container,n.getClassname(a.config.classNames,"container",a.config.classNames.modifierFailed))),"function"==typeof a.userCallback&&a.userCallback.call(a.dom.container,a.state,a),"function"==typeof a.userDeferred.resolve&&a.userDeferred.resolve(a.state),a.userCallback=null,a.userDeferred=null,a.lastClicked=null,a.isToggling=!1,a.isBusy=!1,a.queue.length&&(a.callActions("beforeReadQueueCleanUp",arguments),s=a.queue.shift(),a.userDeferred=s.deferred,a.isToggling=s.isToggling,a.lastClicked=s.triggerElement,s.instruction.command instanceof e.CommandMultimix?a.multimix.apply(a,s.args):a.dataset.apply(a,s.args)),a.callActions("afterCleanUp",arguments)},parseMultimixArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandMultimix,r=0;r<t.length;r++)o=t[r],null!==o&&("object"==typeof o?n.extend(i.command,o):"boolean"==typeof o?i.animate=o:"function"==typeof o&&(i.callback=o));return!i.command.insert||i.command.insert instanceof e.CommandInsert||(i.command.insert=a.parseInsertArgs([i.command.insert]).command),!i.command.remove||i.command.remove instanceof e.CommandRemove||(i.command.remove=a.parseRemoveArgs([i.command.remove]).command),!i.command.filter||i.command.filter instanceof e.CommandFilter||(i.command.filter=a.parseFilterArgs([i.command.filter]).command),!i.command.sort||i.command.sort instanceof e.CommandSort||(i.command.sort=a.parseSortArgs([i.command.sort]).command),!i.command.changeLayout||i.command.changeLayout instanceof e.CommandChangeLayout||(i.command.changeLayout=a.parseChangeLayoutArgs([i.command.changeLayout]).command),i=a.callFilters("instructionParseMultimixArgs",i,arguments),n.freeze(i),i},parseFilterArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandFilter,r=0;r<t.length;r++)o=t[r],"string"==typeof o?i.command.selector=o:null===o?i.command.collection=[]:"object"==typeof o&&n.isElement(o,a.dom.document)?i.command.collection=[o]:"object"==typeof o&&"undefined"!=typeof o.length?i.command.collection=n.arrayFromList(o):"object"==typeof o?n.extend(i.command,o):"boolean"==typeof o?i.animate=o:"function"==typeof o&&(i.callback=o);if(i.command.selector&&i.command.collection)throw new Error(e.messages.errorFilterInvalidArguments());return i=a.callFilters("instructionParseFilterArgs",i,arguments),n.freeze(i),i},parseSortArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r="",s=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandSort,s=0;s<t.length;s++)if(o=t[s],null!==o)switch(typeof o){case"string":r=o;break;case"object":o.length&&(i.command.collection=n.arrayFromList(o));break;case"boolean":i.animate=o;break;case"function":i.callback=o}return r&&(i.command=a.parseSortString(r,i.command)),i=a.callFilters("instructionParseSortArgs",i,arguments),n.freeze(i),i},parseInsertArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandInsert,r=0;r<t.length;r++)o=t[r],null!==o&&("number"==typeof o?i.command.index=o:"string"==typeof o&&["before","after"].indexOf(o)>-1?i.command.position=o:"string"==typeof o?i.command.collection=n.arrayFromList(n.createElement(o).childNodes):"object"==typeof o&&n.isElement(o,a.dom.document)?i.command.collection.length?i.command.sibling=o:i.command.collection=[o]:"object"==typeof o&&o.length?i.command.collection.length?i.command.sibling=o[0]:i.command.collection=o:"object"==typeof o&&o.childNodes&&o.childNodes.length?i.command.collection.length?i.command.sibling=o.childNodes[0]:i.command.collection=n.arrayFromList(o.childNodes):"object"==typeof o?n.extend(i.command,o):"boolean"==typeof o?i.animate=o:"function"==typeof o&&(i.callback=o));if(i.command.index&&i.command.sibling)throw new Error(e.messages.errorInsertInvalidArguments());return!i.command.collection.length&&a.config.debug.showWarnings&&console.warn(e.messages.warningInsertNoElements()),i=a.callFilters("instructionParseInsertArgs",i,arguments),n.freeze(i),i},parseRemoveArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=null,s=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandRemove,s=0;s<t.length;s++)if(r=t[s],null!==r)switch(typeof r){case"number":a.targets[r]&&(i.command.targets[0]=a.targets[r]);break;case"string":i.command.collection=n.arrayFromList(a.dom.parent.querySelectorAll(r));break;case"object":r&&r.length?i.command.collection=r:n.isElement(r,a.dom.document)?i.command.collection=[r]:n.extend(i.command,r);break;case"boolean":i.animate=r;break;case"function":i.callback=r}if(i.command.collection.length)for(s=0;o=a.targets[s];s++)i.command.collection.indexOf(o.dom.el)>-1&&i.command.targets.push(o);return!i.command.targets.length&&a.config.debug.showWarnings&&console.warn(e.messages.warningRemoveNoElements()),n.freeze(i),i},parseDatasetArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandDataset,r=0;r<t.length;r++)if(o=t[r],null!==o)switch(typeof o){case"object":Array.isArray(o)||"number"==typeof o.length?i.command.dataset=o:n.extend(i.command,o);break;case"boolean":i.animate=o;break;case"function":i.callback=o}return n.freeze(i),i},parseChangeLayoutArgs:function(t){var a=this,i=new e.UserInstruction,o=null,r=-1;for(i.animate=a.config.animation.enable,i.command=new e.CommandChangeLayout,r=0;r<t.length;r++)if(o=t[r],null!==o)switch(typeof o){case"string":i.command.containerClassName=o;break;case"object":n.extend(i.command,o);break;case"boolean":i.animate=o;break;case"function":i.callback=o}return n.freeze(i),i},queueMix:function(t){var a=this,i=null,o="";return a.callActions("beforeQueueMix",arguments),i=n.defer(e.libraries),a.config.animation.queue&&a.queue.length<a.config.animation.queueLimit?(t.deferred=i,a.queue.push(t),a.config.controls.enable&&(a.isToggling?(a.buildToggleArray(t.instruction.command),o=a.getToggleSelector(),a.updateControls({filter:{selector:o}})):a.updateControls(t.instruction.command))):(a.config.debug.showWarnings&&console.warn(e.messages.warningMultimixInstanceQueueFull()),i.resolve(a.state),e.events.fire("mixBusy",a.dom.container,{state:a.state,instance:a},a.dom.document),"function"==typeof a.config.callbacks.onMixBusy&&a.config.callbacks.onMixBusy.call(a.dom.container,a.state,a)),
a.callFilters("promiseQueueMix",i.promise,arguments)},getDataOperation:function(t){var a=this,i=new e.Operation,o=[];if(i=a.callFilters("operationUnmappedGetDataOperation",i,arguments),a.dom.targets.length&&!(o=a.state.activeDataset||[]).length)throw new Error(e.messages.errorDatasetNotSet());return i.id=n.randomHex(),i.startState=a.state,i.startDataset=o,i.newDataset=t.slice(),a.diffDatasets(i),i.startOrder=a.targets,i.newOrder=i.show,a.config.animation.enable&&(a.getStartMixData(i),a.setInter(i),i.docState=n.getDocumentState(a.dom.document),a.getInterMixData(i),a.setFinal(i),a.getFinalMixData(i),a.parseEffects(),i.hasEffect=a.hasEffect(),a.getTweenData(i)),a.targets=i.show.slice(),i.newState=a.buildState(i),Array.prototype.push.apply(a.targets,i.toRemove),i=a.callFilters("operationMappedGetDataOperation",i,arguments)},diffDatasets:function(t){var a=this,i=[],o=[],r=[],s=null,l=null,c=null,u=null,f=null,h={},d="",m=-1;for(a.callActions("beforeDiffDatasets",arguments),m=0;s=t.newDataset[m];m++){if("undefined"==typeof(d=s[a.config.data.uidKey])||d.toString().length<1)throw new TypeError(e.messages.errorDatasetInvalidUidKey({uidKey:a.config.data.uidKey}));if(h[d])throw new Error(e.messages.errorDatasetDuplicateUid({uid:d}));h[d]=!0,(l=a.cache[d])instanceof e.Target?(a.config.data.dirtyCheck&&!n.deepEquals(s,l.data)&&(c=l.render(s),l.data=s,c!==l.dom.el&&(l.isInDom&&(l.unbindEvents(),a.dom.parent.replaceChild(c,l.dom.el)),l.isShown||(c.style.display="none"),l.dom.el=c,l.isInDom&&l.bindEvents())),c=l.dom.el):(l=new e.Target,l.init(null,a,s),l.hide()),l.isInDom?(f=l.dom.el.nextElementSibling,o.push(d),u&&(u.lastElementChild&&u.appendChild(a.dom.document.createTextNode(" ")),a.insertDatasetFrag(u,l.dom.el,r),u=null)):(u||(u=a.dom.document.createDocumentFragment()),u.lastElementChild&&u.appendChild(a.dom.document.createTextNode(" ")),u.appendChild(l.dom.el),l.isInDom=!0,l.unbindEvents(),l.bindEvents(),l.hide(),t.toShow.push(l),r.push(l)),t.show.push(l)}for(u&&(f=f||a.config.layout.siblingAfter,f&&u.appendChild(a.dom.document.createTextNode(" ")),a.insertDatasetFrag(u,f,r)),m=0;s=t.startDataset[m];m++)d=s[a.config.data.uidKey],l=a.cache[d],t.show.indexOf(l)<0?(t.hide.push(l),t.toHide.push(l),t.toRemove.push(l)):i.push(d);n.isEqualArray(i,o)||(t.willSort=!0),a.callActions("afterDiffDatasets",arguments)},insertDatasetFrag:function(t,e,a){var i=this,o=e?n.arrayFromList(i.dom.parent.children).indexOf(e):i.targets.length;for(i.dom.parent.insertBefore(t,e);a.length;)i.targets.splice(o,0,a.shift()),o++},willSort:function(t,e){var n=this,a=!1;return a=!!(n.config.behavior.liveSort||"random"===t.order||t.attribute!==e.attribute||t.order!==e.order||t.collection!==e.collection||null===t.next&&e.next||t.next&&null===e.next)||!(!t.next||!e.next)&&n.willSort(t.next,e.next),n.callFilters("resultWillSort",a,arguments)},show:function(){var t=this;return t.filter("all")},hide:function(){var t=this;return t.filter("none")},isMixing:function(){var t=this;return t.isBusy},filter:function(){var t=this,e=t.parseFilterArgs(arguments);return t.multimix({filter:e.command},e.animate,e.callback)},toggleOn:function(){var t=this,e=t.parseFilterArgs(arguments),n=e.command.selector,a="";return t.isToggling=!0,t.toggleArray.indexOf(n)<0&&t.toggleArray.push(n),a=t.getToggleSelector(),t.multimix({filter:a},e.animate,e.callback)},toggleOff:function(){var t=this,e=t.parseFilterArgs(arguments),n=e.command.selector,a=t.toggleArray.indexOf(n),i="";return t.isToggling=!0,a>-1&&t.toggleArray.splice(a,1),i=t.getToggleSelector(),t.multimix({filter:i},e.animate,e.callback)},sort:function(){var t=this,e=t.parseSortArgs(arguments);return t.multimix({sort:e.command},e.animate,e.callback)},changeLayout:function(){var t=this,e=t.parseChangeLayoutArgs(arguments);return t.multimix({changeLayout:e.command},e.animate,e.callback)},dataset:function(){var t=this,n=t.parseDatasetArgs(arguments),a=null,i=null,o=!1;return t.callActions("beforeDataset",arguments),t.isBusy?(i=new e.QueueItem,i.args=arguments,i.instruction=n,t.queueMix(i)):(n.callback&&(t.userCallback=n.callback),o=n.animate^t.config.animation.enable?n.animate:t.config.animation.enable,a=t.getDataOperation(n.command.dataset),t.goMix(o,a))},multimix:function(){var t=this,n=null,a=!1,i=null,o=t.parseMultimixArgs(arguments);return t.callActions("beforeMultimix",arguments),t.isBusy?(i=new e.QueueItem,i.args=arguments,i.instruction=o,i.triggerElement=t.lastClicked,i.isToggling=t.isToggling,t.queueMix(i)):(n=t.getOperation(o.command),t.config.controls.enable&&(o.command.filter&&!t.isToggling&&(t.toggleArray.length=0,t.buildToggleArray(n.command)),t.queue.length<1&&t.updateControls(n.command)),o.callback&&(t.userCallback=o.callback),a=o.animate^t.config.animation.enable?o.animate:t.config.animation.enable,t.callFilters("operationMultimix",n,arguments),t.goMix(a,n))},getOperation:function(t){var a=this,i=t.sort,o=t.filter,r=t.changeLayout,s=t.remove,l=t.insert,c=new e.Operation;return c=a.callFilters("operationUnmappedGetOperation",c,arguments),c.id=n.randomHex(),c.command=t,c.startState=a.state,c.triggerElement=a.lastClicked,a.isBusy?(a.config.debug.showWarnings&&console.warn(e.messages.warningGetOperationInstanceBusy()),null):(l&&a.insertTargets(l,c),s&&(c.toRemove=s.targets),c.startSort=c.newSort=c.startState.activeSort,c.startOrder=c.newOrder=a.targets,i&&(c.startSort=c.startState.activeSort,c.newSort=i,c.willSort=a.willSort(i,c.startState.activeSort),c.willSort&&a.sortOperation(c)),c.startFilter=c.startState.activeFilter,o?c.newFilter=o:c.newFilter=n.extend(new e.CommandFilter,c.startFilter),"all"===c.newFilter.selector?c.newFilter.selector=a.config.selectors.target:"none"===c.newFilter.selector&&(c.newFilter.selector=""),a.filterOperation(c),c.startContainerClassName=c.startState.activeContainerClassName,r?(c.newContainerClassName=r.containerClassName,c.newContainerClassName!==c.startContainerClassName&&(c.willChangeLayout=!0)):c.newContainerClassName=c.startContainerClassName,a.config.animation.enable&&(a.getStartMixData(c),a.setInter(c),c.docState=n.getDocumentState(a.dom.document),a.getInterMixData(c),a.setFinal(c),a.getFinalMixData(c),a.parseEffects(),c.hasEffect=a.hasEffect(),a.getTweenData(c)),c.willSort&&(a.targets=c.newOrder),c.newState=a.buildState(c),a.callFilters("operationMappedGetOperation",c,arguments))},tween:function(t,e){var n=null,a=null,i=-1,o=-1;for(e=Math.min(e,1),e=Math.max(e,0),o=0;n=t.show[o];o++)a=t.showPosData[o],n.applyTween(a,e);for(o=0;n=t.hide[o];o++)n.isShown&&n.hide(),(i=t.toHide.indexOf(n))>-1&&(a=t.toHidePosData[i],n.isShown||n.show(),n.applyTween(a,e))},insert:function(){var t=this,e=t.parseInsertArgs(arguments);return t.multimix({insert:e.command},e.animate,e.callback)},insertBefore:function(){var t=this,e=t.parseInsertArgs(arguments);return t.insert(e.command.collection,"before",e.command.sibling,e.animate,e.callback)},insertAfter:function(){var t=this,e=t.parseInsertArgs(arguments);return t.insert(e.command.collection,"after",e.command.sibling,e.animate,e.callback)},prepend:function(){var t=this,e=t.parseInsertArgs(arguments);return t.insert(0,e.command.collection,e.animate,e.callback)},append:function(){var t=this,e=t.parseInsertArgs(arguments);return t.insert(t.state.totalTargets,e.command.collection,e.animate,e.callback)},remove:function(){var t=this,e=t.parseRemoveArgs(arguments);return t.multimix({remove:e.command},e.animate,e.callback)},getConfig:function(t){var e=this,a=null;return a=t?n.getProperty(e.config,t):e.config,e.callFilters("valueGetConfig",a,arguments)},configure:function(t){var e=this;e.callActions("beforeConfigure",arguments),n.extend(e.config,t,!0,!0),e.callActions("afterConfigure",arguments)},getState:function(){var t=this,a=null;return a=new e.State,n.extend(a,t.state),n.freeze(a),t.callFilters("stateGetState",a,arguments)},forceRefresh:function(){var t=this;t.indexTargets()},forceRender:function(){var t=this,e=null,n=null,a="";for(a in t.cache)e=t.cache[a],n=e.render(e.data),n!==e.dom.el&&(e.isInDom&&(e.unbindEvents(),t.dom.parent.replaceChild(n,e.dom.el)),e.isShown||(n.style.display="none"),e.dom.el=n,e.isInDom&&e.bindEvents());t.state=t.buildState(t.lastOperation)},destroy:function(t){var n=this,a=null,i=null,o=0;for(n.callActions("beforeDestroy",arguments),o=0;a=n.controls[o];o++)a.removeBinding(n);for(o=0;i=n.targets[o];o++)t&&i.show(),i.unbindEvents();n.dom.container.id.match(/^MixItUp/)&&n.dom.container.removeAttribute("id"),delete e.instances[n.id],n.callActions("afterDestroy",arguments)}}),e.IMoveData=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.posIn=null,this.posOut=null,this.operation=null,this.callback=null,this.statusChange="",this.duration=-1,this.staggerIndex=-1,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.IMoveData),e.IMoveData.prototype=Object.create(e.Base.prototype),e.IMoveData.prototype.constructor=e.IMoveData,e.TargetDom=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.el=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.TargetDom),e.TargetDom.prototype=Object.create(e.Base.prototype),e.TargetDom.prototype.constructor=e.TargetDom,e.Target=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.sortString="",this.mixer=null,this.callback=null,this.isShown=!1,this.isBound=!1,this.isExcluded=!1,this.isInDom=!1,this.handler=null,this.operation=null,this.data=null,this.dom=new e.TargetDom,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Target),e.Target.prototype=Object.create(e.Base.prototype),n.extend(e.Target.prototype,{constructor:e.Target,init:function(t,n,a){var i=this,o="";if(i.callActions("beforeInit",arguments),i.mixer=n,t||(t=i.render(a)),i.cacheDom(t),i.bindEvents(),"none"!==i.dom.el.style.display&&(i.isShown=!0),a&&n.config.data.uidKey){if("undefined"==typeof(o=a[n.config.data.uidKey])||o.toString().length<1)throw new TypeError(e.messages.errorDatasetInvalidUidKey({uidKey:n.config.data.uidKey}));i.id=o,i.data=a,n.cache[o]=i}i.callActions("afterInit",arguments)},render:function(t){var a=this,i=null,o=null,r=null,s="";if(a.callActions("beforeRender",arguments),i=a.callFilters("renderRender",a.mixer.config.render.target,arguments),"function"!=typeof i)throw new TypeError(e.messages.errorDatasetRendererNotSet());return s=i(t),s&&"object"==typeof s&&n.isElement(s)?o=s:"string"==typeof s&&(r=document.createElement("div"),r.innerHTML=s,o=r.firstElementChild),a.callFilters("elRender",o,arguments)},cacheDom:function(t){var e=this;e.callActions("beforeCacheDom",arguments),e.dom.el=t,e.callActions("afterCacheDom",arguments)},getSortString:function(t){var e=this,n=e.dom.el.getAttribute("data-"+t)||"";e.callActions("beforeGetSortString",arguments),n=isNaN(1*n)?n.toLowerCase():1*n,e.sortString=n,e.callActions("afterGetSortString",arguments)},show:function(){var t=this;t.callActions("beforeShow",arguments),t.isShown||(t.dom.el.style.display="",t.isShown=!0),t.callActions("afterShow",arguments)},hide:function(){var t=this;t.callActions("beforeHide",arguments),t.isShown&&(t.dom.el.style.display="none",t.isShown=!1),t.callActions("afterHide",arguments)},move:function(t){var e=this;e.callActions("beforeMove",arguments),e.isExcluded||e.mixer.targetsMoved++,e.applyStylesIn(t),requestAnimationFrame(function(){e.applyStylesOut(t)}),e.callActions("afterMove",arguments)},applyTween:function(t,n){var a=this,i="",o=null,r=t.posIn,s=[],l=new e.StyleData,c=-1;for(a.callActions("beforeApplyTween",arguments),l.x=r.x,l.y=r.y,0===n?a.hide():a.isShown||a.show(),c=0;i=e.features.TWEENABLE[c];c++)if(o=t.tweenData[i],"x"===i){if(!o)continue;l.x=r.x+o*n}else if("y"===i){if(!o)continue;l.y=r.y+o*n}else if(o instanceof e.TransformData){if(!o.value)continue;l[i].value=r[i].value+o.value*n,l[i].unit=o.unit,s.push(i+"("+l[i].value+o.unit+")")}else{if(!o)continue;l[i]=r[i]+o*n,a.dom.el.style[i]=l[i]}(l.x||l.y)&&s.unshift("translate("+l.x+"px, "+l.y+"px)"),s.length&&(a.dom.el.style[e.features.transformProp]=s.join(" ")),a.callActions("afterApplyTween",arguments)},applyStylesIn:function(t){var n=this,a=t.posIn,i=1!==n.mixer.effectsIn.opacity,o=[];n.callActions("beforeApplyStylesIn",arguments),o.push("translate("+a.x+"px, "+a.y+"px)"),n.mixer.config.animation.animateResizeTargets&&("show"!==t.statusChange&&(n.dom.el.style.width=a.width+"px",n.dom.el.style.height=a.height+"px"),n.dom.el.style.marginRight=a.marginRight+"px",n.dom.el.style.marginBottom=a.marginBottom+"px"),i&&(n.dom.el.style.opacity=a.opacity),"show"===t.statusChange&&(o=o.concat(n.mixer.transformIn)),n.dom.el.style[e.features.transformProp]=o.join(" "),n.callActions("afterApplyStylesIn",arguments)},applyStylesOut:function(t){var n=this,a=[],i=[],o=n.mixer.config.animation.animateResizeTargets,r="undefined"!=typeof n.mixer.effectsIn.opacity;if(n.callActions("beforeApplyStylesOut",arguments),a.push(n.writeTransitionRule(e.features.transformRule,t.staggerIndex)),"none"!==t.statusChange&&a.push(n.writeTransitionRule("opacity",t.staggerIndex,t.duration)),o&&(a.push(n.writeTransitionRule("width",t.staggerIndex,t.duration)),a.push(n.writeTransitionRule("height",t.staggerIndex,t.duration)),a.push(n.writeTransitionRule("margin",t.staggerIndex,t.duration))),!t.callback)return n.mixer.targetsImmovable++,void(n.mixer.targetsMoved===n.mixer.targetsImmovable&&n.mixer.cleanUp(t.operation));switch(n.operation=t.operation,n.callback=t.callback,!n.isExcluded&&n.mixer.targetsBound++,n.isBound=!0,n.applyTransition(a),o&&t.posOut.width>0&&t.posOut.height>0&&(n.dom.el.style.width=t.posOut.width+"px",n.dom.el.style.height=t.posOut.height+"px",n.dom.el.style.marginRight=t.posOut.marginRight+"px",n.dom.el.style.marginBottom=t.posOut.marginBottom+"px"),n.mixer.config.animation.nudge||"hide"!==t.statusChange||i.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),t.statusChange){case"hide":r&&(n.dom.el.style.opacity=n.mixer.effectsOut.opacity),i=i.concat(n.mixer.transformOut);break;case"show":r&&(n.dom.el.style.opacity=1)}(n.mixer.config.animation.nudge||!n.mixer.config.animation.nudge&&"hide"!==t.statusChange)&&i.push("translate("+t.posOut.x+"px, "+t.posOut.y+"px)"),n.dom.el.style[e.features.transformProp]=i.join(" "),n.callActions("afterApplyStylesOut",arguments)},writeTransitionRule:function(t,e,n){var a=this,i=a.getDelay(e),o="";return o=t+" "+(n>0?n:a.mixer.config.animation.duration)+"ms "+i+"ms "+("opacity"===t?"linear":a.mixer.config.animation.easing),a.callFilters("ruleWriteTransitionRule",o,arguments)},getDelay:function(t){var e=this,n=-1;return"function"==typeof e.mixer.config.animation.staggerSequence&&(t=e.mixer.config.animation.staggerSequence.call(e,t,e.state)),n=e.mixer.staggerDuration?t*e.mixer.staggerDuration:0,e.callFilters("delayGetDelay",n,arguments)},applyTransition:function(t){var n=this,a=t.join(", ");n.callActions("beforeApplyTransition",arguments),n.dom.el.style[e.features.transitionProp]=a,n.callActions("afterApplyTransition",arguments)},handleTransitionEnd:function(t){var e=this,n=t.propertyName,a=e.mixer.config.animation.animateResizeTargets;e.callActions("beforeHandleTransitionEnd",arguments),e.isBound&&t.target.matches(e.mixer.config.selectors.target)&&(n.indexOf("transform")>-1||n.indexOf("opacity")>-1||a&&n.indexOf("height")>-1||a&&n.indexOf("width")>-1||a&&n.indexOf("margin")>-1)&&(e.callback.call(e,e.operation),e.isBound=!1,e.callback=null,e.operation=null),e.callActions("afterHandleTransitionEnd",arguments)},eventBus:function(t){var e=this;switch(e.callActions("beforeEventBus",arguments),t.type){case"webkitTransitionEnd":case"transitionend":e.handleTransitionEnd(t)}e.callActions("afterEventBus",arguments)},unbindEvents:function(){var t=this;t.callActions("beforeUnbindEvents",arguments),n.off(t.dom.el,"webkitTransitionEnd",t.handler),n.off(t.dom.el,"transitionend",t.handler),t.callActions("afterUnbindEvents",arguments)},bindEvents:function(){var t=this,a="";t.callActions("beforeBindEvents",arguments),a="webkit"===e.features.transitionPrefix?"webkitTransitionEnd":"transitionend",t.handler=function(e){return t.eventBus(e)},n.on(t.dom.el,a,t.handler),t.callActions("afterBindEvents",arguments)},getPosData:function(n){var a=this,i={},o=null,r=new e.StyleData;return a.callActions("beforeGetPosData",arguments),r.x=a.dom.el.offsetLeft,r.y=a.dom.el.offsetTop,(a.mixer.config.animation.animateResizeTargets||n)&&(o=a.dom.el.getBoundingClientRect(),r.top=o.top,r.right=o.right,r.bottom=o.bottom,r.left=o.left,r.width=o.width,r.height=o.height),a.mixer.config.animation.animateResizeTargets&&(i=t.getComputedStyle(a.dom.el),r.marginBottom=parseFloat(i.marginBottom),r.marginRight=parseFloat(i.marginRight)),a.callFilters("posDataGetPosData",r,arguments)},cleanUp:function(){var t=this;t.callActions("beforeCleanUp",arguments),t.dom.el.style[e.features.transformProp]="",t.dom.el.style[e.features.transitionProp]="",t.dom.el.style.opacity="",t.mixer.config.animation.animateResizeTargets&&(t.dom.el.style.width="",t.dom.el.style.height="",t.dom.el.style.marginRight="",t.dom.el.style.marginBottom=""),t.callActions("afterCleanUp",arguments)}}),e.Collection=function(t){var e=null,a=-1;for(this.callActions("beforeConstruct"),a=0;e=t[a];a++)this[a]=e;this.length=t.length,this.callActions("afterConstruct"),n.freeze(this)},e.BaseStatic.call(e.Collection),e.Collection.prototype=Object.create(e.Base.prototype),n.extend(e.Collection.prototype,{constructor:e.Collection,mixitup:function(t){var a=this,i=null,o=Array.prototype.slice.call(arguments),r=[],s=-1;for(this.callActions("beforeMixitup"),o.shift(),s=0;i=a[s];s++)r.push(i[t].apply(i,o));return a.callFilters("promiseMixitup",n.all(r,e.libraries),arguments)}}),e.Operation=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.args=[],this.command=null,this.showPosData=[],this.toHidePosData=[],this.startState=null,this.newState=null,this.docState=null,this.willSort=!1,this.willChangeLayout=!1,this.hasEffect=!1,this.hasFailed=!1,this.triggerElement=null,this.show=[],this.hide=[],this.matching=[],this.toShow=[],this.toHide=[],this.toMove=[],this.toRemove=[],this.startOrder=[],this.newOrder=[],this.startSort=null,this.newSort=null,this.startFilter=null,this.newFilter=null,this.startDataset=null,this.newDataset=null,this.viewportDeltaX=0,this.viewportDeltaY=0,this.startX=0,this.startY=0,this.startHeight=0,this.startWidth=0,this.newX=0,this.newY=0,this.newHeight=0,this.newWidth=0,this.startContainerClassName="",this.startDisplay="",this.newContainerClassName="",this.newDisplay="",this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.Operation),e.Operation.prototype=Object.create(e.Base.prototype),e.Operation.prototype.constructor=e.Operation,e.State=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.id="",this.activeFilter=null,this.activeSort=null,this.activeContainerClassName="",this.container=null,this.targets=[],this.hide=[],this.show=[],this.matching=[],this.totalTargets=-1,this.totalShow=-1,this.totalHide=-1,this.totalMatching=-1,this.hasFailed=!1,this.triggerElement=null,this.activeDataset=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.State),e.State.prototype=Object.create(e.Base.prototype),e.State.prototype.constructor=e.State,e.UserInstruction=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.command={},this.animate=!1,this.callback=null,this.callActions("afterConstruct"),n.seal(this)},e.BaseStatic.call(e.UserInstruction),e.UserInstruction.prototype=Object.create(e.Base.prototype),e.UserInstruction.prototype.constructor=e.UserInstruction,e.Messages=function(){e.Base.call(this),this.callActions("beforeConstruct"),this.ERROR_FACTORY_INVALID_CONTAINER="[MixItUp] An invalid selector or element reference was passed to the mixitup factory function",this.ERROR_FACTORY_CONTAINER_NOT_FOUND="[MixItUp] The provided selector yielded no container element",this.ERROR_CONFIG_INVALID_ANIMATION_EFFECTS="[MixItUp] Invalid value for `animation.effects`",this.ERROR_CONFIG_INVALID_CONTROLS_SCOPE="[MixItUp] Invalid value for `controls.scope`",this.ERROR_CONFIG_INVALID_PROPERTY='[MixitUp] Invalid configuration object property "${erroneous}"${suggestion}',this.ERROR_CONFIG_INVALID_PROPERTY_SUGGESTION='. Did you mean "${probableMatch}"?',this.ERROR_CONFIG_DATA_UID_KEY_NOT_SET="[MixItUp] To use the dataset API, a UID key must be specified using `data.uidKey`",this.ERROR_DATASET_INVALID_UID_KEY='[MixItUp] The specified UID key "${uidKey}" is not present on one or more dataset items',this.ERROR_DATASET_DUPLICATE_UID='[MixItUp] The UID "${uid}" was found on two or more dataset items. UIDs must be unique.',this.ERROR_INSERT_INVALID_ARGUMENTS="[MixItUp] Please provider either an index or a sibling and position to insert, not both",this.ERROR_INSERT_PREEXISTING_ELEMENT="[MixItUp] An element to be inserted already exists in the container",this.ERROR_FILTER_INVALID_ARGUMENTS="[MixItUp] Please provide either a selector or collection `.filter()`, not both",this.ERROR_DATASET_NOT_SET="[MixItUp] To use the dataset API with pre-rendered targets, a starting dataset must be set using `load.dataset`",this.ERROR_DATASET_PRERENDERED_MISMATCH="[MixItUp] `load.dataset` does not match pre-rendered targets",this.ERROR_DATASET_RENDERER_NOT_SET="[MixItUp] To insert an element via the dataset API, a target renderer function must be provided to `render.target`",this.ERROR_SORT_NON_EXISTENT_ELEMENT="[MixItUp] An element to be sorted does not already exist in the container",this.WARNING_FACTORY_PREEXISTING_INSTANCE="[MixItUp] WARNING: This element already has an active MixItUp instance. The provided configuration object will be ignored. If you wish to perform additional methods on this instance, please create a reference.",this.WARNING_INSERT_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.insert()`",this.WARNING_REMOVE_NO_ELEMENTS="[MixItUp] WARNING: No valid elements were passed to `.remove()`",this.WARNING_MULTIMIX_INSTANCE_QUEUE_FULL="[MixItUp] WARNING: An operation was requested but the MixItUp instance was busy. The operation was rejected because the queue is full or queuing is disabled.",this.WARNING_GET_OPERATION_INSTANCE_BUSY="[MixItUp] WARNING: Operations can be be created while the MixItUp instance is busy.",this.WARNING_NO_PROMISE_IMPLEMENTATION="[MixItUp] WARNING: No Promise implementations could be found. If you wish to use promises with MixItUp please install an ES6 Promise polyfill.",this.WARNING_INCONSISTENT_SORTING_ATTRIBUTES='[MixItUp] WARNING: The requested sorting data attribute "${attribute}" was not present on one or more target elements which may product unexpected sort output',this.callActions("afterConstruct"),this.compileTemplates(),n.seal(this)},e.BaseStatic.call(e.Messages),e.Messages.prototype=Object.create(e.Base.prototype),e.Messages.prototype.constructor=e.Messages,e.Messages.prototype.compileTemplates=function(){var t="",e="";for(t in this)"string"==typeof(e=this[t])&&(this[n.camelCase(t)]=n.template(e))},e.messages=new e.Messages,e.Facade=function(t){e.Base.call(this),this.callActions("beforeConstruct",arguments),this.configure=t.configure.bind(t),this.show=t.show.bind(t),this.hide=t.hide.bind(t),this.filter=t.filter.bind(t),this.toggleOn=t.toggleOn.bind(t),this.toggleOff=t.toggleOff.bind(t),this.sort=t.sort.bind(t),this.changeLayout=t.changeLayout.bind(t),this.multimix=t.multimix.bind(t),this.dataset=t.dataset.bind(t),this.tween=t.tween.bind(t),this.insert=t.insert.bind(t),this.insertBefore=t.insertBefore.bind(t),this.insertAfter=t.insertAfter.bind(t),this.prepend=t.prepend.bind(t),this.append=t.append.bind(t),this.remove=t.remove.bind(t),this.destroy=t.destroy.bind(t),this.forceRefresh=t.forceRefresh.bind(t),this.forceRender=t.forceRender.bind(t),this.isMixing=t.isMixing.bind(t),this.getOperation=t.getOperation.bind(t),this.getConfig=t.getConfig.bind(t),this.getState=t.getState.bind(t),this.callActions("afterConstruct",arguments),n.freeze(this),n.seal(this)},e.BaseStatic.call(e.Facade),e.Facade.prototype=Object.create(e.Base.prototype),e.Facade.prototype.constructor=e.Facade,"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof t.mixitup&&"function"==typeof t.mixitup||(t.mixitup=e),e.BaseStatic.call(e.constructor),e.NAME="mixitup",e.CORE_VERSION="3.3.1"}(window);


(function ( $, window, document, undefined ) {
   
   var pluginName = "noData",

        defaults={
        	render: function(callback){
        		 
        	},
        	content:'Hin cha c d liu'
        };
    
      function Plugin( element, options ) {

        this.element = element;

        this.$elem = $(this.element);

        this.options = $.extend( {}, defaults, options );

        this._defaults = defaults;

        this._name = pluginName;
        var that = this;
        var settings = this.options;
      this.$elem.data(pluginName,this);
      
      var ele = $(element);
       
      

      settings.render(function(ok){
         if(ok){
            that.hide();
         }
      });

      this.hide = function(){
      	ele.removeAttr('nodata');
      };
      this.show = function(s){
        ele.attr('nodata',s||settings.content);
      };

      //auto
      this.show();
    }
    $.fn[pluginName] = function ( options ) {
      var lists  = this,
            retval = this;
        var params =   arguments;
        lists.each(function()
        {
            var plugin = $(this).data(pluginName);
            if (!plugin) {
                $(this).data(pluginName, new Plugin(this, options));
                $(this).data(pluginName+"-id", new Date().getTime());
            }else {
                if (typeof options === 'string' && typeof plugin[options] === 'function') {
                    retval = plugin[options].apply(plugin,Array.prototype.slice.call(params,1));
                }
            }
        });
        return retval || lists;
    };
})( jQuery, window, document );




(function(win){
    //NotifyAlert({title,message,userInfo:{},page,playSound:true,url:""},function(){
    //
    //});
    win.Notification = win.Notification||function(options){
        options = $.extend({
          icon: '<i class="icon icon-f7"></i>',
          title: 'Framework7',
          titleRightText: 'now',
          subtitle: 'This is a subtitle',
          text: 'This is a simple notification message',
          closeTimeout: 3000,
          on: {
            notificationClick : function(){
                notification.destroy();
                /*if(options.callback){
                   options.callback(options);
                }*/

                DomDoc.trigger("onNotification",[options]);
            },
            close: function () {
               notification.destroy();
            },
          }
        },options,true);
        var notification =  app.notification.create(options).open();
    };
    //from app call on click
    win.NotificationFromApp = function(data){ 
        DomDoc.trigger("onNotification",[data]);
    };
   
})(window);

/**
 * Owl Carousel v2.3.4
 * Copyright 2013-2018 David Deutsch
 * Licensed under: SEE LICENSE IN https://github.com/OwlCarousel2/OwlCarousel2/blob/master/LICENSE
 */
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g>0;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i,g-=1;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;c<d;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],e.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(a("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},e.prototype.initializeItems=function(){var b=this.$element.find(".owl-item");if(b.length)return this._items=b.get().map(function(b){return a(b)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var a,b,c;a=this.$element.find("img"),b=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,c=this.$element.children(b).width(),a.length&&c<=0&&this.preloadAutoWidthImages(a)}this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){a<=b&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};b<c;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var e=-1,f=30,g=this.width(),h=this.coordinates();return this.settings.freeDrag||a.each(h,a.proxy(function(a,i){return"left"===c&&b>i-f&&b<i+f?e=a:"right"===c&&b>i-g-f&&b<i-g+f?e=a+1:this.op(b,"<",i)&&this.op(b,">",h[a+1]!==d?h[a+1]:i-g)&&(e="left"===c?a+1:a),-1===e},this)),this.settings.loop||(this.op(b,">",h[this.minimum()])?e=b=this.minimum():this.op(b,"<",h[this.maximum()])&&(e=b=this.maximum())),e},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){(a=this.normalize(a))!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||c<1?a=d:(a<0||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){if(b=this._items.length)for(c=this._items[--b].width(),d=this.$element.width();b--&&!((c+=this._items[b].width()+this.settings.margin)>d););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2==0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(e<0),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),a=c+e,(d=((a-h)%g+g)%g+h)!==a&&d-e<=i&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.isVisible()&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){if(a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){(a=this.normalize(a,!0))!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),!1!==this.settings.responsive&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:a<c;case">":return d?a<c:a>c;case">=":return d?a<=c:a>=c;case"<=":return d?a>=c:a<=c}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type)){var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);for(c.lazyLoadEager>0&&(e+=c.lazyLoadEager,c.loop&&(g-=c.lazyLoadEager,e++));f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1,lazyLoadEager:0},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src")||f.attr("data-srcset");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):f.is("source")?f.one("load.owl.lazy",a.proxy(function(){this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("srcset",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(c){this._core=c,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"===a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var d=this;a(b).on("load",function(){d._core.settings.autoHeight&&d.update()}),a(b).resize(function(){d._core.settings.autoHeight&&(null!=d._intervalId&&clearTimeout(d._intervalId),d._intervalId=setTimeout(function(){d.update()},250))})};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.settings.lazyLoad,e=this._core.$stage.children().toArray().slice(b,c),f=[],g=0;a.each(e,function(b,c){f.push(a(c).height())}),g=Math.max.apply(null,f),g<=1&&d&&this._previousHeight&&(g=this._previousHeight),this._previousHeight=g,this._core.$stage.parent().height(g).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?"width:"+c.width+"px;height:"+c.height+"px;":"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(c){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?a("<div/>",{class:"owl-video-tn "+j,srcType:c}):a("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+c+")"}),b.after(d),b.after(e)};if(b.wrap(a("<div/>",{class:"owl-video-wrapper",style:g})),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length)return l(h.attr(i)),h.remove(),!1;"youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}})},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),c=a('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>'),c.attr("height",h),c.attr("width",g),"youtube"===f.type?c.attr("src","//www.youtube.com/embed/"+f.id+"?autoplay=1&rel=0&v="+f.id):"vimeo"===f.type?c.attr("src","//player.vimeo.com/video/"+f.id+"?autoplay=1"):"vzaar"===f.type&&c.attr("src","//view.vzaar.com/"+f.id+"/player?autoplay=true"),a(c).wrap('<div class="owl-video-frame" />').insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,
animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype._next=function(d){this._call=b.setTimeout(a.proxy(this._next,this,d),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||c.hidden||this._core.next(d||this._core.settings.autoplaySpeed)},e.prototype.read=function(){return(new Date).getTime()-this._time},e.prototype.play=function(c,d){var e;this._core.is("rotating")||this._core.enter("rotating"),c=c||this._core.settings.autoplayTimeout,e=Math.min(this._time%(this._timeout||c),c),this._paused?(this._time=this.read(),this._paused=!1):b.clearTimeout(this._call),this._time+=this.read()%c-e,this._timeout=c,this._call=b.setTimeout(a.proxy(this._next,this,d),c-e)},e.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,b.clearTimeout(this._call),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,b.clearTimeout(this._call))},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a('<button role="button">').addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d,e;e=this._core.settings;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)"$relative"===b&&e.navContainer?this._controls[b].html(""):this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;a<e;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):b<0&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){if(g[b]!==d)return e=!c||b,!1}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document);


$.fn.setupOwlCarousel = function( options ){
    return this.each(function(){
        var owl = $(this).addClass("owl-theme");
        var slider = owl.data('owl.carousel');

        var data=[];
        if(options.data){
            if(typeof options.data=="function"){
                options.data = options.data();
            }
 
            if(typeof options.data=="object"){
                data = options.data.map(function(v){
                   return v;
                });
            }else {
                $(`<div>${options.data}</div>`).children().each(function(){
                    data.push(this.outerHTML);
                });
            }
        }

        if(slider){
            data.map(function(v){
                owl.owlCarousel('add',v, 0);
            }); 
            owl.owlCarousel('update');
        }else{
            owl.append(data.join("")).owlCarousel(options);
        }
    });
};


$(document).on("onePage",function(event,e){
    var modal = $(e.page);
    modal.find("[owlcarousel]").addClass("owl-theme").each(function(){
        var owl = this;
        var options = $.extend({loop:true,
            margin:10,
            items:4,
             nav:true},$(owl).data(),true);
        if(options.owlcarousel){
            options = $.extend(options, options.owlcarousel,true);
            delete options.owlcarousel;
        } 
        //
        if(!options.responsive){
            options.responsive = {
                0:{
                    items:1, 
                },
                600:{
                    items:1, 
                },
                1200:{
                    items:3
                } ,
                1500:{
                    items:4
                } ,
                1900:{
                    items:6
                }
            }; 
        } 
        var body = e.page.querySelector(".page-content");
        body.onscroll  = function(){
            if(!owl.loaded){
                isInViewport(owl,this);
            }
            
        };
        isInViewport(owl,body);
 
        $(owl).owlCarousel(options);
    });
    
});



window.owlCarousel = function (ele,options){
         options = $.extend({
            hastab:0,
            items: 1,
    margin: 10,
    loop: true,

     stagePadding: 50,},options,true);

         var doc = ele;
         var swiper = doc.find(".owl-carousel");
         swiper = swiper.length==0?ele:swiper;

         if(swiper.length==0){
            doc.html(`<div class="owl-carousel owl-theme"></div>`);
            swiper = doc.find(".owl-carousel");
         }
         var tab = doc.find(".toolbar-inner").hide();

         //
         var slides =[];
         var methods  ={
            slider:null,
             enableTab : function(){
                doc.find(".toolbar-inner").show();
                return this;
             }, 
             enableSlider : function(){
                options.on = options.on||{};
                this.slider = swiper.owlCarousel(options);
                for(var i in options.on){
                    this.slider.on(i,options.on[i]);
                }
                // this.slider.on('changed.owl.carousel', function(event) {
                //     var currentIndex = event.item.index; 
                //     var ele = event.relatedTarget.$stage.children()[event.item.index];
                    
                //      console.log(currentIndex,ele);
                      
                //       for(var i in slides){
                //          var v = slides[i];
                //          if(v.id==ele.attr("id")){
                //             if(v.onActive)v.onActive({
                //                 ele : ele,
                //                 data  :v 
                //             });
                //             break;
                //          }
                //       }  
                       
                // });
                return this;
             },
             /*
             // appends an item as the first item
$('.owl-carousel').owlCarousel('add', '<div>foo</div>', 0).owlCarousel('update');

// appends an item as the 2nd item
$('.owl-carousel').owlCarousel('add', '<div>foo</div>', 1).owlCarousel('update');

// appends an item as the 4rth item
$('.owl-carousel').owlCarousel('add', '<div>foo</div>', 3).owlCarousel('update');

// appends an item as the last item - if you don't specify it will add to the end
$('.owl-carousel').owlCarousel('add', '<div>foo</div>').owlCarousel('update');
              */
             

             append : function(v,n){
                var id = typeof v=="object"?v.id:"tb"+Date.now();
                if(options.hastab)tab.append(`<a class="tab-link" href="#${id}">${v.label}</a>`);
                var s = typeof v=="object"?(v.render?v.render():""):v;
                if(this.slider){
                    this.slider.owlCarousel('add', s).owlCarousel('update');
                    this.slider.find('.owl-item.active').attr("id",id);
                }else{
                    swiper.append($(v).attr("id",id));
                }

                if(typeof v=="object" && v.onInit)v.onInit($("#"+id));

                slides.push(v);
                return this;
             }
         };
         methods.enableSlider();
         //check data
         if(options.data){
            options.data.map(function(v){
                methods.append(v);
            });
         }
        
         
      
         if(options.isTab){
            methods.enableTab();
         }


         return methods;
       };
  /**
 * jquery-rpmPagination - v2.0
 * A jQuery plugin for simple dynamic frontend pagination with Bootstrap CSS
 * https://github.com/sabbir-rupom/pagination-jquery
 *
 * Copyright 2019, Sabbir Hossain Rupom
 */

/* jshint esversion: 6 */
(function ($) {
    "use strict";
    /**
     * Plugin root function rpmPagination()
     *
     * @param object options Option parameter for intializing pagination plugin
     * *-----* {property} limit         Pagination item limit, [ optional ] default is 10
     * *-----* {property} total         Pagination item count in total [ optional ]
     * *-----* {property} currentPage   Current/Active page number of pagination
     * *-----* {property} domElement    Html element [tag/class] which will be count as Pagination item
     * *-------------------------------[ must be provided for dynamic pagination without page refresh, optional otherwise ]
     * *-----* {property} refresh       Page refresh flag, if enabled- page will be refreshed with query/get/post parameters [ optional ]
     * *-----* {property} link          Page refresh link [ must be provided if refresh flag is enabled, optional otherwise ]
     * *-----* {property} formElement   Pagination item filter form identity element [ optional ]
     * *-------------------------------[ If page has custom item search filter form, the pagination function will use the form to refresh the page with limit/offset parameters ]
     *
     * @returns boolean true
     */
     var tmp_table =`
<div class="row" style="margin-bottom: 8px;">
          <div class="col-md-2 col-sm-12">
             <select class="form-control paging">
               <option value="10">10</option>
               <option value="50">50</option>
               <option value="100">100</option>
            </select>
          </div>
          <div class="col-md-7 col-sm-12">
                  <div class="text-center">
                        <!-- parent element for pagination menu list -->
                        <ul class="pagination custom-pagination"></ul>

                    </div>
          </div>
          <div class="col-md-3 col-sm-12" style="position: relative;">
                  <input type="text" class="form-control search input-sm" placeholder="Tm kim">
                  <img src="https://cdn-icons-png.flaticon.com/128/54/54481.png" onclick="$(this).parent().find('input').trigger('change')" style="
                      width: 25px; cursor: pointer; position: absolute;  right: 23px; top: 20%;" />
              </div>
    </div>
        <table class="table table-bordered table-striped">
           

          </table>
                    `;
     var tmp_div =`
<div class="row" style="margin-bottom: 8px;">
          <div class="col-md-2 col-sm-12">
             <select class="form-control paging">
               <option value="10">10</option>
               <option value="50">50</option>
               <option value="100">100</option>
            </select>
          </div>
          <div class="col-md-7 col-sm-12">
                  <div class="text-center">
                        <!-- parent element for pagination menu list -->
                        <ul class="pagination custom-pagination"></ul>

                    </div>
          </div>
          <div class="col-md-3 col-sm-12" style="position: relative;">
                  <input type="text" class="form-control search input-sm" placeholder="Tm kim">
                  <img src="https://cdn-icons-png.flaticon.com/128/54/54481.png" onclick="$(this).parent().find('input').trigger('change')" style="
                      width: 25px; cursor: pointer; position: absolute;  right: 23px; top: 20%;" />
              </div>
    </div>
        <div class="table">
            
          </div> `;
    var bsVersion = 3;
    if(typeof $.fn.tooltip !== 'undefined' && $.fn.tooltip.Constructor) {
        bsVersion = $.fn.tooltip.Constructor.VERSION.split('.')[0];
    }
    var rpmListClass = 'page-item',
            rpmAnchorClass = 'page-link', rpmHideClass = 'hide';

    $.fn.rpmPagination = function (options) {
        var settings = $.extend({
            display:"table",
            limit: 10,
            total: 0,
            currentPage: 1,
            domElement: '.p-item',
            refresh: false,

            beforeSend:function(a){},
            link: null,
            renderItem: null,
            formElement: null
        }, options);
        var tablepaging = null;
        if($(this).hasClass('tablepaging')){
           tablepaging = $(this) ;    
        }else{
          tablepaging = $(this).closest('.tablepaging'); 
        }
        

        var tmp_ = settings.display=="div"?tmp_div:tmp_table;

        var table = null;
        if(settings.display=="div"){
            table = tablepaging.find("div.table");
            if(table.length==0){
                tablepaging.html(tmp_);
                table = tablepaging.find("div.table");
            }
        }else{
             table = tablepaging.find("table.table").clone();
            if(table.length==0){
                tablepaging.html(tmp_);
                table = tablepaging.find("table.table");
            }

            //now replace
            tablepaging.html(tmp_table).find('table.table').replaceWith(table);
        }
 
     
        var $this = tablepaging.find(".custom-pagination"),
                pages = 1,
                rpmPageNext = settings.limit,
                rpmPageTotal = settings.total,
                tBool = false,
                rpmPageDomElem = settings.domElement, rpmCustomDomElem = 'p-' + Math.random().toString(36).substr(2, 6),
                version = bsVersion;

        if (version == 4) {
            rpmListClass = 'page-item ' + rpmListClass;
            rpmHideClass = 'd-none', rpmAnchorClass = 'page-link';
        }

        if (rpmPageTotal <= 0) {
            tBool = true;
        }

        if(settings.renderItem==null){
            settings.renderItem= function(r,i){
                if(settings.display=="div"){
                    return `<div class="${rpmPageDomElem.replace("#","").replace(".",'')}">
                    ${JSON.stringify(r)} 
                  </div>`;
                }
                return `<tr class="${rpmPageDomElem.replace("#","").replace(".",'')}">
                    <th scope="row">${JSON.stringify(r)}</th> 
                  </tr>`
            }
        }



        if (settings.refresh === true && settings.link) {

            var abc = {
                url:settings.link,
                limit:settings.limit,
            };
            settings.beforeSend(abc);
             tablepaging.find(".loading").removeClass("hide");
            refreshPageforItems(abc,$this, settings.currentPage, abc.limit, abc.url, settings.formElement,function(res){
                tablepaging.find(".loading").addClass("hide");
                cache_request = res;
                if(res){
                    var trs = res.data.map(function(v,i){
                        return settings.renderItem(v,i);
                    }).join("\n"); 
                    if(settings.display=="div"){
                        table.html(trs);
                    }else{
                        table.find("tbody").html(trs);
                    }
                    

                   tablepaging.find('[data-i]') .each(function (i, obj) {
                        $(this).removeClass($(this).attr("data-i"));
                    }); 

                    tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                        if (tBool) {
                            rpmPageTotal = i + 1;
                        }
                        
                        $(obj).addClass(rpmCustomDomElem);
                        var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                        $(obj).addClass(a).attr("data-i",a);
                    });
                    var len = res.total;

                      pages = parseInt((len/settings.limit) + 1);
                      preparePageMenus(settings.currentPage, pages, $this);

                    var reduce = 0;
                    if($(rpmPageDomElem).not(".hide").length==0){
                       if(settings.currentPage>1){
                            reduce = 1;
                       }
                    }

                    cache_request.current = 1;

                    [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
         
                }
            });
        }else{
            tablepaging.find(rpmPageDomElem).each(function (i, obj) {
                if (tBool) {
                    rpmPageTotal = i + 1;
                }
                $(obj).addClass(rpmCustomDomElem);
                var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                $(obj).addClass(a).attr("data-i",a);
            });

            if (rpmPageTotal > settings.limit) {
                pages = parseInt((rpmPageTotal / settings.limit) + 1);
            }

            preparePageMenus(settings.currentPage, pages, $this);

            [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');

            if (settings.refresh && $('.' + rpmCustomDomElem).length > 0) {
                tablepaging.find('.' + rpmCustomDomElem).removeClass(rpmHideClass)
            }
        }

        tablepaging.on('change',".search",function(){
            if (settings.refresh === true && settings.link) {

                var abc = {
                    url:settings.link,
                    limit:settings.limit,
                    search : this.value
                };
                settings.beforeSend(abc);
                 tablepaging.find(".loading").removeClass("hide");
                refreshPageforItems(abc,$this, settings.currentPage, abc.limit, abc.url, settings.formElement,function(res){
                    tablepaging.find(".loading").addClass("hide");
                    cache_request = res;
                    if(res){
                        var trs = res.data.map(function(v,i){
                            return settings.renderItem(v,i);
                        }).join("\n"); 
                        if(settings.display=="div"){
                            table.html(trs);
                        }else{
                            table.find("tbody").html(trs);
                        }

                       tablepaging.find('[data-i]') .each(function (i, obj) {
                            $(this).removeClass($(this).attr("data-i"));
                        }); 

                        tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                            if (tBool) {
                                rpmPageTotal = i + 1;
                            }
                            
                            $(obj).addClass(rpmCustomDomElem);
                            var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                            $(obj).addClass(a).attr("data-i",a);
                        });
                        var len = res.total;

                          pages = parseInt((len/settings.limit) + 1);
                          preparePageMenus(settings.currentPage, pages, $this);

                        var reduce = 0;
                        if($(rpmPageDomElem).not(".hide").length==0){
                           if(settings.currentPage>1){
                                reduce = 1;
                           }
                        }

                        cache_request.current = 1;

                        [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
             
                    }
                });
            }else{
                methods.search(this.value);
            }
          
        });  

        var methods ={
          html : function(tr){
            if(settings.display=="div"){
                table.html(tr);
            }else{
                table.find("tbody").html(tr);
            } 

            tablepaging.find('[data-i]').each(function (i, obj) {
                $(this).removeClass($(this).attr("data-i"));
            }); 

            tablepaging.find(rpmPageDomElem).removeClass("hide").each(function (i, obj) {
                if (tBool) {
                    rpmPageTotal = i + 1;
                }
                
                $(obj).addClass(rpmCustomDomElem);
                var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                $(obj).addClass(a).attr("data-i",a);
            });

            $this.html("");

            var len = tablepaging.find(rpmPageDomElem).length;

                  pages = parseInt((len/settings.limit) + 1);
                  preparePageMenus(settings.currentPage, pages, $this);

                var reduce = 0;
                if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
                   if(settings.currentPage>1){
                        reduce = 1;
                   }
                }

                [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
     
 
          },
          prepend : function(tr){
            // var tr = $(tr).addClass(settings.domElement+" "+rpmCustomDomElem+" "+rpmCustomDomElem + '-' + parseInt($(rpmPageDomElem).length + 1));
            table.find("tbody").prepend(tr);

            tablepaging.find('[data-i]') .each(function (i, obj) {
                $(this).removeClass($(this).attr("data-i"));
            }); 

            tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                if (tBool) {
                    rpmPageTotal = i + 1;
                }
                
                $(obj).addClass(rpmCustomDomElem);
                var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                $(obj).addClass(a).attr("data-i",a);
            });
            this.refresh();
 
          },
          filters : function(cls){
            var all = table.find(cls);
            tablepaging.find('[data-i]') .each(function (i, obj) {
                $(this).removeClass($(this).attr("data-i"));
            });

            $this.html("");

            if(all.length>0){ 

                all.each(function (i, obj) {

                    if (tBool) {
                        rpmPageTotal = i + 1;
                    }
                    
                    $(obj).addClass(rpmCustomDomElem);
                    var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                    $(obj).addClass(a).attr("data-i",a);
                });
                var len = all.length;

                  pages = parseInt((len/settings.limit) + 1);
                  preparePageMenus(settings.currentPage, pages, $this);

                var reduce = 0;
                if(all.not(".hide").length==0){
                   if(settings.currentPage>1){
                        reduce = 1;
                   }
                }

                [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
     
            }else if(cls==""){
                if( settings.link){
                    this.reloadAjax()
                }else{
                    tablepaging.find(rpmPageDomElem).removeClass('hide').each(function (i, obj) {
                    if (tBool) {
                        rpmPageTotal = i + 1;
                    }
                    
                    tablepaging.find(obj).addClass(rpmCustomDomElem);
                        var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                        $(obj).addClass(a).attr("data-i",a);
                    });

                    var len = tablepaging.find(rpmPageDomElem).length;
                    pages = parseInt((len/settings.limit) + 1);
                    preparePageMenus(settings.currentPage, pages, $this);

                    var reduce = 0;
                    if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
                       if(settings.currentPage>1){
                            reduce = 1;
                       }
                    }

                    [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
     
                }
                
            }else{
                tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                    if (tBool) {
                        rpmPageTotal = i + 1;
                    }
                    
                    tablepaging.find(obj).addClass(rpmCustomDomElem+" hide");
                    var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                    $(obj).addClass(a).attr("data-i",a);
                });

                var len = 0;
                pages = 1;
                preparePageMenus(settings.currentPage, pages, $this);

                 
            }
 
          },
           append : function(tr){
            // var tr = $(tr).addClass(settings.domElement+" "+rpmCustomDomElem+" "+rpmCustomDomElem + '-' + parseInt($(rpmPageDomElem).length + 1));
            if(settings.display=="div"){
                table.html(tr);
            }else{
                table.find("tbody").html(tr);
            }

            $('[data-i]') .each(function (i, obj) {
                $(this).removeClass($(this).attr("data-i"));
            }); 

            tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                if (tBool) {
                    rpmPageTotal = i + 1;
                }
                
                $(obj).addClass(rpmCustomDomElem);
                var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                $(obj).addClass(a).attr("data-i",a);
            });
            this.refresh();
 
          },
          reloadAjax: function(){
            // cache_request.url=settings.link;

            settings.beforeSend(cache_request);

            if(settings.display=="div"){
                        table.html("");
            }else{
                table.find("tbody").html("");
            } 

            refreshPageforItems(cache_request,$this, cache_request.current, cache_request.limit, settings.link, settings.formElement,function(res){
                tablepaging.find(".loading").addClass("hide");
                if(res){
                    var trs = res.data.map(function(v,i){
                        return settings.renderItem(v,i);
                    }).join("\n"); 
                    if(settings.display=="div"){
                        table.html(trs);
                    }else{
                        table.find("tbody").html(trs);
                    }

                    $('[data-i]') .each(function (i, obj) {
                        $(this).removeClass($(this).attr("data-i"));
                    }); 

                    tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                        if (tBool) {
                            rpmPageTotal = i + 1;
                        }
                        
                        $(obj).addClass(rpmCustomDomElem);
                        var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                        $(obj).addClass(a).attr("data-i",a);
                    });
                    var len = res.total;

                      pages = parseInt((len/settings.limit) + 1);
                      // preparePageMenus(settings.currentPage, pages, $this);

                    var reduce = 0;
                    if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
                       if(settings.currentPage>1){
                            reduce = 1;
                       }
                    }

                     var current =  parseInt((res.offset/res.limit) + 1); 
                     cache_request.current =  parseInt((res.offset/res.limit) + 1); 

                    [settings.currentPage, rpmPageNext] = preparePageItems(cache_request.current, rpmPageNext, res.limit, rpmCustomDomElem, 'page-item');
                    

                    tablepaging.find(rpmPageDomElem).removeClass("hide");

                    preparePageMenus(cache_request.current, pages, $this);
                }
            });
          },
          refresh : function(){

            var len = tablepaging.find(rpmPageDomElem).length;

              pages = parseInt((len/settings.limit) + 1);
              preparePageMenus(settings.currentPage, pages, $this);

            var reduce = 0;
            if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
               if(settings.currentPage>1){
                    reduce = 1;
               }
            }

            [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
 
          },
          limit : function(num){
            tablepaging.find(rpmPageDomElem).each(function (i, obj) {
                if (tBool) {
                    rpmPageTotal = i + 1;
                }
                $(obj).addClass(rpmCustomDomElem);
                $(obj).addClass(rpmCustomDomElem + '-' + parseInt(i + 1));
            });

            if (rpmPageTotal > settings.limit) {
                pages = parseInt((rpmPageTotal / settings.limit) + 1);
            }

            preparePageMenus(settings.currentPage, pages, $this);

            [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');

            if (settings.refresh && $('.' + rpmCustomDomElem).length > 0) {
                $('.' + rpmCustomDomElem).removeClass(rpmHideClass)
            }
        
             settings.limit = num;
              var len = tablepaging.find(rpmPageDomElem).length;

              pages = parseInt((len/settings.limit) + 1);
              preparePageMenus(settings.currentPage, pages, $this);

            var reduce = 0;
            if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
               if(settings.currentPage>1){
                    reduce = 1;
               }
            }

            [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage - reduce, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
          },
          search : function(value,callback){
            tablepaging.find('.' + rpmCustomDomElem).removeClass(rpmHideClass)
            if(value){
              var old = value.toLowerCase();
              value= old.split(" ");
                value.map(function(v){
                   tablepaging.find(rpmPageDomElem).each(function(i,k){
                      var val = callback?callback.call(k,old):$(this).text().trim().toLowerCase().replace(/\s+/," ").includes(v);
                      if(val){
                        $(k).addClass("f");
                      }else{
                        $(k).removeClass("f");
                      }
                   });
                });

               var len = tablepaging.find(rpmPageDomElem+".f").length;

                pages = parseInt((len/settings.limit) + 1);
                  preparePageMenus(settings.currentPage, pages, $this);

      
                

                [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');  

                tablepaging.find(rpmPageDomElem).not(".f").addClass("hide");
                tablepaging.find(rpmPageDomElem+".f").removeClass("hide f").show();

            }else{
              tablepaging.find(rpmPageDomElem).removeClass("f");
              this.refresh();
            }
            
          }
        };
        $(this).data("rpmPagination",methods);

        var cache_request = {limit:20};
 
        /**
         * Process html pagination on pagination-menu click
         */
        tablepaging.on('click', '.page-item > a', function (e) {
            e.preventDefault();

            if ($(this).parent().hasClass('disabled') || $(this).parent($this).length === 0) {
                return false;
            } else {
                if (settings.refresh === true && settings.link) {
                    var abc = {
                        url:settings.link,
                        limit:settings.limit,
                    };
                    settings.beforeSend(abc);

                    var page = $(this).attr("data-page_no")*1;

                    tablepaging.find(".loading").removeClass("hide");

                    refreshPageforItems(abc,$this, page, abc.limit, abc.url, settings.formElement,function(res){
                        tablepaging.find(".loading").addClass("hide");

                        cache_request = res;
                        if(res){
                            var trs = res.data.map(function(v,i){
                                return settings.renderItem(v,i);
                            }).join("\n"); 
                            if(settings.display=="div"){
                                table.html(trs);
                            }else{
                                table.find("tbody").html(trs);
                            }

                            tablepaging.find('[data-i]') .each(function (i, obj) {
                                $(this).removeClass($(this).attr("data-i"));
                            }); 

                             tablepaging.find(rpmPageDomElem) .each(function (i, obj) {
                                if (tBool) {
                                    rpmPageTotal = i + 1;
                                }
                                
                                $(obj).addClass(rpmCustomDomElem);
                                var a = rpmCustomDomElem + '-' + parseInt(i + 1);
                                $(obj).addClass(a).attr("data-i",a);
                            });
                            var len = res.total;

                              pages = parseInt((len/settings.limit) + 1);
                              // preparePageMenus(settings.currentPage, pages, $this);

                            var reduce = 0;
                            if(tablepaging.find(rpmPageDomElem).not(".hide").length==0){
                               if(settings.currentPage>1){
                                    reduce = 1;
                               }
                            }
                            var current =  parseInt((res.offset/res.limit) + 1); 
                            cache_request.current =  parseInt((res.offset/res.limit) + 1); 
                            settings.currentPage = cache_request.current;
                            // preparePageItems(settings.currentPage - reduce, rpmPageNext, res.limit, rpmCustomDomElem, 'page-item');
                            
                            

                            preparePageMenus(cache_request.current, pages, $this);
                        }
                    });
                } else {
                    if ($(this).parent().hasClass('prev')) {
                        [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'prev');
                    } else if ($(this).parent().hasClass('next')) {
                        [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'next');
                    } else {
                        let cl = $(this).data('page_no');
                        settings.currentPage = parseInt(cl);
                        [settings.currentPage, rpmPageNext] = preparePageItems(settings.currentPage, rpmPageNext, settings.limit, rpmCustomDomElem, 'page-item');
                    }

                    preparePageMenus(settings.currentPage, pages, $this);
                }

                
            }

        });

        return true;
    };

    /**
     *
     * @param {obj} obj Pagination item anchor object
     * @param {int} current Current page number
     * @param {int} limit Pagination item limit
     * @param {string} url Custom source url for passing query parameters
     * @param {string} form Query-Element-String to determined existing form
     * @returns {} nothing
     */

    function refreshPageforItems(abc,obj, current, limit, url, form,callback) {
        let offset = 0;
        if(obj){
            if (obj.parent().hasClass('prev')) {
                offset = limit * (current - 2);
            } else if (obj.parent().hasClass('next')) {
                offset = limit * current;

            } else {
                let cl = obj.data('page_no');
                var a = parseInt(cl);
                current = isNaN(a)?current:a;
                offset = limit * (current - 1);
            }
        }
        

        var re = {limit:limit,offset : isNaN(offset)?0:offset};
        var n = $.extend(abc,re,true);
        if(n.data){
            delete n.data;
        }
        post(url,n,function(res){
            if(res){
                res = $.extend(re,res,true);
            }
            callback(res);
        });

        // let ap;
        // if (form === null || form === '' || $(form).length <= 0) {
        //     ap = '?';
        //     if (url.includes('?')) {
        //         ap = '&';
        //     }

        //     window.location.href = url + ap + 'limit=' + limit + '&offset=' + offset;
        // } else {
        //     form = $(form);
        // }

        // form.append($("<input />").attr("type", "hidden").attr("name", "limit").attr("value", limit));
        // form.append($("<input />").attr("type", "hidden").attr("name", "offset").attr("value", offset)).submit();

        return;
    }
    function post(url,data,func){
         

          $.ajax({
            url: url,
            async: true, 
            data:data,
            success: function (json) {
              try{
                json = JSON.parse(json);
              }catch(e){}
              func(json)
            }
          });

     
    }
    /**
     * Show / Hide pagination items based on current page-menu
     *
     * @param {num} current_page Current page number
     * @param {num} next Number of next pagination item
     * @param {num} limit Pagination item limit to show in frontend
     * @param {string} element Pagination item element
     * @param {string} type Type of pagination menu
     * @returns {Array} [ Current page number and Number of next pagination item  ]
     */
    var preparePageItems = function (current_page, next, limit, element, type) {

        $('.' + element).addClass(rpmHideClass)

        var current = 0;

        if (type === 'prev') {
            next = next - limit;
            current = next - limit + 1;
            for (let i = current; i <= next; i++) {
                $('.' + element + '-' + i).removeClass(rpmHideClass);
            }
            current_page--;

        } else if (type === 'next') {
            current = next + 1;
            next = next + limit;
            for (let i = current; i <= next; i++) {
                $('.' + element + '-' + i).removeClass(rpmHideClass);
            }
            current_page++;
        } else if (type === 'page-item') {
            current = (limit * (current_page - 1)) + 1;
            next = (limit * (current_page - 1)) + limit;
            for (let i = current; i <= next; i++) {
                $('.' + element + '-' + i).removeClass(rpmHideClass);
            }
        }


        // if($('.' + element).hasClass("f")){
        //   $('.' + element).addClass(rpmHideClass);
        // }


        return [current_page, next];
    };

    /**
     * Rearrage pagination menu after each pagination item list transition
     *
     * @param {num} current_page
     * @param {num} pages
     * @param {string} element
     * @returns {boolean} true
     */
    var preparePageMenus = function (current_page, pages, element) {
        if(pages<2){
          return false;
        }
        $(element).html('');
        let pageArray = [], fp = 1, lp = (pages - 1);
        let menuHtml = '';

        if (Math.abs(current_page - fp) < 3) {
            pageArray = [1, 2, 3, 4, '...', lp];
        } else if (Math.abs(current_page - lp) < 3) {
            pageArray = [1, '...', lp - 3, lp - 2, lp - 1, lp];
        } else if (lp <= 6) {
            for (let i = 1; i <= lp; i++) {
                pageArray.push(i);
            }
        } else {
            pageArray = [1, '...', current_page - 1, current_page, current_page + 1, '...', lp];
        }

        menuHtml = '<li class="' + rpmListClass + ' prev ' + (current_page === fp ? 'disabled' : '') + '"><a class="' + rpmAnchorClass + '" href="#">Trang trc</a></li>';
        for (let i = 0; i < pageArray.length; i++) {
            if (lp <= i) {
                break;
            } else {

                if (pageArray[i] === '...') {
                    menuHtml += '<li class="' + rpmListClass + ' page-inf disabled"><a class="' + rpmAnchorClass + '" data-page_no="..." href="#">...</a></li>';
                } else {
                    menuHtml += '<li class="' + rpmListClass + ' page-' + pageArray[i] + ' ' + (pageArray[i] === current_page ? 'disabled' : '') + '"><a class="' + rpmAnchorClass + '" data-page_no="' + pageArray[i] + '" href="#">' + pageArray[i] + '</a></li>';
                }
            }
        }
        menuHtml += '<li class="' + rpmListClass + ' next ' + (current_page === lp ? 'disabled' : '') + '"><a class="' + rpmAnchorClass + '" href="#">K tip</a></li>';
        $(element).append(menuHtml);


        return true;
    };

})(jQuery);
(function(win) {
    win.pagination = function (options){
    options = $.extend({
        data:[],
        len:10,
        onFound: function(){}
    },options,true);
    function chunk (arr, len) {

          var chunks = [],
              i = 0,
              n = arr.length;

          while (i < n) {
            chunks.push(arr.slice(i, i += len));
          }

          return chunks;
        } 
    var abc = chunk(options.data,options.len||10);

    var methods= {
        
        isEmpty : function(){
           return this.total==0; 
        },
        
        first : abc[0],
        last : abc[abc.length -1],
        total : abc.length,
        goto  : function(i){
            var d =this.pagination.page(i);
            options.onFound.call(this,d);
        },
        pagination : {
            currentPage :1,
            page : function(i){
                if(abc[i-1]){
                    this.currentPage = i;
                }
                return abc[i-1]||[];
            },
            render : function(){
          
                var s = "";
                for(var i=0;i<methods.total;i++){
                    var c = i+1;
                    s+=`<span data-page="${c}" class="${this.currentPage==c?"active":""}">${c>0?c:("0"+c)}</span>`;
                }
                return `${s}`;
            }
        }
        
    };
    return methods;
};
})(window);
//https://piehost.com/docs/3.0/javascript-websocket
var PieSocket;(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{t.r(e),t.d(e,{default:()=>M});class s{constructor(t){this.options=t}log(...t){this.options.consoleLogs&&console.log(...t)}warn(...t){this.options.consoleLogs&&console.warn(...t)}error(...t){this.options.consoleLogs&&console.error(...t)}}const n={};class i{constructor(t){this.options=t,this.apiKey=this.options.apiKey,this.channel=this.options.channelId,this.blockchainTestMode=this.options.blockchainTestMode,this.blockchainGasFee=this.options.blockchainGasFee,this.blockchainTestMode?this.contractAddress="0x2321c321828946153a845e69ee168f413e85c90d":this.contractAddress="0x2a840CA40E082DbF24610B62a978900BfCaB23D3"}async init(){const t=new Web3(window.ethereum),e=await ethereum.request({method:"eth_requestAccounts"});this.account=e[0],this.contract=new t.eth.Contract(n.abi,this.contractAddress)}checkWeb3(){return"undefined"==typeof Web3?(console.log("Web3.js is not installed!"),!1):void 0!==window.ethereum||(console.log("MetaMask is not installed!"),!1)}async confirm(t){return new Promise((async(e,s)=>{if(this.checkWeb3()){this.contract||await this.init();const n=this.contract.methods.confirm(t).send({from:this.account,gas:this.blockchainGasFee});n.on("transactionHash",e),n.on("error",(t=>{s(t)}))}}))}async send(t){return new Promise((async(e,s)=>{if(this.checkWeb3()){this.contract||await this.init();const n=await this.getTransactionHash(t),i=this.contract.methods.send(n.payload).send({from:this.account,gas:this.blockchainGasFee});i.on("transactionHash",(t=>{e({hash:t,id:n.transaction_id})})),i.on("error",(t=>{s(t)}))}else"undefined"==typeof Web3?s("Please install Web3.js"):s("Please install MetaMask")}))}async getTransactionHash(t){return new Promise(((e,s)=>{const n=new FormData;n.append("apiKey",this.apiKey),n.append("channel",this.channel),n.append("message",JSON.stringify(t)),n.append("contract",this.contractAddress);const i=new XMLHttpRequest;i.addEventListener("readystatechange",(function(){if(4===this.readyState)try{const t=JSON.parse(this.responseText);t.errors&&(console.error(`PieSocket Error: ${JSON.stringify(t.errors)}`),s()),t.success?e(t.success):s("Unknown error")}catch(t){console.error("Could not connect to Blockchain Messaging API, try later"),s()}})),i.addEventListener("error",(()=>{console.error("Blockchain Messaging API seems unreachable at the moment, try later"),s()})),i.open("POST","https://www.piesocket.com/api/blockchain/payloadHash"),i.setRequestHeader("Accept","application/json"),i.send(n)}))}}let o={};try{o=WebSocket}catch(t){}const r=o;class a{constructor(t,e,s=!0){this.events={},this.listeners={},this.members=[],this.portal=null,this.uuid=null,this.onSocketConnected=()=>{},this.onSocketError=()=>{},s&&this.init(t,e)}init(t,e){this.endpoint=t,this.identity=e,this.connection=this.connect(),this.shouldReconnect=!1,this.logger=new s(e)}getMemberByUUID(t){let e=null;for(let s=0;s<this.members.length;s++)if(this.members[s].uuid==t){e=this.members[s];break}return e}getCurrentMember(){return this.getMemberByUUID(this.uuid)}connect(){const t=new r(this.endpoint);return t.onmessage=this.onMessage.bind(this),t.onopen=this.onOpen.bind(this),t.onerror=this.onError.bind(this),t.onclose=this.onClose.bind(this),this.identity.onSocketConnected&&(this.onSocketConnected=this.identity.onSocketConnected),this.identity.onSocketError&&(this.onSocketError=this.identity.onSocketError),t}on(t,e){this.events[t]=e}listen(t,e){this.listeners[t]=e}send(t){return this.connection.send(t)}async publish(t,e,s){return s&&s.blockchain?await this.sendOnBlockchain(t,e,s):this.connection.send(JSON.stringify({event:t,data:e,meta:s}))}async sendOnBlockchain(t,e,s){this.blockchain||(this.blockchain=new i(this.identity));try{const n=await this.blockchain.send(e);return this.events["blockchain-hash"]&&this.events["blockchain-hash"].bind(this)({event:t,data:e,meta:s,transactionHash:n.hash}),this.connection.send(JSON.stringify({event:t,data:e,meta:{...s,transaction_id:n.id,transaction_hash:n.hash}}))}catch(t){this.events["blockchain-error"]&&this.events["blockchain-error"].bind(this)(t)}}async confirmOnBlockchain(t,e){this.blockchain||(this.blockchain=new i(this.identity));try{const s=await this.blockchain.confirm(e);return this.events["blockchain-hash"]&&this.events["blockchain-hash"].bind(this)({event:t,confirmationHash:e,transactionHash:s}),this.connection.send(JSON.stringify({event:t,data:e,meta:{transaction_id:1,transaction_hash:s}}))}catch(t){this.events["blockchain-error"]&&this.events["blockchain-error"].bind(this)(t)}}onMessage(t){this.logger.log("Channel message:",t);try{const e=JSON.parse(t.data);e.error&&e.error.length&&(this.shouldReconnect=!1),e.event&&(this.handleMemberHandshake(e),this.listeners[e.event]&&this.listeners[e.event].bind(this)(e.data,e.meta),this.listeners["*"]&&this.listeners["*"].bind(this)(e.event,e.data,e.meta))}catch(t){console.error(t)}this.events.message&&this.events.message.bind(this)(t)}handleMemberHandshake(t){"system:member_list"==t.event||"system:member_joined"==t.event?this.members=t.data.members:"system:member_left"==t.event?(this.members=t.data.members,this.portal&&this.portal.removeParticipant(t.data.member.uuid)):"system:portal_broadcaster"==t.event&&t.data.from!=this.uuid?this.portal.requestOfferFromPeer(t.data):"system:stopped_screen"==t.event&&t.data.from!=this.uuid?this.portal.onRemoteScreenStopped(t.data.from,t.data.streamId):"system:portal_watcher"==t.event&&t.data.from!=this.uuid||"system:video_request"==t.event&&t.data.from!=this.uuid?this.portal.shareVideo(t.data):"system:portal_candidate"==t.event&&t.data.to==this.uuid?this.portal.addIceCandidate(t.data):"system:video_offer"==t.event&&t.data.to==this.uuid?this.portal.createAnswer(t.data):"system:video_answer"==t.event&&t.data.to==this.uuid&&this.portal.handleAnswer(t.data)}onOpen(t){this.logger.log("Channel connected:",t),this.shouldReconnect=!0,this.onSocketConnected(t)}onError(t){this.logger.error("Channel error:",t),this.connection.close(),this.onSocketError(t),this.events.error&&this.events.error.bind(this)(t)}onClose(t){this.logger.warn("Channel closed:",t),this.reconnect(),this.events.close&&this.events.close.bind(this)(t)}reconnect(){this.shouldReconnect&&(this.logger.log("Reconnecting"),this.connection=this.connect())}}let c={};try{c=RTCIceCandidate}catch(t){}const h=c;let d={};try{d=RTCPeerConnection}catch(t){}const l=d;let u={};try{u=RTCSessionDescription}catch(t){}const p=u,m={shouldBroadcast:!0,portal:!0,video:!1,audio:!0};class g{constructor(t,e){this.channel=t,this.logger=new s(e),this.identity={...m,...e},this.localStream=null,this.displayStream=null,this.peerConnectionConfig={iceServers:[{urls:"stun:stun.stunprotocol.org:3478"},{urls:"stun:stun.l.google.com:19302"}]},this.constraints={video:e.video,audio:e.audio},this.participants=[],this.isNegotiating=[],this.logger.log("Initializing video room"),this.init()}init(){if(this.constraints.video||this.constraints.audio)return"undefined"!=typeof navigator&&navigator.mediaDevices.getUserMedia?(navigator.mediaDevices.getUserMedia(this.constraints).then(this.getUserMediaSuccess.bind(this)).catch(this.errorHandler.bind(this)),!0):(this.logger.error("Your browser does not support getUserMedia API"),!1);this.requestPeerVideo()}shareVideo(t,e=!0){if(!this.identity.shouldBroadcast&&e&&!t.isBroadcasting)return void console.log("Refusing to call, denied broadcast request");const s=new l(this.peerConnectionConfig);s.onicecandidate=e=>{null!=e.candidate&&this.channel.publish("system:portal_candidate",{from:this.channel.uuid,to:t.from,ice:e.candidate})},s.ontrack=e=>{"video"==e.track.kind&&(this.participants[t.from].streams=e.streams,"function"==typeof this.identity.onParticipantJoined&&this.identity.onParticipantJoined(t.from,e.streams[0]))},s.onsignalingstatechange=e=>{this.isNegotiating[t.from]="stable"!=s.signalingState},this.localStream&&this.localStream.getTracks().forEach((t=>{s.addTrack(t,this.localStream)})),this.displayStream&&this.displayStream.getTracks().forEach((t=>{s.addTrack(t,this.displayStream)})),this.isNegotiating[t.from]=!1,s.onnegotiationneeded=async()=>{await this.sendVideoOffer(t,s,e)},this.participants[t.from]={rtc:s}}async onRemoteScreenStopped(t,e){"function"==typeof this.identity.onScreenSharingStopped&&this.identity.onScreenSharingStopped(t,e)}async onLocalScreen(t){t.getVideoTracks()[0].addEventListener("ended",(()=>{this.channel.publish("system:stopped_screen",{from:this.channel.uuid,streamId:t.id})})),this.displayStream=t;const e=this.participants;Object.keys(e).forEach((s=>{const n=e[s].rtc;t.getTracks().forEach((e=>{n.addTrack(e,t)}))}))}async shareScreen(){navigator.mediaDevices.getDisplayMedia().then(this.onLocalScreen.bind(this)).catch(this.errorHandler.bind(this))}async sendVideoOffer(t,e,s){if(this.isNegotiating[t.from])return void console.log("SKIP nested negotiations");this.isNegotiating[t.from]=!0;const n=await e.createOffer();await e.setLocalDescription(n),console.log("Making offer"),this.channel.publish("system:video_offer",{from:this.channel.uuid,to:t.from,sdp:e.localDescription})}removeParticipant(t){delete this.participants[t],"function"==typeof this.identity.onParticipantLeft&&this.identity.onParticipantLeft(t)}addIceCandidate(t){this.participants[t.from].rtc.addIceCandidate(new h(t.ice))}createAnswer(t){return new Promise((async(e,s)=>{if(this.participants[t.from]&&this.participants[t.from].rtc||(console.log("Starting call in createAnswer"),this.shareVideo(t,!1)),await this.participants[t.from].rtc.setRemoteDescription(new p(t.sdp)),"offer"==t.sdp.type){this.logger.log("Got an offer from "+t.from,t);const s=await this.participants[t.from].rtc.createAnswer();await this.participants[t.from].rtc.setLocalDescription(s),this.channel.publish("system:video_answer",{from:this.channel.uuid,to:t.from,sdp:this.participants[t.from].rtc.localDescription}),e()}else this.logger.log("Got an asnwer from "+t.from),e()}))}handleAnswer(t){this.participants[t.from].rtc.setRemoteDescription(new p(t.sdp))}getUserMediaSuccess(t){this.localStream=t,"function"==typeof this.identity.onLocalVideo&&this.identity.onLocalVideo(t,this),this.requestPeerVideo()}requestPeerVideo(){let t="system:portal_broadcaster";this.identity.shouldBroadcast||(t="system:portal_watcher"),this.channel.publish(t,{from:this.channel.uuid,isBroadcasting:this.identity.shouldBroadcast})}requestOfferFromPeer(){this.channel.publish("system:video_request",{from:this.channel.uuid,isBroadcasting:this.identity.shouldBroadcast})}errorHandler(t){this.logger.error("Portal error",t)}}class f{constructor(t=null,e="InvalidAuthException"){this.message=t||"Auth endpoint did not return a valid JWT Token, please see: https://www.piesocket.com/docs/3.0/authentication",this.name=e}}const y={version:3,clusterId:"demo",clusterDomain:null,apiKey:"oCdCMcMPQpbvNjUIzqtvF1d2X2okWpDQj4AwARJuAgtjhzKxVEjQU6IdCjwm",consoleLogs:!1,notifySelf:0,jwt:null,presence:0,authEndpoint:"/broadcasting/auth",authHeaders:{},forceAuth:!1,userId:null,blockchainTestMode:!1,blockchainGasFee:41e3};var b,v=new Uint8Array(16);function w(){if(!b&&!(b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(v)}const k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var S=[],C=0;C<256;++C)S.push((C+256).toString(16).substr(1));const P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(S[t[e+0]]+S[t[e+1]]+S[t[e+2]]+S[t[e+3]]+"-"+S[t[e+4]]+S[t[e+5]]+"-"+S[t[e+6]]+S[t[e+7]]+"-"+S[t[e+8]]+S[t[e+9]]+"-"+S[t[e+10]]+S[t[e+11]]+S[t[e+12]]+S[t[e+13]]+S[t[e+14]]+S[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&k.test(t)}(s))throw TypeError("Stringified UUID is invalid");return s},E=function(t,e,s){var n=(t=t||{}).random||(t.rng||w)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){s=s||0;for(var i=0;i<16;++i)e[s+i]=n[i];return e}return P(n)},M=class{constructor(t){t=t||{},this.options={...y,...t},this.connections={},this.logger=new s(this.options)}async subscribe(t,e={}){return new Promise((async(s,n)=>{(e.video||e.audio||e.portal)&&(this.options.notifySelf=!0);const i=E(),o=await this.getEndpoint(t,i);if(this.connections[t])this.logger.log("Returning existing channel",t),s(this.connections[t]);else{this.logger.log("Creating new channel",t);const r=new a(o,{channelId:t,onSocketConnected:()=>{r.uuid=i,(e.video||e.audio||e.portal)&&(r.portal=new g(r,{...this.options,...e})),this.connections[t]=r,s(r)},onSocketError:()=>{n("Failed to make websocket connection")},...this.options});"undefined"==typeof WebSocket&&(r.uuid=i,this.connections[t]=r,s(r))}}))}unsubscribe(t){return!!this.connections[t]&&(this.connections[t].shouldReconnect=!1,this.connections[t].connection.close(),delete this.connections[t],!0)}getConnections(){return this.connections}async getAuthToken(t){return new Promise(((e,s)=>{const n=new FormData;n.append("channel_name",t);const i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("readystatechange",(function(){if(4===this.readyState)try{const t=JSON.parse(this.responseText);e(t)}catch(t){s(new f("Could not fetch auth token","AuthEndpointResponseError"))}})),i.addEventListener("error",(()=>{s(new f("Could not fetch auth token","AuthEndpointError"))})),i.open("POST",this.options.authEndpoint),Object.keys(this.options.authHeaders).forEach((t=>{i.setRequestHeader(t,this.options.authHeaders[t])})),i.send(n)}))}isGuarded(t){return!!this.options.forceAuth||(""+t).startsWith("private-")}async getEndpoint(t,e){let s=`wss://${null==this.options.clusterDomain?`${this.options.clusterId}.piesocket.com`:this.options.clusterDomain}/v${this.options.version}/${t}?api_key=${this.options.apiKey}&notify_self=${this.options.notifySelf}&source=jssdk&v=5.0.8&presence=${this.options.presence}`;if(this.options.jwt)s=s+"&jwt="+this.options.jwt;else if(this.isGuarded(t)){const e=await this.getAuthToken(t);e.auth&&(s=s+"&jwt="+e.auth)}return this.options.userId&&(s=s+"&user="+this.options.userId),s=s+"&uuid="+e,s}}})(),PieSocket=e})();
(function(){
    window.piesocket = function(options){
       options = $.extend({
            clusterId: options.clusterId,
            apiKey:  options.apiKey,
            notifySelf: true,
            presence: true,
            userId: options.userid?options.userid:options.clusterId
        },options,true);
         var piesocket = new PieSocket.default(options);
 
        var methods =  {
            io:null,
           send : function(d){
                if(typeof d !='object'){
                   d = {
                      message:d
                   };
                }
                if(!d.sender){
                    d.sender = options.userId
                }

                this.io.publish("new_message", d);
                return this;
           }
        };

        piesocket.subscribe(options.room).then( c => {
            methods.io = c;

            if(options.init){
                options.init(c);
            }
        });
        
        return methods;
    };
})();
/*
var config = {
    clusterId:"free.blr2",
    apiKey: "XL5gPNzQQpCXZw4mUH8642rnqYB7kAlArUeC8mfQ",
    userid: 1,
    init : function(channel){
       channel.listen("system:member_joined", function(data){
            if(data.member.user == config.userid){
                data.member.user = "<b>You</b>";
            }

            //chatLog.insertAdjacentHTML('afterend', `<div> ${data.member.user} joined the chat<div>`);
        });
        channel.listen("system:member_left", function(data){
            if(data.member.user == config.userid){
                data.member.user = "<b>You</b>";
            }

            //chatLog.insertAdjacentHTML('afterend', `<div> ${data.member.user} joined the chat<div>`);
        });

        channel.listen("system:connected", function(data){
            
        });
         channel.listen("system:error", function(data){
            
        });

         channel.listen("system:closed", function(data){
            
        });

        channel.listen("new_message", function(data, meta){
            if(data.sender == config.userid){
                data.sender = "<b>You</b>";
            }

            console.log(data,meta);

            //chatLog.insertAdjacentHTML('afterend', `<div> ${data.sender}: ${data.text} <div>`);
        });

        //
       // channel.publish("new_message", {
        //    sender: username,
        //    text: message
        //});     
    }
};
var channel = piesocket(config);
 
*/
 
(function () {
   var dom, win, doc, where, iframe;

   iframe = document.createElement('iframe');
   iframe.id = "print_frame";
   iframe.src = "javascript:false";
   iframe.style.display = "none";
   // iframe.style.display='none';

   // where = document.getElementsByTagName('script')[0];
   // where.parentNode.insertBefore(iframe, where);
   $("body").append(iframe);

   win = iframe.contentWindow || iframe;
   doc = iframe.contentDocument || iframe.contentWindow.document;

   doc.open();
   doc._l = (function (w, d) {
     return function () {
       w.vanishing_global = new Date().getTime();
     };
   })(win, doc);

   doc.write('<head><style type="text/css" media="screen,print">*{font-size:12px;line-height:14px;font-family: arial,sans-serif;}p{margin:0;}@page{size: auto;margin: 0;}body{margin:0;padding:0;width:100%;}table{width:100%;}@media print { div.page-break { display: block; page-break-before: always; } }</style></head>');
   doc.write('<body onload="document._l();"></body>');
   doc.close();

   var popup;
  if (window.dialogArguments) {
      popup = window.dialogArguments;
  } else if (opener) {
      popup = opener;
  } else if (parent) {
      popup = parent;
  }
   function send(data){
     if(popup)
     popup.postMessage(data,"*");
   }


    window.printJS = function(html,callback){
        $(doc).find("body").html(html);
        var title_ = document.title;
      document.title= "Printing...";
      
      
      setTimeout(function(){
         win.focus();
        win.print();
        if(callback){
          callback();
        }

        send({action:"end_print","old":document.title,"new":title_});
        document.title= title_;
      },500);

    };
 })();
setTimeout(function(){
      (function(){
          var tlp = `<li class="Notificationp">
      <div class="Notificationp__Container">
        <div class="Notificationp__Header">
          <div class="Notificationp__App">
            <div class="Notificationp__Icon">
              <img>
            </div>
            <div class="Notificationp__Name"></div>
          </div>
          <div class="Notificationp__Time"></div>
        </div>
        <div class="Notificationp__Body">
          <div class="Notificationp__Title"></div>
          <div class="Notificationp__Content"></div>
        </div>
      </div>
    </li>`;
    var audio = new Audio('https://interactive-examples.mdn.mozilla.net/media/cc0-audio/t-rex-roar.mp3');


      $("body").append(`<style>

.Notificationp {
  height: 5.5em;
  transition: height 0.75s cubic-bezier(0.785, 0.135, 0.15, 0.86);
}
.Notificationp--Close {
  height: 0;
}
.Notificationp--Close .Notificationp__Container {
  transform: scale(0);
}
.Notificationp--Optimize {
  will-change: height;
}
.Notificationp--Optimize .Notificationp__Container {
  will-change: transform;
}
.Notificationp__Container {
  background: #dedede;
  color: #2f2f2f;
  cursor: pointer;
  border-radius: 0.5em;
  overflow: hidden;
  transform: scale(1);
  transition: transform 0.75s cubic-bezier(0.785, 0.135, 0.15, 0.86);
  height: 5em;
}
.Notificationp__Icon, .Notificationp__Name {
  display: inline-block;
}
.Notificationp__Name {
  vertical-align: middle;
}
.Notificationp__Icon {
  vertical-align: middle;
}
.Notificationp__Icon img {
  height: 1.5em;
  width: 1.5em;
}
.Notificationp__Header {
  overflow: hidden;
  padding: 0.5em;
  padding-bottom: 0;
  font-size: 0.9em;
}
.Notificationp__Time {
  float: right;
}
.Notificationp__App {
  float: left;
}
.Notificationp__Body {
  padding: 0.25em 0.5em;
}
.Notificationp__Title {
  padding-bottom: 0.25em;
  font-weight: bold;
}
.Notificationp__Content {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-bottom: 0.5em;
}
.Notificationps {
  height: 100vh;
  width: 85%;
  position: relative;
  left: calc(50% - (85% / 2));
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.Notificationps__List {
    margin: 0;
    padding: 0;
    list-style: none;
    width: 100%;
    overflow-y: auto;
    padding: 0.5em;
    box-sizing: border-box;
    position: absolute;
    z-index: 10000000;
    top: 24px;
    left: 0;
    display:none;
}
.Notificationps__List:before {
  content: "Notificationps";
  display: black;
  position: absolute;
  left: 50%;
  transform: translate(-50%);
  top: 25%;
  font-size: 1.5em;
  letter-spacing: 0.05em;
  opacity: 0;
  transition: opacity 0.25s cubic-bezier(0.77, 0, 0.175, 1);
}
.Notificationps__List:empty:before {
  opacity: 1;
}
.Notificationps__btns {
  height: 10%;
  text-align: center;
}
.Notificationps__addBtn, .Notificationps__removeBtn {
  padding: 0;
  width: 45%;
  height: 100%;
  font-size: 1.5em;
  letter-spacing: 0.05em;
  border: none;
  background: #c3c3c3;
  color: #2f2f2f;
  border-radius: 0.5em;
}
</style><ul class="Notificationps__List"></ul>`);
//https://codepen.io/arvinall/pen/jvPjVm

      var baseClass = 'Notificationp';
      function Notificationp(config = {}) {
        var element = $(tlp);
 
        element.find('.Notificationp__Icon img').attr('src', config.icon);
        element.find('.Notificationp__Name').html(config.name);
        element.find('.Notificationp__Time').html(config.time);
        element.find('.Notificationp__Title').html(config.title);
        element.find('.Notificationp__Content').html(config.content);

        return element;
      }

      function addNotificationp(data, callback) {
        //check from device

        data = $.extend({
                name: 'Messenger',
                icon: 'https://cdn3.iconfinder.com/data/icons/social-network-30/512/social-04-512.png',
                time: 'Now',
                title: "userName",
                content: 'Hey, are you okay? Just call me',
                sound:1,
              },data,true);

        if(!data.icon){
          data.icon = 'https://cdn3.iconfinder.com/data/icons/social-network-30/512/social-04-512.png';
        }
        if(!data.name){
          data.name = window.ADevice&&window.ADevice.appName?window.ADevice.appName:document.title;
        }

        var item = Notificationp(data);

        $(".Notificationps__List").prepend(item);
          $(".Notificationps__List").show();

          item.removeClass(baseClass + '--Close');
          if(data.onClick){
             item.on("click",function(){
              data.onClick.call(this,data);
          });
          }
          

          //sound
          if(data.sound){
              audio.play();
          }
          setTimeout(() => {
            item.removeClass(baseClass + '--Optimize');



            if (typeof callback === 'function') callback(item,function(){

            });


            item.remove();
            if($(".Notificationps__List li").length==0){
               $(".Notificationps__List").hide();
            }
          }, 1500);
        
      }

      function removeNotificationp(item, callback) {
        item.addClass(baseClass + '--Optimize');
        item.addClass(baseClass + '--Close');

        setTimeout(() => {
          item.remove();

          if (typeof callback === 'function') callback();
        }, 875);

      }
 
     
         window.pushNotification=  {
           pusher:{
             token : function(data,callback){

             },
             room : function(room,callback){
              
             }
           },
           add : function(data, callback){
              addNotificationp(data, callback);
           },
           clear : function(Notificationp, callback){
              $(".Notificationps__List").html('');
           },
           demo : function(callback){
              this.add({
                name: 'Messenger',
                icon: 'https://cdn3.iconfinder.com/data/icons/social-network-30/512/social-04-512.png',
                time: 'Now',
                title: "userName",
                content: 'Hey, are you okay? Just call me',
                sound:1,
                onClick:function(e){
                  alert("llll")
                }
              },callback);         
            }
         }
      })();

      /*
      NotificationpsList.push({
  name: 'Messenger',
  icon: 'https://cdn3.iconfinder.com/data/icons/social-network-30/512/social-04-512.png',
  time: 'Now',
  title: userName,
  content: 'Hey, are you okay? Just call me' },
{
  name: 'Instagram',
  icon: 'https://instagram-brand.com/wp-content/uploads/2016/11/app-icon2.png',
  time: 'Now',
  title: userName,
  content: 'Watch this cute dog' },
{
  name: 'Telegram',
  icon: 'https://cdn3.iconfinder.com/data/icons/free-social-1/60/Telegram-512.png',
  time: 'Now',
  title: userName,
  content: 'Check this link please' },
{
  name: 'Facebook',
  icon: 'https://cdn1.iconfinder.com/data/icons/logotypes/32/square-facebook-512.png',
  time: 'Now',
  title: userName,
  content: '2 Comments on your last post' });

       */

    },3000);
//https://stackoverflow.com/questions/30115242/generating-a-simple-qr-code-with-just-html
(function(win){


//////////////
 

var fb = null;



 var messages = null;

 var callbacks = null;

  var options =null;



  var events = {};



  win.QRRealtime= {

    reset : function(){

      options.k = Date.now()+'k_';

      options.init(options.k);

    },

    send: function(data,f){ 

      if(messages==null){

          QRRealtime.io({

            init:function(k){

                if(!data.k)data.k = k;

                QRRealtime.send(data,f);

            },

           success:function(data,callback){ 



              

           },

           error:function(data){ 

           }     

         });

      }else{

          //id

          if(f){

             data.id_callback = 'ss'+Date.now();

             events[data.id_callback]  = f;

          }

          

          messages.push(data);

      }

      

    },

    io: function(ss){

      options = $.extend({

         init:function(k){



         },

         success:function(data){



         },

         error:function(data){



         },

      room:'qrrealtime',

      io:"https://tu-ech-default-rtdb.firebaseio.com"

      },ss,true);

      

      fb= new Firebase(options.io);

     

       messages =  fb.child(options.room);

       callbacks =  fb.child(options.room+'_callback');

       var loaded = 0;

       callbacks.limitToLast(1).on("child_added", function (snap) {

         if(loaded==1){

             var msg = snap.val();

             

              if(msg.k==options.k){

               

                

               if(msg.response&&msg.id_callback && events[msg.id_callback]){

                   events[msg.id_callback](msg.response); 

                   delete events[msg.id_callback];  

               }



               

            }else{

               options.error(' No Key Found./..');

            } 

         }

      });





       messages.limitToLast(1).on("child_added", function (snap) {

        if(loaded==0){

           loaded =1;

           return;

        }

        var msg = snap.val();

         // console.log('new ',msg); 

         if(msg.k==options.k){

            //success

            options.success(msg,function(d){

               msg.response = d;

               callbacks.push(msg);

            }); 

         }else{

               options.error(' No Key Found./..');

         } 

       }); 



       this.reset();

        

    }

  };

  win.QR = win.QR ||{};
  win.QR.create = function(data){
     var url = "https://api.qrserver.com/v1/create-qr-code/?size=215x215&data="+encodeURIComponent(typeof data=="object"?JSON.stringify(data):data);
     return url;
  };
  win.QR.Scan = function(f){
      if(win.top==win.self){
          var data = {
             native:"scan",
             request:{}
          };
          win.native.on(data,function(res){
             f(res);
          });
          return;
       }

     //call from native
     if(win.Qrcode){
        win.Qrcode(function(code){
            var data = decodeURIComponent(code); 
            if(data){
                try{
                    data = JSON.parse(data);
                }catch(e){}
            }

            if(f)f(data);
        });
    }else{
      console.log("No qrcode")
    }
  };

})(window);



/*
//send from client via Qrcode
QRRealtime.send({k: "1717837981410k_", referrer: 'https://talk.donggiatri.com/?build',passkey:13344},function(res){alert(JSON.stringify(res))});


//from client where show qrcode
$(document).ready(function(){

            QRRealtime.io({

              init:function(k){

                 var data = {k:k,referrer: document.location.href};

                 console.log(data);

                 $('.qrbox img').attr('src','https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+decodeURIComponent(JSON.stringify(data)));

                },

              success:function(data,callback){ 



                 if(data.passkey){

                      

                      $(document).trigger("onUser",[data]);  



                     callback({ok:1});

                 }



                 

              },

              error:function(data){

                 console.error(data);

              }     

            });

        });

*/

$.fn.rateStars= function (options) {
  $(document).ready(function(){
   $("body").append(`<style> 
.front-stars, .back-stars, .star-rating {
  display: flex;
}

.star-rating {
  align-items: center;
  font-size: 3em;
  justify-content: center;
  margin-top: 50px;
}

.back-stars {
  color: #bb5252;
  position: relative;
  text-shadow: 4px 4px 10px #843a3a;
}

.front-stars {
  color: #FFBC0B;
  overflow: hidden;
  position: absolute;
  text-shadow: 2px 2px 5px #d29b09;
  top: 0;
  transition: all 0.5s;
}`);

  });
   return this.each(function(){
      var settings = $.extend({
        value: 70,
        onChange: function(){}
      },options,true);
      var starRatingWrapper = this;
      var ele= $(this);


      ele.addClass("star-rating").attr("title",settings.value).html(`<div class="back-stars">
        <i class="fa fa-star" aria-hidden="true"></i>
        <i class="fa fa-star" aria-hidden="true"></i>
        <i class="fa fa-star" aria-hidden="true"></i>
        <i class="fa fa-star" aria-hidden="true"></i>
        <i class="fa fa-star" aria-hidden="true"></i>
        
        <div class="front-stars" style="width: ${settings.value}%">
            <i class="fa fa-star" aria-hidden="true"></i>
            <i class="fa fa-star" aria-hidden="true"></i>
            <i class="fa fa-star" aria-hidden="true"></i>
            <i class="fa fa-star" aria-hidden="true"></i>
            <i class="fa fa-star" aria-hidden="true"></i>
        </div>
    </div>`);


  
    var frontStars = starRatingWrapper.querySelector('.front-stars');


      function cal(percentage){
         starRatingWrapper.title = percentage;
            frontStars.style.width = percentage+"%"; 
          settings.onChange(percentage);
      }

        $(".back-stars>i").on("click",function(){
          var percentage=($(this).index()+1)*20;
           cal(percentage);
        });
        $(".front-stars>i").on("click",function(){
          var percentage=($(this).index()+1)*20;
          cal(percentage); 
        });

      var methods = {
          set: function(percentage){
            percentage = parseFloat(percentage);
            starRatingWrapper.title = percentage;
            frontStars.style.width = percentage+"%"; 
          },
          get: function(){
             return parseFloat(frontStars.style.width);
          }
      };



      ele.data("rateStars",methods);
   });
};
/**
 
$(document).ready(function(){


  $(".star-rating").rateStars({
     onChange : function (percentage) {
        numberInput.value = percentage;
     }
  });
   
const numberInput = document.querySelector('input');
const rate = e => {
  const percentage = e.target.value + '%';

  $(".star-rating").data("rateStars").set(percentage);
};

numberInput.addEventListener('click', rate);
numberInput.addEventListener('keyup', rate);


});
 */


$.fn.readmore = function(options){
        return this.each(function(){
          var setting = $.extend({height:75},options,true);
           var ele = this;
           var me = $(`<div class="blockread"><div class="slide-read-more"></div><div class="slide-read-more-button read-more-button">Read More</div>
            <div class="slide-read-more-button">Read Less</div></div>`);
            me.insertBefore($(ele));

            $(ele).appendTo(me.find(".slide-read-more"));
          

           var box = me.find(".slide-read-more");


           var initialHeight = box.innerHeight();
            // reduce the text if it's longer than 200px
            if (initialHeight > setting.height) {
              box.css('height', setting.height);
              me.find(".read-more-button").show();
            }

           me.find(".slide-read-more-button").on('click', function () {
            // get current height
            var currentHeight = box.innerHeight();

            // get height with auto applied
            var autoHeight = box.css('height', 'auto').innerHeight();

            // reset height and revert to original if current and auto are equal
            var newHeight = (currentHeight | 0) === (autoHeight | 0) ? setting.height : autoHeight;

            box.css('height', currentHeight).animate({
              height: newHeight });

            // $('html, body').animate({
            //   scrollTop: box.offset().top });

            me.find(".slide-read-more-button").toggle();
          });
           
        });
      };
(function(){
	var data_={};
	var __key__ = "ReduxThunk";
	var events={};
	window.ReduxThunk = function(e,options){
		events[e] = $.extends({},options,true);	
    };
    window.ReduxThunk.trigger = function(e,data){
    	if(events[e]){
    		events[e].run(e,data,data_,window.ReduxThunk.fetch(e));
    	}
    };

    window.ReduxThunk.fetch = function(e,de){
        if(data_[e]){
            data_[e]=de||null;
        }
        window.ReduxThunk["_"+e] = {
            prepend : function(data){
                data_[e].unshift(data);
                save();
                return this;
            },
            update : function(data){
                data_[e] = data;
                save();
                return this;
            },
            append : function(data){
                data_[e].push(data);
                save();
                 return this;
            },
            set : function(k,v){
                data_[e][k]= v;
                save();
                return this;
            },
            get : function(k,v){ 
                return  data_[e][k]||v;
            },
            toList : function(a){
                return data_[e] || (a||null);
            },
            delete : function(f){
                f.call(this);
                 return this;
            }
        };
    	return window.ReduxThunk["_"+e];
    };

    window.ReduxThunk.upload = function(url,f){
    	var a = $.extends({__key__:__key__},data_,true);	

    	post(url,a,function(e){
    		if(f)f();
    	},true);
    };
    window.ReduxThunk.download = function(url,f){
    	post(url,{__key__:__key__},function(e){
    		if(f)f();
    	},true);
    };
    window.ReduxThunk.clear = function(){
        window.localStorage.removeItem(__key__);
    };
    function save(){
        window.localStorage.setItem(__key__,JSON.stringify(data_));
    }
    setTimeout(function(){
    	if(window.localStorage){
    		data_ = window.localStorage.getItem(__key__);
    		try{
    			data_ = JSON.parse(data_);
    		}catch(e){

    		}
    		if(!data_){
    			data_={};
    		}
    	}
    },1200);
})();

// window.ReduxThunk("abc",{ 
// 	run : function(id,data,state,instance){
//     
// 	 	//get state.get("...");
// 		post("",{},function(e){
// 			state.save(e)
// 		},true);
// 	}
// });

// window.ReduxThunk.trigger("abc",{});
// window.ReduxThunk.fetch("abc");
/**
 * Selectize (v0.15.2)
 * https://selectize.dev
 *
 * Copyright (c) 2013-2015 Brian Reavis & contributors
 * Copyright (c) 2020-2023 Selectize Team & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 * @author Ris Adams <selectize@risadams.com>
 */
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    define(['jquery'], factory);
  } else if (typeof module === 'object' && typeof module.exports === 'object') {
    module.exports = factory(require('jquery'));
  } else {
    root.Selectize = factory(root.jQuery);
  }
}(this, function ($) {
  'use strict';
var highlight=function(t,e){var r,a;if("string"!=typeof e||e.length)return r="string"==typeof e?new RegExp(e,"i"):e,a=function(t){var e=0;if(3===t.nodeType){var n,i,o=t.data.search(r);0<=o&&0<t.data.length&&(i=t.data.match(r),(n=document.createElement("span")).className="highlight",(o=t.splitText(o)).splitText(i[0].length),i=o.cloneNode(!0),n.appendChild(i),o.parentNode.replaceChild(n,o),e=1)}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var s=0;s<t.childNodes.length;++s)s+=a(t.childNodes[s]);return e},t.each(function(){a(this)})},MicroEvent=($.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()},function(){}),MicroPlugin=(MicroEvent.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){var e=this._events=this._events||{};if(t in e!=!1)for(var n=0;n<e[t].length;n++)e[t][n].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(t){for(var e=["on","off","trigger"],n=0;n<e.length;n++)t.prototype[e[n]]=MicroEvent.prototype[e[n]]},{});MicroPlugin.mixin=function(o){o.plugins={},o.prototype.initializePlugins=function(t){var e,n,i,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},isArray(t))for(e=0,n=t.length;e<n;e++)"string"==typeof t[e]?s.push(t[e]):(o.plugins.settings[t[e].name]=t[e].options,s.push(t[e].name));else if(t)for(i in t)t.hasOwnProperty(i)&&(o.plugins.settings[i]=t[i],s.push(i));for(;s.length;)o.require(s.shift())},o.prototype.loadPlugin=function(t){var e=this,n=e.plugins,i=o.plugins[t];if(!o.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=i.fn.apply(e,[e.plugins.settings[t]||{}]),n.names.push(t)},o.prototype.require=function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]},o.define=function(t,e){o.plugins[t]={name:t,fn:e}}};const nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():62<e?"-":"_"),"");var Sifter=function(t,e){this.items=t,this.settings=e||{diacritics:!0}},cmp=(Sifter.prototype.tokenize=function(t,e){if(!(t=trim(String(t||"").toLowerCase()))||!t.length)return[];for(var n,i,o=[],s=t.split(/ +/),r=0,a=s.length;r<a;r++){if(n=escape_regex(s[r]),this.settings.diacritics)for(i in DIACRITICS)DIACRITICS.hasOwnProperty(i)&&(n=n.replace(new RegExp(i,"g"),DIACRITICS[i]));e&&(n="\\b"+n),o.push({string:s[r],regex:new RegExp(n,"i")})}return o},Sifter.prototype.iterator=function(t,e){var n=is_array(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)};n.apply(t,[e])},Sifter.prototype.getScoreFunction=function(t,e){function o(t,e){var n;return!t||-1===(n=(t=String(t||"")).search(e.regex))?0:(e=e.string.length/t.length,0===n&&(e+=.5),e)}var s,r=(t=this.prepareSearch(t,e)).tokens,a=t.options.fields,l=r.length,p=t.options.nesting,c=(s=a.length)?1===s?function(t,e){return o(getattr(e,a[0],p),t)}:function(t,e){for(var n=0,i=0;n<s;n++)i+=o(getattr(e,a[n],p),t);return i/s}:function(){return 0};return l?1===l?function(t){return c(r[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;n<l;n++){if((e=c(r[n],t))<=0)return 0;i+=e}return i/l}:function(t){for(var e=0,n=0;e<l;e++)n+=c(r[e],t);return n/l}:function(){return 0}},Sifter.prototype.getSortFunction=function(t,n){var e,i,o,s,r,a,l,p=this,c=!(t=p.prepareSearch(t,n)).query&&n.sort_empty||n.sort,d=function(t,e){return"$score"===t?e.score:getattr(p.items[e.id],t,n.nesting)},u=[];if(c)for(e=0,i=c.length;e<i;e++)!t.query&&"$score"===c[e].field||u.push(c[e]);if(t.query){for(l=!0,e=0,i=u.length;e<i;e++)if("$score"===u[e].field){l=!1;break}l&&u.unshift({field:"$score",direction:"desc"})}else for(e=0,i=u.length;e<i;e++)if("$score"===u[e].field){u.splice(e,1);break}for(a=[],e=0,i=u.length;e<i;e++)a.push("desc"===u[e].direction?-1:1);return(s=u.length)?1===s?(o=u[0].field,r=a[0],function(t,e){return r*cmp(d(o,t),d(o,e))}):function(t,e){for(var n,i=0;i<s;i++)if(n=u[i].field,n=a[i]*cmp(d(n,t),d(n,e)))return n;return 0}:null},Sifter.prototype.prepareSearch=function(t,e){var n,i,o;return"object"==typeof t?t:(n=(e=extend({},e)).fields,i=e.sort,o=e.sort_empty,n&&!is_array(n)&&(e.fields=[n]),i&&!is_array(i)&&(e.sort=[i]),o&&!is_array(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]})},Sifter.prototype.search=function(t,n){var i,o,e=this,s=this.prepareSearch(t,n);return n=s.options,t=s.query,o=n.score||e.getScoreFunction(s),t.length?e.iterator(e.items,function(t,e){i=o(t),(!1===n.filter||0<i)&&s.items.push({score:i,id:e})}):e.iterator(e.items,function(t,e){s.items.push({score:1,id:e})}),(t=e.getSortFunction(s,n))&&s.items.sort(t),s.total=s.items.length,"number"==typeof n.limit&&(s.items=s.items.slice(0,n.limit)),s},function(t,e){return"number"==typeof t&&"number"==typeof e?e<t?1:t<e?-1:0:(t=asciifold(String(t||"")),(e=asciifold(String(e||"")))<t?1:t<e?-1:0)}),extend=function(t,e){for(var n,i,o=1,s=arguments.length;o<s;o++)if(i=arguments[o])for(n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t},getattr=function(t,e,n){if(t&&e){if(!n)return t[e];for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}},trim=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},DIACRITICS={a:"[a]",b:"[bB]",c:"[cCc]",d:"[dDd]",e:"[e]",f:"[f]",g:"[g]",h:"[h]",i:"[iiI]",j:"[j]",k:"[k]",l:"[l]",n:"[nNn]",o:"[o]",p:"[p]",q:"[qq]",r:"[r]",s:"[sSs]",t:"[t]",u:"[u]",v:"[v]",w:"[w]",x:"[x]",y:"[y]",z:"[z]"},asciifold=function(){var t,e,n,i,o="",s={};for(n in DIACRITICS)if(DIACRITICS.hasOwnProperty(n))for(o+=i=DIACRITICS[n].substring(2,DIACRITICS[n].length-1),t=0,e=i.length;t<e;t++)s[i.charAt(t)]=n;var r=new RegExp("["+o+"]","g");return function(t){return t.replace(r,function(t){return s[t]}).toLowerCase()}}(),IS_MAC=uaDetect("macOS",/Mac/),KEY_A=65,KEY_COMMA=188,KEY_RETURN=13,KEY_ESC=27,KEY_LEFT=37,KEY_UP=38,KEY_P=80,KEY_RIGHT=39,KEY_DOWN=40,KEY_N=78,KEY_BACKSPACE=8,KEY_DELETE=46,KEY_SHIFT=16,KEY_CMD=IS_MAC?91:17,KEY_CTRL=IS_MAC?18:17,KEY_TAB=9,TAG_SELECT=1,TAG_INPUT=2,SUPPORTS_VALIDITY_API=!uaDetect("Android",/android/i)&&!!document.createElement("input").validity,isset=function(t){return void 0!==t},isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},hash_key=function(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""},escape_html=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},escape_replace=function(t){return(t+"").replace(/\$/g,"$$$$")},hook={before:function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},after:function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}}},once=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},debounce=function(n,i){var o;return function(){var t=this,e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(t,e)},i)}},debounce_events=function(e,n,t){var i,o=e.trigger,s={};for(i in e.trigger=function(){var t=arguments[0];if(-1===n.indexOf(t))return o.apply(e,arguments);s[t]=arguments},t.apply(e,[]),e.trigger=o,s)s.hasOwnProperty(i)&&o.apply(e,s[i])},watchChildEvent=function(n,t,e,i){n.on(t,e,function(t){for(var e=t.target;e&&e.parentNode!==n[0];)e=e.parentNode;return t.currentTarget=e,i.apply(this,[t])})},getInputSelection=function(t){var e,n,i={};return void 0===t?console.warn("WARN getInputSelection cannot locate input control"):"selectionStart"in t?(i.start=t.selectionStart,i.length=t.selectionEnd-i.start):document.selection&&(t.focus(),e=document.selection.createRange(),n=document.selection.createRange().text.length,e.moveStart("character",-t.value.length),i.start=e.text.length-n,i.length=n),i},transferStyles=function(t,e,n){var i,o,s={};if(n)for(i=0,o=n.length;i<o;i++)s[n[i]]=t.css(n[i]);else s=t.css();e.css(s)},measureString=function(t,e){return t?(Selectize.$testInput||(Selectize.$testInput=$("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),$("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).attr({"aria-hidden":!0}).append(Selectize.$testInput).appendTo("body")),Selectize.$testInput.text(t),transferStyles(e,Selectize.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),Selectize.$testInput.width()):0},autoGrow=function(s){function t(t,e){var n,i,o;e=e||{},(t=t||window.event||{}).metaKey||t.altKey||!e.force&&!1===s.data("grow")||(e=s.val(),t.type&&"keydown"===t.type.toLowerCase()&&(i=48<=(o=t.keyCode)&&o<=57||65<=o&&o<=90||96<=o&&o<=111||186<=o&&o<=222||32===o,o===KEY_DELETE||o===KEY_BACKSPACE?(n=getInputSelection(s[0])).length?e=e.substring(0,n.start)+e.substring(n.start+n.length):o===KEY_BACKSPACE&&n.start?e=e.substring(0,n.start-1)+e.substring(n.start+1):o===KEY_DELETE&&void 0!==n.start&&(e=e.substring(0,n.start)+e.substring(n.start+1)):i&&(o=t.shiftKey,n=String.fromCharCode(t.keyCode),e+=n=o?n.toUpperCase():n.toLowerCase())),i=s.attr("readonly")?0:4,o=(t=s.attr("placeholder"))?measureString(t,s)+i:0,(i=Math.max(measureString(e,s),o)+i)===r)||(r=i,s.width(i),s.triggerHandler("resize"))}var r=null;s.on("keydown keyup update blur",t),t()},domToString=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},logError=function(t,e){e=e||{};console.error("Selectize: "+t),e.explanation&&(console.group&&console.group(),console.error(e.explanation),console.group)&&console.groupEnd()},isJSON=function(t){try{JSON.parse(t)}catch(t){return!1}return!0};function uaDetect(t,e){return navigator.userAgentData?t===navigator.userAgentData.platform:e.test(navigator.userAgent)}var Selectize=function(t,e){var n,i,o=this,s=t[0],r=(s.selectize=o,window.getComputedStyle&&window.getComputedStyle(s,null));if(r=(r?r.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction)||t.parents("[dir]:first").attr("dir")||"",o.settings={},$.extend(o,{order:0,settings:e,$input:t,tabIndex:t.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?TAG_SELECT:TAG_INPUT,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++Selectize.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:t.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",lastOpenTarget:!1,caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===e.loadThrottle?o.onSearchChange:debounce(o.onSearchChange,e.loadThrottle)}),o.sifter=new Sifter(this.options,{diacritics:e.diacritics}),o.settings.options){for(n=0,i=o.settings.options.length;n<i;n++)o.registerOption(o.settings.options[n]);delete o.settings.options}if(o.settings.optgroups){for(n=0,i=o.settings.optgroups.length;n<i;n++)o.registerOptionGroup(o.settings.optgroups[n]);delete o.settings.optgroups}o.settings.mode=o.settings.mode||(1===o.settings.maxItems?"single":"multi"),"boolean"!=typeof o.settings.hideSelected&&(o.settings.hideSelected="multi"===o.settings.mode),o.initializePlugins(o.settings.plugins),o.setupCallbacks(),o.setupTemplates(),o.setup()};MicroEvent.mixin(Selectize),MicroPlugin.mixin(Selectize),$.extend(Selectize.prototype,{setup:function(){var e=this,t=e.settings,n=e.eventNS,i=$(window),o=$(document),s=e.$input,r=e.settings.mode,a=s.attr("class")||"",l=t.showArrow?"":" no-arrow",p=$("<div>").addClass(t.wrapperClass).addClass(a+" selectize-control").addClass(r),l=$("<div>").addClass(t.inputClass+l+" selectize-input items").appendTo(p),c=$('<input type="text" autocomplete="new-password" autofill="no" />').appendTo(l).attr("tabindex",s.is(":disabled")?"-1":e.tabIndex),d=$(t.dropdownParent||p),r=$("<div>").addClass(t.dropdownClass).addClass(r+" selectize-dropdown").hide().appendTo(d),d=$("<div>").addClass(t.dropdownContentClass+" selectize-dropdown-content").attr("tabindex","-1").appendTo(r),u=((u=s.attr("id"))&&(c.attr("id",u+"-selectized"),$("label[for='"+u+"']").attr("for",u+"-selectized")),e.settings.copyClassesToDropdown&&r.addClass(a),p.css({width:s[0].style.width}),e.plugins.names.length&&(u="plugin-"+e.plugins.names.join(" plugin-"),p.addClass(u),r.addClass(u)),(null===t.maxItems||1<t.maxItems)&&e.tagType===TAG_SELECT&&s.attr("multiple","multiple"),e.settings.placeholder&&c.attr("placeholder",t.placeholder),e.settings.search||(c.attr("readonly",!0),c.attr("inputmode","none"),l.css("cursor","pointer")),!e.settings.splitOn&&e.settings.delimiter&&(a=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),e.settings.splitOn=new RegExp("\\s*"+a+"+\\s*")),s.attr("autocorrect")&&c.attr("autocorrect",s.attr("autocorrect")),s.attr("autocapitalize")&&c.attr("autocapitalize",s.attr("autocapitalize")),s.is("input")&&(c[0].type=s[0].type),e.$wrapper=p,e.$control=l,e.$control_input=c,e.$dropdown=r,e.$dropdown_content=d,r.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(t){t.stopImmediatePropagation()}),r.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),r.on("mouseup click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),watchChildEvent(l,"mouseup","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),autoGrow(c),l.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),c.on({mousedown:function(t){""===e.$control_input.val()&&!e.settings.openOnFocus||t.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},input:function(){return e.onInput.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),o.on("keydown"+n,function(t){e.isCmdDown=t[IS_MAC?"metaKey":"ctrlKey"],e.isCtrlDown=t[IS_MAC?"altKey":"ctrlKey"],e.isShiftDown=t.shiftKey}),o.on("keyup"+n,function(t){t.keyCode===KEY_CTRL&&(e.isCtrlDown=!1),t.keyCode===KEY_SHIFT&&(e.isShiftDown=!1),t.keyCode===KEY_CMD&&(e.isCmdDown=!1)}),o.on("mousedown"+n,function(t){if(e.isFocused){if(t.target===e.$dropdown[0]||e.$dropdown.has(t.target).length)return!1;t.target!==e.$control[0]&&e.blur(t.target)}}),i.on(["scroll"+n,"resize"+n].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),i.on("mousemove"+n,function(){e.ignoreHover=e.settings.ignoreHover}),$("<div></div>")),a=s.children().detach();s.replaceWith(u),u.replaceWith(s),this.revertSettings={$children:a,tabindex:s.attr("tabindex")},s.attr("tabindex",-1).hide().after(e.$wrapper),Array.isArray(t.items)&&(e.lastValidValue=t.items,e.setValue(t.items),delete t.items),SUPPORTS_VALIDITY_API&&s.on("invalid"+n,function(t){t.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,s.is(":disabled")&&e.disable(),e.on("change",this.onChange),s.data("selectize",e),s.addClass("selectized"),e.trigger("initialize"),!0===t.preload&&e.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,o=t.settings.valueField,n=t.settings.optgroupLabelField;t.settings.render=$.extend({},{optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[n])+"</div>"},option:function(t,e){var n=t.classes?" "+t.classes:"";return n+=""===t[o]?" selectize-dropdown-emptyoptionlabel":"","<div"+(t.styles?' style="'+t.styles+'"':"")+' class="option'+n+'">'+e(t[i])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[i])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&#x2026;</div>"}},t.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]])&&this.on(t,e)},onClick:function(t){this.isDropdownClosing||this.isFocused&&this.isOpen||(this.focus(),t.preventDefault())},onMouseDown:function(t){var e=this,n=t.isDefaultPrevented(),t=$(t.target);if(e.isFocused||n||window.setTimeout(function(){e.isOpen||e.focus()},0),t!==e.$control_input[0]||""===e.$control_input.val())return"single"===e.settings.mode?e.isOpen?e.close():e.open():(n||e.setActiveItem(null),e.settings.openOnFocus||(e.isOpen&&t===e.lastOpenTarget?(e.close(),e.lastOpenTarget=!1):(e.isOpen||(e.refreshOptions(),e.open()),e.lastOpenTarget=t))),!1},onChange:function(){""!==this.getValue()&&(this.lastValidValue=this.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(t){var o=this;o.isFull()||o.isInputHidden||o.isLocked?t.preventDefault():o.settings.splitOn&&setTimeout(function(){var t=o.$control_input.val();if(t.match(o.settings.splitOn))for(var e=t.trim().split(o.settings.splitOn),n=0,i=e.length;n<i;n++)o.createItem(e[n])},0)},onKeyPress:function(t){var e;return this.isLocked?t&&t.preventDefault():(e=String.fromCharCode(t.keyCode||t.which),this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0)},onKeyDown:function(t){t.target,this.$control_input[0];var e,n=this;if(n.isLocked)t.keyCode!==KEY_TAB&&t.preventDefault();else{switch(t.keyCode){case KEY_A:if(n.isCmdDown)return void n.selectAll();break;case KEY_ESC:return void(n.isOpen&&(t.preventDefault(),t.stopPropagation(),n.close()));case KEY_N:if(!t.ctrlKey||t.altKey)break;case KEY_DOWN:return!n.isOpen&&n.hasOptions?n.open():n.$activeOption&&(n.ignoreHover=!0,(e=n.getAdjacentOption(n.$activeOption,1)).length)&&n.setActiveOption(e,!0,!0),void t.preventDefault();case KEY_P:if(!t.ctrlKey||t.altKey)break;case KEY_UP:return n.$activeOption&&(n.ignoreHover=!0,(e=n.getAdjacentOption(n.$activeOption,-1)).length)&&n.setActiveOption(e,!0,!0),void t.preventDefault();case KEY_RETURN:return void(n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),t.preventDefault()));case KEY_LEFT:return void n.advanceSelection(-1,t);case KEY_RIGHT:return void n.advanceSelection(1,t);case KEY_TAB:return n.settings.selectOnTab&&n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),n.isFull()||t.preventDefault()),void(n.settings.create&&n.createItem()&&n.settings.showAddOptionOnCreate&&t.preventDefault());case KEY_BACKSPACE:case KEY_DELETE:return void n.deleteSelection(t)}!n.isFull()&&!n.isInputHidden||(IS_MAC?t.metaKey:t.ctrlKey)||t.preventDefault()}},onInput:function(t){var e=this,n=e.$control_input.val()||"";e.lastValue!==n&&(e.lastValue=n,e.onSearchChange(n),e.refreshOptions(),e.trigger("type",n))},onSearchChange:function(e){var n=this,i=n.settings.load;i&&!n.loadedSearches.hasOwnProperty(e)&&(n.loadedSearches[e]=!0,n.load(function(t){i.apply(n,[e,t])}))},onFocus:function(t){var e=this,n=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),n||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},onBlur:function(t,e){var n,i=this;i.isFocused&&(i.isFocused=!1,i.ignoreFocus||(n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus&&e.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")},i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()))},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(t){var e,n=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(e=$(t.currentTarget)).hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):void 0!==(e=e.attr("data-value"))&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(e),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&n.setActiveOption(n.getOption(e)))},onItemSelect:function(t){this.isLocked||"multi"===this.settings.mode&&(t.preventDefault(),this.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,n=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||n.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===TAG_SELECT&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){(Array.isArray(t)?t:[t]).join("")!==this.items.join("")&&debounce_events(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setMaxItems:function(t){this.settings.maxItems=t=0===t?null:t,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function(t,e){var n,i,o,s,r,a,l=this;if("single"!==l.settings.mode)if((t=$(t)).length){if("mousedown"===(n=e&&e.type.toLowerCase())&&l.isShiftDown&&l.$activeItems.length){for(a=l.$control.children(".active:last"),a=Array.prototype.indexOf.apply(l.$control[0].childNodes,[a[0]]),(o=Array.prototype.indexOf.apply(l.$control[0].childNodes,[t[0]]))<a&&(r=a,a=o,o=r),i=a;i<=o;i++)s=l.$control[0].childNodes[i],-1===l.$activeItems.indexOf(s)&&($(s).addClass("active"),l.$activeItems.push(s));e.preventDefault()}else"mousedown"===n&&l.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(r=l.$activeItems.indexOf(t[0]),l.$activeItems.splice(r,1),t.removeClass("active")):l.$activeItems.push(t.addClass("active")[0]):($(l.$activeItems).removeClass("active"),l.$activeItems=[t.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}else $(l.$activeItems).removeClass("active"),l.$activeItems=[],l.isFocused&&l.showInput()},setActiveOption:function(t,e,n){var i,o,s,r,a=this;a.$activeOption&&(a.$activeOption.removeClass("active"),a.trigger("dropdown_item_deactivate",a.$activeOption.attr("data-value"))),a.$activeOption=null,(t=$(t)).length&&(a.$activeOption=t.addClass("active"),a.isOpen&&a.trigger("dropdown_item_activate",a.$activeOption.attr("data-value")),!e&&isset(e)||(t=a.$dropdown_content.height(),i=a.$activeOption.outerHeight(!0),e=a.$dropdown_content.scrollTop()||0,r=(s=o=a.$activeOption.offset().top-a.$dropdown_content.offset().top+e)-t+i,t+e<o+i?a.$dropdown_content.stop().animate({scrollTop:r},n?a.settings.scrollDuration:0):o<e&&a.$dropdown_content.stop().animate({scrollTop:s},n?a.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:0}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;return t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0)),t},blur:function(t){return this.$control_input[0].blur(),this.onBlur(null,t),this},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return{fields:t.searchField,conjunction:t.searchConjunction,sort:e="string"==typeof e?[{field:e}]:e,nesting:t.nesting,filter:t.filter,respect_word_boundaries:t.respect_word_boundaries}},search:function(t){var e,n,i,o=this,s=o.settings,r=this.getSearchOptions();if(s.score&&"function"!=typeof(i=o.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(s.normalize&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),o.lastQuery=t,n=o.sifter.search(t,$.extend(r,{score:i})),o.currentResults=n):n=$.extend(!0,{},o.currentResults),s.hideSelected)for(e=n.items.length-1;0<=e;e--)-1!==o.items.indexOf(hash_key(n.items[e].id))&&n.items.splice(e,1);return n},refreshOptions:function(t){void 0===t&&(t=!0);var e,n,i,o,s,r,a,l,p,c,d,u,h,g=this,f=g.$control_input.val().trim(),v=g.search(f),m=g.$dropdown_content,y=g.$activeOption&&hash_key(g.$activeOption.attr("data-value")),w=v.items.length;for("number"==typeof g.settings.maxOptions&&(w=Math.min(w,g.settings.maxOptions)),o={},s=[],e=0;e<w;e++)for(r=g.options[v.items[e].id],a=g.render("option",r),O=r[g.settings.optgroupField]||"",n=0,i=(l=Array.isArray(O)?O:[O])&&l.length;n<i;n++){var C,O=l[n];g.optgroups.hasOwnProperty(O)||"function"!=typeof g.settings.optionGroupRegister||(C=g.settings.optionGroupRegister.apply(g,[O]))&&g.registerOptionGroup(C),g.optgroups.hasOwnProperty(O)||(O=""),o.hasOwnProperty(O)||(o[O]=document.createDocumentFragment(),s.push(O)),o[O].appendChild(a)}for(this.settings.lockOptgroupOrder&&s.sort(function(t,e){return(g.optgroups[t]&&g.optgroups[t].$order||0)-(g.optgroups[e]&&g.optgroups[e].$order||0)}),p=document.createDocumentFragment(),e=0,w=s.length;e<w;e++)g.optgroups.hasOwnProperty(O=s[e])&&o[O].childNodes.length?((c=document.createDocumentFragment()).appendChild(g.render("optgroup_header",g.optgroups[O])),c.appendChild(o[O]),p.appendChild(g.render("optgroup",$.extend({},g.optgroups[O],{html:domToString(c),dom:c})))):p.appendChild(o[O]);if(m.html(p),g.settings.highlight&&(m.removeHighlight(),v.query.length)&&v.tokens.length)for(e=0,w=v.tokens.length;e<w;e++)highlight(m,v.tokens[e].regex);if(!g.settings.hideSelected)for(g.$dropdown.find(".selected").removeClass("selected"),e=0,w=g.items.length;e<w;e++)g.getOption(g.items[e]).addClass("selected");"auto"!==g.settings.dropdownSize.sizeType&&g.isOpen&&g.setupDropdownHeight(),g.positionDropdown(),(d=g.canCreate(f))&&g.settings.showAddOptionOnCreate&&(m.prepend(g.render("option_create",{input:f})),h=$(m[0].childNodes[0])),g.hasOptions=0<v.items.length||d&&g.settings.showAddOptionOnCreate||g.settings.setFirstOptionActive,g.hasOptions?(0<v.items.length?(f=y&&g.getOption(y),""!==v.query&&g.settings.setFirstOptionActive?u=m.find("[data-selectable]:first"):""!==v.query&&f&&f.length?u=f:"single"===g.settings.mode&&g.items.length&&(u=g.getOption(g.items[0])),u&&u.length||(u=h&&!g.settings.addPrecedence?g.getAdjacentOption(h,1):m.find("[data-selectable]:first"))):u=h,g.setActiveOption(u),t&&!g.isOpen&&g.open()):(g.setActiveOption(null),t&&g.isOpen&&g.close())},addOption:function(t){var e,n,i,o=this;if(Array.isArray(t))for(e=0,n=t.length;e<n;e++)o.addOption(t[e]);else(i=o.registerOption(t))&&(o.userOptions[i]=!0,o.lastQuery=null,o.trigger("option_add",i,t))},registerOption:function(t){var e=hash_key(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=hash_key(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,e){var n,i,o,s=this;if(t=hash_key(t),n=hash_key(e[s.settings.valueField]),null!==t&&s.options.hasOwnProperty(t)){if("string"!=typeof n)throw new Error("Value must be set in option data");o=s.options[t].$order,n!==t&&(delete s.options[t],-1!==(i=s.items.indexOf(t)))&&s.items.splice(i,1,n),e.$order=e.$order||o,s.options[n]=e,i=s.renderCache.item,o=s.renderCache.option,i&&(delete i[t],delete i[n]),o&&(delete o[t],delete o[n]),-1!==s.items.indexOf(n)&&(i=s.getItem(t),o=$(s.render("item",e)),i.hasClass("active")&&o.addClass("active"),i.replaceWith(o)),s.lastQuery=null,s.isOpen&&s.refreshOptions(!1)}},removeOption:function(t,e){var n=this,i=(t=hash_key(t),n.renderCache.item),o=n.renderCache.option;i&&delete i[t],o&&delete o[t],delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)},clearOptions:function(t){var n=this,i=(n.loadedSearches={},n.userOptions={},n.renderCache={},n.options);$.each(n.options,function(t,e){-1==n.items.indexOf(t)&&delete i[t]}),n.options=n.sifter.items=i,n.lastQuery=null,n.trigger("option_clear"),n.clear(t)},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var t=this.$dropdown.find("[data-selectable]");return 0<t.length?t.eq(0):$()},getAdjacentOption:function(t,e){var n=this.$dropdown.find("[data-selectable]"),t=n.index(t)+e;return 0<=t&&t<n.length?n.eq(t):$()},getElementWithValue:function(t,e){if(null!=(t=hash_key(t)))for(var n=0,i=e.length;n<i;n++)if(e[n].getAttribute("data-value")===t)return $(e[n]);return $()},getElementWithTextContent:function(t,e,n){if(null!=(t=hash_key(t)))for(var i=0,o=n.length;i<o;i++){var s=n[i].textContent;if(1==e&&(s=null!==s?s.toLowerCase():null,t=t.toLowerCase()),s===t)return $(n[i])}return $()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},getFirstItemMatchedByTextContent:function(t,e){return this.getElementWithTextContent(t,e=null!==e&&!0===e,this.$dropdown_content.find("[data-selectable]"))},addItems:function(t,e){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,i=0;i<n.length;i++)this.buffer.appendChild(n[i]);for(var o=Array.isArray(t)?t:[t],i=0,s=o.length;i<s;i++)this.isPending=i<s-1,this.addItem(o[i],e);t=this.$control[0];t.insertBefore(this.buffer,t.firstChild),this.buffer=null},addItem:function(s,r){debounce_events(this,r?[]:["change"],function(){var t,e,n,i=this,o=i.settings.mode;s=hash_key(s),-1!==i.items.indexOf(s)?"single"===o&&i.close():i.options.hasOwnProperty(s)&&("single"===o&&i.clear(r),"multi"===o&&i.isFull()||(t=$(i.render("item",i.options[s])),n=i.isFull(),i.items.splice(i.caretPos,0,s),i.insertAtCaret(t),i.isPending&&(n||!i.isFull())||i.refreshState(),i.isSetup&&(n=i.$dropdown_content.find("[data-selectable]"),i.isPending||(e=i.getOption(s),e=i.getAdjacentOption(e,1).attr("data-value"),i.refreshOptions(i.isFocused&&"single"!==o),e&&i.setActiveOption(i.getOption(e))),!n.length||i.isFull()?i.close():i.isPending||i.positionDropdown(),i.updatePlaceholder(),i.trigger("item_add",s,t),i.isPending||i.updateOriginalInput({silent:r}))))})},removeItem:function(t,e){var n,i,o=this,s=t instanceof $?t:o.getItem(t);t=hash_key(s.attr("data-value")),-1!==(n=o.items.indexOf(t))&&(o.trigger("item_before_remove",t,s),s.remove(),s.hasClass("active")&&(s.removeClass("active"),i=o.$activeItems.indexOf(s[0]),o.$activeItems.splice(i,1),s.removeClass("active")),o.items.splice(n,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(t)&&o.removeOption(t,e),n<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:e}),o.positionDropdown(),o.trigger("item_remove",t,s))},createItem:function(t,n){var i=this,o=i.caretPos,s=(t=t||(i.$control_input.val()||"").trim(),arguments[arguments.length-1]);if("function"!=typeof s&&(s=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(t))return s(),!1;i.lock();var e="function"==typeof i.settings.create?this.settings.create:function(t){var e={},t=e[i.settings.labelField]=t;if(!i.settings.formatValueToKey||"function"!=typeof i.settings.formatValueToKey||null!=(t=i.settings.formatValueToKey.apply(this,[t]))&&"object"!=typeof t&&"function"!=typeof t)return e[i.settings.valueField]=t,e;throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.')},r=once(function(t){var e;return i.unlock(),!t||"object"!=typeof t||"string"!=typeof(e=hash_key(t[i.settings.valueField]))?s():(i.setTextboxValue(""),i.addOption(t),i.setCaret(o),i.addItem(e),i.refreshOptions(n&&"single"!==i.settings.mode),void s(t))}),e=e.apply(this,[t,r]);return void 0!==e&&r(e),!0},refreshItems:function(t){this.lastQuery=null,this.isSetup&&this.addItem(this.items,t),this.refreshState(),this.updateOriginalInput({silent:t})},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var t=this,e=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!$.isEmptyObject(t.options)).toggleClass("has-items",0<t.items.length),t.$control_input.data("grow",!e&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,n,i,o,s,r,a=this;t=t||{},a.tagType===TAG_SELECT?(o=a.$input.find("option"),e=[],n=[],i=[],r=[],o.get().forEach(function(t){e.push(t.value)}),a.items.forEach(function(t){s=a.options[t][a.settings.labelField]||"",r.push(t),-1==e.indexOf(t)&&n.push('<option value="'+escape_html(t)+'" selected="selected">'+escape_html(s)+"</option>")}),i=e.filter(function(t){return r.indexOf(t)<0}).map(function(t){return'option[value="'+escape_html(t)+'"]'}),e.length-i.length+n.length!==0||a.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.find(i.join(", ")).remove(),a.$input.append(n.join(""))):(a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val())),a.isSetup&&!t.silent&&a.trigger("change",a.$input.val())},updatePlaceholder:function(){var t;this.settings.placeholder&&(t=this.$control_input,this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0}))},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.setupDropdownHeight(),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.isBlurring)&&t.$control_input[0].blur(),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position(),n=(e.top+=t.outerHeight(!0),"fit-content"===this.$wrapper[0].style.width||"body"===this.settings.dropdownParent?"max-content":"100%");this.settings.minWidth&&this.settings.minWidth>n&&(n=this.settings.minWidth),"body"!==this.settings.dropdownParent&&"max-content"===n&&t.outerWidth(!0)>=this.$dropdown.outerWidth(!0)&&(n="100%"),this.$dropdown.css({width:n,minWidth:t.outerWidth(!0),top:e.top,left:e.left})},setupDropdownHeight:function(){if("object"==typeof this.settings.dropdownSize&&"auto"!==this.settings.dropdownSize.sizeType){var t=this.settings.dropdownSize.sizeValue;if("numberItems"===this.settings.dropdownSize.sizeType){for(var e=this.$dropdown_content.find("*").not(".optgroup, .highlight").not(this.settings.ignoreOnDropwdownHeight),n=0,i=0,o=0,s=0,r=0;r<t;r++){var a=$(e[r]);if(0===a.length)break;n+=a.outerHeight(!0),void 0===a.data("selectable")&&(a.hasClass("optgroup-header")&&(a=window.getComputedStyle(a.parent()[0],":before"))&&(i=a.marginTop?Number(a.marginTop.replace(/\W*(\w)\w*/g,"$1")):0,o=a.marginBottom?Number(a.marginBottom.replace(/\W*(\w)\w*/g,"$1")):0,s=a.borderTopWidth?Number(a.borderTopWidth.replace(/\W*(\w)\w*/g,"$1")):0),t++)}t=n+(this.$dropdown_content.css("padding-top")?Number(this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1")):0)+(this.$dropdown_content.css("padding-bottom")?Number(this.$dropdown_content.css("padding-bottom").replace(/\W*(\w)\w*/g,"$1")):0)+i+o+s+"px"}else if("fixedHeight"!==this.settings.dropdownSize.sizeType)return void console.warn('Selectize.js - Value of "sizeType" must be "fixedHeight" or "numberItems');this.$dropdown_content.css({height:t,maxHeight:"none"})}},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length),t=t[0],n=this.buffer||this.$control[0];0===e?n.insertBefore(t,n.firstChild):n.insertBefore(t,n.childNodes[e]),this.setCaret(e+1)},deleteSelection:function(t){var e,n,i,o,s,r=this,a=t&&t.keyCode===KEY_BACKSPACE?-1:1,l=getInputSelection(r.$control_input[0]);if(r.$activeOption&&!r.settings.hideSelected&&(o=("string"==typeof r.settings.deselectBehavior&&"top"===r.settings.deselectBehavior?r.getFirstOption():r.getAdjacentOption(r.$activeOption,-1)).attr("data-value")),i=[],r.$activeItems.length){for(s=r.$control.children(".active:"+(0<a?"last":"first")),s=r.$control.children(":not(input)").index(s),0<a&&s++,e=0,n=r.$activeItems.length;e<n;e++)i.push($(r.$activeItems[e]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(r.isFocused||"single"===r.settings.mode)&&r.items.length&&(a<0&&0===l.start&&0===l.length?i.push(r.items[r.caretPos-1]):0<a&&l.start===r.$control_input.val().length&&i.push(r.items[r.caretPos]));if(!i.length||"function"==typeof r.settings.onDelete&&!1===r.settings.onDelete.apply(r,[i]))return!1;for(void 0!==s&&r.setCaret(s);i.length;)r.removeItem(i.pop());return r.showInput(),r.positionDropdown(),r.refreshOptions(!0),o&&(t=r.getOption(o)).length&&r.setActiveOption(t),!0},advanceSelection:function(t,e){var n,i,o,s=this;0!==t&&(s.rtl&&(t*=-1),n=0<t?"last":"first",o=getInputSelection(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(i=s.$control_input.val().length,(t<0?0!==o.start||0!==o.length:o.start!==i)||i||s.advanceCaret(t,e)):(o=s.$control.children(".active:"+n)).length&&(i=s.$control.children(":not(input)").index(o),s.setActiveItem(null),s.setCaret(0<t?i+1:i)))},advanceCaret:function(t,e){var n,i=this;0!==t&&(i.isShiftDown?(n=i.$control_input[0<t?"next":"prev"]()).length&&(i.hideInput(),i.setActiveItem(n),e)&&e.preventDefault():i.setCaret(i.caretPos+t))},setCaret:function(t){var e=this;if(t="single"===e.settings.mode?e.items.length:Math.max(0,Math.min(e.items.length,t)),!e.isPending)for(var n,i=e.$control.children(":not(input)"),o=0,s=i.length;o<s;o++)n=$(i[o]).detach(),o<t?e.$control_input.before(n):e.$control.append(n);e.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var t=this,e=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),0==--Selectize.count&&Selectize.$testInput&&(Selectize.$testInput.remove(),Selectize.$testInput=void 0),$(window).off(e),$(document).off(e),$(document.body).off(e),delete t.$input[0].selectize},render:function(t,e){var n,i,o="",s=!1,r=this;return(s="option"!==t&&"item"!==t?s:!!(n=hash_key(e[r.settings.valueField])))&&(isset(r.renderCache[t])||(r.renderCache[t]={}),r.renderCache[t].hasOwnProperty(n))?r.renderCache[t][n]:(o=$(r.settings.render[t].apply(this,[e,escape_html])),"option"===t||"option_create"===t?e[r.settings.disabledField]||o.attr("data-selectable",""):"optgroup"===t&&(i=e[r.settings.optgroupValueField]||"",o.attr("data-group",i),e[r.settings.disabledField])&&o.attr("data-disabled",""),"option"!==t&&"item"!==t||o.attr("data-value",n||""),s&&(r.renderCache[t][n]=o[0]),o[0])},clearCache:function(t){void 0===t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){var e;return!!this.settings.create&&(e=this.settings.createFilter,t.length)&&("function"!=typeof e||e.apply(this,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))}}),Selectize.count=0,Selectize.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",respect_word_boundaries:!1,normalize:!0,mode:null,wrapperClass:"",inputClass:"",dropdownClass:"",dropdownContentClass:"",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},ignoreOnDropwdownHeight:"img, i",search:!0,showArrow:!0,render:{}},$.fn.selectize=function(c){function d(t,o){function e(t,e){t=$(t);var n,i=hash_key(t.val());(i||v.allowEmptyOption)&&(l.hasOwnProperty(i)?e&&((n=l[i][O])?Array.isArray(n)?n.push(e):l[i][O]=[n,e]:l[i][O]=e):((n=p(t)||{})[y]=n[y]||t.text(),n[w]=n[w]||i,n[C]=n[C]||t.prop("disabled"),n[O]=n[O]||e,n.styles=t.attr("style")||"",n.classes=t.attr("class")||"",l[i]=n,a.push(n),t.is(":selected")&&o.items.push(i)))}var n,i,s,r,a=o.options,l={},p=function(t){var e=m&&t.attr(m),t=t.data(),n={};return"string"==typeof e&&e.length&&(isJSON(e)?Object.assign(n,JSON.parse(e)):n[e]=e),Object.assign(n,t),n||null};for(o.maxItems=t.attr("multiple")?null:1,n=0,i=(r=t.children()).length;n<i;n++)if("optgroup"===(s=r[n].tagName.toLowerCase())){g=h=u=d=c=void 0;var c,d,u,h,g,f=r[n];for((u=(f=$(f)).attr("label"))&&((h=p(f)||{})[_]=u,h[b]=u,h[C]=f.prop("disabled"),o.optgroups.push(h)),c=0,d=(g=$("option",f)).length;c<d;c++)e(g[c],u)}else"option"===s&&e(r[n])}var u=$.fn.selectize.defaults,v=$.extend({},u,c),m=v.dataAttr,y=v.labelField,w=v.valueField,C=v.disabledField,O=v.optgroupField,_=v.optgroupLabelField,b=v.optgroupValueField;return this.each(function(){if(!this.selectize){var t=$(this),e=this.tagName.toLowerCase(),n=t.attr("placeholder")||t.attr("data-placeholder"),i=(n||v.allowEmptyOption||(n=t.children('option[value=""]').text()),v.allowEmptyOption&&v.showEmptyOptionInDropdown&&!t.children('option[value=""]').length&&(l=t.html(),i=escape_html(v.emptyOptionLabel||"--"),t.html('<option value="">'+i+"</option>"+l)),{placeholder:n,options:[],optgroups:[],items:[]});if("select"===e)d(t,i);else{var o,s,r,a,l=t,p=i,n=l.attr(m);if(n)for(p.options=JSON.parse(n),o=0,s=p.options.length;o<s;o++)p.items.push(p.options[o][w]);else{n=(l.val()||"").trim();if(v.allowEmptyOption||n.length){for(o=0,s=(r=n.split(v.delimiter)).length;o<s;o++)(a={})[y]=r[o],a[w]=r[o],p.options.push(a);p.items=r}}}new Selectize(t,$.extend(!0,{},u,i,c)).settings_user=c}})},$.fn.selectize.defaults=Selectize.defaults,$.fn.selectize.support={validity:SUPPORTS_VALIDITY_API},Selectize.define("auto_position",function(){var r=this;const a={top:"top",bottom:"bottom"};r.positionDropdown=function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position(),n=(e.top+=t.outerHeight(!0),this.$dropdown.prop("scrollHeight")+5),i=this.$control.get(0).getBoundingClientRect().top,o=this.$wrapper.height(),s=r.$control.get(0).getBoundingClientRect().bottom,i=i+n+o>window.innerHeight&&0<=s-n-o?a.top:a.bottom,s="fit-content"===this.$wrapper[0].style.width||"body"===this.settings.dropdownParent?"max-content":"100%",n={width:s,minWidth:t.outerWidth(!0),left:e.left};i===a.top?(o={bottom:e.top,top:"unset"},"body"===this.settings.dropdownParent&&(o.top=e.top-this.$dropdown.outerHeight(!0)-t.outerHeight(!0),o.bottom="unset"),Object.assign(n,o),this.$dropdown.addClass("selectize-position-top"),this.$control.addClass("selectize-position-top")):(Object.assign(n,{top:e.top,bottom:"unset"}),this.$dropdown.removeClass("selectize-position-top"),this.$control.removeClass("selectize-position-top")),"body"!==this.settings.dropdownParent&&"max-content"==s&&(t.outerWidth(!0),this.$dropdown.outerWidth(!0)),this.$dropdown.css(n)}}),Selectize.define("auto_select_on_type",function(t){var n,i=this;i.onBlur=(n=i.onBlur,function(t){var e=i.getFirstItemMatchedByTextContent(i.lastValue,!0);return void 0!==e.attr("data-value")&&i.getValue()!==e.attr("data-value")&&i.setValue(e.attr("data-value")),n.apply(this,arguments)})}),Selectize.define("autofill_disable",function(t){var e,n=this;n.setup=(e=n.setup,function(){e.apply(n,arguments),n.$control_input.attr({name:nanoid(21),autocomplete:nanoid(21)})})}),Selectize.define("clear_button",function(e){var t,n=this;e=$.extend({title:"Clear",className:"clear",label:"",html:function(t){return'<a class="'+t.className+'" title="'+t.title+'"> '+t.label+"</a>"}},e),n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$button_clear=$(e.html(e)),"single"===n.settings.mode&&n.$wrapper.addClass("single"),n.$wrapper.append(n.$button_clear),""!==n.getValue()&&0!==n.getValue().length||n.$wrapper.find("."+e.className).css("display","none"),n.on("change",function(){""===n.getValue()||0===n.getValue().length?n.$wrapper.find("."+e.className).css("display","none"):n.$wrapper.find("."+e.className).css("display","")}),n.$wrapper.on("click","."+e.className,function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),n.isLocked||(n.clear(),n.$wrapper.find("."+e.className).css("display","none"))})})}),Selectize.define("drag_drop",function(t){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');var i,e,n,o;"multi"===this.settings.mode&&((i=this).lock=(e=i.lock,function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}),i.unlock=(n=i.unlock,function(){var t=i.$control.data("sortable");return t&&t.enable(),n.apply(i,arguments)}),i.setup=(o=i.setup,function(){o.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var t=i.$activeItems?i.$activeItems.slice():null,e=[];n.children("[data-value]").each(function(){e.push($(this).attr("data-value"))}),i.isFocused=!1,i.setValue(e),i.isFocused=!0,i.setActiveItem(t),i.positionDropdown()}})}))}),Selectize.define("dropdown_header",function(t){var e,n=this;t=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&#xd7;</a></div></div>'}},t),n.setup=(e=n.setup,function(){e.apply(n,arguments),n.$dropdown_header=$(t.html(t)),n.$dropdown.prepend(n.$dropdown_header),n.$dropdown_header.find("."+t.closeClass).on("click",function(){n.close()})})}),Selectize.define("optgroup_columns",function(r){function t(){var t,e,n,i,o=$("[data-group]",a.$dropdown_content),s=o.length;if(s&&a.$dropdown_content.width()){if(r.equalizeHeight){for(t=e=0;t<s;t++)e=Math.max(e,o.eq(t).height());o.css({height:e})}r.equalizeWidth&&(i=a.$dropdown_content.innerWidth()-l(),n=Math.round(i/s),o.css({width:n}),1<s)&&(i=i-n*(s-1),o.eq(s-1).css({width:i}))}}var i,a=this,l=(r=$.extend({equalizeWidth:!0,equalizeHeight:!0},r),this.getAdjacentOption=function(t,e){var n=t.closest("[data-group]").find("[data-selectable]"),t=n.index(t)+e;return 0<=t&&t<n.length?n.eq(t):$()},this.onKeyDown=(i=a.onKeyDown,function(t){var e,n;if(!this.isOpen||t.keyCode!==KEY_LEFT&&t.keyCode!==KEY_RIGHT)return i.apply(this,arguments);a.ignoreHover=!0,e=(n=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),(n=(n=(n=t.keyCode===KEY_LEFT?n.prev("[data-group]"):n.next("[data-group]")).find("[data-selectable]")).eq(Math.min(n.length-1,e))).length&&this.setActiveOption(n)}),function(){var t,e=l.width,n=document;return void 0===e&&((t=n.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=l.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e});(r.equalizeHeight||r.equalizeWidth)&&(hook.after(this,"positionDropdown",t),hook.after(this,"refreshOptions",t))}),Selectize.define("read-only",function(t){var e;this.setup=(e=this.setup,function(){e.apply(this,arguments),this.$dropdown.hasClass("read-only")&&this.$control_input.attr("readonly","readonly")}),this.readonly=function(t){t?(this.$control_input.attr("readonly","readonly"),this.$dropdown.addClass("read-only")):(this.$control_input.removeAttr("readonly"),this.$dropdown.removeClass("read-only"))}}),Selectize.define("remove_button",function(t){var s,e,n,i,r;"single"!==this.settings.mode&&(t=$.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},t),i=s=this,r='<a href="javascript:void(0)" class="'+(e=t).className+'" tabindex="-1" title="'+escape_html(e.title)+'">'+e.label+"</a>",s.setup=(n=i.setup,function(){var o;e.append&&(o=i.settings.render.item,i.settings.render.item=function(t){return e=o.apply(s,arguments),n=r,i=e.search(/(<\/[^>]+>\s*)$/),e.substring(0,i)+n+e.substring(i);var e,n,i}),n.apply(s,arguments),s.$control.on("click","."+e.className,function(t){if(t.preventDefault(),!i.isLocked)return t=$(t.currentTarget).parent(),i.setActiveItem(t),i.deleteSelection()&&i.setCaret(i.items.length),!1})}))}),Selectize.define("restore_on_backspace",function(n){var i,t=this;n.text=n.text||function(t){return t[this.settings.labelField]},this.onKeyDown=(i=t.onKeyDown,function(t){var e;if(!(t.keyCode===KEY_BACKSPACE&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(e=this.caretPos-1)&&e<this.items.length))return i.apply(this,arguments);e=this.options[this.items[e]],this.deleteSelection(t)&&(this.setTextboxValue(n.text.apply(this,[e])),this.refreshOptions(!0)),t.preventDefault()})}),Selectize.define("select_on_focus",function(t){var n,e,i=this;i.on("focus",(n=i.onFocus,function(t){var e=i.getItem(i.getValue()).text();return i.clear(),i.setTextboxValue(e),i.$control_input.select(),setTimeout(function(){i.settings.selectOnTab&&i.setActiveOption(i.getFirstItemMatchedByTextContent(e)),i.settings.score=null},0),n.apply(this,arguments)})),i.onBlur=(e=i.onBlur,function(t){return""===i.getValue()&&i.lastValidValue!==i.getValue()&&i.setValue(i.lastValidValue),setTimeout(function(){i.settings.score=function(){return function(){return 1}}},0),e.apply(this,arguments)}),i.settings.score=function(){return function(){return 1}}}),Selectize.define("tag_limit",function(o){const t=this;o.tagLimit=o.tagLimit,this.onBlur=function(){const i=t.onBlur;return function(t){if(i.apply(this,t),t){var t=this.$control,e=t.find(".item");const n=o.tagLimit;void 0===n||e.length<=n||(e.toArray().forEach(function(t,e){e<n||$(t).hide()}),t.append("<span><b>"+(e.length-n)+"</b></span>"))}}}(),this.onFocus=function(){const e=t.onFocus;return function(t){e.apply(this,t),t&&((t=this.$control).find(".item").show(),t.find("span").remove())}}()});
  return Selectize;
}));
//c-share.js
/*!
 * c-share.js v1.0.0
 * https://github.com/ycs77/jquery-plugin-c-share
 *
 * Copyright 2019 Chen-shin, Yang
 * Released under the MIT license
 *
 * Date: 2019-01-11T08:41:34.048Z
 * https://www.jqueryscript.net/demo/social-share-buttons-c/
 */
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a():"function"==typeof define&&define.amd?define(a):a()}(0,(function(){"use strict";$.fn&&($.fn.cShare=function(t){var a=this,n={description:"",show_buttons:["fb","gPlus"],data:{fb:{fa:"fab fa-facebook-f",name:"Fb",href:function(t){return"https://www.facebook.com/sharer.php?u="+t},show:!0},gPlus:{fa:"fab fa-google-plus-g",name:"Google+",href:function(t){return"https://plus.google.com/share?url="+t},show:!0},line:{fa:"fab fa-line fa-2x",name:"Line",href:function(t){return"https://lineit.line.me/share/ui?url="+t},show:!0,hideWrapper:!0},plurk:{fa:"fa-plurk",name:"Plurk",href:function(t,a){return"http://www.plurk.com/?qualifier=shares&status="+a+" "+t},show:!1},weibo:{fa:"fab fa-weibo",name:"",href:function(t,a){return"http://service.weibo.com/share/share.php?title="+a+"&url="+t},show:!1},twitter:{fa:"fab fa-twitter",name:"Twitter",href:function(t,a){return"https://twitter.com/intent/tweet?original_referer="+t+"&url="+t+"&text="+a},show:!1},tumblr:{fa:"fab fa-tumblr",name:"Tumblr",href:function(t,a){return"http://www.tumblr.com/share/link?name="+a+" "+t+"&url="+t},show:!1},pinterest:{fa:"fab fa-pinterest-p",name:"Pinterest",href:function(t,a){return"http://pinterest.com/pin/create/button/?url="+t+"&description="+a+" "+t},show:!1},email:{fa:"fas fa-envelope",name:"E-mail",href:function(t,a){return"mailto:?subject="+a+"&body="+a+" "+t},show:!1}},spacing:6},e=location.href.replace(/#\w/,""),i=navigator.userAgent.match(/(mobile|android|pad)/i),s=$.extend({},n,t);return t&&(s.data=$.extend({},n.data,t.data)),s.show_buttons.forEach((function(t){var n=s.data[t];a.append('\n        <a href="'+n.href.call(null,e,s.description)+'" title="Share On '+n.name+'" target="_blank" data-icon="'+t+'">\n          <span class="fa-stack">\n            '+(n.hideWrapper?"":'<i class="fas fa-circle fa-stack-2x"></i>')+'\n            <i class="'+n.fa+' fa-stack-1x"></i>\n          </span>\n        </a>\n      ')})),this.find(".fa-plurk").text("P"),this.find("a").click((function(t){i||(t.preventDefault(),window.open($(this).attr("href"),"_blank","height=600,width=500"))})),this.children("a").css({display:"inline-block",margin:"auto "+Number(s.spacing)/2+"px","text-decoration":"none","-webkit-transition":"all .2s","-moz-transition":"all .2s",transition:"all .2s"}),i||this.children("a").hover((function(){$(this).css({"-webkit-transform":"translateY(-4px)","-ms-transform":"translateY(-4px)",transform:"translateY(-4px)"})}),(function(){$(this).css({"-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"})})),this.find(".fa-stack-1x").css("color","#ffffff"),this.find("[data-icon=fb] .fa-stack-2x").css("color","#3B5998"),this.find("[data-icon=gPlus] .fa-stack-2x").css("color","#d73d32"),this.find("[data-icon=line] .fa-stack-1x").css("color","#00c300"),this.find("[data-icon=plurk] .fa-stack-2x").css("color","#cf682f"),this.find("[data-icon=plurk] .fa-plurk").css({"font-family":"arial","font-style":"normal","font-weight":"bold"}),this.find("[data-icon=weibo] .fa-stack-2x").css("color","#F5CA59"),this.find("[data-icon=twitter] .fa-stack-2x").css("color","#2ba9e1"),this.find("[data-icon=tumblr] .fa-stack-2x").css("color","#35465d"),this.find("[data-icon=pinterest] .fa-stack-2x").css("color","#EA1514"),this.find("[data-icon=email] .fa-stack-2x").css("color","#939598"),this})}));
(function(win){

win.addEventListener("click",function(e){
  var ele = $(e.target).closest("[data-share-message]");
  if(ele.attr("data-share-message")){
     win.Share({
        title:ele.attr("data-share-title")?ele.attr("data-share-title"):document.title,
        message:ele.attr("data-share-message"),
        text:ele.attr("data-share-message")
    });
  }
},true);



setTimeout(function(){
   
if(!win.Share){

   if(win.navigator.share){

        win.Share = function(data){
          if(win.top==win.self){
            var data = {
               native:"Share",
               request:{}
            };
            win.native.on(data,function(res){
              
            });
            return;
         }

               // const shareData = {
               //   title: "MDN",
               //   text: "Learn web development on MDN!",
               //   url: "https://developer.mozilla.org",
               // };
         data = typeof data!="object"?{title:data}:data;
         data.url = data.url || document.URL;
         data.text = data.text || data.title;
          
             navigator.share(data).then(function(r){

             });
        };
      
   }else{
 


  win.Share = (function() {
    
    function socialWindow(url, width, height) {
    var left = (screen.width - width) / 2;
    var top = (screen.height - height) / 2;
    var params = "menubar=no,toolbar=no,status=no,width=" + width + ",height=" + height + ",top=" + top + ",left=" + left;
    win.open(url,"",params);
  }
      
     

      $(document).ready(function(){
         $("body").append(`<div class="share__wrapper">
  <div class="body">
      <p class="share__title">Share this content:</p>
  <ul class="share__list">
    <li class="share__item">
      <a class="share__link  share__link--facebook" target="_blank">
        <i class="fab fa fa-facebook-f fa-2x"></i>
        <span class="sr-only">Share on Facebook</span>
      </a>
    </li>
    <li class="share__item">
      <a class="share__link share__link--twitter" target="_blank">
        <i class="fab fa fa-twitter fa-2x"></i>
        <span class="sr-only">Share on Twitter</span>
      </a>
    </li>
    <li class="share__item">
      <a class="share__link share__link--linkedin" target="_blank">
        <i class="fab fa fa-linkedin fa-2x"></i>
        <span class="sr-only">Share on LinkedIn</span>
      </a>
    </li>
    <li class="share__item">
      <a class="share__link share__link--mail">
        <i class="far fa fa-envelope fa-2x"></i>
        <span class="sr-only">Share via Mail</span>
      </a>
    </li>
    <li class="share__item">
      <a class="share__link share__link--whatsapp">
        <i class="fab fa fa-whatsapp fa-2x"></i>
        <span class="sr-only">Share on WhatsApp</span>
      </a>
    </li>
  </ul>
  </div>
</div>
<style>
.share__wrapper{display:none;position:fixed;bottom:0;width:100%;left:0;z-index:10000000;height:100%;background-color:rgb(51 51 51 / 31%)}.share__wrapper .body{position:absolute;bottom:0;background-color:#fff;padding:16px 16px 60px;border-radius:16px 16px 0 0;overflow:hidden;width:100%}.share__title{align-self:flex-end;margin-bottom:0;font-size:1.25rem}.share__list{display:flex;flex:1;margin:0;list-style:none}.share__item+.share__item{margin-left:1rem}.share__link{border:none;background-color:#eee;width:45px;height:45px;line-height:55px;text-align:center;border-radius:50%;display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;}
 
</style>`);
      });

      var pageUrl = (document.URL);
      var pageTitle = (document.title);

      $(document).on('click',".share__wrapper", function (event) {  
         
         setTimeout(function(){
           $(".share__wrapper").hide();
         },100);

      });
      return function(data){
        var ele= $(".share__wrapper");

         data = typeof data!="object"?{title:data}:data;
         data.url = data.url || document.URL;
         data.text = data.text || "Share this content:";
 
         pageTitle = data.title;
         pageUrl = data.url||pageUrl;
         if(data.image){
            ele.find(".share__image").attr("src",data.image);
         }
         
         ele.find(".share__title").html(data.text);

         ele.find(".share__link--facebook").attr("href","https://www.facebook.com/sharer.php?open=true&u=" + pageUrl);
         ele.find(".share__link--twitter").attr("href","https://twitter.com/intent/tweet?open=true&url=" + pageUrl + "&text=" + pageTitle);
         ele.find(".share__link--linkedin").attr("href","https://www.linkedin.com/shareArticle?open=true&mini=true&url=" + pageUrl);
         ele.find(".share__link--whatsapp").attr("href","whatsapp://send?text=" + pageTitle + "%20" + pageUrl);
         ele.find(".share__link--mail").attr("href", "mailto:?subject=%22" + pageTitle + "%22&body=Read%20the%20article%20%22" + pageTitle + "%22%20on%20" + pageUrl);


         ele.show();
      };
    })();
}
}


var tlp_share =`
  <div class="sheet-modal {{id}}" data-close-on-escape="true" data-swipe-to-close="true">
    <div class="toolbar">
      <div class="toolbar-inner">
        <div class="left">Chia s</div>
        <div class="right">
          <a class="link sheet-close">
            <i class="fa-solid fa-xmark"></i>
          </a>
        </div>
      </div>
    </div>
    <div class="sheet-modal-inner">
      <div class="swipe-handler"></div>
      <div class="page-content">
            
      </div>
    </div>
  </div>`;
 
window.f7PopupShare = function(ele,options){
    var params = $.extend({
      id:'sheet'+Date.now(),
      title: document.title,
      url: document.location.href,
      target:'',
      lang:"en"
      
    },options,true);
    params.languages= {
        en:{
          copied:" sao chp",
          copiedbtn:"Sao chp",
        }
    };

    var lang = params.languages[params.lang];

  

    if(!window.Share){

        // var tlp = Handlebars.compile(tlp_share)(params);
        // ele.append(tlp);


        var sheet = openSheet({
                data:`<form class="formshare screen" style="padding: 0;">
                    <div class="two">
                        <h2>Chia s</h2>
                    </div>
                    <div class="one">  
                         <div class="popup-share">
                            <div class="inform-popup">
                               
                             <div class="group-social">
                             <!--  <a target="_blank" href="{{url}}" class="external box-social zalo">
                                <img src="assets/icon-share/zalo.png" alt="">
                                <p>Zalo</p>
                              </a> -->
                              <a target="_blank" href="{{url}}" class="external box-social facebook">
                                <img src="assets/icon-share/facebook.png" alt="">
                                <p>Facebook</p>
                              </a>
                              <a target="_blank" href="{{url}}" class="external box-social twitter">
                                <img src="assets/icon-share/Twitter.png" alt="">
                                <p>Twitter</p>
                              </a>
                             <!--  <a target="_blank" href="{{url}}" class="external box-social email">
                                <img src="assets/icon-share/email.png" alt="">
                                <p>Email</p>
                              </a> -->
                              <a target="_blank" href="{{url}}" class="external box-social whatsapp">
                                <img src="assets/icon-share/whatsapp.png" alt="">
                                <p>Whatsapp</p>
                              </a>
                              <a target="_blank" href="{{url}}" class="external box-social reddit">
                                <img src="assets/icon-share/reddit.png" alt="">
                                <p>Reddit</p>
                              </a>
                              <a target="_blank" href="{{url}}" class="external box-social linkedin">
                                <img src="assets/icon-share/linkedin.png" alt="">
                                <p>Linkedin</p>
                              </a>
                             </div>
                             <div class="form-link-share">
                              <input type="text" data-copy="{{url}}" value="{{url}}" data-copy-message=" sao chp" />
                              <button type="button" class="btncopy" data-copy="{{url}}" data-copy-message=" sao chp"> Sao chp </button>
                             </div>
                             
                            </div>
                          </div>
                    </div> 
                </form>
                `,
                beforeOpen: function(sheetId) {
                   var modal = $("#"+sheetId);
                  // var handler = (ele.find(params.target).length?ele.find(params.target):$(params.target));

                  // handler.addClass("sheet-open").attr("data-sheet",".sheetopenticket");

                  params.url = params.url?params.url:document.location.origin;

                  modal.find('.popup-share .form-link-share input').attr('data-copy',params.url).val(params.url);
                  modal.find('.popup-share .btncopy').attr('data-copy',params.url);
                  var url = encodeURIComponent(params.url);
                  modal.find('.popup-share .facebook').attr('href',`https://www.facebook.com/dialog/share?app_id=87741124305&href=${url}&display=popup`);
                  modal.find('.popup-share .whatsapp').attr('href',`https://api.whatsapp.com/send/?text=${url}&type=custom_url&app_absent=0`);
                  modal.find('.popup-share .reddit').attr('href',`https://www.reddit.com/submit?url=${url}&title=${params.title}`);
                  modal.find('.popup-share .linkedin').attr('href',`https://www.linkedin.com/sharing/share-offsite/?url=${url}&title=${params.title}`);
                  modal.find('.popup-share .twitter').attr('href',`https://twitter.com/intent/post?url=${url}&text=${params.title}`);
                   
                   me.find("a").on("click",function(){
                      sheet.close(); 
                   });
                   
                }
            }); 
    }else{
      // handler.off('click').on("click",function(e){
      //      e.preventDefault(); 
           
      //      //window.Share(`Bn ang chia s ${params.title} ti ng dng KNBC - Kt ni nhu cu. Nhanh tay ti ng dng  c nhiu tri nghim hn IOS: https://apps.apple.com/vn/app/nsocial/id6444297013 Android: https://play.google.com/store/apps/details?id=com.ahlustore.social&pli=1`);

      //      window.Share(params.title);
          
      //  });
       window.Share(params.title);
    }

    return {
       close : function(){
       
       }
    };
};  

},2000);


})(window);
(function(win){
	function run(model,page){
		model.find("[data-shortcode]").each(function(){
			var me = $(this);
			var data = me.data();
			var name = me.attr("data-shortcode");
			delete data.shortcode;

			var str = Handlebars.compile(name)(data);
			if(!str || str==name){
				//find system
				str = f7Shortcode.do(name,data,page||null);
			}
			if(!str){
				//check debug
				if(document.location.href.includes("localhost")){
					me.attr("style",me.attr("style")+`;display: flex;
    justify-content: center;
    align-items: center;
    background-color: #ccc;`);
					str=`<div>Shortcode ${name} not found</div>`;
				}
				
			}
			if(str)$(this).html(str);
		});
	}
	$(document).on("onPage",function(e,page){ 
		run($(page.el),page);
	});


	//https://raw.githubusercontent.com/nicinabox/shortcode.js/refs/heads/master/src/Shortcode.js
	//
	//need you handlerbar
	var shortcode = {};
	win.f7Shortcode = {
		 
		add : function(name,f){
			shortcode[name] =f;
			return this;
		},
		do : function(name,data,context){
			if(shortcode[name]){
				return shortcode[name].call(context,data);
			}
			return "";
		},
		remove : function(str){
			delete shortcode[name];
			return this;
		},
		try : function(){
			 
			run($(".page.page-current"));
		}
	};
})(window)
! function(t, n, e) {
    var a = {
            label: "MENU",
            duplicate: !0,
            duration: 200,
            easingOpen: "swing",
            easingClose: "swing",
            closedSymbol: "&#9658;",
            openedSymbol: "&#9660;",
            prependTo: "body",
            parentTag: "a",
            closeOnClick: !1,
            allowParentLinks: !1,
            nestedParentLinks: !0,
            showChildren: !1,
            init: function() {},
            open: function() {},
            close: function() {}
        },
        i = "slicknav",
        s = "slicknav";

    function l(n, e) {
        this.element = n, this.settings = t.extend({}, a, e), this._defaults = a, this._name = i, this.init()
    }
    l.prototype.init = function() {
        var e = this,
            a = t(this.element),
            i = this.settings;
        i.duplicate ? (e.mobileNav = a.clone(), e.mobileNav.removeAttr("id"), e.mobileNav.find("*").each((function(n, e) {
            t(e).removeAttr("id")
        }))) : e.mobileNav = a;
        var l = s + "_icon";
        "" === i.label && (l += " " + s + "_no-text"), "a" == i.parentTag && (i.parentTag = 'a href="#"'), e.mobileNav.attr("class", s + "_nav");
        var o = t('<div class="' + s + '_menu"></div>');
        e.btn = t("<" + i.parentTag + ' aria-haspopup="true" tabindex="0" class="' + s + "_btn " + s + '_collapsed"><span class="' + s + '_menutxt">' + i.label + '</span><span class="' + l + '"><span class="' + s + '_icon-bar"></span><span class="' + s + '_icon-bar"></span><span class="' + s + '_icon-bar"></span></span></a>'), t(o).append(e.btn), t(i.prependTo).prepend(o), o.append(e.mobileNav);
        var r = e.mobileNav.find("li");
        t(r).each((function() {
            var n = t(this),
                a = {};
            if (a.children = n.children("ul").attr("role", "menu"), n.data("menu", a), a.children.length > 0) {
                var l = n.contents(),
                    o = !1,
                    r = [];
                t(l).each((function() {
                    if (t(this).is("ul")) return !1;
                    r.push(this), t(this).is("a") && (o = !0)
                }));
                var c = t("<" + i.parentTag + ' role="menuitem" aria-haspopup="true" tabindex="-1" class="' + s + '_item"/>');
                i.allowParentLinks && !i.nestedParentLinks && o ? t(r).wrapAll('<span class="' + s + "_parent-link " + s + '_row"/>').parent() : t(r).wrapAll(c).parent().addClass(s + "_row"), n.addClass(s + "_collapsed"), n.addClass(s + "_parent");
                var d = t('<span class="' + s + '_arrow">' + i.closedSymbol + "</span>");
                i.allowParentLinks && !i.nestedParentLinks && o && (d = d.wrap(c).parent()), t(r).last().after(d)
            } else 0 === n.children().length && n.addClass(s + "_txtnode");
            n.children("a").attr("role", "menuitem").click((function(n) {
                i.closeOnClick && !t(n.target).parent().closest("li").hasClass(s + "_parent") && t(e.btn).click()
            })), i.closeOnClick && i.allowParentLinks && (n.children("a").children("a").click((function(n) {
                t(e.btn).click()
            })), n.find("." + s + "_parent-link a:not(." + s + "_item)").click((function(n) {
                t(e.btn).click()
            })))
        })), t(r).each((function() {
            var n = t(this).data("menu");
            i.showChildren || e._visibilityToggle(n.children, null, !1, null, !0)
        })), e._visibilityToggle(e.mobileNav, null, !1, "init", !0), e.mobileNav.attr("role", "menu"), t(n).mousedown((function() {
            e._outlines(!1)
        })), t(n).keyup((function() {
            e._outlines(!0)
        })), t(e.btn).click((function(t) {
            t.preventDefault(), e._menuToggle()
        })), e.mobileNav.on("click", "." + s + "_item", (function(n) {
            n.preventDefault(), e._itemClick(t(this))
        })), t(e.btn).keydown((function(t) {
            13 == (t || event).keyCode && (t.preventDefault(), e._menuToggle())
        })), e.mobileNav.on("keydown", "." + s + "_item", (function(n) {
            13 == (n || event).keyCode && (n.preventDefault(), e._itemClick(t(n.target)))
        })), i.allowParentLinks && i.nestedParentLinks && t("." + s + "_item a").click((function(t) {
            t.stopImmediatePropagation()
        }))
    }, l.prototype._menuToggle = function(t) {
        var n = this.btn,
            e = this.mobileNav;
        n.hasClass(s + "_collapsed") ? (n.removeClass(s + "_collapsed"), n.addClass(s + "_open")) : (n.removeClass(s + "_open"), n.addClass(s + "_collapsed")), n.addClass(s + "_animating"), this._visibilityToggle(e, n.parent(), !0, n)
    }, l.prototype._itemClick = function(t) {
        var n = this.settings,
            e = t.data("menu");
        e || ((e = {}).arrow = t.children("." + s + "_arrow"), e.ul = t.next("ul"), e.parent = t.parent(), e.parent.hasClass(s + "_parent-link") && (e.parent = t.parent().parent(), e.ul = t.parent().next("ul")), t.data("menu", e)), e.parent.hasClass(s + "_collapsed") ? (e.arrow.html(n.openedSymbol), e.parent.removeClass(s + "_collapsed"), e.parent.addClass(s + "_open"), e.parent.addClass(s + "_animating"), this._visibilityToggle(e.ul, e.parent, !0, t)) : (e.arrow.html(n.closedSymbol), e.parent.addClass(s + "_collapsed"), e.parent.removeClass(s + "_open"), e.parent.addClass(s + "_animating"), this._visibilityToggle(e.ul, e.parent, !0, t))
    }, l.prototype._visibilityToggle = function(n, e, a, i, l) {
        var o = this,
            r = o.settings,
            c = o._getActionItems(n),
            d = 0;
        a && (d = r.duration), n.hasClass(s + "_hidden") ? (n.removeClass(s + "_hidden"), n.slideDown(d, r.easingOpen, (function() {
            t(i).removeClass(s + "_animating"), t(e).removeClass(s + "_animating"), l || r.open(i)
        })), n.attr("aria-hidden", "false"), c.attr("tabindex", "0"), o._setVisAttr(n, !1)) : (n.addClass(s + "_hidden"), n.slideUp(d, this.settings.easingClose, (function() {
            n.attr("aria-hidden", "true"), c.attr("tabindex", "-1"), o._setVisAttr(n, !0), n.hide(), t(i).removeClass(s + "_animating"), t(e).removeClass(s + "_animating"), l ? "init" == i && r.init() : r.close(i)
        })))
    }, l.prototype._setVisAttr = function(n, e) {
        var a = this,
            i = n.children("li").children("ul").not("." + s + "_hidden");
        e ? i.each((function() {
            var n = t(this);
            n.attr("aria-hidden", "true"), a._getActionItems(n).attr("tabindex", "-1"), a._setVisAttr(n, e)
        })) : i.each((function() {
            var n = t(this);
            n.attr("aria-hidden", "false"), a._getActionItems(n).attr("tabindex", "0"), a._setVisAttr(n, e)
        }))
    }, l.prototype._getActionItems = function(t) {
        var n = t.data("menu");
        if (!n) {
            n = {};
            var e = t.children("li"),
                a = e.find("a");
            n.links = a.add(e.find("." + s + "_item")), t.data("menu", n)
        }
        return n.links
    }, l.prototype._outlines = function(n) {
        n ? t("." + s + "_item, ." + s + "_btn").css("outline", "") : t("." + s + "_item, ." + s + "_btn").css("outline", "none")
    }, l.prototype.toggle = function() {
        this._menuToggle()
    }, l.prototype.open = function() {
        this.btn.hasClass(s + "_collapsed") && this._menuToggle()
    }, l.prototype.close = function() {
        this.btn.hasClass(s + "_open") && this._menuToggle()
    }, t.fn[i] = function(n) {
        var e, a = arguments;
        return void 0 === n || "object" == typeof n ? this.each((function() {
            t.data(this, "plugin_" + i) || t.data(this, "plugin_" + i, new l(this, n))
        })) : "string" == typeof n && "_" !== n[0] && "init" !== n ? (this.each((function() {
            var s = t.data(this, "plugin_" + i);
            s instanceof l && "function" == typeof s[n] && (e = s[n].apply(s, Array.prototype.slice.call(a, 1)))
        })), void 0 !== e ? e : this) : void 0
    }
}(jQuery, document, window);
/*! @license Firebase v2.4.1
    License: https://www.firebase.com/terms/terms-of-service.html */
(function() {var h,n=this;function p(a){return void 0!==a}function aa(){}function ba(a){a.yb=function(){return a.zf?a.zf:a.zf=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function r(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return u.apply(null,arguments)}var ja=Date.now||function(){return+new Date};
function ka(a,b){function c(){}c.prototype=b.prototype;a.oh=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.kh=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}};function la(a){if(Error.captureStackTrace)Error.captureStackTrace(this,la);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ka(la,Error);la.prototype.name="CustomError";function v(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ma(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function na(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function oa(a){var b=0,c;for(c in a)b++;return b}function pa(a){for(var b in a)return b}function qa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ra(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function sa(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function ta(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function ua(a,b){var c=ta(a,b,void 0);return c&&a[c]}function va(a){for(var b in a)return!1;return!0}function wa(a){var b={},c;for(c in a)b[c]=a[c];return b}var xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function ya(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<xa.length;f++)c=xa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function za(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Aa(){this.Vd=void 0}
function Ba(a,b,c){switch(typeof b){case "string":Ca(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(da(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],Ba(a,a.Vd?a.Vd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),Ca(f,c),
c.push(":"),Ba(a,a.Vd?a.Vd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var Da={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Ea=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Ca(a,b){b.push('"',a.replace(Ea,function(a){if(a in Da)return Da[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Da[a]=e+b.toString(16)}),'"')};function Fa(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ja()).toString(36)};var w;a:{var Ga=n.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){w=Ha;break a}}w=""};function Ia(){this.Ya=-1};function Ja(){this.Ya=-1;this.Ya=64;this.P=[];this.pe=[];this.eg=[];this.Od=[];this.Od[0]=128;for(var a=1;a<this.Ya;++a)this.Od[a]=0;this.ge=this.ec=0;this.reset()}ka(Ja,Ia);Ja.prototype.reset=function(){this.P[0]=1732584193;this.P[1]=4023233417;this.P[2]=2562383102;this.P[3]=271733878;this.P[4]=3285377520;this.ge=this.ec=0};
function Ka(a,b,c){c||(c=0);var d=a.eg;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.P[0];c=a.P[1];for(var g=a.P[2],k=a.P[3],m=a.P[4],l,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),l=1518500249):(f=c^g^k,l=1859775393):60>e?(f=c&g|k&(c|g),l=2400959708):(f=c^g^k,l=3395469782),f=(b<<
5|b>>>27)+f+m+l+d[e]&4294967295,m=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.P[0]=a.P[0]+b&4294967295;a.P[1]=a.P[1]+c&4294967295;a.P[2]=a.P[2]+g&4294967295;a.P[3]=a.P[3]+k&4294967295;a.P[4]=a.P[4]+m&4294967295}
Ja.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.Ya,d=0,e=this.pe,f=this.ec;d<b;){if(0==f)for(;d<=c;)Ka(this,a,d),d+=this.Ya;if(q(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Ya){Ka(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Ya){Ka(this,e);f=0;break}}this.ec=f;this.ge+=b}};var x=Array.prototype,La=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ma=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Na=x.filter?function(a,b,c){return x.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var m=g[k];b.call(c,m,k,a)&&(e[f++]=m)}return e},Oa=x.map?function(a,b,c){return x.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Pa=x.reduce?function(a,b,c,d){for(var e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);d&&(e[0]=u(b,d));return x.reduce.apply(a,e)}:function(a,b,c,d){var e=c;Ma(a,function(c,g){e=b.call(d,e,c,g,a)});return e},Qa=x.every?function(a,b,
c){return x.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Ra(a,b){var c=Sa(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function Sa(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ta(a,b){var c=La(a,b);0<=c&&x.splice.call(a,c,1)}function Ua(a,b,c){return 2>=arguments.length?x.slice.call(a,b):x.slice.call(a,b,c)}
function Va(a,b){a.sort(b||Wa)}function Wa(a,b){return a>b?1:a<b?-1:0};function Xa(a){n.setTimeout(function(){throw a;},0)}var Ya;
function Za(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==w.indexOf("Presto")&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=u(function(a){if(("*"==d||a.origin==
d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==w.indexOf("Trident")&&-1==w.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.hb;c.hb=null;a()}};return function(a){d.next={hb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=
document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function $a(a,b){ab||bb();cb||(ab(),cb=!0);db.push(new eb(a,b))}var ab;function bb(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve();ab=function(){a.then(fb)}}else ab=function(){var a=fb;!r(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ya||(Ya=Za()),Ya(a)):n.setImmediate(a)}}var cb=!1,db=[];[].push(function(){cb=!1;db=[]});
function fb(){for(;db.length;){var a=db;db=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.yg.call(c.scope)}catch(d){Xa(d)}}}cb=!1}function eb(a,b){this.yg=a;this.scope=b};var gb=-1!=w.indexOf("Opera")||-1!=w.indexOf("OPR"),hb=-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE"),ib=-1!=w.indexOf("Gecko")&&-1==w.toLowerCase().indexOf("webkit")&&!(-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE")),jb=-1!=w.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(gb&&n.opera)return a=n.opera.version,r(a)?a():a;ib?b=/rv\:([^\);]+)(\)|;)/:hb?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:jb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(w))?a[1]:"");return hb&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var kb=null,lb=null,mb=null;function nb(a,b){if(!ea(a))throw Error("encodeByteArray takes an array as a parameter");ob();for(var c=b?lb:kb,d=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,m=e+2<a.length,l=m?a[e+2]:0,t=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|l>>6,l=l&63;m||(l=64,g||(k=64));d.push(c[t],c[f],c[k],c[l])}return d.join("")}
function ob(){if(!kb){kb={};lb={};mb={};for(var a=0;65>a;a++)kb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),lb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),mb[lb[a]]=a,62<=a&&(mb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)]=a)}};function pb(a,b){this.N=qb;this.Rf=void 0;this.Ba=this.Ha=null;this.yd=this.ye=!1;if(a==rb)sb(this,tb,b);else try{var c=this;a.call(b,function(a){sb(c,tb,a)},function(a){if(!(a instanceof ub))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}sb(c,vb,a)})}catch(d){sb(this,vb,d)}}var qb=0,tb=2,vb=3;function rb(){}pb.prototype.then=function(a,b,c){return wb(this,r(a)?a:null,r(b)?b:null,c)};pb.prototype.then=pb.prototype.then;pb.prototype.$goog_Thenable=!0;h=pb.prototype;
h.fh=function(a,b){return wb(this,null,a,b)};h.cancel=function(a){this.N==qb&&$a(function(){var b=new ub(a);xb(this,b)},this)};function xb(a,b){if(a.N==qb)if(a.Ha){var c=a.Ha;if(c.Ba){for(var d=0,e=-1,f=0,g;g=c.Ba[f];f++)if(g=g.o)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.N==qb&&1==d?xb(c,b):(d=c.Ba.splice(e,1)[0],yb(c,d,vb,b)))}a.Ha=null}else sb(a,vb,b)}function zb(a,b){a.Ba&&a.Ba.length||a.N!=tb&&a.N!=vb||Ab(a);a.Ba||(a.Ba=[]);a.Ba.push(b)}
function wb(a,b,c,d){var e={o:null,Hf:null,Jf:null};e.o=new pb(function(a,g){e.Hf=b?function(c){try{var e=b.call(d,c);a(e)}catch(l){g(l)}}:a;e.Jf=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof ub?g(b):a(e)}catch(l){g(l)}}:g});e.o.Ha=a;zb(a,e);return e.o}h.Yf=function(a){this.N=qb;sb(this,tb,a)};h.Zf=function(a){this.N=qb;sb(this,vb,a)};
function sb(a,b,c){if(a.N==qb){if(a==c)b=vb,c=new TypeError("Promise cannot resolve to itself");else{var d;if(c)try{d=!!c.$goog_Thenable}catch(e){d=!1}else d=!1;if(d){a.N=1;c.then(a.Yf,a.Zf,a);return}if(ga(c))try{var f=c.then;if(r(f)){Bb(a,c,f);return}}catch(g){b=vb,c=g}}a.Rf=c;a.N=b;a.Ha=null;Ab(a);b!=vb||c instanceof ub||Cb(a,c)}}function Bb(a,b,c){function d(b){f||(f=!0,a.Zf(b))}function e(b){f||(f=!0,a.Yf(b))}a.N=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}
function Ab(a){a.ye||(a.ye=!0,$a(a.wg,a))}h.wg=function(){for(;this.Ba&&this.Ba.length;){var a=this.Ba;this.Ba=null;for(var b=0;b<a.length;b++)yb(this,a[b],this.N,this.Rf)}this.ye=!1};function yb(a,b,c,d){if(c==tb)b.Hf(d);else{if(b.o)for(;a&&a.yd;a=a.Ha)a.yd=!1;b.Jf(d)}}function Cb(a,b){a.yd=!0;$a(function(){a.yd&&Db.call(null,b)})}var Db=Xa;function ub(a){la.call(this,a)}ka(ub,la);ub.prototype.name="cancel";var Eb=Eb||"2.4.1";function y(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function z(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function Fb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function Gb(a){var b={};Fb(a,function(a,d){b[a]=d});return b}function Hb(a){return"object"===typeof a&&null!==a};function Ib(a){var b=[];Fb(a,function(a,d){da(d)?Ma(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""}function Jb(a){var b={};a=a.replace(/^\?/,"").split("&");Ma(a,function(a){a&&(a=a.split("="),b[a[0]]=a[1])});return b};function Kb(a,b){if(!a)throw Lb(b);}function Lb(a){return Error("Firebase ("+Eb+") INTERNAL ASSERT FAILED: "+a)};var Mb=n.Promise||pb;pb.prototype["catch"]=pb.prototype.fh;function B(){var a=this;this.reject=this.resolve=null;this.D=new Mb(function(b,c){a.resolve=b;a.reject=c})}function C(a,b){return function(c,d){c?a.reject(c):a.resolve(d);r(b)&&(Nb(a.D),1===b.length?b(c):b(c,d))}}function Nb(a){a.then(void 0,aa)};function Ob(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,Kb(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function Pb(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};function D(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function E(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function F(a,b,c,d){if((!d||p(c))&&!r(c))throw Error(E(a,b,d)+"must be a valid function.");}function Qb(a,b,c){if(p(c)&&(!ga(c)||null===c))throw Error(E(a,b,!0)+"must be a valid context object.");};function Rb(a){return"undefined"!==typeof JSON&&p(JSON.parse)?JSON.parse(a):za(a)}function G(a){if("undefined"!==typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];Ba(new Aa,a,b);a=b.join("")}return a};function Sb(){this.Zd=H}Sb.prototype.j=function(a){return this.Zd.S(a)};Sb.prototype.toString=function(){return this.Zd.toString()};function Tb(){}Tb.prototype.uf=function(){return null};Tb.prototype.Ce=function(){return null};var Ub=new Tb;function Vb(a,b,c){this.bg=a;this.Oa=b;this.Nd=c}Vb.prototype.uf=function(a){var b=this.Oa.Q;if(Wb(b,a))return b.j().T(a);b=null!=this.Nd?new Xb(this.Nd,!0,!1):this.Oa.w();return this.bg.Bc(a,b)};Vb.prototype.Ce=function(a,b,c){var d=null!=this.Nd?this.Nd:Yb(this.Oa);a=this.bg.qe(d,b,1,c,a);return 0===a.length?null:a[0]};function Zb(){this.xb=[]}function $b(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.cc();null===c||f.ea(c.cc())||(a.xb.push(c),c=null);null===c&&(c=new ac(f));c.add(e)}c&&a.xb.push(c)}function bc(a,b,c){$b(a,c);cc(a,function(a){return a.ea(b)})}function dc(a,b,c){$b(a,c);cc(a,function(a){return a.contains(b)||b.contains(a)})}
function cc(a,b){for(var c=!0,d=0;d<a.xb.length;d++){var e=a.xb[d];if(e)if(e=e.cc(),b(e)){for(var e=a.xb[d],f=0;f<e.xd.length;f++){var g=e.xd[f];if(null!==g){e.xd[f]=null;var k=g.Zb();ec&&fc("event: "+g.toString());gc(k)}}a.xb[d]=null}else c=!1}c&&(a.xb=[])}function ac(a){this.ta=a;this.xd=[]}ac.prototype.add=function(a){this.xd.push(a)};ac.prototype.cc=function(){return this.ta};function J(a,b,c,d){this.type=a;this.Na=b;this.Za=c;this.Oe=d;this.Td=void 0}function hc(a){return new J(ic,a)}var ic="value";function jc(a,b,c,d){this.xe=b;this.be=c;this.Td=d;this.wd=a}jc.prototype.cc=function(){var a=this.be.Mb();return"value"===this.wd?a.path:a.parent().path};jc.prototype.De=function(){return this.wd};jc.prototype.Zb=function(){return this.xe.Zb(this)};jc.prototype.toString=function(){return this.cc().toString()+":"+this.wd+":"+G(this.be.qf())};function kc(a,b,c){this.xe=a;this.error=b;this.path=c}kc.prototype.cc=function(){return this.path};kc.prototype.De=function(){return"cancel"};
kc.prototype.Zb=function(){return this.xe.Zb(this)};kc.prototype.toString=function(){return this.path.toString()+":cancel"};function Xb(a,b,c){this.A=a;this.ga=b;this.Yb=c}function lc(a){return a.ga}function mc(a){return a.Yb}function nc(a,b){return b.e()?a.ga&&!a.Yb:Wb(a,K(b))}function Wb(a,b){return a.ga&&!a.Yb||a.A.Fa(b)}Xb.prototype.j=function(){return this.A};function oc(a){this.pg=a;this.Gd=null}oc.prototype.get=function(){var a=this.pg.get(),b=wa(a);if(this.Gd)for(var c in this.Gd)b[c]-=this.Gd[c];this.Gd=a;return b};function pc(a,b){this.Vf={};this.hd=new oc(a);this.da=b;var c=1E4+2E4*Math.random();setTimeout(u(this.Of,this),Math.floor(c))}pc.prototype.Of=function(){var a=this.hd.get(),b={},c=!1,d;for(d in a)0<a[d]&&y(this.Vf,d)&&(b[d]=a[d],c=!0);c&&this.da.Ye(b);setTimeout(u(this.Of,this),Math.floor(6E5*Math.random()))};function qc(){this.Hc={}}function rc(a,b,c){p(c)||(c=1);y(a.Hc,b)||(a.Hc[b]=0);a.Hc[b]+=c}qc.prototype.get=function(){return wa(this.Hc)};var sc={},tc={};function uc(a){a=a.toString();sc[a]||(sc[a]=new qc);return sc[a]}function vc(a,b){var c=a.toString();tc[c]||(tc[c]=b());return tc[c]};function L(a,b){this.name=a;this.U=b}function wc(a,b){return new L(a,b)};function xc(a,b){return yc(a.name,b.name)}function zc(a,b){return yc(a,b)};function Ac(a,b,c){this.type=Bc;this.source=a;this.path=b;this.Ja=c}Ac.prototype.$c=function(a){return this.path.e()?new Ac(this.source,M,this.Ja.T(a)):new Ac(this.source,N(this.path),this.Ja)};Ac.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ja.toString()+")"};function Cc(a,b){this.type=Dc;this.source=a;this.path=b}Cc.prototype.$c=function(){return this.path.e()?new Cc(this.source,M):new Cc(this.source,N(this.path))};Cc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function Ec(a,b){this.Pa=a;this.xa=b?b:Fc}h=Ec.prototype;h.Sa=function(a,b){return new Ec(this.Pa,this.xa.Sa(a,b,this.Pa).$(null,null,!1,null,null))};h.remove=function(a){return new Ec(this.Pa,this.xa.remove(a,this.Pa).$(null,null,!1,null,null))};h.get=function(a){for(var b,c=this.xa;!c.e();){b=this.Pa(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function Gc(a,b){for(var c,d=a.xa,e=null;!d.e();){c=a.Pa(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.e=function(){return this.xa.e()};h.count=function(){return this.xa.count()};h.Vc=function(){return this.xa.Vc()};h.jc=function(){return this.xa.jc()};h.ka=function(a){return this.xa.ka(a)};
h.ac=function(a){return new Hc(this.xa,null,this.Pa,!1,a)};h.bc=function(a,b){return new Hc(this.xa,a,this.Pa,!1,b)};h.dc=function(a,b){return new Hc(this.xa,a,this.Pa,!0,b)};h.xf=function(a){return new Hc(this.xa,null,this.Pa,!0,a)};function Hc(a,b,c,d,e){this.Xd=e||null;this.Je=d;this.Ta=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.Je?a.left:a.right;else if(0===e){this.Ta.push(a);break}else this.Ta.push(a),a=this.Je?a.right:a.left}
function Ic(a){if(0===a.Ta.length)return null;var b=a.Ta.pop(),c;c=a.Xd?a.Xd(b.key,b.value):{key:b.key,value:b.value};if(a.Je)for(b=b.left;!b.e();)a.Ta.push(b),b=b.right;else for(b=b.right;!b.e();)a.Ta.push(b),b=b.left;return c}function Jc(a){if(0===a.Ta.length)return null;var b;b=a.Ta;b=b[b.length-1];return a.Xd?a.Xd(b.key,b.value):{key:b.key,value:b.value}}function Kc(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:Fc;this.right=null!=e?e:Fc}h=Kc.prototype;
h.$=function(a,b,c,d,e){return new Kc(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.e=function(){return!1};h.ka=function(a){return this.left.ka(a)||a(this.key,this.value)||this.right.ka(a)};function Lc(a){return a.left.e()?a:Lc(a.left)}h.Vc=function(){return Lc(this).key};h.jc=function(){return this.right.e()?this.key:this.right.jc()};
h.Sa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.$(null,null,null,e.left.Sa(a,b,c),null):0===d?e.$(null,b,null,null,null):e.$(null,null,null,null,e.right.Sa(a,b,c));return Mc(e)};function Nc(a){if(a.left.e())return Fc;a.left.ha()||a.left.left.ha()||(a=Oc(a));a=a.$(null,null,null,Nc(a.left),null);return Mc(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.ha()||c.left.left.ha()||(c=Oc(c)),c=c.$(null,null,null,c.left.remove(a,b),null);else{c.left.ha()&&(c=Pc(c));c.right.e()||c.right.ha()||c.right.left.ha()||(c=Qc(c),c.left.left.ha()&&(c=Pc(c),c=Qc(c)));if(0===b(a,c.key)){if(c.right.e())return Fc;d=Lc(c.right);c=c.$(d.key,d.value,null,null,Nc(c.right))}c=c.$(null,null,null,null,c.right.remove(a,b))}return Mc(c)};h.ha=function(){return this.color};
function Mc(a){a.right.ha()&&!a.left.ha()&&(a=Rc(a));a.left.ha()&&a.left.left.ha()&&(a=Pc(a));a.left.ha()&&a.right.ha()&&(a=Qc(a));return a}function Oc(a){a=Qc(a);a.right.left.ha()&&(a=a.$(null,null,null,null,Pc(a.right)),a=Rc(a),a=Qc(a));return a}function Rc(a){return a.right.$(null,null,a.color,a.$(null,null,!0,null,a.right.left),null)}function Pc(a){return a.left.$(null,null,a.color,null,a.$(null,null,!0,a.left.right,null))}
function Qc(a){return a.$(null,null,!a.color,a.left.$(null,null,!a.left.color,null,null),a.right.$(null,null,!a.right.color,null,null))}function Sc(){}h=Sc.prototype;h.$=function(){return this};h.Sa=function(a,b){return new Kc(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.e=function(){return!0};h.ka=function(){return!1};h.Vc=function(){return null};h.jc=function(){return null};h.ha=function(){return!1};var Fc=new Sc;function Tc(a,b){return a&&"object"===typeof a?(O(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Uc(a,b){var c=new Vc;Wc(a,new P(""),function(a,e){c.rc(a,Xc(e,b))});return c}function Xc(a,b){var c=a.C().J(),c=Tc(c,b),d;if(a.L()){var e=Tc(a.Ea(),b);return e!==a.Ea()||c!==a.C().J()?new Yc(e,Q(c)):a}d=a;c!==a.C().J()&&(d=d.ia(new Yc(c)));a.R(R,function(a,c){var e=Xc(c,b);e!==c&&(d=d.W(a,e))});return d};function Zc(){this.Ac={}}Zc.prototype.set=function(a,b){null==b?delete this.Ac[a]:this.Ac[a]=b};Zc.prototype.get=function(a){return y(this.Ac,a)?this.Ac[a]:null};Zc.prototype.remove=function(a){delete this.Ac[a]};Zc.prototype.Af=!0;function $c(a){this.Ic=a;this.Sd="firebase:"}h=$c.prototype;h.set=function(a,b){null==b?this.Ic.removeItem(this.Sd+a):this.Ic.setItem(this.Sd+a,G(b))};h.get=function(a){a=this.Ic.getItem(this.Sd+a);return null==a?null:Rb(a)};h.remove=function(a){this.Ic.removeItem(this.Sd+a)};h.Af=!1;h.toString=function(){return this.Ic.toString()};function ad(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new $c(b)}}catch(c){}return new Zc}var bd=ad("localStorage"),cd=ad("sessionStorage");function dd(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.ob=b;this.lc=c;this.ih=d;this.Rd=e||"";this.ab=bd.get("host:"+a)||this.host}function ed(a,b){b!==a.ab&&(a.ab=b,"s-"===a.ab.substr(0,2)&&bd.set("host:"+a.host,a.ab))}
function fd(a,b,c){O("string"===typeof b,"typeof type must == string");O("object"===typeof c,"typeof params must == object");if(b===gd)b=(a.ob?"wss://":"ws://")+a.ab+"/.ws?";else if(b===hd)b=(a.ob?"https://":"http://")+a.ab+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.ab&&(c.ns=a.lc);var d=[];v(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}dd.prototype.toString=function(){var a=(this.ob?"https://":"http://")+this.host;this.Rd&&(a+="<"+this.Rd+">");return a};var id=function(){var a=1;return function(){return a++}}(),O=Kb,jd=Lb;
function kd(a){try{var b;if("undefined"!==typeof atob)b=atob(a);else{ob();for(var c=mb,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],g=e<a.length?c[a.charAt(e)]:0;++e;var k=e<a.length?c[a.charAt(e)]:64;++e;var m=e<a.length?c[a.charAt(e)]:64;++e;if(null==f||null==g||null==k||null==m)throw Error();d.push(f<<2|g>>4);64!=k&&(d.push(g<<4&240|k>>2),64!=m&&d.push(k<<6&192|m))}if(8192>d.length)b=String.fromCharCode.apply(null,d);else{a="";for(c=0;c<d.length;c+=8192)a+=String.fromCharCode.apply(null,Ua(d,c,
c+8192));b=a}}return b}catch(l){fc("base64Decode failed: ",l)}return null}function ld(a){var b=Ob(a);a=new Ja;a.update(b);var b=[],c=8*a.ge;56>a.ec?a.update(a.Od,56-a.ec):a.update(a.Od,a.Ya-(a.ec-56));for(var d=a.Ya-1;56<=d;d--)a.pe[d]=c&255,c/=256;Ka(a,a.pe);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.P[d]>>e&255,++c;return nb(b)}
function md(a){for(var b="",c=0;c<arguments.length;c++)b=ea(arguments[c])?b+md.apply(null,arguments[c]):"object"===typeof arguments[c]?b+G(arguments[c]):b+arguments[c],b+=" ";return b}var ec=null,nd=!0;
function od(a,b){Kb(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?ec=u(console.log,console):"object"===typeof console.log&&(ec=function(a){console.log(a)})),b&&cd.set("logging_enabled",!0)):r(a)?ec=a:(ec=null,cd.remove("logging_enabled"))}function fc(a){!0===nd&&(nd=!1,null===ec&&!0===cd.get("logging_enabled")&&od(!0));if(ec){var b=md.apply(null,arguments);ec(b)}}
function pd(a){return function(){fc(a,arguments)}}function qd(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+md.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function rd(a){var b=md.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function S(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+md.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function sd(a){var b="",c="",d="",e="",f=!0,g="https",k=443;if(q(a)){var m=a.indexOf("//");0<=m&&(g=a.substring(0,m-1),a=a.substring(m+2));m=a.indexOf("/");-1===m&&(m=a.length);b=a.substring(0,m);e="";a=a.substring(m).split("/");for(m=0;m<a.length;m++)if(0<a[m].length){var l=a[m];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(t){}e+="/"+l}a=b.split(".");3===a.length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]);m=b.indexOf(":");0<=m&&(f="https"===g||"wss"===g,k=b.substring(m+1),isFinite(k)&&
(k=String(k)),k=q(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,eh:d,ob:f,scheme:g,bd:e}}function td(a){return fa(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}
function ud(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}
function yc(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=vd(a),d=vd(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function wd(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+G(b));}
function xd(a){if("object"!==typeof a||null===a)return G(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=G(b[d]),c+=":",c+=xd(a[b[d]]);return c+"}"}function yd(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function zd(a,b){if(da(a))for(var c=0;c<a.length;++c)b(c,a[c]);else v(a,b)}
function Ad(a){O(!td(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var Bd=/^-?\d{1,10}$/;function vd(a){return Bd.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function gc(a){try{a()}catch(b){setTimeout(function(){S("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function T(a,b){if(r(a)){var c=Array.prototype.slice.call(arguments,1).slice();gc(function(){a.apply(null,c)})}};function Cd(a){var b={},c={},d={},e="";try{var f=a.split("."),b=Rb(kd(f[0])||""),c=Rb(kd(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{lh:b,Ec:c,data:d,ah:e}}function Dd(a){a=Cd(a).Ec;return"object"===typeof a&&a.hasOwnProperty("iat")?z(a,"iat"):null}function Ed(a){a=Cd(a);var b=a.Ec;return!!a.ah&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")};function Fd(a){this.Y=a;this.g=a.n.g}function Gd(a,b,c,d){var e=[],f=[];Ma(b,function(b){"child_changed"===b.type&&a.g.Dd(b.Oe,b.Na)&&f.push(new J("child_moved",b.Na,b.Za))});Hd(a,e,"child_removed",b,d,c);Hd(a,e,"child_added",b,d,c);Hd(a,e,"child_moved",f,d,c);Hd(a,e,"child_changed",b,d,c);Hd(a,e,ic,b,d,c);return e}function Hd(a,b,c,d,e,f){d=Na(d,function(a){return a.type===c});Va(d,u(a.qg,a));Ma(d,function(c){var d=Id(a,c,f);Ma(e,function(e){e.Qf(c.type)&&b.push(e.createEvent(d,a.Y))})})}
function Id(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Td=c.wf(b.Za,b.Na,a.g));return b}Fd.prototype.qg=function(a,b){if(null==a.Za||null==b.Za)throw jd("Should only compare child_ events.");return this.g.compare(new L(a.Za,a.Na),new L(b.Za,b.Na))};function Jd(){this.ib={}}
function Kd(a,b){var c=b.type,d=b.Za;O("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");O(".priority"!==d,"Only non-priority child changes can be tracked.");var e=z(a.ib,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.ib[d]=new J("child_changed",b.Na,d,e.Na);else if("child_removed"==c&&"child_added"==f)delete a.ib[d];else if("child_removed"==c&&"child_changed"==f)a.ib[d]=new J("child_removed",e.Oe,d);else if("child_changed"==c&&
"child_added"==f)a.ib[d]=new J("child_added",b.Na,d);else if("child_changed"==c&&"child_changed"==f)a.ib[d]=new J("child_changed",b.Na,d,e.Oe);else throw jd("Illegal combination of changes: "+b+" occurred after "+e);}else a.ib[d]=b};function Ld(a){this.g=a}h=Ld.prototype;h.H=function(a,b,c,d,e,f){O(a.Mc(this.g),"A node must be indexed if only a child is updated");e=a.T(b);if(e.S(d).ea(c.S(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Fa(b)?Kd(f,new J("child_removed",e,b)):O(a.L(),"A child remove without an old child only makes sense on a leaf node"):e.e()?Kd(f,new J("child_added",c,b)):Kd(f,new J("child_changed",c,b,e)));return a.L()&&c.e()?a:a.W(b,c).pb(this.g)};
h.ya=function(a,b,c){null!=c&&(a.L()||a.R(R,function(a,e){b.Fa(a)||Kd(c,new J("child_removed",e,a))}),b.L()||b.R(R,function(b,e){if(a.Fa(b)){var f=a.T(b);f.ea(e)||Kd(c,new J("child_changed",e,b,f))}else Kd(c,new J("child_added",e,b))}));return b.pb(this.g)};h.ia=function(a,b){return a.e()?H:a.ia(b)};h.Ra=function(){return!1};h.$b=function(){return this};function Md(a){this.Fe=new Ld(a.g);this.g=a.g;var b;a.oa?(b=Nd(a),b=a.g.Sc(Od(a),b)):b=a.g.Wc();this.gd=b;a.ra?(b=Pd(a),a=a.g.Sc(Rd(a),b)):a=a.g.Tc();this.Jc=a}h=Md.prototype;h.matches=function(a){return 0>=this.g.compare(this.gd,a)&&0>=this.g.compare(a,this.Jc)};h.H=function(a,b,c,d,e,f){this.matches(new L(b,c))||(c=H);return this.Fe.H(a,b,c,d,e,f)};
h.ya=function(a,b,c){b.L()&&(b=H);var d=b.pb(this.g),d=d.ia(H),e=this;b.R(R,function(a,b){e.matches(new L(a,b))||(d=d.W(a,H))});return this.Fe.ya(a,d,c)};h.ia=function(a){return a};h.Ra=function(){return!0};h.$b=function(){return this.Fe};function Sd(a){this.ua=new Md(a);this.g=a.g;O(a.la,"Only valid if limit has been set");this.ma=a.ma;this.Nb=!Td(a)}h=Sd.prototype;h.H=function(a,b,c,d,e,f){this.ua.matches(new L(b,c))||(c=H);return a.T(b).ea(c)?a:a.Hb()<this.ma?this.ua.$b().H(a,b,c,d,e,f):Ud(this,a,b,c,e,f)};
h.ya=function(a,b,c){var d;if(b.L()||b.e())d=H.pb(this.g);else if(2*this.ma<b.Hb()&&b.Mc(this.g)){d=H.pb(this.g);b=this.Nb?b.dc(this.ua.Jc,this.g):b.bc(this.ua.gd,this.g);for(var e=0;0<b.Ta.length&&e<this.ma;){var f=Ic(b),g;if(g=this.Nb?0>=this.g.compare(this.ua.gd,f):0>=this.g.compare(f,this.ua.Jc))d=d.W(f.name,f.U),e++;else break}}else{d=b.pb(this.g);d=d.ia(H);var k,m,l;if(this.Nb){b=d.xf(this.g);k=this.ua.Jc;m=this.ua.gd;var t=Vd(this.g);l=function(a,b){return t(b,a)}}else b=d.ac(this.g),k=this.ua.gd,
m=this.ua.Jc,l=Vd(this.g);for(var e=0,A=!1;0<b.Ta.length;)f=Ic(b),!A&&0>=l(k,f)&&(A=!0),(g=A&&e<this.ma&&0>=l(f,m))?e++:d=d.W(f.name,H)}return this.ua.$b().ya(a,d,c)};h.ia=function(a){return a};h.Ra=function(){return!0};h.$b=function(){return this.ua.$b()};
function Ud(a,b,c,d,e,f){var g;if(a.Nb){var k=Vd(a.g);g=function(a,b){return k(b,a)}}else g=Vd(a.g);O(b.Hb()==a.ma,"");var m=new L(c,d),l=a.Nb?Wd(b,a.g):Xd(b,a.g),t=a.ua.matches(m);if(b.Fa(c)){for(var A=b.T(c),l=e.Ce(a.g,l,a.Nb);null!=l&&(l.name==c||b.Fa(l.name));)l=e.Ce(a.g,l,a.Nb);e=null==l?1:g(l,m);if(t&&!d.e()&&0<=e)return null!=f&&Kd(f,new J("child_changed",d,c,A)),b.W(c,d);null!=f&&Kd(f,new J("child_removed",A,c));b=b.W(c,H);return null!=l&&a.ua.matches(l)?(null!=f&&Kd(f,new J("child_added",
l.U,l.name)),b.W(l.name,l.U)):b}return d.e()?b:t&&0<=g(l,m)?(null!=f&&(Kd(f,new J("child_removed",l.U,l.name)),Kd(f,new J("child_added",d,c))),b.W(c,d).W(l.name,H)):b};function Yd(a,b){this.me=a;this.og=b}function Zd(a){this.X=a}
Zd.prototype.gb=function(a,b,c,d){var e=new Jd,f;if(b.type===Bc)b.source.Ae?c=$d(this,a,b.path,b.Ja,c,d,e):(O(b.source.tf,"Unknown source."),f=b.source.ef||mc(a.w())&&!b.path.e(),c=ae(this,a,b.path,b.Ja,c,d,f,e));else if(b.type===be)b.source.Ae?c=ce(this,a,b.path,b.children,c,d,e):(O(b.source.tf,"Unknown source."),f=b.source.ef||mc(a.w()),c=de(this,a,b.path,b.children,c,d,f,e));else if(b.type===ee)if(b.Yd)if(b=b.path,null!=c.xc(b))c=a;else{f=new Vb(c,a,d);d=a.Q.j();if(b.e()||".priority"===K(b))lc(a.w())?
b=c.Aa(Yb(a)):(b=a.w().j(),O(b instanceof fe,"serverChildren would be complete if leaf node"),b=c.Cc(b)),b=this.X.ya(d,b,e);else{var g=K(b),k=c.Bc(g,a.w());null==k&&Wb(a.w(),g)&&(k=d.T(g));b=null!=k?this.X.H(d,g,k,N(b),f,e):a.Q.j().Fa(g)?this.X.H(d,g,H,N(b),f,e):d;b.e()&&lc(a.w())&&(d=c.Aa(Yb(a)),d.L()&&(b=this.X.ya(b,d,e)))}d=lc(a.w())||null!=c.xc(M);c=ge(a,b,d,this.X.Ra())}else c=he(this,a,b.path,b.Ub,c,d,e);else if(b.type===Dc)d=b.path,b=a.w(),f=b.j(),g=b.ga||d.e(),c=ie(this,new je(a.Q,new Xb(f,
g,b.Yb)),d,c,Ub,e);else throw jd("Unknown operation type: "+b.type);e=qa(e.ib);d=c;b=d.Q;b.ga&&(f=b.j().L()||b.j().e(),g=ke(a),(0<e.length||!a.Q.ga||f&&!b.j().ea(g)||!b.j().C().ea(g.C()))&&e.push(hc(ke(d))));return new Yd(c,e)};
function ie(a,b,c,d,e,f){var g=b.Q;if(null!=d.xc(c))return b;var k;if(c.e())O(lc(b.w()),"If change path is empty, we must have complete server data"),mc(b.w())?(e=Yb(b),d=d.Cc(e instanceof fe?e:H)):d=d.Aa(Yb(b)),f=a.X.ya(b.Q.j(),d,f);else{var m=K(c);if(".priority"==m)O(1==le(c),"Can't have a priority with additional path components"),f=g.j(),k=b.w().j(),d=d.nd(c,f,k),f=null!=d?a.X.ia(f,d):g.j();else{var l=N(c);Wb(g,m)?(k=b.w().j(),d=d.nd(c,g.j(),k),d=null!=d?g.j().T(m).H(l,d):g.j().T(m)):d=d.Bc(m,
b.w());f=null!=d?a.X.H(g.j(),m,d,l,e,f):g.j()}}return ge(b,f,g.ga||c.e(),a.X.Ra())}function ae(a,b,c,d,e,f,g,k){var m=b.w();g=g?a.X:a.X.$b();if(c.e())d=g.ya(m.j(),d,null);else if(g.Ra()&&!m.Yb)d=m.j().H(c,d),d=g.ya(m.j(),d,null);else{var l=K(c);if(!nc(m,c)&&1<le(c))return b;var t=N(c);d=m.j().T(l).H(t,d);d=".priority"==l?g.ia(m.j(),d):g.H(m.j(),l,d,t,Ub,null)}m=m.ga||c.e();b=new je(b.Q,new Xb(d,m,g.Ra()));return ie(a,b,c,e,new Vb(e,b,f),k)}
function $d(a,b,c,d,e,f,g){var k=b.Q;e=new Vb(e,b,f);if(c.e())g=a.X.ya(b.Q.j(),d,g),a=ge(b,g,!0,a.X.Ra());else if(f=K(c),".priority"===f)g=a.X.ia(b.Q.j(),d),a=ge(b,g,k.ga,k.Yb);else{c=N(c);var m=k.j().T(f);if(!c.e()){var l=e.uf(f);d=null!=l?".priority"===me(c)&&l.S(c.parent()).e()?l:l.H(c,d):H}m.ea(d)?a=b:(g=a.X.H(k.j(),f,d,c,e,g),a=ge(b,g,k.ga,a.X.Ra()))}return a}
function ce(a,b,c,d,e,f,g){var k=b;ne(d,function(d,l){var t=c.o(d);Wb(b.Q,K(t))&&(k=$d(a,k,t,l,e,f,g))});ne(d,function(d,l){var t=c.o(d);Wb(b.Q,K(t))||(k=$d(a,k,t,l,e,f,g))});return k}function oe(a,b){ne(b,function(b,d){a=a.H(b,d)});return a}
function de(a,b,c,d,e,f,g,k){if(b.w().j().e()&&!lc(b.w()))return b;var m=b;c=c.e()?d:pe(qe,c,d);var l=b.w().j();c.children.ka(function(c,d){if(l.Fa(c)){var I=b.w().j().T(c),I=oe(I,d);m=ae(a,m,new P(c),I,e,f,g,k)}});c.children.ka(function(c,d){var I=!Wb(b.w(),c)&&null==d.value;l.Fa(c)||I||(I=b.w().j().T(c),I=oe(I,d),m=ae(a,m,new P(c),I,e,f,g,k))});return m}
function he(a,b,c,d,e,f,g){if(null!=e.xc(c))return b;var k=mc(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.ga||nc(m,c))return ae(a,b,c,m.j().S(c),e,f,k,g);if(c.e()){var l=qe;m.j().R(re,function(a,b){l=l.set(new P(a),b)});return de(a,b,c,l,e,f,k,g)}return b}l=qe;ne(d,function(a){var b=c.o(a);nc(m,b)&&(l=l.set(a,m.j().S(b)))});return de(a,b,c,l,e,f,k,g)};function se(){}var te={};function Vd(a){return u(a.compare,a)}se.prototype.Dd=function(a,b){return 0!==this.compare(new L("[MIN_NAME]",a),new L("[MIN_NAME]",b))};se.prototype.Wc=function(){return ue};function ve(a){O(!a.e()&&".priority"!==K(a),"Can't create PathIndex with empty path or .priority key");this.gc=a}ka(ve,se);h=ve.prototype;h.Lc=function(a){return!a.S(this.gc).e()};h.compare=function(a,b){var c=a.U.S(this.gc),d=b.U.S(this.gc),c=c.Gc(d);return 0===c?yc(a.name,b.name):c};
h.Sc=function(a,b){var c=Q(a),c=H.H(this.gc,c);return new L(b,c)};h.Tc=function(){var a=H.H(this.gc,we);return new L("[MAX_NAME]",a)};h.toString=function(){return this.gc.slice().join("/")};function xe(){}ka(xe,se);h=xe.prototype;h.compare=function(a,b){var c=a.U.C(),d=b.U.C(),c=c.Gc(d);return 0===c?yc(a.name,b.name):c};h.Lc=function(a){return!a.C().e()};h.Dd=function(a,b){return!a.C().ea(b.C())};h.Wc=function(){return ue};h.Tc=function(){return new L("[MAX_NAME]",new Yc("[PRIORITY-POST]",we))};
h.Sc=function(a,b){var c=Q(a);return new L(b,new Yc("[PRIORITY-POST]",c))};h.toString=function(){return".priority"};var R=new xe;function ye(){}ka(ye,se);h=ye.prototype;h.compare=function(a,b){return yc(a.name,b.name)};h.Lc=function(){throw jd("KeyIndex.isDefinedOn not expected to be called.");};h.Dd=function(){return!1};h.Wc=function(){return ue};h.Tc=function(){return new L("[MAX_NAME]",H)};h.Sc=function(a){O(q(a),"KeyIndex indexValue must always be a string.");return new L(a,H)};h.toString=function(){return".key"};
var re=new ye;function ze(){}ka(ze,se);h=ze.prototype;h.compare=function(a,b){var c=a.U.Gc(b.U);return 0===c?yc(a.name,b.name):c};h.Lc=function(){return!0};h.Dd=function(a,b){return!a.ea(b)};h.Wc=function(){return ue};h.Tc=function(){return Ae};h.Sc=function(a,b){var c=Q(a);return new L(b,c)};h.toString=function(){return".value"};var Be=new ze;function Ce(){this.Xb=this.ra=this.Pb=this.oa=this.la=!1;this.ma=0;this.Rb="";this.ic=null;this.Bb="";this.fc=null;this.zb="";this.g=R}var De=new Ce;function Td(a){return""===a.Rb?a.oa:"l"===a.Rb}function Od(a){O(a.oa,"Only valid if start has been set");return a.ic}function Nd(a){O(a.oa,"Only valid if start has been set");return a.Pb?a.Bb:"[MIN_NAME]"}function Rd(a){O(a.ra,"Only valid if end has been set");return a.fc}
function Pd(a){O(a.ra,"Only valid if end has been set");return a.Xb?a.zb:"[MAX_NAME]"}function Ee(a){var b=new Ce;b.la=a.la;b.ma=a.ma;b.oa=a.oa;b.ic=a.ic;b.Pb=a.Pb;b.Bb=a.Bb;b.ra=a.ra;b.fc=a.fc;b.Xb=a.Xb;b.zb=a.zb;b.g=a.g;return b}h=Ce.prototype;h.Le=function(a){var b=Ee(this);b.la=!0;b.ma=a;b.Rb="";return b};h.Me=function(a){var b=Ee(this);b.la=!0;b.ma=a;b.Rb="l";return b};h.Ne=function(a){var b=Ee(this);b.la=!0;b.ma=a;b.Rb="r";return b};
h.ce=function(a,b){var c=Ee(this);c.oa=!0;p(a)||(a=null);c.ic=a;null!=b?(c.Pb=!0,c.Bb=b):(c.Pb=!1,c.Bb="");return c};h.vd=function(a,b){var c=Ee(this);c.ra=!0;p(a)||(a=null);c.fc=a;p(b)?(c.Xb=!0,c.zb=b):(c.nh=!1,c.zb="");return c};function Fe(a,b){var c=Ee(a);c.g=b;return c}function Ge(a){var b={};a.oa&&(b.sp=a.ic,a.Pb&&(b.sn=a.Bb));a.ra&&(b.ep=a.fc,a.Xb&&(b.en=a.zb));if(a.la){b.l=a.ma;var c=a.Rb;""===c&&(c=Td(a)?"l":"r");b.vf=c}a.g!==R&&(b.i=a.g.toString());return b}
function He(a){return!(a.oa||a.ra||a.la)}function Ie(a){return He(a)&&a.g==R}function Je(a){var b={};if(Ie(a))return b;var c;a.g===R?c="$priority":a.g===Be?c="$value":a.g===re?c="$key":(O(a.g instanceof ve,"Unrecognized index type!"),c=a.g.toString());b.orderBy=G(c);a.oa&&(b.startAt=G(a.ic),a.Pb&&(b.startAt+=","+G(a.Bb)));a.ra&&(b.endAt=G(a.fc),a.Xb&&(b.endAt+=","+G(a.zb)));a.la&&(Td(a)?b.limitToFirst=a.ma:b.limitToLast=a.ma);return b}h.toString=function(){return G(Ge(this))};function Ke(a,b){this.Ed=a;this.hc=b}Ke.prototype.get=function(a){var b=z(this.Ed,a);if(!b)throw Error("No index defined for "+a);return b===te?null:b};function Le(a,b,c){var d=ma(a.Ed,function(d,f){var g=z(a.hc,f);O(g,"Missing index implementation for "+f);if(d===te){if(g.Lc(b.U)){for(var k=[],m=c.ac(wc),l=Ic(m);l;)l.name!=b.name&&k.push(l),l=Ic(m);k.push(b);return Me(k,Vd(g))}return te}g=c.get(b.name);k=d;g&&(k=k.remove(new L(b.name,g)));return k.Sa(b,b.U)});return new Ke(d,a.hc)}
function Ne(a,b,c){var d=ma(a.Ed,function(a){if(a===te)return a;var d=c.get(b.name);return d?a.remove(new L(b.name,d)):a});return new Ke(d,a.hc)}var Oe=new Ke({".priority":te},{".priority":R});function Yc(a,b){this.B=a;O(p(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.ca=b||H;Pe(this.ca);this.Gb=null}var Qe=["object","boolean","number","string"];h=Yc.prototype;h.L=function(){return!0};h.C=function(){return this.ca};h.ia=function(a){return new Yc(this.B,a)};h.T=function(a){return".priority"===a?this.ca:H};h.S=function(a){return a.e()?this:".priority"===K(a)?this.ca:H};h.Fa=function(){return!1};h.wf=function(){return null};
h.W=function(a,b){return".priority"===a?this.ia(b):b.e()&&".priority"!==a?this:H.W(a,b).ia(this.ca)};h.H=function(a,b){var c=K(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;O(".priority"!==c||1===le(a),".priority must be the last token in a path");return this.W(c,H.H(N(a),b))};h.e=function(){return!1};h.Hb=function(){return 0};h.R=function(){return!1};h.J=function(a){return a&&!this.C().e()?{".value":this.Ea(),".priority":this.C().J()}:this.Ea()};
h.hash=function(){if(null===this.Gb){var a="";this.ca.e()||(a+="priority:"+Re(this.ca.J())+":");var b=typeof this.B,a=a+(b+":"),a="number"===b?a+Ad(this.B):a+this.B;this.Gb=ld(a)}return this.Gb};h.Ea=function(){return this.B};h.Gc=function(a){if(a===H)return 1;if(a instanceof fe)return-1;O(a.L(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=La(Qe,b),e=La(Qe,c);O(0<=d,"Unknown leaf type: "+b);O(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};
h.pb=function(){return this};h.Mc=function(){return!0};h.ea=function(a){return a===this?!0:a.L()?this.B===a.B&&this.ca.ea(a.ca):!1};h.toString=function(){return G(this.J(!0))};function fe(a,b,c){this.m=a;(this.ca=b)&&Pe(this.ca);a.e()&&O(!this.ca||this.ca.e(),"An empty node cannot have a priority");this.Ab=c;this.Gb=null}h=fe.prototype;h.L=function(){return!1};h.C=function(){return this.ca||H};h.ia=function(a){return this.m.e()?this:new fe(this.m,a,this.Ab)};h.T=function(a){if(".priority"===a)return this.C();a=this.m.get(a);return null===a?H:a};h.S=function(a){var b=K(a);return null===b?this:this.T(b).S(N(a))};h.Fa=function(a){return null!==this.m.get(a)};
h.W=function(a,b){O(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.ia(b);var c=new L(a,b),d,e;b.e()?(d=this.m.remove(a),c=Ne(this.Ab,c,this.m)):(d=this.m.Sa(a,b),c=Le(this.Ab,c,this.m));e=d.e()?H:this.ca;return new fe(d,e,c)};h.H=function(a,b){var c=K(a);if(null===c)return b;O(".priority"!==K(a)||1===le(a),".priority must be the last token in a path");var d=this.T(c).H(N(a),b);return this.W(c,d)};h.e=function(){return this.m.e()};h.Hb=function(){return this.m.count()};
var Se=/^(0|[1-9]\d*)$/;h=fe.prototype;h.J=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.R(R,function(f,g){b[f]=g.J(a);c++;e&&Se.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.C().e()&&(b[".priority"]=this.C().J());return b};h.hash=function(){if(null===this.Gb){var a="";this.C().e()||(a+="priority:"+Re(this.C().J())+":");this.R(R,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Gb=""===a?"":ld(a)}return this.Gb};
h.wf=function(a,b,c){return(c=Te(this,c))?(a=Gc(c,new L(a,b)))?a.name:null:Gc(this.m,a)};function Wd(a,b){var c;c=(c=Te(a,b))?(c=c.Vc())&&c.name:a.m.Vc();return c?new L(c,a.m.get(c)):null}function Xd(a,b){var c;c=(c=Te(a,b))?(c=c.jc())&&c.name:a.m.jc();return c?new L(c,a.m.get(c)):null}h.R=function(a,b){var c=Te(this,a);return c?c.ka(function(a){return b(a.name,a.U)}):this.m.ka(b)};h.ac=function(a){return this.bc(a.Wc(),a)};
h.bc=function(a,b){var c=Te(this,b);if(c)return c.bc(a,function(a){return a});for(var c=this.m.bc(a.name,wc),d=Jc(c);null!=d&&0>b.compare(d,a);)Ic(c),d=Jc(c);return c};h.xf=function(a){return this.dc(a.Tc(),a)};h.dc=function(a,b){var c=Te(this,b);if(c)return c.dc(a,function(a){return a});for(var c=this.m.dc(a.name,wc),d=Jc(c);null!=d&&0<b.compare(d,a);)Ic(c),d=Jc(c);return c};h.Gc=function(a){return this.e()?a.e()?0:-1:a.L()||a.e()?1:a===we?-1:0};
h.pb=function(a){if(a===re||sa(this.Ab.hc,a.toString()))return this;var b=this.Ab,c=this.m;O(a!==re,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.ac(wc),f=Ic(c);f;)e=e||a.Lc(f.U),d.push(f),f=Ic(c);d=e?Me(d,Vd(a)):te;e=a.toString();c=wa(b.hc);c[e]=a;a=wa(b.Ed);a[e]=d;return new fe(this.m,this.ca,new Ke(a,c))};h.Mc=function(a){return a===re||sa(this.Ab.hc,a.toString())};
h.ea=function(a){if(a===this)return!0;if(a.L())return!1;if(this.C().ea(a.C())&&this.m.count()===a.m.count()){var b=this.ac(R);a=a.ac(R);for(var c=Ic(b),d=Ic(a);c&&d;){if(c.name!==d.name||!c.U.ea(d.U))return!1;c=Ic(b);d=Ic(a)}return null===c&&null===d}return!1};function Te(a,b){return b===re?null:a.Ab.get(b.toString())}h.toString=function(){return G(this.J(!0))};function Q(a,b){if(null===a)return H;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);O(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new Yc(a,Q(c));if(a instanceof Array){var d=H,e=a;v(e,function(a,b){if(y(e,b)&&"."!==b.substring(0,1)){var c=Q(a);if(c.L()||!c.e())d=
d.W(b,c)}});return d.ia(Q(c))}var f=[],g=!1,k=a;Fb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=Q(k[a]);b.e()||(g=g||!b.C().e(),f.push(new L(a,b)))}});if(0==f.length)return H;var m=Me(f,xc,function(a){return a.name},zc);if(g){var l=Me(f,Vd(R));return new fe(m,Q(c),new Ke({".priority":l},{".priority":R}))}return new fe(m,Q(c),Oe)}var Ue=Math.log(2);
function Ve(a){this.count=parseInt(Math.log(a+1)/Ue,10);this.nf=this.count-1;this.ng=a+1&parseInt(Array(this.count+1).join("1"),2)}function We(a){var b=!(a.ng&1<<a.nf);a.nf--;return b}
function Me(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var l=a[b],t=c?c(l):l;return new Kc(t,l.U,!1,null,null)}var l=parseInt(f/2,10)+b,f=e(b,l),A=e(l+1,d),l=a[l],t=c?c(l):l;return new Kc(t,l.U,!1,f,A)}a.sort(b);var f=function(b){function d(b,g){var k=t-b,A=t;t-=b;var A=e(k+1,A),k=a[k],I=c?c(k):k,A=new Kc(I,k.U,g,null,A);f?f.left=A:l=A;f=A}for(var f=null,l=null,t=a.length,A=0;A<b.count;++A){var I=We(b),Qd=Math.pow(2,b.count-(A+1));I?d(Qd,!1):(d(Qd,!1),d(Qd,!0))}return l}(new Ve(a.length));
return null!==f?new Ec(d||b,f):new Ec(d||b)}function Re(a){return"number"===typeof a?"number:"+Ad(a):"string:"+a}function Pe(a){if(a.L()){var b=a.J();O("string"===typeof b||"number"===typeof b||"object"===typeof b&&y(b,".sv"),"Priority must be a string or number.")}else O(a===we||a.e(),"priority of unexpected type.");O(a===we||a.C().e(),"Priority nodes can't have a priority of their own.")}var H=new fe(new Ec(zc),null,Oe);function Xe(){fe.call(this,new Ec(zc),H,Oe)}ka(Xe,fe);h=Xe.prototype;
h.Gc=function(a){return a===this?0:1};h.ea=function(a){return a===this};h.C=function(){return this};h.T=function(){return H};h.e=function(){return!1};var we=new Xe,ue=new L("[MIN_NAME]",H),Ae=new L("[MAX_NAME]",we);function je(a,b){this.Q=a;this.ae=b}function ge(a,b,c,d){return new je(new Xb(b,c,d),a.ae)}function ke(a){return a.Q.ga?a.Q.j():null}je.prototype.w=function(){return this.ae};function Yb(a){return a.ae.ga?a.ae.j():null};function Ye(a,b){this.Y=a;var c=a.n,d=new Ld(c.g),c=He(c)?new Ld(c.g):c.la?new Sd(c):new Md(c);this.Nf=new Zd(c);var e=b.w(),f=b.Q,g=d.ya(H,e.j(),null),k=c.ya(H,f.j(),null);this.Oa=new je(new Xb(k,f.ga,c.Ra()),new Xb(g,e.ga,d.Ra()));this.$a=[];this.ug=new Fd(a)}function Ze(a){return a.Y}h=Ye.prototype;h.w=function(){return this.Oa.w().j()};h.kb=function(a){var b=Yb(this.Oa);return b&&(He(this.Y.n)||!a.e()&&!b.T(K(a)).e())?b.S(a):null};h.e=function(){return 0===this.$a.length};h.Tb=function(a){this.$a.push(a)};
h.nb=function(a,b){var c=[];if(b){O(null==a,"A cancel should cancel all event registrations.");var d=this.Y.path;Ma(this.$a,function(a){(a=a.lf(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.$a.length;++f){var g=this.$a[f];if(!g.matches(a))e.push(g);else if(a.yf()){e=e.concat(this.$a.slice(f+1));break}}this.$a=e}else this.$a=[];return c};
h.gb=function(a,b,c){a.type===be&&null!==a.source.Lb&&(O(Yb(this.Oa),"We should always have a full cache before handling merges"),O(ke(this.Oa),"Missing event cache, even though we have a server cache"));var d=this.Oa;a=this.Nf.gb(d,a,b,c);b=this.Nf;c=a.me;O(c.Q.j().Mc(b.X.g),"Event snap not indexed");O(c.w().j().Mc(b.X.g),"Server snap not indexed");O(lc(a.me.w())||!lc(d.w()),"Once a server snap is complete, it should never go back");this.Oa=a.me;return $e(this,a.og,a.me.Q.j(),null)};
function af(a,b){var c=a.Oa.Q,d=[];c.j().L()||c.j().R(R,function(a,b){d.push(new J("child_added",b,a))});c.ga&&d.push(hc(c.j()));return $e(a,d,c.j(),b)}function $e(a,b,c,d){return Gd(a.ug,b,c,d?[d]:a.$a)};function bf(a,b,c){this.type=be;this.source=a;this.path=b;this.children=c}bf.prototype.$c=function(a){if(this.path.e())return a=this.children.subtree(new P(a)),a.e()?null:a.value?new Ac(this.source,M,a.value):new bf(this.source,M,a);O(K(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new bf(this.source,N(this.path),this.children)};bf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function cf(a,b){this.f=pd("p:rest:");this.G=a;this.Kb=b;this.Ca=null;this.ba={}}function df(a,b){if(p(b))return"tag$"+b;O(Ie(a.n),"should have a tag if it's not a default query.");return a.path.toString()}h=cf.prototype;
h.Cf=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.wa());var f=df(a,c),g={};this.ba[f]=g;a=Je(a.n);var k=this;ef(this,e+".json",a,function(a,b){var t=b;404===a&&(a=t=null);null===a&&k.Kb(e,t,!1,c);z(k.ba,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.$f=function(a,b){var c=df(a,b);delete this.ba[c]};h.O=function(a,b){this.Ca=a;var c=Cd(a),d=c.data,c=c.Ec&&c.Ec.exp;b&&b("ok",{auth:d,expires:c})};h.je=function(a){this.Ca=null;a("ok",null)};
h.Qe=function(){};h.Gf=function(){};h.Md=function(){};h.put=function(){};h.Df=function(){};h.Ye=function(){};
function ef(a,b,c,d){c=c||{};c.format="export";a.Ca&&(c.auth=a.Ca);var e=(a.G.ob?"https://":"http://")+a.G.host+b+"?"+Ib(c);a.f("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.f("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=Rb(f.responseText)}catch(c){S("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==
f.status&&S("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}};f.open("GET",e,!0);f.send()};function ff(a){O(da(a)&&0<a.length,"Requires a non-empty array");this.fg=a;this.Rc={}}ff.prototype.ie=function(a,b){var c;c=this.Rc[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].Dc.apply(c[d].Qa,Array.prototype.slice.call(arguments,1))};ff.prototype.Ib=function(a,b,c){gf(this,a);this.Rc[a]=this.Rc[a]||[];this.Rc[a].push({Dc:b,Qa:c});(a=this.Ee(a))&&b.apply(c,a)};
ff.prototype.mc=function(a,b,c){gf(this,a);a=this.Rc[a]||[];for(var d=0;d<a.length;d++)if(a[d].Dc===b&&(!c||c===a[d].Qa)){a.splice(d,1);break}};function gf(a,b){O(Ra(a.fg,function(a){return a===b}),"Unknown event: "+b)};var hf=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);O(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);O(20===c.length,"nextPushId: Length should be 20.");
return c}}();function jf(){ff.call(this,["online"]);this.oc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.oc||(a.oc=!0,a.ie("online",!0))},!1);window.addEventListener("offline",function(){a.oc&&(a.oc=!1,a.ie("online",!1))},!1)}}ka(jf,ff);jf.prototype.Ee=function(a){O("online"===a,"Unknown event type: "+a);return[this.oc]};ba(jf);function kf(){ff.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Sb=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.Sb&&(c.Sb=b,c.ie("visible",b))},!1)}}ka(kf,ff);kf.prototype.Ee=function(a){O("visible"===a,"Unknown event type: "+a);return[this.Sb]};ba(kf);function P(a,b){if(1==arguments.length){this.u=a.split("/");for(var c=0,d=0;d<this.u.length;d++)0<this.u[d].length&&(this.u[c]=this.u[d],c++);this.u.length=c;this.aa=0}else this.u=a,this.aa=b}function lf(a,b){var c=K(a);if(null===c)return b;if(c===K(b))return lf(N(a),N(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
function mf(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=yc(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function K(a){return a.aa>=a.u.length?null:a.u[a.aa]}function le(a){return a.u.length-a.aa}function N(a){var b=a.aa;b<a.u.length&&b++;return new P(a.u,b)}function me(a){return a.aa<a.u.length?a.u[a.u.length-1]:null}h=P.prototype;
h.toString=function(){for(var a="",b=this.aa;b<this.u.length;b++)""!==this.u[b]&&(a+="/"+this.u[b]);return a||"/"};h.slice=function(a){return this.u.slice(this.aa+(a||0))};h.parent=function(){if(this.aa>=this.u.length)return null;for(var a=[],b=this.aa;b<this.u.length-1;b++)a.push(this.u[b]);return new P(a,0)};
h.o=function(a){for(var b=[],c=this.aa;c<this.u.length;c++)b.push(this.u[c]);if(a instanceof P)for(c=a.aa;c<a.u.length;c++)b.push(a.u[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new P(b,0)};h.e=function(){return this.aa>=this.u.length};h.ea=function(a){if(le(this)!==le(a))return!1;for(var b=this.aa,c=a.aa;b<=this.u.length;b++,c++)if(this.u[b]!==a.u[c])return!1;return!0};
h.contains=function(a){var b=this.aa,c=a.aa;if(le(this)>le(a))return!1;for(;b<this.u.length;){if(this.u[b]!==a.u[c])return!1;++b;++c}return!0};var M=new P("");function nf(a,b){this.Ua=a.slice();this.Ka=Math.max(1,this.Ua.length);this.pf=b;for(var c=0;c<this.Ua.length;c++)this.Ka+=Pb(this.Ua[c]);of(this)}nf.prototype.push=function(a){0<this.Ua.length&&(this.Ka+=1);this.Ua.push(a);this.Ka+=Pb(a);of(this)};nf.prototype.pop=function(){var a=this.Ua.pop();this.Ka-=Pb(a);0<this.Ua.length&&--this.Ka};
function of(a){if(768<a.Ka)throw Error(a.pf+"has a key path longer than 768 bytes ("+a.Ka+").");if(32<a.Ua.length)throw Error(a.pf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pf(a));}function pf(a){return 0==a.Ua.length?"":"in property '"+a.Ua.join(".")+"'"};function qf(a,b){this.value=a;this.children=b||rf}var rf=new Ec(function(a,b){return a===b?0:a<b?-1:1});function sf(a){var b=qe;v(a,function(a,d){b=b.set(new P(d),a)});return b}h=qf.prototype;h.e=function(){return null===this.value&&this.children.e()};function tf(a,b,c){if(null!=a.value&&c(a.value))return{path:M,value:a.value};if(b.e())return null;var d=K(b);a=a.children.get(d);return null!==a?(b=tf(a,N(b),c),null!=b?{path:(new P(d)).o(b.path),value:b.value}:null):null}
function uf(a,b){return tf(a,b,function(){return!0})}h.subtree=function(a){if(a.e())return this;var b=this.children.get(K(a));return null!==b?b.subtree(N(a)):qe};h.set=function(a,b){if(a.e())return new qf(b,this.children);var c=K(a),d=(this.children.get(c)||qe).set(N(a),b),c=this.children.Sa(c,d);return new qf(this.value,c)};
h.remove=function(a){if(a.e())return this.children.e()?qe:new qf(null,this.children);var b=K(a),c=this.children.get(b);return c?(a=c.remove(N(a)),b=a.e()?this.children.remove(b):this.children.Sa(b,a),null===this.value&&b.e()?qe:new qf(this.value,b)):this};h.get=function(a){if(a.e())return this.value;var b=this.children.get(K(a));return b?b.get(N(a)):null};
function pe(a,b,c){if(b.e())return c;var d=K(b);b=pe(a.children.get(d)||qe,N(b),c);d=b.e()?a.children.remove(d):a.children.Sa(d,b);return new qf(a.value,d)}function vf(a,b){return wf(a,M,b)}function wf(a,b,c){var d={};a.children.ka(function(a,f){d[a]=wf(f,b.o(a),c)});return c(b,a.value,d)}function xf(a,b,c){return yf(a,b,M,c)}function yf(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=K(b);return(a=a.children.get(e))?yf(a,N(b),c.o(e),d):null}
function zf(a,b,c){Af(a,b,M,c)}function Af(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=K(b);return(a=a.children.get(e))?Af(a,N(b),c.o(e),d):qe}function ne(a,b){Bf(a,M,b)}function Bf(a,b,c){a.children.ka(function(a,e){Bf(e,b.o(a),c)});a.value&&c(b,a.value)}function Cf(a,b){a.children.ka(function(a,d){d.value&&b(a,d.value)})}var qe=new qf(null);qf.prototype.toString=function(){var a={};ne(this,function(b,c){a[b.toString()]=c.toString()});return G(a)};function Df(a,b,c){this.type=ee;this.source=Ef;this.path=a;this.Ub=b;this.Yd=c}Df.prototype.$c=function(a){if(this.path.e()){if(null!=this.Ub.value)return O(this.Ub.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Ub.subtree(new P(a));return new Df(M,a,this.Yd)}O(K(this.path)===a,"operationForChild called for unrelated child.");return new Df(N(this.path),this.Ub,this.Yd)};
Df.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Yd+" affectedTree="+this.Ub+")"};var Bc=0,be=1,ee=2,Dc=3;function Ff(a,b,c,d){this.Ae=a;this.tf=b;this.Lb=c;this.ef=d;O(!d||b,"Tagged queries must be from server.")}var Ef=new Ff(!0,!1,null,!1),Gf=new Ff(!1,!0,null,!1);Ff.prototype.toString=function(){return this.Ae?"user":this.ef?"server(queryID="+this.Lb+")":"server"};function Hf(a){this.Z=a}var If=new Hf(new qf(null));function Jf(a,b,c){if(b.e())return new Hf(new qf(c));var d=uf(a.Z,b);if(null!=d){var e=d.path,d=d.value;b=lf(e,b);d=d.H(b,c);return new Hf(a.Z.set(e,d))}a=pe(a.Z,b,new qf(c));return new Hf(a)}function Kf(a,b,c){var d=a;Fb(c,function(a,c){d=Jf(d,b.o(a),c)});return d}Hf.prototype.Ud=function(a){if(a.e())return If;a=pe(this.Z,a,qe);return new Hf(a)};function Lf(a,b){var c=uf(a.Z,b);return null!=c?a.Z.get(c.path).S(lf(c.path,b)):null}
function Mf(a){var b=[],c=a.Z.value;null!=c?c.L()||c.R(R,function(a,c){b.push(new L(a,c))}):a.Z.children.ka(function(a,c){null!=c.value&&b.push(new L(a,c.value))});return b}function Nf(a,b){if(b.e())return a;var c=Lf(a,b);return null!=c?new Hf(new qf(c)):new Hf(a.Z.subtree(b))}Hf.prototype.e=function(){return this.Z.e()};Hf.prototype.apply=function(a){return Of(M,this.Z,a)};
function Of(a,b,c){if(null!=b.value)return c.H(a,b.value);var d=null;b.children.ka(function(b,f){".priority"===b?(O(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=Of(a.o(b),f,c)});c.S(a).e()||null===d||(c=c.H(a.o(".priority"),d));return c};function Pf(){this.V=If;this.pa=[];this.Pc=-1}function Qf(a,b){for(var c=0;c<a.pa.length;c++){var d=a.pa[c];if(d.md===b)return d}return null}h=Pf.prototype;
h.Ud=function(a){var b=Sa(this.pa,function(b){return b.md===a});O(0<=b,"removeWrite called with nonexistent writeId.");var c=this.pa[b];this.pa.splice(b,1);for(var d=c.visible,e=!1,f=this.pa.length-1;d&&0<=f;){var g=this.pa[f];g.visible&&(f>=b&&Rf(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.V=Sf(this.pa,Tf,M),this.Pc=0<this.pa.length?this.pa[this.pa.length-1].md:-1;else if(c.Ja)this.V=this.V.Ud(c.path);else{var k=this;v(c.children,function(a,b){k.V=k.V.Ud(c.path.o(b))})}return!0}return!1};
h.Aa=function(a,b,c,d){if(c||d){var e=Nf(this.V,a);return!d&&e.e()?b:d||null!=b||null!=Lf(e,M)?(e=Sf(this.pa,function(b){return(b.visible||d)&&(!c||!(0<=La(c,b.md)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||H,e.apply(b)):null}e=Lf(this.V,a);if(null!=e)return e;e=Nf(this.V,a);return e.e()?b:null!=b||null!=Lf(e,M)?(b=b||H,e.apply(b)):null};
h.Cc=function(a,b){var c=H,d=Lf(this.V,a);if(d)d.L()||d.R(R,function(a,b){c=c.W(a,b)});else if(b){var e=Nf(this.V,a);b.R(R,function(a,b){var d=Nf(e,new P(a)).apply(b);c=c.W(a,d)});Ma(Mf(e),function(a){c=c.W(a.name,a.U)})}else e=Nf(this.V,a),Ma(Mf(e),function(a){c=c.W(a.name,a.U)});return c};h.nd=function(a,b,c,d){O(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.o(b);if(null!=Lf(this.V,a))return null;a=Nf(this.V,a);return a.e()?d.S(b):a.apply(d.S(b))};
h.Bc=function(a,b,c){a=a.o(b);var d=Lf(this.V,a);return null!=d?d:Wb(c,b)?Nf(this.V,a).apply(c.j().T(b)):null};h.xc=function(a){return Lf(this.V,a)};h.qe=function(a,b,c,d,e,f){var g;a=Nf(this.V,a);g=Lf(a,M);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.pb(f);if(g.e()||g.L())return[];b=[];a=Vd(f);e=e?g.dc(c,f):g.bc(c,f);for(f=Ic(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=Ic(e);return b};
function Rf(a,b){return a.Ja?a.path.contains(b):!!ta(a.children,function(c,d){return a.path.o(d).contains(b)})}function Tf(a){return a.visible}
function Sf(a,b,c){for(var d=If,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ja)c.contains(g)?(g=lf(c,g),d=Jf(d,g,f.Ja)):g.contains(c)&&(g=lf(g,c),d=Jf(d,M,f.Ja.S(g)));else if(f.children)if(c.contains(g))g=lf(c,g),d=Kf(d,g,f.children);else{if(g.contains(c))if(g=lf(g,c),g.e())d=Kf(d,M,f.children);else if(f=z(f.children,K(g)))f=f.S(N(g)),d=Jf(d,M,f)}else throw jd("WriteRecord should have .snap or .children");}}return d}function Uf(a,b){this.Qb=a;this.Z=b}h=Uf.prototype;
h.Aa=function(a,b,c){return this.Z.Aa(this.Qb,a,b,c)};h.Cc=function(a){return this.Z.Cc(this.Qb,a)};h.nd=function(a,b,c){return this.Z.nd(this.Qb,a,b,c)};h.xc=function(a){return this.Z.xc(this.Qb.o(a))};h.qe=function(a,b,c,d,e){return this.Z.qe(this.Qb,a,b,c,d,e)};h.Bc=function(a,b){return this.Z.Bc(this.Qb,a,b)};h.o=function(a){return new Uf(this.Qb.o(a),this.Z)};function Vf(){this.children={};this.pd=0;this.value=null}function Wf(a,b,c){this.Jd=a?a:"";this.Ha=b?b:null;this.A=c?c:new Vf}function Xf(a,b){for(var c=b instanceof P?b:new P(b),d=a,e;null!==(e=K(c));)d=new Wf(e,d,z(d.A.children,e)||new Vf),c=N(c);return d}h=Wf.prototype;h.Ea=function(){return this.A.value};function Yf(a,b){O("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Zf(a)}h.clear=function(){this.A.value=null;this.A.children={};this.A.pd=0;Zf(this)};
h.zd=function(){return 0<this.A.pd};h.e=function(){return null===this.Ea()&&!this.zd()};h.R=function(a){var b=this;v(this.A.children,function(c,d){a(new Wf(d,b,c))})};function $f(a,b,c,d){c&&!d&&b(a);a.R(function(a){$f(a,b,!0,d)});c&&d&&b(a)}function ag(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new P(null===this.Ha?this.Jd:this.Ha.path()+"/"+this.Jd)};h.name=function(){return this.Jd};h.parent=function(){return this.Ha};
function Zf(a){if(null!==a.Ha){var b=a.Ha,c=a.Jd,d=a.e(),e=y(b.A.children,c);d&&e?(delete b.A.children[c],b.A.pd--,Zf(b)):d||e||(b.A.children[c]=a.A,b.A.pd++,Zf(b))}};var bg=/[\[\].#$\/\u0000-\u001F\u007F]/,cg=/[\[\].#$\u0000-\u001F\u007F]/,dg=/^[a-zA-Z][a-zA-Z._\-+]+$/;function eg(a){return q(a)&&0!==a.length&&!bg.test(a)}function fg(a){return null===a||q(a)||fa(a)&&!td(a)||ga(a)&&y(a,".sv")}function gg(a,b,c,d){d&&!p(b)||hg(E(a,1,d),b,c)}
function hg(a,b,c){c instanceof P&&(c=new nf(c,a));if(!p(b))throw Error(a+"contains undefined "+pf(c));if(r(b))throw Error(a+"contains a function "+pf(c)+" with contents: "+b.toString());if(td(b))throw Error(a+"contains "+b.toString()+" "+pf(c));if(q(b)&&b.length>10485760/3&&10485760<Pb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+pf(c)+" ('"+b.substring(0,50)+"...')");if(ga(b)){var d=!1,e=!1;Fb(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!eg(b)))throw Error(a+" contains an invalid key ("+b+") "+pf(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);hg(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+pf(c)+" in addition to actual children.");}}
function ig(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!eg(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(mf);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function jg(a,b,c){var d=E(a,1,!1);if(!ga(b)||da(b))throw Error(d+" must be an object containing the children to replace.");var e=[];Fb(b,function(a,b){var k=new P(a);hg(d,b,c.o(k));if(".priority"===me(k)&&!fg(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});ig(d,e)}
function kg(a,b,c){if(td(c))throw Error(E(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fg(c))throw Error(E(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function lg(a,b,c){if(!c||p(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(E(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function mg(a,b){if(p(b)&&!eg(b))throw Error(E(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function ng(a,b){if(!q(b)||0===b.length||cg.test(b))throw Error(E(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function og(a,b){if(".info"===K(b))throw Error(a+" failed: Can't modify data under /.info/");}function pg(a,b){if(!q(b))throw Error(E(a,1,!1)+"must be a valid credential (a string).");}function qg(a,b,c){if(!q(c))throw Error(E(a,b,!1)+"must be a valid string.");}
function rg(a,b){qg(a,1,b);if(!dg.test(b))throw Error(E(a,1,!1)+"'"+b+"' is not a valid authentication provider.");}function sg(a,b,c,d){if(!d||p(c))if(!ga(c)||null===c)throw Error(E(a,b,d)+"must be a valid object.");}function tg(a,b,c){if(!ga(b)||!y(b,c))throw Error(E(a,1,!1)+'must contain the key "'+c+'"');if(!q(z(b,c)))throw Error(E(a,1,!1)+'must contain the key "'+c+'" with type "string"');};function ug(){this.set={}}h=ug.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return y(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.e=function(){return va(this.set)};h.count=function(){return oa(this.set)};function vg(a,b){v(a.set,function(a,d){b(d,a)})}h.keys=function(){var a=[];v(this.set,function(b,c){a.push(c)});return a};function Vc(){this.m=this.B=null}Vc.prototype.find=function(a){if(null!=this.B)return this.B.S(a);if(a.e()||null==this.m)return null;var b=K(a);a=N(a);return this.m.contains(b)?this.m.get(b).find(a):null};Vc.prototype.rc=function(a,b){if(a.e())this.B=b,this.m=null;else if(null!==this.B)this.B=this.B.H(a,b);else{null==this.m&&(this.m=new ug);var c=K(a);this.m.contains(c)||this.m.add(c,new Vc);c=this.m.get(c);a=N(a);c.rc(a,b)}};
function wg(a,b){if(b.e())return a.B=null,a.m=null,!0;if(null!==a.B){if(a.B.L())return!1;var c=a.B;a.B=null;c.R(R,function(b,c){a.rc(new P(b),c)});return wg(a,b)}return null!==a.m?(c=K(b),b=N(b),a.m.contains(c)&&wg(a.m.get(c),b)&&a.m.remove(c),a.m.e()?(a.m=null,!0):!1):!0}function Wc(a,b,c){null!==a.B?c(b,a.B):a.R(function(a,e){var f=new P(b.toString()+"/"+a);Wc(e,f,c)})}Vc.prototype.R=function(a){null!==this.m&&vg(this.m,function(b,c){a(b,c)})};var xg="auth.firebase.com";function yg(a,b,c){this.qd=a||{};this.he=b||{};this.fb=c||{};this.qd.remember||(this.qd.remember="default")}var zg=["remember","redirectTo"];function Ag(a){var b={},c={};Fb(a||{},function(a,e){0<=La(zg,a)?b[a]=e:c[a]=e});return new yg(b,{},c)};function Bg(a,b){this.Ue=["session",a.Rd,a.lc].join(":");this.ee=b}Bg.prototype.set=function(a,b){if(!b)if(this.ee.length)b=this.ee[0];else throw Error("fb.login.SessionManager : No storage options available!");b.set(this.Ue,a)};Bg.prototype.get=function(){var a=Oa(this.ee,u(this.Bg,this)),a=Na(a,function(a){return null!==a});Va(a,function(a,c){return Dd(c.token)-Dd(a.token)});return 0<a.length?a.shift():null};Bg.prototype.Bg=function(a){try{var b=a.get(this.Ue);if(b&&b.token)return b}catch(c){}return null};
Bg.prototype.clear=function(){var a=this;Ma(this.ee,function(b){b.remove(a.Ue)})};function Cg(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Dg(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cg())}function Eg(){return"undefined"!==typeof location&&/^file:\//.test(location.href)}
function Fg(a){var b=Cg();if(""===b)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((b=b.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a}else if(-1<b.indexOf("Trident")&&(b=b.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a;return!1};function Gg(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function Hg(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function Ig(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)}
function Jg(a){/^https?:\/\//.test(a)||(a=window.location.href);var b=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return b?b[1]:a}function Kg(a){var b="";try{a=a.replace(/.*\?/,"");var c=Jb(a);c&&y(c,"__firebase_request_key")&&(b=z(c,"__firebase_request_key"))}catch(d){}return b}function Lg(){try{var a=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,""),a=a.replace(/\?$/,""),a=a.replace(/^#+$/,"");document.location.hash=a}catch(b){}}
function Mg(){var a=sd(xg);return a.scheme+"://"+a.host+"/v2"}function Ng(a){return Mg()+"/"+a+"/auth/channel"};function Og(a){var b=this;this.hb=a;this.fe="*";Fg(8)?this.Uc=this.Cd=Gg():(this.Uc=window.opener,this.Cd=window);if(!b.Uc)throw"Unable to find relay frame";Hg(this.Cd,"message",u(this.nc,this));Hg(this.Cd,"message",u(this.Ff,this));try{Pg(this,{a:"ready"})}catch(c){Hg(this.Uc,"load",function(){Pg(b,{a:"ready"})})}Hg(window,"unload",u(this.Mg,this))}function Pg(a,b){b=G(b);Fg(8)?a.Uc.doPost(b,a.fe):a.Uc.postMessage(b,a.fe)}
Og.prototype.nc=function(a){var b=this,c;try{c=Rb(a.data)}catch(d){}c&&"request"===c.a&&(Ig(window,"message",this.nc),this.fe=a.origin,this.hb&&setTimeout(function(){b.hb(b.fe,c.d,function(a,c){b.mg=!c;b.hb=void 0;Pg(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};Og.prototype.Mg=function(){try{Ig(this.Cd,"message",this.Ff)}catch(a){}this.hb&&(Pg(this,{a:"error",d:"unknown closed window"}),this.hb=void 0);try{window.close()}catch(b){}};Og.prototype.Ff=function(a){if(this.mg&&"die"===a.data)try{window.close()}catch(b){}};function Qg(a){this.tc=Fa()+Fa()+Fa();this.Kf=a}Qg.prototype.open=function(a,b){cd.set("redirect_request_id",this.tc);cd.set("redirect_request_id",this.tc);b.requestId=this.tc;b.redirectTo=b.redirectTo||window.location.href;a+=(/\?/.test(a)?"":"?")+Ib(b);window.location=a};Qg.isAvailable=function(){return!Eg()&&!Dg()};Qg.prototype.Fc=function(){return"redirect"};var Rg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function Sg(a){var b=Error(z(Rg,a),a);b.code=a;return b};function Tg(a){var b;(b=!a.window_features)||(b=Cg(),b=-1!==b.indexOf("Fennec/")||-1!==b.indexOf("Firefox/")&&-1!==b.indexOf("Android"));b&&(a.window_features=void 0);a.window_name||(a.window_name="_blank");this.options=a}
Tg.prototype.open=function(a,b,c){function d(a){g&&(document.body.removeChild(g),g=void 0);t&&(t=clearInterval(t));Ig(window,"message",e);Ig(window,"unload",d);if(l&&!a)try{l.close()}catch(b){k.postMessage("die",m)}l=k=void 0}function e(a){if(a.origin===m)try{var b=Rb(a.data);"ready"===b.a?k.postMessage(A,m):"error"===b.a?(d(!1),c&&(c(b.d),c=null)):"response"===b.a&&(d(b.forceKeepWindowOpen),c&&(c(null,b.d),c=null))}catch(e){}}var f=Fg(8),g,k;if(!this.options.relay_url)return c(Error("invalid arguments: origin of url and relay_url must match"));
var m=Jg(a);if(m!==Jg(this.options.relay_url))c&&setTimeout(function(){c(Error("invalid arguments: origin of url and relay_url must match"))},0);else{f&&(g=document.createElement("iframe"),g.setAttribute("src",this.options.relay_url),g.style.display="none",g.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(g),k=g.contentWindow);a+=(/\?/.test(a)?"":"?")+Ib(b);var l=window.open(a,this.options.window_name,this.options.window_features);k||(k=l);var t=setInterval(function(){l&&l.closed&&
(d(!1),c&&(c(Sg("USER_CANCELLED")),c=null))},500),A=G({a:"request",d:b});Hg(window,"unload",d);Hg(window,"message",e)}};
Tg.isAvailable=function(){var a;if(a="postMessage"in window&&!Eg())(a=Dg()||"undefined"!==typeof navigator&&(!!Cg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(a=Cg(),a="undefined"!==typeof navigator&&"undefined"!==typeof window&&!!(a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||a.match(/CriOS/)||a.match(/Twitter for iPhone/)||a.match(/FBAN\/FBIOS/)||window.navigator.standalone)),a=!a;return a&&!Cg().match(/PhantomJS/)};Tg.prototype.Fc=function(){return"popup"};function Ug(a){a.method||(a.method="GET");a.headers||(a.headers={});a.headers.content_type||(a.headers.content_type="application/json");a.headers.content_type=a.headers.content_type.toLowerCase();this.options=a}
Ug.prototype.open=function(a,b,c){function d(){c&&(c(Sg("REQUEST_INTERRUPTED")),c=null)}var e=new XMLHttpRequest,f=this.options.method.toUpperCase(),g;Hg(window,"beforeunload",d);e.onreadystatechange=function(){if(c&&4===e.readyState){var a;if(200<=e.status&&300>e.status){try{a=Rb(e.responseText)}catch(b){}c(null,a)}else 500<=e.status&&600>e.status?c(Sg("SERVER_ERROR")):c(Sg("NETWORK_ERROR"));c=null;Ig(window,"beforeunload",d)}};if("GET"===f)a+=(/\?/.test(a)?"":"?")+Ib(b),g=null;else{var k=this.options.headers.content_type;
"application/json"===k&&(g=G(b));"application/x-www-form-urlencoded"===k&&(g=Ib(b))}e.open(f,a,!0);a={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};ya(a,this.options.headers);for(var m in a)e.setRequestHeader(m,a[m]);e.send(g)};Ug.isAvailable=function(){var a;if(a=!!window.XMLHttpRequest)a=Cg(),a=!(a.match(/MSIE/)||a.match(/Trident/))||Fg(10);return a};Ug.prototype.Fc=function(){return"json"};function Vg(a){this.tc=Fa()+Fa()+Fa();this.Kf=a}
Vg.prototype.open=function(a,b,c){function d(){c&&(c(Sg("USER_CANCELLED")),c=null)}var e=this,f=sd(xg),g;b.requestId=this.tc;b.redirectTo=f.scheme+"://"+f.host+"/blank/page.html";a+=/\?/.test(a)?"":"?";a+=Ib(b);(g=window.open(a,"_blank","location=no"))&&r(g.addEventListener)?(g.addEventListener("loadstart",function(a){var b;if(b=a&&a.url)a:{try{var l=document.createElement("a");l.href=a.url;b=l.host===f.host&&"/blank/page.html"===l.pathname;break a}catch(t){}b=!1}b&&(a=Kg(a.url),g.removeEventListener("exit",
d),g.close(),a=new yg(null,null,{requestId:e.tc,requestKey:a}),e.Kf.requestWithCredential("/auth/session",a,c),c=null)}),g.addEventListener("exit",d)):c(Sg("TRANSPORT_UNAVAILABLE"))};Vg.isAvailable=function(){return Dg()};Vg.prototype.Fc=function(){return"redirect"};function Wg(a){a.callback_parameter||(a.callback_parameter="callback");this.options=a;window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}
Wg.prototype.open=function(a,b,c){function d(){c&&(c(Sg("REQUEST_INTERRUPTED")),c=null)}function e(){setTimeout(function(){window.__firebase_auth_jsonp[f]=void 0;va(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var a=document.getElementById(f);a&&a.parentNode.removeChild(a)}catch(b){}},1);Ig(window,"beforeunload",d)}var f="fn"+(new Date).getTime()+Math.floor(99999*Math.random());b[this.options.callback_parameter]="__firebase_auth_jsonp."+f;a+=(/\?/.test(a)?"":"?")+Ib(b);
Hg(window,"beforeunload",d);window.__firebase_auth_jsonp[f]=function(a){c&&(c(null,a),c=null);e()};Xg(f,a,c)};
function Xg(a,b,c){setTimeout(function(){try{var d=document.createElement("script");d.type="text/javascript";d.id=a;d.async=!0;d.src=b;d.onerror=function(){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b);c&&c(Sg("NETWORK_ERROR"))};var e=document.getElementsByTagName("head");(e&&0!=e.length?e[0]:document.documentElement).appendChild(d)}catch(f){c&&c(Sg("NETWORK_ERROR"))}},0)}Wg.isAvailable=function(){return"undefined"!==typeof document&&null!=document.createElement};
Wg.prototype.Fc=function(){return"json"};function Yg(a,b,c,d){ff.call(this,["auth_status"]);this.G=a;this.hf=b;this.hh=c;this.Pe=d;this.wc=new Bg(a,[bd,cd]);this.qb=null;this.We=!1;Zg(this)}ka(Yg,ff);h=Yg.prototype;h.Be=function(){return this.qb||null};function Zg(a){cd.get("redirect_request_id")&&$g(a);var b=a.wc.get();b&&b.token?(ah(a,b),a.hf(b.token,function(c,d){bh(a,c,d,!1,b.token,b)},function(b,d){ch(a,"resumeSession()",b,d)})):ah(a,null)}
function dh(a,b,c,d,e,f){"firebaseio-demo.com"===a.G.domain&&S("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com.");a.hf(b,function(f,k){bh(a,f,k,!0,b,c,d||{},e)},function(b,c){ch(a,"auth()",b,c,f)})}function eh(a,b){a.wc.clear();ah(a,null);a.hh(function(a,d){if("ok"===a)T(b,null);else{var e=(a||"error").toUpperCase(),f=e;d&&(f+=": "+d);f=Error(f);f.code=e;T(b,f)}})}
function bh(a,b,c,d,e,f,g,k){"ok"===b?(d&&(b=c.auth,f.auth=b,f.expires=c.expires,f.token=Ed(e)?e:"",c=null,b&&y(b,"uid")?c=z(b,"uid"):y(f,"uid")&&(c=z(f,"uid")),f.uid=c,c="custom",b&&y(b,"provider")?c=z(b,"provider"):y(f,"provider")&&(c=z(f,"provider")),f.provider=c,a.wc.clear(),Ed(e)&&(g=g||{},c=bd,"sessionOnly"===g.remember&&(c=cd),"none"!==g.remember&&a.wc.set(f,c)),ah(a,f)),T(k,null,f)):(a.wc.clear(),ah(a,null),f=a=(b||"error").toUpperCase(),c&&(f+=": "+c),f=Error(f),f.code=a,T(k,f))}
function ch(a,b,c,d,e){S(b+" was canceled: "+d);a.wc.clear();ah(a,null);a=Error(d);a.code=c.toUpperCase();T(e,a)}function fh(a,b,c,d,e){gh(a);c=new yg(d||{},{},c||{});hh(a,[Ug,Wg],"/auth/"+b,c,e)}
function ih(a,b,c,d){gh(a);var e=[Tg,Vg];c=Ag(c);var f=625;"anonymous"===b||"password"===b?setTimeout(function(){T(d,Sg("TRANSPORT_UNAVAILABLE"))},0):("github"===b&&(f=1025),c.he.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width="+f+",top="+("object"===typeof screen?.5*(screen.height-625):0)+",left="+("object"===typeof screen?.5*(screen.width-f):0),c.he.relay_url=Ng(a.G.lc),c.he.requestWithCredential=u(a.uc,a),hh(a,e,"/auth/"+
b,c,d))}function $g(a){var b=cd.get("redirect_request_id");if(b){var c=cd.get("redirect_client_options");cd.remove("redirect_request_id");cd.remove("redirect_client_options");var d=[Ug,Wg],b={requestId:b,requestKey:Kg(document.location.hash)},c=new yg(c,{},b);a.We=!0;Lg();hh(a,d,"/auth/session",c,function(){this.We=!1}.bind(a))}}h.ve=function(a,b){gh(this);var c=Ag(a);c.fb._method="POST";this.uc("/users",c,function(a,c){a?T(b,a):T(b,a,c)})};
h.Xe=function(a,b){var c=this;gh(this);var d="/users/"+encodeURIComponent(a.email),e=Ag(a);e.fb._method="DELETE";this.uc(d,e,function(a,d){!a&&d&&d.uid&&c.qb&&c.qb.uid&&c.qb.uid===d.uid&&eh(c);T(b,a)})};h.se=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=Ag(a);d.fb._method="PUT";d.fb.password=a.newPassword;this.uc(c,d,function(a){T(b,a)})};
h.re=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.oldEmail)+"/email",d=Ag(a);d.fb._method="PUT";d.fb.email=a.newEmail;d.fb.password=a.password;this.uc(c,d,function(a){T(b,a)})};h.Ze=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=Ag(a);d.fb._method="POST";this.uc(c,d,function(a){T(b,a)})};h.uc=function(a,b,c){jh(this,[Ug,Wg],a,b,c)};
function hh(a,b,c,d,e){jh(a,b,c,d,function(b,c){!b&&c&&c.token&&c.uid?dh(a,c.token,c,d.qd,function(a,b){a?T(e,a):T(e,null,b)}):T(e,b||Sg("UNKNOWN_ERROR"))})}
function jh(a,b,c,d,e){b=Na(b,function(a){return"function"===typeof a.isAvailable&&a.isAvailable()});0===b.length?setTimeout(function(){T(e,Sg("TRANSPORT_UNAVAILABLE"))},0):(b=new (b.shift())(d.he),d=Gb(d.fb),d.v="js-"+Eb,d.transport=b.Fc(),d.suppress_status_codes=!0,a=Mg()+"/"+a.G.lc+c,b.open(a,d,function(a,b){if(a)T(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code;c.details=b.error.details;T(e,c)}else T(e,null,b)}))}
function ah(a,b){var c=null!==a.qb||null!==b;a.qb=b;c&&a.ie("auth_status",b);a.Pe(null!==b)}h.Ee=function(a){O("auth_status"===a,'initial event must be of type "auth_status"');return this.We?null:[this.qb]};function gh(a){var b=a.G;if("firebaseio.com"!==b.domain&&"firebaseio-demo.com"!==b.domain&&"auth.firebase.com"===xg)throw Error("This custom Firebase server ('"+a.G.domain+"') does not support delegated login.");};var gd="websocket",hd="long_polling";function kh(a){this.nc=a;this.Qd=[];this.Wb=0;this.te=-1;this.Jb=null}function lh(a,b,c){a.te=b;a.Jb=c;a.te<a.Wb&&(a.Jb(),a.Jb=null)}function mh(a,b,c){for(a.Qd[b]=c;a.Qd[a.Wb];){var d=a.Qd[a.Wb];delete a.Qd[a.Wb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;gc(function(){f.nc(d[e])})}if(a.Wb===a.te){a.Jb&&(clearTimeout(a.Jb),a.Jb(),a.Jb=null);break}a.Wb++}};function nh(a,b,c,d){this.ue=a;this.f=pd(a);this.rb=this.sb=0;this.Xa=uc(b);this.Xf=c;this.Kc=!1;this.Fb=d;this.ld=function(a){return fd(b,hd,a)}}var oh,ph;
nh.prototype.open=function(a,b){this.mf=0;this.na=b;this.Ef=new kh(a);this.Db=!1;var c=this;this.ub=setTimeout(function(){c.f("Timed out trying to connect.");c.bb();c.ub=null},Math.floor(3E4));ud(function(){if(!c.Db){c.Wa=new qh(function(a,b,d,k,m){rh(c,arguments);if(c.Wa)if(c.ub&&(clearTimeout(c.ub),c.ub=null),c.Kc=!0,"start"==a)c.id=b,c.Mf=d;else if("close"===a)b?(c.Wa.$d=!1,lh(c.Ef,b,function(){c.bb()})):c.bb();else throw Error("Unrecognized command received: "+a);},function(a,b){rh(c,arguments);
mh(c.Ef,a,b)},function(){c.bb()},c.ld);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Wa.ke&&(a.cb=c.Wa.ke);a.v="5";c.Xf&&(a.s=c.Xf);c.Fb&&(a.ls=c.Fb);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");a=c.ld(a);c.f("Connecting via long-poll to "+a);sh(c.Wa,a,function(){})}})};
nh.prototype.start=function(){var a=this.Wa,b=this.Mf;a.Fg=this.id;a.Gg=b;for(a.oe=!0;th(a););a=this.id;b=this.Mf;this.kc=document.createElement("iframe");var c={dframe:"t"};c.id=a;c.pw=b;this.kc.src=this.ld(c);this.kc.style.display="none";document.body.appendChild(this.kc)};
nh.isAvailable=function(){return oh||!ph&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.jh)&&!0};h=nh.prototype;h.Hd=function(){};h.fd=function(){this.Db=!0;this.Wa&&(this.Wa.close(),this.Wa=null);this.kc&&(document.body.removeChild(this.kc),this.kc=null);this.ub&&(clearTimeout(this.ub),this.ub=null)};
h.bb=function(){this.Db||(this.f("Longpoll is closing itself"),this.fd(),this.na&&(this.na(this.Kc),this.na=null))};h.close=function(){this.Db||(this.f("Longpoll is being closed."),this.fd())};h.send=function(a){a=G(a);this.sb+=a.length;rc(this.Xa,"bytes_sent",a.length);a=Ob(a);a=nb(a,!0);a=yd(a,1840);for(var b=0;b<a.length;b++){var c=this.Wa;c.cd.push({Xg:this.mf,gh:a.length,of:a[b]});c.oe&&th(c);this.mf++}};function rh(a,b){var c=G(b).length;a.rb+=c;rc(a.Xa,"bytes_received",c)}
function qh(a,b,c,d){this.ld=d;this.lb=c;this.Te=new ug;this.cd=[];this.we=Math.floor(1E8*Math.random());this.$d=!0;this.ke=id();window["pLPCommand"+this.ke]=a;window["pRTLPCB"+this.ke]=b;a=document.createElement("iframe");a.style.display="none";if(document.body){document.body.appendChild(a);try{a.contentWindow.document||fc("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
a.contentDocument?a.jb=a.contentDocument:a.contentWindow?a.jb=a.contentWindow.document:a.document&&(a.jb=a.document);this.Ga=a;a="";this.Ga.src&&"javascript:"===this.Ga.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";\x3c/script>');a="<html><body>"+a+"</body></html>";try{this.Ga.jb.open(),this.Ga.jb.write(a),this.Ga.jb.close()}catch(f){fc("frame writing exception"),f.stack&&fc(f.stack),fc(f)}}
qh.prototype.close=function(){this.oe=!1;if(this.Ga){this.Ga.jb.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ga&&(document.body.removeChild(a.Ga),a.Ga=null)},Math.floor(0))}var b=this.lb;b&&(this.lb=null,b())};
function th(a){if(a.oe&&a.$d&&a.Te.count()<(0<a.cd.length?2:1)){a.we++;var b={};b.id=a.Fg;b.pw=a.Gg;b.ser=a.we;for(var b=a.ld(b),c="",d=0;0<a.cd.length;)if(1870>=a.cd[0].of.length+30+c.length){var e=a.cd.shift(),c=c+"&seg"+d+"="+e.Xg+"&ts"+d+"="+e.gh+"&d"+d+"="+e.of;d++}else break;uh(a,b+c,a.we);return!0}return!1}function uh(a,b,c){function d(){a.Te.remove(c);th(a)}a.Te.add(c,1);var e=setTimeout(d,Math.floor(25E3));sh(a,b,function(){clearTimeout(e);d()})}
function sh(a,b,c){setTimeout(function(){try{if(a.$d){var d=a.Ga.jb.createElement("script");d.type="text/javascript";d.async=!0;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())};d.onerror=function(){fc("Long-poll script failed to load: "+b);a.$d=!1;a.close()};a.Ga.jb.body.appendChild(d)}}catch(e){}},Math.floor(1))};var vh=null;"undefined"!==typeof MozWebSocket?vh=MozWebSocket:"undefined"!==typeof WebSocket&&(vh=WebSocket);function wh(a,b,c,d){this.ue=a;this.f=pd(this.ue);this.frames=this.Nc=null;this.rb=this.sb=this.ff=0;this.Xa=uc(b);a={v:"5"};"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");c&&(a.s=c);d&&(a.ls=d);this.jf=fd(b,gd,a)}var xh;
wh.prototype.open=function(a,b){this.lb=b;this.Kg=a;this.f("Websocket connecting to "+this.jf);this.Kc=!1;bd.set("previous_websocket_failure",!0);try{this.La=new vh(this.jf)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;d&&this.f(d);this.bb();return}var e=this;this.La.onopen=function(){e.f("Websocket connected.");e.Kc=!0};this.La.onclose=function(){e.f("Websocket connection was disconnected.");e.La=null;e.bb()};this.La.onmessage=function(a){if(null!==e.La)if(a=a.data,e.rb+=
a.length,rc(e.Xa,"bytes_received",a.length),yh(e),null!==e.frames)zh(e,a);else{a:{O(null===e.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){e.ff=b;e.frames=[];a=null;break a}}e.ff=1;e.frames=[]}null!==a&&zh(e,a)}};this.La.onerror=function(a){e.f("WebSocket error.  Closing connection.");(a=a.message||a.data)&&e.f(a);e.bb()}};wh.prototype.start=function(){};
wh.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==vh&&!xh};wh.responsesRequiredToBeHealthy=2;wh.healthyTimeout=3E4;h=wh.prototype;h.Hd=function(){bd.remove("previous_websocket_failure")};function zh(a,b){a.frames.push(b);if(a.frames.length==a.ff){var c=a.frames.join("");a.frames=null;c=Rb(c);a.Kg(c)}}
h.send=function(a){yh(this);a=G(a);this.sb+=a.length;rc(this.Xa,"bytes_sent",a.length);a=yd(a,16384);1<a.length&&Ah(this,String(a.length));for(var b=0;b<a.length;b++)Ah(this,a[b])};h.fd=function(){this.Db=!0;this.Nc&&(clearInterval(this.Nc),this.Nc=null);this.La&&(this.La.close(),this.La=null)};h.bb=function(){this.Db||(this.f("WebSocket is closing itself"),this.fd(),this.lb&&(this.lb(this.Kc),this.lb=null))};h.close=function(){this.Db||(this.f("WebSocket is being closed"),this.fd())};
function yh(a){clearInterval(a.Nc);a.Nc=setInterval(function(){a.La&&Ah(a,"0");yh(a)},Math.floor(45E3))}function Ah(a,b){try{a.La.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(u(a.bb,a),0)}};function Bh(a){Ch(this,a)}var Dh=[nh,wh];function Ch(a,b){var c=wh&&wh.isAvailable(),d=c&&!(bd.Af||!0===bd.get("previous_websocket_failure"));b.ih&&(c||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.jd=[wh];else{var e=a.jd=[];zd(Dh,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function Eh(a){if(0<a.jd.length)return a.jd[0];throw Error("No transports available");};function Fh(a,b,c,d,e,f,g){this.id=a;this.f=pd("c:"+this.id+":");this.nc=c;this.Zc=d;this.na=e;this.Re=f;this.G=b;this.Pd=[];this.kf=0;this.Wf=new Bh(b);this.N=0;this.Fb=g;this.f("Connection created");Gh(this)}
function Gh(a){var b=Eh(a.Wf);a.K=new b("c:"+a.id+":"+a.kf++,a.G,void 0,a.Fb);a.Ve=b.responsesRequiredToBeHealthy||0;var c=Hh(a,a.K),d=Ih(a,a.K);a.kd=a.K;a.ed=a.K;a.F=null;a.Eb=!1;setTimeout(function(){a.K&&a.K.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.Bd=setTimeout(function(){a.Bd=null;a.Eb||(a.K&&102400<a.K.rb?(a.f("Connection exceeded healthy timeout but has received "+a.K.rb+" bytes.  Marking connection healthy."),a.Eb=!0,a.K.Hd()):a.K&&10240<a.K.sb?a.f("Connection exceeded healthy timeout but has sent "+
a.K.sb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function Ih(a,b){return function(c){b===a.K?(a.K=null,c||0!==a.N?1===a.N&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.G.ab.substr(0,2)&&(bd.remove("host:"+a.G.host),a.G.ab=a.G.host)),a.close()):b===a.F?(a.f("Secondary connection lost."),c=a.F,a.F=null,a.kd!==c&&a.ed!==c||a.close()):a.f("closing an old connection")}}
function Hh(a,b){return function(c){if(2!=a.N)if(b===a.ed){var d=wd("t",c);c=wd("d",c);if("c"==d){if(d=wd("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.Uf=c.s;ed(a.G,f);0==a.N&&(a.K.start(),Jh(a,a.K,d),"5"!==e&&S("Protocol version mismatch detected"),c=a.Wf,(c=1<c.jd.length?c.jd[1]:null)&&Kh(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.ed=a.F;for(c=0;c<a.Pd.length;++c)a.Ld(a.Pd[c]);a.Pd=[];Lh(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.Re&&(a.Re(c),a.Re=null),a.na=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),ed(a.G,c),1===a.N?a.close():(Mh(a),Gh(a))):"e"===d?qd("Server Error: "+c):"o"===d?(a.f("got pong on primary."),Nh(a),Oh(a)):qd("Unknown control packet command: "+d)}else"d"==d&&a.Ld(c)}else if(b===a.F)if(d=wd("t",c),c=wd("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?Ph(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.F.close(),a.kd!==a.F&&a.ed!==a.F||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.Tf--,Ph(a)));else if("d"==d)a.Pd.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}Fh.prototype.Ia=function(a){Qh(this,{t:"d",d:a})};function Lh(a){a.kd===a.F&&a.ed===a.F&&(a.f("cleaning up and promoting a connection: "+a.F.ue),a.K=a.F,a.F=null)}
function Ph(a){0>=a.Tf?(a.f("Secondary connection is healthy."),a.Eb=!0,a.F.Hd(),a.F.start(),a.f("sending client ack on secondary"),a.F.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.K.send({t:"c",d:{t:"n",d:{}}}),a.kd=a.F,Lh(a)):(a.f("sending ping on secondary."),a.F.send({t:"c",d:{t:"p",d:{}}}))}Fh.prototype.Ld=function(a){Nh(this);this.nc(a)};function Nh(a){a.Eb||(a.Ve--,0>=a.Ve&&(a.f("Primary connection is healthy."),a.Eb=!0,a.K.Hd()))}
function Kh(a,b){a.F=new b("c:"+a.id+":"+a.kf++,a.G,a.Uf);a.Tf=b.responsesRequiredToBeHealthy||0;a.F.open(Hh(a,a.F),Ih(a,a.F));setTimeout(function(){a.F&&(a.f("Timed out trying to upgrade."),a.F.close())},Math.floor(6E4))}function Jh(a,b,c){a.f("Realtime connection established.");a.K=b;a.N=1;a.Zc&&(a.Zc(c,a.Uf),a.Zc=null);0===a.Ve?(a.f("Primary connection is healthy."),a.Eb=!0):setTimeout(function(){Oh(a)},Math.floor(5E3))}
function Oh(a){a.Eb||1!==a.N||(a.f("sending ping on primary."),Qh(a,{t:"c",d:{t:"p",d:{}}}))}function Qh(a,b){if(1!==a.N)throw"Connection is not connected";a.kd.send(b)}Fh.prototype.close=function(){2!==this.N&&(this.f("Closing realtime connection."),this.N=2,Mh(this),this.na&&(this.na(),this.na=null))};function Mh(a){a.f("Shutting down all connections");a.K&&(a.K.close(),a.K=null);a.F&&(a.F.close(),a.F=null);a.Bd&&(clearTimeout(a.Bd),a.Bd=null)};function Rh(a,b,c,d){this.id=Sh++;this.f=pd("p:"+this.id+":");this.Bf=this.Ie=!1;this.ba={};this.sa=[];this.ad=0;this.Yc=[];this.qa=!1;this.eb=1E3;this.Id=3E5;this.Kb=b;this.Xc=c;this.Se=d;this.G=a;this.wb=this.Ca=this.Ma=this.Fb=this.$e=null;this.Sb=!1;this.Wd={};this.Wg=0;this.rf=!0;this.Oc=this.Ke=null;Th(this,0);kf.yb().Ib("visible",this.Ng,this);-1===a.host.indexOf("fblocal")&&jf.yb().Ib("online",this.Lg,this)}var Sh=0,Uh=0;h=Rh.prototype;
h.Ia=function(a,b,c){var d=++this.Wg;a={r:d,a:a,b:b};this.f(G(a));O(this.qa,"sendRequest call when we're not connected not allowed.");this.Ma.Ia(a);c&&(this.Wd[d]=c)};h.Cf=function(a,b,c,d){var e=a.wa(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.ba[f]=this.ba[f]||{};O(Ie(a.n)||!He(a.n),"listen() called for non-default but complete query");O(!this.ba[f][e],"listen() called twice for same path/queryId.");a={I:d,Ad:b,Tg:a,tag:c};this.ba[f][e]=a;this.qa&&Vh(this,a)};
function Vh(a,b){var c=b.Tg,d=c.path.toString(),e=c.wa();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Ge(c.n),f.t=b.tag);f.h=b.Ad();a.Ia("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"===typeof k&&y(k,"w")){var l=z(k,"w");da(l)&&0<=La(l,"no_index")&&S("Using an unspecified index. Consider adding "+('".indexOn": "'+c.n.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.ba[d]&&a.ba[d][e])===b&&(a.f("listen response",f),"ok"!==m&&Wh(a,d,e),b.I&&
b.I(m,k))})}h.O=function(a,b,c){this.Ca={rg:a,sf:!1,Dc:b,od:c};this.f("Authenticating using credential: "+a);Xh(this);(b=40==a.length)||(a=Cd(a).Ec,b="object"===typeof a&&!0===z(a,"admin"));b&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Id=3E4)};h.je=function(a){this.Ca=null;this.qa&&this.Ia("unauth",{},function(b){a(b.s,b.d)})};
function Xh(a){var b=a.Ca;a.qa&&b&&a.Ia("auth",{cred:b.rg},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.Ca===b&&(a.Ca=null);b.sf?"ok"!==d&&b.od&&b.od(d,c):(b.sf=!0,b.Dc&&b.Dc(d,c))})}h.$f=function(a,b){var c=a.path.toString(),d=a.wa();this.f("Unlisten called for "+c+" "+d);O(Ie(a.n)||!He(a.n),"unlisten() called for non-default but complete query");if(Wh(this,c,d)&&this.qa){var e=Ge(a.n);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.Ia("n",c)}};
h.Qe=function(a,b,c){this.qa?Yh(this,"o",a,b,c):this.Yc.push({bd:a,action:"o",data:b,I:c})};h.Gf=function(a,b,c){this.qa?Yh(this,"om",a,b,c):this.Yc.push({bd:a,action:"om",data:b,I:c})};h.Md=function(a,b){this.qa?Yh(this,"oc",a,null,b):this.Yc.push({bd:a,action:"oc",data:null,I:b})};function Yh(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.Ia(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){Zh(this,"p",a,b,c,d)};
h.Df=function(a,b,c,d){Zh(this,"m",a,b,c,d)};function Zh(a,b,c,d,e,f){d={p:c,d:d};p(f)&&(d.h=f);a.sa.push({action:b,Pf:d,I:e});a.ad++;b=a.sa.length-1;a.qa?$h(a,b):a.f("Buffering put: "+c)}function $h(a,b){var c=a.sa[b].action,d=a.sa[b].Pf,e=a.sa[b].I;a.sa[b].Ug=a.qa;a.Ia(c,d,function(d){a.f(c+" response",d);delete a.sa[b];a.ad--;0===a.ad&&(a.sa=[]);e&&e(d.s,d.d)})}
h.Ye=function(a){this.qa&&(a={c:a},this.f("reportStats",a),this.Ia("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};
h.Ld=function(a){if("r"in a){this.f("from server: "+G(a));var b=a.r,c=this.Wd[b];c&&(delete this.Wd[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.f("handleServerMessage",b,c),"d"===b?this.Kb(c.p,c.d,!1,c.t):"m"===b?this.Kb(c.p,c.d,!0,c.t):"c"===b?ai(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Ca,this.Ca=null,c&&c.od&&c.od(a,b)):"sd"===b?this.$e?this.$e(c):"msg"in c&&"undefined"!==typeof console&&console.log("FIREBASE: "+c.msg.replace("\n",
"\nFIREBASE: ")):qd("Unrecognized action received from server: "+G(b)+"\nAre you using the latest client?"))}};h.Zc=function(a,b){this.f("connection ready");this.qa=!0;this.Oc=(new Date).getTime();this.Se({serverTimeOffset:a-(new Date).getTime()});this.Fb=b;if(this.rf){var c={};c["sdk.js."+Eb.replace(/\./g,"-")]=1;Dg()?c["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1);this.Ye(c)}bi(this);this.rf=!1;this.Xc(!0)};
function Th(a,b){O(!a.Ma,"Scheduling a connect when we're already connected/ing?");a.wb&&clearTimeout(a.wb);a.wb=setTimeout(function(){a.wb=null;ci(a)},Math.floor(b))}h.Ng=function(a){a&&!this.Sb&&this.eb===this.Id&&(this.f("Window became visible.  Reducing delay."),this.eb=1E3,this.Ma||Th(this,0));this.Sb=a};h.Lg=function(a){a?(this.f("Browser went online."),this.eb=1E3,this.Ma||Th(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ma&&this.Ma.close())};
h.If=function(){this.f("data client disconnected");this.qa=!1;this.Ma=null;for(var a=0;a<this.sa.length;a++){var b=this.sa[a];b&&"h"in b.Pf&&b.Ug&&(b.I&&b.I("disconnect"),delete this.sa[a],this.ad--)}0===this.ad&&(this.sa=[]);this.Wd={};di(this)&&(this.Sb?this.Oc&&(3E4<(new Date).getTime()-this.Oc&&(this.eb=1E3),this.Oc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.eb=this.Id,this.Ke=(new Date).getTime()),a=Math.max(0,this.eb-((new Date).getTime()-this.Ke)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Th(this,a),this.eb=Math.min(this.Id,1.3*this.eb));this.Xc(!1)};function ci(a){if(di(a)){a.f("Making a connection attempt");a.Ke=(new Date).getTime();a.Oc=null;var b=u(a.Ld,a),c=u(a.Zc,a),d=u(a.If,a),e=a.id+":"+Uh++;a.Ma=new Fh(e,a.G,b,c,d,function(b){S(b+" ("+a.G.toString()+")");a.Bf=!0},a.Fb)}}h.Cb=function(){this.Ie=!0;this.Ma?this.Ma.close():(this.wb&&(clearTimeout(this.wb),this.wb=null),this.qa&&this.If())};h.vc=function(){this.Ie=!1;this.eb=1E3;this.Ma||Th(this,0)};
function ai(a,b,c){c=c?Oa(c,function(a){return xd(a)}).join("$"):"default";(a=Wh(a,b,c))&&a.I&&a.I("permission_denied")}function Wh(a,b,c){b=(new P(b)).toString();var d;p(a.ba[b])?(d=a.ba[b][c],delete a.ba[b][c],0===oa(a.ba[b])&&delete a.ba[b]):d=void 0;return d}function bi(a){Xh(a);v(a.ba,function(b){v(b,function(b){Vh(a,b)})});for(var b=0;b<a.sa.length;b++)a.sa[b]&&$h(a,b);for(;a.Yc.length;)b=a.Yc.shift(),Yh(a,b.action,b.bd,b.data,b.I)}function di(a){var b;b=jf.yb().oc;return!a.Bf&&!a.Ie&&b};var U={zg:function(){oh=xh=!0}};U.forceLongPolling=U.zg;U.Ag=function(){ph=!0};U.forceWebSockets=U.Ag;U.$g=function(a,b){a.k.Va.$e=b};U.setSecurityDebugCallback=U.$g;U.bf=function(a,b){a.k.bf(b)};U.stats=U.bf;U.cf=function(a,b){a.k.cf(b)};U.statsIncrementCounter=U.cf;U.ud=function(a){return a.k.ud};U.dataUpdateCount=U.ud;U.Dg=function(a,b){a.k.He=b};U.interceptServerData=U.Dg;U.Jg=function(a){new Og(a)};U.onPopupOpen=U.Jg;U.Yg=function(a){xg=a};U.setAuthenticationServer=U.Yg;function ei(a,b){this.committed=a;this.snapshot=b};function V(a,b){this.dd=a;this.ta=b}V.prototype.cancel=function(a){D("Firebase.onDisconnect().cancel",0,1,arguments.length);F("Firebase.onDisconnect().cancel",1,a,!0);var b=new B;this.dd.Md(this.ta,C(b,a));return b.D};V.prototype.cancel=V.prototype.cancel;V.prototype.remove=function(a){D("Firebase.onDisconnect().remove",0,1,arguments.length);og("Firebase.onDisconnect().remove",this.ta);F("Firebase.onDisconnect().remove",1,a,!0);var b=new B;fi(this.dd,this.ta,null,C(b,a));return b.D};
V.prototype.remove=V.prototype.remove;V.prototype.set=function(a,b){D("Firebase.onDisconnect().set",1,2,arguments.length);og("Firebase.onDisconnect().set",this.ta);gg("Firebase.onDisconnect().set",a,this.ta,!1);F("Firebase.onDisconnect().set",2,b,!0);var c=new B;fi(this.dd,this.ta,a,C(c,b));return c.D};V.prototype.set=V.prototype.set;
V.prototype.Ob=function(a,b,c){D("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);og("Firebase.onDisconnect().setWithPriority",this.ta);gg("Firebase.onDisconnect().setWithPriority",a,this.ta,!1);kg("Firebase.onDisconnect().setWithPriority",2,b);F("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new B;gi(this.dd,this.ta,a,b,C(d,c));return d.D};V.prototype.setWithPriority=V.prototype.Ob;
V.prototype.update=function(a,b){D("Firebase.onDisconnect().update",1,2,arguments.length);og("Firebase.onDisconnect().update",this.ta);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;S("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jg("Firebase.onDisconnect().update",a,this.ta);F("Firebase.onDisconnect().update",2,b,!0);
c=new B;hi(this.dd,this.ta,a,C(c,b));return c.D};V.prototype.update=V.prototype.update;function W(a,b,c){this.A=a;this.Y=b;this.g=c}W.prototype.J=function(){D("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.J()};W.prototype.val=W.prototype.J;W.prototype.qf=function(){D("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.J(!0)};W.prototype.exportVal=W.prototype.qf;W.prototype.xg=function(){D("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};W.prototype.exists=W.prototype.xg;
W.prototype.o=function(a){D("Firebase.DataSnapshot.child",0,1,arguments.length);fa(a)&&(a=String(a));ng("Firebase.DataSnapshot.child",a);var b=new P(a),c=this.Y.o(b);return new W(this.A.S(b),c,R)};W.prototype.child=W.prototype.o;W.prototype.Fa=function(a){D("Firebase.DataSnapshot.hasChild",1,1,arguments.length);ng("Firebase.DataSnapshot.hasChild",a);var b=new P(a);return!this.A.S(b).e()};W.prototype.hasChild=W.prototype.Fa;
W.prototype.C=function(){D("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().J()};W.prototype.getPriority=W.prototype.C;W.prototype.forEach=function(a){D("Firebase.DataSnapshot.forEach",1,1,arguments.length);F("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.L())return!1;var b=this;return!!this.A.R(this.g,function(c,d){return a(new W(d,b.Y.o(c),R))})};W.prototype.forEach=W.prototype.forEach;
W.prototype.zd=function(){D("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.L()?!1:!this.A.e()};W.prototype.hasChildren=W.prototype.zd;W.prototype.name=function(){S("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead.");D("Firebase.DataSnapshot.name",0,0,arguments.length);return this.key()};W.prototype.name=W.prototype.name;W.prototype.key=function(){D("Firebase.DataSnapshot.key",0,0,arguments.length);return this.Y.key()};
W.prototype.key=W.prototype.key;W.prototype.Hb=function(){D("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Hb()};W.prototype.numChildren=W.prototype.Hb;W.prototype.Mb=function(){D("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.Y};W.prototype.ref=W.prototype.Mb;function ii(a,b,c){this.Vb=a;this.tb=b;this.vb=c||null}h=ii.prototype;h.Qf=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.n.g;return new jc("value",this,new W(a.Na,b.Mb(),c))};h.Zb=function(a){var b=this.vb;if("cancel"===a.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var c=this.tb;return function(){c.call(b,a.error)}}var d=this.Vb;return function(){d.call(b,a.be)}};h.lf=function(a,b){return this.tb?new kc(this,a,b):null};
h.matches=function(a){return a instanceof ii?a.Vb&&this.Vb?a.Vb===this.Vb&&a.vb===this.vb:!0:!1};h.yf=function(){return null!==this.Vb};function ji(a,b,c){this.ja=a;this.tb=b;this.vb=c}h=ji.prototype;h.Qf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ja};h.lf=function(a,b){return this.tb?new kc(this,a,b):null};
h.createEvent=function(a,b){O(null!=a.Za,"Child events should have a childName.");var c=b.Mb().o(a.Za);return new jc(a.type,this,new W(a.Na,c,b.n.g),a.Td)};h.Zb=function(a){var b=this.vb;if("cancel"===a.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var c=this.tb;return function(){c.call(b,a.error)}}var d=this.ja[a.wd];return function(){d.call(b,a.be,a.Td)}};
h.matches=function(a){if(a instanceof ji){if(!this.ja||!a.ja)return!0;if(this.vb===a.vb){var b=oa(a.ja);if(b===oa(this.ja)){if(1===b){var b=pa(a.ja),c=pa(this.ja);return c===b&&(!a.ja[b]||!this.ja[c]||a.ja[b]===this.ja[c])}return na(this.ja,function(b,c){return a.ja[c]===b})}}}return!1};h.yf=function(){return null!==this.ja};function ki(){this.za={}}h=ki.prototype;h.e=function(){return va(this.za)};h.gb=function(a,b,c){var d=a.source.Lb;if(null!==d)return d=z(this.za,d),O(null!=d,"SyncTree gave us an op for an invalid query."),d.gb(a,b,c);var e=[];v(this.za,function(d){e=e.concat(d.gb(a,b,c))});return e};h.Tb=function(a,b,c,d,e){var f=a.wa(),g=z(this.za,f);if(!g){var g=c.Aa(e?d:null),k=!1;g?k=!0:(g=d instanceof fe?c.Cc(d):H,k=!1);g=new Ye(a,new je(new Xb(g,k,!1),new Xb(d,e,!1)));this.za[f]=g}g.Tb(b);return af(g,b)};
h.nb=function(a,b,c){var d=a.wa(),e=[],f=[],g=null!=li(this);if("default"===d){var k=this;v(this.za,function(a,d){f=f.concat(a.nb(b,c));a.e()&&(delete k.za[d],He(a.Y.n)||e.push(a.Y))})}else{var m=z(this.za,d);m&&(f=f.concat(m.nb(b,c)),m.e()&&(delete this.za[d],He(m.Y.n)||e.push(m.Y)))}g&&null==li(this)&&e.push(new X(a.k,a.path));return{Vg:e,vg:f}};function mi(a){return Na(qa(a.za),function(a){return!He(a.Y.n)})}h.kb=function(a){var b=null;v(this.za,function(c){b=b||c.kb(a)});return b};
function ni(a,b){if(He(b.n))return li(a);var c=b.wa();return z(a.za,c)}function li(a){return ua(a.za,function(a){return He(a.Y.n)})||null};function oi(a){this.va=qe;this.mb=new Pf;this.df={};this.qc={};this.Qc=a}function pi(a,b,c,d,e){var f=a.mb,g=e;O(d>f.Pc,"Stacking an older write on top of newer ones");p(g)||(g=!0);f.pa.push({path:b,Ja:c,md:d,visible:g});g&&(f.V=Jf(f.V,b,c));f.Pc=d;return e?qi(a,new Ac(Ef,b,c)):[]}function ri(a,b,c,d){var e=a.mb;O(d>e.Pc,"Stacking an older merge on top of newer ones");e.pa.push({path:b,children:c,md:d,visible:!0});e.V=Kf(e.V,b,c);e.Pc=d;c=sf(c);return qi(a,new bf(Ef,b,c))}
function si(a,b,c){c=c||!1;var d=Qf(a.mb,b);if(a.mb.Ud(b)){var e=qe;null!=d.Ja?e=e.set(M,!0):Fb(d.children,function(a,b){e=e.set(new P(a),b)});return qi(a,new Df(d.path,e,c))}return[]}function ti(a,b,c){c=sf(c);return qi(a,new bf(Gf,b,c))}function ui(a,b,c,d){d=vi(a,d);if(null!=d){var e=wi(d);d=e.path;e=e.Lb;b=lf(d,b);c=new Ac(new Ff(!1,!0,e,!0),b,c);return xi(a,d,c)}return[]}
function yi(a,b,c,d){if(d=vi(a,d)){var e=wi(d);d=e.path;e=e.Lb;b=lf(d,b);c=sf(c);c=new bf(new Ff(!1,!0,e,!0),b,c);return xi(a,d,c)}return[]}
oi.prototype.Tb=function(a,b){var c=a.path,d=null,e=!1;zf(this.va,c,function(a,b){var f=lf(a,c);d=d||b.kb(f);e=e||null!=li(b)});var f=this.va.get(c);f?(e=e||null!=li(f),d=d||f.kb(M)):(f=new ki,this.va=this.va.set(c,f));var g;null!=d?g=!0:(g=!1,d=H,Cf(this.va.subtree(c),function(a,b){var c=b.kb(M);c&&(d=d.W(a,c))}));var k=null!=ni(f,a);if(!k&&!He(a.n)){var m=zi(a);O(!(m in this.qc),"View does not exist, but we have a tag");var l=Ai++;this.qc[m]=l;this.df["_"+l]=m}g=f.Tb(a,b,new Uf(c,this.mb),d,g);
k||e||(f=ni(f,a),g=g.concat(Bi(this,a,f)));return g};
oi.prototype.nb=function(a,b,c){var d=a.path,e=this.va.get(d),f=[];if(e&&("default"===a.wa()||null!=ni(e,a))){f=e.nb(a,b,c);e.e()&&(this.va=this.va.remove(d));e=f.Vg;f=f.vg;b=-1!==Sa(e,function(a){return He(a.n)});var g=xf(this.va,d,function(a,b){return null!=li(b)});if(b&&!g&&(d=this.va.subtree(d),!d.e()))for(var d=Ci(d),k=0;k<d.length;++k){var m=d[k],l=m.Y,m=Di(this,m);this.Qc.af(Ei(l),Fi(this,l),m.Ad,m.I)}if(!g&&0<e.length&&!c)if(b)this.Qc.de(Ei(a),null);else{var t=this;Ma(e,function(a){a.wa();
var b=t.qc[zi(a)];t.Qc.de(Ei(a),b)})}Gi(this,e)}return f};oi.prototype.Aa=function(a,b){var c=this.mb,d=xf(this.va,a,function(b,c){var d=lf(b,a);if(d=c.kb(d))return d});return c.Aa(a,d,b,!0)};function Ci(a){return vf(a,function(a,c,d){if(c&&null!=li(c))return[li(c)];var e=[];c&&(e=mi(c));v(d,function(a){e=e.concat(a)});return e})}function Gi(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!He(d.n)){var d=zi(d),e=a.qc[d];delete a.qc[d];delete a.df["_"+e]}}}
function Ei(a){return He(a.n)&&!Ie(a.n)?a.Mb():a}function Bi(a,b,c){var d=b.path,e=Fi(a,b);c=Di(a,c);b=a.Qc.af(Ei(b),e,c.Ad,c.I);d=a.va.subtree(d);if(e)O(null==li(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=vf(d,function(a,b,c){if(!a.e()&&b&&null!=li(b))return[Ze(li(b))];var d=[];b&&(d=d.concat(Oa(mi(b),function(a){return a.Y})));v(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Qc.de(Ei(c),Fi(a,c));return b}
function Di(a,b){var c=b.Y,d=Fi(a,c);return{Ad:function(){return(b.w()||H).hash()},I:function(b){if("ok"===b){if(d){var f=c.path;if(b=vi(a,d)){var g=wi(b);b=g.path;g=g.Lb;f=lf(b,f);f=new Cc(new Ff(!1,!0,g,!0),f);b=xi(a,b,f)}else b=[]}else b=qi(a,new Cc(Gf,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+" at "+c.path.toString()+": "+f);f.code=b.toUpperCase();return a.nb(c,null,f)}}}function zi(a){return a.path.toString()+"$"+a.wa()}function wi(a){var b=a.indexOf("$");O(-1!==b&&b<a.length-1,"Bad queryKey.");return{Lb:a.substr(b+1),path:new P(a.substr(0,b))}}function vi(a,b){var c=a.df,d="_"+b;return d in c?c[d]:void 0}function Fi(a,b){var c=zi(b);return z(a.qc,c)}var Ai=1;
function xi(a,b,c){var d=a.va.get(b);O(d,"Missing sync point for query tag that we're tracking");return d.gb(c,new Uf(b,a.mb),null)}function qi(a,b){return Hi(a,b,a.va,null,new Uf(M,a.mb))}function Hi(a,b,c,d,e){if(b.path.e())return Ii(a,b,c,d,e);var f=c.get(M);null==d&&null!=f&&(d=f.kb(M));var g=[],k=K(b.path),m=b.$c(k);if((c=c.children.get(k))&&m)var l=d?d.T(k):null,k=e.o(k),g=g.concat(Hi(a,m,c,l,k));f&&(g=g.concat(f.gb(b,e,d)));return g}
function Ii(a,b,c,d,e){var f=c.get(M);null==d&&null!=f&&(d=f.kb(M));var g=[];c.children.ka(function(c,f){var l=d?d.T(c):null,t=e.o(c),A=b.$c(c);A&&(g=g.concat(Ii(a,A,f,l,t)))});f&&(g=g.concat(f.gb(b,e,d)));return g};function Ji(a,b){this.G=a;this.Xa=uc(a);this.hd=null;this.fa=new Zb;this.Kd=1;this.Va=null;b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.da=new cf(this.G,u(this.Kb,this)),setTimeout(u(this.Xc,this,!0),0)):this.da=this.Va=new Rh(this.G,u(this.Kb,this),u(this.Xc,this),u(this.Se,this));this.dh=vc(a,u(function(){return new pc(this.Xa,this.da)},this));this.yc=new Wf;
this.Ge=new Sb;var c=this;this.Fd=new oi({af:function(a,b,f,g){b=[];f=c.Ge.j(a.path);f.e()||(b=qi(c.Fd,new Ac(Gf,a.path,f)),setTimeout(function(){g("ok")},0));return b},de:aa});Ki(this,"connected",!1);this.na=new Vc;this.O=new Yg(a,u(this.da.O,this.da),u(this.da.je,this.da),u(this.Pe,this));this.ud=0;this.He=null;this.M=new oi({af:function(a,b,f,g){c.da.Cf(a,f,b,function(b,e){var f=g(b,e);dc(c.fa,a.path,f)});return[]},de:function(a,b){c.da.$f(a,b)}})}h=Ji.prototype;
h.toString=function(){return(this.G.ob?"https://":"http://")+this.G.host};h.name=function(){return this.G.lc};function Li(a){a=a.Ge.j(new P(".info/serverTimeOffset")).J()||0;return(new Date).getTime()+a}function Mi(a){a=a={timestamp:Li(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.Kb=function(a,b,c,d){this.ud++;var e=new P(a);b=this.He?this.He(a,b):b;a=[];d?c?(b=ma(b,function(a){return Q(a)}),a=yi(this.M,e,b,d)):(b=Q(b),a=ui(this.M,e,b,d)):c?(d=ma(b,function(a){return Q(a)}),a=ti(this.M,e,d)):(d=Q(b),a=qi(this.M,new Ac(Gf,e,d)));d=e;0<a.length&&(d=Ni(this,e));dc(this.fa,d,a)};h.Xc=function(a){Ki(this,"connected",a);!1===a&&Oi(this)};h.Se=function(a){var b=this;zd(a,function(a,d){Ki(b,d,a)})};h.Pe=function(a){Ki(this,"authenticated",a)};
function Ki(a,b,c){b=new P("/.info/"+b);c=Q(c);var d=a.Ge;d.Zd=d.Zd.H(b,c);c=qi(a.Fd,new Ac(Gf,b,c));dc(a.fa,b,c)}h.Ob=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,mh:c});var e=Mi(this);b=Q(b,c);var e=Xc(b,e),f=this.Kd++,e=pi(this.M,a,e,f,!0);$b(this.fa,e);var g=this;this.da.put(a.toString(),b.J(!0),function(b,c){var e="ok"===b;e||S("set at "+a+" failed: "+b);e=si(g.M,f,!e);dc(g.fa,a,e);Pi(d,b,c)});e=Qi(this,a);Ni(this,e);dc(this.fa,e,[])};
h.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=Mi(this),f={};v(b,function(a,b){d=!1;var c=Q(a);f[b]=Xc(c,e)});if(d)fc("update() called with empty data.  Don't do anything."),Pi(c,"ok");else{var g=this.Kd++,k=ri(this.M,a,f,g);$b(this.fa,k);var m=this;this.da.Df(a.toString(),b,function(b,d){var e="ok"===b;e||S("update at "+a+" failed: "+b);var e=si(m.M,g,!e),f=a;0<e.length&&(f=Ni(m,a));dc(m.fa,f,e);Pi(c,b,d)});b=Qi(this,a);Ni(this,b);dc(this.fa,a,[])}};
function Oi(a){a.f("onDisconnectEvents");var b=Mi(a),c=[];Wc(Uc(a.na,b),M,function(b,e){c=c.concat(qi(a.M,new Ac(Gf,b,e)));var f=Qi(a,b);Ni(a,f)});a.na=new Vc;dc(a.fa,M,c)}h.Md=function(a,b){var c=this;this.da.Md(a.toString(),function(d,e){"ok"===d&&wg(c.na,a);Pi(b,d,e)})};function fi(a,b,c,d){var e=Q(c);a.da.Qe(b.toString(),e.J(!0),function(c,g){"ok"===c&&a.na.rc(b,e);Pi(d,c,g)})}function gi(a,b,c,d,e){var f=Q(c,d);a.da.Qe(b.toString(),f.J(!0),function(c,d){"ok"===c&&a.na.rc(b,f);Pi(e,c,d)})}
function hi(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(fc("onDisconnect().update() called with empty data.  Don't do anything."),Pi(d,"ok")):a.da.Gf(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=Q(c[m]);a.na.rc(b.o(m),l)}Pi(d,e,f)})}function Ri(a,b,c){c=".info"===K(b.path)?a.Fd.Tb(b,c):a.M.Tb(b,c);bc(a.fa,b.path,c)}h.Cb=function(){this.Va&&this.Va.Cb()};h.vc=function(){this.Va&&this.Va.vc()};
h.bf=function(a){if("undefined"!==typeof console){a?(this.hd||(this.hd=new oc(this.Xa)),a=this.hd.get()):a=this.Xa.get();var b=Pa(ra(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.cf=function(a){rc(this.Xa,a);this.dh.Vf[a]=!0};h.f=function(a){var b="";this.Va&&(b=this.Va.id+":");fc(b,arguments)};
function Pi(a,b,c){a&&gc(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Si(a,b,c,d,e){function f(){}a.f("transaction on "+b);var g=new X(a,b);g.Ib("value",f);c={path:b,update:c,I:d,status:null,Lf:id(),gf:e,Sf:0,le:function(){g.mc("value",f)},ne:null,Da:null,rd:null,sd:null,td:null};d=a.M.Aa(b,void 0)||H;c.rd=d;d=c.update(d.J());if(p(d)){hg("transaction failed: Data returned ",d,c.path);c.status=1;e=Xf(a.yc,b);var k=e.Ea()||[];k.push(c);Yf(e,k);"object"===typeof d&&null!==d&&y(d,".priority")?(k=z(d,".priority"),O(fg(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.M.Aa(b)||H).C().J();e=Mi(a);d=Q(d,k);e=Xc(d,e);c.sd=d;c.td=e;c.Da=a.Kd++;c=pi(a.M,b,e,c.Da,c.gf);dc(a.fa,b,c);Ti(a)}else c.le(),c.sd=null,c.td=null,c.I&&(a=new W(c.rd,new X(a,c.path),R),c.I(null,!1,a))}function Ti(a,b){var c=b||a.yc;b||Ui(a,c);if(null!==c.Ea()){var d=Vi(a,c);O(0<d.length,"Sending zero length transaction queue");Qa(d,function(a){return 1===a.status})&&Wi(a,c.path(),d)}else c.zd()&&c.R(function(b){Ti(a,b)})}
function Wi(a,b,c){for(var d=Oa(c,function(a){return a.Da}),e=a.M.Aa(b,d)||H,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];O(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.Sf++;var k=lf(b,g.path),d=d.H(k,g.sd)}d=d.J(!0);a.da.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(si(a.M,c[f].Da));if(c[f].I){var g=c[f].td,k=new X(a,c[f].path);d.push(u(c[f].I,
null,null,!0,new W(g,k,R)))}c[f].le()}Ui(a,Xf(a.yc,b));Ti(a);dc(a.fa,b,e);for(f=0;f<d.length;f++)gc(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(S("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].ne=d;Ni(a,b)}},e)}function Ni(a,b){var c=Xi(a,b),d=c.path(),c=Vi(a,c);Yi(a,c,d);return d}
function Yi(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Oa(b,function(a){return a.Da}),g=0;g<b.length;g++){var k=b[g],m=lf(c,k.path),l=!1,t;O(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)l=!0,t=k.ne,e=e.concat(si(a.M,k.Da,!0));else if(1===k.status)if(25<=k.Sf)l=!0,t="maxretry",e=e.concat(si(a.M,k.Da,!0));else{var A=a.M.Aa(k.path,f)||H;k.rd=A;var I=b[g].update(A.J());p(I)?(hg("transaction failed: Data returned ",I,k.path),m=Q(I),"object"===typeof I&&null!=
I&&y(I,".priority")||(m=m.ia(A.C())),A=k.Da,I=Mi(a),I=Xc(m,I),k.sd=m,k.td=I,k.Da=a.Kd++,Ta(f,A),e=e.concat(pi(a.M,k.path,I,k.Da,k.gf)),e=e.concat(si(a.M,A,!0))):(l=!0,t="nodata",e=e.concat(si(a.M,k.Da,!0)))}dc(a.fa,c,e);e=[];l&&(b[g].status=3,setTimeout(b[g].le,Math.floor(0)),b[g].I&&("nodata"===t?(k=new X(a,b[g].path),d.push(u(b[g].I,null,null,!1,new W(b[g].rd,k,R)))):d.push(u(b[g].I,null,Error(t),!1,null))))}Ui(a,a.yc);for(g=0;g<d.length;g++)gc(d[g]);Ti(a)}}
function Xi(a,b){for(var c,d=a.yc;null!==(c=K(b))&&null===d.Ea();)d=Xf(d,c),b=N(b);return d}function Vi(a,b){var c=[];Zi(a,b,c);c.sort(function(a,b){return a.Lf-b.Lf});return c}function Zi(a,b,c){var d=b.Ea();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.R(function(b){Zi(a,b,c)})}function Ui(a,b){var c=b.Ea();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Yf(b,0<c.length?c:null)}b.R(function(b){Ui(a,b)})}
function Qi(a,b){var c=Xi(a,b).path(),d=Xf(a.yc,b);ag(d,function(b){$i(a,b)});$i(a,d);$f(d,function(b){$i(a,b)});return c}
function $i(a,b){var c=b.Ea();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(O(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].ne="set"):(O(1===c[g].status,"Unexpected transaction status in abort"),c[g].le(),e=e.concat(si(a.M,c[g].Da,!0)),c[g].I&&d.push(u(c[g].I,null,Error("set"),!1,null))));-1===f?Yf(b,null):c.length=f+1;dc(a.fa,b.path(),e);for(g=0;g<d.length;g++)gc(d[g])}};function aj(){this.sc={};this.ag=!1}aj.prototype.Cb=function(){for(var a in this.sc)this.sc[a].Cb()};aj.prototype.vc=function(){for(var a in this.sc)this.sc[a].vc()};aj.prototype.ze=function(){this.ag=!0};ba(aj);aj.prototype.interrupt=aj.prototype.Cb;aj.prototype.resume=aj.prototype.vc;function Y(a,b,c,d){this.k=a;this.path=b;this.n=c;this.pc=d}
function bj(a){var b=null,c=null;a.oa&&(b=Od(a));a.ra&&(c=Rd(a));if(a.g===re){if(a.oa){if("[MIN_NAME]"!=Nd(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.ra){if("[MAX_NAME]"!=Pd(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===R){if(null!=b&&!fg(b)||null!=c&&!fg(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(O(a.g instanceof ve||a.g===Be,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function cj(a){if(a.oa&&a.ra&&a.la&&(!a.la||""===a.Rb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function dj(a,b){if(!0===a.pc)throw Error(b+": You can't combine multiple orderBy calls.");}h=Y.prototype;h.Mb=function(){D("Query.ref",0,0,arguments.length);return new X(this.k,this.path)};
h.Ib=function(a,b,c,d){D("Query.on",2,4,arguments.length);lg("Query.on",a,!1);F("Query.on",2,b,!1);var e=ej("Query.on",c,d);if("value"===a)Ri(this.k,this,new ii(b,e.cancel||null,e.Qa||null));else{var f={};f[a]=b;Ri(this.k,this,new ji(f,e.cancel,e.Qa))}return b};
h.mc=function(a,b,c){D("Query.off",0,3,arguments.length);lg("Query.off",a,!0);F("Query.off",2,b,!0);Qb("Query.off",3,c);var d=null,e=null;"value"===a?d=new ii(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new ji(e,null,c||null));e=this.k;d=".info"===K(this.path)?e.Fd.nb(this,d):e.M.nb(this,d);bc(e.fa,this.path,d)};
h.Og=function(a,b){function c(k){f&&(f=!1,e.mc(a,c),b&&b.call(d.Qa,k),g.resolve(k))}D("Query.once",1,4,arguments.length);lg("Query.once",a,!1);F("Query.once",2,b,!0);var d=ej("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new B;Nb(g.D);this.Ib(a,c,function(b){e.mc(a,c);d.cancel&&d.cancel.call(d.Qa,b);g.reject(b)});return g.D};
h.Le=function(a){S("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");D("Query.limit",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.n.Le(a);cj(b);return new Y(this.k,this.path,b,this.pc)};
h.Me=function(a){D("Query.limitToFirst",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Me(a),this.pc)};
h.Ne=function(a){D("Query.limitToLast",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ne(a),this.pc)};
h.Pg=function(a){D("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ng("Query.orderByChild",a);dj(this,"Query.orderByChild");var b=new P(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
b=new ve(b);b=Fe(this.n,b);bj(b);return new Y(this.k,this.path,b,!0)};h.Qg=function(){D("Query.orderByKey",0,0,arguments.length);dj(this,"Query.orderByKey");var a=Fe(this.n,re);bj(a);return new Y(this.k,this.path,a,!0)};h.Rg=function(){D("Query.orderByPriority",0,0,arguments.length);dj(this,"Query.orderByPriority");var a=Fe(this.n,R);bj(a);return new Y(this.k,this.path,a,!0)};
h.Sg=function(){D("Query.orderByValue",0,0,arguments.length);dj(this,"Query.orderByValue");var a=Fe(this.n,Be);bj(a);return new Y(this.k,this.path,a,!0)};h.ce=function(a,b){D("Query.startAt",0,2,arguments.length);gg("Query.startAt",a,this.path,!0);mg("Query.startAt",b);var c=this.n.ce(a,b);cj(c);bj(c);if(this.n.oa)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");p(a)||(b=a=null);return new Y(this.k,this.path,c,this.pc)};
h.vd=function(a,b){D("Query.endAt",0,2,arguments.length);gg("Query.endAt",a,this.path,!0);mg("Query.endAt",b);var c=this.n.vd(a,b);cj(c);bj(c);if(this.n.ra)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,c,this.pc)};
h.tg=function(a,b){D("Query.equalTo",1,2,arguments.length);gg("Query.equalTo",a,this.path,!1);mg("Query.equalTo",b);if(this.n.oa)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.ra)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.ce(a,b).vd(a,b)};
h.toString=function(){D("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.aa;c<a.u.length;c++)""!==a.u[c]&&(b+="/"+encodeURIComponent(String(a.u[c])));return this.k.toString()+(b||"/")};h.wa=function(){var a=xd(Ge(this.n));return"{}"===a?"default":a};
function ej(a,b,c){var d={cancel:null,Qa:null};if(b&&c)d.cancel=b,F(a,3,d.cancel,!0),d.Qa=c,Qb(a,4,d.Qa);else if(b)if("object"===typeof b&&null!==b)d.Qa=b;else if("function"===typeof b)d.cancel=b;else throw Error(E(a,3,!0)+" must either be a cancel callback or a context object.");return d}Y.prototype.ref=Y.prototype.Mb;Y.prototype.on=Y.prototype.Ib;Y.prototype.off=Y.prototype.mc;Y.prototype.once=Y.prototype.Og;Y.prototype.limit=Y.prototype.Le;Y.prototype.limitToFirst=Y.prototype.Me;
Y.prototype.limitToLast=Y.prototype.Ne;Y.prototype.orderByChild=Y.prototype.Pg;Y.prototype.orderByKey=Y.prototype.Qg;Y.prototype.orderByPriority=Y.prototype.Rg;Y.prototype.orderByValue=Y.prototype.Sg;Y.prototype.startAt=Y.prototype.ce;Y.prototype.endAt=Y.prototype.vd;Y.prototype.equalTo=Y.prototype.tg;Y.prototype.toString=Y.prototype.toString;var Z={};Z.zc=Rh;Z.DataConnection=Z.zc;Rh.prototype.bh=function(a,b){this.Ia("q",{p:a},b)};Z.zc.prototype.simpleListen=Z.zc.prototype.bh;Rh.prototype.sg=function(a,b){this.Ia("echo",{d:a},b)};Z.zc.prototype.echo=Z.zc.prototype.sg;Rh.prototype.interrupt=Rh.prototype.Cb;Z.dg=Fh;Z.RealTimeConnection=Z.dg;Fh.prototype.sendRequest=Fh.prototype.Ia;Fh.prototype.close=Fh.prototype.close;
Z.Cg=function(a){var b=Rh.prototype.put;Rh.prototype.put=function(c,d,e,f){p(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Rh.prototype.put=b}};Z.hijackHash=Z.Cg;Z.cg=dd;Z.ConnectionTarget=Z.cg;Z.wa=function(a){return a.wa()};Z.queryIdentifier=Z.wa;Z.Eg=function(a){return a.k.Va.ba};Z.listens=Z.Eg;Z.ze=function(a){a.ze()};Z.forceRestClient=Z.ze;function X(a,b){var c,d,e;if(a instanceof Ji)c=a,d=b;else{D("new Firebase",1,2,arguments.length);d=sd(arguments[0]);c=d.eh;"firebase"===d.domain&&rd(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");c&&"undefined"!=c||rd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d.ob||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");
c=new dd(d.host,d.ob,c,"ws"===d.scheme||"wss"===d.scheme);d=new P(d.bd);e=d.toString();var f;!(f=!q(c.host)||0===c.host.length||!eg(c.lc))&&(f=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(q(e)&&0!==e.length&&!cg.test(e)));if(f)throw Error(E("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(b)if(b instanceof aj)e=b;else if(q(b))e=aj.yb(),c.Rd=b;else throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");
else e=aj.yb();f=c.toString();var g=z(e.sc,f);g||(g=new Ji(c,e.ag),e.sc[f]=g);c=g}Y.call(this,c,d,De,!1);this.then=void 0;this["catch"]=void 0}ka(X,Y);var fj=X,gj=["Firebase"],hj=n;gj[0]in hj||!hj.execScript||hj.execScript("var "+gj[0]);for(var ij;gj.length&&(ij=gj.shift());)!gj.length&&p(fj)?hj[ij]=fj:hj=hj[ij]?hj[ij]:hj[ij]={};X.goOffline=function(){D("Firebase.goOffline",0,0,arguments.length);aj.yb().Cb()};X.goOnline=function(){D("Firebase.goOnline",0,0,arguments.length);aj.yb().vc()};
X.enableLogging=od;X.ServerValue={TIMESTAMP:{".sv":"timestamp"}};X.SDK_VERSION=Eb;X.INTERNAL=U;X.Context=aj;X.TEST_ACCESS=Z;X.prototype.name=function(){S("Firebase.name() being deprecated. Please use Firebase.key() instead.");D("Firebase.name",0,0,arguments.length);return this.key()};X.prototype.name=X.prototype.name;X.prototype.key=function(){D("Firebase.key",0,0,arguments.length);return this.path.e()?null:me(this.path)};X.prototype.key=X.prototype.key;
X.prototype.o=function(a){D("Firebase.child",1,1,arguments.length);if(fa(a))a=String(a);else if(!(a instanceof P))if(null===K(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));ng("Firebase.child",b)}else ng("Firebase.child",a);return new X(this.k,this.path.o(a))};X.prototype.child=X.prototype.o;X.prototype.parent=function(){D("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new X(this.k,a)};X.prototype.parent=X.prototype.parent;
X.prototype.root=function(){D("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};X.prototype.root=X.prototype.root;X.prototype.set=function(a,b){D("Firebase.set",1,2,arguments.length);og("Firebase.set",this.path);gg("Firebase.set",a,this.path,!1);F("Firebase.set",2,b,!0);var c=new B;this.k.Ob(this.path,a,null,C(c,b));return c.D};X.prototype.set=X.prototype.set;
X.prototype.update=function(a,b){D("Firebase.update",1,2,arguments.length);og("Firebase.update",this.path);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jg("Firebase.update",a,this.path);F("Firebase.update",2,b,!0);c=new B;this.k.update(this.path,a,C(c,b));return c.D};
X.prototype.update=X.prototype.update;X.prototype.Ob=function(a,b,c){D("Firebase.setWithPriority",2,3,arguments.length);og("Firebase.setWithPriority",this.path);gg("Firebase.setWithPriority",a,this.path,!1);kg("Firebase.setWithPriority",2,b);F("Firebase.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";var d=new B;this.k.Ob(this.path,a,b,C(d,c));return d.D};X.prototype.setWithPriority=X.prototype.Ob;
X.prototype.remove=function(a){D("Firebase.remove",0,1,arguments.length);og("Firebase.remove",this.path);F("Firebase.remove",1,a,!0);return this.set(null,a)};X.prototype.remove=X.prototype.remove;
X.prototype.transaction=function(a,b,c){D("Firebase.transaction",1,3,arguments.length);og("Firebase.transaction",this.path);F("Firebase.transaction",1,a,!1);F("Firebase.transaction",2,b,!0);if(p(c)&&"boolean"!=typeof c)throw Error(E("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new B;r(b)&&Nb(d.D);Si(this.k,this.path,a,function(a,c,g){a?
d.reject(a):d.resolve(new ei(c,g));r(b)&&b(a,c,g)},c);return d.D};X.prototype.transaction=X.prototype.transaction;X.prototype.Zg=function(a,b){D("Firebase.setPriority",1,2,arguments.length);og("Firebase.setPriority",this.path);kg("Firebase.setPriority",1,a);F("Firebase.setPriority",2,b,!0);var c=new B;this.k.Ob(this.path.o(".priority"),a,null,C(c,b));return c.D};X.prototype.setPriority=X.prototype.Zg;
X.prototype.push=function(a,b){D("Firebase.push",0,2,arguments.length);og("Firebase.push",this.path);gg("Firebase.push",a,this.path,!0);F("Firebase.push",2,b,!0);var c=Li(this.k),d=hf(c),c=this.o(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.o(d)});c.then=u(f.then,f);c["catch"]=u(f.then,f,void 0);r(b)&&Nb(f)}return c};X.prototype.push=X.prototype.push;X.prototype.lb=function(){og("Firebase.onDisconnect",this.path);return new V(this.k,this.path)};X.prototype.onDisconnect=X.prototype.lb;
X.prototype.O=function(a,b,c){S("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead.");D("Firebase.auth",1,3,arguments.length);pg("Firebase.auth",a);F("Firebase.auth",2,b,!0);F("Firebase.auth",3,b,!0);var d=new B;dh(this.k.O,a,{},{remember:"none"},C(d,b),c);return d.D};X.prototype.auth=X.prototype.O;X.prototype.je=function(a){D("Firebase.unauth",0,1,arguments.length);F("Firebase.unauth",1,a,!0);var b=new B;eh(this.k.O,C(b,a));return b.D};X.prototype.unauth=X.prototype.je;
X.prototype.Be=function(){D("Firebase.getAuth",0,0,arguments.length);return this.k.O.Be()};X.prototype.getAuth=X.prototype.Be;X.prototype.Ig=function(a,b){D("Firebase.onAuth",1,2,arguments.length);F("Firebase.onAuth",1,a,!1);Qb("Firebase.onAuth",2,b);this.k.O.Ib("auth_status",a,b)};X.prototype.onAuth=X.prototype.Ig;X.prototype.Hg=function(a,b){D("Firebase.offAuth",1,2,arguments.length);F("Firebase.offAuth",1,a,!1);Qb("Firebase.offAuth",2,b);this.k.O.mc("auth_status",a,b)};X.prototype.offAuth=X.prototype.Hg;
X.prototype.hg=function(a,b,c){D("Firebase.authWithCustomToken",1,3,arguments.length);2===arguments.length&&Hb(b)&&(c=b,b=void 0);pg("Firebase.authWithCustomToken",a);F("Firebase.authWithCustomToken",2,b,!0);sg("Firebase.authWithCustomToken",3,c,!0);var d=new B;dh(this.k.O,a,{},c||{},C(d,b));return d.D};X.prototype.authWithCustomToken=X.prototype.hg;
X.prototype.ig=function(a,b,c){D("Firebase.authWithOAuthPopup",1,3,arguments.length);2===arguments.length&&Hb(b)&&(c=b,b=void 0);rg("Firebase.authWithOAuthPopup",a);F("Firebase.authWithOAuthPopup",2,b,!0);sg("Firebase.authWithOAuthPopup",3,c,!0);var d=new B;ih(this.k.O,a,c,C(d,b));return d.D};X.prototype.authWithOAuthPopup=X.prototype.ig;
X.prototype.jg=function(a,b,c){D("Firebase.authWithOAuthRedirect",1,3,arguments.length);2===arguments.length&&Hb(b)&&(c=b,b=void 0);rg("Firebase.authWithOAuthRedirect",a);F("Firebase.authWithOAuthRedirect",2,b,!1);sg("Firebase.authWithOAuthRedirect",3,c,!0);var d=new B,e=this.k.O,f=c,g=C(d,b);gh(e);var k=[Qg],f=Ag(f);"anonymous"===a||"firebase"===a?T(g,Sg("TRANSPORT_UNAVAILABLE")):(cd.set("redirect_client_options",f.qd),hh(e,k,"/auth/"+a,f,g));return d.D};X.prototype.authWithOAuthRedirect=X.prototype.jg;
X.prototype.kg=function(a,b,c,d){D("Firebase.authWithOAuthToken",2,4,arguments.length);3===arguments.length&&Hb(c)&&(d=c,c=void 0);rg("Firebase.authWithOAuthToken",a);F("Firebase.authWithOAuthToken",3,c,!0);sg("Firebase.authWithOAuthToken",4,d,!0);var e=new B;q(b)?(qg("Firebase.authWithOAuthToken",2,b),fh(this.k.O,a+"/token",{access_token:b},d,C(e,c))):(sg("Firebase.authWithOAuthToken",2,b,!1),fh(this.k.O,a+"/token",b,d,C(e,c)));return e.D};X.prototype.authWithOAuthToken=X.prototype.kg;
X.prototype.gg=function(a,b){D("Firebase.authAnonymously",0,2,arguments.length);1===arguments.length&&Hb(a)&&(b=a,a=void 0);F("Firebase.authAnonymously",1,a,!0);sg("Firebase.authAnonymously",2,b,!0);var c=new B;fh(this.k.O,"anonymous",{},b,C(c,a));return c.D};X.prototype.authAnonymously=X.prototype.gg;
X.prototype.lg=function(a,b,c){D("Firebase.authWithPassword",1,3,arguments.length);2===arguments.length&&Hb(b)&&(c=b,b=void 0);sg("Firebase.authWithPassword",1,a,!1);tg("Firebase.authWithPassword",a,"email");tg("Firebase.authWithPassword",a,"password");F("Firebase.authWithPassword",2,b,!0);sg("Firebase.authWithPassword",3,c,!0);var d=new B;fh(this.k.O,"password",a,c,C(d,b));return d.D};X.prototype.authWithPassword=X.prototype.lg;
X.prototype.ve=function(a,b){D("Firebase.createUser",1,2,arguments.length);sg("Firebase.createUser",1,a,!1);tg("Firebase.createUser",a,"email");tg("Firebase.createUser",a,"password");F("Firebase.createUser",2,b,!0);var c=new B;this.k.O.ve(a,C(c,b));return c.D};X.prototype.createUser=X.prototype.ve;
X.prototype.Xe=function(a,b){D("Firebase.removeUser",1,2,arguments.length);sg("Firebase.removeUser",1,a,!1);tg("Firebase.removeUser",a,"email");tg("Firebase.removeUser",a,"password");F("Firebase.removeUser",2,b,!0);var c=new B;this.k.O.Xe(a,C(c,b));return c.D};X.prototype.removeUser=X.prototype.Xe;
X.prototype.se=function(a,b){D("Firebase.changePassword",1,2,arguments.length);sg("Firebase.changePassword",1,a,!1);tg("Firebase.changePassword",a,"email");tg("Firebase.changePassword",a,"oldPassword");tg("Firebase.changePassword",a,"newPassword");F("Firebase.changePassword",2,b,!0);var c=new B;this.k.O.se(a,C(c,b));return c.D};X.prototype.changePassword=X.prototype.se;
X.prototype.re=function(a,b){D("Firebase.changeEmail",1,2,arguments.length);sg("Firebase.changeEmail",1,a,!1);tg("Firebase.changeEmail",a,"oldEmail");tg("Firebase.changeEmail",a,"newEmail");tg("Firebase.changeEmail",a,"password");F("Firebase.changeEmail",2,b,!0);var c=new B;this.k.O.re(a,C(c,b));return c.D};X.prototype.changeEmail=X.prototype.re;
X.prototype.Ze=function(a,b){D("Firebase.resetPassword",1,2,arguments.length);sg("Firebase.resetPassword",1,a,!1);tg("Firebase.resetPassword",a,"email");F("Firebase.resetPassword",2,b,!0);var c=new B;this.k.O.Ze(a,C(c,b));return c.D};X.prototype.resetPassword=X.prototype.Ze;})();


function setupFirebase(options){
     var fb = new Firebase(options.url?options.url:"https://tu-ech-default-rtdb.firebaseio.com");
    
    var io = fb.child(options.room);

    function send(data){
        data = typeof data=="object"?data:{
                text : data
            };
      if(!data._id)data._id = Date.now(); 
       io.push(data); 
    }
    
    function create(r){
       return {
         io : fb.child(r),
         send : function(data){
            data = typeof data=="object"?data:{
                text : data
            };

             if(!data._id)data._id = Date.now(); 
            this.io.push(data); 
         }
       }
    }

    return {
        io:io,
        send : send,
        create:create
    };
}

function setupsocket(url,f){
  window.sdk = window.sdk?window.sdk:{};
 var socket = io(url);
  socket.on('connect', function(data) {
     
  });
  window.addEventListener("offline", (e) => {
      console.log("offline");
});

   window.addEventListener("online", (e) => {
      console.log("online");
  });
  socket.on('error',function() {
     /*if(!$(".nointernet").length){
        $("body").append(`<div class="nointernet" style="    position: fixed;
    bottom: 104px;
    z-index: 1000000;
    width: 100%;
    background-color: rgb(255, 255, 255);
    padding: 8px;
    text-align: center;
    display: none;"><img src="https://cdn-icons-png.flaticon.com/128/2797/2797387.png" width="25" height="25" />There is a broblem with your internet.</div>`);
     }
     */
     
     console.log("error");
  });
 
  socket.on('ping', function(){
    console.log("ping");
 
    $(".nointernet").hide();
  }); 
  socket.on('pong', function(){
    console.log("pong");
  }); 

  socket.sent = function(){
      socket.emit.apply(window.sdk.socket,arguments);
  };

  window.addEventListener('online', (event) => {
      $(".nointernet").remove();
  });

  window.sdk.socket = socket;

  window.addEventListener('offline', (event) => {
      $(".nointernet").remove();
      $("body").prepend(`<div class="nointernet" style="    background-color: red;
    color: #fff;
    text-align: center;
    padding: 8px;
    border-radius: 8px;">Mt kt ni n server. Vui lng kim tra li ng truyn.</div>`);
  });


}
/*! squel | https://github.com/hiddentao/squel | BSD license */!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.squel=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return t.length?t+e:t}function i(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(t&&r){var i=function(e){"object"===("undefined"==typeof e?"undefined":d(e))&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})},o=!0,l=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;i(c)}}catch(f){l=!0,a=f}finally{try{!o&&s["return"]&&s["return"]()}finally{if(l)throw a}}}return t}function o(t){return t&&t.constructor.prototype===Object.prototype}function l(t){return t&&t.constructor.prototype===Array.prototype}function a(t){if(!t)return t;if("function"==typeof t.clone)return t.clone();if(o(t)||l(t)){var e=new t.constructor;return Object.getOwnPropertyNames(t).forEach(function(r){"function"!=typeof t[r]&&(e[r]=a(t[r]))}),e}return JSON.parse(JSON.stringify(t))}function u(t,e,r){var n="undefined"==typeof e?"undefined":d(e);if("function"!==n&&"string"!==n)throw new Error("type must be a class constructor or string");if("function"!=typeof r)throw new Error("handler must be a function");var i=!0,o=!1,l=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value;if(s.type===e)return void(s.handler=r)}}catch(c){o=!0,l=c}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}t.push({type:e,handler:r})}function s(t,e,r){return c(t,e)||c(t,r)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(("undefined"==typeof t?"undefined":d(t))===n.type||"string"!=typeof n.type&&t instanceof n.type)return n.handler}}function f(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,f={isSquelBuilder:function(t){return t&&!!t._toParamString}},_=function(t){return!f.isSquelBuilder(t)||!t.options.rawNesting};f.DefaultQueryBuilderOptions={autoQuoteTableNames:!1,autoQuoteFieldNames:!1,autoQuoteAliasNames:!0,useAsForTableAliasNames:!1,nameQuoteCharacter:"`",tableAliasQuoteCharacter:"`",fieldAliasQuoteCharacter:'"',valueHandlers:[],parameterCharacter:"?",numberedParameters:!1,numberedParametersPrefix:"$",numberedParametersStartAt:1,replaceSingleQuotes:!1,singleQuoteReplacement:"''",separator:" ",stringFormatter:null,rawNesting:!1},f.globalValueHandlers=[],f.registerValueHandler=function(t,e){u(f.globalValueHandlers,t,e)},f.Cloneable=function(){function t(){r(this,t)}return v(t,[{key:"clone",value:function(){var t=new this.constructor;return i(t,a(i({},this)))}}]),t}(),f.BaseBuilder=function(n){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this)),l=JSON.parse(JSON.stringify(f.DefaultQueryBuilderOptions));return["stringFormatter"].forEach(function(t){l[t]=f.DefaultQueryBuilderOptions[t]}),n.options=i({},l,e),n}return e(o,n),v(o,[{key:"registerValueHandler",value:function(t,e){return u(this.options.valueHandlers,t,e),this}},{key:"_sanitizeExpression",value:function(t){if(!f.isSquelBuilder(t)&&"string"!=typeof t)throw new Error("expression must be a stringor builder instance");return t}},{key:"_sanitizeName",value:function(t,e){if("string"!=typeof t)throw new Error(e+" must be a string");return t}},{key:"_sanitizeField",value:function(t){return f.isSquelBuilder(t)||(t=this._sanitizeName(t,"field name")),t}},{key:"_sanitizeBaseBuilder",value:function(t){if(f.isSquelBuilder(t))return t;throw new Error("must be a builder instance")}},{key:"_sanitizeTable",value:function(t){if("string"!=typeof t)try{t=this._sanitizeBaseBuilder(t)}catch(e){throw new Error("table name must be a string or a builder")}else t=this._sanitizeName(t,"table");return t}},{key:"_sanitizeTableAlias",value:function(t){return this._sanitizeName(t,"table alias")}},{key:"_sanitizeFieldAlias",value:function(t){return this._sanitizeName(t,"field alias")}},{key:"_sanitizeLimitOffset",value:function(t){if(t=parseInt(t),0>t||isNaN(t))throw new Error("limit/offset must be >= 0");return t}},{key:"_sanitizeValue",value:function(t){var e="undefined"==typeof t?"undefined":d(t);if(null===t);else if("string"===e||"number"===e||"boolean"===e);else if(f.isSquelBuilder(t));else{var r=!!s(t,this.options.valueHandlers,f.globalValueHandlers);if(!r)throw new Error("field value must be a string, number, boolean, null or one of the registered custom value types")}return t}},{key:"_escapeValue",value:function(t){return this.options.replaceSingleQuotes&&t?t.replace(/\'/g,this.options.singleQuoteReplacement):t}},{key:"_formatTableName",value:function(t){if(this.options.autoQuoteTableNames){var e=this.options.nameQuoteCharacter;t=""+e+t+e}return t}},{key:"_formatFieldAlias",value:function(t){if(this.options.autoQuoteAliasNames){var e=this.options.fieldAliasQuoteCharacter;t=""+e+t+e}return t}},{key:"_formatTableAlias",value:function(t){if(this.options.autoQuoteAliasNames){var e=this.options.tableAliasQuoteCharacter;t=""+e+t+e}return this.options.useAsForTableAliasNames?"AS "+t:t}},{key:"_formatFieldName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.autoQuoteFieldNames){var r=this.options.nameQuoteCharacter;t=e.ignorePeriodsForFieldNameQuotes?""+r+t+r:t.split(".").map(function(t){return"*"===t?t:""+r+t+r}).join(".")}return t}},{key:"_formatCustomValue",value:function(t,e,r){var n=s(t,this.options.valueHandlers,f.globalValueHandlers);return n&&(t=n(t,e,r),t&&t.rawNesting)?{formatted:!0,rawNesting:!0,value:t.value}:{formatted:!!n,value:t}}},{key:"_formatValueForParamArray",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(t)?t.map(function(t){return e._formatValueForParamArray(t,r)}):this._formatCustomValue(t,!0,r).value}},{key:"_formatValueForQueryString",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._formatCustomValue(t,!1,r),i=n.rawNesting,o=n.formatted,a=n.value;if(o)return i?a:this._applyNestingFormatting(a,_(t));if(l(a))a=a.map(function(t){return e._formatValueForQueryString(t)}),a=this._applyNestingFormatting(a.join(", "),_(a));else{var u="undefined"==typeof a?"undefined":d(a);if(null===a)a="NULL";else if("boolean"===u)a=a?"TRUE":"FALSE";else if(f.isSquelBuilder(a))a=this._applyNestingFormatting(a.toString(),_(a));else if("number"!==u){if("string"===u&&this.options.stringFormatter)return this.options.stringFormatter(a);if(r.dontQuote)a=""+a;else{var s=this._escapeValue(a);a="'"+s+"'"}}}return a}},{key:"_applyNestingFormatting",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&"string"==typeof t&&e&&!this.options.rawNesting){var r="("===t.charAt(0)&&")"===t.charAt(t.length-1);if(r)for(var n=0,i=1;t.length-1>++n;){var o=t.charAt(n);if("("===o)i++;else if(")"===o&&(i--,1>i)){r=!1;break}}r||(t="("+t+")")}return t}},{key:"_buildString",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.nested,i=r.buildParameterized,o=r.formattingOptions;e=e||[],t=t||"";for(var a="",u=-1,s=[],c=this.options.parameterCharacter,h=0;t.length>h;)if(t.substr(h,c.length)===c){var v=e[++u];if(i)if(f.isSquelBuilder(v)){var d=v._toParamString({buildParameterized:i,nested:!0});a+=d.text,d.values.forEach(function(t){return s.push(t)})}else if(v=this._formatValueForParamArray(v,o),l(v)){var _=v.map(function(){return c}).join(", ");a+="("+_+")",v.forEach(function(t){return s.push(t)})}else a+=c,s.push(v);else a+=this._formatValueForQueryString(v,o);h+=c.length}else a+=t.charAt(h),h++;return{text:this._applyNestingFormatting(a,!!n),values:s}}},{key:"_buildManyStrings",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],i=[],o=0;t.length>o;++o){var l=t[o],a=e[o],u=this._buildString(l,a,{buildParameterized:r.buildParameterized,nested:!1}),s=u.text,c=u.values;n.push(s),c.forEach(function(t){return i.push(t)})}return n=n.join(this.options.separator),{text:n.length?this._applyNestingFormatting(n,!!r.nested):"",values:i}}},{key:"_toParamString",value:function(t){throw new Error("Not yet implemented")}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._toParamString(t).text}},{key:"toParam",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._toParamString(i({},t,{buildParameterized:!0}))}}]),o}(f.Cloneable),f.Expression=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._nodes=[],n}return e(i,n),v(i,[{key:"and",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t=this._sanitizeExpression(t),this._nodes.push({type:"AND",expr:t,para:r}),this}},{key:"or",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t=this._sanitizeExpression(t),this._nodes.push({type:"OR",expr:t,para:r}),this}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=[],n=!0,i=!1,o=void 0;try{for(var l,a=this._nodes[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value,s=u.type,c=u.expr,h=u.para,v=f.isSquelBuilder(c)?c._toParamString({buildParameterized:t.buildParameterized,nested:!0}):this._buildString(c,h,{buildParameterized:t.buildParameterized}),d=v.text,_=v.values;e.length&&e.push(s),e.push(d),_.forEach(function(t){return r.push(t)})}}catch(p){i=!0,o=p}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return e=e.join(" "),{text:this._applyNestingFormatting(e,!!t.nested),values:r}}}]),i}(f.BaseBuilder),f.Case=function(l){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,a);var l=t(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return o(e)&&(n=e,e=null),e&&(l._fieldName=l._sanitizeField(e)),l.options=i({},f.DefaultQueryBuilderOptions,n),l._cases=[],l._elseValue=null,l}return e(a,l),v(a,[{key:"when",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return this._cases.unshift({expression:t,values:r||[]}),this}},{key:"then",value:function(t){if(0==this._cases.length)throw new Error("when() needs to be called first");return this._cases[0].result=t,this}},{key:"else",value:function(t){return this._elseValue=t,this}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=!0,o=!1,l=void 0;try{for(var a,u=this._cases[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value,c=s.expression,f=s.values,h=s.result;e=n(e," ");var v=this._buildString(c,f,{buildParameterized:t.buildParameterized,nested:!0});e+="WHEN "+v.text+" THEN "+this._formatValueForQueryString(h),v.values.forEach(function(t){return r.push(t)})}}catch(d){o=!0,l=d}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}return e.length?(e+=" ELSE "+this._formatValueForQueryString(this._elseValue)+" END",this._fieldName&&(e=this._fieldName+" "+e),e="CASE "+e):e=this._formatValueForQueryString(this._elseValue),{text:e,values:r}}}]),a}(f.BaseBuilder),f.Block=function(n){function i(e){return r(this,i),t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e))}return e(i,n),v(i,[{key:"exposedMethods",value:function(){for(var t={},e=this;e;)Object.getOwnPropertyNames(e).forEach(function(r){"constructor"===r||"function"!=typeof e[r]||"_"===r.charAt(0)||f.Block.prototype[r]||(t[r]=e[r])}),e=Object.getPrototypeOf(e);return t}}]),i}(f.BaseBuilder),f.StringBlock=function(n){function i(e,n){r(this,i);var o=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return o._str=n,o}return e(i,n),v(i,[{key:"_toParamString",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{text:this._str,values:[]}}}]),i}(f.Block),f.FunctionBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._strings=[],n._values=[],n}return e(i,n),v(i,[{key:"function",value:function(t){this._strings.push(t);for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this._values.push(r)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._buildManyStrings(this._strings,this._values,t)}}]),i}(f.Block),f.registerValueHandler(f.FunctionBlock,function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t.toParam():t.toString()}),f.AbstractTableBlock=function(i){function o(e,n){r(this,o);var i=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return i._tables=[],i}return e(o,i),v(o,[{key:"_table",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=e?this._sanitizeTableAlias(e):e,t=this._sanitizeTable(t),this.options.singleTable&&(this._tables=[]),this._tables.push({table:t,alias:e})}},{key:"_hasTable",value:function(){return 0<this._tables.length}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[];if(this._hasTable()){var i=!0,o=!1,l=void 0;try{for(var a,u=this._tables[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value,c=s.table,h=s.alias;e=n(e,", ");var v=void 0;if(f.isSquelBuilder(c)){var d=c._toParamString({buildParameterized:t.buildParameterized,nested:!0}),_=d.text,p=d.values;v=_,p.forEach(function(t){return r.push(t)})}else v=this._formatTableName(c);h&&(v+=" "+this._formatTableAlias(h)),e+=v}}catch(y){o=!0,l=y}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}this.options.prefix&&(e=this.options.prefix+" "+e)}return{text:e,values:r}}}]),o}(f.Block),f.TargetTableBlock=function(n){function i(){return r(this,i),t(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e(i,n),v(i,[{key:"target",value:function(t){this._table(t)}}]),i}(f.AbstractTableBlock),f.UpdateTableBlock=function(n){function i(){return r(this,i),t(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e(i,n),v(i,[{key:"table",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._table(t,e)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._hasTable())throw new Error("table() needs to be called");return h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_toParamString",this).call(this,t)}}]),i}(f.AbstractTableBlock),f.FromTableBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{prefix:"FROM"})))}return e(o,n),v(o,[{key:"from",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._table(t,e)}}]),o}(f.AbstractTableBlock),f.IntoTableBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{prefix:"INTO",singleTable:!0})))}return e(o,n),v(o,[{key:"into",value:function(t){this._table(t)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._hasTable())throw new Error("into() needs to be called");return h(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"_toParamString",this).call(this,t)}}]),o}(f.AbstractTableBlock),f.GetFieldBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._fields=[],n}return e(o,i),v(o,[{key:"fields",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(t)){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this.field(u,null,e)}}catch(s){n=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw i}}}else for(var c in t){var f=t[c];this.field(c,f,e)}}},{key:"field",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e?this._sanitizeFieldAlias(e):e,t=this._sanitizeField(t);var n=this._fields.filter(function(r){return r.name===t&&r.alias===e});return n.length?this:void this._fields.push({name:t,alias:e,options:r})}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryBuilder,r=t.buildParameterized,i="",o=[],l=!0,a=!1,u=void 0;try{for(var s,c=this._fields[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var h=s.value;i=n(i,", ");var v=h.name,d=h.alias,_=h.options;if("string"==typeof v)i+=this._formatFieldName(v,_);else{var p=v._toParamString({nested:!0,buildParameterized:r});i+=p.text,p.values.forEach(function(t){return o.push(t)})}d&&(i+=" AS "+this._formatFieldAlias(d))}}catch(y){a=!0,u=y}finally{try{!l&&c["return"]&&c["return"]()}finally{if(a)throw u}}if(!i.length){var g=e&&e.getBlock(f.FromTableBlock);g&&g._hasTable()&&(i="*")}return{text:i,values:o}}}]),o}(f.Block),f.AbstractSetFieldBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._reset(),n}return e(i,n),v(i,[{key:"_reset",value:function(){this._fields=[],this._values=[[]],this._valueOptions=[[]]}},{key:"_set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._values.length>1)throw new Error("Cannot set multiple rows of fields this way.");"undefined"!=typeof e&&(e=this._sanitizeValue(e)),t=this._sanitizeField(t);var n=this._fields.indexOf(t);-1===n&&(this._fields.push(t),n=this._fields.length-1),this._values[0][n]=e,this._valueOptions[0][n]=r}},{key:"_setFields",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==("undefined"==typeof t?"undefined":d(t)))throw new Error("Expected an object but got "+("undefined"==typeof t?"undefined":d(t)));for(var r in t)this._set(r,t[r],e)}},{key:"_setFieldsRows",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l(t))throw new Error("Expected an array of objects but got "+("undefined"==typeof t?"undefined":d(t)));this._reset();for(var r=0;t.length>r;++r){var n=t[r];for(var i in n){var o=n[i];i=this._sanitizeField(i),o=this._sanitizeValue(o);var a=this._fields.indexOf(i);if(0<r&&-1===a)throw new Error("All fields in subsequent rows must match the fields in the first row");-1===a&&(this._fields.push(i),a=this._fields.length-1),l(this._values[r])||(this._values[r]=[],this._valueOptions[r]=[]),this._values[r][a]=o,this._valueOptions[r][a]=e}}}}]),i}(f.Block),f.SetFieldBlock=function(i){function o(){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return e(o,i),v(o,[{key:"set",value:function(t,e,r){this._set(t,e,r)}},{key:"setFields",value:function(t,e){this._setFields(t,e)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.buildParameterized;if(0>=this._fields.length)throw new Error("set() needs to be called");for(var r="",i=[],o=0;o<this._fields.length;++o){r=n(r,", ");var l=this._formatFieldName(this._fields[o]),a=this._values[0][o];0>l.indexOf("=")&&(l=l+" = "+this.options.parameterCharacter);var u=this._buildString(l,[a],{buildParameterized:e,formattingOptions:this._valueOptions[0][o]});r+=u.text,u.values.forEach(function(t){return i.push(t)})}return{text:"SET "+r,values:i}}}]),o}(f.AbstractSetFieldBlock),f.InsertFieldValueBlock=function(i){function o(){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return e(o,i),v(o,[{key:"set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._set(t,e,r)}},{key:"setFields",value:function(t,e){this._setFields(t,e)}},{key:"setFieldsRows",value:function(t,e){this._setFieldsRows(t,e)}},{key:"_toParamString",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.buildParameterized,i=this._fields.map(function(e){return t._formatFieldName(e)}).join(", "),o=[],l=[],a=0;a<this._values.length;++a){o[a]="";for(var u=0;u<this._values[a].length;++u){var s=this._buildString(this.options.parameterCharacter,[this._values[a][u]],{buildParameterized:r,formattingOptions:this._valueOptions[a][u]});s.values.forEach(function(t){return l.push(t)}),o[a]=n(o[a],", "),o[a]+=s.text}}return{text:i.length?"("+i+") VALUES ("+o.join("), (")+")":"",values:l}}}]),o}(f.AbstractSetFieldBlock),f.InsertFieldsFromQueryBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._fields=[],n._query=null,n}return e(i,n),v(i,[{key:"fromQuery",value:function(t,e){var r=this;this._fields=t.map(function(t){return r._sanitizeField(t)}),this._query=this._sanitizeBaseBuilder(e)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[];if(this._fields.length&&this._query){var n=this._query._toParamString({buildParameterized:t.buildParameterized,nested:!0}),i=n.text,o=n.values;e="("+this._fields.join(", ")+") "+this._applyNestingFormatting(i),r=o}return{text:e,values:r}}}]),i}(f.Block),f.DistinctBlock=function(n){function i(){return r(this,i),t(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e(i,n),v(i,[{key:"distinct",value:function(){this._useDistinct=!0}},{key:"_toParamString",value:function(){return{text:this._useDistinct?"DISTINCT":"",values:[]}}}]),i}(f.Block),f.GroupByBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._groups=[],n}return e(i,n),v(i,[{key:"group",value:function(t){this._groups.push(this._sanitizeField(t))}},{key:"_toParamString",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{text:this._groups.length?"GROUP BY "+this._groups.join(", "):"",values:[]}}}]),i}(f.Block),f.AbstractVerbSingleValueBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._value=null,n}return e(i,n),v(i,[{key:"_setValue",value:function(t){this._value=null!==t?this._sanitizeLimitOffset(t):t}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null!==this._value?this.options.verb+" "+this.options.parameterCharacter:"",r=null!==this._value?[this._value]:[];return this._buildString(e,r,t)}}]),i}(f.Block),f.OffsetBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{verb:"OFFSET"})))}return e(o,n),v(o,[{key:"offset",value:function(t){this._setValue(t)}}]),o}(f.AbstractVerbSingleValueBlock),f.LimitBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{verb:"LIMIT"})))}return e(o,n),v(o,[{key:"limit",value:function(t){this._setValue(t)}}]),o}(f.AbstractVerbSingleValueBlock),f.AbstractConditionBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._conditions=[],n}return e(i,n),v(i,[{key:"_condition",value:function(t){t=this._sanitizeExpression(t);for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this._conditions.push({expr:t,values:r||[]})}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=[],n=!0,i=!1,o=void 0;try{for(var l,a=this._conditions[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value,s=u.expr,c=u.values,h=f.isSquelBuilder(s)?s._toParamString({buildParameterized:t.buildParameterized}):this._buildString(s,c,{buildParameterized:t.buildParameterized});h.text.length&&e.push(h.text),h.values.forEach(function(t){return r.push(t)})}}catch(v){i=!0,o=v}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return e.length&&(e=e.join(") AND (")),{text:e.length?this.options.verb+" ("+e+")":"",values:r}}}]),i}(f.Block),f.WhereBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{verb:"WHERE"})))}return e(o,n),v(o,[{key:"where",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this._condition.apply(this,[t].concat(r))}}]),o}(f.AbstractConditionBlock),f.HavingBlock=function(n){function o(e){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i({},e,{verb:"HAVING"})))}return e(o,n),v(o,[{key:"having",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this._condition.apply(this,[t].concat(r))}}]),o}(f.AbstractConditionBlock),f.OrderByBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._orders=[],n}return e(o,i),v(o,[{key:"order",value:function(t,e){t=this._sanitizeField(t),"string"!=typeof e&&(void 0===e?e="ASC":null!==e&&(e=e?"ASC":"DESC"));for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this._orders.push({field:t,dir:e,values:n||[]})}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=!0,o=!1,a=void 0;try{for(var u,s=this._orders[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,f=c.field,h=c.dir,v=c.values;e=n(e,", ");var d=this._buildString(f,v,{buildParameterized:t.buildParameterized});e+=d.text,l(d.values)&&d.values.forEach(function(t){return r.push(t)}),null!==h&&(e+=" "+h)}}catch(_){o=!0,a=_}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw a}}return{text:e.length?"ORDER BY "+e:"",values:r}}}]),o}(f.Block),f.JoinBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._joins=[],n}return e(o,i),v(o,[{key:"join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"INNER";t=this._sanitizeTable(t,!0),e=e?this._sanitizeTableAlias(e):e,r=r?this._sanitizeExpression(r):r,this._joins.push({type:n,table:t,alias:e,condition:r})}},{key:"left_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"LEFT")}},{key:"right_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"RIGHT")}},{key:"outer_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"OUTER")}},{key:"left_outer_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"LEFT OUTER")}},{key:"full_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"FULL")}},{key:"cross_join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(t,e,r,"CROSS")}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=!0,o=!1,l=void 0;try{for(var a,u=this._joins[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value,c=s.type,h=s.table,v=s.alias,d=s.condition;e=n(e,this.options.separator);var _=void 0;if(f.isSquelBuilder(h)){var p=h._toParamString({buildParameterized:t.buildParameterized,nested:!0});p.values.forEach(function(t){return r.push(t)}),_=p.text}else _=this._formatTableName(h);if(e+=c+" JOIN "+_,v&&(e+=" "+this._formatTableAlias(v)),d){e+=" ON ";var y=void 0;y=f.isSquelBuilder(d)?d._toParamString({buildParameterized:t.buildParameterized}):this._buildString(d,[],{buildParameterized:t.buildParameterized}),e+=this._applyNestingFormatting(y.text),y.values.forEach(function(t){return r.push(t)})}}}catch(g){o=!0,l=g}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}return{text:e,values:r}}}]),o}(f.Block),f.UnionBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._unions=[],n}return e(o,i),v(o,[{key:"union",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNION";t=this._sanitizeTable(t),this._unions.push({type:e,table:t})}},{key:"union_all",value:function(t){this.union(t,"UNION ALL")}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=!0,o=!1,l=void 0;try{for(var a,u=this._unions[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value,c=s.type,h=s.table;e=n(e,this.options.separator);var v=void 0;if(h instanceof f.BaseBuilder){var d=h._toParamString({buildParameterized:t.buildParameterized,nested:!0});v=d.text,d.values.forEach(function(t){return r.push(t)})}else e=this._formatTableName(h);e+=c+" "+v}}catch(_){o=!0,l=_}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}return{text:e,values:r}}}]),o}(f.Block),f.QueryBuilder=function(n){function o(e,n){r(this,o);var i=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));i.blocks=n||[];var l=!0,a=!1,u=void 0;try{for(var s,c=i.blocks[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var f=s.value,h=f.exposedMethods();for(var v in h){var d=h[v];if(void 0!==i[v])throw new Error("Builder already has a builder method called: "+v);!function(t,e,r){i[e]=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.call.apply(r,[t].concat(n)),i}}(f,v,d)}}}catch(_){a=!0,u=_}finally{try{!l&&c["return"]&&c["return"]()}finally{if(a)throw u}}return i}return e(o,n),v(o,[{key:"registerValueHandler",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var l,a=this.blocks[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value;u.registerValueHandler(t,e)}}catch(s){n=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw i}}return h(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"registerValueHandler",this).call(this,t,e),this}},{key:"updateOptions",value:function(t){this.options=i({},this.options,t);var e=!0,r=!1,n=void 0;try{for(var o,l=this.blocks[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var a=o.value;a.options=i({},a.options,t)}}catch(u){r=!0,n=u}finally{try{!e&&l["return"]&&l["return"]()}finally{if(r)throw n}}}},{key:"_toParamString",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=i({},this.options,e);var r=this.blocks.map(function(r){return r._toParamString({buildParameterized:e.buildParameterized,queryBuilder:t})}),n=r.map(function(t){return t.text}),o=r.map(function(t){return t.values}),l=n.filter(function(t){return 0<t.length}).join(e.separator),a=[];if(o.forEach(function(t){return t.forEach(function(t){return a.push(t)})}),!e.nested&&e.numberedParameters){var u=void 0!==e.numberedParametersStartAt?e.numberedParametersStartAt:1,s=e.parameterCharacter.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");l=l.replace(new RegExp(s,"g"),function(){return""+e.numberedParametersPrefix+u++})}return{text:this._applyNestingFormatting(l,!!e.nested),values:a}}},{key:"clone",value:function(){var t=this.blocks.map(function(t){return t.clone()});return new this.constructor(this.options,t);
}},{key:"getBlock",value:function(t){var e=this.blocks.filter(function(e){return e instanceof t});return e[0]}}]),o}(f.BaseBuilder),f.Select=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new f.StringBlock(e,"SELECT"),new f.FunctionBlock(e),new f.DistinctBlock(e),new f.GetFieldBlock(e),new f.FromTableBlock(e),new f.JoinBlock(e),new f.WhereBlock(e),new f.GroupByBlock(e),new f.HavingBlock(e),new f.OrderByBlock(e),new f.LimitBlock(e),new f.OffsetBlock(e),new f.UnionBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(f.QueryBuilder),f.Update=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new f.StringBlock(e,"UPDATE"),new f.UpdateTableBlock(e),new f.SetFieldBlock(e),new f.WhereBlock(e),new f.OrderByBlock(e),new f.LimitBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(f.QueryBuilder),f.Delete=function(n){function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,o),n=n||[new f.StringBlock(e,"DELETE"),new f.TargetTableBlock(e),new f.FromTableBlock(i({},e,{singleTable:!0})),new f.JoinBlock(e),new f.WhereBlock(e),new f.OrderByBlock(e),new f.LimitBlock(e)],t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,n))}return e(o,n),o}(f.QueryBuilder),f.Insert=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new f.StringBlock(e,"INSERT"),new f.IntoTableBlock(e),new f.InsertFieldValueBlock(e),new f.InsertFieldsFromQueryBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(f.QueryBuilder);var p={VERSION:"5.13.1",flavour:c,expr:function(t){return new f.Expression(t)},"case":function(t,e){return new f.Case(t,e)},select:function(t,e){return new f.Select(t,e)},update:function(t,e){return new f.Update(t,e)},insert:function(t,e){return new f.Insert(t,e)},"delete":function(t,e){return new f.Delete(t,e)},str:function(){var t=new f.FunctionBlock;return t["function"].apply(t,arguments),t},rstr:function(){var t=new f.FunctionBlock({rawNesting:!0});return t["function"].apply(t,arguments),t},registerValueHandler:f.registerValueHandler};return p.remove=p["delete"],p.cls=f,p}var h=function p(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:p(i,e,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},v=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=f();return _.flavours={},_.useFlavour=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)return _;if(_.flavours[t]instanceof Function){var e=f(t);return _.flavours[t].call(null,e),e.flavours=_.flavours,e.useFlavour=_.useFlavour,e}throw new Error("Flavour not available: "+t)},_.flavours.mssql=function(o){var l=o.cls;l.DefaultQueryBuilderOptions.replaceSingleQuotes=!0,l.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,l.DefaultQueryBuilderOptions.numberedParametersPrefix="@",o.registerValueHandler(Date,function(t){return"'"+t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)+"-"+t.getUTCDate()+" "+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds()+"'"}),l.MssqlLimitOffsetTopBlock=function(n){function i(n){r(this,i);var o=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));o._limits=null,o._offsets=null;var a=function(t){t=this._sanitizeLimitOffset(t),this._parent._limits=t};return o.ParentBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e.options));return n._parent=e,n}return e(i,n),i}(l.Block),o.LimitBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.limit=a,n}return e(i,n),v(i,[{key:"_toParamString",value:function(){var t="";return this._parent._limits&&this._parent._offsets&&(t="FETCH NEXT "+this._parent._limits+" ROWS ONLY"),{text:t,values:[]}}}]),i}(o.ParentBlock),o.TopBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.top=a,n}return e(i,n),v(i,[{key:"_toParamString",value:function(){var t="";return this._parent._limits&&!this._parent._offsets&&(t="TOP ("+this._parent._limits+")"),{text:t,values:[]}}}]),i}(o.ParentBlock),o.OffsetBlock=function(n){function i(){return r(this,i),t(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e(i,n),v(i,[{key:"offset",value:function(t){this._parent._offsets=this._sanitizeLimitOffset(t)}},{key:"_toParamString",value:function(){var t="";return this._parent._offsets&&(t="OFFSET "+this._parent._offsets+" ROWS"),{text:t,values:[]}}}]),i}(o.ParentBlock),o}return e(i,n),v(i,[{key:"LIMIT",value:function(){return new this.LimitBlock(this)}},{key:"TOP",value:function(){return new this.TopBlock(this)}},{key:"OFFSET",value:function(){return new this.OffsetBlock(this)}}]),i}(l.Block),l.MssqlUpdateTopBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._limits=null,n.limit=n.top=function(t){n._limits=n._sanitizeLimitOffset(t)},n}return e(i,n),v(i,[{key:"_toParamString",value:function(){return{text:this._limits?"TOP ("+this._limits+")":"",values:[]}}}]),i}(l.Block),l.MssqlInsertFieldValueBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._outputs=[],n}return e(i,n),v(i,[{key:"output",value:function(t){var e=this;"string"==typeof t?this._outputs.push("INSERTED."+this._sanitizeField(t)):t.forEach(function(t){e._outputs.push("INSERTED."+e._sanitizeField(t))})}},{key:"_toParamString",value:function(t){var e=h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_toParamString",this).call(this,t);if(e.text.length&&0<this._outputs.length){var r="OUTPUT "+this._outputs.join(", ")+" ",n=e.text.indexOf("VALUES");e.text=e.text.substr(0,n)+r+e.text.substr(n)}return e}}]),i}(l.InsertFieldValueBlock),l.MssqlUpdateDeleteOutputBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._outputs=[],n}return e(o,i),v(o,[{key:"outputs",value:function(t){for(var e in t)this.output(e,t[e])}},{key:"output",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=this._sanitizeField(t),e=e?this._sanitizeFieldAlias(e):e,this._outputs.push({name:this.options.forDelete?"DELETED."+t:"INSERTED."+t,alias:e})}},{key:"_toParamString",value:function(t){var e="";if(this._outputs.length){var r=!0,i=!1,o=void 0;try{for(var l,a=this._outputs[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value;e=n(e,", "),e+=u.name,u.alias&&(e+=" AS "+this._formatFieldAlias(u.alias))}}catch(s){i=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}e="OUTPUT "+e}return{text:e,values:[]}}}]),o}(l.Block),l.Select=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,i);var o=new l.MssqlLimitOffsetTopBlock(e);return n=n||[new l.StringBlock(e,"SELECT"),new l.DistinctBlock(e),o.TOP(),new l.GetFieldBlock(e),new l.FromTableBlock(e),new l.JoinBlock(e),new l.WhereBlock(e),new l.GroupByBlock(e),new l.OrderByBlock(e),o.OFFSET(),o.LIMIT(),new l.UnionBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(l.QueryBuilder),l.Update=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new l.StringBlock(e,"UPDATE"),new l.MssqlUpdateTopBlock(e),new l.UpdateTableBlock(e),new l.SetFieldBlock(e),new l.MssqlUpdateDeleteOutputBlock(e),new l.WhereBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(l.QueryBuilder),l.Delete=function(n){function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,o),n=n||[new l.StringBlock(e,"DELETE"),new l.TargetTableBlock(e),new l.FromTableBlock(i({},e,{singleTable:!0})),new l.JoinBlock(e),new l.MssqlUpdateDeleteOutputBlock(i({},e,{forDelete:!0})),new l.WhereBlock(e),new l.OrderByBlock(e),new l.LimitBlock(e)],t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,n))}return e(o,n),o}(l.QueryBuilder),l.Insert=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new l.StringBlock(e,"INSERT"),new l.IntoTableBlock(e),new l.MssqlInsertFieldValueBlock(e),new l.InsertFieldsFromQueryBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(l.QueryBuilder)},_.flavours.mysql=function(i){var o=i.cls;o.MysqlOnDuplicateKeyUpdateBlock=function(i){function o(){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return e(o,i),v(o,[{key:"onDupUpdate",value:function(t,e,r){this._set(t,e,r)}},{key:"_toParamString",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=0;i<this._fields.length;++i){e=n(e,", ");var o=this._fields[i],l=this._values[0][i],a=this._valueOptions[0][i];if("undefined"==typeof l)e+=o;else{var u=this._buildString(o+" = "+this.options.parameterCharacter,[l],{buildParameterized:t.buildParameterized,formattingOptions:a});e+=u.text,u.values.forEach(function(t){return r.push(t)})}}return{text:e.length?"ON DUPLICATE KEY UPDATE "+e:"",values:r}}}]),o}(o.AbstractSetFieldBlock),o.Insert=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new o.StringBlock(e,"INSERT"),new o.IntoTableBlock(e),new o.InsertFieldValueBlock(e),new o.InsertFieldsFromQueryBlock(e),new o.MysqlOnDuplicateKeyUpdateBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(o.QueryBuilder),o.Replace=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new o.StringBlock(e,"REPLACE"),new o.IntoTableBlock(e),new o.InsertFieldValueBlock(e),new o.InsertFieldsFromQueryBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(o.QueryBuilder),i.replace=function(t,e){return new o.Replace(t,e)}},_.flavours.postgres=function(o){var a=o.cls;a.DefaultQueryBuilderOptions.numberedParameters=!0,a.DefaultQueryBuilderOptions.numberedParametersStartAt=1,a.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,a.DefaultQueryBuilderOptions.useAsForTableAliasNames=!0,a.PostgresOnConflictKeyUpdateBlock=function(i){function o(){return r(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return e(o,i),v(o,[{key:"onConflict",value:function(t,e){var r=this;this._onConflict=!0,t&&(l(t)||(t=[t]),this._dupFields=t.map(this._sanitizeField.bind(this)),e&&Object.keys(e).forEach(function(t){r._set(t,e[t])}))}},{key:"_toParamString",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="",r=[],i=0;i<this._fields.length;++i){e=n(e,", ");var o=this._fields[i],l=this._values[0][i],a=this._valueOptions[0][i];if("undefined"==typeof l)e+=o;else{var u=this._buildString(o+" = "+this.options.parameterCharacter,[l],{buildParameterized:t.buildParameterized,formattingOptions:a});e+=u.text,u.values.forEach(function(t){return r.push(t)})}}var s={text:"",values:r};if(this._onConflict){var c=this._dupFields?"("+this._dupFields.join(", ")+") ":"",f=e.length?"UPDATE SET "+e:"NOTHING";s.text="ON CONFLICT "+c+"DO "+f}return s}}]),o}(a.AbstractSetFieldBlock),a.ReturningBlock=function(i){function o(e){r(this,o);var n=t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n._fields=[],n}return e(o,i),v(o,[{key:"returning",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e?this._sanitizeFieldAlias(e):e,t=this._sanitizeField(t);var n=this._fields.filter(function(r){return r.name===t&&r.alias===e});return n.length?this:void this._fields.push({name:t,alias:e,options:r})}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.queryBuilder,t.buildParameterized),r="",i=[],o=!0,l=!1,a=void 0;try{for(var u,s=this._fields[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;r=n(r,", ");var f=c.name,h=c.alias,v=c.options;if("string"==typeof f)r+=this._formatFieldName(f,v);else{var d=f._toParamString({nested:!0,buildParameterized:e});r+=d.text,d.values.forEach(function(t){return i.push(t)})}h&&(r+=" AS "+this._formatFieldAlias(h))}}catch(_){l=!0,a=_}finally{try{!o&&s["return"]&&s["return"]()}finally{if(l)throw a}}return{text:r.length>0?"RETURNING "+r:"",values:i}}}]),o}(a.Block),a.WithBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._tables=[],n}return e(i,n),v(i,[{key:"with",value:function(t,e){this._tables.push({alias:t,table:e})}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=[],n=!0,i=!1,o=void 0;try{for(var l,a=this._tables[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value,s=u.alias,c=u.table,f=c._toParamString({buildParameterized:t.buildParameterized,nested:!0});e.push(s+" AS "+f.text),f.values.forEach(function(t){return r.push(t)})}}catch(h){i=!0,o=h}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return{text:e.length?"WITH "+e.join(", "):"",values:r}}}]),i}(a.Block),a.DistinctOnBlock=function(n){function i(e){r(this,i);var n=t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n._distinctFields=[],n}return e(i,n),v(i,[{key:"distinct",value:function(){var t=this;this._useDistinct=!0;for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(e){t._distinctFields.push(t._sanitizeField(e))})}},{key:"_toParamString",value:function(){var t="";return this._useDistinct&&(t="DISTINCT",this._distinctFields.length&&(t+=" ON ("+this._distinctFields.join(", ")+")")),{text:t,values:[]}}}]),i}(a.Block),a.Select=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new a.WithBlock(e),new a.StringBlock(e,"SELECT"),new a.FunctionBlock(e),new a.DistinctOnBlock(e),new a.GetFieldBlock(e),new a.FromTableBlock(e),new a.JoinBlock(e),new a.WhereBlock(e),new a.GroupByBlock(e),new a.HavingBlock(e),new a.OrderByBlock(e),new a.LimitBlock(e),new a.OffsetBlock(e),new a.UnionBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(a.QueryBuilder),a.Insert=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new a.WithBlock(e),new a.StringBlock(e,"INSERT"),new a.IntoTableBlock(e),new a.InsertFieldValueBlock(e),new a.InsertFieldsFromQueryBlock(e),new a.PostgresOnConflictKeyUpdateBlock(e),new a.ReturningBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(a.QueryBuilder),a.Update=function(n){function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,i),n=n||[new a.WithBlock(e),new a.StringBlock(e,"UPDATE"),new a.UpdateTableBlock(e),new a.SetFieldBlock(e),new a.FromTableBlock(e),new a.WhereBlock(e),new a.OrderByBlock(e),new a.LimitBlock(e),new a.ReturningBlock(e)],t(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n))}return e(i,n),i}(a.QueryBuilder),a.Delete=function(n){function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,o),n=n||[new a.WithBlock(e),new a.StringBlock(e,"DELETE"),new a.TargetTableBlock(e),new a.FromTableBlock(i({},e,{singleTable:!0})),new a.JoinBlock(e),new a.WhereBlock(e),new a.OrderByBlock(e),new a.LimitBlock(e),new a.ReturningBlock(e)],t(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,n))}return e(o,n),o}(a.QueryBuilder)},_});





function makeid(length) {
    length= length||10;
    let result = '';
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    const charactersLength = characters.length;
    let counter = 0;
    while (counter < length) {
      result += characters.charAt(Math.floor(Math.random() * charactersLength));
      counter += 1;
    }
    return result.toUpperCase();
}
function randomString(length){
   return makeid(length);
}


// First, checks if it isn't implemented yet.
if (!String.prototype.format) {
  String.prototype.format = function() {
    var args = arguments;
    return this.replace(/{(\d+)}/g, function(match, number) { 
      return typeof args[number] != 'undefined'
        ? args[number]
        : match
      ;
    });
  };
    
  String.prototype.sprintf = function() {
    var args = arguments;
    return this.replace(/(%s)/g, function(match, number) { 
      return typeof args[number] != 'undefined'
        ? args[number]
        : match
      ;
    });
  };

}

/**
 * Template7 1.3.5
 * Mobile-first HTML template engine
 * 
 * http://www.idangero.us/template7/
 * 
 * Copyright 2018, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 * 
 * Licensed under MIT
 * 
 * Released on: January 22, 2018
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Template7=t()}(this,function(){"use strict";function Template7(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=e[0],i=e[1];if(2===e.length){var n=new Template7Class(r),a=n.compile()(i);return n=null,a}return new Template7Class(r)}var t7ctx;t7ctx="undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;var Template7Context=t7ctx,Template7Utils={quoteSingleRexExp:new RegExp("'","g"),quoteDoubleRexExp:new RegExp('"',"g"),isFunction:function(e){return"function"==typeof e},escape:function(e){return void 0!==Template7Context&&Template7Context.escape?Template7Context.escape(e):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},helperToSlices:function(e){var t,r,i,n=Template7Utils.quoteDoubleRexExp,a=Template7Utils.quoteSingleRexExp,l=e.replace(/[{}#}]/g,"").trim().split(" "),s=[];for(r=0;r<l.length;r+=1){var o=l[r],p=void 0,c=void 0;if(0===r)s.push(o);else if(0===o.indexOf('"')||0===o.indexOf("'"))if(p=0===o.indexOf('"')?n:a,c=0===o.indexOf('"')?'"':"'",2===o.match(p).length)s.push(o);else{for(t=0,i=r+1;i<l.length;i+=1)if(o+=" "+l[i],l[i].indexOf(c)>=0){t=i,s.push(o);break}t&&(r=t)}else if(o.indexOf("=")>0){var u=o.split("="),f=u[0],m=u[1];if(p||(p=0===m.indexOf('"')?n:a,c=0===m.indexOf('"')?'"':"'"),2!==m.match(p).length){for(t=0,i=r+1;i<l.length;i+=1)if(m+=" "+l[i],l[i].indexOf(c)>=0){t=i;break}t&&(r=t)}var d=[f,m.replace(p,"")];s.push(d)}else s.push(o)}return s},stringToBlocks:function(e){var t,r,i=[];if(!e)return[];var n=e.split(/({{[^{^}]*}})/);for(t=0;t<n.length;t+=1){var a=n[t];if(""!==a)if(a.indexOf("{{")<0)i.push({type:"plain",content:a});else{if(a.indexOf("{/")>=0)continue;if((a=a.replace(/{{([#/])*([ ])*/,"{{$1").replace(/([ ])*}}/,"}}")).indexOf("{#")<0&&a.indexOf(" ")<0&&a.indexOf("else")<0){i.push({type:"variable",contextName:a.replace(/[{}]/g,"")});continue}var l=Template7Utils.helperToSlices(a),s=l[0],o=">"===s,p=[],c={};for(r=1;r<l.length;r+=1){var u=l[r];Array.isArray(u)?c[u[0]]="false"!==u[1]&&u[1]:p.push(u)}if(a.indexOf("{#")>=0){var f="",m="",d=0,h=void 0,g=!1,x=!1,v=0;for(r=t+1;r<n.length;r+=1)if(n[r].indexOf("{{#")>=0&&(v+=1),n[r].indexOf("{{/")>=0&&(v-=1),n[r].indexOf("{{#"+s)>=0)f+=n[r],x&&(m+=n[r]),d+=1;else if(n[r].indexOf("{{/"+s)>=0){if(!(d>0)){h=r,g=!0;break}d-=1,f+=n[r],x&&(m+=n[r])}else n[r].indexOf("else")>=0&&0===v?x=!0:(x||(f+=n[r]),x&&(m+=n[r]));g&&(h&&(t=h),"raw"===s?i.push({type:"plain",content:f}):i.push({type:"helper",helperName:s,contextName:p,content:f,inverseContent:m,hash:c}))}else a.indexOf(" ")>0&&(o&&(s="_partial",p[0]&&(0===p[0].indexOf("[")?p[0]=p[0].replace(/[[\]]/g,""):p[0]='"'+p[0].replace(/"|'/g,"")+'"')),i.push({type:"helper",helperName:s,contextName:p,hash:c}))}}return i},parseJsVariable:function(e,t,r){return e.split(/([+ -*/^])/g).map(function(e){if(e.indexOf(t)<0)return e;if(!r)return JSON.stringify("");var i=r;return e.indexOf(t+".")>=0&&e.split(t+".")[1].split(".").forEach(function(e){i=i[e]?i[e]:"undefined"}),JSON.stringify(i)}).join("")},parseJsParents:function(e,t){return e.split(/([+ -*^])/g).map(function(e){if(e.indexOf("../")<0)return e;if(!t||0===t.length)return JSON.stringify("");var r=e.split("../").length-1,i=r>t.length?t[t.length-1]:t[r-1];return e.replace(/..\//g,"").split(".").forEach(function(e){i=i[e]?i[e]:"undefined"}),JSON.stringify(i)}).join("")},getCompileVar:function(e,t,r){void 0===r&&(r="data_1");var i,n,a=t,l=0;0===e.indexOf("../")?(l=e.split("../").length-1,a="ctx_"+((n=a.split("_")[1]-l)>=1?n:1),i=e.split("../")[l].split(".")):0===e.indexOf("@global")?(a="Template7.global",i=e.split("@global.")[1].split(".")):0===e.indexOf("@root")?(a="root",i=e.split("@root.")[1].split(".")):i=e.split(".");for(var s=0;s<i.length;s+=1){var o=i[s];if(0===o.indexOf("@")){var p=r.split("_")[1];l>0&&(p=n),s>0?a+="[(data_"+p+" && data_"+p+"."+o.replace("@","")+")]":a="(data_"+p+" && data_"+p+"."+o.replace("@","")+")"}else(Number.isFinite?Number.isFinite(o):Template7Context.isFinite(o))?a+="["+o+"]":"this"===o||o.indexOf("this.")>=0||o.indexOf("this[")>=0||o.indexOf("this(")>=0?a=o.replace("this",t):a+="."+o}return a},getCompiledArguments:function(e,t,r){for(var i=[],n=0;n<e.length;n+=1)/^['"]/.test(e[n])?i.push(e[n]):/^(true|false|\d+)$/.test(e[n])?i.push(e[n]):i.push(Template7Utils.getCompileVar(e[n],t,r));return i.join(", ")}},Template7Helpers={_partial:function(e,t){var r=this,i=Template7Class.partials[e];return!i||i&&!i.template?"":(i.compiled||(i.compiled=new Template7Class(i.template).compile()),Object.keys(t.hash).forEach(function(e){r[e]=t.hash[e]}),i.compiled(r,t.data,t.root))},escape:function(e){if("string"!=typeof e)throw new Error('Template7: Passed context to "escape" helper should be a string');return Template7Utils.escape(e)},if:function(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r?t.fn(this,t.data):t.inverse(this,t.data)},unless:function(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r?t.inverse(this,t.data):t.fn(this,t.data)},each:function(e,t){var r=e,i="",n=0;if(Template7Utils.isFunction(r)&&(r=r.call(this)),Array.isArray(r)){for(t.hash.reverse&&(r=r.reverse()),n=0;n<r.length;n+=1)i+=t.fn(r[n],{first:0===n,last:n===r.length-1,index:n});t.hash.reverse&&(r=r.reverse())}else for(var a in r)n+=1,i+=t.fn(r[a],{key:a});return n>0?i:t.inverse(this)},with:function(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=e.call(this)),t.fn(r)},join:function(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r.join(t.hash.delimiter||t.hash.delimeter)},js:function js(expression,options){var data=options.data,func,execute=expression;return"index first last key".split(" ").forEach(function(e){if(void 0!==data[e]){var t=new RegExp("this.@"+e,"g"),r=new RegExp("@"+e,"g");execute=execute.replace(t,JSON.stringify(data[e])).replace(r,JSON.stringify(data[e]))}}),options.root&&execute.indexOf("@root")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),execute.indexOf("@global")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Context.Template7.global)),execute.indexOf("../")>=0&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=execute.indexOf("return")>=0?"(function(){"+execute+"})":"(function(){return ("+execute+")})",eval(func).call(this)},js_if:function js_if(expression,options){var data=options.data,func,execute=expression;"index first last key".split(" ").forEach(function(e){if(void 0!==data[e]){var t=new RegExp("this.@"+e,"g"),r=new RegExp("@"+e,"g");execute=execute.replace(t,JSON.stringify(data[e])).replace(r,JSON.stringify(data[e]))}}),options.root&&execute.indexOf("@root")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),execute.indexOf("@global")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Class.global)),execute.indexOf("../")>=0&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=execute.indexOf("return")>=0?"(function(){"+execute+"})":"(function(){return ("+execute+")})";var condition=eval(func).call(this);return condition?options.fn(this,options.data):options.inverse(this,options.data)}};Template7Helpers.js_compare=Template7Helpers.js_if;var Template7Options={},Template7Partials={},script=Template7Context.document.createElement("script");Template7Context.document.head.appendChild(script);var Template7Class=function(e){this.template=e},staticAccessors={options:{configurable:!0},partials:{configurable:!0},helpers:{configurable:!0}};return Template7Class.prototype.compile=function compile(template,depth){function getCompileFn(e,r){return e.content?t.compile(e.content,r):function(){return""}}function getCompileInverse(e,r){return e.inverseContent?t.compile(e.inverseContent,r):function(){return""}}void 0===template&&(template=this.template),void 0===depth&&(depth=1);var t=this;if(t.compiled)return t.compiled;if("string"!=typeof template)throw new Error("Template7: Template must be a string");var stringToBlocks=Template7Utils.stringToBlocks,getCompileVar=Template7Utils.getCompileVar,getCompiledArguments=Template7Utils.getCompiledArguments,blocks=stringToBlocks(template),ctx="ctx_"+depth,data="data_"+depth;if(0===blocks.length)return function(){return""};var resultString="";resultString+=1===depth?"(function ("+ctx+", "+data+", root) {\n":"(function ("+ctx+", "+data+") {\n",1===depth&&(resultString+="function isArray(arr){return Array.isArray(arr);}\n",resultString+="function isFunction(func){return (typeof func === 'function');}\n",resultString+='function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n',resultString+="root = root || ctx_1 || {};\n"),resultString+="var r = '';\n";var i;for(i=0;i<blocks.length;i+=1){var block=blocks[i];if("plain"!==block.type){var variable=void 0,compiledArguments=void 0;if("variable"===block.type&&(variable=getCompileVar(block.contextName,ctx,data),resultString+="r += c("+variable+", "+ctx+");"),"helper"===block.type){var parents=void 0;if("ctx_1"!==ctx){for(var level=ctx.split("_")[1],parentsString="ctx_"+(level-1),j=level-2;j>=1;j-=1)parentsString+=", ctx_"+j;parents="["+parentsString+"]"}else parents="["+ctx+"]";var dynamicHelper=void 0;if(0===block.helperName.indexOf("[")&&(block.helperName=getCompileVar(block.helperName.replace(/[[\]]/g,""),ctx,data),dynamicHelper=!0),dynamicHelper||block.helperName in Template7Helpers)compiledArguments=getCompiledArguments(block.contextName,ctx,data),resultString+="r += (Template7Helpers"+(dynamicHelper?"["+block.helperName+"]":"."+block.helperName)+").call("+ctx+", "+(compiledArguments&&compiledArguments+", ")+"{hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});";else{if(block.contextName.length>0)throw new Error('Template7: Missing helper: "'+block.helperName+'"');variable=getCompileVar(block.helperName,ctx,data),resultString+="if ("+variable+") {",resultString+="if (isArray("+variable+")) {",resultString+="r += (Template7Helpers.each).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});",resultString+="}else {",resultString+="r += (Template7Helpers.with).call("+ctx+", "+variable+", {hash:"+JSON.stringify(block.hash)+", data: "+data+" || {}, fn: "+getCompileFn(block,depth+1)+", inverse: "+getCompileInverse(block,depth+1)+", root: root, parents: "+parents+"});",resultString+="}}"}}}else resultString+="r +='"+block.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return resultString+="\nreturn r;})",1===depth?(t.compiled=eval(resultString),t.compiled):resultString},staticAccessors.options.get=function(){return Template7Options},staticAccessors.partials.get=function(){return Template7Partials},staticAccessors.helpers.get=function(){return Template7Helpers},Object.defineProperties(Template7Class,staticAccessors),Template7.registerHelper=function(e,t){Template7Class.helpers[e]=t},Template7.unregisterHelper=function(e){Template7Class.helpers[e]=void 0,delete Template7Class.helpers[e]},Template7.registerPartial=function(e,t){Template7Class.partials[e]={template:t}},Template7.unregisterPartial=function(e){Template7Class.partials[e]&&(Template7Class.partials[e]=void 0,delete Template7Class.partials[e])},Template7.compile=function(e,t){return new Template7Class(e,t).compile()},Template7.options=Template7Class.options,Template7.helpers=Template7Class.helpers,Template7.partials=Template7Class.partials,Template7});
//# sourceMappingURL=template7.min.js.map
window.shortname = function (title){
  title =""+title;
  return title?title.make_slug().split(/-/).map(function(word){return word.slice(0,1)}).join(""):"";
};

String.prototype.shortname = function(){
    return shortname(this.toString());
};

(function(){
var ChuSo=new Array(" khng "," mt "," hai "," ba "," bn "," nm "," su "," by "," tm "," chn ");
var Tien=new Array( "", " nghn", " triu", " t", " nghn t", " triu t");

//1. Hm c s c ba ch s;
function DocSo3ChuSo(baso)
{
    var tram;
    var chuc;
    var donvi;
    var KetQua="";
    tram=parseInt(baso/100);
    chuc=parseInt((baso%100)/10);
    donvi=baso%10;
    if(tram==0 && chuc==0 && donvi==0) return "";
    if(tram!=0)
    {
        KetQua += ChuSo[tram] + " trm ";
        if ((chuc == 0) && (donvi != 0)) KetQua += " linh ";
    }
    if ((chuc != 0) && (chuc != 1))
    {
            KetQua += ChuSo[chuc] + " mi";
            if ((chuc == 0) && (donvi != 0)) KetQua = KetQua + " linh ";
    }
    if (chuc == 1) KetQua += " mi ";
    switch (donvi)
    {
        case 1:
            if ((chuc != 0) && (chuc != 1))
            {
                KetQua += " mt ";
            }
            else
            {
                KetQua += ChuSo[donvi];
            }
            break;
        case 5:
            if (chuc == 0)
            {
                KetQua += ChuSo[donvi];
            }
            else
            {
                KetQua += " lm ";
            }
            break;
        default:
            if (donvi != 0)
            {
                KetQua += ChuSo[donvi];
            }
            break;
        }
    return KetQua;
}

//2. Hm c s thnh ch (S dng hm c s c ba ch s)

window.DocTienBangChu=function(SoTien){
    var lan=0;
    var i=0;
    var so=0;
    var KetQua="";
    var tmp="";
    var ViTri = [];
    if(SoTien<0) return "S tin m !";
    if(SoTien==0) return "Khng ng !";
    if(SoTien>0)
    {
        so=SoTien;
    }
    else
    {
        so = -SoTien;
    }
    if (SoTien > 8999999999999999)
    {
        //SoTien = 0;
        return "S qu ln!";
    }
    ViTri[5] = Math.floor(so / 1000000000000000);
    if(isNaN(ViTri[5]))
        ViTri[5] = "0";
    so = so - parseFloat(ViTri[5].toString()) * 1000000000000000;
    ViTri[4] = Math.floor(so / 1000000000000);
     if(isNaN(ViTri[4]))
        ViTri[4] = "0";
    so = so - parseFloat(ViTri[4].toString()) * 1000000000000;
    ViTri[3] = Math.floor(so / 1000000000);
     if(isNaN(ViTri[3]))
        ViTri[3] = "0";
    so = so - parseFloat(ViTri[3].toString()) * 1000000000;
    ViTri[2] = parseInt(so / 1000000);
     if(isNaN(ViTri[2]))
        ViTri[2] = "0";
    ViTri[1] = parseInt((so % 1000000) / 1000);
     if(isNaN(ViTri[1]))
        ViTri[1] = "0";
    ViTri[0] = parseInt(so % 1000);
  if(isNaN(ViTri[0]))
        ViTri[0] = "0";
    if (ViTri[5] > 0)
    {
        lan = 5;
    }
    else if (ViTri[4] > 0)
    {
        lan = 4;
    }
    else if (ViTri[3] > 0)
    {
        lan = 3;
    }
    else if (ViTri[2] > 0)
    {
        lan = 2;
    }
    else if (ViTri[1] > 0)
    {
        lan = 1;
    }
    else
    {
        lan = 0;
    }
    for (i = lan; i >= 0; i--)
    {
       tmp = DocSo3ChuSo(ViTri[i]);
       KetQua += tmp;
       if (ViTri[i] > 0) KetQua += Tien[i];
       if ((i > 0) && (tmp.length > 0)) KetQua += ',';//&& (!string.IsNullOrEmpty(tmp))
    }
   if (KetQua.substring(KetQua.length - 1) == ',')
   {
        KetQua = KetQua.substring(0, KetQua.length - 1);
   }
   KetQua = KetQua.substring(1,2).toUpperCase()+ KetQua.substring(2);
   return KetQua;//.substring(0, 1);//.toUpperCase();// + KetQua.substring(1);
}
})();
(function(win) {
	win.time_left = function (countDownDate) {
      countDownDate = typeof countDownDate=="object"?countDownDate:new Date(countDownDate); 
      // Get today's date and time
      var now = Date.now();

      // Find the distance between now and the count down date
      var distance = countDownDate.getTime()  - now;

      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);
     

      // If the count down is finished, write some text
      if (distance < 0) {
         
      }

      return {
         days:days,
         hours:hours,
         minutes:minutes,
         seconds:seconds,
         render : function(){
           var s = this.days + "d " + this.hours + "h "+ this.minutes + "m " + this.seconds + "s left";
            switch(time_left.lang){
              case "vn":
                 s= "cn "+this.days + "ngy " + this.hours + "gi "+ this.minutes + "pht " + this.seconds + "giy ";
              break;
            }
           return s;
         },
         rendershort : function(){
          var s= this.days + "d " + this.hours + ":"+ this.minutes + ":" + this.seconds+" left";
           switch(time_left.lang){
              case "vn":
                 s= "cn "+this.days + "ngy " + this.hours + ":"+ this.minutes + ":" + this.seconds;
              break;
            }
          return s;
         }
      }
  };
  win.time_left.lang = "vn";

  win.startTimer = function (display) {
       var start = Date.now(),
           diff,
           minutes,
           seconds,id;

        var methods = {
         clear: function(){
            if(id)clearInterval(id);
            id =null;
            return this;
         },
         start: function(ss){
            duration = ss;
            this.stop();
            timer();
            id = setInterval(timer, 1000);
            return this;
         }
       };
       function timer() {
           // get the number of seconds that have elapsed since 
           // startTimer() was called
           diff = duration - (((Date.now() - start) / 1000) | 0);

           // does the same job as parseInt truncates the float
           minutes = (diff / 60) | 0;
           seconds = (diff % 60) | 0;

           minutes = minutes < 10 ? "0" + minutes : minutes;
           seconds = seconds < 10 ? "0" + seconds : seconds;

            if(typeof display =="function"){
               display(minutes,seconds,0);
            }else{
               display.textContent = minutes + ":" + seconds; 
            }

           if (diff <= 0) {
               methods.clear();
                if(typeof display =="function"){
                   display(minutes,seconds,1);
                }else{
                   display.textContent = minutes + ":" + seconds; 
                }
               // add one second so that the count down starts at the full duration
               // example 05:00 not 04:59
               // start = Date.now() + 1000;
              
           }
       };
       // we don't want to wait a full second before the timer starts
        
       return methods;
   };
/*
var fiveMinutes = 60 * 5,
        display = document.querySelector('#time');
    startTimer(fiveMinutes, display);
 */
})(window);
(function ( $, window, document, undefined ) {
   
   var pluginName = "timerClose",

        defaults={
        	onClick: function(v){
        	 
        	},
        	timer:0
        };
    
      function Plugin( element, options ) {

        this.element = element;

        this.$elem = $(this.element);

        this.options = $.extend( {}, defaults, options );

        this._defaults = defaults;

        this._name = pluginName;
        var that = this;
            var settings = this.options;
      this.$elem.data(pluginName,this);
      
      var ele = $(element);
      ////////////
      this.options.timer = ele.attr("data-timer")?ele.attr("data-timer")*1:this.options.timer;

      ele.on("click",function(e){
        if(!id){
            that.options.onClick.call(this,e);
        }
      });
      var id = null;
      var txt = ele.html();
      this.run = function(timer){
      	 this.options.timer  =timer;
         var c =timer;
         ele.html(c);
        id=  setInterval(function(){
            if(--c<=0){
                clearInterval(id);
                id = null;
                ele.html(txt);
                ele.removeAttr('disabled');
            }else{
                ele.html(c);
            }
         },1000);
      };
      if(this.options.timer){
        ele.attr('disabled','disabled');
        this.run(this.options.timer);
      }
    }
    $.fn[pluginName] = function ( options ) {
      var lists  = this,
            retval = this;
        var params =   arguments;
        lists.each(function()
        {
            var plugin = $(this).data(pluginName);
            if (!plugin) {
                $(this).data(pluginName, new Plugin(this, options));
                $(this).data(pluginName+"-id", new Date().getTime());
            }else {
                if (typeof options === 'string' && typeof plugin[options] === 'function') {
                    retval = plugin[options].apply(plugin,Array.prototype.slice.call(params,1));
                }
            }
        });
        return retval || lists;
    };
})( jQuery, window, document );

/*
https://kamranahmed.info/toast
$.toast('Here you can put the text of the toast')
 */
"function"!=typeof Object.create&&(Object.create=function(t){function o(){}return o.prototype=t,new o}),function(t,o){"use strict";var i={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(o){this.prepareOptions(o,t.toast.options),this.process()},prepareOptions:function(o,i){var s={};"string"==typeof o||o instanceof Array?s.text=o:s=o,this.options=t.extend({},i,s)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var o="";if(this._toastEl=this._toastEl||t("<div></div>",{class:"jq-toast-single"}),o+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(o+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+='<ul class="jq-toast-ul">';for(var i=0;i<this.options.text.length;i++)o+='<li class="jq-toast-li" id="jq-toast-item-'+i+'">'+this.options.text[i]+"</li>";o+="</ul>"}else this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+=this.options.text;this._toastEl.html(o),!1!==this.options.bgColor&&this._toastEl.css("background-color",this.options.bgColor),!1!==this.options.textColor&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),!1!==this.options.icon&&(this._toastEl.addClass("jq-has-icon"),-1!==t.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon))},position:function(){"string"==typeof this.options.position&&-1!==t.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:t(o).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var t=this;this._toastEl.on("afterShown",(function(){t.processLoader()})),this._toastEl.find(".close-jq-toast-single").on("click",(function(o){o.preventDefault(),"fade"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut((function(){t._toastEl.trigger("afterHidden")}))):"slide"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp((function(){t._toastEl.trigger("afterHidden")}))):(t._toastEl.trigger("beforeHide"),t._toastEl.hide((function(){t._toastEl.trigger("afterHidden")})))})),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",(function(){t.options.beforeShow()})),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",(function(){t.options.afterShown()})),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",(function(){t.options.beforeHide()})),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",(function(){t.options.afterHidden()}))},addToDom:function(){var o=t(".jq-toast-wrap");if(0===o.length?(o=t("<div></div>",{class:"jq-toast-wrap"}),t("body").append(o)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&o.empty(),o.find(".jq-toast-single:hidden").remove(),o.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)){var i=o.find(".jq-toast-single").length-this.options.stack;i>0&&t(".jq-toast-wrap").find(".jq-toast-single").slice(0,i).remove()}this._container=o},canAutoHide:function(){return!1!==this.options.hideAfter&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||!1===this.options.loader)return!1;var t=this._toastEl.find(".jq-toast-loader"),o=(this.options.hideAfter-400)/1e3+"s",i=this.options.loaderBg,s=t.attr("style")||"";s=s.substring(0,s.indexOf("-webkit-transition")),s+="-webkit-transition: width "+o+" ease-in;                       -o-transition: width "+o+" ease-in;                       transition: width "+o+" ease-in;                       background-color: "+i+";",t.attr("style",s).addClass("jq-toast-loaded")},animate:function(){var t=this;if(this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn((function(){t._toastEl.trigger("afterShown")})):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown((function(){t._toastEl.trigger("afterShown")})):this._toastEl.show((function(){t._toastEl.trigger("afterShown")})),this.canAutoHide()){t=this;o.setTimeout((function(){"fade"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut((function(){t._toastEl.trigger("afterHidden")}))):"slide"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp((function(){t._toastEl.trigger("afterHidden")}))):(t._toastEl.trigger("beforeHide"),t._toastEl.hide((function(){t._toastEl.trigger("afterHidden")})))}),this.options.hideAfter)}},reset:function(o){"all"===o?t(".jq-toast-wrap").remove():this._toastEl.remove()},update:function(t){this.prepareOptions(t,this.options),this.setup(),this.bindToast()}};t.toast=function(t){var o=Object.create(i);return o.init(t,this),{reset:function(t){o.reset(t)},update:function(t){o.update(t)}}},t.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}}(jQuery,window,document);
(function(win){
	var id_key = "google_translate_element";
	 
	 // 
	if($('#'+id_key).length)return;
	
	 win.googleTranslateElementInit = function(){
	  // 
	  if(win.innerWidth<1200){
	  	$(document).trigger("translate_change");
	  }

	    new google.translate.TranslateElement({autoDisplay: false,pageLanguage: $("body").data("lang"),includedLanguages: 'vi,ar,en,es,jv,ko,pa,pt,ru,zh-CN,th,fr,ja,lo,ms',layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT}, id_key);
	     setTimeout(function(){
	     
	      $("#"+id_key).removeClass("hid").addClass('notranslate');

	      var a = $(".skiptranslate.goog-te-gadget > div").eq(0);
	      a.insertBefore($(".skiptranslate.goog-te-gadget"));
	      setTimeout(function(){
	            $("select.goog-te-combo option").each(function(i,v){
	               if(v.value==""){
	                 v.text = "English";
	               }
	            });
	        },1000);
	     },500);
	}

	function GTranslateFireEvent(a, b) {
	try {
		if (document.createEvent) {
			var c = document.createEvent("HTMLEvents");
			c.initEvent(b, true, true);
			a.dispatchEvent(c)
		} else {
			var c = document.createEventObject();
			a.fireEvent('on' + b, c)
		}
	} catch(e) {}
}

win.doGoogleLanguageTranslator = function(a) {
	if (a.value) a = a.value;
	if (a == '') return;
	var b = a.split('|')[1];
	var c;
	var d = document.getElementsByTagName('select');
	for (var i = 0; i < d.length; i++) if (d[i].className == 'goog-te-combo') c = d[i];
	if (document.getElementById(id_key) == null || document.getElementById(id_key).innerHTML.length == 0 || c.length == 0 || c.innerHTML.length == 0) {
		setTimeout(function () {
			doGoogleLanguageTranslator(a)
		},
		100)
	} else {
		c.value = b;
		GTranslateFireEvent(c, 'change');
		GTranslateFireEvent(c, 'change')
	}
}

	//main go
	win.GoogleLang = function(options){
		 $("body").removeAttr("translate").append('<div id="'+id_key+'" style="" class="hid"></div><style>body{top:0!important;}body>.skiptranslate{display:none;}.app-tab{top: 0px!important;}.skiptranslate.goog-te-gadget span{display:none;}.skiptranslate.goog-te-gadget .h{width: 70px;position: absolute;background: #f4f7f8;top: 0;z-index: 10;height: 27px;}.hid{text-indent: -9999px;}.skiptranslate.goog-te-gadget{text-indent: -9999px;} @media (max-width: 768px) {#'+id_key+'{left: 0;text-align: center;}}</style>');
		loadJS("https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit",function(){
			// delete win.googleTranslateElementInit;
		});
	};

	 
	 win.sdk = win.sdk||{};
	 win.sdk.google ={};
      win.sdk.google.translate = {
      	 run :function(){
      	 	 
      	 },
      	 lang: function(l){
      	 	 
      	 },
      	 dom: function(ele,func){
      	 	 (typeof ele=="string"?$(ele):ele).append('<div id="'+id_key+'" style="" class="hid"></div>');
      	 }
      }
     function readCookie(name) {
    var c = document.cookie.split('; '),
    cookies = {}, i, C;

    for (i = c.length - 1; i >= 0; i--) {
        C = c[i].split('=');
        cookies[C[0]] = C[1];
     }

     return cookies[name];
}
console.log(readCookie('googtrans'));
    win.pickerLanguage = (function(){
        // var storage= StorageObject("favorite");
        // $(document).on("onUserSynce_load",function(e,config){
        //     if(config.favorite){
        //         for(var i in config.favorite){
        //             storage[i] = config.favorite[i];
        //         }
        //     }
        // });
        // $(document).on("onUserSynce_save",function(e,data){
        //     data.favorite = storage.data();
        // });
        return function(options){
        	var b = readCookie('googtrans');
            options = $.extend({title:"Ngn ng",lang:b?b.split("/")[2]:"vi",data:[
            	  {id:"ja",img:"https://ngocthanhhealthy.com/assets/images/jap.png",name:"Japanese"},
            	  {id:"ko",img:"https://ngocthanhhealthy.com/assets/images/ko.png",name:"Korean"},
            	  {id:"en",img:"https://ngocthanhhealthy.com/assets/images/ame.png",name:"English"},
            	  {id:"zh-CN",img:"https://ngocthanhhealthy.com/assets/images/tq.png",name:"Chinese"},
            	  {id:"vi",img:"https://ngocthanhhealthy.com/assets/images/vie.png",name:"Vietnamese"},
            	]},options,true);
            var sheet = openSheet({
                data:`<form  class="formlistfavorite screen" style="padding: 0;">
                    <div class="two">
                        <h2>${options.title}</h2>
                    </div>
                    <div class="one" translate="no"> 
	                    <div class="list lists list-outline-ios list-strong-ios list-dividers-ios" style="min-height: 150px;">
					        <ul class="groupactive">
					            ${options.data.map(function(v){
					            	return `<li data-lang="${v.id}" class="${v.id==options.lang?"active":""}">
					            <a href="" class="item-link item-content">
					              <div class="item-media"><img src="${v.img}" width="24"> </div>
					              <div class="item-inner">
					                <div class="item-title">${v.name}</div>
					                <div class="item-after">
					                
					                </div>
					              </div>
					            </a>
					          </li>`;
					            }).join("")}
	          				</ul>
	          			</div>
                    </div>

                    <div class="flex-row two"> 
                        <span class="button button-fill btnconfirm flex">Xc nhn</span>
                    </div>
                </form>
                `,
                beforeOpen: function(sheetId) {
                   var me = $("#"+sheetId);


                   if($('#'+id_key).length==0){
                   		GoogleLang();   
                   }

                     
                   me.find(".btnconfirm").on("click",function(){
                   		var lang = me.find(".list li.active").attr("data-lang");
                        doGoogleLanguageTranslator('vi|'+lang);
                        sheet.close();
                   });

                }
            });
        }
    })();
  /*
  <img loading="lazy" class="inline-block" src="assets/images/vie.png" onclick="doGoogleLanguageTranslator('vi|vi'); return false;" alt="">

   */
})(window);
;(function ( $, window, document, undefined ) {
    $(document).ready(function(){
      $("body").append('<style type="text/css">.a-tree{position: relative;max-width: 400px;}.a-tree .refresh{position: absolute;right: 0;top: 0;}.tree-list{min-height: 200px;box-shadow: 0 0 0 1px #cecece;padding:8px;border-radius: 8px;}.a-tree>ul{padding-left: 0;}.a-tree ul{list-style: none;}.a-tree .refresh{position: absolute;right: 10px;top: -10px;z-index: 1;}<\/style>');
    });

    /*
    [{"id":"6","displayName":"test","hasChild":"0"}]
     */
    var pluginName = "Ahlutree",

        defaults={
      data: function () { },
      onDemandData: function () { },
      render : null,
      languages:{
        en:{
            refresh: "Refresh"
        }
      },
      lang : "en"
    };

    function Plugin( element, options ) {

        this.element = element;

        this.$elem = $(this.element);

        this.options = $.extend( {}, defaults, options );

        this._defaults = defaults;

        this._name = pluginName;
        var that = this;
        var settings = this.options;
        this.$elem.data(pluginName,this);

        this.$elem.addClass("a-tree");

        function lang(k){
            var lang = settings.lang?settings.lang:"en";
            return settings.languages[lang][k]?settings.languages[lang][k]:k;
        }


        var btn_refresh = this.$elem.find(".refresh");
        if(btn_refresh.length==0){
            btn_refresh = $('<div class="refresh"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-refresh" aria-hidden="true"></i> '+lang('refresh')+'</button></div>');
            this.$elem.append(btn_refresh);
        }
        
        function GetData(f) {
          return settings.data(f);
        }
        
        function createTree(data, ulClassName) {
          var parentUl = document.createElement('ul');
          parentUl.className = ulClassName;
          data.forEach(function(element){
            var liElement = document.createElement('li');
            liElement.setAttribute('data-hasChild', parseInt(element.hasChild)?true:false);
            liElement.setAttribute('data-id', element.id);
            liElement.setAttribute('data-isLoaded', element.isLoaded?true:false);
            if (element.hasChild!=0) {
              var spanElement = document.createElement('span');
              spanElement.innerHTML = typeof settings.render==="function"? settings.render(element):element.displayName;
              spanElement.className = 'tv-caret';
              liElement.append(spanElement);

                if(element.children&&element.children.length>0){
                liElement.append(createTree(element.children, 'tv-nested'));
              }
            } else {
              liElement.innerHTML = typeof settings.render==="function"? settings.render(element):element.displayName;
            }

            
            parentUl.append(liElement);
          });
          return parentUl;
        }
        var me = this.$elem;
        
        
        me.off('click','.tv-caret').on('click','.tv-caret', function () {
          var $this = $(this);
          var li = $this.parent('li');
          var id  = li.data("id");
          var active = li.data("isloaded");
          if (!active && id) {
            // fetch data
            settings.onDemandData(id,function(data){
              if(typeof data==="object" && data.length>0){
            var a = createTree(data, 'tv-nested');
                // Append the data
                li.append(a);
                // Set isloaded to true
                li.data("isloaded",true);
                li.find('.tv-nested').toggleClass("active");
                $this.toggleClass("tv-caret-down");
              }
              
            });
          }else{
            li.find('.tv-nested').eq(0).toggleClass("active");
             $this.toggleClass("tv-caret-down");
          }

        });
        me.append('<div class="tree-list"></div>');
        
        me.off('click','.refresh button').on('click','.refresh button', function () {
            me.find('.tree-list').html("");
            GetData(function(data){
              if(typeof data==="object" && data.length>0){
                me.find('.tree-list').append(createTree(data, 'tv-ul'));
              }
            });
        });
        me.find('.refresh button').trigger('click');

        // GetData(function(data){
        //   if(typeof data==="object" && data.length>0){
        //     me.append(createTree(data, 'tv-ul'));
        //   }
        // });
    }   


$.fn[pluginName] = function ( options ) {
      var lists  = this,
            retval = this;
        var params =   arguments;
        lists.each(function()
        {
            var plugin = $(this).data(pluginName);
            if (!plugin) {
                $(this).data(pluginName, new Plugin(this, options));
                $(this).data(pluginName+"-id", new Date().getTime());
            }else {
                if (typeof options === 'string' && typeof plugin[options] === 'function') {
                    retval = plugin[options].apply(plugin,Array.prototype.slice.call(params,1));
                }
            }
        });
        return retval || lists;
    };
})( jQuery, window, document );

/*
$('.treeview_container').Ahlutree({
           languages:{
            en:{
                refresh: "Refresh"
            }
          },
          lang : "en",

          render : function(data){
            return "<a data-id='"+data.id+"' href='javascript:void(0)'><strong>"+data.fullname+"</strong>"+(data.hasChild!='0'?`(${data.hasChild})`:'')+" </a> <a class='detail btn btn-primary btn-xs pickerProfile' data-info='"+JSON.stringify(data)+"' href='#'>Chi tit</a>";
          },
          data: function(callback){ 
            showLoader(2);
            win.user.wait(function(){ 
                userSDK.tree.treeF(0,function(data){
                  callback(Object.values(data));
                  // console.log(data);
                },true);
            });
          },
          onDemandData: function (id,callback) {
            showLoader(2);
            userSDK.tree.treeF(id,function(res){
                 callback(Object.values(res));
            },true);
          }
        });
 */
/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("bloodhound", [ "jquery" ], function(a0) {
            return root["Bloodhound"] = factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        root["Bloodhound"] = factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var VERSION = "0.11.1";
    var tokenizers = function() {
        "use strict";
        return {
            nonword: nonword,
            whitespace: whitespace,
            obj: {
                nonword: getObjTokenizer(nonword),
                whitespace: getObjTokenizer(whitespace)
            }
        };
        function whitespace(str) {
            str = _.toStr(str);
            return str ? str.split(/\s+/) : [];
        }
        function nonword(str) {
            str = _.toStr(str);
            return str ? str.split(/\W+/) : [];
        }
        function getObjTokenizer(tokenizer) {
            return function setKey(keys) {
                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);
                return function tokenize(o) {
                    var tokens = [];
                    _.each(keys, function(k) {
                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));
                    });
                    return tokens;
                };
            };
        }
    }();
    var LruCache = function() {
        "use strict";
        function LruCache(maxSize) {
            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
            this.reset();
            if (this.maxSize <= 0) {
                this.set = this.get = $.noop;
            }
        }
        _.mixin(LruCache.prototype, {
            set: function set(key, val) {
                var tailItem = this.list.tail, node;
                if (this.size >= this.maxSize) {
                    this.list.remove(tailItem);
                    delete this.hash[tailItem.key];
                    this.size--;
                }
                if (node = this.hash[key]) {
                    node.val = val;
                    this.list.moveToFront(node);
                } else {
                    node = new Node(key, val);
                    this.list.add(node);
                    this.hash[key] = node;
                    this.size++;
                }
            },
            get: function get(key) {
                var node = this.hash[key];
                if (node) {
                    this.list.moveToFront(node);
                    return node.val;
                }
            },
            reset: function reset() {
                this.size = 0;
                this.hash = {};
                this.list = new List();
            }
        });
        function List() {
            this.head = this.tail = null;
        }
        _.mixin(List.prototype, {
            add: function add(node) {
                if (this.head) {
                    node.next = this.head;
                    this.head.prev = node;
                }
                this.head = node;
                this.tail = this.tail || node;
            },
            remove: function remove(node) {
                node.prev ? node.prev.next = node.next : this.head = node.next;
                node.next ? node.next.prev = node.prev : this.tail = node.prev;
            },
            moveToFront: function(node) {
                this.remove(node);
                this.add(node);
            }
        });
        function Node(key, val) {
            this.key = key;
            this.val = val;
            this.prev = this.next = null;
        }
        return LruCache;
    }();
    var PersistentStorage = function() {
        "use strict";
        var LOCAL_STORAGE;
        try {
            LOCAL_STORAGE = window.localStorage;
            LOCAL_STORAGE.setItem("~~~", "!");
            LOCAL_STORAGE.removeItem("~~~");
        } catch (err) {
            LOCAL_STORAGE = null;
        }
        function PersistentStorage(namespace, override) {
            this.prefix = [ "__", namespace, "__" ].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
            this.ls = override || LOCAL_STORAGE;
            !this.ls && this._noop();
        }
        _.mixin(PersistentStorage.prototype, {
            _prefix: function(key) {
                return this.prefix + key;
            },
            _ttlKey: function(key) {
                return this._prefix(key) + this.ttlKey;
            },
            _noop: function() {
                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
            },
            _safeSet: function(key, val) {
                try {
                    this.ls.setItem(key, val);
                } catch (err) {
                    if (err.name === "QuotaExceededError") {
                        this.clear();
                        this._noop();
                    }
                }
            },
            get: function(key) {
                if (this.isExpired(key)) {
                    this.remove(key);
                }
                return decode(this.ls.getItem(this._prefix(key)));
            },
            set: function(key, val, ttl) {
                if (_.isNumber(ttl)) {
                    this._safeSet(this._ttlKey(key), encode(now() + ttl));
                } else {
                    this.ls.removeItem(this._ttlKey(key));
                }
                return this._safeSet(this._prefix(key), encode(val));
            },
            remove: function(key) {
                this.ls.removeItem(this._ttlKey(key));
                this.ls.removeItem(this._prefix(key));
                return this;
            },
            clear: function() {
                var i, keys = gatherMatchingKeys(this.keyMatcher);
                for (i = keys.length; i--; ) {
                    this.remove(keys[i]);
                }
                return this;
            },
            isExpired: function(key) {
                var ttl = decode(this.ls.getItem(this._ttlKey(key)));
                return _.isNumber(ttl) && now() > ttl ? true : false;
            }
        });
        return PersistentStorage;
        function now() {
            return new Date().getTime();
        }
        function encode(val) {
            return JSON.stringify(_.isUndefined(val) ? null : val);
        }
        function decode(val) {
            return $.parseJSON(val);
        }
        function gatherMatchingKeys(keyMatcher) {
            var i, key, keys = [], len = LOCAL_STORAGE.length;
            for (i = 0; i < len; i++) {
                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {
                    keys.push(key.replace(keyMatcher, ""));
                }
            }
            return keys;
        }
    }();
    var Transport = function() {
        "use strict";
        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);
        function Transport(o) {
            o = o || {};
            this.cancelled = false;
            this.lastReq = null;
            this._send = o.transport;
            this._get = o.limiter ? o.limiter(this._get) : this._get;
            this._cache = o.cache === false ? new LruCache(0) : sharedCache;
        }
        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
            maxPendingRequests = num;
        };
        Transport.resetCache = function resetCache() {
            sharedCache.reset();
        };
        _.mixin(Transport.prototype, {
            _fingerprint: function fingerprint(o) {
                o = o || {};
                return o.url + o.type + $.param(o.data || {});
            },
            _get: function(o, cb) {
                var that = this, fingerprint, jqXhr;
                fingerprint = this._fingerprint(o);
                if (this.cancelled || fingerprint !== this.lastReq) {
                    return;
                }
                if (jqXhr = pendingRequests[fingerprint]) {
                    jqXhr.done(done).fail(fail);
                } else if (pendingRequestsCount < maxPendingRequests) {
                    pendingRequestsCount++;
                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0);
                }
                function done(resp) {
                    cb(null, resp);
                    that._cache.set(fingerprint, resp);
                }
                function fail() {
                    cb(true);
                }
                function always() {
                    pendingRequestsCount--;
                    delete pendingRequests[fingerprint];
                    if (that.onDeckRequestArgs) {
                        that._get.apply(that, that.onDeckRequestArgs);
                        that.onDeckRequestArgs = null;
                    }
                }
            },
            get: function(o, cb) {
                var resp, fingerprint;
                cb = cb || $.noop;
                o = _.isString(o) ? {
                    url: o
                } : o || {};
                fingerprint = this._fingerprint(o);
                this.cancelled = false;
                this.lastReq = fingerprint;
                if (resp = this._cache.get(fingerprint)) {
                    cb(null, resp);
                } else {
                    this._get(o, cb);
                }
            },
            cancel: function() {
                this.cancelled = true;
            }
        });
        return Transport;
    }();
    var SearchIndex = window.SearchIndex = function() {
        "use strict";
        var CHILDREN = "c", IDS = "i";
        function SearchIndex(o) {
            o = o || {};
            if (!o.datumTokenizer || !o.queryTokenizer) {
                $.error("datumTokenizer and queryTokenizer are both required");
            }
            this.identify = o.identify || _.stringify;
            this.datumTokenizer = o.datumTokenizer;
            this.queryTokenizer = o.queryTokenizer;
            this.reset();
        }
        _.mixin(SearchIndex.prototype, {
            bootstrap: function bootstrap(o) {
                this.datums = o.datums;
                this.trie = o.trie;
            },
            add: function(data) {
                var that = this;
                data = _.isArray(data) ? data : [ data ];
                _.each(data, function(datum) {
                    var id, tokens;
                    that.datums[id = that.identify(datum)] = datum;
                    tokens = normalizeTokens(that.datumTokenizer(datum));
                    _.each(tokens, function(token) {
                        var node, chars, ch;
                        node = that.trie;
                        chars = token.split("");
                        while (ch = chars.shift()) {
                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
                            node[IDS].push(id);
                        }
                    });
                });
            },
            get: function get(ids) {
                var that = this;
                return _.map(ids, function(id) {
                    return that.datums[id];
                });
            },
            search: function search(query) {
                var that = this, tokens, matches;
                tokens = normalizeTokens(this.queryTokenizer(query));
                _.each(tokens, function(token) {
                    var node, chars, ch, ids;
                    if (matches && matches.length === 0) {
                        return false;
                    }
                    node = that.trie;
                    chars = token.split("");
                    while (node && (ch = chars.shift())) {
                        node = node[CHILDREN][ch];
                    }
                    if (node && chars.length === 0) {
                        ids = node[IDS].slice(0);
                        matches = matches ? getIntersection(matches, ids) : ids;
                    } else {
                        matches = [];
                        return false;
                    }
                });
                return matches ? _.map(unique(matches), function(id) {
                    return that.datums[id];
                }) : [];
            },
            all: function all() {
                var values = [];
                for (var key in this.datums) {
                    values.push(this.datums[key]);
                }
                return values;
            },
            reset: function reset() {
                this.datums = {};
                this.trie = newNode();
            },
            serialize: function serialize() {
                return {
                    datums: this.datums,
                    trie: this.trie
                };
            }
        });
        return SearchIndex;
        function normalizeTokens(tokens) {
            tokens = _.filter(tokens, function(token) {
                return !!token;
            });
            tokens = _.map(tokens, function(token) {
                return token.toLowerCase();
            });
            return tokens;
        }
        function newNode() {
            var node = {};
            node[IDS] = [];
            node[CHILDREN] = {};
            return node;
        }
        function unique(array) {
            var seen = {}, uniques = [];
            for (var i = 0, len = array.length; i < len; i++) {
                if (!seen[array[i]]) {
                    seen[array[i]] = true;
                    uniques.push(array[i]);
                }
            }
            return uniques;
        }
        function getIntersection(arrayA, arrayB) {
            var ai = 0, bi = 0, intersection = [];
            arrayA = arrayA.sort();
            arrayB = arrayB.sort();
            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;
            while (ai < lenArrayA && bi < lenArrayB) {
                if (arrayA[ai] < arrayB[bi]) {
                    ai++;
                } else if (arrayA[ai] > arrayB[bi]) {
                    bi++;
                } else {
                    intersection.push(arrayA[ai]);
                    ai++;
                    bi++;
                }
            }
            return intersection;
        }
    }();
    var Prefetch = function() {
        "use strict";
        var keys;
        keys = {
            data: "data",
            protocol: "protocol",
            thumbprint: "thumbprint"
        };
        function Prefetch(o) {
            this.url = o.url;
            this.ttl = o.ttl;
            this.cache = o.cache;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = o.transport;
            this.thumbprint = o.thumbprint;
            this.storage = new PersistentStorage(o.cacheKey);
        }
        _.mixin(Prefetch.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            store: function store(data) {
                if (!this.cache) {
                    return;
                }
                this.storage.set(keys.data, data, this.ttl);
                this.storage.set(keys.protocol, location.protocol, this.ttl);
                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
            },
            fromCache: function fromCache() {
                var stored = {}, isExpired;
                if (!this.cache) {
                    return null;
                }
                stored.data = this.storage.get(keys.data);
                stored.protocol = this.storage.get(keys.protocol);
                stored.thumbprint = this.storage.get(keys.thumbprint);
                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
                return stored.data && !isExpired ? stored.data : null;
            },
            fromNetwork: function(cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                settings = this.prepare(this._settings());
                this.transport(settings).fail(onError).done(onResponse);
                function onError() {
                    cb(true);
                }
                function onResponse(resp) {
                    cb(null, that.transform(resp));
                }
            },
            clear: function clear() {
                this.storage.clear();
                return this;
            }
        });
        return Prefetch;
    }();
    var Remote = function() {
        "use strict";
        function Remote(o) {
            this.url = o.url;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = new Transport({
                cache: o.cache,
                limiter: o.limiter,
                transport: o.transport
            });
        }
        _.mixin(Remote.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            get: function get(query, cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                query = query || "";
                settings = this.prepare(query, this._settings());
                return this.transport.get(settings, onResponse);
                function onResponse(err, resp) {
                    err ? cb([]) : cb(that.transform(resp));
                }
            },
            cancelLastRequest: function cancelLastRequest() {
                this.transport.cancel();
            }
        });
        return Remote;
    }();
    var oParser = function() {
        "use strict";
        return function parse(o) {
            var defaults, sorter;
            defaults = {
                initialize: true,
                identify: _.stringify,
                datumTokenizer: null,
                queryTokenizer: null,
                sufficient: 5,
                sorter: null,
                local: [],
                prefetch: null,
                remote: null
            };
            o = _.mixin(defaults, o || {});
            !o.datumTokenizer && $.error("datumTokenizer is required");
            !o.queryTokenizer && $.error("queryTokenizer is required");
            sorter = o.sorter;
            o.sorter = sorter ? function(x) {
                return x.sort(sorter);
            } : _.identity;
            o.local = _.isFunction(o.local) ? o.local() : o.local;
            o.prefetch = parsePrefetch(o.prefetch);
            o.remote = parseRemote(o.remote);
            return o;
        };
        function parsePrefetch(o) {
            var defaults;
            if (!o) {
                return null;
            }
            defaults = {
                url: null,
                ttl: 24 * 60 * 60 * 1e3,
                cache: true,
                cacheKey: null,
                thumbprint: "",
                prepare: _.identity,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("prefetch requires url to be set");
            o.transform = o.filter || o.transform;
            o.cacheKey = o.cacheKey || o.url;
            o.thumbprint = VERSION + o.thumbprint;
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            return o;
        }
        function parseRemote(o) {
            var defaults;
            if (!o) {
                return;
            }
            defaults = {
                url: null,
                cache: true,
                prepare: null,
                replace: null,
                wildcard: null,
                limiter: null,
                rateLimitBy: "debounce",
                rateLimitWait: 300,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("remote requires url to be set");
            o.transform = o.filter || o.transform;
            o.prepare = toRemotePrepare(o);
            o.limiter = toLimiter(o);
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            delete o.replace;
            delete o.wildcard;
            delete o.rateLimitBy;
            delete o.rateLimitWait;
            return o;
        }
        function toRemotePrepare(o) {
            var prepare, replace, wildcard;
            prepare = o.prepare;
            replace = o.replace;
            wildcard = o.wildcard;
            if (prepare) {
                return prepare;
            }
            if (replace) {
                prepare = prepareByReplace;
            } else if (o.wildcard) {
                prepare = prepareByWildcard;
            } else {
                prepare = idenityPrepare;
            }
            return prepare;
            function prepareByReplace(query, settings) {
                settings.url = replace(settings.url, query);
                return settings;
            }
            function prepareByWildcard(query, settings) {
                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
                return settings;
            }
            function idenityPrepare(query, settings) {
                return settings;
            }
        }
        function toLimiter(o) {
            var limiter, method, wait;
            limiter = o.limiter;
            method = o.rateLimitBy;
            wait = o.rateLimitWait;
            if (!limiter) {
                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
            }
            return limiter;
            function debounce(wait) {
                return function debounce(fn) {
                    return _.debounce(fn, wait);
                };
            }
            function throttle(wait) {
                return function throttle(fn) {
                    return _.throttle(fn, wait);
                };
            }
        }
        function callbackToDeferred(fn) {
            return function wrapper(o) {
                var deferred = $.Deferred();
                fn(o, onSuccess, onError);
                return deferred;
                function onSuccess(resp) {
                    _.defer(function() {
                        deferred.resolve(resp);
                    });
                }
                function onError(err) {
                    _.defer(function() {
                        deferred.reject(err);
                    });
                }
            };
        }
    }();
    var Bloodhound = function() {
        "use strict";
        var old;
        old = window && window.Bloodhound;
        function Bloodhound(o) {
            o = oParser(o);
            this.sorter = o.sorter;
            this.identify = o.identify;
            this.sufficient = o.sufficient;
            this.local = o.local;
            this.remote = o.remote ? new Remote(o.remote) : null;
            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
            this.index = new SearchIndex({
                identify: this.identify,
                datumTokenizer: o.datumTokenizer,
                queryTokenizer: o.queryTokenizer
            });
            o.initialize !== false && this.initialize();
        }
        Bloodhound.noConflict = function noConflict() {
            window && (window.Bloodhound = old);
            return Bloodhound;
        };
        Bloodhound.tokenizers = tokenizers;
        _.mixin(Bloodhound.prototype, {
            __ttAdapter: function ttAdapter() {
                var that = this;
                return this.remote ? withAsync : withoutAsync;
                function withAsync(query, sync, async) {
                    return that.search(query, sync, async);
                }
                function withoutAsync(query, sync) {
                    return that.search(query, sync);
                }
            },
            _loadPrefetch: function loadPrefetch() {
                var that = this, deferred, serialized;
                deferred = $.Deferred();
                if (!this.prefetch) {
                    deferred.resolve();
                } else if (serialized = this.prefetch.fromCache()) {
                    this.index.bootstrap(serialized);
                    deferred.resolve();
                } else {
                    this.prefetch.fromNetwork(done);
                }
                return deferred.promise();
                function done(err, data) {
                    if (err) {
                        return deferred.reject();
                    }
                    that.add(data);
                    that.prefetch.store(that.index.serialize());
                    deferred.resolve();
                }
            },
            _initialize: function initialize() {
                var that = this, deferred;
                this.clear();
                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);
                return this.initPromise;
                function addLocalToIndex() {
                    that.add(that.local);
                }
            },
            initialize: function initialize(force) {
                return !this.initPromise || force ? this._initialize() : this.initPromise;
            },
            add: function add(data) {
                this.index.add(data);
                return this;
            },
            get: function get(ids) {
                ids = _.isArray(ids) ? ids : [].slice.call(arguments);
                return this.index.get(ids);
            },
            search: function search(query, sync, async) {
                var that = this, local;
                local = this.sorter(this.index.search(query));
                sync(this.remote ? local.slice() : local);
                if (this.remote && local.length < this.sufficient) {
                    this.remote.get(query, processRemote);
                } else if (this.remote) {
                    this.remote.cancelLastRequest();
                }
                return this;
                function processRemote(remote) {
                    var nonDuplicates = [];
                    _.each(remote, function(r) {
                        !_.some(local, function(l) {
                            return that.identify(r) === that.identify(l);
                        }) && nonDuplicates.push(r);
                    });
                    async && async(nonDuplicates);
                }
            },
            all: function all() {
                return this.index.all();
            },
            clear: function clear() {
                this.index.reset();
                return this;
            },
            clearPrefetchCache: function clearPrefetchCache() {
                this.prefetch && this.prefetch.clear();
                return this;
            },
            clearRemoteCache: function clearRemoteCache() {
                Transport.resetCache();
                return this;
            },
            ttAdapter: function ttAdapter() {
                return this.__ttAdapter();
            }
        });
        return Bloodhound;
    }();
    return Bloodhound;
});

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("typeahead.js", [ "jquery" ], function(a0) {
            return factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var WWW = function() {
        "use strict";
        var defaultClassNames = {
            wrapper: "twitter-typeahead",
            input: "tt-input",
            hint: "tt-hint",
            menu: "tt-menu",
            dataset: "tt-dataset",
            suggestion: "tt-suggestion",
            selectable: "tt-selectable",
            empty: "tt-empty",
            open: "tt-open",
            cursor: "tt-cursor",
            highlight: "tt-highlight"
        };
        return build;
        function build(o) {
            var www, classes;
            classes = _.mixin({}, defaultClassNames, o);
            www = {
                css: buildCss(),
                classes: classes,
                html: buildHtml(classes),
                selectors: buildSelectors(classes)
            };
            return {
                css: www.css,
                html: www.html,
                classes: www.classes,
                selectors: www.selectors,
                mixin: function(o) {
                    _.mixin(o, www);
                }
            };
        }
        function buildHtml(c) {
            return {
                wrapper: '<span class="' + c.wrapper + '"></span>',
                menu: '<div class="' + c.menu + '"></div>'
            };
        }
        function buildSelectors(classes) {
            var selectors = {};
            _.each(classes, function(v, k) {
                selectors[k] = "." + v;
            });
            return selectors;
        }
        function buildCss() {
            var css = {
                wrapper: {
                    position: "relative",
                    display: "inline-block"
                },
                hint: {
                    position: "absolute",
                    top: "0",
                    left: "0",
                    borderColor: "transparent",
                    boxShadow: "none",
                    opacity: "1"
                },
                input: {
                    position: "relative",
                    verticalAlign: "top",
                    backgroundColor: "transparent"
                },
                inputWithNoHint: {
                    position: "relative",
                    verticalAlign: "top"
                },
                menu: {
                    position: "absolute",
                    top: "100%",
                    left: "0",
                    zIndex: "100",
                    display: "none"
                },
                ltr: {
                    left: "0",
                    right: "auto"
                },
                rtl: {
                    left: "auto",
                    right: " 0"
                }
            };
            if (_.isMsie()) {
                _.mixin(css.input, {
                    backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
                });
            }
            return css;
        }
    }();
    var EventBus = function() {
        "use strict";
        var namespace, deprecationMap;
        namespace = "typeahead:";
        deprecationMap = {
            render: "rendered",
            cursorchange: "cursorchanged",
            select: "selected",
            autocomplete: "autocompleted"
        };
        function EventBus(o) {
            if (!o || !o.el) {
                $.error("EventBus initialized without el");
            }
            this.$el = $(o.el);
        }
        _.mixin(EventBus.prototype, {
            _trigger: function(type, args) {
                var $e;
                $e = $.Event(namespace + type);
                (args = args || []).unshift($e);
                this.$el.trigger.apply(this.$el, args);
                return $e;
            },
            before: function(type) {
                var args, $e;
                args = [].slice.call(arguments, 1);
                $e = this._trigger("before" + type, args);
                return $e.isDefaultPrevented();
            },
            trigger: function(type) {
                var deprecatedType;
                this._trigger(type, [].slice.call(arguments, 1));
                if (deprecatedType = deprecationMap[type]) {
                    this._trigger(deprecatedType, [].slice.call(arguments, 1));
                }
            }
        });
        return EventBus;
    }();
    var EventEmitter = function() {
        "use strict";
        var splitter = /\s+/, nextTick = getNextTick();
        return {
            onSync: onSync,
            onAsync: onAsync,
            off: off,
            trigger: trigger
        };
        function on(method, types, cb, context) {
            var type;
            if (!cb) {
                return this;
            }
            types = types.split(splitter);
            cb = context ? bindContext(cb, context) : cb;
            this._callbacks = this._callbacks || {};
            while (type = types.shift()) {
                this._callbacks[type] = this._callbacks[type] || {
                    sync: [],
                    async: []
                };
                this._callbacks[type][method].push(cb);
            }
            return this;
        }
        function onAsync(types, cb, context) {
            return on.call(this, "async", types, cb, context);
        }
        function onSync(types, cb, context) {
            return on.call(this, "sync", types, cb, context);
        }
        function off(types) {
            var type;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            while (type = types.shift()) {
                delete this._callbacks[type];
            }
            return this;
        }
        function trigger(types) {
            var type, callbacks, args, syncFlush, asyncFlush;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            args = [].slice.call(arguments, 1);
            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));
                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));
                syncFlush() && nextTick(asyncFlush);
            }
            return this;
        }
        function getFlush(callbacks, context, args) {
            return flush;
            function flush() {
                var cancelled;
                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
                    cancelled = callbacks[i].apply(context, args) === false;
                }
                return !cancelled;
            }
        }
        function getNextTick() {
            var nextTickFn;
            if (window.setImmediate) {
                nextTickFn = function nextTickSetImmediate(fn) {
                    setImmediate(function() {
                        fn();
                    });
                };
            } else {
                nextTickFn = function nextTickSetTimeout(fn) {
                    setTimeout(function() {
                        fn();
                    }, 0);
                };
            }
            return nextTickFn;
        }
        function bindContext(fn, context) {
            return fn.bind ? fn.bind(context) : function() {
                fn.apply(context, [].slice.call(arguments, 0));
            };
        }
    }();
    var highlight = function(doc) {
        "use strict";
        var defaults = {
            node: null,
            pattern: null,
            tagName: "strong",
            className: null,
            wordsOnly: false,
            caseSensitive: false
        };
        return function hightlight(o) {
            var regex;
            o = _.mixin({}, defaults, o);
            if (!o.node || !o.pattern) {
                return;
            }
            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];
            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);
            traverse(o.node, hightlightTextNode);
            function hightlightTextNode(textNode) {
                var match, patternNode, wrapperNode;
                if (match = regex.exec(textNode.data)) {
                    wrapperNode = doc.createElement(o.tagName);
                    o.className && (wrapperNode.className = o.className);
                    patternNode = textNode.splitText(match.index);
                    patternNode.splitText(match[0].length);
                    wrapperNode.appendChild(patternNode.cloneNode(true));
                    textNode.parentNode.replaceChild(wrapperNode, patternNode);
                }
                return !!match;
            }
            function traverse(el, hightlightTextNode) {
                var childNode, TEXT_NODE_TYPE = 3;
                for (var i = 0; i < el.childNodes.length; i++) {
                    childNode = el.childNodes[i];
                    if (childNode.nodeType === TEXT_NODE_TYPE) {
                        i += hightlightTextNode(childNode) ? 1 : 0;
                    } else {
                        traverse(childNode, hightlightTextNode);
                    }
                }
            }
        };
        function getRegex(patterns, caseSensitive, wordsOnly) {
            var escapedPatterns = [], regexStr;
            for (var i = 0, len = patterns.length; i < len; i++) {
                escapedPatterns.push(_.escapeRegExChars(patterns[i]));
            }
            regexStr = wordsOnly ? "\\b(" + escapedPatterns.join("|") + ")\\b" : "(" + escapedPatterns.join("|") + ")";
            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
        }
    }(window.document);
    var Input = function() {
        "use strict";
        var specialKeyCodeMap;
        specialKeyCodeMap = {
            9: "tab",
            27: "esc",
            37: "left",
            39: "right",
            13: "enter",
            38: "up",
            40: "down"
        };
        function Input(o, www) {
            o = o || {};
            if (!o.input) {
                $.error("input is missing");
            }
            www.mixin(this);
            this.$hint = $(o.hint);
            this.$input = $(o.input);
            this.query = this.$input.val();
            this.queryWhenFocused = this.hasFocus() ? this.query : null;
            this.$overflowHelper = buildOverflowHelper(this.$input);
            this._checkLanguageDirection();
            if (this.$hint.length === 0) {
                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;
            }
        }
        Input.normalizeQuery = function(str) {
            return _.toStr(str).replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
        };
        _.mixin(Input.prototype, EventEmitter, {
            _onBlur: function onBlur() {
                this.resetInputValue();
                this.trigger("blurred");
            },
            _onFocus: function onFocus() {
                this.queryWhenFocused = this.query;
                this.trigger("focused");
            },
            _onKeydown: function onKeydown($e) {
                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];
                this._managePreventDefault(keyName, $e);
                if (keyName && this._shouldTrigger(keyName, $e)) {
                    this.trigger(keyName + "Keyed", $e);
                }
            },
            _onInput: function onInput() {
                this._setQuery(this.getInputValue());
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            _managePreventDefault: function managePreventDefault(keyName, $e) {
                var preventDefault;
                switch (keyName) {
                  case "up":
                  case "down":
                    preventDefault = !withModifier($e);
                    break;

                  default:
                    preventDefault = false;
                }
                preventDefault && $e.preventDefault();
            },
            _shouldTrigger: function shouldTrigger(keyName, $e) {
                var trigger;
                switch (keyName) {
                  case "tab":
                    trigger = !withModifier($e);
                    break;

                  default:
                    trigger = true;
                }
                return trigger;
            },
            _checkLanguageDirection: function checkLanguageDirection() {
                var dir = (this.$input.css("direction") || "ltr").toLowerCase();
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.$hint.attr("dir", dir);
                    this.trigger("langDirChanged", dir);
                }
            },
            _setQuery: function setQuery(val, silent) {
                var areEquivalent, hasDifferentWhitespace;
                areEquivalent = areQueriesEquivalent(val, this.query);
                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;
                this.query = val;
                if (!silent && !areEquivalent) {
                    this.trigger("queryChanged", this.query);
                } else if (!silent && hasDifferentWhitespace) {
                    this.trigger("whitespaceChanged", this.query);
                }
            },
            bind: function() {
                var that = this, onBlur, onFocus, onKeydown, onInput;
                onBlur = _.bind(this._onBlur, this);
                onFocus = _.bind(this._onFocus, this);
                onKeydown = _.bind(this._onKeydown, this);
                onInput = _.bind(this._onInput, this);
                this.$input.on("blur.tt", onBlur).on("focus.tt", onFocus).on("keydown.tt", onKeydown);
                if (!_.isMsie() || _.isMsie() > 9) {
                    this.$input.on("input.tt", onInput);
                } else {
                    this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function($e) {
                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {
                            return;
                        }
                        _.defer(_.bind(that._onInput, that, $e));
                    });
                }
                return this;
            },
            focus: function focus() {
                this.$input.focus();
            },
            blur: function blur() {
                this.$input.blur();
            },
            getLangDir: function getLangDir() {
                return this.dir;
            },
            getQuery: function getQuery() {
                return this.query || "";
            },
            setQuery: function setQuery(val, silent) {
                this.setInputValue(val);
                this._setQuery(val, silent);
            },
            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {
                return this.query !== this.queryWhenFocused;
            },
            getInputValue: function getInputValue() {
                return this.$input.val();
            },
            setInputValue: function setInputValue(value) {
                this.$input.val(value);
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            resetInputValue: function resetInputValue() {
                this.setInputValue(this.query);
            },
            getHint: function getHint() {
                return this.$hint.val();
            },
            setHint: function setHint(value) {
                this.$hint.val(value);
            },
            clearHint: function clearHint() {
                this.setHint("");
            },
            clearHintIfInvalid: function clearHintIfInvalid() {
                var val, hint, valIsPrefixOfHint, isValid;
                val = this.getInputValue();
                hint = this.getHint();
                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
                isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
                !isValid && this.clearHint();
            },
            hasFocus: function hasFocus() {
                return this.$input.is(":focus");
            },
            hasOverflow: function hasOverflow() {
                var constraint = this.$input.width() - 2;
                this.$overflowHelper.text(this.getInputValue());
                return this.$overflowHelper.width() >= constraint;
            },
            isCursorAtEnd: function() {
                var valueLength, selectionStart, range;
                valueLength = this.$input.val().length;
                selectionStart = this.$input[0].selectionStart;
                if (_.isNumber(selectionStart)) {
                    return selectionStart === valueLength;
                } else if (document.selection) {
                    range = document.selection.createRange();
                    range.moveStart("character", -valueLength);
                    return valueLength === range.text.length;
                }
                return true;
            },
            destroy: function destroy() {
                this.$hint.off(".tt");
                this.$input.off(".tt");
                this.$overflowHelper.remove();
                this.$hint = this.$input = this.$overflowHelper = $("<div>");
            }
        });
        return Input;
        function buildOverflowHelper($input) {
            return $('<pre aria-hidden="true"></pre>').css({
                position: "absolute",
                visibility: "hidden",
                whiteSpace: "pre",
                fontFamily: $input.css("font-family"),
                fontSize: $input.css("font-size"),
                fontStyle: $input.css("font-style"),
                fontVariant: $input.css("font-variant"),
                fontWeight: $input.css("font-weight"),
                wordSpacing: $input.css("word-spacing"),
                letterSpacing: $input.css("letter-spacing"),
                textIndent: $input.css("text-indent"),
                textRendering: $input.css("text-rendering"),
                textTransform: $input.css("text-transform")
            }).insertAfter($input);
        }
        function areQueriesEquivalent(a, b) {
            return Input.normalizeQuery(a) === Input.normalizeQuery(b);
        }
        function withModifier($e) {
            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
        }
    }();
    var Dataset = function() {
        "use strict";
        var keys, nameGenerator;
        keys = {
            val: "tt-selectable-display",
            obj: "tt-selectable-object"
        };
        nameGenerator = _.getIdGenerator();
        function Dataset(o, www) {
            o = o || {};
            o.templates = o.templates || {};
            o.templates.notFound = o.templates.notFound || o.templates.empty;
            if (!o.source) {
                $.error("missing source");
            }
            if (!o.node) {
                $.error("missing node");
            }
            if (o.name && !isValidName(o.name)) {
                $.error("invalid dataset name: " + o.name);
            }
            www.mixin(this);
            this.highlight = !!o.highlight;
            this.name = o.name || nameGenerator();
            this.limit = o.limit || 5;
            this.displayFn = getDisplayFn(o.display || o.displayKey);
            this.templates = getTemplates(o.templates, this.displayFn);
            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;
            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;
            this._resetLastSuggestion();
            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name);
        }
        Dataset.extractData = function extractData(el) {
            var $el = $(el);
            if ($el.data(keys.obj)) {
                return {
                    val: $el.data(keys.val) || "",
                    obj: $el.data(keys.obj) || null
                };
            }
            return null;
        };
        _.mixin(Dataset.prototype, EventEmitter, {
            _overwrite: function overwrite(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (this.async && this.templates.pending) {
                    this._renderPending(query);
                } else if (!this.async && this.templates.notFound) {
                    this._renderNotFound(query);
                } else {
                    this._empty();
                }
                this.trigger("rendered", this.name, suggestions, false);
            },
            _append: function append(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length && this.$lastSuggestion.length) {
                    this._appendSuggestions(query, suggestions);
                } else if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (!this.$lastSuggestion.length && this.templates.notFound) {
                    this._renderNotFound(query);
                }
                this.trigger("rendered", this.name, suggestions, true);
            },
            _renderSuggestions: function renderSuggestions(query, suggestions) {
                var $fragment;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                this.$lastSuggestion = $fragment.children().last();
                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));
            },
            _appendSuggestions: function appendSuggestions(query, suggestions) {
                var $fragment, $lastSuggestion;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                $lastSuggestion = $fragment.children().last();
                this.$lastSuggestion.after($fragment);
                this.$lastSuggestion = $lastSuggestion;
            },
            _renderPending: function renderPending(query) {
                var template = this.templates.pending;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _renderNotFound: function renderNotFound(query) {
                var template = this.templates.notFound;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _empty: function empty() {
                this.$el.empty();
                this._resetLastSuggestion();
            },
            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {
                var that = this, fragment;
                fragment = document.createDocumentFragment();
                _.each(suggestions, function getSuggestionNode(suggestion) {
                    var $el, context;
                    context = that._injectQuery(query, suggestion);
                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + " " + that.classes.selectable);
                    fragment.appendChild($el[0]);
                });
                this.highlight && highlight({
                    className: this.classes.highlight,
                    node: fragment,
                    pattern: query
                });
                return $(fragment);
            },
            _getFooter: function getFooter(query, suggestions) {
                return this.templates.footer ? this.templates.footer({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _getHeader: function getHeader(query, suggestions) {
                return this.templates.header ? this.templates.header({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _resetLastSuggestion: function resetLastSuggestion() {
                this.$lastSuggestion = $();
            },
            _injectQuery: function injectQuery(query, obj) {
                return _.isObject(obj) ? _.mixin({
                    _query: query
                }, obj) : obj;
            },
            update: function update(query) {
                var that = this, canceled = false, syncCalled = false, rendered = 0;
                this.cancel();
                this.cancel = function cancel() {
                    canceled = true;
                    that.cancel = $.noop;
                    that.async && that.trigger("asyncCanceled", query);
                };
                this.source(query, sync, async);
                !syncCalled && sync([]);
                function sync(suggestions) {
                    if (syncCalled) {
                        return;
                    }
                    syncCalled = true;
                    suggestions = (suggestions || []).slice(0, that.limit);
                    rendered = suggestions.length;
                    that._overwrite(query, suggestions);
                    if (rendered < that.limit && that.async) {
                        that.trigger("asyncRequested", query);
                    }
                }
                function async(suggestions) {
                    suggestions = suggestions || [];
                    if (!canceled && rendered < that.limit) {
                        that.cancel = $.noop;
                        rendered += suggestions.length;
                        that._append(query, suggestions.slice(0, that.limit - rendered));
                        that.async && that.trigger("asyncReceived", query);
                    }
                }
            },
            cancel: $.noop,
            clear: function clear() {
                this._empty();
                this.cancel();
                this.trigger("cleared");
            },
            isEmpty: function isEmpty() {
                return this.$el.is(":empty");
            },
            destroy: function destroy() {
                this.$el = $("<div>");
            }
        });
        return Dataset;
        function getDisplayFn(display) {
            display = display || _.stringify;
            return _.isFunction(display) ? display : displayFn;
            function displayFn(obj) {
                return obj[display];
            }
        }
        function getTemplates(templates, displayFn) {
            return {
                notFound: templates.notFound && _.templatify(templates.notFound),
                pending: templates.pending && _.templatify(templates.pending),
                header: templates.header && _.templatify(templates.header),
                footer: templates.footer && _.templatify(templates.footer),
                suggestion: templates.suggestion || suggestionTemplate
            };
            function suggestionTemplate(context) {
                return $("<div>").text(displayFn(context));
            }
        }
        function isValidName(str) {
            return /^[_a-zA-Z0-9-]+$/.test(str);
        }
    }();
    var Menu = function() {
        "use strict";
        function Menu(o, www) {
            var that = this;
            o = o || {};
            if (!o.node) {
                $.error("node is required");
            }
            www.mixin(this);
            this.$node = $(o.node);
            this.query = null;
            this.datasets = _.map(o.datasets, initializeDataset);
            function initializeDataset(oDataset) {
                var node = that.$node.find(oDataset.node).first();
                oDataset.node = node.length ? node : $("<div>").appendTo(that.$node);
                return new Dataset(oDataset, www);
            }
        }
        _.mixin(Menu.prototype, EventEmitter, {
            _onSelectableClick: function onSelectableClick($e) {
                this.trigger("selectableClicked", $($e.currentTarget));
            },
            _onRendered: function onRendered(type, dataset, suggestions, async) {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetRendered", dataset, suggestions, async);
            },
            _onCleared: function onCleared() {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetCleared");
            },
            _propagate: function propagate() {
                this.trigger.apply(this, arguments);
            },
            _allDatasetsEmpty: function allDatasetsEmpty() {
                return _.every(this.datasets, isDatasetEmpty);
                function isDatasetEmpty(dataset) {
                    return dataset.isEmpty();
                }
            },
            _getSelectables: function getSelectables() {
                return this.$node.find(this.selectors.selectable);
            },
            _removeCursor: function _removeCursor() {
                var $selectable = this.getActiveSelectable();
                $selectable && $selectable.removeClass(this.classes.cursor);
            },
            _ensureVisible: function ensureVisible($el) {
                var elTop, elBottom, nodeScrollTop, nodeHeight;
                elTop = $el.position().top;
                elBottom = elTop + $el.outerHeight(true);
                nodeScrollTop = this.$node.scrollTop();
                nodeHeight = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10);
                if (elTop < 0) {
                    this.$node.scrollTop(nodeScrollTop + elTop);
                } else if (nodeHeight < elBottom) {
                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));
                }
            },
            bind: function() {
                var that = this, onSelectableClick;
                onSelectableClick = _.bind(this._onSelectableClick, this);
                this.$node.on("click.tt", this.selectors.selectable, onSelectableClick);
                _.each(this.datasets, function(dataset) {
                    dataset.onSync("asyncRequested", that._propagate, that).onSync("asyncCanceled", that._propagate, that).onSync("asyncReceived", that._propagate, that).onSync("rendered", that._onRendered, that).onSync("cleared", that._onCleared, that);
                });
                return this;
            },
            isOpen: function isOpen() {
                return this.$node.hasClass(this.classes.open);
            },
            open: function open() {
                this.$node.addClass(this.classes.open);
            },
            close: function close() {
                this.$node.removeClass(this.classes.open);
                this._removeCursor();
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.attr("dir", dir);
            },
            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {
                var $selectables, $oldCursor, oldIndex, newIndex;
                $oldCursor = this.getActiveSelectable();
                $selectables = this._getSelectables();
                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;
                newIndex = oldIndex + delta;
                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;
                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;
                return newIndex === -1 ? null : $selectables.eq(newIndex);
            },
            setCursor: function setCursor($selectable) {
                this._removeCursor();
                if ($selectable = $selectable && $selectable.first()) {
                    $selectable.addClass(this.classes.cursor);
                    this._ensureVisible($selectable);
                }
            },
            getSelectableData: function getSelectableData($el) {
                return $el && $el.length ? Dataset.extractData($el) : null;
            },
            getActiveSelectable: function getActiveSelectable() {
                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();
                return $selectable.length ? $selectable : null;
            },
            getTopSelectable: function getTopSelectable() {
                var $selectable = this._getSelectables().first();
                return $selectable.length ? $selectable : null;
            },
            update: function update(query) {
                var isValidUpdate = query !== this.query;
                if (isValidUpdate) {
                    this.query = query;
                    _.each(this.datasets, updateDataset);
                }
                return isValidUpdate;
                function updateDataset(dataset) {
                    dataset.update(query);
                }
            },
            empty: function empty() {
                _.each(this.datasets, clearDataset);
                this.query = null;
                this.$node.addClass(this.classes.empty);
                function clearDataset(dataset) {
                    dataset.clear();
                }
            },
            destroy: function destroy() {
                this.$node.off(".tt");
                this.$node = $("<div>");
                _.each(this.datasets, destroyDataset);
                function destroyDataset(dataset) {
                    dataset.destroy();
                }
            }
        });
        return Menu;
    }();
    var DefaultMenu = function() {
        "use strict";
        var s = Menu.prototype;
        function DefaultMenu() {
            Menu.apply(this, [].slice.call(arguments, 0));
        }
        _.mixin(DefaultMenu.prototype, Menu.prototype, {
            open: function open() {
                !this._allDatasetsEmpty() && this._show();
                return s.open.apply(this, [].slice.call(arguments, 0));
            },
            close: function close() {
                this._hide();
                return s.close.apply(this, [].slice.call(arguments, 0));
            },
            _onRendered: function onRendered() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onRendered.apply(this, [].slice.call(arguments, 0));
            },
            _onCleared: function onCleared() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onCleared.apply(this, [].slice.call(arguments, 0));
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.css(dir === "ltr" ? this.css.ltr : this.css.rtl);
                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));
            },
            _hide: function hide() {
                this.$node.hide();
            },
            _show: function show() {
                this.$node.css("display", "block");
            }
        });
        return DefaultMenu;
    }();
    var Typeahead = function() {
        "use strict";
        function Typeahead(o, www) {
            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;
            o = o || {};
            if (!o.input) {
                $.error("missing input");
            }
            if (!o.menu) {
                $.error("missing menu");
            }
            if (!o.eventBus) {
                $.error("missing event bus");
            }
            www.mixin(this);
            this.eventBus = o.eventBus;
            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
            this.input = o.input;
            this.menu = o.menu;
            this.enabled = true;
            this.active = false;
            this.input.hasFocus() && this.activate();
            this.dir = this.input.getLangDir();
            this._hacks();
            this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this);
            onFocused = c(this, "activate", "open", "_onFocused");
            onBlurred = c(this, "deactivate", "_onBlurred");
            onEnterKeyed = c(this, "isActive", "isOpen", "_onEnterKeyed");
            onTabKeyed = c(this, "isActive", "isOpen", "_onTabKeyed");
            onEscKeyed = c(this, "isActive", "_onEscKeyed");
            onUpKeyed = c(this, "isActive", "open", "_onUpKeyed");
            onDownKeyed = c(this, "isActive", "open", "_onDownKeyed");
            onLeftKeyed = c(this, "isActive", "isOpen", "_onLeftKeyed");
            onRightKeyed = c(this, "isActive", "isOpen", "_onRightKeyed");
            onQueryChanged = c(this, "_openIfActive", "_onQueryChanged");
            onWhitespaceChanged = c(this, "_openIfActive", "_onWhitespaceChanged");
            this.input.bind().onSync("focused", onFocused, this).onSync("blurred", onBlurred, this).onSync("enterKeyed", onEnterKeyed, this).onSync("tabKeyed", onTabKeyed, this).onSync("escKeyed", onEscKeyed, this).onSync("upKeyed", onUpKeyed, this).onSync("downKeyed", onDownKeyed, this).onSync("leftKeyed", onLeftKeyed, this).onSync("rightKeyed", onRightKeyed, this).onSync("queryChanged", onQueryChanged, this).onSync("whitespaceChanged", onWhitespaceChanged, this).onSync("langDirChanged", this._onLangDirChanged, this);
        }
        _.mixin(Typeahead.prototype, {
            _hacks: function hacks() {
                var $input, $menu;
                $input = this.input.$input || $("<div>");
                $menu = this.menu.$node || $("<div>");
                $input.on("blur.tt", function($e) {
                    var active, isActive, hasActive;
                    active = document.activeElement;
                    isActive = $menu.is(active);
                    hasActive = $menu.has(active).length > 0;
                    if (_.isMsie() && (isActive || hasActive)) {
                        $e.preventDefault();
                        $e.stopImmediatePropagation();
                        _.defer(function() {
                            $input.focus();
                        });
                    }
                });
                $menu.on("mousedown.tt", function($e) {
                    $e.preventDefault();
                });
            },
            _onSelectableClicked: function onSelectableClicked(type, $el) {
                this.select($el);
            },
            _onDatasetCleared: function onDatasetCleared() {
                this._updateHint();
            },
            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {
                this._updateHint();
                this.eventBus.trigger("render", suggestions, async, dataset);
            },
            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {
                this.eventBus.trigger("asyncrequest", query, dataset);
            },
            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {
                this.eventBus.trigger("asynccancel", query, dataset);
            },
            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {
                this.eventBus.trigger("asyncreceive", query, dataset);
            },
            _onFocused: function onFocused() {
                this._minLengthMet() && this.menu.update(this.input.getQuery());
            },
            _onBlurred: function onBlurred() {
                if (this.input.hasQueryChangedSinceLastFocus()) {
                    this.eventBus.trigger("change", this.input.getQuery());
                }
            },
            _onEnterKeyed: function onEnterKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                }
            },
            _onTabKeyed: function onTabKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                } else if ($selectable = this.menu.getTopSelectable()) {
                    this.autocomplete($selectable) && $e.preventDefault();
                }
            },
            _onEscKeyed: function onEscKeyed() {
                this.close();
            },
            _onUpKeyed: function onUpKeyed() {
                this.moveCursor(-1);
            },
            _onDownKeyed: function onDownKeyed() {
                this.moveCursor(+1);
            },
            _onLeftKeyed: function onLeftKeyed() {
                if (this.dir === "rtl" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onRightKeyed: function onRightKeyed() {
                if (this.dir === "ltr" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onQueryChanged: function onQueryChanged(e, query) {
                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();
            },
            _onWhitespaceChanged: function onWhitespaceChanged() {
                this._updateHint();
            },
            _onLangDirChanged: function onLangDirChanged(e, dir) {
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.menu.setLanguageDirection(dir);
                }
            },
            _openIfActive: function openIfActive() {
                this.isActive() && this.open();
            },
            _minLengthMet: function minLengthMet(query) {
                query = _.isString(query) ? query : this.input.getQuery() || "";
                return query.length >= this.minLength;
            },
            _updateHint: function updateHint() {
                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;
                $selectable = this.menu.getTopSelectable();
                data = this.menu.getSelectableData($selectable);
                val = this.input.getInputValue();
                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {
                    query = Input.normalizeQuery(val);
                    escapedQuery = _.escapeRegExChars(query);
                    frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
                    match = frontMatchRegEx.exec(data.val);
                    match && this.input.setHint(val + match[1]);
                } else {
                    this.input.clearHint();
                }
            },
            isEnabled: function isEnabled() {
                return this.enabled;
            },
            enable: function enable() {
                this.enabled = true;
            },
            disable: function disable() {
                this.enabled = false;
            },
            isActive: function isActive() {
                return this.active;
            },
            activate: function activate() {
                if (this.isActive()) {
                    return true;
                } else if (!this.isEnabled() || this.eventBus.before("active")) {
                    return false;
                } else {
                    this.active = true;
                    this.eventBus.trigger("active");
                    return true;
                }
            },
            deactivate: function deactivate() {
                if (!this.isActive()) {
                    return true;
                } else if (this.eventBus.before("idle")) {
                    return false;
                } else {
                    this.active = false;
                    this.close();
                    this.eventBus.trigger("idle");
                    return true;
                }
            },
            isOpen: function isOpen() {
                return this.menu.isOpen();
            },
            open: function open() {
                if (!this.isOpen() && !this.eventBus.before("open")) {
                    this.menu.open();
                    this._updateHint();
                    this.eventBus.trigger("open");
                }
                return this.isOpen();
            },
            close: function close() {
                if (this.isOpen() && !this.eventBus.before("close")) {
                    this.menu.close();
                    this.input.clearHint();
                    this.input.resetInputValue();
                    this.eventBus.trigger("close");
                }
                return !this.isOpen();
            },
            setVal: function setVal(val) {
                this.input.setQuery(_.toStr(val));
            },
            getVal: function getVal() {
                return this.input.getQuery();
            },
            select: function select($selectable) {
                var data = this.menu.getSelectableData($selectable);
                if (data && !this.eventBus.before("select", data.obj)) {
                    this.input.setQuery(data.val, true);
                    this.eventBus.trigger("select", data.obj);
                    this.close();
                    return true;
                }
                return false;
            },
            autocomplete: function autocomplete($selectable) {
                var query, data, isValid;
                query = this.input.getQuery();
                data = this.menu.getSelectableData($selectable);
                isValid = data && query !== data.val;
                if (isValid && !this.eventBus.before("autocomplete", data.obj)) {
                    this.input.setQuery(data.val);
                    this.eventBus.trigger("autocomplete", data.obj);
                    return true;
                }
                return false;
            },
            moveCursor: function moveCursor(delta) {
                var query, $candidate, data, payload, cancelMove;
                query = this.input.getQuery();
                $candidate = this.menu.selectableRelativeToCursor(delta);
                data = this.menu.getSelectableData($candidate);
                payload = data ? data.obj : null;
                cancelMove = this._minLengthMet() && this.menu.update(query);
                if (!cancelMove && !this.eventBus.before("cursorchange", payload)) {
                    this.menu.setCursor($candidate);
                    if (data) {
                        this.input.setInputValue(data.val);
                    } else {
                        this.input.resetInputValue();
                        this._updateHint();
                    }
                    this.eventBus.trigger("cursorchange", payload);
                    return true;
                }
                return false;
            },
            destroy: function destroy() {
                this.input.destroy();
                this.menu.destroy();
            }
        });
        return Typeahead;
        function c(ctx) {
            var methods = [].slice.call(arguments, 1);
            return function() {
                var args = [].slice.call(arguments);
                _.each(methods, function(method) {
                    return ctx[method].apply(ctx, args);
                });
            };
        }
    }();
    (function() {
        "use strict";
        var old, keys, methods;
        old = $.fn.typeahead;
        keys = {
            www: "tt-www",
            attrs: "tt-attrs",
            typeahead: "tt-typeahead"
        };
        methods = {
            initialize: function initialize(o, datasets) {
                var www;
                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
                o = o || {};
                www = WWW(o.classNames);
                return this.each(attach);
                function attach() {
                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;
                    _.each(datasets, function(d) {
                        d.highlight = !!o.highlight;
                    });
                    $input = $(this);
                    $wrapper = $(www.html.wrapper);
                    $hint = $elOrNull(o.hint);
                    $menu = $elOrNull(o.menu);
                    defaultHint = o.hint !== false && !$hint;
                    defaultMenu = o.menu !== false && !$menu;
                    defaultHint && ($hint = buildHintFromInput($input, www));
                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));
                    $hint && $hint.val("");
                    $input = prepInput($input, www);
                    if (defaultHint || defaultMenu) {
                        $wrapper.css(www.css.wrapper);
                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);
                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);
                    }
                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;
                    eventBus = new EventBus({
                        el: $input
                    });
                    input = new Input({
                        hint: $hint,
                        input: $input
                    }, www);
                    menu = new MenuConstructor({
                        node: $menu,
                        datasets: datasets
                    }, www);
                    typeahead = new Typeahead({
                        input: input,
                        menu: menu,
                        eventBus: eventBus,
                        minLength: o.minLength
                    }, www);
                    $input.data(keys.www, www);
                    $input.data(keys.typeahead, typeahead);
                }
            },
            isEnabled: function isEnabled() {
                var enabled;
                ttEach(this.first(), function(t) {
                    enabled = t.isEnabled();
                });
                return enabled;
            },
            enable: function enable() {
                ttEach(this, function(t) {
                    t.enable();
                });
                return this;
            },
            disable: function disable() {
                ttEach(this, function(t) {
                    t.disable();
                });
                return this;
            },
            isActive: function isActive() {
                var active;
                ttEach(this.first(), function(t) {
                    active = t.isActive();
                });
                return active;
            },
            activate: function activate() {
                ttEach(this, function(t) {
                    t.activate();
                });
                return this;
            },
            deactivate: function deactivate() {
                ttEach(this, function(t) {
                    t.deactivate();
                });
                return this;
            },
            isOpen: function isOpen() {
                var open;
                ttEach(this.first(), function(t) {
                    open = t.isOpen();
                });
                return open;
            },
            open: function open() {
                ttEach(this, function(t) {
                    t.open();
                });
                return this;
            },
            close: function close() {
                ttEach(this, function(t) {
                    t.close();
                });
                return this;
            },
            select: function select(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.select($el);
                });
                return success;
            },
            autocomplete: function autocomplete(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.autocomplete($el);
                });
                return success;
            },
            moveCursor: function moveCursoe(delta) {
                var success = false;
                ttEach(this.first(), function(t) {
                    success = t.moveCursor(delta);
                });
                return success;
            },
            val: function val(newVal) {
                var query;
                if (!arguments.length) {
                    ttEach(this.first(), function(t) {
                        query = t.getVal();
                    });
                    return query;
                } else {
                    ttEach(this, function(t) {
                        t.setVal(newVal);
                    });
                    return this;
                }
            },
            destroy: function destroy() {
                ttEach(this, function(typeahead, $input) {
                    revert($input);
                    typeahead.destroy();
                });
                return this;
            }
        };
        $.fn.typeahead = function(method) {
            if (methods[method]) {
                return methods[method].apply(this, [].slice.call(arguments, 1));
            } else {
                return methods.initialize.apply(this, arguments);
            }
        };
        $.fn.typeahead.noConflict = function noConflict() {
            $.fn.typeahead = old;
            return this;
        };
        function ttEach($els, fn) {
            $els.each(function() {
                var $input = $(this), typeahead;
                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);
            });
        }
        function buildHintFromInput($input, www) {
            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop("readonly", true).removeAttr("id name placeholder required").attr({
                autocomplete: "off",
                spellcheck: "false",
                tabindex: -1
            });
        }
        function prepInput($input, www) {
            $input.data(keys.attrs, {
                dir: $input.attr("dir"),
                autocomplete: $input.attr("autocomplete"),
                spellcheck: $input.attr("spellcheck"),
                style: $input.attr("style")
            });
            $input.addClass(www.classes.input).attr({
                autocomplete: "off",
                spellcheck: false
            });
            try {
                !$input.attr("dir") && $input.attr("dir", "auto");
            } catch (e) {}
            return $input;
        }
        function getBackgroundStyles($el) {
            return {
                backgroundAttachment: $el.css("background-attachment"),
                backgroundClip: $el.css("background-clip"),
                backgroundColor: $el.css("background-color"),
                backgroundImage: $el.css("background-image"),
                backgroundOrigin: $el.css("background-origin"),
                backgroundPosition: $el.css("background-position"),
                backgroundRepeat: $el.css("background-repeat"),
                backgroundSize: $el.css("background-size")
            };
        }
        function revert($input) {
            var www, $wrapper;
            www = $input.data(keys.www);
            $wrapper = $input.parent().filter(www.selectors.wrapper);
            _.each($input.data(keys.attrs), function(val, key) {
                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
            });
            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);
            if ($wrapper.length) {
                $input.detach().insertAfter($wrapper);
                $wrapper.remove();
            }
        }
        function $elOrNull(obj) {
            var isValid, $el;
            isValid = _.isJQuery(obj) || _.isElement(obj);
            $el = isValid ? $(obj).first() : [];
            return $el.length ? $el : null;
        }
    })();
});
function getRandomInt(min, max) {
  var minCeiled = Math.ceil(min);
  var maxFloored = Math.floor(max);
  return Math.floor(Math.random() * (maxFloored - minCeiled) + minCeiled); // The maximum is exclusive and the minimum is inclusive
}
Array.prototype.sample = function(){
  return this[Math.floor(Math.random()*this.length)];
};

 function block(){$.blockUI({message:'<button class="btn btn-default btn-lg"><i class="fa fa-circle-o-notch fa-spin"></i> Loading...</button>',css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.5,color:"#fff"}});}
   

var shuffle = function(o) {
    for ( var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x)
        ;
    return o;
};
 
String.prototype.hashCode = function(){
    // See http://www.cse.yorku.ca/~oz/hash.html        
    var hash = 5381;
    for (i = 0; i < this.length; i++) {
        char = this.charCodeAt(i);
        hash = ((hash<<5)+hash) + char;
        hash = hash & hash; // Convert to 32bit integer
    }
    return hash;
};

Number.prototype.mod = function(n) {
    return ((this%n)+n)%n;
};
function randomColor(){
    return Math.floor(Math.random()*16777215).toString(16);
}


window.isInViewport = (function(){

    $.fn.isInViewport = function(options){
       return this.each(function(){
          var settings = $.extend({ele:">*"},options,true);
          var $this = this;
          var ele = $($this);
          ele.on("scroll",function(){
            ele.find(options.ele).each(function(){
              if(!this.loaded){
                  isInViewport(this,$this,function(target){
                     if(options.callback)options.callback.call(target,target);
                  });
              } 
            });
          });
          
       });
    };
    

    return function( ele,parent,f)
    {
        var  pos =  ele.getBoundingClientRect();
        var top =pos.top, bottom = pos.bottom;

      var vHeight = parent.innerHeight ||$(parent).height() || document.body.innerHeight;
      var ok = (
        (top > 0 || bottom > 0) &&
        top < vHeight
      );
      if(ok){
         ele.loaded==1;
         $(ele).addClass('loaded');
         if(f)f(ele);
      }
      return ok;

    };
})();


String.prototype.toNumber = function () { 
    return String(this).split('').map(function(char) {
        return char.charCodeAt(0).reduce(function(current, previous){return previous + current;});
    });
};
String.prototype.toHHMMSS = function () {
    var sec_num = parseInt(this, 10); // don't forget the second param
    var hours   = Math.floor(sec_num / 3600);
    var minutes = Math.floor((sec_num - (hours * 3600)) / 60);
    var seconds = sec_num - (hours * 3600) - (minutes * 60);

    if (hours   < 10) {hours   = "0"+hours;}
    if (minutes < 10) {minutes = "0"+minutes;}
    if (seconds < 10) {seconds = "0"+seconds;}
    return hours+':'+minutes+':'+parseInt(seconds,10);
};


Date.prototype.toHHMMSS = function () {
    var sec_num = (Date.now() - this.getTime())/1000;
    return (""+sec_num).toHHMMSS();
};



String.prototype.postPromise= function(data,headers,f){
    return postPromise(String(this),data,headers,f);
};

String.prototype.loadCSS= function(data,f){
    loadCSS(String(this),f||function(){});
};

String.prototype.loadJS= function(data,f){
    loadJS(String(this),f||function(){});
};

String.prototype.modules= function(f){
    var n = String(this);
    loadCSS("https://f7.donggiatri.com/modules/"+n+"/style.core.css",function(){});
    loadJS("https://f7.donggiatri.com/modules/"+n+"/style.core.js",f||function(){});
};

function shortname(s,num){
    return s.shortname(num);
}
String.prototype.shortname= function(num){
    return String(this).split(" ").slice(0,num||2).map(function(v){return v[0];}).join("").toUpperCase();
};

String.prototype.form= function(options){
    
    var settings = $.extend({url:String(this),data:{},f:function(){}},options,true);

    return {
        url:function(url){
            settings.url = url;
            return this;
        },
        data:function(d){
            settings.data = d;
            return this;
        },
        post : function(f){
            f = f?f:settings.f;
            post(settings.url,settings.data,f,true);
            return this;
        }
    };
};
String.prototype.post= function(data,f){
    post(String(this),data||{},f||function(){},true);
};

String.prototype.postDebug= function(data,f){
    post(String(this),data||{},f||function(res){
        console.log(res);
    },true);
};

String.prototype.postForm= function(form,f){
    postForm(String(this),form,f,true);
};

HTMLElement.prototype.toggle = function () { 
    this.style.display = this.style.display == 'none' ? '' : 'none';
};





HTMLElement.prototype.post = function (f,url) { 
    if(this.nodeName=="FORM"){
        url = url?url:(this.action?this.action:document.location.href);
        postForm(url,this,f,true);
    }
};

String.prototype.Handlebars = function(data){
  var s = Handlebars.compile(String(this));
  return s(data);
};
HTMLElement.prototype.Handlebars = function (data) { 
    this.innerHTML = this.innerHTML.Handlebars(data);
};

String.prototype.clearStorage = function(){
    window.localStorage.removeItem(String(this));
};
String.prototype.setStorage = function(v){
    window.localStorage.setItem(String(this),JSON.stringify(v));
};
String.prototype.getStorage = function(k){

    try{
       return JSON.parse(window.localStorage.getItem(String(this)));
    }catch(e){} 

    return k;
};

String.prototype.getStorageLoader = function(k){

    try{
       return JSON.parse(window.localStorage.getItem(String(this)));
    }catch(e){
        window.showLoader();
    } 

    return k;
};

Array.prototype.unique = function(k){

     return this.reduce(function(accumulator, current) {
        if (!accumulator.some(function(x){return x[k] === current[k];})) {
          accumulator.push(current);
        }
        return accumulator;
      }, []);
};
window.rebuild = function(el){
   ele = (el?el:$('body'));
   ele.find('[data-setbg]').each(function () {
        var me = $(this);
          var bg = me.attr('data-setbg');
          if(parseInt(this.style.height)<75 && window.innerWidth<1050){
                    me.css("height","125px");
          }

          if(this.nodeName=="IMG"){
            this.src=bg;
          }else if(this.nodeName=="IFRAME"){
            this.src=bg;
          }else{
             me.css('background-image', 'url(' + bg + ')');
          }
         me.removeAttr('data-setbg');
      });
   ele.find('[require]').each(function () {
        var me = $(this);
          var bg = me.attr('require');
          if(parseInt(this.style.height)<75 && window.innerWidth<1050){
                    me.css("height","125px");
          }

          if(this.nodeName=="IMG"){
            this.src=bg;
          }else if(this.nodeName=="IFRAME"){
            this.src=bg;
          }else{
             me.css('background-image', 'url(' + bg + ')');
             me.addClass('bg');
          }
         me.removeAttr('require');
    });
   
   ele.find('[data-src]').each(function () {
        var me = $(this);
          var bg = me.attr('data-src');
          if(parseInt(this.style.height)<75 && window.innerWidth<1050){
                    me.css("height","125px");
          }

          if(this.nodeName=="IMG"){
            this.src=bg;
          }else if(this.nodeName=="IFRAME"){
            this.src=bg;
          }else{
             me.css('background-image', 'url(' + bg + ')');
             me.addClass('bg');
          }
         me.removeAttr('data-src');
    });

   //find all link
   ele.find('a:not(.external)').each(function(){
      if(this.target=="_blank"){
         $(this).addClass("external");
      }
   });



   ele.find("[data-com-load]").each(function(i,v){
    var me = $(this);
      var js = me.attr('data-com-load');
      var name = me.attr('data-com-name');

      if(window.plugins&&window.plugins[name]){
          window.plugins[name](me);
      }else{
        var a = me;
        loadJS("https://f7.donggiatri.com/com/"+js+".js?t="+Date.now(),function(){
          if(window.plugins[name]){
            window.plugins[name](a);
          }
        });
      }


      
   });

   //user
   var u =  window.user?window.user.hasLogin():null;

   ele.find(".hasLogin").each(function(i,v){
    var me = $(this);
     if(!this.old_route){
      var href = me.attr("href");
       this.old_route = href?href:me.attr("data-router");
     }
     if(this.nodeName=="A"){
       this.href = u?this.old_route:"/user/login/";
     }else{
      me.attr("data-router",u?this.old_route:"/user/login/");
     } 
   });
   
};


$.fn.galleryPopup = function(){
    return this.each(function(options){
        var ele = $(this);
        options = $.extend({
            container : ele,
            target :'a'
        },options,true);
        var a = galleryPopup(options);
        ele.data("galleryPopup",a);
    });
};
window.galleryPopup = function(options){
    var methods ={

    };

    options.container = typeof options.container=="string"?$(options.container):options.container;
    options.container.find(options.target).css("cursor","pointer");
    options.container.on("click",options.target,function(){
        var index = $(this).index();
        console.log(index);
        var items=[];
        $(options.container).find(options.target).each(function(i,v){
             var item =null;
            switch(this.nodeName.toLowerCase()){
                case "a":
                    item={
                      type:"image",
                      src: this.href
                    };
                break;
                case "img":
                    item={
                      type:"image",
                      src: this.src
                    };
                break;
                default:
                    var img = this.style.BackgroundImage;
                    img = img?img.slice(4, -1).replace(/"/g, ""):$(this).attr('data-src');
                    if(img){
                        item={
                          type:"image",
                          src: img
                        };
                    }else{
                        item={
                          type:"inline",
                          src: this
                        };
                    }
                break;
            } 
            items.push(item);
        });
         
        if(items.length){
            methods.instance = $.magnificPopup.open({
              items: items,
              callbacks: {
                    open: function() {
                        // var current = $carousel.slick('slickCurrentSlide');
                        // $carousel.magnificPopup('goTo', index);
                    },
                    beforeClose: function() {
                        // $carousel.slick('slickGoTo', parseInt(this.index));
                    }
                },
              gallery: {
                enabled: true,
                navigateByImgClick: true,
                preload: [0,1] // Will preload 0 - before current, and 1 after the current image
              }
            });
        }
    }); 
    return methods;
};

 $.fn.active = function(options){

          return this.each(function(){
             var me = $(this);
             var s = $.extend({loading:'ang x l'},options,true);
             var loading = me.attr("data-loading");
             me.addClass("readonly").data("html",me.html()).html(loading||s.loading);
          });
        };
        $.fn.inactive = function(){

          return this.each(function(){
             var me = $(this);
             me.removeClass("readonly").html(me.data("html"));
          });
        };

$.fn.formAction = (function(){
    var forms = {};


    return function(options){
        return this.each(function(){
            var ele = $(this);
            options = $.extend({
                
            },options,true);
            ele.validate(options);

            var id_ = this.id;
            if(id_){
                if(!forms[id_])forms[id_] = {};
                //
                ele.find('change input','input,textarea',function(){
                   if(this.name){
                      forms[id_][this.name] = this.value;
                   } 
                });
                //auto bind
                for(var i in forms[id_]){
                    var a = ele.find(`[name=${i}]`);
                    if(a.length){
                        switch(a[0].toLowerCase()){
                            case "input": 
                                if(['radio','checkbox'].includes(this.type)){
                                    this.cheched = this.value == forms[id_][i];
                                }else{
                                    this.value = forms[id_][i];
                                }
                            break;
                            default:
                                this.value = forms[id_][i];
                            break;
                        }
                    }
                }
            }
            
        });
    };
})();

(function(win){
   function calculateAspectRatioFit(srcWidth, srcHeight, maxWidth, maxHeight) {

    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);

    return { width: srcWidth*ratio, height: srcHeight*ratio };
 }


  /*
  this.width, this.height, options.width,options.height
   */
  win.resizeImage =  function(options) {


  const reader = new FileReader();
    reader.onload = function (e) {
        const img = new Image();
        img.src = e.target.result;
        img.onload = function () {
            const canvas = document.createElement("canvas");
            const ctx = canvas.getContext("2d");
            
            var a = calculateAspectRatioFit(this.width, this.height, options.width,options.height);
            canvas.width = a.width;
            canvas.height = a.height;
            
            ctx.drawImage(img, 0, 0, a.width,a.height);
            
            const resizedBase64 = canvas.toDataURL("image/jpg");

            options.callback(resizedBase64);
          };
        };
        reader.readAsDataURL(options.file);
       
         
};
  function readURL(input,f) {
   
      var reader = new FileReader();
      
      reader.onload = function(e) {
        if(f)f.call(input,e.target.result);
      };
      
      reader.readAsDataURL(input);
  }
  function dataURLtoFile(dataurl, filename) {
    var arr = dataurl.split(','),
        mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[arr.length - 1]), 
        n = bstr.length, 
        u8arr = new Uint8Array(n);
    while(n--){
        u8arr[n] = bstr.charCodeAt(n);
    }
    var file = new File([u8arr], (filename||Date.now())+"."+mime.split('/')[1], {type:mime});
    file.base64 = dataurl;
    return file;
}
function base64MimeType(encoded) {
    var result = null;
  
    if (typeof encoded !== 'string') {
      return result;
    }
  
    var mime = encoded.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);
  
    if (mime && mime.length) {
      result = mime[1];
    }
  
    return result;
}
// const uploadFiles = (url, files, onProgress) =>
//   new Promise((resolve, reject) => {
//     const xhr = new XMLHttpRequest();
//     xhr.upload.addEventListener('progress', e => onProgress(e.loaded / e.total));
//     xhr.addEventListener('load', () => resolve({ status: xhr.status, body: xhr.responseText }));
//     xhr.addEventListener('error', () => reject(new Error('File upload failed')));
//     xhr.addEventListener('abort', () => reject(new Error('File upload aborted')));
//     xhr.open('POST', url, true);
//     const formData = new FormData();
//     Array.from(files).forEach((file, index) => formData.append(index.toString(), file));
//     xhr.send(formData);
//   });
  // if(!win.uploadFile){
  //   win.uploadFile = function(file,f,id) {
  //     let formData = new FormData(); 
  //       if(id){
  //           formData.append("id", id);
  //       }          
  //       formData.append("file", file);


  //       fetch('https://data.donggiatri.com/upload.php', {
  //         method: "POST", 
  //         body: formData
  //       }).then(function(res){return res.json()}).then(function(r){
  //          try{
  //              r= JSON.parse(r);
  //          }catch(e){}
  //          f(r);
  //       });
  //   };
  // }

  var callback = null;
  var id_ = "upload"+Date.now();
   var uploadinput = null;

  var load = 0;
  function init(){
    if(load)return;
    load =1;

     $("body").append(`<div style="position: absolute;top: -100%;"><label for="${id_}" class="${id_}">anc</label><input id="${id_}" type="file"  /></div>`);
     uploadinput = $("#"+id_).on("change",function(){
       var files = this.files;

       for(var i=0; i<files.length;i++){
           
           var file = files[i];
           
           (function(f){
             f.id = Date.now();
             readURL(f,function(e){
               f.base64 = e;
              callback(f,function(data){
                console.log(data);
              });
              // callback = null;
             });
           })(file);
          
          
       }
       
    });
  }
  win.File = window.File ||{};
  win.File.settings ={
     width:105,
     upload : "https://data.donggiatri.com/databases/upload.php",
     uploadbase64 : "https://data.donggiatri.com/databases/upload.php",
     onData : function(data){
       return data;
     },
     onHeader : function(headers){
       return headers;
     }
  };
  /*
    File.pickerImage({ 
      callback:function(file,callback){
          me.src=file.base64;

          form.find('[role="progressbar"]').remove();
          $(me).closest("div").css("position","relative").prepend(`<div role="progressbar"  class='center' aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="--value: 0;--size:30px"></div>`);

          //

          uploadFile({file:file,name:name},"api/upload/file/",function(r){
              form.find('[role="progressbar"]').remove();
              form.find("."+name).val(r);
          },{
              onProgress: function(per){
                  per = Math.ceil(per*100);
                  console.log(per);
                  form.find('[role="progressbar"]').css("--value",per);
              }
          }); 
      }
    });
  */
  win.File.pickerImage = function(options){
     win.uploadFiles("image",options.callback,1);
  };
  win.File.pickerImages = function(options){
     win.uploadFiles("images",options.callback,10);
  };
  win.File.readURL =readURL;
  win.File.imgUpload=  function (ele,options){
    if(options.height){
      ele.height(options.height);
    }

    var type = options.type?`accept="${options.type}"`:"";

    var img = options.value?`background-image:url(${options.value})`:"";
    var id ="u"+[1,Date.now()].random();
    ele.html(`
        <input type="hidden" value="${options.value||""}" name="${options.field||""}" class="${options.field||""}">
              <label for="${id}" aria-label="camera" class="boximage bg" style="position: relative;
        background-color: #dedede;
    color: #333;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    padding: 64px;
    border-radius: 16px;
    width: 50%;
    margin: 0 auto;
    cursor: pointer;background-size: contain;${img}">
                <span for="${id}" aria-label="camera" class="anticon anticon-camera" style="font-size: 30px; color: rgb(51, 51, 51);">
                    <svg viewBox="64 64 896 896" focusable="false" data-icon="camera" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"></path></svg>
                </span>
                
                <span>${options.label}</span> 

                <div class="badge badge-warning progressbarper" style='position:absolute;bottom:10px'></div>
             </label>
             <input type="file" ${type} style="opacity:0;position:absolute;top:100%;z-index:-1" id="${id}" />
   `);
     ele.find("#"+id).on("change",function(e){
  
          var me =$(this).closest(".boximage");

          // var hRatio = canvas.width / image.width;
          //   var vRatio = canvas.height / image.height;
          //   var ratio = Math.min(hRatio, vRatio);

          resizeImage({
            file:this.files[0],
            width: 320,
            height:680, 
            callback : function(src){
                 var form = $(me).closest("form");
               if(form.length==0){
                  form = $(me).closest("div");
               }
               var parent = $(me).closest("div");
             
               var name = options.name||options.field||"";
               
                $(me).css("background-image","url("+src+")");

                 
                var box  =$(me).parent().find(".progressbarper");
                //

                uploadFile({file:src,name:name},options.url||File.settings.upload,function(r){ 
                   box.html("");
                   var url = typeof r=="string"?r:r.url;
                    form.find("."+options.field).val(url);

                    if(options.callback){
                      options.callback(url);
                    }
                },{
                    onProgress: function(per){
                        per = Math.ceil(per*100);
                        console.log(per);
                        
                        box.html(per+"%");

                    }
                }); 
            }
          });
     });
  };

  
  win.uploadFiles = function(type,f,many){
    init();
    callback = f;
    switch (type) {
      case "image":
           uploadinput.attr("accept","image/*").attr("capture","user");
      break;
      case "images":
        uploadinput.attr("accept","image/*").attr("capture","user");
      break;
      case "videos":
        uploadinput.attr("accept","video/*").attr("capture","environment");
      break;
      case "audio":
        uploadinput.attr("accept","audio/*");
      break;
      case "imagesvideos":
        uploadinput.attr("accept","audio/*,video/*").attr("capture","environment");
      break;
      default:
       uploadinput.removeAttr("accept");
      break;
    } 
    uploadinput.removeAttr('multiple');
    if(many>1){
      uploadinput.attr('multiple','multiple');
    }
     
     document.querySelector("."+id_).click();

  };
  /*
    uploadFile({file:file,name:name},"api/upload/file/",function(r){
        
    },{
        headers:{},
        onProgress: function(per){
            per = Math.ceil(per*100);
             
        }
    }); 
    //
    uploadFile({
      data:{file:file,name:name},
      url : "api/upload/file/",
      headers : {},
      callback : function(r){
          
      },
      onProgress: function(per){
        per = Math.ceil(per*100);
        console.log(per);     
      }
    });
  */
  String.prototype.uploadFile = function(options){
    var url = this.toString();
     uploadFile(options.data,url,options.callback,options);
  };
  win.uploadFile = function (data,url,f,options) {

      if(!url){
         data = data.data;
         url = data.url;
         f = data.callback;
         options = data;
      }


      url = url?url:File.settings.upload;

      let formData = new FormData();  

      //action on hook
      File.settings.onData(data);

      for(var i in data){
         if(typeof data[i] !="function"){
           formData.append(i, data[i]);
         } 
      }       



    var xhr = new XMLHttpRequest();

    

     
    


    xhr.upload.addEventListener('progress', function(e){
       if(options.onProgress)options.onProgress(e.loaded / e.total,e);
    });
    xhr.addEventListener('load', function(){
      var r = xhr.responseText;
      //{ status: xhr.status, body: xhr.responseText }
      try{
           r= JSON.parse(r);
       }catch(e){}
       f(r);
    });
    xhr.addEventListener('error', function(){
      // reject(new Error('File upload failed'))
    });
    xhr.addEventListener('abort', function(){
      // reject(new Error('File upload aborted'))
    });
    xhr.open('POST', url, true);


    var headers = options.headers||{};
 
    //action on hook
    File.settings.onHeader(headers);
    for(var ii in headers){
       xhr.setRequestHeader(ii, headers[ii]);
    }  
          
    // const formData = new FormData();
    // Array.from(files).forEach((file, index) => formData.append(index.toString(), file));
    xhr.send(formData);
      
      // fetch(url?url:'https://donggiatri.com/chat/upload.php', {
      //   method: "POST", 
      //   body: formData
      // }).then(function(res){return res.json()}).then(function(r){
      //    try{
      //        r= JSON.parse(r);
      //    }catch(e){}
      //    f(r);
      // });
  };

  win.File.pickerImageCrop = function(options){
     window.File.pickerImage({
        callback : function(info){ 
          uploadCrop(info.base64,$.extend({},options,true)).then(function(r){ 
            if(options.callback)options.callback(dataURLtoFile(r),info);
          }); 
        }
      });
  };
  String.prototype.pickerImageCrop = function(options){
      options.name = this.toString();
      File.pickerImageCrop(options);
  };
  
  win.File.uploadFile = win.uploadFile;
  win.File.pickerImageResize = function(options){

      window.File.pickerImage({
        callback : function(info){ 
          options = $.extend({},options,true);

             const resize_width =options.width||600;

              var MAX_WIDTH = options.width||300;
              var MAX_HEIGHT = options.height||300;

            
           
            const img = new Image();
            img.src = info.base64;
            
            img.onload = function(el) {
              const elem = document.createElement('canvas');

              const scaleResize = resize_width / el.target.width;
              elem.width = resize_width;
              elem.height = el.target.height * scaleResize;

              // var width = img.width;
              // var height = img.height;

              // // Change the resizing logic
              // if (width > height) {
              //     if (width > MAX_WIDTH) {
              //         height = height * (MAX_WIDTH / width);
              //         width = MAX_WIDTH;
              //     }
              // } else {
              //     if (height > MAX_HEIGHT) {
              //         width = width * (MAX_HEIGHT / height);
              //         height = MAX_HEIGHT;
              //     }
              // }


              const ctx = elem.getContext('2d');
              // ctx.mozImageSmoothingEnabled = false;
              // ctx.webkitImageSmoothingEnabled = false;
              // ctx.msImageSmoothingEnabled = false;
              // ctx.imageSmoothingEnabled = false;
              ctx.drawImage(el.target, 0, 0,elem.width, elem.height);

              const srcEncoded = ctx.canvas.toDataURL('image/jpeg', 1);

               if(options.callback)options.callback(srcEncoded,info);
            }
        }
      });
      
 
  };

 
/*
    $(".logoshop").on("click",function(){
       var me = this;
      "logo".pickerImageResize({
        width:105, 
        ready : function(src,file){
           me.src = src;
        },
        callback:function(src,ac){
          me.src=src;
          
          if(ac=="end"){
            //update data
               post(site_url_ajax("api/store/update_kv/"),{v:src,k:"logo"},function(){

               },true);
          } 
        }
      });
    });
*/
String.prototype.pickerImageResize = function(options){
  options = $.extend({width:File.settings.width}, options,true);

  var name = this.toString();

  File.pickerImageResize({
        width:options.width,
        ready : options.ready, 
        callback:function(src){

          if(options.ready){
            options.ready(src.base64,src);
          }

          var url = options.url||File.settings.upload;
          
          options.callback(src,"begin");
          File.uploadFile({image_base64:src,name:name},url,function(r){
             options.callback(r.url,"end");
          },{
            onProgress : options.onProgress
          });
           
        }
    });
};

})(window);

  // modal.find(".imgroombg").on("click",function(){
  //     window.uploadFiles("images",function(file){
        
  //        uploadFile(file,function(r){
  //          if(r.code){
  //            //find id to update
  //            window.roomActive.avatar = r.url; 

  //            modal.find(".imgroom").attr("src",window.roomActive.avatar);
  //          } 
            
  //        });
  //    });
  // });

  
$.fn.FileDrop = function(options){

      this.each(function(){
          $(this).data("FileDrop",this);
          var dropArea = this;
          var settings = $.extend({
            url:'https://api.cloudinary.com/v1_1/joezimim007/image/upload',
            headers:{},
            handleFiles: function(files){

            },
            updateProgress: function(i,per){

            },
            complete: function(xhr,file,i){

            },
            error: function(xhr,file,i){

            }
          },options,true);
          // Prevent default drag behaviors
          ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
            document.body.addEventListener(eventName, preventDefaults, false);
          })

          // Highlight drop area when item is dragged over it
          ;['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
          });

          ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
          });

          // Handle dropped files
          dropArea.addEventListener('drop', handleDrop, false);

          function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
          }

          function highlight(e) {
            dropArea.classList.add('highlight');
          }

          function unhighlight(e) {
            dropArea.classList.remove('active');
          }

          function handleDrop(e) {
            var dt = e.dataTransfer;
            var files = dt.files;

            handleFiles(files);
             dropArea.classList.add('highlight');
          }

         

          function handleFiles(files) {
            files = [...files]; 
            files.forEach(uploadFile);
            

            settings.handleFiles(files);
          }

         
          function uploadFile(file, i) {
            var url = settings.url;
            var xhr = new XMLHttpRequest();
            xhr.file  =file;
            var formData = new FormData();


            
            xhr.open('POST', url, true);
            for(var i in settings.headers){
              xhr.setRequestHeader(i,settings.headers[i]);
            }
            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');

            // Update progress (can be used to show progress indicator)
            xhr.upload.addEventListener("progress", function (e) {
              settings.updateProgress(i, e.loaded * 100.0 / e.total || 100,xhr.file);
            });

            xhr.addEventListener('readystatechange', function (e) {
              if (xhr.readyState == 4 && xhr.status == 200) {
                settings.updateProgress(i, 100,this.file);
                var txt = xhr.responseText;
                try{
                  txt= JSON.parse(txt)
                }catch(e){}

                settings.complete(txt,file,i,this.file);
              } else
              if (xhr.readyState == 4 && xhr.status != 200) {
                settings.error(xhr,file,i,this.file);
              }
            });

            formData.append('upload_preset', 'ujpu6gyk');
            formData.append('file', file);
            xhr.send(formData);
            
          }
      });
 };
 
/*

How to use

 $(document).ready(function () {
  $(document).on("click","[image-resize]",function(){
       var me = this;
       var form = $(me).closest("form");
       if(form.length==0){
          form = $(me).closest("div");
       }
       var parent = $(me).closest("div");
       var name = $(me).attr("image-resize");
       console.log(name);

       var bar = null;

       name.pickerImageResize({
        url : File.settings.uploadbase64,
        width:$(me).attr("image-size")||105, 
        ready : function(src,file){
            me.src=src;
            bar = $.progressCircle({parent:parent,size:40});
        },
        onProgress : function(per){
            per = Math.ceil(per*100);
            bar.update(per);
        },
        callback:function(src,ac){
 
          if(ac=="end"){
            bar.remove();
            form.find("."+name).val(src);
          } 
        }
      });
    }).on("click","[image-picker-name]",function(){
       var me = this;
       //  <img class="avatar" image-picker-size="75" image-picker-control=".name" image-picker-name="image" image-picker-target="image" src="" ><br/>


       File.pickerImage({ 
        callback:function(src,callback){
            var form = $(me).closest("form");
           if(form.length==0){
              form = $(me).closest("div");
           }
           var parent = $(me).closest("div");
           var field = $(me).attr("image-picker-name");   

           var name = field;
           var control = $(me).attr("image-picker-control"); 
            if(control){
                name = form.find(control).val().make_slug();
            }

            me.src=src.base64;

            var bar =  $.progressCircle({parent:parent,size:40});

            //

            uploadFile({file:src,name:name},File.settings.upload,function(r){
                bar.remove();
                form.find("."+field).val(r.url);
            },{
                onProgress: function(per){
                    per = Math.ceil(per*100);
                    console.log(per);
                    bar.update(per);
                }
            }); 
        }
      });
    });
  
function previewFile(file) {
  let reader = new FileReader();
  reader.readAsDataURL(file);
  reader.onloadend = function () {
    let img = document.createElement('img');
    img.src = reader.result;
    document.getElementById('gallery').appendChild(img);
  };
}
let uploadProgress = [];
let progressBar = document.getElementById('progress-bar');

function initializeProgress(numFiles) {
  progressBar.value = 0;
  uploadProgress = [];

  for (let i = numFiles; i > 0; i--) { 
    uploadProgress.push(0);
  } 
}

function updateProgress(fileNumber, percent) {
  uploadProgress[fileNumber] = percent;
  let total = uploadProgress.reduce((tot, curr) => tot + curr, 0) / uploadProgress.length;
  progressBar.value = total;
}
  $("#drop-area").FileDrop({
     url:"https://faucet.donggiatri.com/upload/",
     handleFiles: function(files){
        initializeProgress(files.length);
        files.forEach(previewFile);
     },
      updateProgress: function(fileNumber, percent){
          updateProgress(fileNumber, percent)
      }
  });
 });
*/

(function(win){
  win.getJsonFromUrl= function (url) {
  var regex = /[?&]([^=#]+)=([^&#]*)/g,
      url = url?url:window.location.href,
      params = {},
      match;
  while(match = regex.exec(url)) {
      params[match[1]] = match[2];
  }
  return params;
} 
String.prototype.URLParams  = function(){  
    return getJsonFromUrl(String(this));
};

   function getSearchOrHashBased(url) {
    if(!url) url = location.href;
    var question = url.indexOf("?");
    var hash = url.indexOf("#");
    if(hash==-1 && question==-1) return "";
    if(hash==-1) hash = url.length;
    return question==-1 || hash==question+1
      ? url.substring(hash)
      : url.substring(question+1, hash);
  }

  // use query = getSearchOrHashBased(location.href)
  // or query = location.search.substring(1)
  function getJson(query) {
    var result = {};
    query.split("&").forEach(function(part) {
      if(!part) return;
      part = part.replaceAll("+", " ");
      var eq = part.indexOf("=");
      var key = eq>-1 ? part.substring(0,eq) : part;
      var val = eq>-1 ? decodeURIComponent(part.substring(eq+1)) : "";
      var from = key.indexOf("[");
      if(from==-1) result[decodeURIComponent(key)] = val;
      else {
        var to = key.indexOf("]",from);
        var index = decodeURIComponent(key.substring(from+1,to));
        key = decodeURIComponent(key.substring(0,from));
        if(!result[key]) result[key] = [];
        if(!index) result[key].push(val);
        else result[key][index] = val;
      }
    });
    return result;
  }

  function isIndexArray(data){
    if(data.length==0)return true;
    return !isNaN(data[0]);
  }
  function convert(data){
    var a={};
    for(var i in data){
        
       if(typeof data[i]!="function"){
          a[i] =  data[i];
       }
    }
    data.map(function(v,i){
       a[i]= v;
    });
    return a;
  }

  win.parse_string = function(str){
    var data = getJson(str);
    for(var i in data){
       //check is array index or no
       if(!isIndexArray(Object.keys(data[i]))){
          data[i] = convert(data[i]);
       }
    }
    return data;
  };

   String.prototype.parse_string  = function(){  
        return parse_string(String(this));
   };
})(window);



(function(win){
   function assignauth(token){
      if(win.$ && token){
         var a = $('[name="auth-token"]');

           if(a.length){
             a.remove();
             
           }
         $("head").append('<meta name="auth-token" content="'+token+'">');

         $.ajaxSetup({
           async: true,
           type: 'POST',
            error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                console.log('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                console.log('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                console.log('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                console.log('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                console.log('Time out error.');
            } else if (exception === 'abort') {
                console.log('Ajax request aborted.');
            } else {
                console.log('Uncaught Error.\n' + jqXHR.responseText);
            }

            if(this.success)
            this.success(jqXHR.responseText);
        },
           beforeSend:function(xhr,options){
              
               var auth =$('[name="auth-token"]').attr("content");
               if(auth){
                 xhr.setRequestHeader( 'auth-token',auth);
               }
                
               
           }
         });
     }

     if(document.location.origin.includes("localhost")){
        win.post = function(url,data,f){
            var auth =$('[name="auth-token"]').attr("content");
           
            var form = null;

            if(data instanceof FormData){
                form  = {
                    method: "POST",
                    body: data,
                    headers: {
                      'Auth-token': auth||""
                    }
                };
            }else{
                 
                form  = {
                    method: "POST",
                    body: JSON.stringify(data),
                    headers: {
                      'Auth-token': auth||""
                    }
                };
            }

           

            fetch(url,form).then(function(res){ return res.text(); })
            .then(function(data){ 
                try{
                    data = JSON.parse(data);
                }catch(e){}
                f(data);
             });
        };
     }
  }
  var key_u = win.global&&win.global.user_sesion?win.global.user_sesion:"{{slug}}__u__";
  var storage = null;
  var local = win.localStorage?win.localStorage:{};
  // setTimeout(function(){
  //   win.user.fetch(function(){

  //   });
  // },3000);
  // var domain = typeof site_url_ajax=="function"?site_url_ajax():"https://f7.donggiatri.com/users/demo/chat/api/";
  win.user = {
     post : function(url,data,f){
        post(url,data||{},f,true);
        return this;
     },
     prefix : function(k){
        return key_u+(k?k:"");
     },
     u:null,
     ui:{
        render : function(modal){
            var u = win.user.hasLogin();
            for(var i in u){
              var a = modal.find('.'+i);
              if(a.length){
                  switch(a[0].nodeName.toLowerCase()){
                    case 'input':
                        if(a[0].type=='radio' || a[0].type=='checkbox' ){
                            a[0].checked = a[0].value==u[i];
                        }else{
                          a.val(u[i]);
                        }
                    break;
                    case 'select':
                    case 'textarea':
                        a.val(u[i]);    
                    break;
                    default:
                        a.html(u[i]);   
                    break;
                  }
                  
                }
            }   
        }
     },
     storage : {
         clear: function(){

            var a = window.user.prefix();
            Object.keys(window.localStorage).map(function(k){

                if(k.includes(a)){
                    window.localStorage.removeItem(k);
                }
                
            });
         },
         get: function(k,def){
 
            var u = window.localStorage[window.user.prefix(k)];
            try{
              return JSON.parse(u);
            }catch(ex){ 
            }

            return def;
         }, 
         set: function(k,v){ 
            window.localStorage.setItem(window.user.prefix(k),typeof v=="object"?JSON.stringify(v):v);
         }
     },
     hasLogin : function(){
        if(this.u)return this.u;
        storage = local[key_u];
        storage = storage?JSON.parse(storage):null;
       return storage;
     },
     login : function(data){
        
       
        if(data){
            local.setItem(key_u,JSON.stringify(data)); 
            assignauth(data.session_id||data.token); 
        }
        return this;
     },
     logout : function(url){
        storage =null;
        $('[name="auth-token"]').attr("content","");
        this.storage.clear();
        this.u=null;
        if(url) mainView.router.navigate(url);

        return this;
     },
     set:function(k,v){
        if(storage){
          storage[k] = v;
          local.setItem(key_u,JSON.stringify(storage)); 
        }
        return this;
     },
     append:function(obj){
         storage = storage?storage:{};
         storage = $.extend(storage,obj,true);
          local.setItem(key_u,JSON.stringify(storage)); 
        this.u = storage;
        
        return this;
     },
     profile:function(f,url){ 
        var me = this;
         me.u = this.hasLogin(); 
         if(me.u){

            this.post(url||site_url_ajax("user/?a=profile"),{},function(r){
                if(r.code){
                   
                    for(var i in r.data){
                        me.u[i] = r.data[i];
                    }
                    assignauth(me.u.session_id||me.u.token);
                }

                if(f)f(me.u);
            });
            
         } 
        return this;
     },
     fetch:function(f,url){
        var me = this;
         me.u = this.hasLogin(); 
         if(me.u){

            post(url||site_url_ajax("user/?a=fetch"),{},function(r){
                if(r.code){
                   
                    for(var i in r.data){
                        me.u[i] = r.data[i];
                    }
                    assignauth(me.u.session_id||me.u.token);
                }

                if(f)f(me.u);
            },true);
            
         } 
        return this;
     },
     sync:function(url,token,f){
        var me= this;
        post(url||site_url_ajax("user/?a=parse_token"),{token:token},function(r){
            if(r.code){
                me.u = r.user;
                assignauth(me.u.session_id||me.u.token);
            }

            if(f)f(r);
        },true);
          
        
        return this;
     }
  };
  win.sdk = win.sdk?win.sdk:{};
  win.sdk.user = win.user;
  
})(window);

  function isTouchDevice() {
          return (('ontouchstart' in window) ||
             (navigator.maxTouchPoints > 0) ||
             (navigator.msMaxTouchPoints > 0));
        }

        function decodeHTMLEntities(text) {
    var entities = [
        ['amp', '&'],
        ['apos', '\''],
        ['#x27', '\''],
        ['#x2F', '/'],
        ['#39', '\''],
        ['#47', '/'],
        ['lt', '<'],
        ['gt', '>'],
        ['nbsp', ' '],
        ['quot', '"']
    ];

    for (var i = 0, max = entities.length; i < max; ++i) 
        text = text.replace(new RegExp('&'+entities[i][0]+';', 'g'), entities[i][1]);

    return text;
}
  function array_merge(a,b,key){
     key=key?key:"id";
      var l = a.map(function(v){
          return v[key];
        });
        l= b.filter(function(v){
          return !l.indexOf(v[key]);
        });
     return l.concat(a);
  }
  Array.prototype.merge = function(b,key){
    return  array_merge(this,b,key);
  };

//////////////////////////////////////////
 function calcCrow(lat1, lon1, lat2, lon2) 
{
 var R = 6371; // km
 var dLat = toRad(lat2-lat1);
 var dLon = toRad(lon2-lon1);
  lat1 = toRad(lat1);
  lat2 = toRad(lat2);

 var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
   Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
 var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
 var d = R * c;
 return d;
}

// Converts numeric degrees to radians
function toRad(Value) 
{
   return Value * Math.PI / 180;
}
function check_unique(array, size) {
    var flag = false;
    
    array.sort();
    for (var i=0; i<size-1; i++) {
      if (array[i] == array[i+1]) {
        flag = true;
        break;
      }
    }
    
    return flag;
  }
 // <td style="text-align:center;margin-top:8px;">
  //   <span style="font-size:11px">My pham han quoc</span><br/>
  //   <img width="100%" src="https://access.linkpos.top/barcode.php?text=MP002">
  //   <span style="font-size:11px">mp002</span><br/>
  //   <span>65.000 VN</span>
  // </td>
   function chunkArray (arr, len) {
    var chunks = [],i = 0,n = arr.length;

    while (i < n) {
      chunks.push(arr.slice(i, i += len));
    }

    return chunks;
  } 
function getQrcode(data,ele){
  var url =`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=`+encodeURIComponent(typeof data=="object"?JSON.stringify(data):data);
  if(ele){
    return `<img src="${url}" width=150 height=150 alt="" />`;
  }
  return url;
}

if(window.ADevice){

    $("body").addClass("isRN");
}

$(document).on("page::back", function(e) {
 
  if($(".page-current").attr("id")=="home"){
    window.close();
  }
    
}).on("click","[data-frame]",function(e){
    e.preventDefault();
    var url = $(this).attr("data-frame");
    window.current_tag = $(this).data();
      $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        //console.log(name);

        handlers[name] = window.current_tag;  
    });
     mainView.router.navigate("/webview/"+encodeURIComponent(url));

  }).on("click",".toolbar-inner .tab-link",function(){
    var parent = $(this).closest(".toolbar-inner");
    parent.scrollCenter(this, 300);

  }).on("click","ul.filter__controls li",function(){
    var parent = $(this).closest(".filter__controls");
    parent.scrollCenter(this, 300);

  }).on("click","[data-router]",function(){
   var url = $(this).attr("data-router");
   if($(this).attr("data-open")){
      window.open(url);
   }else{
     window.current_tag = $(this).data();


     $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = window.current_tag;  
     });

     if(url[url.length-1]!="/"){

        url = url+"/";
     }

     mainView.router.navigate(url);
   }
}).on("click","[data-router-reset]",function(){
   var url = $(this).attr("data-router-reset");
   if($(this).attr("data-open")){
      window.open(url);
   }else{
     window.current_tag = $(this).data();


     $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = window.current_tag;  
     });

     if(url[url.length-1]!="/"){

        url = url+"/";
     }
     //reset
     if(app)app.views.main.router.history=['/home/'];
     mainView.router.navigate(url);
   }
}).on("click","[data-params]",function(){
   window.paramsData = {
    params: $(this).data('params'),
    ele: $(this)
   };
}).on("click","a",function(e){

  if(!$(this).hasClass("external") && !$(this).hasClass("back")){
    e.preventDefault();
    e.stopImmediatePropagation();

    var href=  this.href;
    if(href.includes("open=true")){
        window.open(href);
        return;
    }

    
      window.current_tag = $(this).data();
      $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = window.current_tag;  
     });
  }
}).on("click",".remove",function(){
    setTimeout(function(){
      $(this).remove();
    },100);
}).on("keyup","input[type='text'],input[type='tel'],input[type='email']",function(){
  var me = $(this);
  if(this.value){
    if(!this.span && me.closest(".form-control").length){
   
      var offset = me.position();
      me.find(".inputclose").remove();
      var span = $(`<span class="inputclose">x</span>`);
      span.css({position:"absolute",top: (offset.top-8)+"px",left:(me.width()-18)+"px","z-index":10,padding:"8px"});
      span.insertAfter(me);
      span.on("click",function(){
         me.val("");
         me[0].span = null;
      });
      this.span = span;
    }
  } 
  
}).on("blur","input[type='text'],input[type='tel'],input[type='email']",function(){
  var me = $(this);
  if(this.span && me.closest(".form-control").length){
    me.closest("div").find(".inputclose").remove();
    this.span = null;
  }
});


$(document).on('click','.groupactive>*',function(){
    var cls = $(this).parent().attr('data-class');
    cls = cls?cls:'active'; 
    $(this).addClass(cls).siblings().removeClass(cls);
}).on('click','.toggleClass',function(){
     $(this).toggleClass("active");
});

$(document).on("click",".closeapp",function(){
   window.close();
 }).on("scroll",function(){
    $("body").addClass("scrolling");
    delay(function(){
      $("body").removeClass("scrolling");
    },1000);
 }).on('touchmove', function(event) {
    $("body").addClass("scrolling");
    var distanceY = window.pageYOffset;
    
        delay(function(){
        $("body").removeClass("scrolling");
      },1000);
   
});

 $(document).on("keyup",".display_money",delay(function(){
        this.value = show_money_none(this.value.replace(",",""));
    },700)).on("submit","form.ajax",function(e){
    e.preventDefault();
    var f = this;
    var form = new FormData(f);
    postForm(this.action,form,function(res){

        $(f).trigger("onAjax",[res]);
    });

    return false;
 });


 
 


// native app
$(document).on("click","[data-back]",function(){
  window.history.back();
}).on("page::onFocus",function(e){
 
}).on("click","[data-admod]",function(){
   window.admod();
});

// 

window.hardwareBackPress = function(){
  if($(".modal.in").length){
    var l = $(".modal.in").length;
    if(l==1){
        $(".modal.in").modal("hide");
    }else{
        $(".modal.in").eq(l-1).modal("hide");
    }
  }else{
     window.history.back();
  }
};




 // Create another event bus
// const notificationEvents = new Framework7.Events();

// notificationEvents.on('notificationReceived', function (notification) {
//   // do something with notification
// })

// somewhere in the app send notification
// notificationEvents.emit('notificationReceived', {
//   title: 'New message',
//   from: 'John Doe',
// });
(function(){
    var tlp = `<div class="wrapper wheel">
                 
      <div class="container">
        <canvas></canvas>
        <button class="spin-btn">Spin</button>
        <img src="assets/spinner-arrow-.svg" alt="spinner-arrow" />
      </div>
      
    </div>`;


    $.fn.wheel = function(options){
        return this.each(function(){ 
            var abc =  window.wheel(this,options);
            $(this).data('wheel',abc);
        });
    };
    var first = 0;
    window.wheel = function (that,options){
        if(first==0){
            first = 1;
            $('body').append(`<style>.wheel .spin-btn,.wheel .wrapper{transform:translate(-50%,-50%);top:50%;left:50%}.wheel .wrapper{width:90%;max-width:34.37em;max-height:90vh;background-color:#fff;position:absolute;padding:3em;border-radius:1em;box-shadow:0 4em 5em rgba(27,8,53,.2)}.wheel .container{position:relative;width:100%;height:100%}.wheel canvas{max-height:inherit;width:inherit;top:0;padding:0}@keyframes rotate{100%{transform:rotate(360deg)}}.wheel .spin-btn{position:absolute;height:26%;width:26%;border-radius:50%;cursor:pointer;border:0;background:radial-gradient(#fdcf3b 50%,#d88a40 85%);color:#c66e16;text-transform:uppercase;font-size:12px;letter-spacing:.1em;font-weight:600}.wheel img{position:absolute;width:4em;top:45%;right:-8%}@media screen and (max-width:768px){.wheel .wrapper{font-size:12px}.wheel img{right:-5%}}</style>`);
        }
        options = $.extend({
            onBegin:function(){},
            onContinue:function(){
              return true;
            },
            onResult:function(data){

            },
        },options,true);
        /////
        ele = $(that);
        ele.html(tlp);

        var wheel = that.querySelector("canvas");
        var spinBtn = that.querySelector(".spin-btn"); 
        //Object that stores values of minimum and maximum angle for a value
        var rotationValues = options.data?options.data:[
          { minDegree: 0, maxDegree: 30, value: 2,text:'Xin chc mng! <br/> bn nhn 2 lt quay tip',bonus:2,bg: 'rgba(255, 26, 104, 0.2)',image:{
                    src: 'https://cdn0.iconfinder.com/data/icons/google-material-design-3-0/48/ic_book_48px-256.png',
                    height: 25,
                    width: 25
            }},
          { minDegree: 31, maxDegree: 90, value: 1, text:'Hn gp bn ln sau',bonus:-1,bg: 'rgba(255, 206, 86, 0.2)',image:{
                    src: 'https://cdn3.iconfinder.com/data/icons/glypho-free/64/pen-checkbox-256.png',
                    height: 25,
                    width: 25
                  },  },
          { minDegree: 91, maxDegree: 150, value: 6,text:'Xin chc mng! <br/> bn nhn c 1',price:1,bg: 'rgba(75, 192, 192, 0.2)',image: {
                    src: 'https://cdn1.iconfinder.com/data/icons/jumpicon-basic-ui-glyph-1/32/-_Home-House--256.png',
                    height: 25,
                    width: 25
                  },  },
          { minDegree: 151, maxDegree: 210, value: 5 , text:'Xin chc mng! <br/> bn nhn c 200',price:200,bg: 'rgba(153, 102, 255, 0.2)',image:{
                    src: 'https://cdn1.iconfinder.com/data/icons/social-media-vol-3/24/_google_chrome-256.png',
                    height: 25,
                    width: 25
                  },},
          { minDegree: 211, maxDegree: 270, value: 4, text:'Hn gp bn ln sau',bonus:-1,bg: 'rgba(255, 159, 64, 0.2)',image:{
                    src: 'https://cdn0.iconfinder.com/data/icons/google-material-design-3-0/48/ic_book_48px-256.png',
                    height: 25,
                    width: 25
                  }, },
          { minDegree: 271, maxDegree: 330, value: 3, text:'Hn gp bn ln sau',bonus:-1,bg: 'rgba(0, 0, 0, 0.2)',image:{
                    src: 'https://cdn3.iconfinder.com/data/icons/glypho-free/64/pen-checkbox-256.png',
                    height: 25,
                    width: 25
                  },  },
          { minDegree: 331, maxDegree: 360, value: 2,text:'Xin chc mng! <br/> bn nhn c 500',price:500,bg:  'rgba(20, 43, 152, 0.2)',image:{
                    src: 'https://cdn1.iconfinder.com/data/icons/jumpicon-basic-ui-glyph-1/32/-_Home-House--256.png',
                    height: 25,
                    width: 25
                  } },
        ];
        //Size of each piece
        var data = rotationValues.map(function(v,i){
          return 16;
        });
        //background color for each piece
        var pieColors = rotationValues.map(function(i){
          return i.bg;
        });
        Chart.register(ChartDataLabels);
        Chart.defaults.plugins.datalabels.color = 'transparent';
        //Create chart
        var myChart = new Chart(wheel, {
          //Plugin for displaying text on pie chart
          plugins: [ChartDataLabels],
          //Chart Type Pie
          type: "pie",
          data: {
            //Labels(values which are to be displayed on chart)
            labels:  rotationValues.map(function(v,i){
          return i;
        }),
            //Settings for dataset/pie
            datasets: [
              {
                backgroundColor: pieColors,
                data: data,
              },
            ],
          },
          options: {
             
            //Responsive chart
            responsive: true,
            animation: { duration: 0 }, 
            plugins: {
              //hide tooltip and legend
              tooltip: false,
              legend: {
                labels: {
                            fontColor: "blue",
                            fontSize: 18
                        },
                display: false,
              },
             // Accessing labels and making them images
              labels: {
                render: 'image',
                images: rotationValues.map(function(i){
                  return i.image;
                })
              }
            },
          },
        });
        //display value based on the randomAngle
        var valueGenerator = function(angleValue){
          for (var i of rotationValues) {
            //if the angleValue is between min and max then display it
            if (angleValue >= i.minDegree && angleValue <= i.maxDegree) {
              options.onResult(i);
              spinBtn.disabled = false;
              break;
            }
          }
        };

        //Spinner count
        var count = 0;
        //100 rotations for animation and last rotation for result
        var resultValue = 101;
      
      

        var methods= {
            setData : function(data){
              rotationValues =data?data:[
                { minDegree: 0, maxDegree: 30, value: 2,text:'Xin chc mng! <br/> bn nhn 2 lt quay tip',bonus:2 },
                { minDegree: 31, maxDegree: 90, value: 1, text:'Hn gp bn ln sau',bonus:-1  },
                { minDegree: 91, maxDegree: 150, value: 6,text:'Xin chc mng! <br/> bn nhn c 1$',price:1 },
                { minDegree: 151, maxDegree: 210, value: 5 , text:'Xin chc mng! <br/> bn nhn c 200$',price:200},
                { minDegree: 211, maxDegree: 270, value: 4, text:'Hn gp bn ln sau',bonus:-1 },
                { minDegree: 271, maxDegree: 330, value: 3, text:'Hn gp bn ln sau',bonus:-1 },
                { minDegree: 331, maxDegree: 360, value: 2,text:'Xin chc mng! <br/> bn nhn c 1.000$',price:1000 },
              ];
              return this;
            },
            run : function(f){
              if(options.onContinue()!==true){
                if(f)f();
                return;
              }

                 spinBtn.disabled = true; 
                  
                  options.onBegin();
                  //Generate random degrees to stop at
                  var randomDegree = Math.floor(Math.random() * (355 - 0 + 1) + 0);
                  //Interval for rotation animation
                  var rotationInterval = window.setInterval(function(){
                    //Set rotation for piechart
                    /*
                    Initially to make the piechart rotate faster we set resultValue to 101 so it rotates 101 degrees at a time and this reduces by 1 with every count. Eventually on last rotation we rotate by 1 degree at a time.
                    */
                    myChart.options.rotation = myChart.options.rotation + resultValue;
                    //Update chart with new value;
                    myChart.update();
                    //If rotation>360 reset it back to 0
                    if (myChart.options.rotation >= 360) {
                      count += 1;
                      resultValue -= 5;
                      myChart.options.rotation = 0;
                    } else if (count > 15 && myChart.options.rotation == randomDegree) {
                      valueGenerator(randomDegree);
                      clearInterval(rotationInterval);
                      count = 0;
                      resultValue = 101;
                      f();
                    }
                  }, 10);
            }
        };

          //Start spinning
        var stop = 0;
        spinBtn.addEventListener("click",function(e){
            e.preventDefault();
            if(stop==0){
               stop = 1;
              methods.run(function(){
                  stop = 0;
              });
            }
           
        });

        return methods;
    };
})();
(function(win){
	function run(model,page){
		model.find("[data-widget]").each(function(){
			var data = $(this).data();
			var name = $(this).attr("data-widget");
			delete data.widget;

			//trigger widget box
	        $(document).trigger("Widget_"+name,[$(this)]);
			 
		});
	}
	$(document).on("onPage",function(e,page){ 
		run($(page.el),page);
	});


	//https://raw.githubusercontent.com/nicinabox/widgets.js/refs/heads/master/src/widgets.js
	//
	//need you handlerbar
	var widgets = {};
	win.f7widgets = {
		 
		add : function(name,f){
			widgets[name] =f;
			return this;
		},
		do : function(name,data,context){
			if(widgets[name]){
				return widgets[name].call(context,data);
			}
			return "";
		},
		remove : function(str){
			delete widgets[name];
			return this;
		},
		try : function(){
			 
			run($(".page.page-current"));
		}
	};
})(window);
(function(win){
    //https://stackoverflow.com/questions/8238407/how-to-parse-excel-xls-file-in-javascript-html5
     
     String.prototype.EXCEL = function(options) {
         var s = this.toString();
         // if(EXCEL.instances[s] && EXCEL.instances[s].destroy){
         //     EXCEL.instances[s].destroy();
         // } 
         // EXCEL.replace(s);
         // return EXCEL.instances[s];
        return EXCEL_GO(s,"",options);
     };
      win.EXCEL_UPDATE= function (){
          for (var i in EXCEL.instances) {
            EXCEL.instances[i].updateElement();
          }
     };

     win.EXCEL_UPLOAD= function (f){
          $(document).off('EXCEL_UPLOAD').on('EXCEL_UPLOAD',f);
     };

     var loaded =0;

     var wait = [];
     $(document).on('EXCEL_READY',function(){
        wait.map(function(n){
            EXCEL_GO.apply(this,n);
        });
        wait =[];
     });

    win.EXCEL_GO = function(file,options){

            if(typeof workbook!="object"){
                if(loaded==0){
                    loaded=1;
                    loadJS("https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js",function(){
                         
                        loadJS("https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js",function(){
                         
                            $(document).trigger('EXCEL_READY');
                        });
                    });
                }
                if(!win.workbook){
                    wait.push([file,options]); 
                }
                return;
            }
         var reader = new FileReader();

          reader.onload = function(e) {
            var data = e.target.result;
            var workbook = XLSX.read(data, {
              type: 'binary'
            });
            var list ={};
            workbook.SheetNames.forEach(function(sheetName) {
              // Here is your object
              var XL_row_object = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);
              // var json_object = JSON.stringify(XL_row_object); 
              list[sheetName] = XL_row_object;
            });
            if(options&&options.callback){
                options.callback(list);
            }
          };

          reader.onerror = function(ex) {
            console.log(ex);

          };

          reader.readAsBinaryString(file);
      };
})(window);
      
(function(win){
	win.YoutubeAPI = (function(){
		var load=0;
      function init(){
      	 $("body").append('<style>.item-yt{position:relative}.item-yt.ready:before{content:" ";position:absolute;top:0;left:0;background-color:transparent;z-index:1;height:100%;width:100%}<\/style><script type="text/javascript" id="www-widgetapi-script" src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflS50iB-/www-widgetapi.js" async=""><\/script><script type="text/javascript" src="https://www.youtube.com/player_api"><\/script>');
      
      }
      var T = function(f){
        f();
      };
      /*
      	Embed({
      	 ele:"",
	 	 videoId:'M7lc1UVf-VE',
	 	 change:function(obj){

	 	 },
	 	 onStateChange:function(e,videoId){
	 	 	var duration = event.target.getDuration();
 			if(duration){
				//show ads
 			}
	 	 },
	 	 onEnd:function(e,videoId){
	 	 	var duration = event.target.getDuration();

	 	 	//load next video
			this.loadVideoById({'videoId': videoId,
            'startSeconds': data.start_seconds,
            'endSeconds': data.end_seconds});
	 	 }
      })
       */
      T.Embed = function(options){
      	 if(!options.videoid){ 
      	 	  options.videoid = T.ID(options.url);
	         // var id = "vyt"+Date.now();
	         // var url = '<iframe id="'+id+'" width="560" height="315" src="https://www.youtube.com/embed/'+videoid+'?embed&direct&iframe=true&playsinline=1&enablejsapi=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
	      	 
	      	 // (typeof options.ele=="object"&&options.ele.length?options.ele:$(options.ele)).html(url);
	      	 // //update
	      	 // options.ele = id;
      	 }
         
      	 console.log(options.ele);
      	 return T.createPlayer($.extend({
		  
		 	 onStateChange:function(e,videoId){
		 	 	// var duration = e.target.getDuration();
		 	 	// console.log(duration);
	 			// if(duration){
				// 	//show ads
	 			// }
		 	 },
		 	 onChange: function(obj){
		 	 	console.log(obj.duration);
		 	 },
		 	 onEnd:function(e,videoId){
		 	 	var duration = e.target.getDuration();

		 	 	//load next video
				// this.loadVideoById({'videoId': videoId,
	            // 'startSeconds': data.start_seconds,
	            // 'endSeconds': data.end_seconds});
		 	 }
	      },options,true));
      };
      T.ID = function (url){
        var ID = '';
        url = url.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
        if(url[2] !== undefined) {
          ID = url[2].split(/[^0-9a-z_\-]/i);
          ID = ID[0];
        }
        else {
          ID = url;
        }
          return ID;
      };

      T.ready = function(f){
      	 if(load==0){
      	 	
      	 	init();
      	 }
      	 if(win.YT){
      	 	f();
      	 }else{
      	 	setTimeout(f,2000);
      	 }
      };
      /*
      createPlayer({
      	 ele:"",
	 	 videoId:'M7lc1UVf-VE',
	 	 onEnd:function(e,videoId){

	 	 },
	 	 onStateChange:function(e,videoId){
	 	 	var duration = event.target.getDuration();
 			if(duration){
				//show ads
 			}
	 	 },
	 	 onEnd:function(e,videoId){
	 	 	var duration = event.target.getDuration();

	 	 	//load next video
			this.loadVideoById({'videoId': videoId,
            'startSeconds': data.start_seconds,
            'endSeconds': data.end_seconds});
	 	 }
      })
       */
      T.createPlayer = function (options) {
      		var settings = $.extend({
	          // height: '390',
	          // width: '640',
	          videoId: options.videoId||'M7lc1UVf-VE',
	          playerVars: {
	            'playsinline': 1,
	            autoplay: options.autoplay,mute: options.mute
	          },
	          events: {
	          	onError:function(event){
	          		if(options.onError){
	          			options.onError.call(this,event);
	          		}
	          	},
	            onReady: options.onReady||function(event){event.target.playVideo();},
	            onStateChange: function(event){
	            	var videoId = event.target.getIframe().id;
	            	if(options.onStateChange)options.onStateChange.call(this,event,videoId); 
			        if(event.data == YT.PlayerState.ENDED) {
			            if(options.onEnd)options.onEnd.call(event.target,event,videoId);
			        }  else{ 

			        }
	            },
	          }
	        },options,true);
	        if(document.querySelector("#"+options.ele).nodeName=='IFRAME'){
	        	delete settings.videoId;
	        }
      		var player = new YT.Player(options.ele,settings);
	        $(options.ele).data("player",player);
	        var iframeWindow = player.getIframe().contentWindow;
			var lastTimeUpdate = 0;

	        win.addEventListener("message", function (event) {
			    // Check that the event was sent from the YouTube IFrame.
			    if (event.source === iframeWindow) {
			      var data = JSON.parse(event.data); 
			      if (
			      data.event === "infoDelivery" &&
			      data.info &&
			      data.info.currentTime)
			      {
			        // currentTime is emitted very frequently (milliseconds),
			        // but we only care about whole second changes.
			        var time = Math.floor(data.info.currentTime);

			        if (time !== lastTimeUpdate) {
			          lastTimeUpdate = time; 
			          if(settings.onChange)settings.onChange.call(player,{duration:time});
			        }
			      }
			    }
			  });
	        return  player; 
	    };


      return T;
    })();

    win.onYouTubeIframeAPIReady = function(){
    	console.log("YT ready");
    	load=1;
    };
})(window);
          //Author :F7 App
          //Date : 2025-10-14
          (function(win){
            
                var globalPages = {"page404":"<!-- Add view-init class -->\n<div class=\"page page404\" data-name=\"page404\">\n   <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n                  <div class=\"navbar-inner sliding\">\n                    <div class=\"left\">\n                      <a href=\"#\" class=\"link back\">\n                        <i class=\"icon icon-back\"></i>\n                        <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n                      </a>\n                    </div>\n                    <div class=\"title\">Error 404</div>\n                  </div>\n                </div>\n\n          \n\n          <!-- Scrollable page content -->\n          <div class=\"page-content flex-center\">\n          \t \n              <div class=\"\">\n                <img src=\"https://cdn-icons-png.flaticon.com/128/8714/8714853.png\" alt=\"\">\n                <p>Opps</p>\n              </div> \n\t\t        \n          </div>\n</div>","device":"<div class=\"page device\" id=\"device\" data-name=\"device\">\n   <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Thng tin thit b</div>\n        \n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n   \t\t<div class=\"page-content\">\n         <div class=\"well noselect\">\n                    <p>Thng tin thit b:</p>\n                    <p class=\"deviceToken\"></p>\n\n                    <button class=\"trypush\">Send push to this device</button>\n                </div>\n      </div>\n</div>","userbagfavorite":"\n<!-- Router\naddRoute({\n    path: '/user/bag/favorite/',\n    url: site_url('/user/bag/favorite.html'),\n    on: AEventPage(\"userbagfavorite\")\n}).then((page)=>{});\n!-->\n<div class=\"page userbagfavorite\" data-name=\"userbagfavorite\" style=\"background-color: white;\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\" style=\"background-color: #ca1515;\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Danh sch yu thch</div>\n   \n </div>\n</div>\n\n        \n        <!-- Scrollable page content -->\n         <div class=\"page-content\" nodata=\"Cha c d liu\">\n           \n          </div>\n          <!-- end -->\n    </div>\n    ","gateway":"    <div class=\"page gateway\" id=\"gateway\" data-name=\"gateway\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">ISMOS</div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              <div class=\"flex-col h100 text-center\" style=\"justify-content: 'center';align-items: 'center';\">\n                   Tnh nng ang chuyn hng <b/>\n                   <div class=\"effect text-center\" style=\"display:none\">\n                       <i class=\"fa fa-spin fa-cog\"></i>\n                    </div>\n              </div>\n          </div>\n    </div>\n\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/Bn 1/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/Bn 1/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/Bn 1/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/Bn 1/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"Bn 1\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","loanaccount":"<div class=\"page loanaccount\"  data-name=\"loanaccount\" >\n     <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner \">\n            <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n            <div class=\"title flex\">THNG TIN C NHN</div>\n            <div class=\"actions\">\n                <i class=\"fa fa-pencil\" data-router='/loan/account/edit/' aria-hidden=\"true\"></i>\n            </div>\n          </div>\n        </div>\n\n     <div class=\"page-content\">\n         <div class=\"text-center mt-32 mb-16\">\n             <img class=\"avatar\" height=\"125\" width=\"125\" src=\"https://res.cloudinary.com/drow7fymo/image/upload/v1755858447/f2nbhgcgchmg4hjkqrbc.jpg\">\n             <div class=\"fullname name\">User</div>\n             <p class=\"phone\">--</p>\n         </div>\n\n          \n     \n   <div>\n  <span class=\"bold\">Thng tin c nhn</span>\n</div>\n<div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">H tn : </span>\n    <span class=\"name fullname\">--</span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">a ch : </span>\n    <span class=\"address\" >-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">S CMND/CCCD : </span>\n    <span class=\"cccd\">-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Gii tnh : </span>\n    <span class=\"gender\">-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Ngy sinh : </span>\n    <span class=\"dob\" >--</span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Ngh nghip : </span>\n    <span class=\"job\" >-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Thu nhp : </span>\n    <span class=\"income\" >-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Mc ch khon vay : </span>\n    <span class=\"income_target\" >-- </span>\n  </div>\n</div>\n<div class=\"lr\">\n  <span class=\"ant-typography\">ST ngi thn : </span>\n  <span class=\"relative_phone\">-- </span>\n</div>\n<div class=\"lr\">\n  <span class=\"ant-typography\">Mi quan h vi ngi thn : </span>\n  <span class=\"relative\" >-- </span>\n</div>\n\n\n<div class=\"lr\">\n  <span class=\"ant-typography\">ST ng nghip : </span>\n  <span class=\"cooperate_number\" >-- </span>\n</div>\n<div class=\"lr\">\n  <span class=\"ant-typography\">Mi quan h vi ng nghip: </span>\n  <span class=\"cooperate\" >-- </span>\n</div>\n\n<div class=\"white-view\">\n  <div class=\"\" role=\"separator\">\n    <span class=\"bold\">Thng tin ngn hng</span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Tn ngn hng: </span>\n    <span class=\"nameBank\">-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"ant-typography\">Tn th hng: </span>\n    <span class=\"ant-typography fullnameBank\">-- </span>\n  </div>\n  <div class=\"lr\">\n    <span class=\"\">S ti khon: </span>\n    <span class=\"card accountBank\">-- </span>\n  </div> \n</div>\n\n    </div>\n \n \n</div>\n","loanaccountedit":"<div class=\"page loanaccountedit\"  data-name=\"loanaccountedit\" >\n     <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n            <div class=\"title\">Cp nht</div>\n            <div class=\"actions\">\n                \n            </div>\n          </div>\n        </div>\n\n     <div class=\"page-content\">\n          \n\n          \n     \n   <div class=\"text-center\">\n  <span class=\"bold\">Thng tin c nhn</span>\n</div>\n <form action=\"\">\n  <div class=\"form-group\">\n     <label for=\"xxx\">H tn</label>\n     <input type=\"text\" id=\"xxx\" name=\"name\" class=\"required form-control name\"  /> \n  </div>\n\n  <div class=\"form-group\">\n     <label for=\"xxx\">a ch</label>\n     <input type=\"text\" id=\"xxx\" name=\"address\" class=\"required form-control address\"  /> \n  </div>\n\n  <div class=\"form-group\">\n     <label for=\"xxx\">S CMND/CCCD</label>\n     <input type=\"text\" id=\"xxx\" name=\"cccd\" class=\"required form-control cccd\"  /> \n  </div>\n  \n  <div class=\"form-group\">\n     <label for=\"xxx\">Gii tnh</label>\n     <select name=\"gender\" class=\"required form-control required\">\n        <option >--Chn--</option>\n        <option value=\"Nam\">Nam</option>\n        <option value=\"N\">N</option>\n        <option value=\"Khc\">Khc</option>\n     </select> \n  </div>\n  \n   <div class=\"form-group\">\n     <label for=\"xxx\">Ngy sinh</label>\n     <input type=\"text\" id=\"xxx\" name=\"dob\" class=\"required form-control dob\"  /> \n  </div> \n   <div class=\"form-group\">\n     <label for=\"xxx\">Ngh nghip</label>\n     <input type=\"text\" id=\"xxx\" name=\"job\" class=\"required form-control job\"  /> \n  </div> \n  \n   <div class=\"form-group\">\n     <label for=\"xxx\">Thu nhp</label>\n      <select name=\"income\" class=\"required form-control required\">\n                <option >--Chn--</option>\n                <option value=\"5-10\">T 5 - 10 triu</option> \n                <option value=\"10-20\">T 10 - 20 triu</option> \n                <option value=\"20\">Trn 20 triu</option> \n             </select>   \n  </div> \n   \n   <div class=\"form-group\">\n     <label for=\"xxx\">Mc ch vay</label>\n     <input type=\"text\" id=\"xxx\" name=\"income_target\" class=\"required form-control income_target\"  /> \n  </div> \n \n<div class=\"form-group\">\n     <label for=\"xxx\">ST ngi thn</label>\n     <input type=\"text\" id=\"xxx\" name=\"relative_phone\" class=\"required form-control relative_phone\n\"  /> \n  </div> \n<div class=\"form-group\">\n     <label for=\"xxx\">Mi quan h vi ngi thn</label>\n     <input type=\"text\" id=\"xxx\" name=\"relative\" class=\"required form-control relative\"  /> \n  </div> \n \n <div class=\"form-group\">\n     <label for=\"xxx\">ST ng nghip</label>\n     <input type=\"text\" id=\"xxx\" name=\"cooperate_number\" class=\"required form-control cooperate_number\"  /> \n  </div> \n  <div class=\"form-group\">\n     <label for=\"xxx\">Mi quan h vi ng nghip</label>\n     <input type=\"text\" id=\"xxx\" name=\"cooperate\" class=\"required form-control cooperate\"  /> \n  </div> \n\n \n<div class=\"\" role=\"separator\">\n    <span class=\"bold\">Thng tin ngn hng</span>\n  </div>\n<div class=\"white-view\">\n  \n  <div class=\"form-group\">\n     <label for=\"xxx\">Tn ngn hng</label>\n     <select name=\"bank[name]\" class=\"required form-control nameBank\">\n                \n     </select> \n  </div> \n  <div class=\"form-group\">\n     <label for=\"xxx\">Tn th hng</label>\n     <input type=\"text\" id=\"xxx\" name=\"bank[fullname]\" class=\"required form-control fullnameBank\"  /> \n  </div> \n  <div class=\"form-group\">\n     <label for=\"xxx\">S ti khon</label>\n     <input type=\"text\" id=\"xxx\" name=\"bank[card]\" class=\"required form-control accountBank\"  /> \n  </div>  \n  \n</div>\n\n    <div class=\"text-center\">\n      <button class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Cp nht</button>\n    </div>\n    </form>\n</div>\n \n \n</div>\n","loancreate":"<div class=\"page loancreate\" data-name=\"loancreate\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Chn khon vay</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n      <form action=\"\">\n         <div class=\"lr center\">\n            <label for=\"xssxx\" style=\"color:#fff;\">S tin vay : </label>\n            <input type=\"text\"  name=\"money\"  value=\"20000000\" id=\"xssxx\" style=\"background-color: #fff;\" class=\"moneyname form-control flex\" />  \n         </div>\n         <div>\n           <input type=\"range\" oninput=\"$('.moneyname').val(this.value)\"  max=\"500000000\" min=\"20000000\" step=\"5000000\" value=\"20000000\" id=\"xssxx\" style=\"background-color: #fff;\"   /> \n         </div>\n         <div class=\"lr\"  style=\"color:#fff;\">\n           <span>T 20.000.000</span>\n           <span>n 500.000.000</span>\n         </div>\n         <div class=\"lr center\">\n           <span   style=\"color:#fff;\">Chn thi hn vay</span>\n              <div class=\"flex\">\n              <select name=\"month\" class=\"form-control changemonth required\" />\n                 <option value=\"\">--Chn thng--</option>\n                 <option value=\"6\">6 thng</option>\n                 <option value=\"12\">12 thng</option>\n                 <option value=\"24\">24 thng</option>\n                 <option value=\"36\">36 thng</option>\n                 <option value=\"48\">48 thng</option>\n                 <option value=\"60\">60 thng</option>\n              </select>\n          </div>\n         </div>\n\n         <div class=\"boxinfo \">\n           <p style=\"color: #fff;text-align: center;font-size: 16px;\">Thng tin khon vay</p>\n           <div class=\"lr\">\n             <span>S tin</span>\n             <span class=\"\"><span class=\"total\">0</span></span>\n           </div>\n           <div class=\"lr\">\n             <span>Thi hn vay</span>\n             <span class=\"\"><span class=\"month\">--</span> thng</span>\n           </div>\n           <div class=\"lr\">\n             <span>Ngy vay</span>\n             <span class=\"\">22/8/2025</span>\n           </div>\n           <div class=\"lr\">\n             <span>Hnh thc thanh ton</span>\n             <span class=\"\">Tr gp mi thng</span>\n           </div>\n         </div>\n         <div class=\"lr\">\n             <span>Tr n k u</span>\n             <span class=\"\"><span class=\"first_profit\">0</span></span>\n           </div>\n           <div class=\"lr\">\n             <span>Li sut hng thng</span>\n             <span><span class=\"rate\">--</span>%</span>\n           </div>\n        <div class=\"old-debt-text\">\n          <span class=\"text-primary btndetail\">Chi tit tr gp</span>\n        </div>\n\n        <div class=\"text-center\">\n            <button class=\"btn btn-primary mt-24 w50 uppercase\">Xc nhn khon vay</button>\n        </div>\n        </form>\n      </div>\n      <!-- end -->\n</div>\n    ","loankycstep1":"<div class=\"page loankycstep1\" data-name=\"loankycstep1\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Xc minh</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <form action=\"\">\n          <h3>Chp nh nh danh KYC</h3>\n\n          <div class=\"boxm boxm1\">\n              \n          </div>  \n\n          <div class=\"boxm boxm2\">\n               \n          </div>  \n\n          <div class=\"boxm boxm3\">\n               \n          </div>  \n\n          <div class=\"text-center\">\n            <button  class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Tip tc</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","loankycstep2":"<div class=\"page loankycstep2\" data-name=\"loankycstep2\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Xc minh</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <form action=\"\">\n          <h3>Thng tin c nhn</h3>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"5\" id=\"xxx\" name=\"kyc[name]\" class=\"form-control name required\" placeholder=\"H Tn\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"10\" id=\"xxx\" name=\"kyc[cccd]\" class=\"form-control cccd required\" placeholder=\"S CMND/CCCD\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <select name='kyc[gender]' class=\"form-control required\">\n                <option value=\"\">Gii tnh</option>\n                <option value=\"Nam\">Nam</option>\n                <option value=\"N\">N</option>\n                <option value=\"Khc\">Khc</option>\n             </select> \n          </div>\n\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"kyc[dob]\" class=\"form-control required dob\" placeholder=\"Ngy thang nm sinh : DD-MM-YY\" /> \n          </div>\n           <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"kyc[address]\" class=\"form-control address required\" placeholder=\"a ch\" /> \n          </div>\n\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"job\" class=\"form-control required job\" placeholder=\"Ngh nghip\" /> \n          </div>\n         \n          <p>Cng vic</p>\n          <div class=\"form-group\">\n              \n             <select name=\"income\" class=\"form-control income required\">\n                <option value=\"\">--Thu nhp--</option>\n                <option value=\"5-10\">T 5 - 10 triu</option> \n                <option value=\"10-20\">T 10 - 20 triu</option> \n                <option value=\"20\">Trn 20 triu</option> \n             </select>  \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"income_target\" class=\"form-control income_target required\" placeholder=\"Mc ch vay\" /> \n          </div>\n          <p>Mi quan h ngi thn</p>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"10\" id=\"xxx\" name=\"relative_phone\" class=\"form-control relative_phone digits required\" placeholder=\"S in thoi\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"relative\" class=\"form-control  relative required\" placeholder=\"Mi quan h\" /> \n          </div>\n          <p>Mi quan h ng nghip</p>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"10\" id=\"xxx\" name=\"cooperate_number\" class=\"form-control cooperate_number digits required\" placeholder=\"S in thoi\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"cooperate\" class=\"form-control cooperate required\" placeholder=\"Mi quan h\" /> \n          </div>\n\n          \n          \n\n          <div class=\"text-center\">\n            <button class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Tip tc</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","loankycstep3":"<div class=\"page loankycstep3\" data-name=\"loankycstep3\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Xc minh</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <form action=\"\">\n          <h3>Thng tin ngn hng th hng</h3>\n\n          <div class=\"imagebank\" style=\" background-image: url(assets/card.d49cd7cf12be322a95cb.d49cd7cf12be322a95cb.png);\">\n            <span class=\"ant-typography name_card\" style=\"font-size: 20px; padding: 0px 5px;\"><strong class='uppercase'>Chn ngn hng</strong></span>\n            <div>\n               <span class=\"ant-typography fullname_card\"><strong></strong></span><br><span class=\"ant-typography card_card\"><strong>*********</strong></span></div>\n         </div>\n         <div class=\"form-group\">\n              \n             <select name=\"name\" placeholder=\"Chon ngn hng\" class=\"name required\">\n                \n             </select> \n          </div>\n          <div class=\"form-group\"> \n             <input type=\"text\" id=\"namex\" minlength=\"5\" name=\"fullname\" class=\"form-control required fullname\" placeholder=\"Tn ch ti khon\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"cardx\" minlength=\"4\" name=\"card\" class=\"form-control required card\" placeholder=\"S ti khon\" /> \n          </div>\n          \n          \n          <div class=\"text-center\">\n            <button class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Tip tc</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","loankycstepresult":"<div class=\"page loankycstepresult\" data-name=\"loankycstepresult\">\n  <!-- Top Navbar -->\n  <div class=\"navbar\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n          <a href=\"/home/\" class=\"link\">\n           <i class=\"fa fa-home\" aria-hidden=\"true\"></i>\n         </a>\n      </div>\n      <div class=\"title\">Xc nhn vay</div>\n    </div>\n  </div>\n  <!-- Scrollable page content -->\n  <div class=\"page-content\">\n    <div class=\"text-center mb-16\">\n      <img class=\"w100\" src=\"assets/success.9ecb81807c34f122fc93.9ecb81807c34f122fc93.jpg\">\n      <div class=\"progress-inner bold\" style=\"min-height: 170px;\">\n        <img width='128' height=\"128\"  src=\"https://cdn-icons-png.flaticon.com/128/4474/4474254.png\" alt=\"\">\n     \n                      <div class=\"success-contract-title \">ang x l yu cu ca bn</div>\n            \n      </div>\n\n      \n      <div class=\"contact-container mtb-16 font-24 text-danger center flex-row\">\n        <span class=\"contact-text\">\n          <strong></strong>\n        </span>\n        <div class=\"\">\n          <a class=\"btn btn-primary external contact-title blink\" target=\"_blank\"><marquee><span class=\"blink\" style=\"font-size: 14px;\">Lin h T Vn Vin  duyt h s</span></marquee></a>\n        </div>\n        <span class=\"contact-text\">\n          <strong></strong>\n        </span>\n      </div>\n    </div>\n  </div>\n  <!-- end -->\n</div>","loankycstepsign":"<div class=\"page loankycstepsign\" data-name=\"loankycstepsign\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Ch k</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\" style=\"overflow: hidden;\">\n       <form action=\"\">\n          <input type=\"hidden\" name='signaturePad' class=\"signaturePad\">\n          <h3>Xc nhn khon vay</h3>\n\n          <div class=\"text-center\">\n              <div>Khon vay: <span class='money'>0</span></div>\n              <div>Thi hn thanh ton: <span><span class='month'>--</span> thng</span></div>\n              <div class=\"btn btn-warning w50 mtb-16 btnreview\">Xem hp ng</div>\n          </div> \n          <div class=\"sign\" id=\"signpad\">\n            \n          </div>\n          <div class=\"text-center\">\n            <button class=\"btn btn-primary w50 mtb-16\">Xc nhn vay</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","loanmine":"<div class=\"page loanmine\" data-name=\"loanmine\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">KHON VAY</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       \n        <p class='text-center'>Thng tin hp ng ca bn</p>\n\n        \n        <div class=\"list\">\n             \n        </div>\n\n         <div class=\"text-center mbt-16\">  <img class=\"w100\" src=\"assets/walletbanner.jpg\"></div>\n      </div>\n      <!-- end -->\n</div>\n    ","loanpayinfo":"<div class=\"page loanpayinfo\" data-name=\"loanpayinfo\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">NGN HNG TR N</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n    \n          <h3>Danh sch thng tin ngn hng tr n</h3>\n\n               <div style=\"width: 100%; border: 1px solid rgb(238, 238, 238); margin-bottom: 15px;\">\n      <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 5px 0px;\">\n        <span class=\"ant-typography\" style=\"padding-right: 10px; font-size: 14px; font-weight: 500;\">Tn ngn hng: </span>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 500; text-align: right;\">MB-Ngn Hng Qun i </span>\n      </div>\n      <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 5px 0px;\">\n        <span class=\"ant-typography\" style=\"padding-right: 10px; font-size: 14px; font-weight: 500;\">S ti khon: </span>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 500; margin-left: auto; text-align: right;\">34178068</span>\n      </div>\n      <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 5px 0px;\">\n        <span class=\"ant-typography\" style=\"padding-right: 10px; font-size: 14px; font-weight: 500;\">Ch ti khon: </span>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 500; margin-left: auto; text-align: right;\">LONWELL VINA CO. LTD </span>\n      </div>\n      <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 5px 0px;\">\n        <span class=\"ant-typography\" style=\"padding-right: 10px; font-size: 14px; font-weight: 500;\">Ngi i din</span>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 500; text-align: right;\">PHM NH NH </span>\n      </div>\n      <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 5px 0px;\">\n        <span class=\"ant-typography\" style=\"padding-right: 10px; font-size: 14px; font-weight: 500;\">Ni dung chuyn khon</span>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 500; text-align: right;\">H TN +M HP NG </span>\n      </div>\n    </div>\n  <div class=\"text-center mbt-16\">  <img class=\"w100\" src=\"assets/walletbanner.jpg\"></div>\n      </div>\n      <!-- end -->\n \n</div>\n    ","loanwallet":"<div class=\"page loanwallet\" data-name=\"loanwallet\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">V tin</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <div class=\"imagebank\" style=\" background-image: url(assets/card.d49cd7cf12be322a95cb.d49cd7cf12be322a95cb.png);\">\n            <span class=\"ant-typography name_card\" style=\"font-size: 20px; padding: 0px 5px;\"><strong class='uppercase'>Chn ngn hng</strong></span>\n            <div>\n               <span class=\"ant-typography fullname_card\"><strong></strong></span><br><span class=\"ant-typography card_card\"><strong>*********</strong></span></div>\n         </div>\n\n         <div class=\"well mbt-16\">\n             <div class=\"lr mb-32\">\n                <span>S d :</span>\n                <span class=\"btnview\"><svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"eye\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\"></path></svg></span>\n             </div>\n             <div class=\"text-right\">\n                 <span class=\"balance text-danger font-18 btnwithdraw\">00.00</span> <span class=\"btnwithdraw hide btn btn-xs no btn-primary\">Rt</span>\n             </div>\n         </div>\n         <div class=\"mbt-16\">\n            <span data-router=\"/loan/wallet/change/\" class=\"text-primary\">Bin ng s d</span>\n         </div>\n         <div class=\"btn btn-primary uppercase lr mbt-16 btnrequest\">\n            <span class=\"\">\n                Rt tin v ti khon lin kt\n            </span>\n            <span>\n               <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"vertical-align-bottom\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z\"></path></svg>\n            </span>\n         </div>\n\n         <div class=\"text-center mbt-16\">\n            <img class=\"w100\" src=\"assets/walletbanner.jpg\"></div>\n      </div>\n      <!-- end -->\n</div>\n    ","loanwalletchange":"<div class=\"page loanwalletchange\" data-name=\"loanwalletchange\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Lch s giao dch</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n         <div class=\"list\">\n             <div nodata=\"Cha c d liu\"></div>\n         </div>\n      </div>\n      <!-- end -->\n</div>\n    ","notificationdetail":"\n<div class=\"page notificationdetail\" id=\"notificationdetail\" data-name=\"notificationdetail\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n          </a>\n        </div>\n        <div class=\"title\">--</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       \t\t<div class=\"page-content\">\n  \n      </div>\n</div>","notificationindex":"\n<!-- Router\naddRoute({\n    path: '/notification/index/',\n    url: site_url('/notification/index.html'),\n    on: AEventPage(\"notificationindex\")\n}).then((page)=>{});\n!-->\n<div class=\"page notificationindex\" data-name=\"notificationindex\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Thng bo</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n               <div class=\"list list-outline-ios list-strong-ios list-dividers-ios\" nodata=\"an gcp nht\">\n       \n    </div>\n          </div>\n    </div>\n    ","about":" \n<div class=\"page\" data-name=\"about\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n          </a>\n        </div>\n        <div class=\"title\">about</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       \t\t<div class=\"page-content\">\n      \t \n\t                <a href=\"/newpage1/\" data-transition='f7-dive' class=\"btn btn-primary\">newpage1</a>\n      </div>\n</div>","comingsoon":"<div class=\"page comingsoon\" data-name=\"comingsoon\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Chc nng ang c hon thin\n            </div>\n        </div>\n    </div>\n    <div class=\"page-content\">\n        <div class=\"container\" style=\"text-align: center;\">\n            <img src=\"https://cdn-icons-png.flaticon.com/512/7187/7187255.png\" />\n            <p>\n                Chc nng ny ang c hon thin, hn bn ln sau nh!\n            </p>\n        </div>\n    </div>\n</div>\n","home":"<div data-name=\"home\" class=\"page home hastoolbar\">\n    <!-- navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\"></div>\n        <div class=\"navbar-inner\">\n            <div class=\"left flex-col\">\n                <div class=\"flex-col\" style=\"line-height: 19px;margin-left: 8px;\">\n                     <span>Xin cho</span>\n                <span class=\"fullname\">--</span>\n                </div>\n            </div>\n            <div class=\"title\">\n                \n            </div>\n            <div class=\"right\"> \n                <a translate=\"no\" data-acc=\"/notification/index/\"><i class=\"fa fa-bell\" aria-hidden=\"true\"></i></a> \n            </div>\n        </div>\n    </div>\n    <!-- toolbar -->\n    <div class=\"toolbar toolbar-bottom tabbar navbar-bottom\">\n        <div class=\"toolbar-inner\">\n            <a href=\"#hometab1\" class=\"tab-link tab-link-active\"> \n                <span> <i class=\"fa-light fa-house\"></i></span>\n                <span>Trang ch</span>\n            </a>\n            \n            <a href=\"/loan/wallet/\" class=\"link\">\n                <span><i class=\"fa-light fa-shop\"></i></span>\n                <span>V</span>\n            </a>\n            <a href=\"/user/account/\" class=\"link\">\n                <span><i class=\"fa-light fa-magnifying-glass\"></i></span>\n                <span>H s </span>\n            </a> \n        </div>\n    </div>\n\n\n    <div class=\"page-content\">\n        <div class=\"text-center\">\n             <div class=\"well  slidefadedata anton\">093***1  rt 15.000.000 </div>\n        \n             <h2 class=\"anton\">Linh hot k hn, tr gp d dng</h2>\n        </div>\n        <div class=\"loop owl-carousel owl-theme slidehome\" style=\"height: 115px;\"></div>\n\n         \n        <div class=\"text-center disable mtb-16 actionloan\">\n             <a href=\"/loan/create/\" class='btn btn-primary'><span class=\"blink\"> ng k vay ngay </span></a>\n        </div>\n        \n\n        <div style=\"background-color: #f5f5f5;\">\n             <!-- <h2  class=\"text-center\">M t sn phm</h2> -->\n             <div> K hn linh hot 3, 6, 9, 12, 24, 36, 48, 60 thng</div>\n             <div> Hi s chnh MB Bank</div>\n             <div> Ngn hng s hin i</div>\n             <div> Li sut u i</div>\n             <div> Th tc n gin nhanh chng.</div>\n             \n        </div>\n\n        <div class=\"loop owl-carousel owl-theme slidehome2\" style=\"height: 115px;\"></div>\n \n \n        <div class=\"box\">\n             <div class=\"text-center\">\n             <h2 class=\"anton\">Li ch khch hng</h2>\n        </div>\n        <ul class=\"inforate\">\n            <li class=\"lr\">\n               <div class=\"anton\">  Li sut thp 1%/thng</div>\n               <div> <img class=\"ant-image-img\" src=\"assets/icon_profit_borrow1.1678dfc999114afb6ae4e97c107aef44.svg\" style=\"height: 35px; width: 35px; object-fit: contain; margin: 0px 0px 0px 15px;\"></div>\n            </li>\n            <li class=\"lr\">\n               <div class=\"anton\"> Gii ngn nhanh chng</div>\n               <div> <img class=\"ant-image-img\" src=\"assets/icon_profit_borrow2.410695a67cf5ff8211176d20676f2714.svg\" style=\"height: 35px; width: 35px; object-fit: contain; margin: 0px 0px 0px 15px;\"></div>\n            </li>\n            <li class=\"lr\">\n               <div class=\"anton\"> Khng giy t gc, khng th chp</div>\n               <div> <img class=\"ant-image-img\" src=\"assets/icon_profit_borrow3.7a2df787c6b663537d74f3726cceda74.svg\" style=\"height: 35px; width: 35px; object-fit: contain; margin: 0px 0px 0px 15px;\"></div>\n            </li>\n            <li class=\"lr\">\n               <div class=\"anton\"> Th tc online d dng 5 pht</div>\n               <div> <img class=\"ant-image-img\" src=\"assets/icon_profit_borrow4.d32b48b90829b18b38ee21fd00140f07.svg\" style=\"height: 35px; width: 35px; object-fit: contain; margin: 0px 0px 0px 15px;\"></div>\n            </li>\n            <li class=\"lr\">\n               <div  class=\"anton\"> Khng ph n, khng ph pht sinh</div>\n               <div> <img class=\"ant-image-img\" src=\"assets/icon_profit_borrow5.722289913ccd2f18fbd9cbc97a0d61d4.svg\" style=\"height: 35px; width: 35px; object-fit: contain; margin: 0px 0px 0px 15px;\"></div>\n            </li>\n        </ul>\n        </div>\n        <div class=\"loop owl-carousel owl-theme slidehome1\" style=\"height: 205px;\"></div>\n        <div class=\"text-center mtb-16\">\n             <a href=\"#\" class='btn btn-primary btncontact link external' target=\"_blank\"><span class=\"blink\"> Lin h t vn - h tr</span></a>\n        </div>\n\n        <div class=\"text-center mtb-16\">\n            <img class=\"ant-image-img\" src=\"https://sandbox.vnpayment.vn/apis/assets/images/partner_app.png\" style=\"width: 100%; object-fit: contain;\">\n        </div>\n        <hr>\n        <div class=\"text-center\" style=\"    color: #333\"> \n            <div>\n                <img src=\"assets/tick.e14cb23e178b8d3acd8f.e14cb23e178b8d3acd8f.png\" style=\"width: 100px;\">\n            <img  src=\"assets/tick.e14cb23e178b8d3acd8f34.cba5b7c4f28060527af5.png\" style=\"width: 100px;\" >\n            </div>\n             \n            <span class=\"ant-typography\">\n                 Bn quyn thuc v Ngn hng TMCP Qun i MBBANK <br>\n                Tt c cc quyn c bo h.<br>\n                Copyright  2023 MBBank\n            </span>\n        </div>\n    </div>\n</div>","intro":"    <div class=\"page intro\" data-name=\"intro\">\n      \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <a href=\"/home/\" class=\"skip\" style=\"z-index: 100;z-index: 10000;\">B qua</a>\n              <div class=\"swiper swiper-init\">\n                  <div class=\"swiper-wrapper\">\n                      <div class=\"swiper-slide\">\n                        <div class=\"item flex-center\">\n                           <div><img src=\"https://static.vecteezy.com/system/resources/thumbnails/001/991/515/small/exam-preparation-concept-man-carrying-a-pencil-with-big-list-board-home-work-exam-test-training-can-be-used-for-landing-pages-web-user-interface-banners-templates-backgrounds-flayer-free-vector.jpg\" alt=\"\"></div>\n                           <div class=\"txt\">Lorem, ipsum dolor sit amet consectetur adipisicing, elit. Nemo voluptatibus nihil at omnis unde pariatur, voluptatum, ratione asperiores quas aut magni ab iste laboriosam aliquam labore esse adipisci explicabo natus.</div>\n                        </div>\n                      </div>\n                      <div class=\"swiper-slide\">\n                        <div class=\"item flex-center\">\n                           <div><img src=\"https://img.freepik.com/free-vector/interesting-chemistry-facts-online-searching-self-education-exam-preparing-internet-surfing-man-woman-characters-browsing-scientific-website_335657-783.jpg?w=2000\" alt=\"\"></div>\n                           <div class=\"txt\">Lorem, ipsum dolor sit amet consectetur adipisicing, elit. Nemo voluptatibus nihil at omnis unde pariatur, voluptatum, ratione asperiores quas aut magni ab iste laboriosam aliquam labore esse adipisci explicabo natus.</div>\n                        </div>\n                      </div>\n                      <div class=\"swiper-slide\">\n                        <div class=\"item flex-center\">\n                           <div>\n                              <div><img src=\"https://assets.justinmind.com/wp-content/uploads/2020/01/free-vector-image-designs-header-768x492.png\" alt=\"\"></div>\n                           <div class=\"txt\">Lorem, ipsum dolor sit amet consectetur adipisicing, elit. Nemo voluptatibus nihil at omnis unde pariatur, voluptatum, ratione asperiores quas aut magni ab iste laboriosam aliquam labore esse adipisci explicabo natus.</div>\n                           </div>\n                           <div class=\"w100\" style=\"margin-top:64px\">\n                             <button  class=\"button button-raised button-large button-fill btn-go\">Tip tc</button>\n                           </div>\n                        </div>\n                      </div>\n                  </div>\n                  <div class=\"swiper-pagination\"></div>\n              </div>\n          </div>\n    </div>\n ","introslide":"    <div class=\"page introslide\" data-name=\"introslide\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">Back</span>\n              </a>\n            </div>\n            <div class=\"title\">introslide</div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div>\n                <iframe width=\"100%\" height=\"315\" src=\"https://www.youtube.com/embed/1LG2H9xzg6E\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n              </div>\n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/introslide/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/introslide/\", {});\n-->","search":" \n<div class=\"page search\" data-name=\"search\" style=\"background-color: white\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\"></div>\n        <div class=\"navbar-inner sliding\">\n            <div class=\"left\">\n                <a href=\"#\" class=\"link back\">\n                    <i class=\"icon icon-back\"></i>\n                    <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n                </a>\n            </div>\n            <div class=\"title\">Tm kim</div>\n            <div class=\"subnavbar\">\n                <form data-search-container=\".search-list\" data-search-in=\".item-title\" class=\"searchbar searchbar-init\">\n                    <div class=\"searchbar-inner\">\n                        <div class=\"searchbar-input-wrap\">\n                            <input type=\"search\" placeholder=\"Search\">\n                            <i class=\"searchbar-icon\"></i>\n                            <span class=\"input-clear-button\"></span>\n                        </div>\n                        <span class=\"searchbar-disable-button\">Hy</span>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n\n        <div class=\"searchbar-backdrop\"></div>\n\n        <div class=\"list list-strong-ios list-outline-ios list-dividers-ios simple-list searchbar-not-found\">\n            <ul>\n                <li>Cha tm thy thng tin ph hp</li>\n            </ul>\n        </div>\n        <div class=\"list list-strong-ios list-outline-ios list-dividers-ios search-list searchbar-found\">\n            <ul>\n                <li class=\"item-content\">\n                    <div class=\"item-inner\">\n                        <div class=\"item-title\">Acura</div>\n                    </div>\n                </li>\n                <li class=\"item-content\">\n                    <div class=\"item-inner\">\n                        <div class=\"item-title\">Audi</div>\n                    </div>\n                </li>\n                <li class=\"item-content\">\n                    <div class=\"item-inner\">\n                        <div class=\"item-title\">BMW</div>\n                    </div>\n                </li>\n                <li class=\"item-content\">\n                    <div class=\"item-inner\">\n                        <div class=\"item-title\">Cadillac </div>\n                    </div>\n                </li>\n                <li class=\"item-content\">\n                    <div class=\"item-inner\">\n                        <div class=\"item-title\">Chevrolet </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n\n        <div class=\"section-title\">\n            <h4> ngh</h4>\n        </div>\n        <div class=\"product\">\n            <div class=\"row products\">\n               \n            </div>\n        </div>\n    </div>\n</div>","userfogotchoice":"<div class=\"page userfogotchoice \" data-name=\"userfogotchoice\" id=\"userfogotchoice\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Qun mt khu\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n        <div class=\"page-content container\">\n            <form class=\"f flex flex-col h100 fogot_password\" enctype=\"multipart/form-data\" id=\"fogot_password\" method=\"post\">\n                <div class=\"flex\" style=\"width:100%\"> \n                    <h5>Ly li mt khu</h5>\n                    <p>Nhn m xc thc qua s in thoi</p>\n                    <div class=\"form_fogot\">\n                        <input id=\"use_phone\" name=\"use_phone\" placeholder=\" \" type=\"tel\" value=\"\"/>\n                        <label for=\"use_phone\">\n                            Nhp s in thoi\n                        </label>\n                    </div>\n                    <p>hoc email ca bn</p>\n                    <div class=\"form_fogot\">\n                        <input id=\"use_email\" name=\"use_email\" placeholder=\" \" type=\"email\"/>\n                        <label for=\"use_email\">\n                           Nhp a ch Email\n                        </label>\n                    </div>\n                </div>\n                <div>\n                    <button class=\"button button-fill button-raised\" data-router=\"/user/fogot/usephone/\" type=\"submit\">\n                        Tip tc\n                    </button>\n                    <button style=\"display: none\" class=\"button button-fill button-raised\" data-router=\"/user/fogot/useemail/\" type=\"submit\">\n                        Tip tc\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/fogot/choice/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/fogot/choice/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/fogot/choice/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/fogot/choice/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userfogotchoice\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","userfogotnewpassword":"    <div class=\"page userfogotnewpassword \" id=\"userfogotnewpassword\" data-name=\"userfogotnewpassword\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Mt khu mi</div>\n          </div>\n        </div>\n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n                <form class=\"h100 newpassword\" method=\"post\" enctype=\"multipart/form-data\">              \n                    <div class=\"flex-col h100\">\n                      <div class=\"flex\">\n                        <ul>\n                            <li class=\"input-items\">\n                                <label>Mt khu mi</label>\n                                <input class=\"required\" minlength=\"4\" equalTo=\".updatepassnew\" type=\"text\" name=\"newpassword\">                                \n                            </li>\n                            <li class=\"input-items\">\n                                <label>Xc thc mt khu</label>\n                                <input class=\"required updatepassnew\"  minlength=\"4\" type=\"text\" name=\"re_newpassword\">                                 \n                            </li>\n                        </ul>\n                      </div>\n                      <div class=\"text-center\">\n                             <button  class=\"button button-raised\">Thay i</button>\n                       </div>\n                    </div>\n                </form>\n          </div>\n    </div>\n\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/fogot/newpassword/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/fogot/newpassword/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/fogot/newpassword/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/fogot/newpassword/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userfogotnewpassword\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","useraccountfogotviaemail":"    <div class=\"page useraccountfogotviaemail \" id=\"useraccountfogotviaemail\" data-name=\"useraccountfogotviaemail\">\n        <!-- Top Navbar -->\n        <div class=\"navbar\">\n            <div class=\"navbar-bg\"></div>\n            <div class=\"navbar-inner\">\n                <div class=\"left\">\n                  <a href=\"#\" class=\"link back\">\n                    <i class=\"icon icon-back\"></i>\n                    <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n                  </a>\n                </div>\n                <div class=\"title\">useraccountfogotviaemail</div>\n                <div class=\"right\"></div>\n            </div>\n        </div>\n      <!-- Scrollable page content -->\n        <div class=\"page-content viaemail\">\n            <div class=\"container\">\n               <form class=\"h100 email-otp\" enctype=\"multipart/form-data\" method=\"post\">\n                <div class=\"flex-col h100\">\n                    <div class=\"flex\">\n                        <p>\n                            Chng ti  gi m OTP n s a ch email ca bn, vui lng kim tra hp th\n                        </p>\n                        <div class=\"input-wrapper\">\n                            <input autocomplete=\"off\" class=\"required\" maxlength=\"4\" pattern=\"[0-9]*\" type=\"text\">\n                            </input>\n                            <div class=\"dot-line\">\n                                <svg viewbox=\"0 0 240 1\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <line stroke=\"#3e3e3e\" stroke-dasharray=\"44,22\" stroke-width=\"2\" x1=\"0\" x2=\"240\" y1=\"0\" y2=\"0\">\n                                    </line>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"text-center\">\n                            <button class=\"button button-outline button-raised\">\n                                <p>\n                                    <span class=\"timer\" data-timer=\"120\">\n                                    </span>\n                                </p>\n                                Gi li m OTP\n                            </button>\n                        </div>\n                    </div>\n                    <div class=\"text-center\">\n                        <button class=\"button button-raised\">\n                            Tip theo\n                        </button>\n                    </div>\n                </div>\n            </form>\n            </div>\n        </div>\n    </div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/fogot/viaemail/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/fogot/viaemail/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/fogot/viaemail/\"></div>\n\nDng Javascript:\n    mainView.router.navigate({\n      path: \"/user/account/fogot/viaemail/\",\n      params: {},\n    });\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"useraccountfogotviaemail\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","useraccountfogotviaphone":"<div class=\"page useraccountfogotviaphone \" data-name=\"useraccountfogotviaphone\" id=\"useraccountfogotviaphone\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                useraccountfogotviaphone\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content viaphone\">\n        <div class=\"container\">\n            <form class=\"h100 phone-otp\" enctype=\"multipart/form-data\" method=\"post\">\n                <div class=\"flex-col h100\">\n                    <div class=\"flex\">\n                        <p>\n                            Chng ti  gi m OTP n s in thoi, vui lng kim tra tin nhn\n                        </p>\n                        <div class=\"input-wrapper\">\n                            <input autocomplete=\"off\" class=\"required\" maxlength=\"4\" pattern=\"[0-9]*\" type=\"text\">\n                            </input>\n                            <div class=\"dot-line\">\n                                <svg viewbox=\"0 0 240 1\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <line stroke=\"#3e3e3e\" stroke-dasharray=\"44,22\" stroke-width=\"2\" x1=\"0\" x2=\"240\" y1=\"0\" y2=\"0\">\n                                    </line>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"text-center\">\n                            <button class=\"button button-outline button-raised\">\n                                <p>\n                                    <span class=\"timer\" data-timer=\"120\">\n                                    </span>\n                                </p>\n                                Gi li m OTP\n                            </button>\n                        </div>\n                    </div>\n                    <div class=\"text-center\">\n                        <button class=\"button button-raised\">\n                            Tip theo\n                        </button>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/fogot/viaphone/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/fogot/viaphone/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/fogot/viaphone/\"></div>\n\nDng Javascript:\n    mainView.router.navigate({\n      path: \"/user/account/fogot/viaphone/\",\n      params: {},\n    });\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"useraccountfogotviaphone\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","useraccountchangeinfor":"<div class=\"page useraccountchangeinfor\" data-name=\"useraccountchangeinfor\" id=\"useraccountchangeinfor\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"fas fa-chevron-left\">\n                    </i>\n                </a>\n            </div>\n            <div class=\"title\">\n                Ti khon ca ti\n            </div>\n            <div class=\"right\" onclick=\"alert('hon thnh')\">\n                <a href=\"\">\n                    Lu\n                </a>\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n        <div class=\"block\">\n            <form id=\"account-edit\">\n                <div class=\"form_account\">\n                    <input class=\"input_text_special\" id=\"fullname\" name=\"full-name\" placeholder=\" \" type=\"text\" value=\"Khch hng\"/>\n                    <label for=\"fullname\">\n                        H v tn\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <input class=\"input_text_special\" disabled=\"\" id=\"tel\" name=\"tel\" type=\"tel\" value=\"0909 999 999\"/>\n                    <label for=\"tel\">\n                        S in thoi\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <input id=\"idnumber\" name=\"idnumber\" placeholder=\" \" type=\"number\"/>\n                    <label for=\"idnumber\">\n                        S CMND/CCCD/H chiu\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <input id=\"birthday\" onblur=\"(this.type='text')\" onfocus=\"(this.type='date')\" placeholder=\" \" type=\"text\"/>\n                    <label for=\"birthday\">\n                        Ngy sinh\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <select class=\"input-with-value\" id=\"gender\" name=\"gender\" placeholder=\" \">\n                        <option>\n                        </option>\n                        <option value=\"Male\">\n                            Nam\n                        </option>\n                        <option value=\"Female\">\n                            N\n                        </option>\n                        <option value=\"Another\">\n                            Khc\n                        </option>\n                    </select>\n                    <label for=\"gender\">\n                        Gii tnh\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <input id=\"email\" name=\"email\" placeholder=\" \" type=\"mail\"/>\n                    <label for=\"email\">\n                        Email\n                    </label>\n                </div>\n                \n                <div class=\"form_account\">\n                     <select id=\"Tnh/Thnh Ph\" placeholder=\"\">\n                        <option>\n                        </option>\n                       <option value=\"HCM\">Tp H Ch Minh</option>\n                       <option value=\"HN\">H Ni</option>\n                       <option value=\"DN\"> Nng</option>\n                    </select>\n                    <label for=\"#Tnh/Thnh Ph\">\n                        Tnh/Thnh Ph\n                    </label>\n                </div>\n                 <div class=\"form_account\">\n                     <select disabled id=\"Qun/Huyn\" placeholder=\"\">\n                        <option></option>\n                       <option value=\"x\">Tp H Ch Minh</option>\n                       <option value=\"y\">H Ni</option>\n                       <option value=\"z\"> Nng</option>\n                    </select>\n                    <label for=\"Qun/Huyn\">\n                        Qun/Huyn\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                     <select disabled id=\"Phng/X\" placeholder=\"\">\n                        <option></option>\n                       <option value=\"a\">Tp H Ch Minh</option>\n                       <option value=\"b\">H Ni</option>\n                       <option value=\"c\"> Nng</option>\n                    </select>\n                    <label for=\"Phng/X\">\n                        Phng/X\n                    </label>\n                </div>\n                <div class=\"form_account\">\n                    <input id=\"full-address\" name=\"adress\" placeholder=\" \" type=\"text\"/>\n                    <label for=\"full-address\">\n                        a ch c th \n                    </label>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/changeinfor/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/changeinfor/\", {});\n-->\n","changepassword":"    <div class=\"page changepassword \" id=\"changepassword\" data-name=\"changepassword\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Thay i mt khu</div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n    \n          <form class=\"screen page-content\" method=\"post\" enctype=\"multipart/form-data\">              \n            <div class=\"one\">\n             \n              <div class=\"form-group\">\n                <label for=\"exampleInputEmail1\" class=\"form-label\">Mt khu c</label>\n                <input type=\"password\" class=\"form-control required\" name=\"old\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"> \n                <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n              </div>\n              <div class=\"form-group\">\n                <label for=\"exampleInputPassworsd1\" class=\"form-label\">Mt khu mi</label>\n                <input type=\"password\" class=\"form-control required\" name=\"new\" id=\"exampleInputPassworsd1\">\n                <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n              </div> \n                       \n                      \n            </div>\n            <div class=\"two text-center\">\n                 <button class=\"button button-round button-fill\">Thay i</button>\n           </div>\n        </form>\n   \n    </div>\n\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/information/changepassword/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/information/changepassword/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/information/changepassword/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/information/changepassword/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userinformationchangepassword\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","useraccountinformationinfor":"<div class=\"page useraccountinformationinfor \" data-name=\"useraccountinformationinfor\" id=\"useraccountinformationinfor\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Thng tin ti khon\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"container\">\n            <div class=\"account_information\">\n                <div class=\"unconfirmed\" data-router=\"/user/account/kyc/\">\n                    <div class=\"img\">\n                        <img alt=\"canh bao\" src=\"https://cdn-icons-png.flaticon.com/512/9872/9872372.png\"/>\n                    </div>\n                    <p>\n                        <b>\n                            Cp nht ti khon  tng  an ton khi s dng\n                        </b>\n                    </p>\n                </div>\n                \n                    <div class=\"list wrapper\" id=\"\">\n                        <ul>\n                            <li>\n                                <div class=\"item-content\">\n                                    <div class=\"item-inner item\">\n                                        <div class=\"item-title\">\n                                            H v tn\n                                        </div>\n                                        <div class=\"item-after fullname\">\n                                            Khch Hng\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"full_name\">\n                                            Chnh sa tn\n                                        </label>\n                                        <input name=\"fullname\" placeholder=\"Nhp h v tn y \" type=\"text\"/>\n                                        <div class=\"done-btn\">\n                                            <button>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                 <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            S in thoi\n                                        </div>\n                                        <div class=\"item-after phone\">\n                                            --\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"phone-number\">\n                                            Chnh sa s in thoi\n                                        </label>\n                                        <input name=\"phone\" placeholder=\"Nhp s in thoi\" type=\"tel\"/>\n                                        <div class=\"done-btn\">\n                                            <button>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                 <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            Ngy sinh\n                                        </div>\n                                        <div class=\"item-after birthday\">\n                                            --/--/----\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"birthday\">\n                                            Chnh sa ngy sinh\n                                        </label>\n                                        <input name=\"birthday\" type=\"date\"/>\n                                        <div class=\"done-btn\">\n                                            <button>\n                                               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            Gii tnh\n                                        </div>\n                                        <div class=\"item-after sex\">\n                                            ---\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"gnder_select\">\n                                            Chnh sa gii tnh\n                                        </label>\n                                        <select name=\"sex\" id=\"gnder_select\">\n                                            <option >Chn gii tnh</option>\n                                            <option value=\"male\">Nam</option>\n                                            <option value=\"female\">N</option>\n                                            <option value=\"other\">Khc</option>\n                                        </select>\n                                        <div class=\"done-btn\">\n                                            <button>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            a ch email\n                                        </div>\n                                        <div class=\"item-after email\">\n                                            ---------\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"nemail\">\n                                            Chnh sa email\n                                        </label>\n                                        <input name=\"email\" id=\"nemail\" type=\"email\" />\n                                        <div class=\"done-btn\">\n                                            <button>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>  \n                        </ul>\n                    </div> \n                    <div class=\"list wrapper\">\n                        <ul>\n                            <!-- <li>\n                                <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            S CCCD\n                                        </div>\n                                        <div class=\"item-after cccd\">\n                                            ----------\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"cccd\">\n                                            Chnh sa s CCCD\n                                        </label>\n                                        <input name=\"cccd\" minlength=\"10\" placeholder=\"Nhp s cn cc cng dn\" type=\"tel\"/>\n                                        <div class=\"done-btn\">\n                                            <button>\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li> -->\n                            <li>\n                                <div class=\"item-content\">\n                                    <div class=\"item-inner\">\n                                        <div class=\"item-title\">\n                                            a ch\n                                        </div>\n                                        <div class=\"item-after address\">\n                                            ---------\n                                        </div>\n                                        <div class=\"item-inner-icon\">\n                                            <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                <path d=\"M9 18l6-6-6-6\">\n                                                </path>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                    <div class=\"input-wrapper hide\">\n                                        <label for=\"naaddres\">\n                                            Chnh sa a ch\n                                        </label>\n                                        <div>\n                                             <input name=\"address\" id=\"naaddres\" placeholder=\"S nh, tn ng, qun/huyn......\" type=\"text\" />\n                                        </div>\n                                       \n                                        <div class=\"done-btn\">\n                                            <button>\n                                               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                \n             \n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/information/infor/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/information/infor/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/information/infor/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/information/infor/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userinformationinfor\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","useraccountinformationsecretotp":"<div class=\"page useraccountinformationsecretotp secretotp\" data-name=\"useraccountinformationsecretotp\" id=\"useraccountinformationsecretotp\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                M OTP giao dch\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n  \n            <form action=\"\" class=\"page-content screen\">\n                <div class=\"one\">\n                    <p class=\"p-head\">\n                        M OTP dng  bo v giao dch lin quan ti ti khon ca bn.\n                    </p>\n                    <div>\n                        <div class=\"form-group\">\n                            <label for=\"oldotp\">\n                                OTP c\n                            </label>\n                            <div class=\"input-wrapper wrapper\">\n                                 \n                                <input class=\"form-control required\" minlength=\"4\" name=\"oldotp\" type=\"password\" value=\"\"/>\n                            </div>\n                            <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"newopt\">\n                                OTP mi\n                            </label>\n                            <div class=\"input-wrapper wrapper\">\n                                 \n                                <input class=\"form-control required\" minlength=\"4\" name=\"newotp\" type=\"password\" value=\"\"/>\n                            </div>\n                            <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n                        </div>\n                    </div>\n                </div> \n                <div class=\"two\">\n                    <div class=\"text-center\">\n                        <button class=\"button button-fill button-round\" style=\"margin-bottom: 8px\">\n                            Cp nht\n                        </button>\n                         \n                    </div>\n                </div>\n            </form>\n            \n    \n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/information/secretotp/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/information/secretotp/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/information/secretotp/\"></div>\n\nDng Javascript:\n    mainView.router.navigate({\n      path: \"/user/account/information/secretotp/\",\n      params: {},\n    });\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"useraccountinformationsecretotp\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","userinformationupdateinfor":"    <div class=\"page userinformationupdateinfor \" id=\"userinformationupdateinfor\" data-name=\"userinformationupdateinfor\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Cp nht thng tin ti khon</div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              <form class=\"h100 update-infor\" method=\"post\" enctype=\"multipart/form-data\">\n                    <div class=\"flex-col h100\">\n                      <div class=\"flex\">\n                        <ul class=\"update-infor-list\">\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>H v tn</label>\n                                    <input type=\"text\" name=\"full_name\" placeholder=\"Nhp y  h v tn\">\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>S in thoi</label>\n                                    <input type=\"tel\" name=\"phone_number\" placeholder=\"Nhp s in thoi chnh ch\">\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>a ch Email</label>\n                                    <input type=\"email\" name=\"email\" placeholder=\"Nhp Email ca bn\">\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>S CCCD</label>\n                                    <input type=\"number\" name=\"id_number\" placeholder=\"Nhp s CCCD\">\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>Ngy sinh</label>\n                                    <input type=\"date\" name=\"birthday\" value=\"\">\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>Gii tnh</label>\n                                   <select name=\"gender\" id=\"gender\" >\n                                      <option>Chn</option>\n                                      <option value=\"male\">Nam</option>\n                                      <option value=\"female\">N</option>\n                                      <option value=\"other\">Khc</option>\n                                    </select>\n                                </div>\n                            </li>\n                            <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label>a ch</label>\n                                    <input type=\"text\" name=\"adress\" placeholder=\"Nhp a ch ca bn\">\n                                </div>\n                            </li>\n                            \n                            </li>\n                            <!-- <li class=\"update-infor-items\">\n                                <div class=\"input-wrapper\">\n                                    <label></label>\n                                    <input type=\"\" name=\"\">\n                                </div>\n                            </li> -->\n                        </ul>\n                      </div>\n                      <div class=\"text-center\">\n                             <button onclick=\"alert('Thnh cng')\" type=\"submit\" class=\"button button-raised\">Lu</button>\n                       </div>\n                    </div>\n                </form>\n          </div>\n    </div>\n\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/information/updateinfor/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/information/updateinfor/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/information/updateinfor/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/information/updateinfor/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userinformationupdateinfor\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","useraccountregisterphoneregister":"<link rel=\"stylesheet\" href=\"phoneregister.css\">\n<div class=\"page useraccountregisterphoneregister \" data-name=\"useraccountregisterphoneregister\" id=\"useraccountregisterphoneregister\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                ng k\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"phoneregister container flex-col h100\">\n            <form class=\"flex\"  method=\"post\">\n                <input type=\"hidden\" name=\"nootp\" value=\"1\">\n                <div >\n                    <div class=\"login-screen-title\">\n                        ng k bng s in thoi\n                    </div>\n                    <div class=\"block-footer\">\n                        Vui lng nhp s in thoi bn ang s dng  nhn m kch hot\n                    </div>\n                    <div class=\"list\">\n                        <ul>\n                            <li class=\"item-content item-input\">\n                                <div class=\"item-inner\">\n                                    <!-- <div class=\"item-title item-label\">Enter phone</div> -->\n                                    <div class=\"item-input-wrap flex-row\">\n                                        <select class=\"form-control\" name=\"prefix\" style=\"width: 45px;text-align: center;\">\n                                            <option value=\"+84\">\n                                                +84\n                                            </option>\n                                            <option value=\"+65\">\n                                                +65\n                                            </option>\n                                        </select>\n                                        <input class=\"required borderBottom flex\" id=\"ddssff\" minlength=\"4\" name=\"phone\" placeholder=\"+840000000\" style=\"padding-left:16px\" type=\"tel\">\n                                            <span class=\"input-clear-button\">\n                                            </span>\n                                        </input>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class=\"button-wrapper\" style=\"margin-top: 32px;\">\n                    <button class=\"button button-fill button-raised\" style=\"margin-bottom: 8px\">\n                    Tip tc\n                     </button>\n                </div>\n            </form>\n            <div style=\"text-align: center;\">\n                <div class=\"text-center\">\n                    <span>\n                        Bn  c ti khon? \n                    </span>\n                    <a href=\"/user/login/\">\n                        ng nhp ngay\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/register/phoneregister/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/phoneregister/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/phoneregister/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/register/phoneregister/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userregisterregister\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","useraccountregisterregisteravatar":"<div class=\"page useraccountregisterregisteravatar \" data-name=\"useraccountregisterregisteravatar\" id=\"useraccountregisterregisteravatar\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Chn nh i din\n            </div>\n        </div>\n\n    </div>\n    <div class=\"page-content container\">\n        <div class=\"register_avatar flex-col h100 apple_acc_menu\">\n            <div class=\"flex\">\n                <div class=\"user__avatar\" style=\"position: relative;\">\n                    <b>Hy chn hnh i din ca bn</b>\n                    <label class=\"avatar-cst\" for=\"name_avatar1\">\n                        <img class=\"img\" src=\"https://cdn-icons-png.flaticon.com/512/149/149071.png\">\n                            <div class=\"avatar_edit\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/9855/9855335.png\">\n                            </div>\n                    </label>\n                    <input type=\"file\" style=\"    position: absolute;\n    top: -100%;\" id=\"name_avatar1\" onchange=\"console.log(this.files[0]);window.uploadCrop(this.files[0]).then(function(a){\n        $('.userregisterregisteravatar .avatar-cst .img').attr('src',a);\n        //upload ajax\n        site_url('../updateBase64').post({base64_upload:a},function(res){\n            // window.user.set(avatar,res);\n        });\n    })\">\n                </div>\n            </div>\n            <div class=\"button-wrapper\">  \n                <button class=\"button button-raised button-fill\" data-router=\"/home/\">\n                    Tip tc\n                </button>\n                <button class=\"button button-raised button-outline\" data-router=\"/home/\">\n                    B qua\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/register/registeravatar/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registeravatar/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registeravatar/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/register/registeravatar/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userregisterregisteravatar\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","useraccountregisterfullname":"<div class=\"page useraccountregisterfullname\" data-name=\"useraccountregisterfullname\" id=\"useraccountregisterfullname\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                \n            </div>\n            <div class=\"title\">\n                ng k\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n        <form class=\"f flex flex-col h100\" enctype=\"multipart/form-data\" method=\"post\">\n            <div class=\"flex\">\n                <div class=\"login-screen-title\">\n                    Nhp tn thng gi  mi ngi c th bit tn bn\n                </div> \n                <div class=\"list\">\n                    <ul>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                \n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\"  id=\"ddssfsf\" minlength=\"3\" name=\"fullname\" placeholder=\"\" type=\"text\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                         \n                    </ul>\n                </div>\n\n                <div class=\"button-wrapper\">\n                    <button class=\"button button-fill button-raised\">\n                        Cp nht\n                    </button>\n                </div>\n            </div>\n            <div class=\"button-wrapper\">\n                <button type=\"button\" class=\"button button-fill btn-skip button-raised\">\n                    B qua\n                </button>\n            </div>\n        </form>\n        \n    </div>\n</div>\n \n","useraccountregisterregisterotp":"<div class=\"page useraccountregisterregisterotp \" data-name=\"useraccountregisterregisterotp\" id=\"useraccountregisterregisterotp\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                ng k\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content registerotp \">\n        <form class=\"flex flex-col h100 register-otp-form container\" enctype=\"multipart/form-data\" id=\"register_otp_form\" method=\"\" class=\"digit-group\" data-group-name=\"digits\" data-autosubmit=\"false\" autocomplete=\"off\">\n            <div class=\"flex\">\n                <div class=\"login-screen-title\">\n                    Nhp m OTP\n                </div>\n                <div class=\"block-footer\">\n                    Vui lng nhp m OTP c gi n s in thoi ca bn\n                </div>\n                <div class=\"digit-input-wrapper\">\n                    <input type=\"text\" id=\"digit-1\" name=\"digit-1\" data-next=\"digit-2\" />\n                    <input type=\"text\" id=\"digit-2\" name=\"digit-2\" data-next=\"digit-3\" data-previous=\"digit-1\" />\n                    <input type=\"text\" id=\"digit-3\" name=\"digit-3\" data-next=\"digit-4\" data-previous=\"digit-2\"  />\n                    <input type=\"text\" id=\"digit-4\" name=\"digit-4\" data-next=\"digit-5\" data-previous=\"digit-3\"/>\n                    <!-- <input type=\"text\" id=\"digit-5\" name=\"digit-5\" data-next=\"digit-6\" data-previous=\"digit-4\" />\n                    <input type=\"text\" id=\"digit-6\" name=\"digit-6\" data-previous=\"digit-5\" maxlength=\"1\" /> -->\n                </div>\n                <div class=\"text-center\" style=\"margin-top: 18px\">\n                    <button class=\"resendcode\">\n                        <span class=\"timer\" data-timer=\"120\"></span>\n                        Gi li m OTP\n                    </button>\n                </div>\n            </div>\n            <div class=\"button-wrapper\">\n                <button class=\"button button-raised button-fill\" data-router=\"/user/account/register/registersuccess/\">\n                    Tip tc\n                </button>\n            </div>\n        </form>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/register/registerotp/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registerotp/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registerotp/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/register/registerotp/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userregisterregisterotp\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","userregisterregisterpassword":"<div class=\"page userregisterregisterpassword\" data-name=\"userregisterregisterpassword\" id=\"userregisterregisterpassword\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                ng k\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n        <form class=\"f flex flex-col h100\"  method=\"post\">\n            <div class=\"flex\">\n                <div class=\"login-screen-title\">\n                    Nhp mt khu\n                </div>\n                <div class=\"block-footer\">\n                    Vui lng nhp mt khu v khng chia s vi bt k ai\n                </div>\n                <div class=\"list\">\n                    <ul>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Mt khu mi\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" equalto=\"#re_password_\" id=\"ddssff\" minlength=\"4\" name=\"password\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Nhp li mt khu\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" id=\"re_password_\" minlength=\"4\" name=\"re_password\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"button-wrapper\">\n                <button class=\"button button-fill button-raised\">\n                    Tip tc\n                </button>\n            </div>\n        </form>\n    </div>\n</div>\n ","userregisterregistersuccess":"<div class=\"page userregisterregistersuccess \" data-name=\"userregisterregistersuccess\" id=\"userregisterregistersuccess\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Thnh cng\n            </div>\n        </div>\n    </div>\n    <div class=\"page-content container\">\n        <div class=\"register_success flex-col h100\">\n            <div class=\"flex\">\n                <img alt=\"success\" src=\"https://cdn-icons-png.flaticon.com/512/9281/9281540.png\">\n                <p>\n                    Chc mng bn  to ti khon thnh cng\n                </p>\n            </div>\n            <div class=\"button-wrapper\">\n                <button class=\"button button-fill button-raised\" data-router=\"/home/\">\n                    Tip tc\n                </button>\n            </div>\n\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/account/register/registersuccess/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registersuccess/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/register/registersuccess/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/register/registersuccess/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"userregisterregistersuccess\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        window.showLoader();\n\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","accountupdateemail":"<div class=\"page accountupdateemail\" data-name=\"accountupdateemail\" id=\"accountupdateemail\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Cp nht Email</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n          \n      </div>\n</div>","accountupdatefullname":"<div class=\"page accountupdatefullname\" data-name=\"accountupdatefullname\" id=\"accountupdatefullname\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Cp nht h v tn</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n          \n      </div>\n</div>\n","updateregisterpassword":"<div class=\"page updateregisterpassword\" data-name=\"updateregisterpassword\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                        Back\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Cp nht ln u tin\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content flex-col\">\n        <form class=\"f flex flex-col\">\n            <div class=\"\">\n                <div class=\"login-screen-title\">\n                    Nhp mt khu\n                </div>\n                <div class=\"block-footer\">\n                    Vui lng nhp mt khu v khng chia s vi bt k ai\n                </div>\n                <div class=\"list\">\n                    <ul>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Mt khu mi\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" autofocus id=\"passaaaa\" minlength=\"4\" equalto=\"#passaaa\" name=\"password_new\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                            <i style=\"display:inline-block;padding:10px;position:absolute;right:-20px;top:21%\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n                        </li>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Nhp li mt khu\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" id=\"passaaa\" minlength=\"4\"  name=\"re_password\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                            <i style=\"display:inline-block;padding:10px;position:absolute;right:-20px;top:21%\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"list\">\n                <ul>\n                    <li>\n                        <button class=\"list-button btn btn-primary\">\n                            Tip tc\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        </form>\n         \n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/registerpassword/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/registerpassword/\", {});\n-->\n","accountupdatphone":"<div class=\"page accountupdatphone\" data-name=\"accountupdatphone\" id=\"accountupdatphone\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Cp nht s in thoi</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n          \n      </div>\n</div>","accountupdatrefercode":"<div class=\"page accountupdatrefercode\" data-name=\"accountupdatrefercode\" id=\"accountupdatrefercode\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Cp nht ngi gii thiu</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n          \n      </div>\n</div>","useraccountverificationallverified":"<div class=\"page useraccountverificationallverified\" data-name=\"useraccountverificationallverified\" id=\"useraccountverificationallverified\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Xc thc ti khon\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content \">\n        <div class=\"allverified container flex-col\">\n            <div class=\"flex\">\n                <div class=\"verification_status_image\">\n                    <img src=\"https://cdn-icons-png.flaticon.com/512/190/190411.png\">\n                    </img>\n                </div>\n                <p>\n                    Xc thc ti khon khch hng\n                </p>\n                <h4 class=\"verification_status\">\n                    thnh cng\n                </h4>\n            </div>\n            <div class=\"allverified_btn\">\n                <a class=\"button button-fill button-round button-raised\" href=\"/user/account/\">\n                    Quay v trang ch\n                </a>\n            </div>\n        </div>        \n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/allverified/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/allverified/\", {});\n-->\n","useraccountverificationemailverified":"    <div class=\"page useraccountverificationemailverified\" id=\"useraccountverificationemailverified\" data-name=\"useraccountverificationemailverified\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Xc thc Email</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n                <form class=\"h100 emailverified-otp-form container\" enctype=\"multipart/form-data\" id=\"emailverified_otp_form\" method=\"\" class=\"digit-group\">\n                  <div class=\"text-center\" style=\"margin: 12px auto;\">\n                      <img src=\"https://cdn-icons-png.flaticon.com/512/8385/8385918.png\"  width=\"200px\" height=\"200px\" />\n                    </div>\n                  <div class=\"flex-col text-center\">\n                    <h6>Chng ti  gi link xc nhn qua email abc@domain ca bn</h6>\n                    <p>Vui lng kim tra Hp th n (spam)</p>\n                    <div class=\"digit-input-wrapper\" style=\"    border: 0!important;\"> </div>\n                  </div>\n                  <div style=\"text-align: center;\">\n                     <button href=\"/user/account/verification/allverified/\"  class=\"button button-fill button-round button-raised\">Xc nhn</button>\n                  </div>\n              </form>\n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/emailverified/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/emailverified/\", {});\n-->","useraccountverificationfacedetection":"\n    <div class=\"page useraccountverificationfacedetection\" id=\"useraccountverificationfacedetection\" data-name=\"useraccountverificationfacedetection\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n          <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Face Detection</div>\n          </div>\n        </div>\n\n          <!-- Scrollable page content -->\n              <div class=\"page-content facedetection\">\n                 \n\n              <div class=\"row\">\n                    <div class=\"col-12 col-md-4 col-xl-3 align-top\">\n                        <div class=\"row mb-3\">\n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch\">\n                                        <input type=\"checkbox\" id=\"webcam-switch\">\n                                        <i></i> Webcam </label>  \n                                        <button id=\"cameraFlip\" class=\"btn d-none\"></button>     \n                                </div> \n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch disabled\">\n                                        <input type=\"checkbox\" disabled id=\"detection-switch\">\n                                        <i></i> Detect Face </label>      \n                                </div>   \n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch disabled\">\n                                        <input type=\"checkbox\" disabled id=\"box-switch\">\n                                        <i></i> Bounding Box </label>      \n                                </div>\n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch disabled\">\n                                        <input type=\"checkbox\" disabled id=\"landmarks-switch\">\n                                        <i></i> Landmarks </label>      \n                                </div>\n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch disabled\">\n                                        <input type=\"checkbox\" disabled id=\"expression-switch\">\n                                        <i></i> Expression </label>      \n                                </div>    \n                                <div class=\"col-md-10 col-6 form-control\">\n                                        <label class=\"form-switch disabled\">\n                                        <input type=\"checkbox\" disabled id=\"age-gender-switch\">\n                                        <i></i> Age & Gender </label>      \n                                </div>      \n                                <div class=\"col-md-10 col-6 mt-2\">\n                                     More on  <a href=\"https://bensonruan.com\" target=\"_blank\">bensonruan.com</a>    \n                                </div>               \n                        </div>\n                    </div>\n                    <div class=\"col-12 col-md-8 col-xl-9 align-top\" id=\"webcam-container\">\n                        <div class=\"loading d-none\">\n                                Loading Model\n                                <div class=\"spinner-border\" role=\"status\">\n                                        <span class=\"sr-only\"></span>\n                                </div>\n                        </div>\n                        \n                        <div id=\"video-container\">\n                                <video id=\"webcam\" autoplay muted playsinline></video>\n                        </div>  \n                        <canvas></canvas>\n                        <div id=\"errorMsg\" class=\"col-12 alert-danger d-none\">\n                        Fail to start camera <br>\n                        1. Please allow permission to access camera. <br>\n                        2. If you are browsing through social media built in browsers, look for the ... or browser icon on the right top/bottom corner, and open the page in Sarafi (iPhone)/ Chrome (Android)\n                        </div>\n                    </div>\n                </div>\n            </div>\n          </div>         \n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/takepic/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/takepic/\", {});\n-->","useraccountverification":"    <div class=\"page useraccountverification\" id=\"useraccountverification\" data-name=\"useraccountverification\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Xc thc ti khon</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content phoneverified\">\n              <div class=\"img\">\n                        <img alt=\"canh bao\" src=\"https://cdn-icons-png.flaticon.com/512/9872/9872372.png\" class=\"\">\n                    </div>\n              <div class=\"list list-strong-ios list-outline-ios menu-list\">\n                  <ul>\n                      <li><a href=\"/user/account/verification/emailverified/\" class=\"item-content item-link item-selected\">\n                              <div class=\"item-media\"><i class=\"icon material-icons if-md\">home</i></div>\n                              <div class=\"item-inner\">\n                                  <div class=\"item-title\">Email</div>\n                              </div>\n                          </a></li>\n                      <li><a href=\"/user/account/verification/phoneverified/\" class=\"item-content item-link \">\n                              <div class=\"item-media\"><i class=\"icon material-icons if-md\">person</i></div>\n                              <div class=\"item-inner\">\n                                  <div class=\"item-title\">Phone</div>\n                              </div>\n                          </a></li>\n                      <li><a href=\"/user/account/verification/takepic/\" class=\"item-content item-link \">\n                              <div class=\"item-media\"><i class=\"icon material-icons if-md\">profile</i></div>\n                              <div class=\"item-inner\">\n                                  <div class=\"item-title\">Infomation</div>\n                              </div>\n                          </a></li>\n                  </ul>\n              </div>\n          </div>\n    </div>\n\n ","useraccountverificationphoneverified":"    <div class=\"page useraccountverificationphoneverified\" id=\"useraccountverificationphoneverified\" data-name=\"useraccountverificationphoneverified\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Xc thc s in thoi</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content phoneverified\">\n               <form class=\"h100\" enctype=\"multipart/form-data\" method=\"post\">\n                  <div class=\"flex-col \">\n                    <div class=\"text-center\" style=\"margin: 12px auto;\">\n                      <img src=\"https://cdn-icons-png.flaticon.com/512/8385/8385918.png\"  width=\"200px\" height=\"200px\" />\n                    </div>\n                    <h5>Chng ti  gi m qua s in thoi xxx.xxx.xxx ca bn</h5>\n                   <div class=\"digit-input-wrapper\" style=\"    border: 0!important;\"> </div>\n                  </div>\n                 <div>\n                    <button href=\"/user/account/verification/emailverified/\"  class=\"button button-fill button-round button-raised\">Xc nhn</button>\n                 </div>\n              </form>\n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/phoneverified/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/phoneverified/\", {});\n-->","useraccountverificationtakepic":"\n    <div class=\"page useraccountverificationtakepic\" id=\"useraccountverificationtakepic\" data-name=\"useraccountverificationtakepic\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n          <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Take pic</div>\n          </div>\n        </div>\n\n          <!-- Scrollable page content -->\n              <div class=\"page-content\">\n              <video style=\"width: 100%; height:200px\" id=\"player\" controls playsinline></video>\n              <button id=\"capture\">Capture</button>\n              <canvas id=\"snapshot\" width=\"320\" height=\"240\"></canvas>\n              <textarea id=\"result\" style=\"width:100%;height:240px;\"></textarea>\n          </div>         \n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/takepic/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/takepic/\", {});\n-->","useraccountverificationverifyavatar":"<div class=\"page useraccountverificationverifyavatar\" data-name=\"useraccountverificationverifyavatar\" id=\"useraccountverificationverifyavatar\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Xc thc ti khon\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\" style=\"position: relative;\">\n       <div class=\"container verifyavatar flex-col\">\n            <div class=\"flex text-center\">\n                <h6>\n                    nh chn dung khch hng\n                </h6>\n               <!--  <div class=\"image\">\n                    <img src=\"https://cdn-icons-png.flaticon.com/512/10014/10014972.png\" width=\"160px\">\n                    </img>\n                </div> -->\n                <div class=\"avata_change_area\" >\n                  <img src=\"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\">\n                  <button class=\"dashed_btn_cst\">\n                    Chp nh\n                  </button>\n                </div>\n                <p>Chnh sch v iu khon</p>\n                <p>ng k c ngha l bn  ng  iu khon s dng ca chng ti</p>  \n                <label for=\"agree\" class=\"verifyavatar_lable\">            \n                  <input id=\"agree\" name=\"agree\" type=\"checkbox\">\n                  <span>Ti  c v ng  vi iu kin</span>\n                </lable>\n            </div>\n            <div style=\"text-align: center;\"> \n                <a href=\"/user/account/verification/phoneverified/\" class=\"button button-fill button-round button-raised\">\n                    Tip tc\n                </a>\n            </div>\n       </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a  ></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/verifyavatar/\", {});\n-->\n","useraccountverificationverifyid":"<div class=\"page useraccountverificationverifyid\" data-name=\"useraccountverificationverifyid\" id=\"useraccountverificationverifyid\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Xc thc ti khon\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <form class=\"container verifyid flex-col\">\n            <div class=\"flex\">\n                <h6>\n                    Xc minh CMND/CCCD/Hp l\n                </h6>\n                <div class=\"verifyid_image\">\n                    <img src=\"https://cdn-icons-png.flaticon.com/512/740/740554.png\">\n                    </img>\n                </div>\n                <div id=\"veryfication_idcard\">\n                    <div>\n                        <label>\n                            CMND/CCCD\n                        </label>\n                        <input id=\"id-card\" placeholder=\"Nhp CMND/CCCD\" type=\"number\">\n                        </input>\n                    </div>\n                    <div>\n                        <label>\n                            Ngy cp\n                        </label>\n                        <input id=\"id-date\" placeholder=\"Nhp ngy cp\" type=\"date\">\n                        </input>\n                    </div>\n                    <div>\n                        <p>\n                            Hnh nh CMND/CCCD mt trc\n                        </p>\n                        <div class=\"id_picture\">\n                            <img src=\"https://cdn-icons-png.flaticon.com/512/3596/3596091.png\">\n                            </img>\n                        </div>\n                        <button class=\"dashed_btn\">\n                            Chp nh&nbsp;&nbsp; \n                            <span>\n                                \n                            </span>\n                        </button>\n                    </div>\n                    <div>\n                        <p>\n                            Hnh nh CMND/CCCD mt sau\n                        </p>\n                        <div class=\"id_picture\">\n                            <img src=\"https://cdn-icons-png.flaticon.com/512/3596/3596091.png\">\n                            </img>\n                        </div>\n                        <button class=\"dashed_btn\">\n                            Chp nh&nbsp;&nbsp; \n                            <span>\n                                <svg fill=\"none\" height=\"19\" stroke=\"currentColor\" stroke-linecap=\"butt\" stroke-linejoin=\"arcs\" stroke-width=\"3\" viewbox=\"0 0 24 24\" width=\"19\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <g transform=\"translate(2 3)\">\n                                        <path d=\"M20 16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3l2-3h6l2 3h3a2 2 0 0 1 2 2v11z\">\n                                        </path>\n                                        <circle cx=\"10\" cy=\"10\" r=\"4\">\n                                        </circle>\n                                    </g>\n                                </svg>\n                            </span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"text-center\">\n                <button class=\"button button-round button-fill \" data-router=\"/user/account/verification/verifyavatar/\">\n                    Tip tc\n                </button>\n            </div>\n        </form>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/verifyid/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/verifyid/\", {});\n-->\n","useraccountverificationstatus":"<div class=\"page useraccountverificationstatus\" data-name=\"useraccountverificationstatus\" id=\"useraccountverificationstatus\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Xc thc ti khon\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"container verificationstatus\">\n            <h6>\n                Xc minh thng tin khch hng\n            </h6>\n            <div class=\"image\">\n                <img height=\"160px\" src=\"https://cdn-icons-png.flaticon.com/512/3749/3749784.png\" width=\"160px\">\n                </img>\n            </div>\n            <div class=\"wrapper\">\n                <div class=\"link_status\">\n                    <p>\n                        Xc minh danh tnh\n                    </p>\n                    <a href=\"/user/account/verification/verifyid/\">\n                        <img alt=\"unverified\" height=\"14px\" src=\"https://cdn-icons-png.flaticon.com/512/7698/7698976.png\" width=\"14px\"/>\n                        xc minh ngay\n                    </a>\n                </div>\n                <div class=\"dotline\"></div>\n                <div class=\"link_status\">\n                    <p>\n                        Xc minh s in thoi\n                    </p>\n                    <a href=\"/user/account/verification/phoneverified/\">\n                        <img alt=\"verified\" height=\"14px\" src=\"https://cdn-icons-png.flaticon.com/512/5290/5290119.png\" width=\"14px\"/>\n                         xc minh\n                    </a>\n                </div>\n                <div class=\"dotline\"></div>\n                <div class=\"link_status\">\n                    <p>\n                        Xc minh a ch email\n                    </p>\n                    <a href=\"/user/account/verification/emailverified/\">\n                        <img alt=\"unverified\" height=\"14px\" src=\"https://cdn-icons-png.flaticon.com/512/7698/7698976.png\" width=\"14px\"/>\n                        xc minh ngay\n                    </a>\n                </div>\n                <div class=\"dotline\"></div>\n                <div class=\"link_status\">\n                    <p>\n                        Chup hinh\n                    </p>\n                    <a href=\"/user/account/verification/takepic/\">\n                        <img alt=\"unverified\" height=\"14px\" src=\"https://cdn-icons-png.flaticon.com/512/7698/7698976.png\" width=\"14px\"/>\n                        xc minh ngay\n                    </a>\n                </div>\n                <div class=\"dotline\"></div>\n                <div class=\"link_status\">\n                    <p>\n                        Face detection\n                    </p>\n                    <a href=\"/user/account/verification/facedetection/\">\n                        <img alt=\"unverified\" height=\"14px\" src=\"https://cdn-icons-png.flaticon.com/512/7698/7698976.png\" width=\"14px\"/>\n                        xc minh ngay\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/verification/verifystatus/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/verification/verifystatus/\", {});\n-->\n","useraccount":"<div class=\"page useraccount\" id=\"useraccount\" data-name=\"useraccount\" >\n     <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n            <div class=\"title\">H s</div>\n          </div>\n        </div>\n\n     <div class=\"page-content\">\n         <div class=\"text-center mt-32 mb-16\">\n             <img class=\"avatar\" height=\"125\" width=\"125\" src=\"https://res.cloudinary.com/drow7fymo/image/upload/v1755858447/f2nbhgcgchmg4hjkqrbc.jpg\">\n             <div class=\"fullname name\">User</div>\n             <p class=\"phone\">--</p>\n         </div>\n\n         <div class=\"alert-container kycbox\">\n  <div>\n    <span class=\"ant-typography\" style=\"font-size: 17px; color: rgb(18, 18, 18);\">\n      <strong>Xc thc ti khon</strong>\n    </span>\n    <div style=\"border-bottom: 1px solid rgba(0, 106, 176, 0.3); height: 0.1px; width: 100%;\"></div>\n    <div style=\"display: flex; justify-content: space-between; align-items: center; padding: 30px 10px;\">\n      <div style=\"flex: 1 1 0%; min-width: 30%; display: flex; justify-content: center; align-items: center;\">\n        <span role=\"img\" aria-label=\"alert\" class=\"anticon anticon-alert\" style=\"font-size: 45px; color: rgb(51, 51, 51);\">\n          <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"alert\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\">\n            <path d=\"M512 244c176.18 0 319 142.82 319 319v233a32 32 0 01-32 32H225a32 32 0 01-32-32V563c0-176.18 142.82-319 319-319zM484 68h56a8 8 0 018 8v96a8 8 0 01-8 8h-56a8 8 0 01-8-8V76a8 8 0 018-8zM177.25 191.66a8 8 0 0111.32 0l67.88 67.88a8 8 0 010 11.31l-39.6 39.6a8 8 0 01-11.31 0l-67.88-67.88a8 8 0 010-11.31l39.6-39.6zm669.6 0l39.6 39.6a8 8 0 010 11.3l-67.88 67.9a8 8 0 01-11.32 0l-39.6-39.6a8 8 0 010-11.32l67.89-67.88a8 8 0 0111.31 0zM192 892h640a32 32 0 0132 32v24a8 8 0 01-8 8H168a8 8 0 01-8-8v-24a32 32 0 0132-32zm148-317v253h64V575h-64z\"></path>\n          </svg>\n        </span>\n      </div>\n      <div>\n        <span class=\"ant-typography\" style=\"font-size: 16px; font-weight: 400; color: rgb(51, 51, 51);\">B sung CMND/CCCD v chn dung  hon tt nh danh</span>\n      </div>\n    </div>\n    <div style=\"display: flex; justify-content: flex-end; align-items: center; padding: 0px 10px;\">\n   \n        <span class=\"ant-typography\" style=\"text-align: right; font-weight: 700; color: rgb(51, 51, 51); font-size: 17px;\">\n          <strong>Xc thc ngay</strong>\n        </span>\n \n    </div>\n  </div>\n</div>\n         <div>\n             <ul>\n                 <li data-router=\"/loan/payinfo/\">\n                     <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"bank\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z\"></path></svg>\n                     THNG TIN THANH TON \n\n                 </li>\n                 <li  data-router=\"/loan/mine/\">\n                     <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"dollar-circle\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z\"></path></svg>\n                     Hp ng vay\n\n                 </li>\n                 <li class=\"accessaccount\">\n                     <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"user\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\"></path></svg>\n                     Thng tin c nhn\n\n                 </li>\n                 <li >\n                    <a class=\"btncontact link\" href=\"#\">\n                         <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"customer-service\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384z\"></path></svg>\n                     Lin h t vn - h tr\n\n                    </a>\n                 </li>\n             </ul>\n\n             <div class=\"text-center mtb-32\">\n                 <button class=\"btn btn-danger btnlogout uppercase w50\">\n                     <svg viewBox=\"64 64 896 896\" focusable=\"false\" data-icon=\"logout\" width=\"1em\" height=\"1em\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z\"></path></svg>\n                     NG XUT\n                 </button>\n             </div>\n\n              <div class=\"text-center\" style=\"    color: #333\"> \n            <div>\n                <img src=\"assets/tick.e14cb23e178b8d3acd8f.e14cb23e178b8d3acd8f.png\" style=\"width: 100px;\">\n            <img  src=\"assets/tick.e14cb23e178b8d3acd8f34.cba5b7c4f28060527af5.png\" style=\"width: 100px;\" >\n            </div>\n             \n            <span class=\"ant-typography\">\n                 Bn quyn thuc v Ngn hng TMCP Qun i MBBANK <br>\n                Tt c cc quyn c bo h.<br>\n                Copyright  2023 MBBank\n            </span>\n        </div>\n         </div>\n    </div>\n \n \n</div>\n","forgot":"<div class=\"page forgot\" data-name=\"forgot\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Forgot password</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content container\">\n          <form class=\"flex \">\n             \n            <div class=\"list\">\n                <ul>\n                    <li class=\"item-content item-input\">\n                        <div class=\"item-inner\">\n                            <div class=\"item-title item-label\">S in thoi</div>\n                            <div class=\"item-input-wrap\"><input autofocus type=\"text\" name=\"phone\" id=\"demo-username-1\" placeholder=\"Your phone\" class=\"borderBottom required phone\"><span class=\"input-clear-button\"></span></div>\n                        </div>\n                        \n                    </li>\n                     \n                </ul>\n                 \n            </div>\n             <div class=\"guide\"></div>\n            <div class=\"list\">\n                <button class=\"list-button btn btn-primary\">Xc nhn</button>  \n            </div>\n\n            <p>Th cch khc</p>\n            <div class=\"list\">\n                <a href='/user/forgotemail/'>Khi phc bng Email</a>\n            </div>\n        </form>\n      </div>\n</div>","forgotemail":"<div class=\"page forgotemail\" data-name=\"forgotemail\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Forgot password</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content container\">\n          <form class=\"flex container\">\n             \n            <div class=\"list\">\n                <ul>\n                    <li class=\"item-content item-input\">\n                        <div class=\"item-inner\">\n                            <div class=\"item-title item-label\">Email</div>\n                            <div class=\"item-input-wrap\"><input type=\"email\" name=\"email\" id=\"demo-username-1\" placeholder=\"Your email\" class=\"borderBottom required email\"><span class=\"input-clear-button\"></span></div>\n                        </div>\n                        \n                    </li>\n                    \n                    <li class=\"item-content item-input inputcode hide\">\n                        <div class=\"item-inner\">\n                            <div class=\"item-title item-label\">OTP code</div>\n                            <div class=\"item-input-wrap\"><input type=\"text\" name=\"code\" id=\"demo-username-12\" placeholder=\"Enter OTP\" class=\"borderBottom \"><span class=\"input-clear-button btn-clear-otp\"></span></div>\n\n\n                            <div style=\"    position: absolute;\n    right: 50px;\n    top: 50%;\">\n                                <span class=\"timer\">0s</span> <span class=\"btn-resend\" style=\"    color: blue;\">Gi li code</span>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li class=\"item-content item-input inputpass hide\">\n                        <div class=\"item-inner\">\n                            <div class=\"item-title item-label\">New password</div>\n                            <div class=\"item-input-wrap\"><input type=\"password\" name=\"password\" id=\"demo-username-12\" placeholder=\"Enter new Passwpord\" class=\"borderBottom \"><span class=\"input-clear-button\"></span></div>\n                        </div>\n                    </li>\n                </ul>\n                 \n            </div>\n           \n            <div class=\"list\">\n                <button class=\"list-button btn btn-primary\">Xc nhn</button>  \n            </div>\n\n             \n        </form>\n      </div>\n</div>","userforgothocsinh":"\n<!-- Router\naddRoute({\n    path: '/user/forgothocsinh/',\n    url: site_url('/user/forgothocsinh.html'),\n    on: AEventPage(\"userforgothocsinh\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgothocsinh\" data-name=\"userforgothocsinh\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Khi phc</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Chng ti rt tic . Chng ti khng h tr khi phc dnh cho ti khon hc sinh. Vui lng lin h gio vin hoc ph huynh.</p>\n                 \n              </div>\n          </div>\n    </div>\n    ","userforgothocsinhforgotphuhuynh":"\n<!-- Router\naddRoute({\n    path: '/user/forgothocsinhforgotphuhuynh/',\n    url: site_url('/user/forgothocsinhforgotphuhuynh.html'),\n    on: AEventPage(\"userforgothocsinhforgotphuhuynh\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgothocsinhforgotphuhuynh\" data-name=\"userforgothocsinhforgotphuhuynh\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">--</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              \n          </div>\n    </div>\n    ","userforgotphuhuynh":"\n<!-- Router\naddRoute({\n    path: '/user/forgotphuhuynh/',\n    url: site_url('/user/forgotphuhuynh.html'),\n    on: AEventPage(\"userforgotphuhuynh\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgotphuhuynh\" data-name=\"userforgotphuhuynh\">\n       <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Khi phc</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Vui lng cung cp thng tin bn doi:</p>\n                <form action=\"\" method=\"POST\">\n                  <p>Bn c th nhp: Tn ng nhp, a ch email, S in thoi</p>\n                \n                  <div class=\"mb-3\">\n                    <!-- <label for=\"exampleInputPassword1\" class=\"form-label\">Tn ng nhp / Email</label> -->\n                    <input type=\"text\" class=\"form-control\" autofocus name=\"username\" id=\"exampleInputPassword1\">\n                  </div>\n \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userforgotstepotp":"\n<!-- Router\naddRoute({\n    path: '/user/forgotstepotp/',\n    url: site_url('/user/forgotstepotp.html'),\n    on: AEventPage(\"userforgotstepotp\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgotstepotp\" data-name=\"userforgotstepotp\">\n       <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Khi phc</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Vui lng nhp m OTP c gi t hp th email <span class=\"email bold\"></span> ca bn:</p>\n                <form action=\"\" method=\"POST\">\n                   \n                  <div class=\"mb-3\">\n                    \n                    <input type=\"text\" class=\"form-control\" name=\"code\" autofocus id=\"exampleInputPassword1\">\n                  </div>\n \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userforgotsteppassword":"\n<!-- Router\naddRoute({\n    path: '/user/forgotsteppassword/',\n    url: site_url('/user/forgotsteppassword.html'),\n    on: AEventPage(\"userforgotsteppassword\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgotsteppassword\" data-name=\"userforgotsteppassword\">\n       <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Khi phc</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Vui lng nhp mt khu mi:</p>\n                <form action=\"\" method=\"POST\">\n                   \n                  <div class=\"form-group\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Mt khu mi</label>\n                    <input type=\"password\" class=\"form-control required\" name=\"password\" id=\"exampleInputPassword1\">\n                    <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n                  </div>\n \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userforgotstepsuccess":"\n<!-- Router\naddRoute({\n    path: '/user/forgotstepsuccess/',\n    url: site_url('/user/forgotstepsuccess.html'),\n    on: AEventPage(\"userforgotstepsuccess\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userforgotstepsuccess\" data-name=\"userforgotstepsuccess\">\n       \n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content text-center\">\n              <div class=\"flex-row\">\n                <div class=\"flex\">\n                     <div>\n                          <img src=\"https://cdn-icons-png.flaticon.com/128/190/190411.png\" alt=\"\">\n                        </div>\n                        <p>Xin chc mng!</p>\n                        <p>Cp nht mt khu thnh cng</p>\n                </div>\n                 \n\n                <div>\n                    <a href=\"/user/login/\" class=\"btn btn-primary btn-submit\">ng nhp</a>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","authkyc":"<div class=\"page authkyc\" data-name=\"authkyc\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Xc minh</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <form action=\"\">\n          <h3>Chp nh nh danh KYC</h3>\n\n          <div class=\"boxm boxm1\">\n              \n          </div>  \n\n          <div class=\"boxm boxm2\">\n               \n          </div>  \n\n          <div class=\"boxm boxm3\">\n               \n          </div>  \n\n          <div class=\"text-center\">\n            <button  class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Tip tc</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","authkycdata":"<div class=\"page authkycdata\" data-name=\"authkycdata\">\n      <!-- Top Navbar -->\n      <div class=\"navbar\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Xc minh</div>\n   \n </div>\n</div>\n\n      \n    <!-- Scrollable page content -->\n     <div class=\"page-content\">\n       <form action=\"\">\n          <h3>Thng tin c nhn</h3>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"5\" id=\"xxx\" name=\"name\" class=\"form-control required\" placeholder=\"H Tn\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"text\" minlength=\"10\" id=\"xxx\" name=\"cccd\" class=\"form-control required\" placeholder=\"S CMND/CCCD\" /> \n          </div>\n          <div class=\"form-group\">\n              \n             <select name='gender' class=\"form-control required\">\n                <option value=\"\">Gii tnh</option>\n                <option value=\"Nam\">Nam</option>\n                <option value=\"N\">N</option>\n                <option value=\"Khc\">Khc</option>\n             </select> \n          </div>\n          <div class=\"form-group\">\n              \n             <input type=\"date\" id=\"xxx\" name=\"dob\" class=\"form-control required\" placeholder=\"Ngy thang nm sinh\" /> \n          </div>\n\n           \n          <div class=\"form-group\">\n              \n             <input type=\"text\" id=\"xxx\" name=\"address\" class=\"form-control required\" placeholder=\"a ch\" /> \n          </div>\n           \n           \n          \n\n          <div class=\"text-center\">\n            <button class=\"btn btn-primary mt-24 w50 uppercase btnconfirm\">Tip tc</button>\n          </div>\n       </form> \n      </div>\n      <!-- end -->\n</div>\n    ","userlogin":"<div class=\"page userlogin\" data-name=\"userlogin\">\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n       \n        <div class=\"text-center\">\n          <img class=\"logo\"\n            src=\"assets/mb-bank-logo-inkythuatso-01-10-09-01-10-removebg-preview.01a1bf94480406ca8cf8.png\"\n            width=\"200\"\n            height=\"205\"\n          />\n          <h2>Doanh nghip s - Tri nghim s</h2>\n        </div>\n        <div class=\"flex-center flex\">\n          <form class=\"register\" method=\"POST\">\n            <div class=\"mb-3 form-group\">\n              \n              <input\n                type=\"phone\"\n                autofocus\n                class=\"form-control username\"\n                name=\"phone\"\n                placeholder=\"Nhp s in thoi\"\n                id=\"exampleInputEmail1\"\n                aria-describedby=\"emailHelp\"\n              />\n            </div>\n            <div class=\"mb-3 form-group\">\n               \n              <input\n                type=\"password\"\n                class=\"form-control password\"\n                name=\"password\"\n                id=\"exampleInputPassword1\"\n                placeholder=\"Mt khu\"\n              />\n              <i\n                style=\"\n                  display: inline-block;\n                  padding: 10px;\n                  position: absolute;\n                 right: 0px;\n                  top: 11%;\n                  z-index: 10;\n                \"\n                class=\"n fa fa-eye\"\n                onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"\n              ></i>\n            </div>\n            <div class=\"mb-3 form-group registerinput\">\n               \n              <input\n                type=\"password\"\n                class=\"form-control repassword\"\n                name=\"repassword\"\n                id=\"exampleInputPassword2\"\n                placeholder=\"Nhp li mt khu\"\n              />\n              <i\n                style=\"\n                  display: inline-block;\n                  padding: 10px;\n                  position: absolute;\n                  right: 0;\n                  top: 11%;\n                \"\n                class=\"n fa fa-eye\"\n                onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"\n              ></i>\n            </div>\n            <!-- <div class=\"mb-3 form-check\">\n          <input type=\"radio\" checked name=\"role\"  value=\"hocsinh\" class=\"form-check-input\" id=\"examplseCssheck1\">\n          <label class=\"form-check-label\" for=\"examplseCssheck1\">Hc sinh</label>\n        </div><div class=\"mb-3 form-check\">\n          <input type=\"radio\" class=\"form-check-input\" name=\"role\" value=\"giaovien\" id=\"exampleChecssk1\">\n          <label class=\"form-check-label\" for=\"exampleChecssk1\">Gio vin</label>\n        </div><div class=\"mb-3 form-check\">\n          <input type=\"radio\" class=\"form-check-input\" name=\"role\" value=\"phuhuynh\" id=\"exampsleCheck1\">\n          <label class=\"form-check-label\" for=\"exampsleCheck1\">Ph huynh</label>\n        </div> -->\n   \n            \n            <button class=\"btn btn-primary btn-submit\" >\n            ng k\n          </button>\n          </form>\n        \n         \n          \n\n          <br/>\n          <div class=\"mt-3 request\">\n               c ti khon ?  <strong class=\"text-primary\">ng nhp ngay</strong>\n            </div>\n\n          <div class=\"mt-3 text-center btnforgot\" style=\"opacity: 0.6;\">\n              Qun mt khu\n          </div>\n          <div class=\"ant-image\"><img class=\"ant-image-img\" src=\"assets/uu-dai-removebg-preview.9a977293f9f078150081.png\" style=\"max-width: 300px; margin-bottom: 20px; margin-top: 30px;\"></div>\n           \n        </div>\n    \n    </div>\n  </div>\n  ","register":"<div class=\"page register\" data-name=\"register\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                        Back\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                ng k\n            </div>\n        </div>\n    </div>\n    <div class=\"page-content flex-col\">\n        <form class=\"f flex flex-col\">\n            <div class=\"\">\n                <div class=\"login-screen-title\">\n                    Nhp s in thoi bn di\n                </div>\n                <div class=\"block-footer\">\n                    Some text about login information.\n                    <br>\n                        Lorem ipsum dolor sit amet, consectetur\n                    adipiscing elit.\n                    </br>\n                </div>\n                <div class=\"list\">\n                    <ul>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <!-- <div class=\"item-title item-label\">Enter phone</div> -->\n                                <div class=\"item-input-wrap flex-row\">\n                                    <select class=\"form-control\" name=\"prefix\" style=\"    width: 75px;text-align: center;\">\n                                        <option value=\"+84\">\n                                            +84\n                                        </option>\n                                        <option value=\"+65\">\n                                            +65\n                                        </option>\n                                        <option value=\"+65\">\n                                            +1\n                                        </option>\n                                    </select>\n                                    <input class=\"required borderBottom flex\" type=\"tel\" autofocus id=\"ddssff\" minlength=\"10\" name=\"phone\" placeholder=\"0000000000\" style=\"padding-left:16px\" type=\"tel\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"list\">\n                <ul>\n                    <li>\n                        <button class=\"list-button btn btn-primary\">\n                            Tip tc\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        </form>\n       \n    </div>\n</div>","userregistergiaovien":"\n<!-- Router\naddRoute({\n    path: '/user/registergiaovien/',\n    url: site_url('/user/registergiaovien.html'),\n    on: AEventPage(\"userregistergiaovien\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userregistergiaovien\" data-name=\"userregistergiaovien\">\n       <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">ng k</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Ti khon dnh cho gio vin. Vui lng cung cp thng tin bn di:</p>\n                <form action=\"\" method=\"POST\">\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">H v tn</label>\n                    <input type=\"text\" class=\"form-control\" name=\"fullname\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"> \n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Tn ng nhp</label>\n                    <input type=\"text\" class=\"form-control\" name=\"username\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Mt khu</label>\n                    <input type=\"password\" class=\"form-control\" name=\"password\" id=\"exampleInputPassword1\">\n                  </div>\n\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">S in thoi</label>\n                    <input type=\"text\" class=\"form-control\" name=\"phone\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Email</label>\n                    <input type=\"email\" class=\"form-control\" name=\"email\" id=\"exampleInputPassword1\">\n                  </div>\n\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">a ch hin ti</label>\n                    <input type=\"text\" class=\"form-control\" name=\"address\" id=\"exampleInputPassword1\">\n                  </div>\n                  \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userregisterhocsinh":"\n<!-- Router\naddRoute({\n    path: '/user/registerhocsinh/',\n    url: site_url('/user/registerhocsinh.html'),\n    on: AEventPage(\"userregisterhocsinh\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userregisterhocsinh\" data-name=\"userregisterhocsinh\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">ng k</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Ti khon danh cho hc sinh. Vui lng cung cp thng tin b doi:</p>\n                <form action=\"\" method=\"POST\">\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">H v tn</label>\n                    <input type=\"text\" class=\"form-control\" name=\"fullname\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"> \n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Username</label>\n                    <input type=\"text\" class=\"form-control\" name=\"username\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Mt khu</label>\n                    <input type=\"password\" class=\"form-control\" name=\"password\" id=\"exampleInputPassword1\">\n                  </div>\n\n                   \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userregisterophuhuynh":"\n<!-- Router\naddRoute({\n    path: '/user/registerophuhuynh/',\n    url: site_url('/user/registerophuhuynh.html'),\n    on: AEventPage(\"userregisterophuhuynh\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userregisterophuhuynh\" data-name=\"userregisterophuhuynh\">\n       <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">ng k</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                <p>Ti khon dnh cho ph huynh. Vui lng cung cp thng tin bn di:</p>\n                <form action=\"\" method=\"POST\">\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">H v tn</label>\n                    <input type=\"text\" class=\"form-control\" name=\"fullname\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"> \n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Tn ng nhp</label>\n                    <input type=\"text\" class=\"form-control\" name=\"username\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Mt khu</label>\n                    <input type=\"password\" class=\"form-control\" name=\"password\" id=\"exampleInputPassword1\">\n                  </div>\n\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">S in thoi</label>\n                    <input type=\"tel\" class=\"form-control\" name=\"phone\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Email</label>\n                    <input type=\"email\" class=\"form-control\" name=\"email\" id=\"exampleInputPassword1\">\n                  </div>\n\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">a ch hin ti</label>\n                    <input type=\"text\" class=\"form-control\" name=\"address\" id=\"exampleInputPassword1\">\n                  </div>\n                  \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","registerotp":"<div class=\"page registerotp\" data-name=\"registerotp\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">Back</span>\n          </a>\n        </div>\n        <div class=\"title\">registerotp</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n      <div class=\"page-content flex-col\">\n\n        <form class=\"f flex flex-col\">\n             <div class=\"\">\n                  <div class=\"login-screen-title\">Nhp m OTP</div>\n        <div class=\"block-footer\">Vui lng nhp m OTP c gi n s in thoi ca bn</div>\n        \n              <div class=\"list\">\n                <ul>\n                    <li class=\"item-content item-input\">\n                        <div class=\"item-inner flex-center\">\n                            <div class=\"otp-input-wrapper\">\n                              <input autofocus type=\"text\" maxlength=4 pattern=\"[0-9]*\" autocomplete=\"off\" class=\"required\">\n                              <svg viewBox=\"0 0 240 1\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <line x1=\"0\" y1=\"0\" x2=\"240\" y2=\"0\" stroke=\"#3e3e3e\" stroke-width=\"2\" stroke-dasharray=\"44,22\" />\n                              </svg>\n                            </div>\n                        </div>\n                    </li> \n                </ul>\n            </div>\n            <div class=\"flex-col\">\n                <p>Thi gian hiu lc: <span class=\"timer\" data-timer=\"150\"></span></p>\n            <p class=\"resendcode btn btn-primary btn-xs\">Gi li m OTP</p>\n            </div>\n             </div>\n            <div class=\"list showbtn\">\n                <ul>\n                    <li><button class=\"list-button btn btn-primary\">Tip tc</button></li>\n                </ul>\n                \n            </div>\n         \n        </form>\n\n         \n    </div>\n</div>","registerpassword":"<div class=\"page registerpassword\" data-name=\"registerpassword\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                        Back\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                registerpassword\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content flex-col\">\n        <form class=\"f flex flex-col\">\n            <div class=\"\">\n                <div class=\"login-screen-title\">\n                    Nhp mt khu\n                </div>\n                <div class=\"block-footer\">\n                    Vui lng nhp mt khu v khng chia s vi bt k ai\n                </div>\n                <div class=\"list\">\n                    <ul>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Mt khu mi\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" autofocus id=\"passaaaa\" minlength=\"4\" equalto=\"#passaaa\" name=\"password\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                        <li class=\"item-content item-input\">\n                            <div class=\"item-inner\">\n                                <div class=\"item-title item-label\">\n                                    Nhp li mt khu\n                                </div>\n                                <div class=\"item-input-wrap\">\n                                    <input class=\"required borderBottom\" id=\"passaaa\" minlength=\"4\"  name=\"re_password\" placeholder=\"\" type=\"password\">\n                                        <span class=\"input-clear-button\">\n                                        </span>\n                                    </input>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"list\">\n                <ul>\n                    <li>\n                        <button class=\"list-button btn btn-primary\">\n                            Tip tc\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        </form>\n         \n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/registerpassword/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/registerpassword/\", {});\n-->\n","registersuccess":"<div class=\"page registersuccess\" data-name=\"registersuccess\">\n  \n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content flex-center\">\n          \n          \n          <div class=\"flex\">\n              <div>\n                <img src=\"https://cdn-icons-png.flaticon.com/128/463/463574.png\" height=\"125\">\n              </div>\n              <div class=\"login-screen-title\">To ti khon thnh cng</div>\n              <div class=\"block-footer\">Some text about login information.<br>Lorem ipsum dolor sit amet, consectetur\n                    adipiscing elit.</div>\n          </div>\n          <div class=\"text-center center\">\n              <a  href=\"/home/\" class=\"list-button btn btn-success\">Tip tc</a>\n          </div>\n      </div>\n</div>","userbagkiemtratangban":"<!-- Router\naddRoute({\n    path: '/user/bag/kiemtratangban/',\n    url: site_url('/user/bag/kiemtratangban.html'),\n    on: AEventPage(\"userbagkiemtratangban\")\n}).then((page)=>{});\n!-->\n<div class=\"page userbagkiemtratangban\" data-name=\"userbagkiemtratangban\" style=\"background-color: #060606; color: aliceblue;\">\n  <!-- Top Navbar -->\n  <div class=\"navbar webviewnewsbars\" style=\"background-color: #060606;\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n        <a href=\"#\" class=\"link back\">\n          <i class=\"icon icon-back\"></i>\n          <span class=\"if-not-md\"></span>\n        </a>\n      </div>\n      <div class=\"title\">Kim tra</div>\n    </div>\n  </div>\n\n  <!-- Scrollable page content -->\n  <div class=\"page-content\" style=\"background-color: #060606;\">\n    <div class=\"field-canh-bao\">\n      <h1 class=\"textWarn\">\n        <i class=\"glyphicon glyphicon-warning-sign\"></i> Vui lng kim tra thng\n        tin trc khi tng!\n      </h1>\n    </div>\n    <br> <br>\n\n    <div class=\"field-thongtin\">\n      <div class=\"section-bar clearfix\">\n        <h3 class=\"section-title\"><span>Thng tin ngi c tng</span></h3>\n      </div>\n      <form action=\"\">\n        <label for=\"\" class=\"text\">Tn:</label>\n        <input\n          type=\"text\"\n          name=\"\"\n          id=\"\"\n          class=\"inpNguoiNhan\"\n          value=\"abc\"\n          disabled\n        />\n        <label for=\"\" class=\"text\">ST:</label>\n        <input\n          type=\"text\"\n          name=\"\"\n          id=\"\"\n          class=\"inpNguoiNhan\"\n          value=\"0123456789\"\n          disabled\n        />\n      </form>\n    </div>\n\n    <div class=\"field-tang-ve\">\n      <div class=\"section-bar clearfix\">\n        <h3 class=\"section-title\"><span>M v tng</span></h3>\n      </div>\n      <form action=\"\" style=\"display: flex\">\n        <input\n          type=\"text\"\n          name=\"\"\n          id=\"\"\n          class=\"inpMaVe\"\n          value=\"MPTKT\"\n          disabled\n        />\n      </form>\n    </div>\n\n    <div class=\"field-phim-tang\">\n      <section>\n        <div class=\"section-bar clearfix\">\n          <h3 class=\"section-title\"><span>Phim s tng</span></h3>\n        </div>\n\n        <div class=\"halim_box\">\n          <div class=\"watch-history ah-frame-bg\">\n            <div class=\"item\">\n              <a\n                href=\"/xem-phim-thon-phe-tinh-khong/tap-92-sv1.html\"\n                title=\"Thn Ph Tinh Khng\"\n              >\n                <div>\n                  <img\n                    src=\"https://hoathinh3d.biz/wp-content/uploads/2021/02/thon-phe-tinh-khong-4-150x150.jpg\"\n                  />\n                </div>\n                <div>\n                  <div>Thn Ph Tinh Khng</div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class=\"clearfix\"></div>\n      </section>\n    </div>\n\n    <div class=\"btn-choice\">\n      <button class=\"text-color-white btnHuyKT\">\n        <a href=\"#\">\n          Hy\n        </a>\n      </button>\n      <button class=\"text-color-white btnTangKT\">\n        <a href=\"#\">\n          Tng\n        </a>\n      </button>\n    </div>\n  </div>\n</div>\n","userbagordercompleted":"<div class=\"page userbagordercompleted\" data-name=\"userbagordercompleted\" id=\"userbagordercompleted\" style=\"overflow: auto; background-color: white;\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\" style=\"background-color: #ca1515;\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                </a>\n            </div>\n            <div class=\"title\">\n                n hng  mua\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page -->\n    <div class=\"page-content\">\n        <div class=\"toolbar tabbar tabbar-scrollable\">\n            <div class=\"toolbar-inner\">\n                <a class=\"tab-link tab-link-active\" style=\"color: black;\" href=\"#all_order\">\n                    Tt c\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n                <a class=\"tab-link\" href=\"#tab-2\" style=\"color: black;\">\n                    Ch xc nhn\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n                <a class=\"tab-link\" href=\"#tab-3\" style=\"color: black;\">\n                    Ch ly hng\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n                <a class=\"tab-link\" href=\"#tab-4\" style=\"color: black;\">\n                    ang giao hng\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n                <a class=\"tab-link\" href=\"#tab-5\" style=\"color: black;\">\n                     giao\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n                <a class=\"tab-link\" href=\"#tab-6\" style=\"color: black;\">\n                     hy\n                    <hr class=\"horizontalbar\">\n                    </hr>\n                </a>\n            </div>\n        </div>\n        <div class=\"account_order\">\n            <div class=\"tabs-swipeable-wrap swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden\">\n                <div aria-live=\"polite\" class=\"tabs swiper-wrapper\" id=\"swiper-wrapper-order-list\">\n                    <!-- id=\"swiper-wrapper-caef1ec6d7e3bb40\" -->\n                    <!-- TAB TT C N HNG -->\n                    <div aria-label=\"1 / 6\" class=\" tab tab-active swiper-slide swiper-slide-active\" id=\"all_order\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n\n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\">\n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n\n                        <!-- N HNG 1  -->\n                        <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                     tip nhn n hng\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        Nh bn hng ang chun b n hng ca bn\n                                    </p>\n                                    <p>\n                                        D kin giao hng 10:10 ngy 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                     Theo di n hng\n                                </a>   \n                            </div>   \n                        </div>\n\n                        <!-- N HNG 2  -->\n                        <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Highlands Coffee <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                </p>\n                                <p class=\"delivery_status\">\n                                    ang vn chuyn\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        n hng ca bn ang c vn chuyn bi NinJa Van\n                                    </p>\n                                    <p>\n                                        D kin giao 15h-16h 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://www.highlandscoffee.com.vn/vnt_upload/product/11_2022/BR_Drink/HLC__CARAMEL_FREEZE_PHINDI.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            CARAMEL PHIN FREEZE\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Size: M\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 2\n                                        </span>\n                                    </div>\n                                </li>\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://www.highlandscoffee.com.vn/vnt_upload/product/11_2022/BR_Drink/Tra_Xoai.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            Tr xoi nhit i\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Size: L\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                             <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                     Theo di n hng\n                                </a>   \n                            </div>                        \n                        </div>\n\n                        <!-- N HNG 3  -->\n                        <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                     tip nhn n hng\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        Nh bn hng ang chun b n hng ca bn\n                                    </p>\n                                    <p>\n                                        D kin giao hng 10:10 ngy 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                     Theo di n hng\n                                </a>   \n                            </div>   \n                        </div>\n\n                    </div>\n\n                    <!-- TAB CH XC NHN  -->\n                    <div aria-label=\"2 / 6\" class=\" tab swiper-slide swiper-slide-next\" id=\"tab-2\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n\n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\">\n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n\n                        <!-- N HNG 1  -->\n                        <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                     tip nhn n hng\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        Nh bn hng ang chun b n hng ca bn\n                                    </p>\n                                    <p>\n                                        D kin giao hng 10:10 ngy 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                    Sa n hng\n                                </a>   \n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TAB CH LY HNG   -->\n                    <div aria-label=\"3 / 6\" class=\" tab swiper-slide\" id=\"tab-3\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n                        \n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\" >\n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n\n                        <!-- N HNG 1  -->\n                        <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                    ang chun b hng\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        Nh bn hng ang chun b n hng ca bn\n                                    </p>\n                                    <p>\n                                        D kin giao hng 10:10 ngy 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                    Sa n hng\n                                </a>   \n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TAB ANG GIAO HNG -->\n                    <div aria-label=\"4 / 6\" class=\" tab swiper-slide\" id=\"tab-4\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n                        \n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\">                           \n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n                          <!-- N HNG 1  -->\n                          <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                    ang giao hng\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                        Nh bn hng ang chun b n hng ca bn\n                                    </p>\n                                    <p>\n                                        D kin giao hng 10:10 ngy 10-10-2023\n                                    </p>\n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                    Sa n hng\n                                </a>   \n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TAB  GIAO HNG -->\n                    <div aria-label=\"5 / 6\" class=\" tab swiper-slide\" id=\"tab-5\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n                       \n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\">\n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n\n                          <!-- N HNG 1  -->\n                          <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                     giao\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                    <p>\n                                         giao thnh cng\n                                    </p>\n                                    \n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                    Sa n hng\n                                </a>   \n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TAB  HY-->\n                    <div aria-label=\"6 / 6\" class=\" tab swiper-slide\" id=\"tab-6\" role=\"group\" style=\"width: 100%;\" nodata=\"Cha c n hng ang x l\">\n                       \n                        <!-- KHNG C N HNG -->\n                        <div style=\"display: none;\">\n                            <?php include dirname(__DIR__,4).\"/components/empty_order.php\"; ?>\n                        </div>\n                        \n                          <!-- N HNG 1  -->\n                          <div class=\"order\">\n                            <a class=\"order_header\">\n                                <p>\n                                    <b style=\"color: #ca1515;\">\n                                        Sony VN\n                                        <i class=\"glyphicon glyphicon-chevron-right\"></i>\n                                    </b>\n                                    \n                                </p>\n                                <p class=\"delivery_status\">\n                                     hy\n                                </p>\n                            </a>\n                            <a class=\"order_status\">\n                                <div class=\"icon_left\">\n                                    <img data-setbg=\"https://cdn-icons-png.flaticon.com/512/9561/9561688.png\">\n                                    </img>\n                                </div>\n                                <div class=\"content_center\">\n                                   \n                                </div>\n                                <div class=\"icon_right\">\n                                    <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" viewbox=\"0 0 20 20\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9 18l6-6-6-6\">\n                                        </path>\n                                    </svg>\n                                </div>\n                            </a>\n                            <ul class=\"order_list\">\n                                <li class=\"order_items\">\n                                    <div class=\"order_image\">\n                                        <img data-setbg=\"https://haloshop.vn/image/cache/catalog/products/may-game/sony-playstation/ps5-47-700x700.jpg\">\n                                        </img>\n                                    </div>\n                                    <div class=\"order_information\">\n                                        <p class=\"title\">\n                                            PlayStation 4 / PS Standard Edition\n                                        </p>\n                                        <div class=\"special\">\n                                            <span>\n                                                Mu: Trng\n                                            </span>\n                                        </div>\n                                        <span class=\"order_price\">\n                                            xx.xxx.xxx VND\n                                        </span>\n                                        <span class=\"order_quantity\">\n                                            S lng : 1\n                                        </span>\n                                    </div>\n                                </li>\n                                <p class=\"total_price\">\n                                    Tng cng (xx sn phm):\n                                    <b>\n                                        xx.xxx.xxx VND\n                                    </b>\n                                </p>\n                            </ul>\n                            <div class=\"order_button\">\n                                <a class=\"button button-round button-raised button-outline\" style=\"background-color: #ca1515; color: white;\">\n                                    Sa n hng\n                                </a>   \n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- \nUsage navigate\nDng HTML:\n<a href=\"/user/bag/ordercompleted/\">\n</a>\nDng Javascript:\n  mainView.router.navigate(\"/user/bag/ordercompleted/\", {});\n-->\n","userbagtangban":"\n<!-- Router\naddRoute({\n    path: '/user/bag/tangban/',\n    url: site_url('/user/bag/tangban.html'),\n    on: AEventPage(\"userbagtangban\")\n}).then((page)=>{});\n!-->\n<div class=\"page userbagtangban\" data-name=\"userbagtangban\" style=\"background-color: #060606; color: aliceblue;\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\" style=\"background-color: #060606;\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Tng bn</div>\n   \n </div>\n</div>\n\n          <!-- Scrollable page content -->\n           <div class=\"page-content\" style=\"background-color: #060606;\">\n            <div class=\"field-sdt\">\n              <div class=\"section-bar clearfix\">\n                <h3 class=\"section-title\"><span>Nhp s in thoi ngi c tng</span></h3>\n              </div>\n              <form action=\"\" style=\"display: flex;\">\n                <input type=\"text\" name=\"\" id=\"\" class=\"inpSDTTangBan\" placeholder=\"Nhp s in thoi ngi nhn...\">\n                <button class=\"bg-black text-color-white btnTim\">Tm</button>\n              </form>\n            </div>\n\n            <div class=\"field-thongtin\">\n              <div class=\"section-bar clearfix\">\n                <h3 class=\"section-title\"><span>Thng tin ngi c tng</span></h3>\n              </div>\n              <form action=\"\">\n                <label for=\"\" class=\"text\">Tn:</label>\n                <input type=\"text\" name=\"\" id=\"\" class=\"inpNguoiNhan\">\n                <label for=\"\" class=\"text\">ST:</label>\n                <input type=\"text\" name=\"\" id=\"\" class=\"inpNguoiNhan\">\n              </form>\n            </div>\n\n            <div class=\"field-tang-ve\">\n              <div class=\"section-bar clearfix\">\n                <h3 class=\"section-title\"><span>Nhp m v mun tng</span></h3>\n              </div>\n              <form action=\"\" style=\"display: flex;\">\n                <input type=\"text\" name=\"\" id=\"\" class=\"inpMaVe\" placeholder=\"Nhp m v mun tng...\">\n                <button class=\"bg-black text-color-white btnTang\">\n                  <a href=\"/user/bag/kiemtratangban/\">Tng</a>\n                </button>\n              </form>\n            </div>\n\n            <div class=\"field-phim-hien-co\">\n              <div class=\"phim-da-mua\">\n                <section>\n                  <div class=\"section-bar clearfix\">\n                    <h3 class=\"section-title\"><span>Danh sch phim hin c</span></h3>\n                  </div>\n                 \n                  <div class=\"halim_box\">\n                    <div class=\"watch-history ah-frame-bg\"><div class=\"item\">\n                      <a href=\"/xem-phim-thon-phe-tinh-khong/tap-92-sv1.html\" title=\"Thn Ph Tinh Khng\">\n                          <div>\n                              <img src=\"https://hoathinh3d.biz/wp-content/uploads/2021/02/thon-phe-tinh-khong-4-150x150.jpg\">\n                          </div>\n                          <div>\n                              <div>Thn Ph Tinh Khng</div>\n                          </div>\n                      </a>\n                  </div><div class=\"item\">\n                      <a href=\"/xem-phim-luyen-khi-muoi-van-nam/tap-79-sv1.html\" title=\"Luyn Kh Mi Vn Nm\">\n                          <div>\n                              <img src=\"https://hoathinh3d.biz/wp-content/uploads/2023/02/luyen-khi-muoi-van-nam-1-150x150.jpg\">\n                          </div>\n                          <div>\n                              <div>Luyn Kh Mi Vn Nm</div>\n                          </div>\n                      </a>\n                  </div><div class=\"item\">\n                      <a href=\"/xem-phim-dau-pha-thuong-khung-phan-5-gia-nam-hoc-vien/tap-65-sv1.html\" title=\"u Ph Thng Khung Phn 5\">\n                          <div>\n                              <img src=\"https://hoathinh3d.biz/wp-content/uploads/2022/06/dau-pha-thuong-khung-phan-5-gia-nam-hoc-vien-3-150x150.jpg\">\n                          </div>\n                          <div>\n                              <div>u Ph Thng Khung Phn 5</div>\n                          </div>\n                      </a>\n                  </div></div>\n                  </div>\n                  <div class=\"clearfix\"></div>\n                </section>\n              </div>\n            </div>\n          </div>\n    </div>\n    ","userbagticket":"<div class=\"page userbagticket\" data-name=\"userbagticket\" id=\"userbagticket\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                V ca ti\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content ticket\">\n        <div class=\"empty_ticket\" style=\"display: none;\">\n            <div style=\"width: 180px; margin: 80px auto\">\n                <img src=\"https://cdn-icons-png.flaticon.com/512/9841/9841554.png\" style=\"width: auto;\">\n                </img>\n            </div>\n            <p>\n                bn cha c mn  no trong ti\n            </p>\n        </div>\n        <div class=\"ticket_list\">\n            <div class=\"ticket_items wrapper\">\n                <div class=\"box_top\">\n                    <div class=\"brand_img\">\n                        <img alt=\"brand_img\" src=\"https://vnpt.com.vn/design/images/logo-vnpt-app.jpg\">\n                        </img>\n                    </div>\n                    <div class=\"ticket_infor\">\n                        <h6>\n                            Nhn hng\n                        </h6>\n                        <p>\n                            V ca khch hng\n                        </p>\n                        <p>\n                            M: xxx-xxx-xxx\n                        </p>\n                    </div>\n                </div>\n                <div class=\"text-center\" style=\"padding: 8px 0\">\n                    <a class=\"button button-fill button-round\" href=\"\">\n                       S dng v\n                    </a>\n                </div>\n            </div>\n            <div class=\"ticket_items wrapper\">\n                <div class=\"box_top\">\n                    <div class=\"brand_img\">\n                        <img alt=\"brand_img\" src=\"https://viettel.vn/images/logo.png\">\n                        </img>\n                    </div>\n                    <div class=\"ticket_infor\">\n                        <h6>\n                            Nhn hng\n                        </h6>\n                        <p>\n                            V ca khch hng\n                        </p>\n                        <p>\n                            M: xxx-xxx-xxx\n                        </p>\n                    </div>\n                </div>\n                <div class=\"text-center\" style=\"padding: 8px 0\">\n                    <a class=\"button button-fill button-round\" href=\"\">\n                       S dng v\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/bag/ticket/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/bag/ticket/\", {});\n-->\n","userbagvoucher":"<div class=\"page userbagvoucher\" data-name=\"userbagvoucher\" id=\"userbagvoucher\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                        Back\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Ti voucher\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"voucher\">\n            <div class=\"toolbar tabbar\">\n                <div class=\"toolbar-inner\">\n                    <a class=\"tab-link tab-link-active\" href=\"#tab-1\">\n                        Cha s dng\n                        <hr class=\"horizontalbar\">\n                        </hr>\n                    </a>\n                    <a class=\"tab-link\" href=\"#tab-2\">\n                         dng / Ht\n                        <hr class=\"horizontalbar\">\n                        </hr>\n                    </a>\n                </div>\n            </div>\n            <div class=\"tabs-swipeable-wrap swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden\">\n                <div aria-live=\"polite\" class=\"tabs swiper-wrapper\" id=\"swiper-wrapper-f7d5a10c357c831be\">\n                    <div aria-label=\"1 / 3\" class=\"tab tab-active swiper-slide swiper-slide-active\" id=\"tab-1\" role=\"group\" style=\"width: 100%;\">\n                        <div class=\"nonvoucher\" style=\"display: none\">\n                            <div style=\"width: 180px; margin: 80px auto\">\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/9841/9841554.png\" style=\"width: auto;\">\n                                </img>\n                            </div>\n                            <div>\n                                <h6>\n                                    Bn cha c m gim gi no c\n                                </h6>\n                                <p>\n                                    Lp y ti mnh bng nhng m hp dn nh\n                                </p>\n                            </div>\n                            <div class=\"voucher_button\">\n                                    <a class=\"button button-raised\">\n                                        Dng ngay\n                                    </a>\n                                </div>\n                        </div>\n                        <div class=\"list_voucher\">\n                            <div class=\"voucher_items wrapper flex-col\">\n                                <a class=\"summary flex\">\n                                    <div class=\"trademark\">\n                                        <img alt=\"logo_brand\" src=\"https://upload.wikimedia.org/wikipedia/en/thumb/c/c9/Highlands_Coffee_logo.svg/1200px-Highlands_Coffee_logo.svg.png\">\n                                        </img>\n                                    </div>\n                                    <h6 class=\"voucher_title\">\n                                        Gim 50% M Cafein ng chai m \n                                    </h6>\n                                    <p class=\"date\">\n                                        23:59:00 10-10-2023\n                                    </p>\n                                </a>\n                                <div class=\"voucher_button\">\n                                    <a class=\"button button-raised button-fill button-round\">\n                                        Dng ngay\n                                    </a>\n                                </div>\n                            </div>\n                            <div class=\"voucher_items wrapper flex-col\">\n                                <a class=\"summary flex\">\n                                    <div class=\"trademark\">\n                                        <img alt=\"logo_brand\" src=\"https://gigamall.com.vn/data/2019/09/20/12144388_LOGO-PHUC-LONG-500x500.jpg\">\n                                        </img>\n                                        <span>\n                                            Mi\n                                        </span>\n                                    </div>\n                                    <h6 class=\"voucher_title\">\n                                        Mua 1 tng 1 tr sa Maycha\n                                    </h6>\n                                    <p class=\"date\">\n                                        23:59:00 10-10-2023\n                                    </p>\n                                </a>\n                                <div class=\"voucher_button\">\n                                    <a class=\"button button-raised button-fill button-round\">\n                                        Dng ngay\n                                    </a>\n                                </div>\n                            </div>\n                            <div class=\"voucher_items wrapper flex-col\">\n                                <a class=\"summary flex\">\n                                    <div class=\"trademark\">\n                                        <img alt=\"logo_brand\" src=\"https://upload.wikimedia.org/wikipedia/en/thumb/c/c9/Highlands_Coffee_logo.svg/1200px-Highlands_Coffee_logo.svg.png\">\n                                        </img>\n                                    </div>\n                                    <h6 class=\"voucher_title\">\n                                        Gim 50% M Cafein ng chai m  AA\n                                    </h6>\n                                    <p class=\"date\">\n                                        23:59:00 10-10-2023\n                                    </p>\n                                </a>\n                                <div class=\"voucher_button\">\n                                    <a class=\"button button-raised button-fill button-round\">\n                                        Dng ngay\n                                    </a>\n                                </div>\n                            </div>\n                            <div class=\"voucher_items wrapper flex-col\">\n                                <a class=\"summary flex\">\n                                    <div class=\"trademark\">\n                                        <img alt=\"logo_brand\" src=\"https://gigamall.com.vn/data/2019/09/20/12144388_LOGO-PHUC-LONG-500x500.jpg\">\n                                        </img>\n                                        <span>\n                                            Mi\n                                        </span>\n                                    </div>\n                                    <h6 class=\"voucher_title\">\n                                        Mua 1 tng 1 tr sa Maycha\n                                    </h6>\n                                    <p class=\"date\">\n                                        23:59:00 10-10-2023\n                                    </p>\n                                </a>\n                                <div class=\"voucher_button\">\n                                    <a class=\"button button-raised button-fill button-round\">\n                                        Dng ngay\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div aria-label=\"2 / 3\" class=\"tab swiper-slide swiper-slide-next\" id=\"tab-2\" role=\"group\" style=\"width: 100%;\">\n                        <div class=\"used\" style=\"overflow: auto\">\n                            <div style=\"text-align: center\">\n                                <div style=\"width: 160px; margin: 80px auto\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/9841/9841554.png\" style=\"width: auto;\">\n                                    </img>\n                                </div>\n                                <p>\n                                    Bn cha dng voucher\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!-- do not remove -->\n                <span aria-atomic=\"true\" aria-live=\"assertive\" class=\"swiper-notification\">\n                </span>\n                <!-- do not remove -->\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/bag/voucher/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/bag/voucher/\", {});\n-->\n","usercomingsoon":"    <div class=\"page usercomingsoon \" id=\"usercomingsoon\" data-name=\"usercomingsoon\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">Chc nng ang c hon thin</div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container text-center\">\n            <img src=\"https://cdn-icons-png.flaticon.com/512/7187/7187255.png\">\n            <p>Chc nng ny ang c hon thin, hn bn ln sau nh!</p>\n          </div>\n    </div>\n\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/comingsoon/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/comingsoon/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/comingsoon/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/comingsoon/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"usercomingsoon\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->","userhistoryinv":"    <div class=\"page userhistoryinv\" id=\"userhistoryinv\" data-name=\"userhistoryinv\">\n        <!-- Top Navbar -->\n        <div class=\"navbar\">\n            <div class=\"navbar-bg\"></div>\n            <div class=\"navbar-inner\">\n                <div class=\"left\">\n                    <a href=\"#\" class=\"link back\">\n                        <i class=\"icon icon-back\"></i>\n                        <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n                    </a>\n                </div>\n                <div class=\"title\">Lch s ho n</div>\n            </div>\n        </div>\n\n\n        <!-- Scrollable page content -->\n        <div class=\"page-content container\">\n            <div class=\"block-title\">Links, Header, Footer</div>\n             <div class=\"container justify-content-center mt-5 border-left border-right\">\n    <div class=\"d-flex justify-content-center pt-3 pb-2\"> <input type=\"text\" name=\"text\" placeholder=\"+ Add a note\" class=\"form-control addtxt\"> </div>\n    <div class=\"d-flex justify-content-center py-2\">\n        <div class=\"second py-2 px-2\"> <span class=\"text1\">Type your note, and hit enter to add it</span>\n            <div class=\"d-flex justify-content-between py-1 pt-2\">\n                <div><img src=\"https://i.imgur.com/AgAC1Is.jpg\" width=\"18\"><span class=\"text2\">Martha</span></div>\n                <div><span class=\"text3\">Upvote?</span><span class=\"thumbup\"><i class=\"fa fa-thumbs-o-up\"></i></span><span class=\"text4\">3</span></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"d-flex justify-content-center py-2\">\n        <div class=\"second py-2 px-2\"> <span class=\"text1\">Type your note, and hit enter to add it</span>\n            <div class=\"d-flex justify-content-between py-1 pt-2\">\n                <div><img src=\"https://i.imgur.com/tPvlEdq.jpg\" width=\"18\"><span class=\"text2\">Curtis</span></div>\n                <div><span class=\"text3\">Upvote?</span><span class=\"thumbup\"><i class=\"fa fa-thumbs-o-up\"></i></span><span class=\"text4\">3</span></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"d-flex justify-content-center py-2\">\n        <div class=\"second py-2 px-2\"> <span class=\"text1\">Type your note, and hit enter to add it</span>\n            <div class=\"d-flex justify-content-between py-1 pt-2\">\n                <div><img src=\"https://i.imgur.com/gishFbz.png\" width=\"18\" height=\"18\"><span class=\"text2\">Beth</span></div>\n                <div><span class=\"text3 text3o\">Upvoted</span><span class=\"thumbup\"><i class=\"fa fa-thumbs-up thumbupo\"></i></span><span class=\"text4 text4i\">1</span></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"d-flex justify-content-center py-2 pb-3\">\n        <div class=\"second py-2 px-2\"> <span class=\"text1\">Type your note, and hit enter to add it</span>\n            <div class=\"d-flex justify-content-between py-1 pt-2\">\n                <div><img src=\"https://i.imgur.com/tPvlEdq.jpg\" width=\"18\"><span class=\"text2\">Curtis</span></div>\n                <div><span class=\"text3\">Upvote?</span><span class=\"thumbup\"><i class=\"fa fa-thumbs-o-up\"></i></span><span class=\"text4 text4o\">1</span></div>\n            </div>\n        </div>\n    </div>\n</div>\n        </div>\n    </div>\n\n    <!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/historyinv/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/historyinv/\", {});\n-->","membertree":" \n<div class=\"membertree page\" id=\"membertree\" data-name=\"membertree\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n          </a>\n        </div>\n        <div class=\"title\">H thng thnh vin</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n      \t  <div class=\"block white-view table-responsive\">\n            <p>Members System</p>\n            <div class=\"treeview_container\"></div>\n          </div>\n      </div>\n</div>","userothersetting":"<div class=\"page userothersetting \" data-name=\"userothersetting\" id=\"userothersetting\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Ci t\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"account_setting\">\n            <div class=\"options_container\">\n                <!-- option 1 -->\n                <div class=\"setting_options\">\n                    <div class=\"setting_options_iconleft\">\n                        <img src=\"https://cdn-icons-png.flaticon.com/512/641/641693.png\">\n                        </img>\n                    </div>\n                    <div class=\"options\">\n                        <p>\n                            i mt khu\n                        </p>\n                        <span>\n                        </span>\n                    </div>\n                    <div class=\"setting_options_iconright\">\n                        <span>\n                            <i class=\"icon icon-next\">\n                            </i>\n                        </span>\n                    </div>\n                </div>\n                <!-- Option 2 -->\n                <div class=\"setting_options\">\n                    <div class=\"setting_options_iconleft\">\n                        <img src=\"https://cdn-icons-png.flaticon.com/512/565/565512.png\">\n                        </img>\n                    </div>\n                    <div class=\"options\">\n                        <p>\n                            Xc thc sinh trc hc\n                        </p>\n                        <span>\n                            Vn tay, khun mt, mng mt\n                        </span>\n                    </div>\n                    <div class=\"setting_options_iconright\">\n                        \n                            <label class=\"switch_cst\" for=\"switch_cst_checkbox\">\n                              <input type=\"checkbox\" name=\"abc\" id=\"switch_cst_checkbox\" />\n                              <span class=\"slider\"></span>\n                          </label>                \n                        \n                    </div>\n                </div>\n                <!-- Option 3 -->\n                <div class=\"setting_options\">\n                    <div class=\"setting_options_iconleft\">\n                        <img src=\"https://cdn-icons-png.flaticon.com/512/641/641693.png\">\n                        </img>\n                    </div>\n                    <div class=\"options\">\n                        <p>\n                            i mt khu\n                        </p>\n                    </div>\n                    <div class=\"setting_options_iconright\">\n                        <span>\n                            <i class=\"icon icon-next\">\n                            </i>\n                        </span>\n                    </div>\n                </div>\n                <!-- Option 4 -->\n                <div class=\"setting_options\">\n                    <div class=\"setting_options_iconleft\">\n                        <img src=\"https://cdn-icons-png.flaticon.com/512/641/641693.png\">\n                        </img>\n                    </div>\n                    <div class=\"options\">\n                        <p>\n                            i mt khu\n                        </p>\n                    </div>\n                    <div class=\"setting_options_iconright\">\n                        <span>\n                            <i class=\"icon icon-next\">\n                            </i>\n                        </span>\n                    </div>\n                </div>\n                <!-- Option 5 -->\n                <div class=\"setting_options\">\n                    <div class=\"setting_options_iconleft\">\n                        <img src=\"https://cdn-icons-png.flaticon.com/512/641/641693.png\">\n                        </img>\n                    </div>\n                    <div class=\"options\">\n                        <p>\n                            i mt khu\n                        </p>\n                    </div>\n                    <div class=\"setting_options_iconright\">\n                        <span>\n                            <i class=\"icon icon-next\">\n                            </i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \n** xem hng dn t file .../HD.html\n\n1/ Usage navigate\nDng HTML tag A:\n  <a href=\"/user/other/accsetting/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/other/accsetting/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/other/accsetting/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/other/accsetting/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n\n2/ S dng s kin (click)\n\n$(page.el).on(\"click\",\".btn-action\",function(e){\n    e.preventDefault();\n    site_url(\"...\").post({key:'value'},function(res){\n\n    });\n\n});\n\n3/ show data t mock data\nfunction loadData(data){\n    var ul = $(page.el).find(\".list\");\n\n\n if(typeof res==\"object\"){\n        var tlp = `<div class=\"lr\">\n             <span>Name:</span>\n             <span>{{name}}</span>\n            </div>`;\n        res.data.map(function(v){\n            \n            v.info = JSON.stringify(v);\n            var s = Handlebars.compile(tlp);\n            ul.append(s(v));\n        });\n    }else{\n        ul.html(`No Data`);\n    }\n}\n//load cache\nwindow.ALocal(\"useraccountothersetting\",function(prev,storage){\n    if(prev){\n        loadData(prev);\n    }else{\n        post(site_url(\"...\"),{},function(res){\n          loadData(res);\n          storage.save(res);\n        },true);\n    }  \n});\n-->\n","userotheraddadress":"<div class=\"page userotheraddadress\" data-name=\"userotheraddadress\" id=\"userotheraddadress\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Thm a ch mi\n            </div>\n            <div class=\"right\" onclick=\"alert('hon tt')\">\n                Lu\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content \">\n        <div class=\"addadress\">\n             <form id=\"add_adress\">\n                <div class=\"cst_form_items\">\n                    <input class=\"input_text_special\" name=\"full_name\" placeholder=\" \" type=\"text\" value=\"Khch hng\"/>\n                    <label for=\"full_name\">\n                        H v tn\n                    </label>\n                </div>\n                <div class=\"cst_form_items\">\n                    <input class=\"input_text_special\" placeholder=\" \" name=\"tel\" type=\"tel\" value=\"0909 999 999\"/>\n                    <label for=\"tel\">\n                        S in thoi\n                    </label>\n                </div>\n                <div class=\"cst_form_items\">\n                    <input name=\"adress\" placeholder=\" \" type=\"text\"/>\n                    <label for=\"adress\">\n                       a ch\n                    </label>\n                </div>\n                <div class=\"checkbox_normal\">\n                    <input name=\"is_default_adressss\" id=\"is_default_adress\" type=\"checkbox\"/>\n                    <label for=\"is_default_adress\">\n                       t lm a ch mc nh\n                    </label>\n                </div>\n            </form>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/other/addadress/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/other/addadress/\", {});\n-->\n","useraccountotheradressbook":"<div class=\"page useraccountotheradressbook\" data-name=\"useraccountotheradressbook\" id=\"useraccountotheradressbook\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                S a ch\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n        <div class=\"container phonebook require\">\n            <div class=\"image\">\n                <img src=\"https://cdn-icons-png.flaticon.com/512/854/854878.png\">\n                </img>\n            </div>\n            <h6>\n                Bn cha lu a ch no\n            </h6>\n            <p>\n                Lu a ch gip bn chn ni nhn hng nhanh chng v d dng hn\n            </p>\n           \n            <a class=\"rounded_button\" href=\"/user/account/other/addadress/\">\n                Thm a ch mi\n            </a>\n        </div>\n    </div>\n    <!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/other/adressbook/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/other/adressbook/\", {});\n-->\n</div>","useraccountotherphonebook":"<div class=\"page useraccountotherphonebook\" data-name=\"useraccountotherphonebook\" id=\"useraccountotherphonebook\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Danh b\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\" style=\"position: relative;\">\n        <div class=\"phonebook\">\n            <div class=\"image\">\n                <img src=\"https://cdn-icons-png.flaticon.com/512/3300/3300401.png\">\n                </img>\n            </div>\n            <h6>\n                Cho php truy cp danh b\n            </h6>\n            <p>\n                ng dng s gip bn chuyn tin, tng im..... cho bn b nhanh chng v tin li hn nhiu\n            </p>\n\n            <div id=\"form_lience\">\n                <input id=\"agree\" name=\"agree\" type=\"checkbox\"/>\n                <label for=\"agree\">\n                    Ti ng  vi\n                    <a href=\"\">\n                        chnh sch bo mt v chia s thng tin\n                    </a>\n                    ca ng dng ny\n                </label>\n                <a class=\"button button-fill button-round button-raised\" href=\"/user/account/\">\n                    Cho php truy cp\n                </a>\n            </div>\n        </div>\n        <div class=\"contacts\" style=\"display: none;\">\n            <!-- style=\"display: none;\" -->\n            <div class=\"list contacts-list\">\n                <div class=\"list-group\">\n                    <ul>\n                        <li class=\"list-group-title\">\n                            Bn b  dng ng dng\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Aaron\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Abbie\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Adam\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Adele\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Agatha\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Agnes\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Albert\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Alexander\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"list-group\">\n                    <ul>\n                        <li class=\"list-group-title\">\n                            Danh b\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Bailey\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Barclay\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Bartolo\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Bellamy\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Belle\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div class=\"item-content\">\n                                <div class=\"item-inner\">\n                                    <div class=\"item-title\">\n                                        Benjamin\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/other/phonebook/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/other/phonebook/\", {});\n-->\n","userothershareqr":"<div class=\"page userothershareqr\" data-name=\"userothershareqr\" id=\"userothershareqr\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Gii thiu bn b\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content shareqr\">\n        <div class=\"wrapper\">\n            <h6>\n                <span>M gii thiu:</span>\n                <span class=\"refercode\"> </span>\n                <i class=\"fa fa-clone\" data-copy=\"\" aria-hidden=\"true\"></i>\n            </h6>\n            <p>\n                a bn b qut m ny  chia s\n            </p>\n            <div class=\"qrcode\">\n                <img src=\"https://cdn-icons-png.flaticon.com/512/747/747470.png\">\n                </img>\n            </div>\n            <p>\n                Hoc bm vo link bn di  gi link ci t n bn b\n            </p>\n            <div class=\"flex-row center\">\n                <button class=\"button button-fill button-round button-raised\">\n                    <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"butt\" stroke-linejoin=\"arcs\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 9l-5 5-5-5M12 12.8V2.5\">\n                        </path>\n                    </svg>\n                     Lu QR\n                </button>\n                <button class=\"button button-fill button-round button-raised\" data-share=\"\">\n                    <svg fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"butt\" stroke-linejoin=\"arcs\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <circle cx=\"18\" cy=\"5\" r=\"3\">\n                        </circle>\n                        <circle cx=\"6\" cy=\"12\" r=\"3\">\n                        </circle>\n                        <circle cx=\"18\" cy=\"19\" r=\"3\">\n                        </circle>\n                        <line x1=\"8.59\" x2=\"15.42\" y1=\"13.51\" y2=\"17.49\">\n                        </line>\n                        <line x1=\"15.41\" x2=\"8.59\" y1=\"6.51\" y2=\"10.49\">\n                        </line>\n                    </svg>\n                     Chia s\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML tag A:\n  <a href=\"/user/account/other/shareqr/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/other/shareqr/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/other/shareqr/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n-->\n","profile":"<!-- Add view-init class -->\n<div class=\"page profile\" id='profile' data-name=\"profile\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n          </a>\n        </div>\n        <div class=\"title\">--</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n      <div class=\"page-content\">\n      \t <div class=\"profile-wrapper\">\n  <div class=\"profile-header\">\n    <img data-setbg=\"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM2ODA0NA&ixlib=rb-1.2.1&q=85\" width=\"60\" height=\"60\" class=\"avatar\" />\n    <div class=\"profile-info\">\n      <h1 class=\"display-name\">John Doe</h1>\n    </div>\n    <div class=\"profile-stats\">\n      <div class=\"profile-stat\">\n        <strong id=\"followingCount\">243</strong>\n        <span>Following</span>\n      </div>\n      <div class=\"profile-stat\">\n        <strong id=\"followerCount\">56.7K</strong>\n        <span>Followers</span>\n      </div>\n      <div class=\"profile-stat\">\n        <strong id=\"likeCount\">4.22M</strong>\n        <span>Likes</span>\n      </div>\n    </div>\n    <div class=\"profile-controls\">\n      <div class=\"stacked-button\">\n        <button class=\"follow\" id=\"following\"><span class=\"follow-text\">Follow</span><span class=\"following-text\">Following</span><span class=\"unfollow-text\"><svg viewBox=\"0 0 352 512\" width=\"12\" fill=\"white\" title=\"times\">\n  <path d=\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\" />\n</svg>Unfollow</span></button>\n        <button class=\"follow-ext\"><svg viewBox=\"0 0 320 512\" width=\"10\" title=\"caret-down\" fill=\"#424242\">\n            <path d=\"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\" />\n          </svg></button>\n      </div>\n      <div class=\"follow-ext-menu-wrapper\">\n        <div class=\"follow-ext-menu\">\n          <div class=\"follow-ext-menu-inner\">\n            <button class=\"follow-ext-menu-item\"><svg viewBox=\"0 0 512 512\" fill=\"#424242\" width=\"16\" title=\"share\">\n                <path d=\"M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z\" />\n              </svg>Share</button>\n            <button class=\"follow-ext-menu-item\"><svg viewBox=\"0 0 640 512\" fill=\"#424242\" width=\"16\" title=\"user-slash\">\n                <path d=\"M633.8 458.1L362.3 248.3C412.1 230.7 448 183.8 448 128 448 57.3 390.7 0 320 0c-67.1 0-121.5 51.8-126.9 117.4L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3zM96 422.4V464c0 26.5 21.5 48 48 48h350.2L207.4 290.3C144.2 301.3 96 356 96 422.4z\" />\n              </svg>Report</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"profile-body\">\n    <div class=\"mixup\">\n         <ul class=\"filter__controls\">\n          <li class=\"active\" data-filter=\"*\">All</li>\n          <li data-filter=\".women\">Womens</li>\n          <li data-filter=\".men\">Mens</li>\n          <li data-filter=\".kid\">Kids</li>\n          <li data-filter=\".accessories\">Accessories</li>\n          <li data-filter=\".cosmetic\">Cosmetics</li>\n      </ul>\n      <div class=\"row property__gallery\">\n        <div class=\"col-lg-3 col-md-4 col-sm-6 col-xs-6 mix women\" data-mh=\"homepro\">\n            <div class=\"product__item\">\n                <div class=\"product__item__pic set-bg\" data-setbg=\"img/product/product-1.jpg\">\n                    <div class=\"label new\">New</div>\n                    <ul class=\"product__hover\">\n                        <li><a href=\"img/product/product-1.jpg\" class=\"image-popup\"><span class=\"arrow_expand\"></span></a></li>\n                        <li><a href=\"/product/1\"><span class=\"icon_heart_alt\"></span></a></li>\n                        <li><a href=\"/product/1\"><span class=\"icon_bag_alt\"></span></a></li>\n                    </ul>\n                </div>\n                <div class=\"product__item__text\">\n                    <h6><a href=\"/product/1\">Buttons tweed blazer</a></h6>\n                    <div class=\"rating\">\n                        <i class=\"fa fa-star\"></i>\n                        <i class=\"fa fa-star\"></i>\n                        <i class=\"fa fa-star\"></i>\n                        <i class=\"fa fa-star\"></i>\n                        <i class=\"fa fa-star\"></i>\n                    </div>\n                    <div class=\"product__price\">$ 59.0</div>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"profile-tabs\">\n      <button class=\"profile-tab selected\"><svg viewBox=\"0 0 576 512\" width=\"24\" title=\"images\">\n          <path d=\"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v208c0 44.112 35.888 80 80 80h336zm96-80V80c0-26.51-21.49-48-48-48H144c-26.51 0-48 21.49-48 48v256c0 26.51 21.49 48 48 48h384c26.51 0 48-21.49 48-48zM256 128c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-96 144l55.515-55.515c4.686-4.686 12.284-4.686 16.971 0L272 256l135.515-135.515c4.686-4.686 12.284-4.686 16.971 0L512 208v112H160v-48z\" />\n        </svg></button>\n      <button class=\"profile-tab\"><svg viewBox=\"0 0 512 512\" width=\"24\" title=\"th\">\n          <path d=\"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z\" />\n        </svg></button>\n      <button class=\"profile-tab\">\n        <svg viewBox=\"0 0 512 512\" width=\"24\" title=\"list\">\n          <path d=\"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z\" />\n        </svg>\n      </button>\n    </div>\n    <div class=\"profile-body-section\">\n      <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n       <img height=\"165\" data-setbg=\"https://images.unsplash.com/photo-1638628281370-2d2b76686a4f?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTY0MDM4NTAwMQ&ixlib=rb-1.2.1&q=85\" width=\"110\" />\n    </div>\n  </div>\n</div>\n\t     \n      </div>\n</div>","stepinfo":"<div class=\"page stepinfo\" data-name=\"stepinfo\">\n   \n      <!-- Scrollable page content -->\n       <div class=\"page-content flex-col\">\n          \n          \n          <div class=\"flex flex-center\">\n              <div>\n                <img src=\"https://cdn-icons-png.flaticon.com/128/463/463574.png\" height=\"125\">\n              </div>\n              <div class=\"login-screen-title\">To ti khon thnh cng</div>\n              <div class=\"block-footer\">Some text about login information.<br>Lorem ipsum dolor sit amet, consectetur\n                    adipiscing elit.</div>\n          </div>\n          <div class=\"text-center\">\n                \n                 <a  href=\"/home/\" class=\"list-button btn btn-success\">Tip tc</a>\n          </div>\n      </div>\n</div>","userupdateinfo":"\n<!-- Router\naddRoute({\n    path: '/user/updateinfo/',\n    url: site_url('/user/updateinfo.html'),\n    on: AEventPage(\"userupdateinfo\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userupdateinfo\" data-name=\"userupdateinfo\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Cp nht thng tin</div>\n   \n </div>\n</div>\n\n          \n         <!-- Scrollable page content -->\n           <div class=\"page-content\">\n              <div class=\"block\">\n                 \n                <form action=\"\" method=\"POST\">\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">H v tn</label>\n                    <input type=\"text\" class=\"form-control\" name=\"fullname\" id=\"exampleInputEmail1\" value=\"{{fullname}}\" aria-describedby=\"emailHelp\"> \n                  </div>\n                   \n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Gii tnh</label>\n                    <select name=\"sex\" id=\"\" class=\"form-control sex\">\n                      <option value=\"Nam\">Nam</option>\n                      <option value=\"N\">N</option>\n                    </select>\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPasswosrd1\" class=\"form-label\">Ngy sinh</label>\n                    <input type=\"date\" placeholder=\"DD/MM/YYYY\" class=\"form-control\" name=\"birthday\" value=\"{{birthday}}\" id=\"exampleInputPasswosrd1\">\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">S in thoi</label>\n                    <input type=\"tel\" class=\"form-control\" name=\"phone\" value=\"{{phone}}\" id=\"exampleInputPassword1\">\n                  </div>\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Email</label>\n                    <input type=\"email\" class=\"form-control\" name=\"email\" value=\"{{email}}\" id=\"exampleInputPassword1\">\n                  </div>\n\n\n                  <div class=\"mb-3\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">a ch hin ti</label>\n                    <input type=\"text\" class=\"form-control\" name=\"address\" alue=\"{{address}}\" id=\"exampleInputPassword1\">\n                  </div>\n                  \n                </form>\n\n                <div>\n                    <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Tip tc</button>\n                </div>\n              </div>\n          </div>\n    </div>\n    ","userupdatepass":"\n<!-- Router\naddRoute({\n    path: '/user/updatepass/',\n    url: site_url('/user/updatepass.html'),\n    on: AEventPage(\"userupdatepass\")\n}).then((page)=>{\n\n});\n!-->\n<div class=\"page userupdatepass\" data-name=\"userupdatepass\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Cp nht mt khu</div>\n   \n </div>\n</div>\n\n          \n          \n        <!-- Scrollable page content -->\n         <div class=\"page-content\">\n            \n          <div class=\"flex-row\">\n              <div class=\"flex\">\n         \n       \n            <form action=\"\" method=\"POST\">\n      <div class=\"form-group\">\n        <label for=\"exampleInputEmail1\" class=\"form-label\">Mt khu c</label>\n        <input type=\"password\" class=\"form-control required\" name=\"old\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\"> \n        <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"exampleInputPassworsd1\" class=\"form-label\">Mt khu mi</label>\n        <input type=\"password\" class=\"form-control required\" name=\"new\" id=\"exampleInputPassworsd1\">\n        <i style=\"display:inline-block;padding:10px;position:absolute;right:0;top:35%;\" class=\"n fa fa-eye\" onclick=\"var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}\"></i>\n      </div> \n      \n    </form>\n        </div>\n        <div>\n            <button onclick=\"$(this).closest('.page').find('form').submit()\" class=\"btn btn-primary btn-submit\">Xc nhn</button>\n        </div>\n          </div>\n    \n    </div>\n    \n \n    </div>\n    ","updatereferer":"<div class=\"page updatereferer\" id=\"updatereferer\" data-name=\"updatereferer\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">Cp nht ngi gii thiu</div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n      <div class=\"page-content\">\n\n        <form class=\"h100 flex-col\">\n             <div class=\"flex\">\n                  <div class=\"login-screen-title\">Nhp ngi gii thiu</div>\n                    <div class=\"block-footer\">Bn c th nhp email,st,...</div>\n        \n              <div class=\"list\">\n               <input type=\"text\" maxlength=4 pattern=\"[0-9]*\" autocomplete=\"off\" class=\"required form-control borderBottom\">\n            </div>\n             </div>\n            <div class=\"text-center\">\n               <button class=\"btn btn-primary\">Tip tc</button>\n            </div>\n         \n        </form>\n\n       \n    </div>\n</div>","useraccountbillindex":"<div class=\"page useraccountbillindex\" data-name=\"useraccountbillindex\" id=\"useraccountbillindex\" style=\"overflow: auto;\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Ha n\n            </div>\n            <div class=\"right\">\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"account_bill\">\n            <div class=\"toolbar tabbar tabbar-scrollable auto-scrollable\">\n                <div class=\"toolbar-inner\">\n                    <a class=\"tab-link tab-link-active\" href=\"#all_order\">\n                        Qun l ha n\n                        <hr class=\"horizontalbar\">\n                        </hr>\n                    </a>\n                    <a class=\"tab-link\" href=\"#tab-2\">\n                        Thanh ton t ng\n                        <hr class=\"horizontalbar\">\n                        </hr>\n                    </a>\n                </div>\n            </div>\n            <div class=\"account_bill_body\">\n                <div class=\"tabs-swipeable-wrap swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-backface-hidden\">\n                    <div aria-live=\"polite\" class=\"tabs swiper-wrapper\" id=\"swiper-wrapper-order-list\">\n                        <!-- id=\"swiper-wrapper-caef1ec6d7e3bb40\" -->\n                        <!-- TAB QUN L HA N -->\n                        <div aria-label=\"1 / 6\" class=\" tab tab-active swiper-slide swiper-slide-active\" id=\"all_order\" role=\"group\" style=\"width: 100%;\">\n                            <!-- KHNG C HA N -->\n                            <div class=\"empty_order\" style=\"display: none;\">\n                                <div style=\"text-align: center;\">\n                                    <div style=\"width: 180px; margin: 80px auto\">\n                                        <img src=\"https://cdn-icons-png.flaticon.com/512/4076/4076549.png\" style=\"width: 100%;\">\n                                        </img>\n                                    </div>\n                                    <p style=\"font-weight: 500; font-size: 18px; line-height: 24px;\">\n                                        Bn cha c ha n no\n                                    </p>\n                                    <p>\n                                        Nhp m v lu ha n  thanh ton nhanh chng tin li nh\n                                    </p>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"#\">\n                                            Thm ha n\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- C HA N -->\n                            <div class=\"bill_list\">\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://vnpt.com.vn/design/images/logo-vnpt-app.jpg\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc vin thng\n                                            </p>\n                                            <p>\n                                                M thanh ton: DNI-12-0003851\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-fill button-round button-raised\" href=\"\">\n                                            Thanh ton\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://viettel.vn/images/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc in thoi\n                                            </p>\n                                            <p>\n                                                M thanh ton: xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-fill button-round button-raised\" href=\"\">\n                                            Thanh ton\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- TAB THANH TON T NG  -->\n                        <div aria-label=\"2 / 6\" class=\" tab swiper-slide swiper-slide-next\" id=\"tab-2\" role=\"group\" style=\"width: 100%;\">\n                            <!-- KHNG C HA N T NG -->\n                            <div style=\"display: none;\">\n                                <div style=\"text-align: center;\">\n                                    <div style=\"width: 180px; margin: 80px auto\">\n                                        <img src=\"https://cdn-icons-png.flaticon.com/512/4076/4076549.png\" style=\"width: 100%;\">\n                                        </img>\n                                    </div>\n                                    <p style=\"font-weight: 500; font-size: 18px; line-height: 24px;\">\n                                        Bn cha ng k thanh ton t ng\n                                    </p>\n                                    <p>\n                                        ng k ngay  khng cn lo qun thanh ton ha n nh\n                                    </p>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"#\">\n                                        ng k ngay\n                                    </a>\n                                    </div>\n                                </div>\n                            </div>\n                            <!-- C HA N T NG-->\n                            <div class=\"bill_list bill_auto_pay\">\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://kplus-website-production-cdn.azureedge.net/content/upload/1/root/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Tn khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc K+\n                                            </p>\n                                            <p>\n                                                M thanh ton: K+ xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"\">\n                                            Hy\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://kplus-website-production-cdn.azureedge.net/content/upload/1/root/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Tn khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc K+\n                                            </p>\n                                            <p>\n                                                M thanh ton: K+ xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"\">\n                                            Hy\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://kplus-website-production-cdn.azureedge.net/content/upload/1/root/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Tn khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc K+\n                                            </p>\n                                            <p>\n                                                M thanh ton: K+ xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"\">\n                                            Hy\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://kplus-website-production-cdn.azureedge.net/content/upload/1/root/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Tn khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc K+\n                                            </p>\n                                            <p>\n                                                M thanh ton: K+ xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"\">\n                                            Hy\n                                        </a>\n                                    </div>\n                                </div>\n                                <div class=\"bill_items wrapper\">\n                                    <div class=\"box_top\">\n                                        <div class=\"brand_img\">\n                                            <img alt=\"brand_img\" src=\"https://kplus-website-production-cdn.azureedge.net/content/upload/1/root/logo.png\">\n                                            </img>\n                                        </div>\n                                        <div class=\"bill_infor\">\n                                            <h6>\n                                                Tn khch hng\n                                            </h6>\n                                            <p>\n                                                Thanh ton cc K+\n                                            </p>\n                                            <p>\n                                                M thanh ton: K+ xxx - xxx - xxx\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class=\"bill_button\">\n                                        <a class=\"button button-outline button-round button-raised\" href=\"\">\n                                            Hy\n                                        </a>\n                                    </div>\n                                </div>\n                               \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/utility/bill/billindex/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/utility/bill/billindex/\", {});\n-->\n","useraccountbillelectricity":"    <div class=\"page useraccountbillelectricity\" id=\"useraccountbillelectricity\" data-name=\"useraccountbillelectricity\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">useraccountbillelectricity</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              \n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/useraccountbillelectricity/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/useraccountbillelectricity/\", {});\n-->","useraccountbillinternet":"    <div class=\"page useraccountbillinternet\" id=\"useraccountbillinternet\" data-name=\"useraccountbillinternet\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">useraccountbillinternet</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              \n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/useraccountbillinternet/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/useraccountbillinternet/\", {});\n-->","useraccountbilltelevision":"    <div class=\"page useraccountbilltelevision\" id=\"useraccountbilltelevision\" data-name=\"useraccountbilltelevision\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">useraccountbilltelevision</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              \n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/useraccountbilltelevision/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/useraccountbilltelevision/\", {});\n-->","useraccountbillwatter":"    <div class=\"page useraccountbillwatter\" id=\"useraccountbillwatter\" data-name=\"useraccountbillwatter\">\n       <!-- Top Navbar -->\n          <div class=\"navbar\">\n                  <div class=\"navbar-bg\"></div>\n          <div class=\"navbar-inner\">\n            <div class=\"left\">\n              <a href=\"#\" class=\"link back\">\n                <i class=\"icon icon-back\"></i>\n                <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n              </a>\n            </div>\n            <div class=\"title\">useraccountbillwatter</div>\n             <div class=\"right\">\n              \n            </div>\n          </div>\n        </div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content container\">\n              \n          </div>\n    </div>\n\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/useraccountbillwatter/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/useraccountbillwatter/\", {});\n-->","useraccountutilitymanagespending":"<div class=\"page useraccountutilitymanagespending\" data-name=\"useraccountutilitymanagespending\" id=\"useraccountutilitymanagespending\" style=\"overflow:auto;\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n       \n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Qun l chi tiu\n            </div>\n            <div class=\"right\">\n                <a href=\"#\">\n                    Chia s\n                </a>\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content managespending\">\n        <div class=\"managespending_viewer\">\n            <div class=\"image\">\n                <img src=\"https://cdn-icons-png.flaticon.com/512/2953/2953423.png\">\n                </img>\n            </div>\n            <div>\n                <h5>\n                    Bn  tit kim c trong thng ny\n                </h5>\n                <div class=\"save_money\">\n                    <span>\n                        0\n                    </span>\n                </div>\n            </div>\n            <div class=\"box_save_money wrapper\">\n                <p>\n                    Mi thng ngi dng ng dng c th tit kim ti 200.000. Th xem sao nh!\n                </p>\n                <a class=\"button button-fill button-round button-raised\">\n                    Khm ph thm voucher\n                </a>\n            </div>\n        </div>\n        <div class=\"managespending_more\">\n            <div class=\"header\">\n                <span>\n                    Tng chi thng ny\n                </span>\n                <span>\n                    0\n                </span>\n            </div>\n            <div class=\"menubox\">\n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list col-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"/\">\n                                <div>\n                                  <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/726/726448.png\">\n                                    </img>\n                                </div>\n                                <span>\n                                    Voucher  mua\n                                </span>\n                                </div>\n                                <div class=\"total_save_voucher\">\n                                    <span>\n                                        0\n                                    </span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"butt\" stroke-linejoin=\"arcs\"><path d=\"M9 18l6-6-6-6\"/></svg>\n                                </div>\n                            </a>\n                        </li>\n                         <li class=\"list__items\">\n                            <a href=\"/\">\n                                <div>\n                                  <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3886/3886992.png\">\n                                    </img>\n                                </div>\n                                <span>\n                                   ---------\n                                </span>\n                                </div>\n                                <div class=\"total_save_voucher\">\n                                    <span>\n                                        --\n                                    </span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"butt\" stroke-linejoin=\"arcs\"><path d=\"M9 18l6-6-6-6\"/></svg>\n                                </div>\n                            </a>\n                        </li>\n                       \n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML tag A:\n  <a href=\"/user/account/utility/managespending/\"></a>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/utility/managespending/\"></div>\n\nDng HTML attr tag:\n  <div data-router=\"/user/account/utility/managespending/\"></div>\n\nDng Javascript:\n mainView.router.navigate({\n  path: \"/user/account/utility/managespending/\",\n  params: {},\n});\n\n*neu muon mo new window*\n <a href=\"https://abc.com\" target=\"blank\" class='external'></a>\n <div data-router=\"https://abc.com\" data-open=\"1\"></div>\n window.open(\"https://abc.com\");\n-->\n","useraccountutilityutility":"<div class=\"page useraccountutilityutility\" data-name=\"useraccountutilityutility\" id=\"useraccountutilityutility\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                Ti chnh v tin ch\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content\">\n        <div class=\"utility_home\">\n            <div class=\"button-wrapper\">\n                <a class=\"button button-raised button-fill\" href=\"/user/wallet/\">\n                    Kch hot v\n                </a>\n                <a class=\"button button-raised button-fill color-gray\">\n                    Thm ha n\n                </a>\n            </div>\n            <h6>\n                 xut cho bn\n            </h6>\n            <div class=\"horizontal__scroll\">\n                <a href=\"\">\n                    <div class=\"horizontal__items wrapper\">\n                        <div class=\"horizontal__items_top\">\n                            <div class=\"horizontal__items-icon\">\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/2922/2922355.png\">\n                                </img>\n                            </div>\n                            <div class=\"horizontal__items-text\">\n                                <p>\n                                    ng k ha n in\n                                </p>\n                                <span>\n                                    Thanh ton nhanh chng tin li\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"horizontal__items_bottom\">\n                            <button class=\"button button-raised button-fill\">\n                                Thm ha n\n                            </button>\n                        </div>\n                    </div>\n                </a>\n                <a href=\"\">\n                    <div class=\"horizontal__items wrapper\">\n                        <div class=\"horizontal__items_top\">\n                            <div class=\"horizontal__items-icon\">\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/733/733329.png\">\n                                </img>\n                            </div>\n                            <div class=\"horizontal__items-text\">\n                                <p>\n                                    V in t\n                                </p>\n                                <span>\n                                    Thanh ton nhanh chng tin li\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"horizontal__items_bottom\">\n                            <button class=\"col button button-raised button-fill\">\n                                Kch hot v ngay\n                            </button>\n                        </div>\n                    </div>\n                </a>\n                <a href=\"\">\n                    <div class=\"horizontal__items wrapper\">\n                        <div class=\"horizontal__items_top\">\n                            <div class=\"horizontal__items-icon\">\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/2922/2922355.png\">\n                                </img>\n                            </div>\n                            <div class=\"horizontal__items-text\">\n                                <p>\n                                    ng k ha n in\n                                </p>\n                                <span>\n                                    Thanh ton nhanh chng tin li\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"horizontal__items_bottom\">\n                            <button class=\"col button button-raised button-fill\">\n                                Thm ha n\n                            </button>\n                        </div>\n                    </div>\n                </a>\n                <a href=\"\">\n                    <div class=\"horizontal__items wrapper\">\n                        <div class=\"horizontal__items_top\">\n                            <div class=\"horizontal__items-icon\">\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/2922/2922355.png\">\n                                </img>\n                            </div>\n                            <div class=\"horizontal__items-text\">\n                                <p>\n                                    ng k ha n in\n                                </p>\n                                <span>\n                                    Thanh ton nhanh chng tin li\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"horizontal__items_bottom\">\n                            <button class=\"col button button-raised button-fill\">\n                                Thm ha n\n                            </button>\n                        </div>\n                    </div>\n                </a>\n            </div>\n            <!-- Begin menu list thanh tan  -->\n            <h6>\n              Thanh ton              \n            </h6>\n            <div class=\"menubox\">\n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list row-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/148/148781.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Np tin\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/5789/5789961.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Chuyn tin\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/7959/7959175.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Qu nhm\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- End menu list thanh tan  -->\n            <!-- ------------------------- -->\n            <!-- Begin menu list vin thng  -->\n            <h6>\n                Vin thng\n            </h6>\n            <div class=\"menubox\">\n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list row-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/855/855364.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Np tin in thoi\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/9479/9479869.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Mua th in thoi\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/1179/1179476.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Tr tin in thoi tr sau\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3666/3666838.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Mua Data\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- End menu list vin thng  -->\n            <!-- ------------------------- -->\n\n            <!-- Begin menu list Ha n  -->\n            <h6>\n                Ha n\n            </h6>\n            <div class=\"menubox\">\n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list row-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3133/3133651.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Ha n in\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3105/3105807.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Ha n nc\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/2794/2794952.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Ha n internet\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/1023/1023521.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Ha n truyn hnh\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/726/726488.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Ha n ti chnh\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3976/3976631.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Thanh ton hc ph\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- End menu list ha n  -->\n            <!-- ------------------------- -->\n             <!-- Begin menu list Ha n  -->\n            <h6>\n               Tin ch \n            </h6>\n            <div class=\"menubox\">\n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list row-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/432/432312.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Mua v \n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/9331/9331097.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Cng ng\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/3845/3845731.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Thi tit\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/4725/4725478.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                               ----------\n                            </span>\n                       <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/4725/4725478.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                               ----------\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/4725/4725478.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                               ----------\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/4725/4725478.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                               ----------\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"#\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/4725/4725478.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                               ----------\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- End menu list ha n  -->\n            <!-- ------------------------- -->\n        </div>\n    </div>\n    <!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/account/utility/utility/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/account/utility/utility/\", {});\n-->\n</div>","userwallet":"<div class=\"page userwallet\" data-name=\"userwallet\" id=\"userwallet\">\n    <!-- Top Navbar -->\n    <div class=\"navbar\">\n        <div class=\"navbar-bg\">\n        </div>\n        <div class=\"navbar-inner\">\n            <div class=\"left\">\n                <a class=\"link back\" href=\"#\">\n                    <i class=\"icon icon-back\">\n                    </i>\n                    <span class=\"if-not-md\">\n                        Back\n                    </span>\n                </a>\n            </div>\n            <div class=\"title\">\n                userwallet\n            </div>\n        </div>\n    </div>\n    <!-- Scrollable page content -->\n    <div class=\"page-content container\">\n\n      <!-------- BEGIN user wallet information header -------->\n      <div class=\"wallet\">\n          <div class=\"block\">\n              <div class=\"user_wallet\">\n                  <div class=\"information\">\n                      <div>\n                          <p>\n                              <b>\n                                  V ca bn cha c tin, lin kt ngn hng np lin vi\n                                  trm\n                              </b>\n                          </p>\n                          <a href=\"\">\n                              Lin kt ngay\n                              <i class=\"fas fa-chevron-right\">\n                              </i>\n                          </a>\n                      </div>\n                      <!-- <div class=\"have money\">\n                              <p>S d: ........</p>\n                              <a href=\"\">\n                                Np tin ngay\n                                <i class=\"fas fa-chevron-right\"></i>\n                              </a>\n                            </div> -->\n                  </div>\n                  <div class=\"user_wallet_img\">\n                      <img alt=\"\" src=\"https://cdn-icons-png.flaticon.com/512/4334/4334671.png\"/>\n                  </div>\n              </div>\n          </div>\n      </div>\n      <!-------- END user wallet -------->\n\n      <!-------- BEGIN wallet body-------->\n      <div class=\"block\">\n        <h6>Qu nhm</h6>\n        <div>\n          <ul class=\"wallet__menu\">\n            <li class=\"wallet__menu_items\">\n              <a href=\"\" class=\"wallet__menu_links\">\n                <div class=\"links_header\">\n                  <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/1828/1828817.png\"\n                  />\n                </div>\n                <p>To qu nhm mi</p>\n              </a>\n            </li>\n            <li class=\"wallet__menu_items\">\n              <a href=\"\" class=\"wallet__menu_links\">\n                <div class=\"links_header\">\n                  <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/2641/2641242.png\"\n                  />\n                </div>\n                <p>Ph sinh hot</p>\n              </a>\n            </li>\n            <li class=\"wallet__menu_items\">\n              <a href=\"\" class=\"wallet__menu_links\">\n                <div class=\"links_header\">\n                  <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/4758/4758514.png\"\n                  />\n                </div>\n                <p>Du lch</p>\n              </a>\n            </li>\n            <li class=\"wallet__menu_items\">\n              <a href=\"\" class=\"wallet__menu_links\">\n                <div class=\"links_header\">\n                  <img\n                  src=\"https://cdn-icons-png.flaticon.com/512/1543/1543519.png\"\n                  />\n                </div>\n                <p>n ung</p>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <div>\n          <div class=\"wallet_help\">\n            <div class=\"wallet__help_image\"></div>\n            <div class=\"wallet__help_content\">\n              <h6>V in t gip g cho bn</h6>\n              <p>\n                Thanh ton mi giao dch trn ng dng v ti cc a im chp nhn\n                v\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-------- END user wallet -------->\n\n    </div>\n</div>\n<!-- \nUsage navigate\nDng HTML:\n  <a href=\"/user/wallet/\"></a>\nDng Javascript:\n  mainView.router.navigate(\"/user/wallet/\", {});\n-->\n","userwalletindex":"<!-- Router\naddRoute({\n    path: '/user/wallet/index/',\n    url: site_url('/user/wallet/index.html'),\n    on: AEventPage(\"userwalletindex\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletindex useraccount\" data-name=\"userwalletindex\">\n  <!-- Top Navbar -->\n  <div class=\"navbar webviewnewsbars\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n        <a href=\"#\" class=\"link back\">\n          <i class=\"icon icon-back\"></i>\n          <span class=\"if-not-md\"></span>\n        </a>\n      </div>\n      <div class=\"title\">V tin</div>\n    </div>\n  </div>\n<div class=\"page-content container\">\n<div class=\"home_account\">\n    <div class=\"account_menu_profile\">\n        \n        <!----- Begin Menu  ------>\n        <div class=\"profile_menu\">\n            <div class=\"menubox wrapper\">\n                \n                <div class=\"menubox__body\">\n                    S d: <span>0</span>\n                </div>\n            </div>\n            <div class=\"menubox wrapper\">\n                \n                <div class=\"menubox__body\">\n                    <ul class=\"menubox__list row-cst\">\n                        <li class=\"list__items\">\n                            <a href=\"/wallet/deposit/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/149/149162.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Np\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"/wallet/deposit/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/149/149162.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Rt\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"/wallet/transfer/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/5623/5623198.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Chuyn\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"/wallet/history/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/8432/8432416.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Lch s\n                            </span>\n                        </li>\n                      \n                        <li class=\"list__items\">\n                            <a href=\"/user/comingsoon/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/584/584093.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Hoa Hng\n                            </span>\n                        </li>\n                        <li class=\"list__items\">\n                            <a href=\"/user/comingsoon/\">\n                                <div class=\"list__items--icons\">\n                                    <img src=\"https://cdn-icons-png.flaticon.com/512/584/584093.png\">\n                                    </img>\n                                </div>\n                            </a>\n                            <span>\n                                Staking\n                            </span>\n                        </li>\n                         \n                    </ul>\n                </div>\n            </div>\n             \n             \n        </div>\n    </div>\n</div>\n</div>\n</div>\n","userwalletlichsuruttien":"\n<!-- Router\naddRoute({\n    path: '/user/wallet/lichsuruttien/',\n    url: site_url('/user/wallet/lichsuruttien.html'),\n    on: AEventPage(\"userwalletlichsuruttien\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletlichsuruttien\" data-name=\"userwalletlichsuruttien\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Lc s rt tin</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n             <p>lch s rt tin</p>\n          </div>\n\n          \n    </div>\n    ","userwalletlicksunaptien":"\n<!-- Router\naddRoute({\n    path: '/user/wallet/licksunaptien/',\n    url: site_url('/user/wallet/licksunaptien.html'),\n    on: AEventPage(\"userwalletlicksunaptien\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletlicksunaptien\" data-name=\"userwalletlicksunaptien\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">lch s np tin</div>\n   \n </div>\n</div>\n\n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n               <p>lch s np tin</p>\n          </div>\n\n        \n    </div>\n    ","userwalletnaptien":"<!-- Router\naddRoute({\n    path: '/user/wallet/naptien/',\n    url: site_url('/user/wallet/naptien.html'),\n    on: AEventPage(\"userwalletnaptien\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletnaptien\" data-name=\"userwalletnaptien\">\n  <!-- Top Navbar -->\n  <div class=\"navbar webviewnewsbars\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n        <a href=\"#\" class=\"link back\">\n          <i class=\"icon icon-back\"></i>\n          <span class=\"if-not-md\"></span>\n        </a>\n      </div>\n      <div class=\"title\">NP TIN</div>\n    </div>\n  </div>\n\n  <!-- Scrollable page content -->\n  <div class=\"page-content\">\n    <form action=\"\">\n      <div class=\"box-sotien\">\n        <span\n          >Tng tin\n          <p class=\"money\">0.00 </p></span\n        >\n      </div>\n      <p>Phng thc thanh ton</p>\n\n<div style=\"display: flex;\">\n  <div class=\"col-xs-4 col-sm-4 col-md-3 select\">\n    <button><i class=\"glyphicon glyphicon-usd\"></i><br>Chuyn khon</button>\n  </div>\n  <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n    <button><i class=\"glyphicon glyphicon-usd\"></i>MoMoPay</button>\n  </div>\n  <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n    <button><i class=\"glyphicon glyphicon-usd\"></i> <br>Zalopay</button>\n  </div>\n  \n</div>\n      <!-- <div class=\"formNHDP\">\n        <h1 class=\"title\">Ngn hng a phng</h1>\n \n        <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n          <p class=\"labelinfo\"> Tn ngn hng</p>\n        <h1 class=\"fright\"><span class=\"infoCK\">VIB</span>\n         <span class=\"coppy-icon\">\n           <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n           </i>\n       </span>\n        </h1>\n       </div>\n      <hr>\n\n    \n    <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n       <p class=\"labelinfo\"> S ti khon</p>\n     <h1 class=\"fright\"><span class=\"infoCK\">0285466326735</span>\n      <span class=\"coppy-icon\">\n        <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n        </i>\n    </span>\n     </h1>\n    </div>\n    <hr>\n\n    <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n      <p class=\"labelinfo\">S ch ti khon</p>\n      <h1 class=\"fright\"><span class=\"infoCK\">NGOC AN NHIEN</span>\n        <span class=\"coppy-icon\">\n          <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n          </i>\n      </span>\n      </h1>\n    </div>\n    <hr>\n    <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n      <p class=\"labelinfo\">S tin thanh ton</p>\n      <h1 class=\"fright\">\n        <span class=\"infoCK\">50000</span>\n        <span class=\"coppy-icon\">\n          <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n          </i>\n      </span>\n      </h1>\n    </div>\n    <hr>\n      </div> -->\n\n      <div class=\"formMoMo\">\n        <h1 class=\"title\">MoMoPay</h1>\n        <h1 class=\"title\">S tin np:  <span >50000</span> vn</h1>\n        <div style=\"display: flex;\">\n          <div class=\"col-xs-4 col-sm-4 col-md-3 select\">\n            <button class=\"col-xs-4 col-sm-4 col-md-4 \">50K</button>\n          </div>\n         \n          <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n            <button class=\"col-xs-4 col-sm-4 col-md-4 \">100K</button>\n          </div>\n\n          <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n            <button class=\"col-xs-4 col-sm-4 col-md-4 \">200K</button>\n          </div>\n       </div>\n   \n      </div>\n\n      <!-- <div class=\"text-center\">\n        <button class=\"btnHuy\">Hy</button>\n      </div> -->\n\n\n      <div class=\"text-center\">\n        <a href=\"/user/wallet/thanhtoan/\">\n          <button class=\"btnNapTien\">NP TIN</button>\n        </a>\n      </div>\n    </form>\n  </div>\n</div>\n","userwalletruttien":"<!-- Router\naddRoute({\n    path: '/user/wallet/ruttien/',\n    url: site_url('/user/wallet/ruttien.html'),\n    on: AEventPage(\"userwalletruttien\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletruttien\" data-name=\"userwalletruttien\">\n  <!-- Top Navbar -->\n  <div class=\"navbar webviewnewsbars\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n        <a href=\"#\" class=\"link back\">\n          <i class=\"icon icon-back\"></i>\n          <span class=\"if-not-md\"></span>\n        </a>\n      </div>\n      <div class=\"title\">RT TIN</div>\n    </div>\n  </div>\n\n  <!-- Scrollable page content -->\n  <div class=\"page-content\">\n    <form action=\"\">\n      <div class=\"box-sotien\">\n        <span>S tin\n        <p class=\"money\">0.00 </p></span>\n      </div>\n  \n\n        <button class=\"btnBankCard\">\n          <i class=\"glyphicon glyphicon-credit-card\"></i> <br />\n          BANK CARD\n        </button>\n\n  \n      \n        <div style=\"position: relative; width: 100%; margin:20px 0px;\">\n          <input\n          placeholder=\"Vui lng nhp s tin rt\"\n          type=\"text\"\n          class=\"col-lg-offset-3\"\n          style=\"\n              border-radius: 8px;\n              width: 100%;\n              height: 45px;\n           \n          \"\n      />\n        </div>\n  \n  \n    <p>Phng thc thanh ton</p>\n  \n    <div class=\"box-addBankCard\">\n     <a href=\"/user/wallet/themthenganhang/\">\n      <button class=\"btnAddBankCard\">\n        <i class=\"glyphicon glyphicon-plus-sign\"></i> Thm vo BANK CARD\n      </button>\n     </a>\n    </div>\n  \n    \n      <div style=\"position: relative; width: 100%;  margin:20px 0px;\">\n          <input\n              placeholder=\"Mt khu\"\n              type=\"password\"\n              class=\"col-lg-offset-3\"\n              style=\"\n                  border-radius: 8px;\n                  width: 100%;\n                  height: 45px;\n                \n              \"\n          />\n      </div>\n\n\n  <div class=\"text-center\">\n    <button class=\"btnRutTien \">RT TIN</button>\n  </div>\n    </form>\n\n  </div>\n</div>\n","userwalletthanhtoan":"\n<!-- Router\naddRoute({\n    path: '/user/wallet/thanhtoan/',\n    url: site_url('/user/wallet/thanhtoan.html'),\n    on: AEventPage(\"userwalletthanhtoan\")\n}).then((page)=>{});\n!-->\n<div class=\"page userwalletthanhtoan\" data-name=\"userwalletthanhtoan\">\n      <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n         <div class=\"navbar-bg\"></div>\n <div class=\"navbar-inner sliding\">\n   <div class=\"left\">\n     <a href=\"#\" class=\"link back\">\n       <i class=\"icon icon-back\"></i>\n       <span class=\"if-not-md\"></span>\n     </a>\n   </div>\n   <div class=\"title\">Thanh ton</div>\n   \n </div>\n</div>\n\n          \n          <!-- Scrollable page content -->\n           <div class=\"page-content\">\n            <form action=\"\">\n              <div class=\"box-sotien\">\n                <span\n                  >Tng tin\n                  <p class=\"money\">0.00 </p></span\n                >\n              </div>\n              <p>Phng thc thanh ton</p>\n        \n        <div style=\"display: flex;\">\n          <div class=\"col-xs-4 col-sm-4 col-md-3 select\">\n            <button><i class=\"glyphicon glyphicon-usd\"></i><br>Chuyn khon</button>\n          </div>\n          <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n            <button><i class=\"glyphicon glyphicon-usd\"></i>MoMoPay</button>\n          </div>\n          <div class=\"col-xs-4 col-sm-4 col-md-3 noselect\">\n            <button><i class=\"glyphicon glyphicon-usd\"></i> <br>Zalopay</button>\n          </div>\n          \n        </div>\n              <div class=\"formNHDP\">\n                <h1 class=\"title\">Ngn hng a phng</h1>\n         \n                <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n                  <p class=\"labelinfo\"> Tn ngn hng</p>\n                <h1 class=\"fright\"><span class=\"infoCK\">VIB</span>\n                 <span class=\"coppy-icon\">\n                   <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n                   </i>\n               </span>\n                </h1>\n               </div>\n              <hr>\n        \n            \n            <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n               <p class=\"labelinfo\"> S ti khon</p>\n             <h1 class=\"fright\"><span class=\"infoCK\">0285466326735</span>\n              <span class=\"coppy-icon\">\n                <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n                </i>\n            </span>\n             </h1>\n            </div>\n            <hr>\n        \n            <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n              <p class=\"labelinfo\">S ch ti khon</p>\n              <h1 class=\"fright\"><span class=\"infoCK\">NGOC AN NHIEN</span>\n                <span class=\"coppy-icon\">\n                  <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n                  </i>\n              </span>\n              </h1>\n            </div>\n            <hr>\n            <div  class=\"layoutNHDP\" style=\"margin-bottom: 10px;\">\n              <p class=\"labelinfo\">S tin thanh ton</p>\n              <h1 class=\"fright\">\n                <span class=\"infoCK\">50000</span>\n                <span class=\"coppy-icon\">\n                  <i aria-hidden=\"true\" class=\"fas fa-clone bank_namecopy\" data-copy=\"\">\n                  </i>\n              </span>\n              </h1>\n            </div>\n            <hr>\n              </div>\n       \n        \n              <div class=\"text-center\">\n                <button class=\"btnHuy\">Hy</button>\n              </div>\n        \n  \n            </form>\n          </div>\n\n    </div>\n    ","userwalletthemthenganhang":"<!-- Router\naddRoute({\n    path: '/user/wallet/themthenganhang/',\n    url: site_url('/user/wallet/themthenganhang.html'),\n    on: AEventPage(\"userwalletthemthenganhang\")\n}).then((page)=>{});\n!-->\n<div\n  class=\"page userwalletthemthenganhang\"\n  data-name=\"userwalletthemthenganhang\"\n>\n  <!-- Top Navbar -->\n  <div class=\"navbar webviewnewsbars\">\n    <div class=\"navbar-bg\"></div>\n    <div class=\"navbar-inner sliding\">\n      <div class=\"left\">\n        <a href=\"#\" class=\"link back\">\n          <i class=\"icon icon-back\"></i>\n          <span class=\"if-not-md\"></span>\n        </a>\n      </div>\n      <div class=\"title\">Thm th ngn hng</div>\n    </div>\n  </div>\n\n  <!-- Scrollable page content -->\n  <div class=\"page-content\">\n    <form action=\"\">\n      <label for=\"\">Tn ngn hng</label>\n    <select name=\"\" id=\"\" class=\"inp\">\n      <option value=\"\">ACB</option>\n      <option value=\"\">Techcombank</option>\n      <option value=\"\">Agribank</option>\n      <option value=\"\">MB Bank</option>\n      <option value=\"\">VIB</option>\n    </select>\n\n    <label for=\"\">Tn ch ti khon</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\" />\n    <p>\n      H tn phi c vit hoa khng du v cch nhau bng du cch ! <br />\n      V d: NGUYEN VAN AN\n    </p>\n\n    <label for=\"\">S ti khon</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\"/>\n\n    <label for=\"\">Thnh ph</label>\n\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\" />\n\n    <label for=\"\">Email</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\"/>\n\n    <label for=\"\">S in thoi</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\"/>\n\n    <label for=\"\">Tnh</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\"/>\n\n    <label for=\"\">Chi nhnh</label>\n    <input type=\"text\" name=\"\" id=\"\" placeholder=\"Cn thit in\" class=\"inp\"/>\n\n\n    <button class=\"btnThemThe\">Thm th ngn hng</button>\n    </form>\n  </div>\n</div>\n","webview":"<div class=\"page webview\" data-name=\"webview\">\n    <div class=\"logointro\"></div>\n   <!-- Top Navbar -->\n      <div class=\"navbar webviewnewsbars\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner sliding\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link btnback\">\n            <i class=\"fa-light fa-arrow-left\"></i>\n            <span class=\"if-not-md\"></span>\n          </a>\n        </div>\n        <div class=\"title\">--</div>\n        <div class=\"right\">\n\n                 \n                <button class=\"popover-open\" data-popover=\".popover-menu-web\" data-toggle=\"dropdown\" style=\"border: 0;\n                  background-color: transparent;\">\n                  <span class=\"svg-icon\">\n                    <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"css-i6dzq1\"><line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line></svg>\n                  </span>\n                </button>\n                   \n        </div>\n                              \n           \n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n        <div class=\"page-content\">\n         \n      </div>\n      <div class=\"popover-menu-web popover popover-on-bottom popover-on-right popover-on-center\" style=\"display: none; z-index: 999999;\">\n        <div class=\"popover-arrow on-top\" style=\"left: 117px;\">\n        </div>\n        <div class=\"popover-angle\">\n        </div>\n        <div class=\"popover-inner dropdown\">\n            <ul class=\"dropdown-menu chat_menu_list\" style=\"position: relative; display: block;\">\n                <li class=\"chat_menu_item\" >\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <path d=\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\">\n                            </path>\n                            <circle cx=\"8.5\" cy=\"7\" r=\"4\">\n                            </circle>\n                            <line x1=\"20\" x2=\"20\" y1=\"8\" y2=\"14\">\n                            </line>\n                            <line x1=\"23\" x2=\"17\" y1=\"11\" y2=\"11\">\n                            </line>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-report='' href=\"#\">\n                        Bo co\n                    </a>\n                </li>\n                <li class=\"chat_menu_item\">\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\">\n                            </path>\n                            <circle cx=\"9\" cy=\"7\" r=\"4\">\n                            </circle>\n                            <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\">\n                            </path>\n                            <path d=\"M16 3.13a4 4 0 0 1 0 7.75\">\n                            </path>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-save='' href=\"#\" >\n                        Lu vo yu thch\n                    </a>\n                </li>\n                <li class=\"chat_menu_item divider\">\n                </li>\n                <li class=\"chat_menu_item\" data-router=\"/feed/\">\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <circle cx=\"12\" cy=\"12\" r=\"4\">\n                            </circle>\n                            <path d=\"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94\">\n                            </path>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-copy=\"\" href=\"#\">\n                        Copy a ch\n                    </a>\n                </li>\n                <li class=\"divider\">\n                </li>\n                <li class=\"chat_menu_item\">\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <path d=\"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z\">\n                            </path>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-share=\"\" href=\"#\">\n                       Chia s\n                    </a>\n                </li>\n                 \n            </ul>\n        </div>\n    </div>\n</div>","modulestest":" \n\n<!-- HTML -->\n<div class=\"page modulestest\" data-name=\"modulestest\">\n   <!-- Top Navbar -->\n      <div class=\"navbar\">\n              <div class=\"navbar-bg\"></div>\n      <div class=\"navbar-inner\">\n        <div class=\"left\">\n          <a href=\"#\" class=\"link back\">\n            <i class=\"icon icon-back\"></i>\n            <span class=\"if-not-md\">&nbsp;&nbsp;</span>\n          </a>\n        </div>\n        <div class=\"title\">modulestest</div>\n         <div class=\"right\">\n          \t<div class=\"right\">\n\n             \n\t                <button class=\"popover-open\" data-popover=\".popover-menu-modulestest\" data-toggle=\"dropdown\" style=\"border: 0;\n\t                  background-color: transparent;\">\n\t                  <span class=\"svg-icon\">\n\t                    <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"css-i6dzq1\"><line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line></svg>\n\t                  </span>\n\t                </button>\n\t                   \n\t        </div>\n        </div>\n      </div>\n    </div>\n\n      \n      <!-- Scrollable page content -->\n       <div class=\"page-content\">\n          modulestest\n      </div>\n\n      <div class=\"popover-menu-modulestest popover popover-on-bottom popover-on-right popover-on-center\" style=\"display: none; z-index: 999999;\">\n        <div class=\"popover-arrow on-top\" style=\"left: 117px;\">\n        </div>\n        <div class=\"popover-angle\">\n        </div>\n        <div class=\"popover-inner dropdown\">\n            <ul class=\"dropdown-menu chat_menu_list\" style=\"position: relative; display: block;\">\n                <li class=\"chat_menu_item\" >\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <path d=\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\">\n                            </path>\n                            <circle cx=\"8.5\" cy=\"7\" r=\"4\">\n                            </circle>\n                            <line x1=\"20\" x2=\"20\" y1=\"8\" y2=\"14\">\n                            </line>\n                            <line x1=\"23\" x2=\"17\" y1=\"11\" y2=\"11\">\n                            </line>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-report='' href=\"#\">\n                        Thng tin thm\n                    </a>\n                </li>\n                <li class=\"chat_menu_item\">\n                    <span class=\"svg-icon\">\n                        <svg class=\"css-i6dzq1\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewbox=\"0 0 24 24\" width=\"24\">\n                            <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\">\n                            </path>\n                            <circle cx=\"9\" cy=\"7\" r=\"4\">\n                            </circle>\n                            <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\">\n                            </path>\n                            <path d=\"M16 3.13a4 4 0 0 1 0 7.75\">\n                            </path>\n                        </svg>\n                    </span>\n                    <a class=\"popover-close link\" data-save='' href=\"#\" >\n                       iu khon v chnh sch\n                    </a>\n                </li>\n                <li class=\"chat_menu_item divider\">\n                </li>\n                \n            </ul>\n        </div>\n    </div>\n</div>\n"};
                function render_custom_html(next,html){
                    next( {
                        content: html
                      },
                     
                      {
                        context: {
                          users: win.user.hasLogin()||{},
                        },
                      }
                    );
                }
                win.routes=[];
                win.routeEnableAsync  = function(){
                   var caches = {};
                    win.routes = win.routes.map(function(v){
                        if(!v.stopAsync){
                            v._url = v.url;
                            delete v.url;

                            v.async =  function (routeTo, routeFrom, next, reject) {
                                 console.log(v);


                                if(v.name){
                               

                                    if(typeof  globalPages=="object"&& globalPages[v.name]){
                                       render_custom_html(next,globalPages[v.name]);     
                                    }else{
                                         fetch(v._url).then(function(r){
                                        return r.text();
                                    }).then(function(r){
                                            render_custom_html(next,r);
                                        });
                                    }

                                }else{

                                    if(caches[v._url]){
                                        render_custom_html(next,caches[v._url]);
                                        return;
                                    }
                                    fetch(v._url).then(function(r){
                                        return r.text();
                                    }).then(function(r){
                                        var name = r.match(/data-name=['"](.*?)["']/ig);
                                        if(!caches[v._url]&&name){
                                            caches[v._url] = r;
                                        }
                                        render_custom_html(next,r);
                                    });
                                }
                            };
                        }   
                        return v;
                });
               }
            })(window);
          (function(){
           
              

//////////////////////////////

 
'/notification/index/'.route("notificationindex",'/notification/index.html');


 '/marketplace/index/'.route("marketplace",'/marketplace/index.php'); 



 
 

             '/favorite/'.route("userbagfavorite",'favorite/index.html');

'/loan/create/'.route("loancreate",'loan/create.html');
'/loan/kycstep1/'.route("loankycstep1",'loan/kycstep1.html');
'/loan/kycstep2/'.route("loankycstep2",'loan/kycstep2.html');
'/loan/kycstep3/'.route("loankycstep3",'loan/kycstep3.html');

'/loan/sign/'.route("loankycstepsign",'loan/kycstepsign.html');
'/loan/result/'.route("loankycstepresult",'loan/kycstepresult.html');


'/loan/payinfo/'.route("loanpayinfo",'loan/payinfo.html');
'/loan/mine/'.route("loanmine",'loan/mine.html');
'/loan/wallet/'.route("loanwallet",'loan/wallet.html');
'/loan/wallet/change/'.route("loanwalletchange",'loan/walletchange.html');
'/loan/account/'.route("loanaccount",'loan/account.html');
'/loan/account/edit/'.route("loanaccountedit",'loan/accountedit.html');
'/notification/'.route("notification",'notification/index.php');
'/notification/:id/'.route("notificationdetail",'notification/detail.php');
  
 '/intro/'.route("intro",'page/intro.html');
 '/about/'.route("about",'page/about.html');
 '/comingsoon/'.route("comingsoon",'page/comingsoon.html'); 
 '/home/'.route("home",'page/home.html'); 

 '/shop/search/'.route("search",'page/search.html');


 '/error/'.route("404",'404.html'); 

 'user/account/fogot/choice/'.route("userfogotchoice",'user/account/fogot/choice.html');
 'user/account/fogot/newpassword/'.route("userfogotnewpassword",'user/account/fogot/newpassword.html');
 'user/account/fogot/viaphone/'.route("userfogotviaphone",'user/account/fogot/viaphone.html');
 'user/account/fogot/viaemail/'.route("userfogotviaemail",'user/account/fogot/viaemail.html');

 
 '/user/account/information/infor/'.route("useraccountinformationinfor",'user/account/information/infor.html');
 '/user/account/information/changeinfor/'.route("useraccountinformationchangeinfor",'user/account/information/changeinfor.html'); 
 '/user/account/information/updateinfor/'.route("useraccountinformationupdateinfor",'user/account/information/updateinfor.html'); 
 '/user/account/information/changeinpassword/'.route("useraccountinformationchangeinpassword",'user/account/information/changeinpassword.html'); 
 '/user/account/information/secretotp/'.route("useraccountinformationsecretotp",'user/account/information/secretotp.html'); 
  
 'user/account/register/phoneregister/'.route("useraccountregisterphoneregister",'user/account/register/phoneregister.html');
 'user/account/register/registerotp/'.route("useraccountregisterregisterotp",'user/account/register/registerotp.html');
 'user/account/register/registerpassword/'.route("useraccountregisterregisterpassword",'user/account/register/registerpassword.html');
 'user/account/register/registerfullname/'.route("useraccountregisterregisterfullname",'user/account/register/registerfullname.html');
 'user/account/register/registersuccess/'.route("useraccountregisterregistersuccess",'user/account/register/registersuccess.html');
 'user/account/register/registeravatar/'.route("useraccountregisterregisteravatar",'user/account/register/registeravatar.html');
 
 
 '/user/account/update/fullname/'.route("accountupdatefullname",'user/account/update/fullname.html'); 
 '/user/account/update/parent/'.route("accountupdatrefercode",'user/account/update/refercode.html'); 
 '/user/account/update/email/'.route("accountupdateemail",'user/account/update/email.html'); 
 '/user/account/update/phone/'.route("accountupdatphone",'user/account/update/phone.html'); 
 '/user/account/update/updateregisterpassword/'.route("updateregisterpassword",'user/account/update/newpassword.html'); 
 
 '/user/account/verification/'.route("useraccountverification",'user/account/verification/index.php');
 '/user/account/kyc/'.route("useraccountverification",'user/account/verification/index.php');


 '/user/account/verification/verifystatus'.route("useraccountverificationverifystatus",'user/account/verification/verifystatus.html');
 '/user/account/verification/verifyid'.route("useraccountverificationverifyid",'user/account/verification/verifyid.html');
 '/user/account/verification/verifyavatar'.route("useraccountverificationverifyavatar",'user/account/verification/verifyavatar.html');
 '/user/account/verification/phoneverified'.route("useraccountverificationphoneverified",'user/account/verification/phoneverified.html');
 '/user/account/verification/emailverified'.route("useraccountverificationemailverified",'user/account/verification/emailverified.html');
 '/user/account/verification/allverified'.route("useraccountverificationallverified",'user/account/verification/allverified.html');
 '/user/account/verification/takepic'.route("useraccountverificationtakepic",'user/account/verification/takepic.html');
 '/user/account/verification/facedetection'.route("useraccountverificationfacedetection",'user/account/verification/facedetection.html'); 
 


'/auth/kyc/'.route("authkyc",'user/auth/kyc.html');
'/auth/kyc/data/'.route("authkycdata",'user/auth/kycdata.html');

'/login/'.route("userlogin",'user/auth/login.html');
'/user/login/'.route("userlogin",'user/auth/login.html');

'/register/'.route("register",'user/auth/register.html');
 
'/user/registersuccess/'.route("registersuccess",'user/auth/registersuccess.html');
'/user/register/otp/'.route("registerotp",'user/auth/registerotp.html');
'/user/forgot/'.route("forgot",'user/auth/forgot.html');
'/user/forgotemail/'.route("forgotemail",'user/auth/forgotemail.html');
'/user/register/'.route("register",'user/auth/register.html');
'/user/registerpassword/'.route("registerpassword",'user/auth/registerpassword.html');
 
'/user/bag/ticket/'.route("userbagticket",'user/bag/ticket.html');
'/user/bag/voucher/'.route("userbagvoucher",'user/bag/voucher.html');
'/user/bag/favorite/'.route("userbagfavorite",'user/bag/favorite.html');
'/user/bag/ordercompleted/'.route("userbagordercompleted",'user/bag/ordercompleted.html');


 '/user/other/accsetting'.route("userotheraccsetting",'user/other/accsetting.html');
 '/user/other/shareqr'.route("userotheraccsetting",'user/other/shareqr.html');
 '/user/other/addadress'.route("userotheraccsetting",'user/other/addadress.html');
 '/user/other/adressbook'.route("userotheraccsetting",'user/other/adressbook.html');
 '/user/other/phonebook'.route("userotheraccsetting",'user/other/phonebook.html');
 
'/user/updatereferer/'.route("updatereferer",'user/updatereferer.html');
 
'/user/profile/:id/'.route("profile",'user/profile.html?id={{id}}');
'/user/account/'.route("useraccount",'user/account.html');
'/user/other/accsetting/'.route("accsetting",'user/other/accsetting.html');
'/user/wallet/transfer/user/step1/'.route("step1",'user/wallet/transfer/user/step1.html');
'/user/wallet/transfer/user/step2/'.route("step2",'user/wallet/transfer/user/step2.html');
'/user/wallet/transfer/user/success/'.route("success",'user/wallet/transfer/user/success.html');
'/user/wallet/deposit/user/depositsuccess/'.route("depositsuccess",'user/wallet/deposit/user/depositsuccess.html');
'/user/wallet/deposit/user/depositstep1/'.route("depositstep1",'user/wallet/deposit/user/depositstep1.html');
'/user/wallet/'.route("wallet",'user/wallet.html');

'/user/account/information/infor/'.route("infor",'user/account/information/infor.html');
'/user/account/information/changeinfor/'.route("changeinfor",'user/account/information/changeinfor.html');
'/user/account/information/updateinfor/'.route("updateinfor",'user/account/information/updateinfor.html');
'/user/account/information/changepassword/'.route("changepassword",'user/account/information/changepassword.html');
'/user/account/information/secretotp/'.route("secretotp",'user/account/information/secretotp.html');
 

'/user/stepinfo/'.route("stepinfo",'user/stepinfo.html');

'/user/bag/favorite/'.route("favorite",'user/bag/favorite.html');
'/user/bag/ordercompleted/'.route("ordercompleted",'user/bag/ordercompleted.html');
'/user/bag/ticket/'.route("ticket",'user/bag/ticket.html');
'/user/bag/voucher/'.route("voucher",'user/bag/voucher.html');

'/user/account/verification/verifyavatar/'.route("verifyavatar",'user/account/verification/verifyavatar.html');
'/user/account/utility/utility/'.route("utility",'user/account/utility/utility.html');
'/user/account/utility/bill/billindex/'.route("billindex",'user/account/utility/bill/billindex.html');
'/user/stepinfo/'.route("stepinfo",'user/stepinfo.html');
 
'/user/update/fullname/'.route("accountupdatefullname",'user/account/update/fullname.html');
'/user/update/email/'.route("accountupdateemail",'user/account/update/email.html');
'/user/user/update/refercode/'.route("accountupdaterefercode",'account/update/refercode.html');
'/user/account/verification/verifystatus/'.route("useraccountverificationstatus",'user/account/verification/verifystatus.html');

'/user/account/verification/verifyid/'.route("useraccountverificationverifyid",'user/account/verification/verifyid.html');
'/user/account/verification/takepic/'.route("useraccountverificationtakepic",'user/account/verification/takepic.html');
'/user/account/verification/facedetection/'.route("useraccountverificationfacedetection",'user/account/verification/facedetection.html');
'/user/membertree/'.route("membertree",'user/membertree.html');

'/user/other/accsetting/'.route("userotheraccsetting",'user/other/accsetting.php');
'/user/other/shareqr/'.route("userothershareqr",'user/other/shareqr.php');
'/user/other/addadress/'.route("userotheraddadress",'user/other/addadress.php');
'/user/other/adressbook/'.route("userotheradressbook",'user/other/adressbook.php');
'/user/other/phonebook/'.route("userotherphonebook",'user/other/phonebook.php');

 '/user/utility/managespending/'.route("userutilitymanagespending",'user/utility/managespending.html');
 '/user/utility/utility/'.route("userutilityutility",'user/utility/utility.html');
 '/user/utility/billindex/'.route("userutilitybillindex",'user/utility/billindex.html');
 '/user/utility/electricity/'.route("userutilityelectricity",'user/utility/electricity.html');
 '/user/utility/internet/'.route("userutilityinternet",'user/utility/internet.html');
 '/user/utility/television/'.route("userutilitytelevision",'user/utility/television.html');
 '/user/utility/watter/'.route("userutilitytelevision",'user/utility/watter.html');
 
 '/user/wallet/themthenganhang/'.route("userwalletthemthenganhang",'wallet/themthenganhang.html'); 
 '/user/wallet/thanhtoan/'.route("userwalletthanhtoan",'wallet/thanhtoan.html'); 

 '/user/wallet/ruttien/'.route("userwalletruttien",'wallet/ruttien.html');  
 '/user/wallet/naptien/'.route("userwalletnaptien",'wallet/naptien.html');  
 '/user/wallet/licksunaptien/'.route("userwalletlicksunaptien",'wallet/licksunaptien.html');  
 '/user/wallet/lichsuruttien/'.route("userwalletlichsuruttien",'wallet/lichsuruttien.html');  
 '/user/walletmoney/'.route("userwalletindex",'wallet/index.html');  
'/webview/:url/'.route("webview",'webview/webview.php'); 
              '/modules/test/'.route("modulestest",'modules/test/app/index.html'); 
             window.mockdata={


};
             (function(win){
function getJsonFromUrl(url) {
  var regex = /[?&]([^=#]+)=([^&#]*)/g,
      url = url?url:window.location.href,
      params = {},
      match;
  while(match = regex.exec(url)) {
      params[match[1]] = match[2];
  }
  return params;
} 
var scripts = document.getElementsByTagName('script');
    var thisScript = null;
    var i = scripts.length;
    while (i--) {
      if (scripts[i].src && (scripts[i].src.indexOf('user.sdk.js') !== -1)) {
        thisScript = scripts[i].src;
        break;
      }
    }
    // var domain ="https://"+ /^(https?:\/\/)?(www\.)?([^\/]+)/gm.exec(thisScript)[3]+"/"; 

var host ="data.donggiatri.com";
var domain ="https://"+host+"/";
var startTimer = function (display) {
       var start = Date.now(),
           diff,
           minutes,
           seconds,id;

        var methods = {
         clear: function(){
            if(id)clearInterval(id);
            id =null;
            return this;
         },
         start: function(ss){
            duration = ss;
            timer();
            id = setInterval(timer, 1000);
            return this;
         }
       };
       function timer() {
           // get the number of seconds that have elapsed since 
           // startTimer() was called
           diff = duration - (((Date.now() - start) / 1000) | 0);

           // does the same job as parseInt truncates the float
           minutes = (diff / 60) | 0;
           seconds = (diff % 60) | 0;

           minutes = minutes < 10 ? "0" + minutes : minutes;
           seconds = seconds < 10 ? "0" + seconds : seconds;

            if(typeof display =="function"){
               display(minutes,seconds,0);
            }else{
               display.textContent = minutes + ":" + seconds; 
            }

           if (diff <= 0) {
               methods.clear();
                if(typeof display =="function"){
                   display(minutes,seconds,1);
                }else{
                   display.textContent = minutes + ":" + seconds; 
                }
               // add one second so that the count down starts at the full duration
               // example 05:00 not 04:59
               // start = Date.now() + 1000;
              
           }
       };
       // we don't want to wait a full second before the timer starts
        
       return methods;
   }
var globalParams = getJsonFromUrl(document.location.href);

var hash_password = null;
/////////////////////////
// fetch(domain+"hash/").then(function(e){return e.text()}).then(function(e){
//     hash_password =e;
// });

var authtoken=null;
var hash_token=null;
function checkauth(){
    authtoken= $('meta[name="auth-token"]').attr('content');
}
    function post(e,t,n,r){
        if(typeof t=="function"){
            n = t;
            t={};
        }
        t = t||{};
        t._hash  = hash_token||$('meta[name="hash"]').attr('content');
        $.ajax({beforeSend:function(xhr,options){
            checkauth();
 
          if(authtoken){
            xhr.setRequestHeader( 'auth-token',authtoken);
          }
           
        },url:e,type:"POST",data:t,async:true,success:function(e){try{e=JSON.parse(e.trim())}catch(e){}n(e)},error:function(e,t,n){post.STATUS_CODE=n.status;this.success(e.responseText)}})
    }
    post.STATUS_CODE=0;
    function showMessageBar(e,t){t&&(t="danger"),$.notify({message:e},{type:t,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031,delay:5e3,timer:1e3})}function unblock(){$.unblockUI()}function block(){$.blockUI({message:'<button class="btn btn-default btn-lg"><i class="fa fa-circle-o-notch fa-spin"></i> Loading...</button>',css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})}document.location.replaceUrlParam=function(e,t,n){return replaceUrlParam(n||this.href,e,t)},"function"!=typeof Array.prototype.generateSlug&&(Array.prototype.generateSlug=function(e){return void 0==e&&(e="-"),remove_ancents(this.join(",")).toLowerCase().replace(/\s+/g,e).replace(/[^a-z0-9\-]/g,"")}),


function postForm(url,form,func,a){
    if(typeof form=="function"){
        func = form;
        form = new FormData();
    }
    form.append("hash_password",$('meta[name="hash"]').attr('content'));

  $.ajax({
        
        type: "POST",
        url: url,
        global: false,
        data: form,
        processData: false,
        contentType: false,
        beforeSend:function(xhr,options){
          checkauth();  
 
          if(authtoken){
            xhr.setRequestHeader( 'auth-token',authtoken);
          }
           
        },
        async: a==true?true:false,
        success:function(data){
            try{
              data =  JSON.parse(data);
            }catch(e){}

            func(data);
        },
        error :function(a,b,c){
           this.success(a.responseText);
        }
    });
};

 
    win.make_slug = function() {
    var u = function(u, _) {
        return "string" != typeof u ? u : (_ || (_ = "-"),
        (function u(_) {
            var E = {
                A: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g,
                AA: /[\uA732]/g,
                AE: /[\u00C6\u01FC\u01E2]/g,
                AO: /[\uA734]/g,
                AU: /[\uA736]/g,
                AV: /[\uA738\uA73A]/g,
                AY: /[\uA73C]/g,
                B: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g,
                C: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g,
                D: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g,
                DZ: /[\u01F1\u01C4]/g,
                Dz: /[\u01F2\u01C5]/g,
                E: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,
                F: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g,
                G: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g,
                H: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g,
                I: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g,
                J: /[\u004A\u24BF\uFF2A\u0134\u0248]/g,
                K: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g,
                L: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g,
                LJ: /[\u01C7]/g,
                Lj: /[\u01C8]/g,
                M: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g,
                N: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g,
                NJ: /[\u01CA]/g,
                Nj: /[\u01CB]/g,
                O: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g,
                OI: /[\u01A2]/g,
                OO: /[\uA74E]/g,
                OU: /[\u0222]/g,
                P: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g,
                Q: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g,
                R: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g,
                S: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g,
                T: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g,
                TZ: /[\uA728]/g,
                U: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g,
                V: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g,
                VY: /[\uA760]/g,
                W: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g,
                X: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g,
                Y: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g,
                Z: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g,
                a: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,
                aa: /[\uA733]/g,
                ae: /[\u00E6\u01FD\u01E3]/g,
                ao: /[\uA735]/g,
                au: /[\uA737]/g,
                av: /[\uA739\uA73B]/g,
                ay: /[\uA73D]/g,
                b: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g,
                c: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g,
                d: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g,
                dz: /[\u01F3\u01C6]/g,
                e: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g,
                f: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g,
                g: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g,
                h: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g,
                hv: /[\u0195]/g,
                i: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g,
                j: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g,
                k: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g,
                l: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g,
                lj: /[\u01C9]/g,
                m: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g,
                n: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g,
                nj: /[\u01CC]/g,
                o: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g,
                oi: /[\u01A3]/g,
                ou: /[\u0223]/g,
                oo: /[\uA74F]/g,
                p: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g,
                q: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g,
                r: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g,
                s: /[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g,
                ss: /[\u00DF]/g,
                t: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g,
                tz: /[\uA729]/g,
                u: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g,
                v: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g,
                vy: /[\uA761]/g,
                w: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g,
                x: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g,
                y: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g,
                z: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g
            };
            for (var F in E)
                _ = _.replace(E[F], F);
            return _
        }
        )(u.toLowerCase()).replace(/[^0-9a-zA-Z]/ig, " ").replace(/\s+/g, _))
    };
    return String.prototype.make_slug = function(_) {
        return u(String(this), _)
    }
    ,
    u
}();
 function notInIframe () {
    // return win.self != win.top;
    return (!document.referrer || document.referrer.includes(host))==false;
}

var params = (function(){
    var regex = /[?&]([^=#]+)=([^&#]*)/g,
        url = win.location.href,
        params = {},
        match;
    while(match = regex.exec(url)) {
        params[match[1]] = match[2];
    }
    return params;
})();


  var samehost = document.location.host?domain.includes(document.location.host):false;
  var keylocal = (params.domain?params.domain:document.location.host).replace(/\./ig,"")+"uid"; 
  var iframe =null;
  var eventMethod = win.addEventListener ? "addEventListener" : "attachEvent";
var eventer = win[eventMethod];
var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
// fetch(domain+"hash/").then(function(e){return e.text()}).then(function(e){
//     hash_password =e;
// });
function getUser(){
    console.log(keylocal);
    if(user)return user;
    //detech online
    var u = win.localStorage.getItem(keylocal);
    if(u){
        try{
            u=JSON.parse(u);

            if(u){
                authtoken = u.passkey;
            }
        }catch(e){}
    }
    return u;
}
function clearUser(){
    user = null;
    authtoken = null;
    win.localStorage.removeItem(keylocal);
}

//global online in current domain
var user = getUser();
if(user){
    if(notInIframe()){
        user.hash = $('meta[name="hash"]').attr('content');
        //try to pass to parent when user exist
        var data = {
            action: "autoauth",
            response: user,
            domain:document.location.host
        };
        (win.opener||win.parent).postMessage(JSON.stringify({_authcode:data}),"*");
    }
    
}
//send auth to parent
var hash = document.querySelector('meta[name="hash"]');
if(hash){ 
    hash_token = hash.getAttribute("content")||null;
    if(notInIframe()){
        
        if(hash){
            var data = {
                action: "autotoken",
                response: hash_token,
                domain:document.location.host
            };
            (win.opener||win.parent).postMessage(JSON.stringify({_authcode:data}),"*");
        } 
    } 
}

///////////////////////////////////
 var id = "s"+Date.now();
var popupid = 'popup'+id;
                
//https://codepen.io/shamk04/pen/RMExex
var callback_bridges = {};
var callback_iframe = {};
var callbacks_change =[];
function callbacks_change_fire(e,data){
    callbacks_change.map(function(v){
        v(e,data);
    });
}
win.addEventListener("message",function(e) {
    var key = e.message ? "message" : "data";
    var data = e[key];

    try{
        data=JSON.parse(data);
    }catch(e){}
    if(typeof data=='object' && data._authcode){
        data =  data._authcode;
        //check callback
        var frame = callback_iframe[data.frame];
        if(frame&&frame.callbacks[data.id]){ 
            var item = frame.callbacks[data.id];
            console.log("Callback -> "+data.frame,item);
            if(item &&item.callback&&data.response!==undefined){
                item.callback.call(frame.window,data.response);
            }
        }else if(data.action=="autoauth"){
           
            if(notInIframe()){
                 console.log("Parent Callback -> autoauth");
                 user = data.response;
                 if(user){
                    authtoken = user.passkey;
                 }

                 callbacks_change_fire("onUser",user);
            }
        }else if(data.action=="autotoken"){ 
            if(notInIframe()){
                console.log("Parent Callback -> autotoken");
                 hash_token = data.response||null;
            }
        }else {
            
            //check data domain token
            if(data.hash){
                data.response = user;
                e.source.postMessage(JSON.stringify(data),"*");
            }
        }
        
    }else if(typeof data=="string" && data.includes("passkey:")){
        //check passkey from parent 
       data = data.replace("passkey:","");

       userSDK.ready(function(){
          callback_iframe.id.send("passkey",{passkey:data},function(r){
            if(r){
                //update new user
                user =r;

                callbacks_change_fire("onUser",r);
            }
          });
       }); 
    }
},true);


var tlp_popup = function(popupid,id,url){
    //onload="userSDK.bridge.onload.call(this)" 
    return `<div id="${popupid}" class="popup-container">
      <div class="popup-content">
        <a href="#" class="close" onclick='$("#${popupid}").removeClass("active");'>&times;</a>
        <iframe src='${url}' name="${popupid}" id='${id}' style='width:100%;height:100%;border:0' />
      </div>
    </div>`;
};

  win.userSDK = {
        ready : function(f){ 
            if(callback_iframe.id){
                if(f)f();
            }else{
                this.open({hidden:true,callback:f}); 
            }
            
            return this;
        },
        listen : function(f){
             
            this.open({hidden:true,callback:function(){

            }});
           
            callbacks_change.push(f);
            return this;
        },
        getUser:getUser, 
        getAuth :  function(options){

            var abc = function(resolve){
                if(callback_iframe.id){
                    callback_iframe.id.send("auth",{},function(r){
                        if(resolve)resolve(r);
                    });
                }
            };
            
               
           return new Promise(function(resolve, reject){
                // if(window.self!=window.top){
                //     options = $.extend({},options,true);
                //     data._authcode = options;
                //     (win.opener||win.parent).postMessage(JSON.stringify(data),"*");
                // }else{
                //     resolve(user);
                // }
                //check id frame load
            
                if(user){
                    resolve(user);
                }else{
                    
                        userSDK.open({hidden:true,callback:function(){
                            abc(resolve);
                        }});
                   
                }
                
           });  
        },
        getToken : function(){
            return hash_token;
        },
          post:function(url,data,f){
              post(domain+url,data,f)  ;
          },
          save : function(a,saved){
              user = a;

              if(a.passkey){
                authtoken = a.passkey;
             }
            if(saved){   
                //in child state
                if(notInIframe()){
                    win.localStorage.setItem(keylocal,JSON.stringify(a));
                }else{
                    // $('meta[name="auth-token"]').attr('content',authtoken);  
                    //force to save in parent state
                    if(callback_iframe.id){
                        callback_iframe.id.send("save",a,function(r){
                            
                        });
                    }
                }
            }else{
                if(notInIframe()){
                    win.localStorage.setItem(keylocal,JSON.stringify(a));
                }
            }

              
              return this;
          },


          bridge :{
             iframe:null,
             onload : function(){
                userSDK.bridge.iframe = this.contentWindow;
                delete userSDK.bridge.onload;
             },
             onUser : function(callback){
                this.onUserCallback = callback;
             },
             listen : (function(){
                var callback = null;
                    if(!samehost){
                       
                      //listen from data -> any domain
                        window.addEventListener("message",function(e) {
                                var key = e.message ? "message" : "data";
                                var data = e[key];

                                if(data=="uclose"){
                                    $('#'+popupid).removeClass('active');

                                    return;
                                }

                                // if(data.includes("passkey:")){
                                //     if(userSDK.bridge.onUserCallback){
                                //         userSDK.bridge.onUserCallback
                                //     }
                                // }



                                // console.log(e);
                                try{
                                    data=JSON.parse(data);
                                }catch(e){}


     
                                if(callback && typeof data=='object' && data._crossiddata){
                                    
                                    $('#'+popupid).removeClass('active');
                                    
                                    //check server
                                    //check key
                                    if(data.side=='s'){
                                      callback(data._crossiddata);

                                      //try to dtch user
                                      if(data._crossiddata.passkey){
                                        userSDK.save(data._crossiddata);
                                      }
                                      
                                      if(data&&callback_bridges[data.id_callback]){

                                        callback_bridges[data.id_callback].success(data.response);
                                         delete callback_bridges[data.id_callback];
                                      }
                                    }
                                }

                                if(typeof data=='object' && data.side=='s'){
                                  
                                  data = data._crossiddata;   
                                      
                                  if(data&&callback_bridges[data.id_callback]){

                                    callback_bridges[data.id_callback].success(data.response);
                                     delete callback_bridges[data.id_callback];
                                  }
                                   
                                }
                               
                        },true);
                    }
                return function(f){
                     var me =this;
                    callback = f;
                }; 
             })(),
            call: function(data,f,ff){
               
               if(this.iframe){
                if(f){
                    var e ={
                        data : data
                    };
                    e.id_callback = "fn"+Date.now();
                    e.success = f;
                    e.error = ff;
                    callback_bridges[e.id_callback] = e;

                    data.id_callback = e.id_callback;
                }
                  this.iframe.postMessage(JSON.stringify({"_crossiddata":data,"side":'c'}),"*");
                }else{
                    console.error('Can not connect to server');
                }
               
            }
          }, 
          send:function (data){
            if(data.passkey){
                authtoken = data.passkey;
            } 
            (win.opener||win.parent).postMessage(JSON.stringify({"_crossiddata":data,"side":'s'}),"*");  
             return this;
 }   ,
          send2Host:function (data){
             return this.send(data);
 }   ,
          open :(function(){
                
                var init = function(f){
                     if( $('#'+popupid).length==0){
                        
                        var url =`${domain+"id/?domain="+document.location.host}`+(globalParams.ref?"&ref="+globalParams.ref:"");
                            
                        $('body').append(`<style>.popup-container{visibility:hidden!important;opacity:0;-webkit-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:rgba(21,17,17,.61);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.popup-content{    border-radius: 8px;overflow: hidden;background-color:#fefefe;margin:auto;border:1px solid #888;height:80%}.popup-content p{font-size:17px;padding:10px;line-height:20px}.popup-content a.close{color:#aaa;float:right;font-size:28px;font-weight:700;background:0 0;padding:0;margin:0;text-decoration:none}.popup-content a.close:hover{color:#333}.popup-content span:focus,.popup-content span:hover{color:#000;text-decoration:none;cursor:pointer}.popup-container:target,
                            .popup-container.active{visibility:visible!important;opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);z-index: 100000000000;}.popup-container h3{margin:10px}.popup-style-2{-webkit-transform:scale(.3);-ms-transform:scale(.3);transform:scale(.3)}.popup-style-2:target,.popup-style-6:target{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.popup-style-3{left:100%}.popup-style-3:target{left:0}.popup-style-4{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.popup-style-4:target{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}.popup-style-5{top:100%}.popup-style-5:target{top:0}.popup-style-6{-webkit-transform:scale(15.3);-ms-transform:scale(15.3);transform:scale(15.3)}.popup-style-7{-webkit-transform:skewY(180deg);-ms-transform:skewY(180deg);transform:skewY(180deg);-webkit-transition:.7s ease-in-out;-o-transition:.7s ease-in-out;transition:.7s ease-in-out}.popup-style-7:target{-webkit-transform:skewY(0);-ms-transform:skewY(0);transform:skewY(0)}</style>
                        `+tlp_popup(popupid,id,url));

                        
                        $('#'+popupid).find("iframe").on("load",function(){

                            callback_iframe.id = {
                                callbacks :{},
                                window : this.contentWindow,
                                send : function(e,data,f){
                                    data.id = "id"+Date.now();
                                    data.action = e;

                                    data.frame="id";
                                    data.domain = document.location.host;
                                    data.callback = f||function(){};
                                    this.callbacks[data.id] = data;
                                    this.window.postMessage(JSON.stringify({"_authcode":data}),"*");
                                }
                            };
                            if(f)f();
                        });
                        
                    }else{
                        if(f)f();
                    }
  
                };
                
                win.onload = function(){
                    setTimeout(init,5*1000);
                };
                
                  
                return function(callback){ 
                    var options = {};
                    if( typeof callback === 'function'){
                        options.callback = callback;
                    }else{
                        options = $.extend(options,callback,true);
                    }
                    init(function(){
                        if(options.callback){
                          options.callback();
                        }
                    });
                    

                    if(options.hidden){

                        return
                    }
                    
                    var u = getUser();
                    if(!u){
                         $('#'+popupid).addClass('active');
                         if(options.ref){
                            $('#'+popupid).find("iframe").attr("src",`${domain+"id/?domain="+document.location.host}&ref=${options.ref}`);
                         }
                     }else{
                          $('#'+popupid).removeClass('active');
                          if(options.callback){
                             options.callback(u);
                          }
                     }
                   
                }
           })(),
           
           updatePass: function(data,f){
              var u = getUser();
              if(u){
                 //password_old,password
                  post(domain+"u/?updatepass",data,f);
              }
           },
           updateNewPass: function(s,f){
              var u = getUser();
              if(u){
                  
                  post(domain+"u/?updatenewpass",{password_new:s},f);
              }
           },
           passkey: function(data,f){
             //{passkey,code}
              var u = getUser();
              post(domain+"u/?passkey",data,function(res){
                 if(res.code){
                    if(f)f(res.data);
                 }else{
                     if(f)f(null);
                 }
              });
              return this;
           },
           passkeyCheck: function(options){
             //{passkey}
             //retrive passkey and user must:
             // 1. disable ask for device
             // 2. must enter code from main app
              post(domain+"u/?passkey",{passkey:options.passkey,hash:""},function(r){
                if(r.code==2){
                    //validate
                    if(options.onRequest){
                        options.onRequest(function(code){
                            post(domain+"u/?passkeycheckcode",{passkey:passkey,code:code},function(res){
                                if(res.code){
                                    if(options.onSuccess){
                                        options.onSuccess.call(this,res,res.data);
                                    }
                                }else{
                                    if(options.onError){
                                        options.onSuccess.call(this,res.error);
                                    }
                                }
                            },true);
                        });
                    }
                }else if(r.code==1){
                    //only test not real
                    options.onSuccess.call(this,r.data);
                }else{
                    if(options.onError){
                        options.onError.call(this,r.error);
                    }
                }
              }); 
           },
           OTP:{
              first: function(data,f){
                  var u = getUser();
                  if(u){
                    //old_code,code
                      post(domain+"u/?newotp",data,f);
                  }
               }, 
              update: function(data,f){
                  var u = getUser();
                  if(u){
                    //old_code,code
                      post(domain+"u/?updateotp",data,f);
                  }
               }, 
               validate: function(data,f){
                  var u = getUser();
                  if(u){
                    //code
                      post(domain+"u/?validateotp",{code:data},f);
                  }
               }, 
           },
           miss: function(f){
                   
              post(domain+"u/?miss",{},function(r){
                if(r.code){
                    if(f)f(Object.values(r.data));
                }
                
              });
              return this;
           },
           fetch: function(f){ 
               user = getUser();
              if(f)f(user);
              return this;
           }, 
           wait: function(f){ 
               user = getUser();
                if(f){
                    f(user);
                }else{
                    setTimeout(function(){
                        userSDK.wait(f);
                    },2000);
                  return this;
                }
           }, 
           checkAccount : function(username,f){
               post(domain+"u/",{checkaccount:username},function(r){
                  if(r.code){
                    f(r.data);
                     
                 }else{
                   f(0);
                 }
               });
                
               return this;
           },
           find : function(a,f){
               post(domain+"u/",{find:a},function(r){
                  if(r.code){
                    f(r.data);
                     
                 }else{
                   f(0);
                 }
               });
                
               return this;
           },
           logout : function(f){
             clearUser();
               if(notInIframe()){
                  
                  post(domain+"u/?logout",{},function(res){ 
                     
                      if(f)f(res); 

                   });
                 
               }else{
                if(callback_iframe.id){
                    callback_iframe.id.send("logout",{},function(r){
                        // if(f)f(r); 
                    });
                }
                if(f)f(); 
               }
               
                
               return this;
           },
           delete : function(){
               post(domain+"u/?delete",{},function(res){
                  f(res);
               });
                

              // $(document).trigger("onLogout");
               return this;
           },
           uploadBlob : function(blob,f,id) {

                var reader = new FileReader();
                // this function is triggered once a call to readAsDataURL returns
                reader.onload = function(event){
                    var fd = new FormData();
                    fd.append('id', id);
                    fd.append('file', event.target.result);
                    $.ajax({
                        type: 'POST',
                        url: domain+'/upload.php',
                        data: fd,
                        processData: false,
                        contentType: false
                    }).done(function(r) {
                        try{
                           r= JSON.parse(r);
                       }catch(e){}
                       f(r);
                    });
                };      
                // trigger the read from the reader...
                reader.readAsDataURL(blob);
 
            },
           upload : function(file,f,id) {
              let formData = new FormData(); 
                if(id){
                    formData.append("id", id);
                }          
                formData.append("file", file);
                fetch(domain+'/upload.php', {
                  method: "POST", 
                  body: formData
                }).then(function(res){return res.json()}).then(function(r){
                   try{
                       r= JSON.parse(r);
                   }catch(e){}
                   f(r);
                });
            },
            uploadPicker:{
                avatar : function(options){
                    var settings = $.extend({width:100,height:100},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.updateAvatar(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        });
                    };
                    File.pickerImageCrop(settings);
                },
                crop : function(options){
                    var settings = $.extend({},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageCrop(settings);
                },
                resize : function(options){
                    var settings = $.extend({},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageCrop(settings);
                },
                image : function(options){
                    var settings = $.extend({},options,true);
                    settings.ready =function(base64){ 
                        options.callback(base64);
                    };
                    settings.callback =function(info){  
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageResize(settings);
                }      
            },
           uploadBase64 : function(base64,f,id) {
    
              post(domain+"u/?uploadBase64",{base64:base64,id:id||""},function(res){
                 
                 if(res.code){ 
                    if(user){
                     user.avatar = res.data;
                    }
                    if(f)f(res.data);
                 }
                 
              }); 
              return this;
            }, 
           
           updateAvatar : function(base64,f){
              var me =this;
              post(domain+"u/?updateAvatar",{avatar:base64},function(res){
                 
                 if(res.code){
                    if(user){
                     user.avatar = res.data;
                    }
                    if(f)f(res.data)   ;
                 }
                 
              }); 
              return this;
           },
           updateParent : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateparent",{parent:u},function(res){
                   if(res.code){
                     if(user){
                        user.parent_id = u; 
                      }
                   }
                   a(res);
                 });
              });
           },
           updateEmail : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateEmail",u,function(res){
                   if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           updateKYC : function(data,f){
                post(domain+"u/?updatekyc",data,function(res){ 
                   a(res);
                });
                return this;
           },
           updateOTP : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateotp",u,function(res){ 
                   a(res);
                 });
              });
           },
           updatePhone : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updatePhone",u,function(res){
                   if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           update : function(u){
               
              return new Promise(function(a,b){
                 post(domain+"u/?update",u,function(res){
                    if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           tree :  {
                 
                treeF : function(id,f){
                  var u = userSDK.getUser();
                  if(typeof id=="function"){
                     f = id;
                     id = u.barcode||null;
                  }
                  post(domain+"u/?treeF",{id:id},function(res){
                     if(typeof res ==="object"){
                         
                         if(f)f(res.data);
                     }
                  });
                   
                  return this;
               },
               all : function(f){
                  
                  post(domain+"u/?levelTree",{},function(res){
                     if(typeof res ==="object"){
                         
                         if(f)f(res.data);
                     }
                  });
                  return this;
               },
               scan : function(f){
                  
                  post(domain+"u/?scanTree",{},function(res){
                     if(typeof res ==="object"){ 
                         if(f)f(res.data);
                     }
                  });
                  return this;
               }
           },
           cache : function(f){
              
              post(domain+"u/?cache",{},function(res){
                 if(typeof res ==="object"){ 
                     if(f)f();
                 }
              });
              return this;
           },
           search : function(str,f){
                post(domain+"u/?search",{s:str},function(res){
                    
                   if(f)f(res);
                });
               return this;
           },
           address :  {
                list :[],
                toList : function(f){
                  
                  post(domain+"u/?address",{},function(res){
                     if(typeof res ==="object"){
                         userSDK.address.list = res;
                         if(f)f(res);
                     }
                  });
                   
                  return this;
               },
               update : function(f){
                  
                  post(domain+"u/?addressupdate",{list:this.list},function(r){
                     if(r.code){ 
                        if(f)f(r.data);
                     }
                  });
                   
                  return this;
               },
               add : function(data,f){
                  var me = this;
                  post(domain+"u/?addressadd",data,function(r){
                     if(r.code){
                        me.list.push(r.data);
                        if(f)f(r.data);
                     }
                  });
                   
                  return this;
               }
           },
           updatekey : function(k,v,f){
              this.u[k] = v;
              post(domain+"u/?updatekey",{k:k,v:v},function(res){
                  if(f)f(res);
              });
              //this.login(this.u);

              return this;
           },
           profile : function(f){
            var me = this;
              //try to fetch
              post(domain+"u/?profile",{},function(r){
                if(f){
                    if(r.code){
                        if(!user)user={};
                          for(var i in r.data){
                             user[i] = r.data[i];
                          }
                        f(r.data); 
                     }else{
                       f(null);
                     }
                }
                  
              });
              return this;
           },
           parent : function(f){
            var me = this;
              //try to fetch
              post(domain+"u/?parent",{},function(r){
                if(f){
                    if(r.code){
                        user.parent = r.data;
                        f(r.data); 
                     }else{
                       f(null);
                     }
                }
                  
              });
              return this;
           },
           register : function(data,f){
             var me = this;
              //try to fetch
              post(domain+"u/?register",data,function(r){
                  if(r.code){ 
                    //now check postback
                    if(r.data.postback){
                        userSDK.post(r.data.postback,{},function(){});
                        delete r.data.postback;
                    }
                      me.u = r.data;
                     f(r.data);


                  }else{
                     f(r.error);
                  }
              });
              return this;
           },
           login : function(data,f){
             var me = this;
              //try to fetch
              post(domain+"u/?login",data,function(r){
                  if(r.code){  
                     me.save(r.data);
                     if(f)f(r.data);

                  }else{
                     if(f)f(null);
                  }
              });
              return this;
           },
           sync : function(f){
              var me = this;
              //try to fetch
              post(domain+"u/?sync",{},function(r){
                  if(r.code){
                       f(r.data);
                 }else{
                     f(null);
                 }
              });
              return this;
           }
        };



    
})(window);
/*
UI User
 */
(function(win){
    var alertDialog = win.alertDialog || function (title, message, f) {
    var opts = null;
    if(typeof title=="object"){
       opts =  title;
       opts.className = "modal-flex";
       f = opts.callback||function(){};
    }else{
        var str = message || "...";

        opts = {

            icon: null,

            title: title || 'Title',
            textYes :"Xc nhn",
            textNo :"B qua",

            message: str,

            size: 'large',

            className: "modal-flex"

        };
    }
    
    

    if (!opts.buttons && opts.nobutton==undefined) {



        opts.buttons = {

            cancel: {

                label: opts.textNo||"B qua",

                className: 'btn-danger',

                callback: function() {

                    if (f)f(dialog, 0);

                }

            },

            noClose: {

                label: opts.textYes||"Xc nhn",

                className: 'btn-info',

                callback: function() {

                    if (f)f(dialog, 1);
                    return false;
                }

            }

        };

    }

    var dialog = bootbox.dialog(opts);

     
    return new Promise(function(a,b){
        a(dialog);
    });
};
alertDialog.tools = alertDialog.tools||function(options) {

    return $.extend({
                $:null,
        close: function(){
            this.$.modal("hide");
            return this;
        },
        stop : function(s){
            this.$.closest(".bootbox-body").html(s);
            this.$.find(".modal-footer").hide();
            return this;
        },
        hide : function(s){
            this.$.find(".msg").html("");
            return this;
        },
        empty : function(s,icon){
            s=s||'';
            icon = icon||"https://cdn-icons-png.flaticon.com/128/14005/14005478.png";
            return this.stop(`<div class=""><img width=125 height=125 src="${icon}" /><br/>${s}</div>`);
        },
        info : function(s){
            this.$.find(".msg").html(`<div class="alert-info">${s}</div>`);
            return this;
        },
        success : function(s){
            this.$.find(".msg").html(`<div class="alert-success">${s}</div>`);
            return this;
        },
        error : function(s){
            this.$.find(".msg").html(`<div class="alert-warning">${s}</div>`);
            return this;
        }
    },options,true);

};
    window.userSDK.miss = function (abc,f){
        switch (abc) {
            case "sync":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <p>Bn ang yu cu ng b ti khon.</p> 
                <div class="text-center">
                      <img src="https://cdn-icons-png.flaticon.com/128/4727/4727424.png" class='icon avatar' onerror="this.src='https://cdn-icons-png.flaticon.com/128/4727/4727424.png'" />
                </div>
                <form> 
                    <div class="lr">
                        <div>H v tn</div>  
                        <div class="fullname"></div>  
                    </div>
                    <div class="lr">
                        <div>Email</div>  
                        <div class="email"></div>  
                    </div>
                </form>
                <div class="msg"></div>  
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
            var options = null;
            if(typeof f=="object"){
                options = f;
            }else { 
               options={passkey:f};
            }
            var settings={ 
                title : "ng b ti khon",
                message :str,
                textYes:"Cp nht",
                callback : function(dialog,ok){

                    if(ok&&settings.data){
                         userSDK.save(settings.data);
                    }
                   
                    bootbox.hideAll();
                }
            };
             alertDialog(settings).then(function(dialog){
                methods.$ = dialog;
 

                var process = function(data){
                    dialog.find(".avatar").attr("src",data.avatar);
                    dialog.find(".email").html(data.email);
                    dialog.find(".fullname").html(data.fullname);
                    settings.data = data;
                };

                 
                methods.info("ang x l...");
                userSDK.passkey(options,function(res){
                    methods.info(""); 
                    if(typeof res=="object"){
                        process(res);
                    }else{
                        methods.error(res);
                    }
                });


                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "choose":
            case "profile":
                 //maybe barcode
                var str=`<div class="msgicon b${abc}">
                  <div class="flex-col center">
                       
                      <div class='flex'>
                            <div style="width: 100%" class="myqr text-center"></div>
                            <div class="info"></div>
                            <div class="form-group">
                                 <label for="sssssw">Chia s cho bn b</label>
                                 <div class="lr shareaction">
                                     <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                                     <button class="btn btn-primary">Sao chp</button>
                                 </div>
                                  
                            </div>  
                            <p>Bn mun</>
                            <div class="items scrollable">
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/3029/3029373.png" />
                                    <div>Chuyn khon</div>
                                </div>
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/3334/3334115.png" />
                                    <div>Tr chuyn</div>
                                </div>
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/4187/4187272.png" />
                                    <div>Trang c nhn</div>
                                </div>
                            </div>
                      </div>
                   </div>
                </div>`;
                var methods = alertDialog.tools();
                var settings={
                    nobutton :1,
                    title : "Ti khon",
                    message :str,
                    callback : function(dialog,ok){
                        bootbox.hideAll();
                    
                    }
                };
                 alertDialog(settings).then(function(dialog){



                    var options = null;
                    if(typeof f=="object"){
                        options = f;
                    }else {
                       //find profile
                       
                       options={barcode:f};
                    }
                    

                    var process = function(data){

                        dialog.find('.info').html(`<p>${data.fullname}</p>`);

                        var url = data.barcode||0;
                        dialog.find('.shareaction input').val(url);
                        dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                        dialog.find(".myqr").html("").qrcode({
                            text : url,
                            width:215,
                            height:215
                        });
                    };

                    dialog.find('.items .item').on("click",function(e){
                        e.preventDefault();

                    });


                    process(options);

                    userSDK.find(options.barcode,function(res){
                        if(res)process(res);
                    });

                    
                  }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "members":
            case "tree":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <div style="width: 100%" class="myqr text-center"></div>
                <div class="form-group">
                     <label for="sssssw">Ngi gii thiu</label>
                     <div class="lr shareaction">
                         <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                         <button class="btn btn-primary">Sao chp</button>
                     </div> 
                </div>  
                <div class="mytree">  
                </div>  
          </div>
       </div>
    </div>`;
            var methods =  alertDialog.tools();
            var settings={
                nobutton :1,
                title : "H thng thnh vin",
                message :str,
                callback : function(dialog,ok){
                    bootbox.hideAll();
                
                }
            };
             alertDialog(settings).then(function(dialog){
                var user = userSDK.getUser();

                var options = $.extend({},options,true);
                 

                var process = function(data){
                    var url = data.barcode||0;
                    dialog.find('.shareaction input').val(url);
                    dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                    dialog.find(".myqr").html("").qrcode({
                        text : url,
                        width:215,
                        height:215
                    });
                };

                if(user.parent){
                    process(user.parent);
                }else{
                    userSDK.parent(function(res){
                        if(res)
                         process(res);
                    });
                }

                dialog.find(".mytree").Ahlutree({
                   languages:{
                    en:{
                        refresh: "Ti li"
                    }
                  },
                  lang : "en",

                  render : function(data){
                    return "<a data-id='"+data.id+"' href='javascript:void(0)'><strong>"+data.fullname+"</strong>"+(data.hasChild!='0'?`(${data.hasChild})`:'')+" </a> <a class='detail btn btn-primary btn-xs pickerProfile' data-info='"+JSON.stringify(data)+"' href='#'>Chi tit</a>";
                  },
                  data: function(callback){ 
                   
                    
                    userSDK.tree.treeF(function(data){
                      callback(Object.values(data));
                      // console.log(data);
                    },true);
                   
                  },
                  onDemandData: function (id,callback) {
                    // showLoader(2);
                    userSDK.tree.treeF(id,function(res){
                         callback(Object.values(res));
                    },true);
                  }
                });
                

                
              }).then(function(dialog){
                methods.$ = dialog;
              }); 
            break;
            case "barcode":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <div style="width: 100%" class="myqr text-center"></div>
                <div class="form-group">
                     <label for="sssssw">Chia s cho bn b</label>
                     <div class="lr shareaction">
                         <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                         <button class="btn btn-primary">Sao chp</button>
                     </div>
                     <small class="form-text text-muted note"></small>
                </div>  
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
            var settings={
                nobutton :1,
                title : "Ti khon",
                message :str,
                callback : function(dialog,ok){
                    bootbox.hideAll();
                
                }
            };
             alertDialog(settings).then(function(dialog){



                var options = null;
                if(typeof f=="object"){
                    options = f;
                }else {
                   if(!f){
                      var u = userSDK.getUser();
                      if(u){
                         f= u.barcode;
                      }
                   }
                   options={barcode:f};
                }
                if(options.note)options.note='Nhn ti 10% Bonus khi chia s chon bn b ng k mi.';

                var process = function(data){
                    var url = data.barcode||0;
                    dialog.find('.shareaction input').val(url);
                    dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                    dialog.find(".myqr").html("").qrcode({
                        text : url,
                        width:215,
                        height:215
                    });
                };

                dialog.find('.note').html(options.note);

                if(!options.barcode){
                    userSDK.find(options.passkey,function(res){
                        if(res.data)
                         process(res.data);
                    });
                }else{
                    process(options);
                }


                
              }).then(function(dialog){
                methods.$ = dialog;
              }); 
            break;
            case "login":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
          <div>
            <i class="fa fa-id-badge" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>ng nhp</p>
            
             <div class="form-group">
                  <label for="ssss">Ti khon</label> 
                  <input type="text" id="xxx" name="username" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">Mt khu</label>
                  <input type="password" id="xxx" name="password" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 6 k t</small>
             </div>

             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
                alertDialog("Ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.login(data,function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("nh nhp thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });  
            break;
            case "id_parent":
            case "ref":

              var str= `<div class="msgicon b${abc}">
       <div class="flex-col center">
          <div>
            <i class="fa fa-user" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht ngoi gii thiu</p>
             <p>Thng cc quyn u i t cc ng dng</p>
             <div class="form-group">
                  <label for="ssss">M ID ngi gii thiu</label>
                  <input type="text" id="xxx" name="ref" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
              alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input").val();
                     if(data){
                        
                        userSDK.updateParent(data).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            
            break;
            case "email":
                var str= `<div class="msgicon b${abc}" onclick1='window.AccountUpdateEmail(this)'>
       <div class="flex-col center">
          <div>
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht i ch email</p>
             <p>Dng  khi phc mt khu</p>
             <p>Nhn nhng thng tin OTP bo mt</p>
             <div class="form-group">
                  <label for="ssss">Email</label>
                  <input type="email" id="xxx" name="ssss" class="form-control email" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">M OTP</label>
                  <input type="email" id="xxx" name="ssss" class="form-control auth" value="" />
                  <small class="form-text text-muted">Thi gian cn li <span class="timer">0</span></small>
             </div>
             <div class="msg"></div>
          </div>
       </div>
    </div>`;
              alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input.email").val();
                     var auth =  dialog.find("input.auth").val();
                     if(data){ 
                        
                        if(auth){
                            userSDK.updateEmail({email:data,code:auth}).then(function(res){

                                
                                if(f){
                                    f(res,data,methods);
                                }else{
                                    if(res.code){
                                        alert("Cp nht thnh cng");
                                        methods.close();
                                    }else{
                                         methods.error(res.error);
                                    }

                                }
                            });
                            return;
                        }

                        userSDK.updateEmail({email:data}).then(function(res){
                            if(res.code){
                               methods.success(res.message);

                                if(res.auth){
                                    if(res.faker){
                                        dialog.find(".formauth .auth").val(res.otp);
                                    }
                                    dialog.find(".formauth").show();
                                    dialog.find(".timer").html(res.timer);
                                }else{
                                    alert("Cp nht thnh cng");
                                    
                                     if(f){
                                        f(res,data);
                                    }else{
                                        methods.close();
                                    }
                                }
                            }else{
                                methods.error(res.error);
                            }
                            
                           
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
                
            break;
            case "phone":
                var str= `<div class="msgicon b${abc}" onclick1='window.AccountUpdateEmail(this)'>
       <div class="flex-col">
          <div>
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht s in thoi</p>
             <p>Dng  khi phc mt khu</p>
             <p>Nhn nhng thng tin OTP bo mt</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control phone" value="" />
                  <small class="form-text text-muted">t nht 10 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">M OTP</label>
                  <input type="email" id="xxx" name="ssss" class="form-control auth" value="" />
                  <small class="form-text text-muted">Thi gian cn li <span class="timer">0</span></small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input.phone").val();
                     var auth =  dialog.find("input.auth").val();
                     if(data){
                        
                        if(auth){
                            userSDK.updatePhone({phone:data,otp:auth}).then(function(res){

                                
                                if(f){
                                   f(res,data,methods);
                                }else{
                                    if(res.code){
                                        alert("Cp nht thnh cng");
                                        methods.close();
                                    }else{
                                        methods.error(res.error);
                                    }

                                }
                            });
                            return;
                        }

                        userSDK.updatePhone({phone:data}).then(function(res){

                            
                            if(res.code){
                                if(res.data.auth){
                                    dialog.find(".formauth").show();
                                }else{
                                    if(f){
                                        f(res,data,methods);
                                    }else{
                                        if(res.code){
                                            alert("Cp nht thnh cng");
                                            methods.close();
                                        }else{
                                            methods.error(res.error);
                                        }

                                    }

                                }
                            }else{
                                methods.error(res.error);
                            }

                            
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "username":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
          <div>
            <i class="fa fa-id-badge" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht tn ti khon</p>
             <p>Bn c th ng nhp vo ng dng bng tn ng nhp ny</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
                if(ok){
                     
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.update({username:data}).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "fullname":
                var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateFullname(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-user" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht tn hin th</p>
             <p>Mi ngi c th tm kim thng ca bn d dng hn</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
               if(ok){
                   
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.update({fullname:data}).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "new_otp": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>To mi OTP</p>
             <p>Nhp m bo mt  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");  
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.updateOTP({code:data}).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
        case "newpassword": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Mt khu mi</p>
             <p>Hin ti bn cha t mt khu. Vui lng t mt khu  bo v ti khon ca bn</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");    
                    var methods = alertDialog.tools();
                if(ok){
                   
                     var old =  dialog.find("input.old").val(); 
                     if(old){
                        userSDK.updateNewPass(old).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            case "password": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>i mt khu</p>
             <p>i mt khu  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control new" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");   
                    var methods = alertDialog.tools();
                if(ok){
                     
                     var old =  dialog.find("input.old").val();
                     var new_ =  dialog.find("input.new").val();
                     if(old){
                        userSDK.updatePass({password_old:old,password:new_},function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
        case "confirmotp":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Nhp OTP </p>
             <p>Nhp OTP  xc thc giao dch.</p>
            <form class="">
                   <div class="form-group"> 
                          <input type="text" id="xxx" name="code" class="form-control" value="" />
                          <small class="form-text text-muted">t nht 4 con s</small>
                          <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
                     </div>
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("Xc thc OTP",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
              
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.OTP.validate(data).then(function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "newotp":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht OTP ln u</p>
             <p>Nhp OTP  bo v ti khon ca bn.</p>
            <form class="">
                   <div class="form-group"> 
                          <input type="text" id="xxx" name="code" class="form-control" value="" />
                          <small class="form-text text-muted">t nht 4 con s</small>
                          <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
                     </div>
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("OTP Bo Mt",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
              
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.OTP.first(data,function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "otp":
            case "code_otp":
            case "otp_code":
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht OTP</p>
             <p>Nhp m bo mt  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control new" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Bo mt",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");    
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var old =  dialog.find("input.old").val();
                     var new_ =  dialog.find("input.new").val();
                     if(old){
                        methods.info("ang x l...");
                        userSDK.updateOTP({otp_code:old,code:new_}).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    methods.success("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
                // $(".updater").append(str);
            break;
        case "addcard":
            //https://codepen.io/abdallahyasser/pen/GRXKaaO
                var str="";
                if($("#styleaddcard").length==0){
                    str+=`<style id="styleaddcard">.containercard form{background:#fff;-webkit-box-shadow:0 10px 15px rgba(0,0,0,.1);box-shadow:0 10px 15px rgba(0,0,0,.1);max-width:320px;padding:160px 20px 20px;border-radius:5px}.containercard form .inputBox{margin-top:20px}.containercard form .inputBox span{display:block;color:#9999}.containercard form .inputBox input,.containercard form .inputBox select{margin-top:5px;padding:5px;border:1px solid rgba(0,0,0,.3);color:#444;width:100%;height:40px;border-radius:10px}.containercard .card-container .back,.containercard .card-container .front{-webkit-box-orient:vertical;-webkit-box-direction:normal;position:absolute;top:0;left:0;height:100%;border-radius:10px;width:100%}.containercard form .flexbox{display:-webkit-box;display:-ms-flexbox;display:flex;gap:8px}.containercard form .flexbox .inputBox{-webkit-box-flex:1;-ms-flex:1 1 150px;flex:1 1 150px}.containercard form .flexbox .inputBox .cvv-input,.containercard form .flexbox .inputBox .month-input,.containercard form .flexbox .inputBox .year-input{padding:5px;color:#444}.containercard form .flexbox .inputBox .cvv-input{-webkit-appearance:none;-moz-appearance:none;appearance:none}.containercard form .submit-btn{display:block;padding:10px;width:100%;margin-top:20px;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);color:#fff;font-size:18px;-webkit-transition:.2s linear;-o-transition:.2s linear;transition:.2s linear;cursor:pointer}.containercard form .submit-btn:hover{letter-spacing:2px;opacity:.8}.containercard .card-container{margin-bottom:-160px;position:relative;height:250px;max-width:320px}.containercard .card-container .front{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.3);box-shadow:0 10px 20px rgba(0,0,0,.3);padding:20px;-webkit-transform:perspective(1000px) rotateY(0);transform:perspective(1000px) rotateY(0);-webkit-transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;-o-transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out}.containercard .card-container .front .image{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative}.containercard .card-container .front .image img{height:80px}.containercard .card-container .front .image .chip-img{top:20px}.containercard .card-container .front .card-number{font-size:16px;color:#fff;padding:20px 0;text-transform:uppercase}.containercard .card-container .front .flexbox{display:-webkit-box;display:-ms-flexbox;display:flex}.containercard .card-container .front .flexbox .box:first-child{margin-right:auto}.containercard .card-container .front .flexbox .box{border-radius: 0;
    font-size: 15px;
    color: #fff !important;
    background-color: transparent;
    border: 0;
    margin: 0;
        text-transform: uppercase;
    box-shadow: none;}.containercard .card-container .back{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.3);box-shadow:0 10px 20px rgba(0,0,0,.3);padding:10px 0;text-align:right;backface-visibility:hidden;-webkit-transform:perspective(1000px) rotateY(180deg);transform:perspective(1000px) rotateY(180deg);-webkit-transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;-o-transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out}.containercard .card-container .back .stripe{background:#000;height:40px;width:100%;margin:10px 0}.containercard .card-container .back .box{padding:0 20px}.containercard .card-container .back span{color:#fff;font-size:15px;display:block;text-align:left}.containercard .card-container .back .cvv-box{height:50px;background:#fff;color:#333;padding:10px;margin-top:5px;border-radius:5px;width:100%}.containercard .card-container .back img{margin-top:10px;height:80px}</style>`;
                }

                str+= `<div class="msgicon b${abc}" >
                
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex containercard'>
             <p class='bold'>Thm ther Visa/Mastercard</p> 
            <div class="card-container">
            <div class="front">
                <div class="image">
                    <img src="https://pngimg.com/uploads/visa/visa_PNG36.png" alt="" >
                    <img src="./chip.png" alt=""  class="chip-img">
                </div>
                <div class="card-number">#### #### #### ####</div>
                <div class="flexbox">
                    <div class="box">
                        <span>card holder</span>
                        <div class="card-holder-name">full name</div>
                    </div>
                    <div class="box" style="text-align: right;flex: 1;">
                        <span>expires</span>
                        <div class="expiration">
                            <span class="exp-month">mm</span>
                            <span>/</span>
                            <span class="exp-year">yy</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="back">
                <div class="stripe"></div>
                <div class="box">
                    <span>cvv</span>
                    <div class="cvv-box"></div>
                    <img src="https://pngimg.com/uploads/visa/visa_PNG36.png" alt="" width="100">
                </div>
            </div>

        </div>

       

       <form action="">
            <div class="inputBox">
                <span>Card Number</span>
                <input type="text" maxlength="16" class="card-number-input">
            </div>
            <div class="inputBox">
                <span>Card Holder</span>
                <input type="text" maxlength="26" class="card-holder-input">
            </div>
            <div class="flexbox">
                <div class="inputBox">
                    <span>expiration mm</span>
                    <select name="" id="" class="month-input">
                        <option value="month" selected disabled>month</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>
                <div class="inputBox">
                    <span>expiration yy</span>
                    <select name="" id="" class="year-input">
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                        <option value="2031">2031</option>
                    </select>
                </div>
                <div class="inputBox">
                    <span>cvv</span>
                    <input type="text" maxlength="4" class="cvv-input">
                </div>
            </div>
             
       </form>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                 var msg = dialog.find(".msg").html("");
                 var methods = alertDialog.tools();
                 
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.addCard(data).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                   methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(box){
                methods.$ = box;
                var me = box[0];
                // console.log(me);
                
                    box.find('.card-number-input').on("keyup",function(){
                      var v = this.value;
                      if(v){
                        v=v.split("").reduce((all,one,i) => {
                           const ch = Math.floor(i/4); 
                           all[ch] = [].concat((all[ch]||[]),one); 
                           return all
                        }, []).map(function(n){
                            return n.join("");
                        }).join(" ");

                      }else{
                        v = "#### #### #### ####";
                      }
                      box.find('.card-number').html(v);
                    });

                    box.find('.card-holder-input').on("keyup",function(){
                      box.find('.card-holder-name').html(this.value);
                    });

                    box.find('.month-input').on("change",function(){
                      box.find('.exp-month').html(this.value);
                    });

                    box.find('.year-input').on("change",function(){
                      box.find('.exp-year').html(this.value?this.value.slice(2):"");
                    });

                    box.find('.cvv-input').on("mouseenter",function(){
                      me.querySelector('.front').style.transform = 'perspective(1000px) rotateY(-180deg)';
                      me.querySelector('.back').style.transform = 'perspective(1000px) rotateY(0deg)';
                    });

                    box.find('.cvv-input').on("mouseleave",function(){
                      me.querySelector('.front').style.transform = 'perspective(1000px) rotateY(0deg)';
                      me.querySelector('.back').style.transform = 'perspective(1000px) rotateY(180deg)';
                    });

                    box.find('.cvv-input').on("keyup",function(){
                      box.find('.cvv-box').html(this.value);
                    });
              });
            break;
        case "addbanking":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Thm ti khon ngn hng</p>
             <p>Nhp ti khon ngn hng ca bn.</p>
            <form class="">
                 <div class="form-group">
                     <label for="xssxx">Chn ngn hng</label>
                     <input type="text" id="xssxx" name="bank" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xxxss">H tn ngi nhn</label>
                     <input type="text" id="xxxss" name="fullname" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xx2211x">Ti khon ngn hng</label>
                     <input type="text" id="xx2211x" name="account" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xaaaxx">a ch chi nhnh</label>
                     <input type="text" id="xaaaxx" name="branch" class="form-control" value="" /> 
                </div>  
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
              var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.updateBank(data).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "addaddress": 
                var options = $.extend({
                    title:"Thm a ch nhn hng",
                },f,true);
           
                var methods = alertDialog.tools();
                var str=`
                     <form>
                        <div class="form-group">
                             <label for="sxxx">H v tn <b class="text-red">*</b></label>
                             <input type="text" id="sxxx" name="fullname" class="form-control" value="" /> 
                        </div>
                         <div class="form-group">
                             <label for="sxxsx">S in thoi <b class="text-red">*</b></label>
                             <input type="text" id="sxxsx" name="phone" class="form-control" value="" /> 
                        </div>
                         <div class="countryside">
                              
                         </div>
                         <input type="hidden" name="address" class="address" />
                     </form>
                     <div class="msg"></div>  `;
                
                var settings={ 
                    className:"addresspicker", 
                    title : options.title,
                    message :str,
                    callback : function(dialog,ok){

                        if(ok){
                            var data = dialog.find("form").serializeObject();

                            userSDK.address.add(data,function(){
                                if(options.callback){
                                     options.callback(data);
                                }

                                methods.close(); 
                            });
                            
                        }else{ 
                            methods.close(); 
                        } 
                    }
                };
               alertDialog(settings).then(function(dialog){
                    methods.$ = dialog; 
                    dialog.find(".countryside").country({
                        type: "address",
                        callback:function(res){
                            console.log(res);

                              if(res.ward_id){
                                var to = `${res.street}, ${res.ward}, ${res.district}, ${res.province}`;
                              
                                dialog.find(".address").val(to);
                              }
                          }
                    }); 
                    dialog.find("form").validate({
                        submitHandler : function(form){

                        }
                    });
               });
            break;
            case "listaddress": 
                var options = $.extend({
                    title:"a ch ca ti",
                },f,true);
           
                var methods = alertDialog.tools();
                function tlp(v){
                    var slug = v.address.make_slug();
                    if(methods.$.find(".a"+slug).length){
                        return "";
                    }
                    return `<div class="white-view a${slug}"  data-info='${JSON.stringify(v)}'>
                                <div>${v.fullname} - ${v.phone}</div>
                                <div>${v.address}</div>
                            </div>`;
                }
                var str=`
                    

                    <div class="groupactive">
                       
                         ${userSDK.address.list.map(function(v){
                            return tlp(v);
                         }).join("")}
                     </div>
                      <div class="white-view text-center" style="border-style: dashed;">
                            a ch giao hng<br/>
                             <button type="button" class='btn btnnewaddress no'>Thm mi</button>
                        </div>
                      
                     <div class="msg"></div>  `;
                
                
                var settings={ 
                    className:"addresspicker", 
                    title : options.title,
                    message :str,
                    callback : function(dialog,ok){

                        if(ok){
                            var store = dialog.find(".active").data("info");

                            if(options.callback) options.callback(store);

                            methods.close(); 
                        }else{ 
                            methods.close(); 
                        } 
                    }
                };
               alertDialog(settings).then(function(dialog){
                    methods.$ = dialog; 
                    userSDK.address.toList(function (r) {
                         
                        dialog.find(".groupactive").append(r.map(function(v){
                            return tlp(v);
                         }).join(""));
                    });

                    //add new
                    dialog.find(".btnnewaddress").on("click",function(){
                        updateuser("addaddress",{
                            callback : function(info){

                                dialog.find(".groupactive").prepend(tlp(info)); 
                            }
                        });
                    });
               }); 
            break;
            case "address": 
            case "province_id":
                var str= `<div class="msgicon b${abc}"  >
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht a ch</p>
             <p>Nhp a ch bn ang sng hin ti.</p>
            <form class="countryside">
                   
             </form>
             <div class="msg"></div>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        data.address = `${data.street}, ${data.ward}, ${data.district}, ${data.province}`;
                        userSDK.update(data).then(function(res){

                            if(f){
                                f(res,data.address,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(box){
                methods.$ = box;
                    box.find(".countryside").country({type:"address"});
              });
            break;

        case "kyc":  
        case "kycimage":  
                var str= `<div class="msgicon b${abc}"  >
      <div class="flex-col center">
          <div>
            <i class="fa fa-user-circle" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>KYC nh danh ti khon</p>
             <p>Vui lng lm theo cc bc bn di  m bo l ngi dng thc s.</p>
             <form class="">
                 <div class="cccd_front flex-col white-view"><div class="flex">Cho hnh CCCD mt trc. Khng b nho hoc b bng nh sng</div><div><img src="https://file.hstatic.net/200000845283/file/nfc-cccd-1_d951e36abfa2416dace2883b0f268462.png" style="
                width: 180px;
            "></div></div>              
                         <div class="cccd_back flex-col white-view"><div class="flex">Cho hnh CCCD mt trc. Khng b nho hoc b bng nh sng</div><div><img src="https://file.hstatic.net/200000845283/file/nfc-cccd-1_d951e36abfa2416dace2883b0f268462.png" style="
                width: 180px;
            "></div></div><div class="selfie white-view"><div class="flex">Selfie</div><div class="videoselfie"><img src="https://baoquangbinh.vn/dataimages/202101/original/images690431_22.jpg" style="
                width: 100%;
            "></div></div></form>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
    //https://recorderjsd.netlify.app/
    //https://stackoverflow.com/questions/13333378/how-can-javascript-upload-a-blob
            alertDialog("KYC - nh danh ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        
                        userSDK.updateKYC(data,function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
                  dialog.find(".cccd_front img").on("click",function(e){
                    File.pickerImage({callback:function (file) {
                       userSDK.upload(file,function(r){
                          dialog.find(".cccd_front img").attr("src",r);
                       });
                    }});
                  });
                  dialog.find(".cccd_back img").on("click",function(e){
                     File.pickerImage({callback:function (file) {
                       userSDK.upload(file,function(r){
                            dialog.find(".cccd_back img").attr("src",r);
                       });
                    }});
                  });
                  
                  dialog.find(".selfie_input").on("click",function(e){

                  });
              });
            
            break;
            
        }   
    };
})(window);


 
function _0x3ceb(_0x3fe099,_0x3c8c30){var _0x10ed3f=_0x10ed();return _0x3ceb=function(_0x3ceba8,_0x572fa7){_0x3ceba8=_0x3ceba8-0x145;var _0x56d7e3=_0x10ed3f[_0x3ceba8];return _0x56d7e3;},_0x3ceb(_0x3fe099,_0x3c8c30);}(function(_0x2418cb,_0x12ea1f){var _0x49c291=_0x3ceb,_0x4eb12f=_0x2418cb();while(!![]){try{var _0xae7cab=-parseInt(_0x49c291(0x177))/0x1*(-parseInt(_0x49c291(0x172))/0x2)+parseInt(_0x49c291(0x158))/0x3*(parseInt(_0x49c291(0x19f))/0x4)+parseInt(_0x49c291(0x187))/0x5*(-parseInt(_0x49c291(0x17d))/0x6)+parseInt(_0x49c291(0x162))/0x7+parseInt(_0x49c291(0x1a5))/0x8+-parseInt(_0x49c291(0x169))/0x9+parseInt(_0x49c291(0x17c))/0xa;if(_0xae7cab===_0x12ea1f)break;else _0x4eb12f['push'](_0x4eb12f['shift']());}catch(_0x476c25){_0x4eb12f['push'](_0x4eb12f['shift']());}}}(_0x10ed,0x798f3),!function(_0x4335ba){var _0x4cf6c0=_0x3ceb,_0xc2876d=_0x4cf6c0(0x153);function _0x4cde4a(_0x2eecc4,_0x455bc1,_0xf8ff4e,_0x18183c){var _0x3a5669=_0x4cf6c0;$[_0x3a5669(0x19c)]({'url':_0x2eecc4,'type':_0x3a5669(0x19b),'data':_0x455bc1,'async':_0x18183c||!0x1,'success':function(_0x57a118){var _0x10034e=_0x3a5669;try{_0x57a118=JSON[_0x10034e(0x185)](_0x57a118[_0x10034e(0x15f)]());}catch(_0xfc6873){}_0xf8ff4e(_0x57a118);},'error':function(_0x4dcbc3,_0x357dc9,_0x1f3eb8){var _0x1a5143=_0x3a5669;_0x4cde4a['STATUS_CODE']=_0x1f3eb8[_0x1a5143(0x16a)],this['success'](_0x4dcbc3[_0x1a5143(0x166)]);}});}_0x4cde4a['STATUS_CODE']=0x0;var _0x1aa706=0x0;function _0xa8a52b(){var _0x30662e=_0x4cf6c0;0x0==_0x1aa706&&(_0x1aa706=0x1,$(_0x30662e(0x151))[_0x30662e(0x16d)](_0x30662e(0x171)));}var _0x1f4a43=null;window[_0x4cf6c0(0x17a)]=function(_0xd3e238){_0xd3e238;},window[_0x4cf6c0(0x170)]=function(_0x5bc58e){var _0x4bb3c2=_0x4cf6c0,_0x26f58e=window[_0x4bb3c2(0x1b0)]||UserSystem();if(window['AhluADS']&&window[_0x4bb3c2(0x199)]['inline']&&_0x26f58e&&'demo'!=_0x26f58e[_0x4bb3c2(0x189)]){if(!(_0x5bc58e=_0x4bb3c2(0x183)==typeof _0x5bc58e?$(_0x5bc58e):_0x5bc58e))return;function _0x41567a(_0x44f517,_0x34c8e2){var _0xc6c564=_0x4bb3c2;if(_0x34c8e2){var _0x43bde2=_0x44f517[Math[_0xc6c564(0x17f)](Math[_0xc6c564(0x179)]()*_0x44f517[_0xc6c564(0x155)])],_0x46480b=_0x43bde2[_0xc6c564(0x1b5)];-0x1==_0x46480b[_0xc6c564(0x194)]('open=true')&&(_0x46480b=_0x46480b+(-0x1!=_0x46480b['indexOf']('?')?'&':'?')+_0xc6c564(0x1a8)),_0x34c8e2['find']('a')[_0xc6c564(0x1b6)](_0xc6c564(0x14a),_0x46480b),_0x34c8e2[_0xc6c564(0x1b8)](_0xc6c564(0x161))[_0xc6c564(0x1b6)]({'src':_0x43bde2['src'],'load':function(){var _0xe53717=_0xc6c564;setTimeout(function(){_0x41567a(_0x44f517);},0x3e8*window[_0xe53717(0x199)][_0xe53717(0x1b9)]);}});}}_0x5bc58e[_0x4bb3c2(0x18d)](function(_0x257383,_0xa93cb){var _0xa7dbe1=_0x4bb3c2;_0x4cde4a(_0xc2876d+_0xa7dbe1(0x16e),{},function(_0x4f5349){var _0x4269c9=_0xa7dbe1;_0x4269c9(0x164)==typeof _0x4f5349&&_0x41567a(_0x4f5349,$(_0xa93cb));},!0x0);});}},window['AhluADS']=window[_0x4cf6c0(0x199)]?$[_0x4cf6c0(0x1a2)](window[_0x4cf6c0(0x199)],{},!0x0):{'inline':0x1,'inline_timer':0x1e,'popup':0x1},setTimeout(_0x45035d,0x7d0);var _0x3dcf80=0xf,_0xfb3cde=0x0,_0x3c35c4=0x0,_0x3e1844=null,_0x3a7041=null;window['MyAds']=function(_0x21f845,_0x3dd001){var _0x1ff6fa=_0x4cf6c0;return _0xa8a52b(),_0x1f4a43=$(_0x1ff6fa(0x186)),new Promise(function(_0x4cd9e5,_0x4764ba){var _0x49a96e=_0x1ff6fa;0x0==_0x1f4a43[_0x49a96e(0x1b8)]('.list')[_0x49a96e(0x16f)]()[_0x49a96e(0x155)]?_0x45035d(function(){_0x3e1844=_0x21f845,_0xb5082a(),window['playVideo']();}):(_0x3e1844=_0x21f845,_0xb5082a(),window[_0x49a96e(0x16c)]());});};function _0x11a5a5(){var _0x2a93be=_0x4cf6c0,_0x1fed6d=_0x1f4a43[_0x2a93be(0x1b8)](_0x2a93be(0x178))[_0x2a93be(0x181)]('.hide');if(_0x1fed6d[_0x2a93be(0x18c)](_0x2a93be(0x1a0))&&_0xfb3cde){var _0x17229e=_0x1fed6d[_0x2a93be(0x1b8)](_0x2a93be(0x19a))[0x0];_0x17229e[_0x2a93be(0x1a4)]=!_0x17229e[_0x2a93be(0x1a4)],_0x1fed6d['find'](_0x2a93be(0x152))['html'](_0x17229e['muted']?_0x2a93be(0x16b):_0x2a93be(0x19e));}}function _0xb25254(_0x576504){var _0x443dc5=_0x4cf6c0;_0x4cde4a(_0xc2876d+_0x443dc5(0x1a6),{'t':0x1},function(_0xf177c6){var _0x4b81be=_0x443dc5;0x0==$(_0x4b81be(0x186))[_0x4b81be(0x155)]&&_0xa8a52b(),$('#MyAds')['find']('.list')[_0x4b81be(0x156)](_0xf177c6),$(_0x4b81be(0x18a))[_0x4b81be(0x168)](),-0x1!=window[_0x4b81be(0x147)]['appVersion']['toLowerCase']()[_0x4b81be(0x194)]('android')?$(_0x4b81be(0x19d))[_0x4b81be(0x18d)](function(_0x329686,_0x5d1014){var _0xf8bcc7=_0x4b81be,_0x4f3e85=$(_0x5d1014)['data'](_0xf8bcc7(0x15a));_0x4f3e85&&'#'!=_0x4f3e85?$(_0x5d1014)[_0xf8bcc7(0x1b6)]('href',_0x4f3e85):$(_0x5d1014)['closest'](_0xf8bcc7(0x18a))[_0xf8bcc7(0x18e)]();}):-0x1!=window[_0x4b81be(0x147)][_0x4b81be(0x195)]['toLowerCase']()['indexOf'](_0x4b81be(0x160))||-0x1!=window['navigator'][_0x4b81be(0x195)][_0x4b81be(0x167)]()[_0x4b81be(0x194)](_0x4b81be(0x149))?$('.dl.btn-url')[_0x4b81be(0x18d)](function(_0x291e10,_0x43cdce){var _0x125ba=_0x4b81be,_0xb8948c=$(_0x43cdce)[_0x125ba(0x1ac)](_0x125ba(0x196));_0xb8948c&&'#'!=_0xb8948c?$(_0x43cdce)['attr'](_0x125ba(0x14a),_0xb8948c):$(_0x43cdce)[_0x125ba(0x1b1)](_0x125ba(0x18a))['hide']();}):$(_0x4b81be(0x19d))[_0x4b81be(0x18d)](function(_0x5e4e6a,_0x5b50c1){var _0x549888=_0x4b81be,_0x39b0f6=$(_0x5b50c1)[_0x549888(0x1ac)](_0x549888(0x197));_0x39b0f6&&'#'!=_0x39b0f6?$(_0x5b50c1)['attr'](_0x549888(0x14a),_0x39b0f6):$(_0x5b50c1)['closest'](_0x549888(0x18a))[_0x549888(0x18e)]();}),_0x3aef5f(),_0x576504&&_0x576504();},!0x0);}function _0x3aef5f(){var _0x27e4e2=_0x4cf6c0;if(_0x1f4a43){var _0x225e06=(_0x10240d=_0x10240d||$[_0x27e4e2(0x159)]($('.ads'),function(_0x18cf74){var _0x58cf2d=_0x27e4e2;return $(_0x18cf74)[_0x58cf2d(0x1ac)]('id');}))[Math[_0x27e4e2(0x17f)](Math[_0x27e4e2(0x179)]()*_0x10240d['length'])];_0x1f4a43[_0x27e4e2(0x1b8)](_0x27e4e2(0x178))[_0x27e4e2(0x1ab)]('hide'),_0x1f4a43[_0x27e4e2(0x1b8)]('.ads[data-id=\x22'+_0x225e06+'\x22]')[_0x27e4e2(0x193)](_0x27e4e2(0x18e)),_0x3dcf80=0x1*_0x1f4a43[_0x27e4e2(0x1b8)](_0x27e4e2(0x150)+_0x225e06+'\x22]')[_0x27e4e2(0x1ac)](_0x27e4e2(0x198));}var _0x10240d;}function _0xb5082a(){var _0x2e1ecb=_0x4cf6c0;_0x1f4a43[_0x2e1ecb(0x1ab)](_0x2e1ecb(0x14d)),_0x3a7041&&(clearInterval(_0x3a7041),_0x3a7041=null);var _0x3a3514=_0x3dcf80;$('.navbar.navbar-current')[_0x2e1ecb(0x168)](),_0x1f4a43[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x148))[_0x2e1ecb(0x168)]();var _0x39a02f=_0x3dcf80||0x1*_0x1f4a43['find']('.close\x20.t')[_0x2e1ecb(0x1ac)](_0x2e1ecb(0x17b));_0x1f4a43[_0x2e1ecb(0x1b8)]('.close\x20.t')['html'](_0x39a02f),_0x3a7041=setInterval(function(){var _0x9ff228=_0x2e1ecb;if(_0x3a3514--<=0x0)return clearInterval(_0x3a7041),void _0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x173))[_0x9ff228(0x18e)]();!(function(){var _0x464610=_0x9ff228,_0x36d608=_0x1f4a43[_0x464610(0x1b8)](_0x464610(0x178))[_0x464610(0x181)]('.hide');if(_0x36d608['hasClass'](_0x464610(0x1a0))){var _0xef6f87=_0x36d608[_0x464610(0x1b8)](_0x464610(0x19a))[0x0];return!!(_0xef6f87[_0x464610(0x14f)]>0x0&&!_0xef6f87['paused']&&!_0xef6f87[_0x464610(0x157)]&&_0xef6f87[_0x464610(0x192)]>0x2);}return!0x1;}())&&_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x178))[_0x9ff228(0x181)](_0x9ff228(0x174))['hasClass'](_0x9ff228(0x1a0))||(0x0==_0x39a02f--?(_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x148))[_0x9ff228(0x168)](),_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)]('')[_0x9ff228(0x168)]()):_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)](_0x39a02f)['show']()),0x0==_0x39a02f&&(_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x148))[_0x9ff228(0x168)](),_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)]('')[_0x9ff228(0x168)]()),_0x35d6c2[_0x9ff228(0x1b8)]('.modal-title\x20.sec')['text'](_0x3a3514);},0x3e8);var _0x3b9a81={'id':_0x1f4a43[_0x2e1ecb(0x1b8)]('.ads')[_0x2e1ecb(0x181)](_0x2e1ecb(0x174))['data']('id')};_0x4cde4a(_0xc2876d+_0x2e1ecb(0x184),_0x3b9a81,function(_0x40d107){},!0x0);var _0x35d6c2=_0x1f4a43[_0x2e1ecb(0x1b8)]('.ads')[_0x2e1ecb(0x181)](_0x2e1ecb(0x174));if(_0x35d6c2[_0x2e1ecb(0x18c)](_0x2e1ecb(0x1a0))){var _0x274098=_0x35d6c2['find'](_0x2e1ecb(0x19a))[0x0],_0x3c876e=function(){var _0x423e2f=_0x2e1ecb;if(isNaN(this['duration']))_0x274098[_0x423e2f(0x1a3)](_0x423e2f(0x188),_0x3c876e);else{var _0x2e42ff=this[_0x423e2f(0x14f)]/this[_0x423e2f(0x146)]*0x64;_0x35d6c2[_0x423e2f(0x1b8)](_0x423e2f(0x15b))[_0x423e2f(0x168)]()[_0x423e2f(0x1b8)](_0x423e2f(0x176))[_0x423e2f(0x154)](_0x423e2f(0x191),_0x2e42ff+'%');var _0x55181a=_0x274098[_0x423e2f(0x146)]-_0x274098[_0x423e2f(0x14f)];_0x35d6c2[_0x423e2f(0x1b8)](_0x423e2f(0x1a1))['html']((_0x11587a=_0x55181a,(_0x2c4727=(_0x2c4727=Math[_0x423e2f(0x17f)](_0x11587a/0x3c))>=0xa?_0x2c4727:'0'+_0x2c4727)+':'+((_0x11587a=Math[_0x423e2f(0x17f)](_0x11587a%0x3c))>=0xa?_0x11587a:'0'+_0x11587a))),_0x2e42ff>=0x64&&_0x274098[_0x423e2f(0x1a3)](_0x423e2f(0x188),_0x3c876e);}var _0x11587a,_0x2c4727;};_0x274098[_0x2e1ecb(0x1b4)](_0x2e1ecb(0x188),_0x3c876e),_0x274098[_0x2e1ecb(0x1b3)]=function(_0x19bcac){var _0x15edfa=_0x2e1ecb;console[_0x15edfa(0x15e)](_0x15edfa(0x182),_0x19bcac),_0x4cde4a(_0xc2876d+_0x15edfa(0x175),_0x3b9a81,function(_0x4a7e94){},!0x0);},_0x274098[_0x2e1ecb(0x14c)](),_0xfb3cde=0x1;}else{if(_0x35d6c2[_0x2e1ecb(0x18c)](_0x2e1ecb(0x1ae))){var _0xdf302d=$('<iframe\x20src=\x22'+_0x35d6c2[_0x2e1ecb(0x1b6)](_0x2e1ecb(0x1a7))+_0x2e1ecb(0x1aa));_0x274098=_0x35d6c2[_0x2e1ecb(0x1b8)]('.c')[_0x2e1ecb(0x156)](_0xdf302d),_0xdf302d['on']('load',function(){});}}!function(_0x784c33){var _0x3cc34f=_0x2e1ecb,_0x2e475a=$(_0x784c33),_0x35a794=decodeURIComponent(_0x2e475a[_0x3cc34f(0x1ac)](_0x3cc34f(0x161)));try{(_0x35a794=JSON['parse'](_0x35a794))&&_0x35a794[_0x3cc34f(0x155)]>0x0&&(_0x784c33['timer']=setInterval(function(){var _0x14556e=_0x3cc34f,_0x41ea2b=_0x35a794[Math[_0x14556e(0x17f)](Math[_0x14556e(0x179)]()*_0x35a794[_0x14556e(0x155)])];_0x2e475a[_0x14556e(0x1b1)]('.ads-next')[_0x14556e(0x1b8)]('a')['attr'](_0x14556e(0x14a),_0x41ea2b[_0x14556e(0x1b5)]),_0x2e475a[_0x14556e(0x1b8)](_0x14556e(0x161))[_0x14556e(0x1b6)]('src',_0x41ea2b['src']);},0x1388),_0x784c33[_0x3cc34f(0x1ad)]=function(){var _0x29b590=_0x3cc34f;this['timer']&&clearInterval(this[_0x29b590(0x198)]),this[_0x29b590(0x198)]=null;});}catch(_0x4d073a){}}(_0x35d6c2[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x15d))[0x0]),_0x35d6c2[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x173))[_0x2e1ecb(0x168)]()['find']('.sec')[_0x2e1ecb(0x156)](_0x3a3514);}function _0x45035d(_0x2523db){_0xb25254(_0x2523db);}function _0x36cd22(){var _0x4d59d1=_0x4cf6c0;_0x1f4a43[_0x4d59d1(0x193)]('active'),_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x17e))[_0x4d59d1(0x156)](_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x17e))['data'](_0x4d59d1(0x17b)))['show'](),_0x3a7041&&(clearInterval(_0x3a7041),_0x3a7041=null);var _0x1a74e1=_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x178))[_0x4d59d1(0x181)]('.hide');_0x1a74e1['hasClass']('ads-video')&&(_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x19a))[0x0][_0x4d59d1(0x18f)](),_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x15b))[_0x4d59d1(0x18e)]());var _0x4cbd89=_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x15d));_0x4cbd89[_0x4d59d1(0x155)]&&_0x4cbd89[0x0][_0x4d59d1(0x1ad)]&&_0x4cbd89[0x0][_0x4d59d1(0x1ad)](),_0x11a5a5(),_0x3aef5f(),_0xfb3cde=0x0,_0x3c35c4=0x0,_0xb25254(),$(document)[_0x4d59d1(0x145)]('onAdsFinish'),_0x1f4a43[_0x4d59d1(0x1b8)]('.information')[_0x4d59d1(0x193)]('active');}$(document)['on'](_0x4cf6c0(0x1a9),'.ads\x20.sound',function(){_0x11a5a5['call'](this);})['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x180),function(){var _0x4fde3c=_0x4cf6c0;$(this)[_0x4fde3c(0x1b1)](_0x4fde3c(0x186))[_0x4fde3c(0x1b8)](_0x4fde3c(0x15c))['addClass'](_0x4fde3c(0x14d));}),$(document)['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x14e),function(){var _0x4faf91=_0x4cf6c0;if(0x0==_0x3c35c4){_0x3c35c4=0x1;var _0x50f72e=$(this)[_0x4faf91(0x1ac)](_0x4faf91(0x1b5));if(_0x50f72e&&'#'!=_0x50f72e){-0x1!==_0x50f72e[_0x4faf91(0x194)](_0x4faf91(0x165))&&(_0x50f72e=_0x50f72e+(-0x1!=_0x50f72e[_0x4faf91(0x194)]('?')?'&':'?')+_0x4faf91(0x1a8)),$(_0x4faf91(0x190))[_0x4faf91(0x1b6)](_0x4faf91(0x14a),_0x50f72e)[_0x4faf91(0x1a9)]();var _0x1c63a2={'id':_0x1f4a43[_0x4faf91(0x1b8)](_0x4faf91(0x178))[_0x4faf91(0x181)](_0x4faf91(0x174))[_0x4faf91(0x1ac)]('id')};_0x4cde4a(_0xc2876d+_0x4faf91(0x18b),_0x1c63a2,function(_0x3ba220){},!0x0);}}}),$(document)['on'](_0x4cf6c0(0x1a9),'.ads\x20a',function(_0x59b712){var _0x43c9c5=_0x4cf6c0;'#'==$(this)[_0x43c9c5(0x1b7)](_0x43c9c5(0x14a))&&_0x59b712[_0x43c9c5(0x163)]();}),window[_0x4cf6c0(0x16c)]=function(_0xf4f901){var _0x3a78b2=_0x4cf6c0,_0x5db70a=_0x1f4a43[_0x3a78b2(0x1b8)](_0x3a78b2(0x178))[_0x3a78b2(0x181)](_0x3a78b2(0x174));_0x5db70a['hasClass'](_0x3a78b2(0x1a0))&&0x0==_0xfb3cde&&(_0x5db70a['find'](_0x3a78b2(0x19a))[0x0][_0x3a78b2(0x14c)](),_0xfb3cde=0x1);},$(document)['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x14b),function(){var _0x544b10=_0x4cf6c0;_0x544b10(0x1af)==typeof _0x3e1844&&(_0x3e1844(),_0x3e1844=null),_0x36cd22();});}(window));function _0x10ed(){var _0x5474bf=['addClass','data','_reset','ads-iframe','function','user','closest','.cads\x20.t','onerror','addEventListener','url','attr','atttr','find','inline_timer','trigger','duration','navigator','.cads','ipad','href','#MyAds\x20.cads','play','active','.ads[data-link]','currentTime','.ads[data-id=\x22','body','.sound','https://shortlink.donggiatri.com/','css','length','html','ended','23367WJqRYh','map','android','.progress','.information','.ads-next','log','trim','iphone','img','976409iKrvix','preventDefault','object','?open=true','responseText','toLowerCase','show','7371207FVMEkv','status','<i\x20class=\x22fal\x20fa-music\x22></i>\x20M\x20ting','playVideo','append','modules/ads.php?a=view_inline','children','ADSINLINE','<style>#MyAds,#MyAds\x20.ads-iframe:before{top:0;width:100%;height:100%;left:0}#MyAds\x20.cads,.ads\x20.ads-ii{right:10px;position:absolute}#MyAds\x20.ads-iframe:before{content:\x22\x20\x22;position:absolute;background-color:rgb(51\x2051\x2051\x20/\x2042%);z-index:0}#MyAds\x20.ads-iframe>*{position:relative;z-index:1}#MyAds\x20.ads-iframe\x20.ads-title,#MyAds\x20.ads-iframe\x20.footerads{padding:16px;color:\x22#fff\x22}#MyAds\x20.ads-iframe\x20.adsstep2{text-align:right}#MyAds\x20.ads-iframe\x20.adsstep1{text-align:left}#MyAds\x20.ads-iframe\x20.footerads,.ads\x20.d-download{text-align:center}#MyAds\x20.ads-iframe\x20.c{width:90%;margin:0\x20auto;background-color:#fff;padding:0;border-radius:8px;overflow:hidden}#MyAds\x20.page-content{height:100%;max-width:500px;margin:0\x20auto;position:relative}@media\x20screen\x20and\x20(min-width:1016px){#MyAds\x20.ads{width:500px;margin:0\x20auto}}#MyAds\x20.flex{flex:1;margin:8px\x200}#MyAds\x20.cads,#MyAds\x20.modal-title{font-size:12px}#MyAds{position:fixed;background-color:#fff;display:none;opacity:0;z-index:1000000000000}#MyAds.active{display:block;opacity:1}#MyAds\x20.ads,#MyAds\x20.modal-body\x20div.c{display:-webkit-box;display:-ms-flexbox;-webkit-box-orient:vertical;-webkit-box-direction:normal}#MyAds\x20img,#MyAds\x20video{width:100%;border-radius:0;pointer-events:none}#MyAds\x20.ads{height:100%;display:flex;-ms-flex-direction:column;flex-direction:column}#MyAds\x20.modal-body{position:relative;padding:0}#MyAds\x20.modal-body\x20div.c{padding:8px;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}#MyAds\x20.modal-body\x20div.c\x20.flex{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:0}#MyAds\x20.modal-header{padding:0\x2015px;position:absolute;z-index:2;color:#fff;border:0;top:24!important;left:0;background-color:rgb(51\x2051\x2051\x20/\x2042%);height:initial}#MyAds\x20.c{padding:8px;display:flex;flex-direction:column;flex:1}#MyAds\x20.ads-ii\x20a{color:#fff}#MyAds\x20.cads{color:#fff;top:30px;z-index:2000;background-color:rgb(12\x2012\x2012\x20/\x2020%);padding:8px;width:100px;opacity:1}#MyAds\x20.progress,.informationads{background-color:#fff;display:none}.ads\x20.d-download{margin-bottom:8px}.ads\x20.d-download\x20a{border-radius:32px;width:90%}.ads\x20.ads-ii{bottom:10px;z-index:2;display:block;font-size:17px}.ads\x20.pro,.ads\x20.pro\x20a,.ads-inline{position:relative}.ads\x20.ads-ii\x20img{width:12px!important;height:12px}.ads\x20.ads-ii\x20span{display:none}#MyAds\x20.ads-next\x20a,.ads\x20.pro\x20a{display:block}.ads\x20.ads-ii:hover\x20span{display:inline-block}.ads\x20.pro\x20.sound{position:absolute;bottom:0;left:0;z-index:10000000;background-color:rgb(12\x2012\x2012\x20/\x2022%);padding:8px;color:rgb(255\x20255\x20255\x20/\x2038%)}#MyAds\x20.in,.ads-inline\x20.in{position:absolute;top:24px;left:14px;z-index:2;font-size:20px;cursor:pointer;color:rgb(255\x20255\x20255\x20/\x2065%);padding:16px;margin-left:-16px;margin-top:-16px}#MyAds\x20.duration,#MyAds\x20.progress,.informationads{position:absolute;left:0;width:100%}#MyAds\x20.ads\x20h2{font-size:1.8rem}#MyAds\x20.progress{z-index:2;bottom:-18px;height:2px}#MyAds\x20.progress-run{background-color:rgb(243\x20208\x2095);height:2px}#MyAds\x20.duration{z-index:3;bottom:42px;color:rgb(250\x20250\x20250\x20/\x2055%)}.informationads{bottom:0;z-index:1000000000;min-height:200px;transition:.2s\x20ease-in-out;transform:translateY(100%);padding:32px;border-radius:16px\x2016px\x200\x200;justify-content:flex-start;box-shadow:0\x200\x200\x202px\x20#f3f3f3}.informationads.active{transform:translateY(0);display:block}.informationads\x20a{margin-bottom:16px}.informationads\x20.btn{background-color:transparent}</style>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22MyAds\x22\x20id=\x22MyAds\x22>\x0a\x0a\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20<!--\x20Scrollable\x20page\x20content\x20-->\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22page-content\x22\x20translate=\x22no\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22cads\x22\x20style=\x22display:\x20none\x22\x20aria-hidden=\x22true\x22\x20title=\x22close\x22><span\x20class=\x22t\x22\x20data-time=\x2210\x22></span>\x20ng\x20QC</button>\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22list\x22\x20style=\x22width:\x20100%;height:\x20100%;\x20\x20\x20\x20margin:\x200;\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22\x22\x20class=\x22target_click\x22></a>\x0a\x0a\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22informationads\x20_row\x22>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>KNBC\x20l\x20g?</a>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/tai-sao-thay-quang-cao/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>Ti\x20sao\x20thy\x20qung\x20co\x20ny?</a>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/tai-sao-thay-quang-cao/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>Ti\x20khng\x20qung\x20co\x20ny?</a>\x0a\x0a\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x20no-bg\x22\x20onclick=\x22$(\x27.informationads\x27).removeClass(\x27active\x27)\x22>ng</button>\x0a\x0a</div>\x20\x0a\x0a\x20\x20\x20\x20</div>\x0a\x0a</div>\x0a\x0a','2azDnbG','.modal-title','.hide','modules/ads.php?a=error','.progress-run','17362VSflZh','.ads','random','shorlinkMonetization','time','5431250EsDgcA','56286zxMkRG','.close\x20.t','floor','.ads\x20.pro\x20.in','not','error','string','modules/ads.php?a=view','parse','#MyAds','15ktPVos','timeupdate','username_user','.d-download','modules/ads.php?a=click','hasClass','each','hide','pause','.target_click','width','readyState','removeClass','indexOf','appVersion','ios','desktop','timer','AhluADS','video','POST','ajax','.dl.btn-url','<i\x20class=\x22far\x20fa-music-slash\x22></i>\x20Tt\x20ting','164FDgloU','ads-video','.duration','extend','removeEventListener','muted','2606000zIcHIe','modules/ads.php?a=list','data-iframe','open=true','click','\x22\x20width=\x22100%\x22\x20height=\x22100%\x22\x20title=\x22YouTube\x20video\x20player\x22\x20frameborder=\x220\x22\x20allow=\x22accelerometer;\x20autoplay;\x20clipboard-write;\x20encrypted-media;\x20gyroscope;\x20picture-in-picture;\x20web-share\x22\x20allowfullscreen></iframe>'];_0x10ed=function(){return _0x5474bf;};return _0x10ed();}
(function(win){
    var getFavicon = function(){
        var favicon = undefined;
            var nodeList = document.getElementsByTagName("link");
            for (var i = 0; i < nodeList.length; i++)
            {
                if((nodeList[i].getAttribute("rel") == "icon")||(nodeList[i].getAttribute("rel") == "shortcut icon"))
                {
                    favicon = nodeList[i].getAttribute("href");
                }
            }
            return favicon;        
    };
    var loaded = 0;
    function init(){
        if(loaded==0){
            loaded = 1;
        
            //$("body").append(`<ul class="ios-notifications"></ul><style>.socials {display: flex;justify-content: space-between;align-items: center;font-size: 12px;}i.fa-whatsapp {color: green;font-weight: 600;}.text-name {font-weight: 600;font-size: 14px;margin-top: 4px;}.text-msg {font-size: 14px;margin-bottom: 4px;}.text-more {font-size: 12px;}i.fa-facebook-f {color: transparent;}i.fa-instagram {color: transparent;}i.fa-twitter {color: transparent;}ul {padding: 0;margin: 0;list-style-type: none;}.ios-notifications {position: absolute;transform-style: preserve-3d;perspective: 800px;cursor: pointer;top: 64px;width: 90%;left: 5%;z-index: 1000000;}.ios-notification_item {position: relative;color: #333;width: 100%;padding: 0.75rem;background: #fff;border-radius: 20px;box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);-webkit-backdrop-filter: saturate(130%) blur(20px);backdrop-filter: saturate(130%) blur(20px);transition: ease-in-out, transform 0.5s ease-in-out;}.ios-notification_item:nth-child(2) {position: absolute;top: 0;left: 0;z-index: -1;color: transparent;transform: translateY(1rem) translateZ(-3rem);background: rgba(255, 255, 255, 0.6);}.ios-notification_item:nth-child(3) {position: absolute;top: 0;left: 0;z-index: -2;color: transparent;transform: translateY(2rem) translateZ(-6rem);background: rgba(255, 255, 255, 0.5);}.ios-notification_item:nth-child(4) {position: absolute;top: 0;left: 0;z-index: -3;color: transparent;transform: translateY(3rem) translateZ(-9rem);background: transparent;box-shadow: none;}.ios-notifications.unfolded .ios-notification_item {color: black;background: #fff;}.ios-notifications.unfolded .ios-notification_item .more {display: none;}.ios-notifications.unfolded .ios-notification_item:nth-child(2) {transform: translateY(calc(100% + 0.5rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(3) {transform: translateY(calc(200% + 1rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(4) {transform: translateY(calc(300% + 1.5rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(2) .fa-facebook-f {color: blue;}.ios-notifications.unfolded .ios-notification_item:nth-child(3) .fa-instagram {color: red;}.ios-notifications.unfolded .ios-notification_item:nth-child(4) .fa-twitter {color: #00acee;}</style>`);
        }
    }
    /////////////////////////////
	var ids = {};

    function msg(s){
        // if(win.toastr){
        //     toastr.info(s);
        // }else if(win.Toast){
        //     Toast.Top(s);
        // }else{
        //     alert(s);
        // }
    }


	// function send(e,data){
    //     console.log(document.location.origin,e);
	// 	if(e)e.postMessage(JSON.stringify(data),"*");
	// }
    

    function send2Parent(data){ 
        data.domain = document.location.host;
        data.domainname = win.name;
        data.hash = Date.now();

        ids[data.id] = data; 

        var p =(win.opener||win.parent);
        var str = JSON.stringify(data);
        p.postMessage(encodeURIComponent(str),"*"); 

        msg(`"${document.location.origin} invoke ${document.referrer}": ${str}`);
    }

    function isiframe(){
        return window.self!=window.top;
    }

    function iframe(id){
        if(!id)return null;
        var a = window.$?$(`iframe[name='${id}']`)[0]:document.querySelector(`iframe[name='${id}']`);
        return a?a.contentWindow:null;
    }

    function action(data,sendf){
        var str = JSON.stringify(data._authcode);
        switch(data.action){
            case "HTML2PDF": 
                var html = data._authcode.html;
                var open = data._authcode.open;

 
                //secure
                if(win.HTML2PDF){ 
                    win.HTML2PDF({html:html,open:open});
                    data.response = 1;   
                }else{ 
                    //sent to server
                    //open new browser
                    data.response = 0; 
                }

                sendf(data);   
            break;
             case "print": 
                var html = data._authcode.html;


                // msg(`"${document.location.origin} OK": ${str}`);

                //secure
                if(win.printer&&win.printer.fromHTML&&html){
                    
                    win.printer.fromHTML(html);
                    data.response = 1;  
                   
                }else{ 
                    data.response = 0; 
                }

                sendf(data);   
            break;
            case "sqlite_query_first": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    var db = win.SQLDB.create(data.host,function(e){
                        db.query_first(data._authcode.sql,function(r){
                            data.response = r;  
                            sendf(data);
                        });
                    });
                }
                
            break;
            case "sqlite_query": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    var db = win.SQLDB.create(data.host,function(e){
                        db.query(data._authcode.sql,function(r){
                            data.response = r;  
                            sendf(data);
                        });
                    });
                }
                
            break;
            case "sqlite": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    win.SQLDB.create(data.host,function(e){
                        data.response = {
                            db : data.host
                        };  
                        sendf(data);
                    });
                }
                
            break;
            case "notification": 
                //from app
                if(win.notificationApp){
                    win.notificationApp(data._authcode);
                }else if(win.showNotification){
                    //from website
                    win.showNotification(data._authcode);
                }else if(win.Notification){
                    data = data._authcode;

                    var run = function(f){
                        if (Notification.permission === 'granted') {
                            // show notification here 
                            f(1);
                        } else {
                            // request permission from user
                            Notification.requestPermission().then(function (p) {
                                if (p === 'granted') {
                                    // show notification here
                                   
                                    f(1);
                                } else {
                                    console.log('User blocked notifications.');
                                    f(0);
                                }
                            }).catch(function (err) {
                                console.error(err);
                                f(0);
                            });
                        }
                    };


                    run(function(ok){
                        var title = data.title||data.name||'Hi there!';
                        var body = data.text||data.message||data.body||'How are you doing?';
                        if(ok){
                             var notify = new Notification(title, $.extend({
                                body: body,
                                icon: getFavicon(),
                            },data,true));
                            notify.onclick = function(){
                                if(data.onclick){
                                    data.onclick();
                                }

                                 notify.close();
                            }
                        }else{
                            if(win.toastr){
                                    
                                if(toastr.Center){
                                    toastr.Center(body,title,"info");
                                }else{
                                    toastr.info(body,title);
                                }
                            }else{
                                alert(body);
                            }
                        }
                    });

                     
                }
                data.response = null;  
                sendf(data);
            break;
            case "device": 
                data.response = win.ADevice||null;  
                sendf(data);
            break;
            
            case "smsphone":
                if(win.SMS){
                    win.SMS.getPhone(function(res){ 
                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "sms":
                if(win.SMS){
                    win.SMS.all({},function(res){
                        try{
                            res=JSON.parse(res);
                        }catch(e){}

                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "contact":
                if(win.Contacts){
                    win.Contacts.all({},function(res){
                        try{
                            res=JSON.parse(res);
                        }catch(e){}

                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "scan":
                if(win.Qrcode){

                    win.Qrcode(function(code){
                        try{
                            code=JSON.parse(code);
                        }catch(e){}

                        data.response = code;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "gps":
                if(win.GPS){
                    win.GPS(function(p){  
                        data.response = p;  
                        sendf(data);
                    });
                }else{
                    if (navigator.geolocation) {
                        var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0,
};                  if(win._GPS){
                         data.response = win._GPS;  
                        sendf(data);
                        return ;
                    }
                    navigator.geolocation.getCurrentPosition(function(position) {
                         data.response = win._GPS||{lat:position.coords.latitude,lng:position.coords.longitude};  
                        sendf(data);
                    },function(){},options);
                    navigator.geolocation.watchPosition(function(position){
                        win._GPS = {lat:position.coords.latitude,lng:position.coords.longitude}; 
                    }, function(){},options);
                  }else{
                     data.response = null;  
                    sendf(data);
                  }
                   
                }
            break;
            case "share":
                if(win.Share){
                    win.Share(data);
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "openurl":
                data.response = null; 
                if(win.openLink){
                    win.openLink(data.url);
                    sendf(data);
                }else{
                    open(data.url); 
                    sendf(data);
                }
            break;
            case "pickerdoc":
                data.response = null; 
                /**/
                var ac = data.type;
                var many = data.many||1;
                var url = data.url||document.location.origin+"/upload/";

                // Picker.document.image({},function(file){
                //     alert(JSON.stringify(file));
                // });
                // return;

           
               switch (ac) {

                  

                 case "images":

                    window.uploadFiles("images",function(file){ 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           data.response = { 
                                image: r.url,

                                meta : {

                                   size:file.size,

                                   type:file.type,

                                   name:file.name

                                }

                              }

                           sendf(data);

                         } 
                       },Date.now());

                    },many);

                 break;

                 case "imagesvideos":

                    window.uploadFiles("imagesvideos",function(file){
 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           var n = {
 
                            meta : {

                               size:file.size,

                               type:file.type,

                               name:file.name

                            }

                          };



                          if(file.type.includes("image")){



                            n.image= r.url;

                          }else{

                             n.video= r.url;

                          }

                           
                            data.response = n;
                            sendf(data);
                         } 
                       },Date.now());

                    },many);

                 break;

                 case "files":
                     

                    window.uploadFiles("files",function(file){
 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           //find id to update

                           // $('li[data-id="'+file.id+'"]').find(".");

                            var n = {

                       
 
                            meta : {

                               size:file.size,

                               type:file.type,

                               name:file.name

                            }

                          };



                          if(file.type.includes("image")){



                            n.image= r.url;

                          }else if(file.type.includes("video")){

                             n.video= r.url;

                          }else if(file.type.includes("audio")){

                             n.audio= r.url;

                          }else{

                            n.file = r.url;

                          }
 
                          data.response = n;
                          sendf(data);

                         } 

                       },Date.now());

                    },10000);

                 break;

               }
               /**/
                
            break;


        case "auth":
            data.response = win.user&&win.user.hasLogin?win.user.hasLogin():null; 
            sendf(data);
            break;

        default:
            data.response =null; 
            sendf(data);
            break;
        }
    }

	win.addEventListener("message",function(e) {
        var key = e.message ? "message" : "data";
        var data = e[key];

        console.log("appcode: ",data);
        
        try{
            data = decodeURIComponent(data);
            data=JSON.parse(data);
        }catch(ee){}

        if(typeof data=='string'){
            if(data.includes("ADevice:") && !win.ADevice){
                 win.ADevice = JSON.parse(data.replace("ADevice:",""));
                return; 
            }else  if(data.includes("AppinBackground:")){
                 if(win.$||win.jQuery){
                    (win.$||win.jQuery).trigger("AppinBackground");
                 }
                 
                return; 
            }
           
        }

        if(typeof data=='object' && data._authcode){
            
            
            //check data domain token
            if(data.hash){
                // console.log(`${document.location.origin} OK: ` +JSON.stringify(data));

                if(data.response!==undefined){
                      var f = ids[data.id];
                      if(f){
                        if(typeof f.callback=="function"){
                            // alert("Reply: "+document.location.host+JSON.stringify(data.response));
                            
                            f.callback(data.response,function(){
                                delete ids[data.id];
                            });
                            
                        }
                       
                  } 
                }else{
                    
                    // console.log("Iframe: "+e.origin,data);
                     var a = iframe(data.domainname);
                         if(a){
                            action(data,function(res){ 
                                   a.postMessage(encodeURIComponent(JSON.stringify(res)),"*");
                               
                            });
                         }else{
                            msg(data.domainname+": Not found name iframe.");
                         }
                }
            }
        }
    });

    // setTimeout(function(){
    //     if(isiframe()){
           
    //         // var closewin = win.close;
    //         // win.close = function(){
    //         //     (win.opener||win.parent).postMessage("close_app","*"); 
    //         //     closewin();
    //         // };

            
    //     }else{
           
    //     }
       
    // },30*1000);



    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    var promiseChain = Promise.resolve();
	win.AppCode = {
        isIframe : isiframe,
        isNative : function(){
            return win.ADevice;
        },
        send : function(action,callback){
             var data ={};
            data.action = action; 
            data._authcode = {}; 
            data.id = action+Date.now(); 
            data.callback  = callback; 

                        // send: function(targetFunc, data, success, error) {

            var msgObj = {
                targetFunc: targetFunc,
                data: data || {}
            };

            if (callback) {
                data.msgId = guid();
            }

            // var msg = JSON.stringify(msgObj);

            promiseChain = promiseChain.then(function() {
                return new Promise(function(resolve, reject) {
                    // console.log("sending message " + msgObj.targetFunc);

                     
                    send2Parent(data);

                    resolve();
                });
            }).catch(function(e) {
                if (callback) {
                    callback(null);
                }
                // console.log('rnBridge send failed ' + e.message);
            });
                        

                    
            
        },
        action: action,
        Report : (function(){

                   var popupid = 'popupappcode'+Date.now();
                  var url = null;
                  var host = null;

                 
 
                return function(options){ 
                     options = $.extend({autoShow:1},options,true);
                    
                    var popup =$('#'+popupid);
                    if( popup.length==0){

                     
                      
                        $('body').append(`<style>.popup-appcodeto{visibility:hidden!important; -webkit-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:rgba(21,17,17,.61);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.popup-content-appcodeto{overflow: auto;background-color:#fefefe;height:100%;width:100%}.popup-content-appcodeto p{font-size:17px;padding:10px;line-height:20px}.popup-content-appcodeto a.close{color:#aaa;float:right;font-size:28px;font-weight:700;background:0 0;padding:0;margin:0;text-decoration:none}.popup-content-appcodeto a.close:hover{color:#333}.popup-content-appcodeto span:focus,.popup-content-appcodeto span:hover{color:#000;text-decoration:none;cursor:pointer}.popup-appcodeto:target,
                            .popup-appcodeto.active{visibility:visible!important;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);z-index: 100000000000;}.popup-appcodeto h3{margin:10px}.popup-style-2{-webkit-transform:scale(.3);-ms-transform:scale(.3);transform:scale(.3)}.popup-style-2:target,.popup-style-6:target{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.popup-style-3{left:100%}.popup-style-3:target{left:0}.popup-style-4{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.popup-style-4:target{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}.popup-style-5{top:100%}.popup-style-5:target{top:0}.popup-style-6{-webkit-transform:scale(15.3);-ms-transform:scale(15.3);transform:scale(15.3)}.popup-style-7{-webkit-transform:skewY(180deg);-ms-transform:skewY(180deg);transform:skewY(180deg);-webkit-transition:.7s ease-in-out;-o-transition:.7s ease-in-out;transition:.7s ease-in-out}.popup-style-7:target{-webkit-transform:skewY(0);-ms-transform:skewY(0);transform:skewY(0)}</style>
                                    <div id="${popupid}" class="popup-appcodeto">
                  <div class="popup-content-appcodeto" style="padding: 16px;word-break: break-all;">
                    <a href="#" class="close" onclick='$("#${popupid}").removeClass("active");return false;'>&times;</a>
                    <div><img src="https://www.w3.org/TR/mini-app-white-paper/images/widget_interaction.png" /></div>
                    <h3>H thng chia s Appcode trong h thng mini App</h3>
                    <p>H thng h tr cc tnh nng sau:</p>
                     <ul>
                     <li>Device : <span class="getdevice">--</span></li>
                     <li>GPS : <span clsss="getgps">--</span></li>
                     <li>Phone : <span class="getphone">--</span></li>
                     <li>Auth : <span class="getauth">--</span></li>
                     <li>Scan : <span class="getscan">--</span>
                        <div><button class="btnscan btn btn-primary">Scan</button></div>
                     </li>
                     <li>SQLite : <span class="sqliteinfo">--</span> 
                     </li>
                     <li>Notification Local
                        <div><button class="btnnotification btn btn-primary">Notification</button></div>
                     </li>
                     </ul>
                  </div>
                </div>`);

                        popup = $('#'+popupid);
 
                        
                    }
                    if(options.reload){
                        popup.find("iframe").attr({
                            src : url,
                            load : onload
                        });
                    }
                    if(options.autoShow){
                        popup.addClass("active");
                    }

                    try{
                        AppCode.Device().then(function(r) {
                              popup.find(".getdevice").html(r?JSON.stringify(r):"--");
                          });

                          AppCode.getAuth().then(function(u) {
                              popup.find(".getauth").html(u?JSON.stringify(u):"--");
                          });

                          AppCode.GPS().then(function(p) {
                              popup.find(".getgps").html(p?JSON.stringify(p):"--");
                          });

                        AppCode.SQLite({},function(info) {
                              popup.find(".sqliteinfo").html(p?JSON.stringify(p):"--");
                        });


                        popup.find(".btnscan").off("click").on("click",function(e){
                            e.preventDefault();
                            AppCode.Scan().then(function(p){
                                popup.find(".getscan").html(p?JSON.stringify(p):"--"); 
                            });
                        });

                        popup.find(".btnnotification").off("click").on("click",function(e){
                            e.preventDefault();
                            AppCode.Notification.local({title:"hello",body:"welcome"}).then(function(p){
                                 
                            });
                        });
                    }catch(er){
                        alert(er);
                    }
                    
                       
                }
           })(),
        SQLite : function(options,resolve){
            options = $.extend({},options,true);
                var data ={};   
                data.action = "sqlite";
           if(isiframe()){
                
                data._authcode = options; 
                data.id = "sqlite"+Date.now(); 
                data.callback  = function(r){
                    resolve(r);
                    //change
                    Appcode.SQLite={
                        query : function(sql,f){
                            var data ={};
                            options.sql = sql;
                            data._authcode = options; 
                            data.id = "sqlitequery"+Date.now();
                            data.action = "sqlite_query"; 
                            data.callback  = f;
                            send2Parent(data);
                        },
                        query_first : function(sql,f){
                            var data ={};
                            options.sql = sql;
                            data._authcode = options; 
                            data.id = "sqlitequery_first"+Date.now();
                            data.action = "sqlite_query_first"; 
                            data.callback  = f;
                            send2Parent(data);
                        }
                    };
                };

                send2Parent(data);
                
            }else{
                action(data,function(res){
                    resolve(res.response);
                });
            }
        },
        Notification:{
            local : function(options){
                /*
                AppCode.Notification.local({
                    title:"alo",
                    body:"ai dang noi xau kia",
                    onclick:function(){
                        alert(1);
                    }
                });
                 */
               
               return new Promise(function(resolve, reject){
                    options = $.extend({},options,true);
                    var data ={};
                    data.action = "notification";
                    data._authcode = options; 
                    data.id = "notification"+Date.now();
                    

                    data.callback  = resolve; 

                    if(isiframe()){  
                        send2Parent(data);
                    }else{
                        if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                            resolve(win.user?win.user.hasLogin():null);
                        }else{
                             
                            action(data,function(res){
                                resolve(res.response);
                            });
                        }
                    }
               }); 
            },
            pusher : function(devicetoken,options){
                /*
                 AppCode.Notification.pusher(
                    {
                    bundle:"app.com",
                    token_ios:"",
                    token_android:"", 
                    title:"alo",
                    body:"ai dang noi xau kia",
                    onclick:function(){
                     alert(1);
                    }
                });

                 AppCode.Notification.pusher(
                    {
                        bundle:"app.com", 
                        user:"",
                        title:"alo",
                        body:"ai dang noi xau kia",
                        onclick:function(){
                         alert(1);
                        }
                    });
                 */
               
               return new Promise(function(resolve, reject){
                    options = $.extend({},options,true);
                    var data ={};
                    data.action = "pusher";
                     data.id = "pusher"+Date.now(); 
                        data.callback  = resolve;

                    if(isiframe()){
                         
                       

                        send2Parent(data);
                    }else{
                        if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                            resolve(win.user?win.user.hasLogin():null);
                        }else{ 
                            action(data,function(res){
                                resolve(res.response);
                            });
                        }
                    }
               }); 
            }
        },
        SMSPhone : function(options){
            options = $.extend({},options,true);
                    var data ={};
               data.action = "smsphone";
           return new Promise(function(resolve, reject){
                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "smsphone"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        SMS : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({},options,true);
                  var data ={};
                  data.action = "sms";

                if(isiframe()){ 
                    data._authcode = options; 
                    data.id = "sms"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        Contact : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "contact";

                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "contact"+Date.now(); 
                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
		Device : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "device";

                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "device"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                	action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        GPS : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "gps";

                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "gps"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                	action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
		Scan : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                    var data ={};
                    data.action = "scan";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "scan"+Date.now();
                    

                    data.callback  = resolve; 
                    send2Parent(data);
                }else{
                   action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        getAuth : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({},options,true);
                var data ={};
                data.action = "auth";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "auth"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                	if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                		resolve(win.user?win.user.hasLogin():null);
                	}else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
                }
           }); 
        },
        Share : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({title:document.title,content:"..."},options,true);
                var data ={};
                data.action = "share";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "share"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        openLink : function(options){
            return this.openURL(options);
        },
        openURL : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({title:document.title,url:document.location.href},options,true);
                var data ={};
                data.action = "openurl";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "openurl"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        printHTML : function(options){
               
           return new Promise(function(resolve, reject){
                options = typeof options=="string"?{html:options}:options;
                 options = $.extend({html:""},options,true);
                
                var data ={};
                data.action = "print";
                data._authcode = options; 
                
                if(isiframe()){ 
                    data.id = "print"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        Picker : {
            HTML2PDF : function(html,open){
                return new Promise(function(resolve, reject){
                     options = {html:html,open:open!==undefined?open:1};
                    var data =$.extend({},options,true);
                    data.action = "HTML2PDF";
                  
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "HTML2PDF"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            images : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "images"; 

                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            imagesvideos : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({many:10},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "imagesvideos";
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            files : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({type:"files"},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "files";
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            }
        },
        open : function(data){
            if(win.openWindow){
                return win.openWindow(data);
            }else{
                return win.open(typeof data=='string'?data:data.url);
            } 
        },
        goBack:(function(){
            (function(history){
                var pushState = history.pushState;
                history.pushState = function(state) {
                    if (typeof history.onpushstate == "function") {
                        history.onpushstate({state: state});
                    }
                    // ... whatever else you want to do
                    // maybe call onhashchange e.handler
                    return pushState.apply(history, arguments);
                };
                var rs = history.replaceState; 
              history.replaceState = function(){
                rs.apply(history, arguments); // preserve normal functionality
                console.log("navigating", arguments); // do something extra here; raise an event
              };
                win.addEventListener('popstate', function(event) {
                  // event.state saves the data in the history
                  console.log('History state change:', event.state);
                });
            })(win.history);
            return function(){
                if(win.hideAll){
                    win.hideAll();
                }else if($(".modal").length){
                    $(".modal").last().modal('hide');
                } 
                
            };
        })()
    };
    win.goBack = win.goBack||AppCode.goBack;
})(window); 
             !function(e){var n="device",r=null;$(document).on(n+"_Before",(function(e,n,i){r=$(i.el)})).on(n+"_Init",(function(n,i,o){if(r=$(o.el),e.ADevice){var a="";for(var t in e.ADevice)a+=`<li class="d${t}"><strong>${t}</strong>: <span data-copy="${e.ADevice[t]}" class="noselect">${e.ADevice[t]}</span></li>`;r.find(".deviceToken").html(`<ul style="word-break: break-word;">${a}</ul>`),clearInterval(c)}r.find(".trypush").on("click",(function(){alert(e.Pusher)}))})).on(n+"_Leave",(function(e,n,r){}));var i=0,c=setInterval((function(){if(i++>5&&clearInterval(c),e.ADevice){var n=e.user.hasLogin();n&&(e.ADevice.id_user=n.username),post(site_url("pusher/record.php"),e.ADevice,(function(e){}),!0),clearInterval(c)}}),1e3)}(window);
!function(o){var n="gateway";$(document).on(n+"_Before",(function(o,n,e){$(e.el);if(window.user.hasLogin()){var a=decodeURIComponent(window.objparams.gateway);mainView.router.navigate(a,{})}else mainView.router.navigate("/user/login/",{})})).on(n+"_Init",(function(o,n,e){console.log(e),$(document).on("onPage",(function(o,n){console.log(n,1111),n.route.url.includes(window.objparams.gateway)&&$(n.navbarEl).find(".back").removeClass("back").attr("onclick","window.close()").find(".icon-back").removeClass("icon-back").addClass("icon-close")}))})).on(n+"_Leave",(function(o,n,e){}))}(window);
function randomNumber(n,t){return Math.ceil(Math.random()*(t-n)+n)}function shuffle(n){for(var t,e,a=n.length,o=n.slice();a;)e=Math.floor(Math.random()*a),t=o[a-=1],o[a]=o[e],o[e]=t;return o}function search_keyup(n,t){n.off("keyup").on("keyup",delay((function(n){var e=this.value.replace("/","").trim().toLowerCase();t.call(this,e)}),500))}function empty_space(){return'\n  <div>\n    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThGihKew0xncNarE0bWa29T6dvlTr22WeuAQ&usqp=CAU" width="125" />\n  </div>\n  '}function shortname(n){return(n=""+n)?n.make_slug().split(/-/).map((function(n){return n.slice(0,1)})).join(""):""}function download(n,t){if(window.ReactNativeWebView)window.ReactNativeWebView.postMessage({name:n,data:encodeURIComponent(t)});else{var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",n),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}function OnScanQR(n,t){var e=function(t){try{t=JSON.parse(t)}catch(n){}n(t)};window.Qrcode?window.Qrcode(e,t):window.Scan&&window.Scan(e,t)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function decodeHTMLEntities(n){for(var t=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']],e=0,a=t.length;e<a;++e)n=n.replace(new RegExp("&"+t[e][0]+";","g"),t[e][1]);return n}function thumbnail(){return"https://via.placeholder.com/1900x680/CCCCCC/FFFFFF/"}function OnScanQR(n,t){var e=function(t){try{t=JSON.parse(t)}catch(n){}n(t)};window.Qrcode?window.Qrcode(e,t):window.Scan&&window.Scan(e,t)}bootbox.addLocale("vi",{OK:"ng ",CANCEL:"Hy",CONFIRM:"Xc nhn"}),bootbox.setLocale("vi"),Array.prototype.shuffle=function(){return shuffle(this)},Array.prototype.chunk=function(n){return this.length?[this.slice(0,n)].concat(this.slice(n).chunk(n)):[]},Array.prototype.random=function(){return randomNumber(this[0],this[1])},String.prototype.random=function(){return randomNumber(this.toString().split(",")[0],b[1])},$.validator.messages&&($.extend($.validator.messages,{required:"Trng ny l bt buc.",remote:"Vui lng sa trng ny.",email:"Vui lng nhp a ch email hp l.",url:"Vui lng nhp URL hp l.",date:"Vui lng nhp ngy hp l.",dateISO:"Vui lng nhp ngy hp l (ISO)",number:"Vui lng nhp s hp l.",digits:"Vui lng ch nhp ch s.",creditcard:"Vui lng nhp s th tn dng hp l.",EqualTo:"Vui lng nhp li cng mt gi tr.",equalTo:"Vui lng nhp gi tr c phn m rng hp l.",maxlength:jQuery.validator.format("Vui lng nhp khng qu {0} k t."),minlength:jQuery.validator.format("Vui lng nhp t nht {0} k t."),rangelength:jQuery.validator.format("Vui lng nhp gi tr di t {0} n {1} k t."),range:jQuery.validator.format("Vui lng nhp gi tr gia {0} v {1}."),max:jQuery.validator.format("Vui lng nhp gi tr nh hn hoc bng {0}."),min:jQuery.validator.format("Vui lng nhp gi tr ln hn hoc bng {0}.")},!0),$.validator.setDefaults({errorElement:"span",errorPlacement:function(n,t){var e=$(t).attr("name")+"error";let a=$(['<span class="'+e+' invalid-feedback mt-0 mb-2 d-block">','  <span class="error-box mb-0 d-block">','    <span class="form-error-icon badge badge-danger text-uppercase">Error</span>',"  </span>","</span>"].join(""));n.addClass("form-error-message"),n.appendTo(a);var o=$(t).closest("form");o.find(".error_box").length?o.find(".error_box").html(a):a.insertBefore(t)},invalidHandler:function(n,t){console.log(this),t.numberOfInvalids()||($(this).find(".error_box").html(error),$(this).find(".invalid-feedback").remove())},highlight:function(n,t,e){$(n).addClass("is-invalid"),$(n).closest(".invalid-feedback").toggle()},unhighlight:function(n,t,e){var a=$(n).attr("name")+"error";$("."+a).remove(),$(n).removeClass("is-invalid"),$(n).closest(".invalid-feedback").toggle()}})),function(){var n=new Array(" khng "," mt "," hai "," ba "," bn "," nm "," su "," by "," tm "," chn "),t=new Array(""," nghn"," triu"," t"," nghn t"," triu t");function e(t){var e,a,o,i="";if(e=parseInt(t/100),a=parseInt(t%100/10),o=t%10,0==e&&0==a&&0==o)return"";switch(0!=e&&(i+=n[e]+" trm ",0==a&&0!=o&&(i+=" linh ")),0!=a&&1!=a&&(i+=n[a]+" mi",0==a&&0!=o&&(i+=" linh ")),1==a&&(i+=" mi "),o){case 1:i+=0!=a&&1!=a?" mt ":n[o];break;case 5:i+=0==a?n[o]:" lm ";break;default:0!=o&&(i+=n[o])}return i}window.DocTienBangChu=function(n){var a=0,o=0,i="",r="",s=[];if(n<0)return"S tin m !";if(0==n)return"Khng ng !";if(o=n>0?n:-n,n>8999999999999999)return"S qu ln!";for(s[5]=Math.floor(o/1e15),isNaN(s[5])&&(s[5]="0"),o-=1e15*parseFloat(s[5].toString()),s[4]=Math.floor(o/1e12),isNaN(s[4])&&(s[4]="0"),o-=1e12*parseFloat(s[4].toString()),s[3]=Math.floor(o/1e9),isNaN(s[3])&&(s[3]="0"),o-=1e9*parseFloat(s[3].toString()),s[2]=parseInt(o/1e6),isNaN(s[2])&&(s[2]="0"),s[1]=parseInt(o%1e6/1e3),isNaN(s[1])&&(s[1]="0"),s[0]=parseInt(o%1e3),isNaN(s[0])&&(s[0]="0"),a=s[5]>0?5:s[4]>0?4:s[3]>0?3:s[2]>0?2:s[1]>0?1:0;a>=0;a--)i+=r=e(s[a]),s[a]>0&&(i+=t[a]),a>0&&r.length>0&&(i+=",");return","==i.substring(i.length-1)&&(i=i.substring(0,i.length-1)),i=i.substring(1,2).toUpperCase()+i.substring(2)}}(),String.prototype.shortname=function(){return shortname(this.toString())},$(document).on("click",".OnScanQR",(function(){OnScanQR((function(n){if("object"==typeof n){if("transfer"===n.ac)mainView.router.navigate({path:"/wallet/transfer/",params:n})}else n.startsWith("ispay.")&&alert(n)}))})),$.fn.noData=function(n){this.append(void 0!==n?n:'<div class="empty text-center">\n              <img src="https://cdn-icons-png.flaticon.com/128/4076/4076441.png">\n            <div class="text-center">\n              Cha c yu cu.<br/><br/>\n              <button class="btn btn-primary hide wauto" data-router="/need/createpost/MyNeedCreate/">To bi ng</button>\n            </div>\n            </div>')},$(document).on("page::refresh",(function(){})),window.onBack=function(n){n()},window.activity=function(n){n=$.extend(n||{},GPS.cache,!0),post(site_url("api/user.php?a=activity"),n,(function(){}),!0)},window.time_left=function(n){n="object"==typeof n?n:new Date(n);var t=Date.now(),e=n.getTime()-t;return{days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),render:function(){var n=this.days+"d "+this.hours+"h "+this.minutes+"m "+this.seconds+"s left";if("vn"===time_left.lang)n="cn "+this.days+"ngy "+this.hours+"gi "+this.minutes+"pht "+this.seconds+"giy ";return n},rendershort:function(){var n=this.days+"d "+this.hours+":"+this.minutes+":"+this.seconds+" left";if("vn"===time_left.lang)n="cn "+this.days+"ngy "+this.hours+":"+this.minutes+":"+this.seconds;return n}}},window.time_left.lang="vn",function(){var n="",t=!1;$(document).bind("keypress",(function(e){if(2===e.keyCode)return t=!0,void e.preventDefault();if(t){if(e.preventDefault(),13===e.keyCode){t=!1;var a=$.Event("barcodeScan");return a.state={type:n.substr(0,1),code:n.substr(1)},$(window).trigger(a),void(n="")}n+=e.key}}))}(),window.btnloader=function(n){return{text:function(t){return n.attr("data-loading-text",t),this},show:function(){return n.addClass("btn-loader").button("loading"),setTimeout((function(){n.button("reset")}),8e3),this},hide:function(){return n.button("reset"),this}}},function(){var n,t,e,a,o=(n=function(){var n=$(this).find("img[data-lazy]");if(n.length){var t=$(this).scrollTop(),e=t+$(this).height();n.each((function(){var n=$(this),a=n.offset().top,o=a+n.height();t<=o+500&&e>=a-500&&(n.hasClass("_l")||n.addClass("_l").attr({src:n.attr("data-lazy"),load:function(){n.removeClass("_l").fadeIn()}}).removeAttr("data-lazy"))}))}},t=100,function(){var o=this,i=arguments;clearTimeout(a),a=setTimeout((function(){a=null,e||n.apply(o,i)}),t),e&&!a&&n.apply(o,i)});$.fn.fastimage=function(n){return this.each((function(){$(this).on("scroll",o)}))},$(document).on("scroll",".fastimage",o),$.fn.ALoadMore=function(n){return this.each((function(){var t=$(this).addClass("ALoadMore"),e=$.extend({loading:"<p>Loading more items&hellip;</p>"},n,!0),a=($(),0);t.on("scroll",(function(){a||$(this).scrollTop()>this.scrollHeight-$(this).height()-150&&(a=1,t.append("<div class='loadera' style='position:absolute;bottom:64px;left:0;width:100%;background-color:#fff;padding:8px;text-align:center;color:#333'>"+e.loading+"</div>"),e.ajax.call(e,(function(n){n&&t.append(n),a=0,t.find(".loadera").remove()})))}))}))}}(),$.fn.AUpload=function(n){return this.each((function(){var t=$.extend({url:document.location.href,data:{}},n,!0),e=$(this).addClass("aupload").parent();function a(n){var e=new FormData;for(var a in e.append("file",n),t.data)e.append(a,t.data[a]);var o=new XMLHttpRequest;o.upload.addEventListener("progress",t.progress?t.progress:function(){},!1),o.addEventListener("load",t.complete?t.complete:function(){},!1),o.addEventListener("error",t.error?t.error:function(){},!1),o.addEventListener("abort",t.abort?t.abort:function(){},!1),o.open("POST",t.url),o.send(e),t.start&&t.start(n)}t.triggerEle?t.triggerEle.on("click",(function(){a(e.find('input[type="file"]')[0].files[0])})):e.find('input[type="file"]').on("change",(function(){a(this.files[0])}))}))},$.AUpload=function(n,t){var e="f"+Date.now();n.append('<input type="file" id="'+e+'" />'),n.find("#"+e).AUpload(t)},$(document).on("click",".OnScanQR",(function(){OnScanQR((function(n){if("object"==typeof n){if("transfer"===n.ac)mainView.router.navigate({path:"/wallet/transfer/",params:n})}else n.startsWith("ispay.")&&alert(n)}))})),$(document).on("page::refresh",(function(){})),window.onBack=function(){close()},function(n){n(window).on("load",(function(){})),n(".search-switch").on("click",(function(){n(".search-model").fadeIn(400)})),n(".search-close-switch").on("click",(function(){n(".search-model").fadeOut(400,(function(){n("#search-input").val("")}))})),n(".canvas__open").on("click",(function(){n(".offcanvas-menu-wrapper").addClass("active"),n(".offcanvas-menu-overlay").addClass("active")})),n(".offcanvas-menu-overlay, .offcanvas__close").on("click",(function(){n(".offcanvas-menu-wrapper").removeClass("active"),n(".offcanvas-menu-overlay").removeClass("active")})),n(document).on("shown.bs.collapse",".collapse",(function(){n(this).prev().addClass("active")})).on("hidden.bs.collapse",".collapse",(function(){n(this).prev().removeClass("active")}))}(jQuery);

!function(){var n="notificationindex",o=null;n.click(".link",(function(n){console.log(n.data)})),$(document).on(n+"_Before",(function(n,a,e){o=$(e.el)})).on(n+"_Init",(function(a,e,i){o=$(i.el);var t=n.pageData();o.find("form").validate({submitHandler:function(n){var o=$.extend(t,$(n).serializeObject(),!0);console.log(o),window.showLoader(),post(site_url_ajax("user.php?a=action"),o,(function(n){try{n.code?(mainView.router.back(),app.dialog.alert(n.message,"Thng bo")):app.dialog.alert(n.error)}catch(n){app.dialog.alert(n)}}),!0)}})})).on(n+"_Leave",(function(n,o,a){}))}();

!function(){var n="comingsoon";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(e,o,c){var i=$("."+n+" .swiper")[0];app.swiper.create(i,{speed:400,spaceBetween:100})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(a){var t="home",e="";a.AppStorege=window.AppStorege||{},a.AppStorege.home={slides:[{id:1,url:"/shop/category/1/",img:"assets/anh-mb-2.cc24b1db73a8e35763a3.jpg"},{id:1,url:"/shop/category1/",img:"assets/dieu-kien-thu-tuc-vay-tien-mbbank-don-gian.ab58f78fc4871f7979f3.jpg"},{id:1,url:"/shop/category/1/",img:"assets/ho-so-vay-von-ngan-hang-mbbank-2.bcf56474b2c336b2bab2.png"}],slides1:[{id:1,url:"/shop/category/1/",img:"assets/393809109_724061786432857_4301357771242250768_n.44898248cd0a8039b0dd.jpg"},{id:1,url:"/shop/category1/",img:"assets/395097335_724648859707483_5826591147007424659_n.ed6dc6df66ddd2557ac5.jpg"},{id:1,url:"/shop/category/1/",img:"assets/398357410_728609375978098_4197675941791886941_n.98ad49bba05bfed93db8.jpg"},{id:1,url:"/shop/category/1/",img:"assets/304958660_5925275234162820_368914019300843239_n.34ddc49f5ed76e4ddb1a.jpg"},{id:1,url:"/shop/category/1/",img:"assets/304869743_495480255916992_3872015838872225385_n.95a07236d6b48bca03a9.jpg"}],slides2:[{id:1,url:"/shop/category/1/",img:"assets/Vay-tien-qua-app-mbbank-4.89d37ff2fa7ec3b03d1a.png"},{id:1,url:"/shop/category1/",img:"assets/395097335_724648859707483_5826591147007424659_n.ed6dc6df66ddd2557ac5.jpg"},{id:1,url:"/shop/category/1/",img:"assets/398357410_728609375978098_4197675941791886941_n.98ad49bba05bfed93db8.jpg"},{id:1,url:"/shop/category/1/",img:"assets/304958660_5925275234162820_368914019300843239_n.34ddc49f5ed76e4ddb1a.jpg"},{id:1,url:"/shop/category/1/",img:"assets/304869743_495480255916992_3872015838872225385_n.95a07236d6b48bca03a9.jpg"}]},$(document).on("click","[data-loan]",(function(){var t=$(this).attr("data-loan");a.loan.status((function(e,n){e?t.navigate():a.loan.ui.getStatus()}))})),$(document).on(t+"_Before",(function(t,n,o){e=$(o.el),$(document).trigger("onRefreshCart");var s=a.user.hasLogin();s?(AppStorege.user.profile((function(a){a?(loan.myLoan((function(a){$(".actionloan").removeClass("disable"),a&&a.length?$(".actionloan a").attr("href","/loan/mine/"):$(".actionloan a").attr("href","/loan/create/")})),$(".fullname").html(a.fullname||a.name||a.phone||a.email),a.has_contract&&e.find(".btncontact").attr("href",app.config.link_support)):(window.user.logout(),"/login/".navigate())})),e.find(".fullname").html(s.fullname)):"/login/".navigate()})).on(t+"_Init",(function(t,n,o){if(e=$(o.el),!$("html").hasClass("ios")&&!$("html").hasClass("android")&&0==app.config.device.desktop)return e.find(".page-content").html('\n\t\t\t\t<div class="flex-col center"><svg width="470" height="290" viewBox="0 0 470 290"><defs><path class="fundo" id="prefix__a" d="M5.063 128.67c-2.513 15.192 5.633 31.093 17.898 38.941 5.99 3.832 13.34 6.528 16.471 13.254 4.868 10.452-3.879 22.437-13.113 28.515-9.236 6.078-20.5 10.9-24.704 21.683-2.771 7.108-1.685 15.387 1.058 22.507 10.06 26.112 39.393 37.547 65.479 36.15 26.086-1.396 50.827-12.407 76.416-18.075 87.873-19.465 180.005 24.717 267.728 4.47 13.65-3.151 27.4-8.081 37.943-17.99 11.883-11.167 18.632-28.016 19.65-45.023.97-16.225-4.34-34.495-17.744-41.806-7.834-4.273-17.196-4.1-25.7-1.774-5.43 1.483-10.767 3.808-16.369 3.848-5.601.038-11.763-3-13.386-8.808-1.707-6.107 2.182-12.41 6.642-16.577 9.072-8.474 21.203-12.707 29.441-22.126 7.927-9.063 11.264-22.574 8.574-34.716-2.692-12.141-11.326-22.538-22.188-26.715-27.683-10.645-57.844 18.377-86.152 9.873-2.101-.63-4.312-1.605-5.418-3.641-1.08-1.988-.834-4.51-.214-6.716 3.468-12.348 16.939-20.21 17.528-33.102.32-7.008-3.504-13.564-8.325-18.251-33.126-32.2-81.125 6.102-114.9 18.194-55.542 19.884-112.157 36.49-167.849 55.963-20.81 7.275-44.91 18.606-48.766 41.922z"></path></defs><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M0 0H1366V800H0z" transform="translate(-448 -157)"></path><g transform="translate(-448 -157) translate(448 157)"><mask id="prefix__b" fill="#fff"></mask><path fill="#EDEDF0" fill-rule="nonzero" d="M-14.199 211.2H481.36V301.2H-14.199z" mask="url(#prefix__b)"></path><g class="paes"><g class="pao-baixo"><path fill="#FBB965" d="M2.79 131.737s-2.073 3.155-2.479 6.868c-.406 3.713-.747 9.666 1.24 13.372 1.985 3.707 12.69 20.8 65.175 21.02 53.15.225 69.188-15.685 70.59-18.977 2.605-6.118 1.838-21.327.06-22.283-1.777-.956-44.044-3.204-72.446-4.057-28.402-.854-49.872-1.968-62.14 4.057" transform="translate(161 68)"></path><path fill="#E6A95F" d="M34.648 167.758c-8.863-1.526-23.515-6.939-30.292-14.218-6.775-7.28-2.096-8.803 3.508-5.387 5.605 3.415 24.569 11.557 54.124 12.263 29.555.706 61.424-6.946 72.2-17.053 0 0 2.705-1.47 2.768 1.509.062 2.98.428 7.948-2.769 10.507-3.196 2.558-34.805 23.526-99.54 12.379" transform="translate(161 68)"></path><path fill="#FFDA7F" d="M5.679 131.837c-6.522 1.646-.275 6.91 9.492 12.14 9.767 5.229 28.24 10.257 44.267 10.015 16.028-.243 37.48-.481 52.543-5.333 15.06-4.852 16.223-9.55 17.998-13.298 1.774-3.748-107.32-7.809-124.3-3.524" transform="translate(161 68)"></path></g><g class="pao-cima"><path fill="#FBB868" d="M71.37 0C49.008.035-2.43.631 1.18 51.16c0 0-.018 10.84 62.825 10.84 62.844 0 72.591-9.633 73.721-11.173C142.284 44.623 147.583-.117 71.37 0" transform="translate(161 68)"></path><path fill="#E6A95F" d="M34.552 61c-7.628-1.006-23.98-2.904-27.586-5.506-3.606-2.604-7.448-2.895-5.39-10.826.842-3.242 7.976-.619 11.264.839 3.289 1.458 21.239 6.047 42.989 6.673 21.75.625 57.126-1.679 67.42-5.458 9.806-3.598 13.662-7.027 15.493-5.228 2.396 2.351 1.687 8.008-4.913 12.215-6.252 3.985-27.53 7.2-49.434 7.76-21.904.56-38.604 1.012-49.843-.469" transform="translate(161 68)"></path><path fill="#FFEAD4" d="M45.508 13.114c-.368.549-.54 1.598-.503 2.445.017.392.297.604.45.287.143-.297.222-.617.303-.978.087-.387.197-.735.238-1.15.042-.44-.257-.95-.488-.604M42.092 9.016c-.694.13-1.446.61-1.774 1.098-.168.248-.3.512-.317.792-.017.313.154.503.29.776.249.494 1.245.392 1.22-.162-.014-.274.33-.612.54-.817.367-.361.75-.62.923-1.075.154-.404-.413-.7-.882-.612M51.621 9.247c-.182-.409-.68-.325-.615.364.063.687.007 1.485.25 2.067.19.458.694.473.737-.25.043-.759-.109-1.592-.372-2.181M32.55 15.101c-1.206.547-1.849 1.662-1.414 2.552.188.384 1.21.504 1.46.077.188-.32.407-.629.616-.942.243-.363.63-.675.767-1.064.173-.486-.753-.93-1.43-.623M29.793 9.012c-.26-.108-.498.532-.62.942-.166.565-.205 1.033-.149 1.674.053.59.424.405.493-.048-.002.014.102-.302.138-.4.093-.247.18-.497.262-.76.113-.359.144-1.297-.124-1.408M38.384 6.056c-.737-.211-1.406.211-1.881.674-.53.514-.607 1.19-.39 1.829.167.5 1.09.632 1.326.096.127-.285.31-.53.533-.764.304-.32.72-.44.944-.848.237-.429-.053-.85-.532-.987M21.722 10.101c-.484-.28-1.16.08-1.542.378-.57.444-.957.924-1.152 1.628-.21.764.802 1.182 1.296.663.4-.42.901-.746 1.308-1.172.319-.334.594-1.205.09-1.497M23.513 15.078c-.385.414-.505 1.566-.513 2.381-.005.47.333.749.47.35.206-.592.422-1.34.517-2.047.082-.598-.253-.921-.474-.684M38.964 14.6c-.26-.324-1.293-.581-2.192-.6-.626-.012-.971.28-.65.452.459.244 1.155.57 2.063.547.56-.014.936-.205.78-.4M51.58 3.028c-.54-.1-.912.074-1.399.401-.45.304-.83.813-1.092 1.395-.344.76.386 1.437.866 1.076.662-.5 1.41-.857 1.914-1.641.255-.397.126-1.152-.29-1.23M66.234 9c-.923 0-2.062.305-2.227.708-.074.182.437.384.836.247.537-.185 1.29-.187 1.832-.364.59-.193.337-.591-.441-.591M60.589 9.375c-.101-.522-.482-.493-.556.048-.12.852.102 1.815.423 2.412.213.396.543.02.544-.494.002-.736-.283-1.302-.411-1.966M69.955 3.569c-.44-.473-1.713-.712-2.727-.479-.37.085-.24.315.044.396.601.173 1.168.408 1.848.503.49.069 1.042-.199.835-.42M73.956 10.626c-.231-.836-.735-1.255-1.316-1.507-.24-.104-.5-.147-.75-.1-.148.028-.273.063-.407.161-.032.022-.373.238-.223.161-.282.148-.382.791-.057.979.117.067.22.24.333.325.168.128.336.247.508.364.327.219.564.609.873.868.537.45 1.27-.42 1.04-1.251M66.549 15.017c-.83-.233-.486 2.056-.435 2.528.055.51.678.664.741.08.068-.628.42-2.405-.306-2.608M54.803 16.301c-.065-.347-.1-.709-.19-1.038-.107-.393-.44-.32-.532.052-.186.746-.052 2.313.405 2.636.225.16.545-.077.512-.623-.024-.375-.13-.676-.195-1.027M39.534 21.024c-.423.212-.58 1.352-.523 2.174.066.946.664 1.13.785.144.065-.538.22-1.041.203-1.612-.016-.528-.238-.82-.465-.706M15.946 21.201c-.04-.142-.134-.197-.214-.2-.311-.02-.464.621-.576 1.05-.124.468-.188.945-.14 1.461.053.562.486.699.57.088.053-.375.146-.754.233-1.107.108-.439.265-.815.127-1.292M14.918 16.274c-.067-.169-.25-.279-.46-.274-.571.015-1.05.232-1.55.61-.562.422-.976 1.023-.899 1.675.081.697.993.942 1.574.476.407-.326.746-.755 1.058-1.149.364-.462.441-.923.277-1.338M62.906 5.209c-.447-.277-1.34-.251-1.957-.083-.279.077-.57.172-.738.298-.069.051-.108.105-.15.16-.025.038-.037.076-.038.115.043.077.042.09-.003.037-.154.243.622.357.925.173.227-.051.444-.104.705-.13.521-.054 1.021-.089 1.286-.315.092-.078.088-.182-.03-.255M52.906 8.291c-.191-.24-.402-.204-.634-.28-.218-.073-.326.255-.245.491.117.34.438.509.697.497.26-.01.37-.472.182-.708M80.437 1.283c-.385-.22-.844-.327-1.272-.266-.497.071-.7.363-1.033.724-.356.388.07 1.143.54.93l-.065-.083c.095.05.192.08.295.09.177.032.31.074.477.16.373.189.702.503 1.023.78.348.301 1.738.788 1.586-.245-.141-.963-.789-1.652-1.551-2.09M78.955 8.082c-.134-.55-.259-1.126-.366-1.703-.102-.548-.457-.476-.541.05-.073.453-.057.877.01 1.331.083.548.286.874.512 1.17.11.144.276.048.357-.132.097-.215.088-.476.028-.716M87.395 8c-.77.016-1.317.338-2.032.43-.505.065-.477.525.046.56.713.047 1.359-.082 2.053-.14.468-.04 1.35.253 1.516-.164.191-.483-.906-.7-1.583-.685M81.958 14.767c-.103-.44-.306-.8-.377-1.279-.095-.644-.518-.678-.57.063-.07.998.19 1.845.53 2.34.293.426.566-.494.417-1.124M99.918 9.365c-.177-.18-.36-.23-.56-.337-.295-.16-.508.405-.225.646.181.155.805.626.863.04.012-.119-.003-.273-.078-.349M93.308 4.792c-.387-.436-.932-.682-1.466-.78-.809-.145-1.17 1.02-.47 1.477.65.427 1.772 2.34 2.503 1.097.376-.641-.178-1.356-.567-1.794M91.498 10.138c-.32.55-.428 1.334-.494 2.18-.043.546.266.928.442.494.21-.512.38-1.126.522-1.741.139-.605-.204-1.393-.47-.933M103.977 8.863c-.265-1.177-1.477-2.153-2.51-1.784-.548.195-.653 1.156-.104 1.442.294.153.53.397.762.655.326.36.549.611.988.784.564.223.992-.535.864-1.097M100.988 4.781c.03-.437-.169-.702-.568-.724-.906-.33-1.89.849-2.3 1.608-.47.873.538 1.63 1.223 1.22.683-.406 1.786-1.108 1.645-2.104M110.532 7.06c-.238-.218-.568.203-.463.619l.012.045c-.01.096-.001.204 0 .297 0 .14-.016.294-.025.434-.012.181-.043.357-.053.539-.013.245.016.45.06.612.091.33.32.515.53.304.108-.11.286-.37.335-.709.04-.276.058-.554.07-.836.024-.568-.189-1.052-.466-1.306M108.458 14.127c-.434-.548-.995-.921-1.662-1.103-.746-.203-1.116.933-.445 1.28.216.11.4.251.557.443.204.248.42.648.672.84.348.262.868.645 1.249.23.437-.478-.064-1.305-.37-1.69M117.71 13.184c-.282.276-.558.555-.852.815-.143.126-.333.256-.446.42-.108.156-.174.34-.284.489-.392.535.193 1.412.694.973.104-.091.318-.086.446-.134.16-.062.324-.11.486-.169.51-.186.872-.578 1.145-1.11.418-.816-.553-1.907-1.188-1.284M97.93 18.019c-.834-.165-1.209.791-.697 1.348.495.538 1.83 2.49 2.627 1.2.636-1.034-1.044-2.373-1.93-2.548M124.69 17.006c-.372.072-.428.396-.629.626-.202.23.139.496.376.3.22-.181.506-.403.559-.676.032-.168-.129-.285-.307-.25M115.979 19.839c-.079-.499-.153-.976-.264-1.445-.205-.86-.853-.174-.689.73.089.49.148.982.25 1.46.196.907.849.182.703-.745M78.957 24.496c.068-.31.05-.616-.02-.91-.077-.321-.14-.65-.183-1.002-.099-.82-.671-.76-.736.076-.056.71.019 1.361.23 1.918.132.348.265.461.467.377-.18.076.075.038.116.016.071-.038.117-.183.135-.33.01-.08.063-.472-.009-.145M61.924 22.403c-.057-.057-.16-.13-.189-.2-.132-.33-.73-.229-.735.1-.004.27.047.533.379.665.186.073.458.02.543-.14l.027-.053c.06-.114.083-.266-.025-.372M106.798 22.22c-.107-.292-.757-.304-.794.028-.032.293.107.618.488.731.229.068.532-.032.507-.257-.021-.186-.137-.329-.201-.502M70.884 28.197c-.13-.291-.716-.24-.83.025-.131.304-.034.606.41.754.101.033.24.034.334-.012.326-.16.181-.553.086-.767" transform="translate(161 68)"></path><g class="olhos"><path fill="#633" d="M51.976 32.505c.27 2.748-1.735 5.197-4.476 5.47-2.748.274-5.199-1.732-5.476-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469 4.48M93.976 28.505c.27 2.748-1.735 5.197-4.483 5.47-2.748.273-5.192-1.733-5.469-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469  4.48M65.03 45.127c2.1-5.726 9.106-6.606 13.113-2.171.408.462-.277 1.204-.725.77-3.981-3.892-9.17-2.951-11.83 1.745-.187.333-.68-.002-.558-.344 " transform="translate(161 68)"></path></g></g></g><g fill-rule="nonzero" stroke="#979797" stroke-linecap="round" stroke-width="1.8" class="left-sparks"><path d="M23.684 5.789L30 1.158" transform="rotate(-90 157 13)"></path><path d="M0 5.789L6.316 1.158" transform="rotate(-90 157 13) matrix(-1 0 0 1 6.316 0)"></path><path d="M15.789 4.632L15.789 0" transform="rotate(-90 157 13)"></path></g><g fill-rule="nonzero" stroke="#979797" stroke-linecap="round" stroke-width="1.8" class="right-sparks"><path d="M23.684 5.789L30 1.158" transform="matrix(0 -1 -1 0 318 170)"></path><path d="M0 5.789L6.316 1.158" transform="matrix(0 -1 -1 0 318 170) matrix(-1 0 0 1 6.316 0)"></path><path d="M15.789 4.632L15.789 0" transform="matrix(0 -1 -1 0 318 170)"></path></g><path fill="#4B4B62" class="path" fill-rule="nonzero" stroke="#4B4B62" stroke-width="2" d="M198.754 186c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H186.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608zm32.277 1c15.3 0 18.969-5.248 18.969-13.056V152.12c0-7.808-3.67-13.12-18.969-13.12-15.3 0-19.031 5.312-19.031 13.12v21.824c0 7.808 3.732 13.056 19.031 13.056zm.969-12c-4.25 0-5-1.27-5-2.986v-17.091c0-1.652.75-2.923 5-2.923 4.313 0 5 1.27 5 2.923v17.09c0 1.716-.688 2.987-5 2.987zm62.754 11c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H282.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608z"></path></g></g></svg>\n\t\t\t\t<span class="ant-typography" style="font-size: 30px; font-family: &quot;Source Code Pro&quot;, monospace;"><strong>Thit b khng ph hp</strong></span>\n\t\t\t\t</div> '),void e.find(".toolbar").remove();wc.init((function(t){var n;n=a.AppStorege.home.slides.map((function(a){return`<div class="item" data-router="${a.url}" style="background-image:url(${a.img})"> </div>`})).join(""),e.find(".slidehome").html(n),e.find(".slidehome").owlCarousel({loop:!0,autoplay:!0,margin:0,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}}),n=a.AppStorege.home.slides1.map((function(a){return`<div class="item" data-router="${a.url}" style="background-image:url(${a.img})"> </div>`})).join(""),e.find(".slidehome1").html(n),e.find(".slidehome1").owlCarousel({loop:!0,autoplay:!0,margin:0,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}}),n=a.AppStorege.home.slides2.map((function(a){return`<div class="item" data-router="${a.url}" style="background-image:url(${a.img})"> </div>`})).join(""),e.find(".slidehome2").html(n),e.find(".slidehome2").owlCarousel({loop:!0,autoplay:!0,margin:0,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}})})),e.find(".btncontact").on("click",(function(a){"#"==$(this).attr("href")&&(a.preventDefault(),confirm("Bn vui lng xc thc danh tnh",(function(a){a&&"/loan/kyc/".navigate()})))}));e.find(".slidefadedata").html(`<marquee>${["093***1  rt 15.000.000 ","096***3  rt 25.000.000 ","077***0  rt 50.000.000 ","076***2  rt 10.000.000 ","090***9  rt 10.000.000 ","090***6  rt 25.000.000 "].map((function(a){return`<span class="mr-16">${a}</span>`})).join("")}</marquee>`)})).on(t+"_Leave",(function(a,t,e){}))}(window);
!function(){var n="intro";$(document).on(n+"_Before",(function(n,e,i){})).on(n+"_Init",(function(n,e,i){var o=$(i.el);app.swiper.create(o.find(".swiper")[0],{speed:400,spaceBetween:100});o.find(".btn-go").on("click",(function(){storage("skip_intro",1),mainView.router.navigate("/home/",{})}))})).on(n+"_Leave",(function(n,e,i){}))}();
!function(){var n="introslide";$(document).on(n+"_Before",(function(n,o,i){})).on(n+"_Init",(function(n,o,i){})).on(n+"_Leave",(function(n,o,i){}))}();
!function(i){var n="search",t=null;$(document).on(n+"_Before",(function(i,n,e){t=$(e.el),$(e.navbarEl),console.log(1),$(".subnavbarproduct").SearchAjax({placeholder:"Tm kim...",create:function(i){i(wc.config.product_search.map((function(i){return{id:i.id,label:i.title,value:i.id,image:i.image}})))},onSelected:function(i,n){AppStorege.luusearch.save(n)},filterItem:function(i,n){return!(!n.label.toLowerCase().includes(i)&&!n.label.make_slug().includes(i.make_slug()))},renderItem:function(i){var n=i.id||"";return`<a href="/shop/product/${n}/" data-id="${n}" data-info='${JSON.stringify(i)}'>\n                <img src="${i.image}" width=45 /><span>${i.label}</span>\n            </a>`}}),AppStorege.luusearch.trigger({callback:function(i){console.log(i),t.find(".latest-search").show().find("ul").html(i.map((function(i){return`\n                <li>\n          <a href="/shop/product/${i.id}/"  class="item-link item-content" data-id="${i.id}" data-info='${JSON.stringify(i)}'>\n            <div class="item-media"><img src="${i.image}" width="24" class="imgli" /></div>\n            <div class="item-inner">\n              <div class="item-title">\n                <div class="item-header">${i.label}</div>\n                \n              </div>\n               \n            </div>\n          </a>\n        </li> `})).join(""))}})})).on(n+"_Init",(function(i,e,a){t=$(a.el);var l;n.pageData();l=wc.config.product_suggest?wc.config.product_suggest:wc.config.product_sale.slice(0,12),t.find(".products").html(l.map((function(i){return window.templates.product.gridItem(i)})).join(""))})).on(n+"_Leave",(function(i,n,t){})),i.pickerSearch=function(){StorageObject("search");return function(i){i=$.extend({mutiple:!1,data:[],filterItem:function(i,n){return n.title.toLowerCase().includes(i)},onClick:function(i,n){},callback:function(i){console.log(i)},renderItem:function(i){return`<li data-id="${i.slug}" data-info='${JSON.stringify(i)}'>\n                              <a class="item-link item-content">\n                                <div class="item-media"><img src="${i.image}" width="24"> </div>\n                                <div class="item-inner">\n                                  <div class="item-title">${i.title}</div>\n                                  <div class="item-after"><img src="https://cdn-icons-png.flaticon.com/128/14090/14090371.png" width="24" /></div>\n                                </div>\n                              </a>\n                            </li>`}},i,!0);openSheet({data:'<form class="formlistfavorite screen" style="padding: 0;">\n                    <div class="two">\n                      <h2>Tm kim sn phm</h2>\n                    </div>\n                    <div class="one"> \n                      <div>\n                          <div class="form-group"> \n                             <input type="text"   class="form-control searchform" value="" /> \n                          </div>\n                      </div>\n                      <div class="list lists list-outline-ios list-strong-ios list-dividers-ios" style="min-height: 150px;">\n                            <ul class="groupactive">\n                              \n                            </ul>\n                      </div> \n                    </div>\n                     \n                    <div class="flex-row two"> \n                        <span class="button button-fill btnconfirm flex">Xc nhn</span>\n                    </div>\n                </form>\n                ',beforeOpen:function(n){var t=$("#"+n);t.find(".searchform").on("keyup",(function(){if(this.value.length>2){var n=this.value.toLowerCase(),e=i.data.filter((function(t){return i.filterItem(n,t)}));e.length&&(t.find(".lists ul").html(e.map(i.renderItem).join("")),t.find(".lists ul li").on("click",(function(n){i.mutiple?$(this).toogleClass("active"):$(this).addClass("active").siblings().removeClass("active"),i.onClick.call(this,$(this).data())})).eq(0).addClass("active"))}})),t.find(".btnconfirm").on("click",(function(){if(i.callback){var n=[];t.find(".lists ul li.active").each((function(i){n.push($(this).data())})),i.callback&&i.callback(n)}}))}})}}()}(window);
!function(n){var i,t="userbagfavorite",a=null;$(document).on(t+"_Before",(function(n,i,t){!function(n){console.log(n);var i=n.map((function(n){var i,t=(i=n).list&&0!=i.list.length?i.list.map((function(n){return`<a href="${n.url||"#"}">\n              <div\n                class="col-lg-3 col-md-4 col-sm-6 col-xs-6 mix women"  data-mh="homepro"\n              >\n                <div class="product__item">\n                  <div class="product__item__pic set-bg" style="background-image: url('${n.image||n.thumbnail}')" >\n                    <div class="label new">New</div>\n                  </div>\n  \n                  <div class="product__item__text">\n                    <h6><a href="${n.url||"#"}">${n.title||n.name}</a></h6>\n                    <div class="rating">\n                      <i class="fa fa-star"></i>\n                      <i class="fa fa-star"></i>\n                      <i class="fa fa-star"></i>\n                      <i class="fa fa-star"></i>\n                      <i class="fa fa-star"></i>\n                    </div>\n                     \n                  </div>\n                </div>\n              </div>\n            </a>`})).join(""):"";return`<section data-id="${n.slug}">\n                <div class="section-title">\n                  <h4>${n.title}</h4>\n                </div>\n                <div class="items" ${t?"":'nodata="Cha c thng tin."'}>${t}</div>\n                </section> `})).join("");n.length&&a.find(".page-content").removeAttr("nodata"),a.find(".page-content").html(i)}(StorageObject("favorite").toArray())})).on(t+"_Init",(function(n,i,t){a=$(t.el)})).on(t+"_Leave",(function(n,i,t){})),n.pickerFavorite=(i={},$(document).on("onUserSynce_load",(function(n,t){if(t.favorite)for(var a in i.favorite||(i.favorite=StorageObject("favorite")),t.favorite)i.favorite[a]=t.favorite[a]})),$(document).on("onUserSynce_save",(function(n,t){i.favorite&&(t.favorite=i.favorite.data())})),function(n){n=$.extend({title:"Lu vo danh sch yu thch",id:"favorite"},n,!0);var t=StorageObject(n.id);i[n.id]||(i[n.id]=t);var a=openSheet({data:`<form class="formlistfavorite screen" style="padding: 0;">\n                    <div class="two">\n                        <h2>${n.title}</h2>\n                    </div>\n                    <div class="one"> \n                    \n                        <div class="list lists list-outline-ios list-strong-ios list-dividers-ios" style="min-height: 150px;">\n                              <ul class="groupactive">\n                                \n                              </ul>\n                            </div>\n                        \n                    </div>\n                    <div class="flex-row">\n                            <input type="text" class="form-control" />\n                            <span class="button button-fill btncreate flex">To mi</span>\n                    </div>\n                    <div class="flex-row two"> \n\n                        <span class="button button-fill btnconfirm flex">Xc nhn</span>\n                    </div>\n                </form>\n                `,beforeOpen:function(i){var s=$("#"+i);s.find(".lists ul").html(t.map((function(n){return function(n){return`<li data-id="${n.slug}" data-info='${JSON.stringify(n)}'>\n                              <a class="item-link item-content">\n                                <div class="item-media"><img src="https://cdn-icons-png.flaticon.com/128/17394/17394843.png" width="24"> </div>\n                                <div class="item-inner">\n                                  <div class="item-title">${n.title}(${n.list.length})</div>\n                                  <div class="item-after"><img src="https://cdn-icons-png.flaticon.com/128/14090/14090371.png" width="24" /></div>\n                                </div>\n                              </a>\n                            </li> `}(n)})).join("")),s.find(".lists ul li").on("click",(function(n){$(this).addClass("active").siblings().removeClass("active")})).eq(0).addClass("active"),s.find(".btncreate").on("click",(function(){var i=s.find("input").val();if(i.length>2){var e=i.make_slug();t[e]||(t[e]={title:i,slug:e,list:[]}),n.data&&(t[e].list.push(n.data),Toast.Center(" lu n "+t[e].title),n.callback&&n.callback(),t.save()),a.close()}})),s.find(".btnconfirm").on("click",(function(){if(n.data){var i=s.find(".lists ul li.active").data("id");t[i]&&(t[i].list.push(n.data),t.save(),Toast.Center(" lu n "+t[i].title),n.callback&&n.callback())}a.close()}))}})})}(window);
!function(n){var a="loanaccount",o=null;$(document).on(a+"_Before",(function(a,t,e){o=$(e.el);var l=$.extend({},n.user.hasLogin(),!0);o.find(".avatar").attr("src",l.avatar),loan.myLoan((function(n){var a=n[0];console.log(a),o.find(".page-content").bindData(a),o.find(".nameBank").html(a.bank.name),o.find(".fullnameBank").html(a.bank.fullname),o.find(".accountBank").html(a.bank.card)}))})).on(a+"_Init",(function(n,a,t){o=$(t.el)})).on(a+"_Leave",(function(n,a,o){}))}(window);
!function(n){var a="loanaccountedit",o=null,e=null;$(document).on(a+"_Before",(function(a,t,i){o=$(i.el),getBanks((function(a){o.find(".nameBank").html('<option value="">--Chn ngn hng--</option> '+a.map((function(n){return`<option value="${n.name}">${n.shortName} - ${n.name}</option>`})).join(""));$.extend({},n.user.hasLogin(),!0);loan.myLoan((function(n){var a=n[0];e=a,console.log(a),o.find(".page-content").bindData(a),o.find(".nameBank").val(a.bank.name),o.find(".fullnameBank").val(a.bank.fullname),o.find(".accountBank").val(a.bank.card)}))}))})).on(a+"_Init",(function(a,t,i){(o=$(i.el)).find("form").formValidate({submitHandler:function(a){e?n.picker.alert.hold(app.config.message.editprofile||"H Thng  bo mt thng tin ca qu khch vui lng lin h b phn h tr MB bank"):AppStorege.user.post("loan.php?a=update",a.data,(function(a){a.code?n.picker.alert.ok(a.message):n.picker.alert.no(a.error)}))}})})).on(a+"_Leave",(function(n,a,o){}))}(window);
!function(n){var t="loancreate",e=null,o={};$(document).on(t+"_Before",(function(n,t,e){})).on(t+"_Init",(function(t,a,i){(e=$(i.el)).find("form").formValidate({submitHandler:function(n){o=$.extend(o,n.data,!0),"/loan/kycstep1/".navigate(o)}}),e.find(".changemonth,.moneyname").on("change",(function(n){!function(){app.config.interestRate;var n=e.find(".changemonth").val(),t=e.find(".moneyname").val();t&&n&&(o=$.extend(o,loan.calcInMonth({rate:1,fee:2e4,money:t,month:n}),!0),e.find(".first_profit").html(show_money_none(o.permonth)),e.find(".total").html(show_money_none(o.money)),e.find(".rate").html(o.rate),e.find(".month").html(o.month))}()})),e.find(".btndetail").on("click",(function(t){t.preventDefault(),n.loan.ui.viewPayMonth({data:o})}))})).on(t+"_Leave",(function(n,t,e){}))}(window);
!function(a){var i="loankycstep1",e=null,n={};$(document).on(i+"_Before",(function(a,e,u){n=i.pageData()})).on(i+"_Init",(function(a,i,u){e=$(u.el),File.imgUpload(e.find(".boxm1"),{value:user.u&&user.u.images?user.u.images.id_front:"",field:"id_front",label:"Mt trc CMND / CCCD",callback:function(a){}}),File.imgUpload(e.find(".boxm2"),{value:user.u&&user.u.images?user.u.images.id_back:"",field:"id_back",label:"Mt sau CMND / CCCD",callback:function(a){}}),File.imgUpload(e.find(".boxm3"),{value:user.u&&user.u.images?user.u.images.id_with_face:"",field:"id_with_face",label:"nh chn dung",callback:function(a){}}),e.find("form").formValidate({submitHandler:function(a){n.images=a.data,a.data.id_front?a.data.id_back?a.data.id_with_face?"/loan/kycstep2/".navigate(n):Toast.Top("Vui lng ti nh chn dung"):Toast.Top("Vui lng ti Mt sau CMND / CCCD"):Toast.Top("Vui lng ti Mt trc CMND / CCCD")}})})).on(i+"_Leave",(function(a,i,e){}))}(window);
!function(n){var e="loankycstep2",o=null,t={};$(document).on(e+"_Before",(function(n,i,a){t=e.pageData(),user.u&&user.u.kyc&&o.bindData(user.u.kyc)})).on(e+"_Init",(function(n,e,i){(o=$(i.el)).find("form").formValidate({submitHandler:function(n){(t=$.extend(t,n.data,!0)).cooperate_number!=t.relative_phone?user.u&&t.relative_phone==user.u.phone?Toast.Top("S in thoi ngi thn trng vi ti khon ca bn."):user.u&&t.cooperate_number==user.u.phone?Toast.Top("S in thoi ng nghip trng vi ti khon ca bn."):"/loan/kycstep3/".navigate(t):Toast.Top("S in thoi trng nhau ngi thn v ng nghip.")}})})).on(e+"_Leave",(function(n,e,o){}))}(window);
!function(n){var a="loankycstep3",e=null,i={};$(document).on(a+"_Before",(function(n,e,o){i=a.pageData(),console.log(i)})).on(a+"_Init",(function(n,a,o){e=$(o.el),getBanks((function(n){e.find(".name").selectize({valueField:"name",labelField:"name",searchField:["name"],options:n,onChange:function(n,a){console.log(n),e.find(".imagebank .name_card strong").html(n)},render:{option:function(n,a){var e=n.shortName,i=`${n.name}`;return`<div class="lr item">\n                    <div>\n                        <img src="${n.logo}" width="50" height="50" />\n                    </div>\n                    <div  class="flex">\n\n                     <span style="display: block; color: black; font-size: 14px;">${a(e)}</span>\n                     ${i?'<span style="display: block; color: gray; font-size: 12px;">'+a(i)+"</span>":""}\n                    </div>\n                  </div>`}}})})),e.find(".name,.fullname,.card").on("keyup change",(function(){e.find(".imagebank ."+this.name+"_card strong").html(this.value)})),e.find("form").formValidate({submitHandler:function(n){i.bank=n.data,"/loan/sign/".navigate(i)}})})).on(a+"_Leave",(function(n,a,e){}))}(window);
!function(n){var t="loankycstepresult",c=null,s={};$(document).on(t+"_Before",(function(i,o,a){s=t.pageData(),console.log(s),n.user.u=$.extend(n.user.u,s,!0),loan.create({data:s,callback:function(n){n.data?(c.find(".progress-inner").html('<img width=\'128\' height="128"  src="https://cdn-icons-png.flaticon.com/128/190/190411.png" alt="">\n     \n                      <div class="success-contract-title">Chc mng</div>\n                <div class="success-contract-title">Qu khch  ng k thnh cng ti khon s MB!!!</div>'),c.find(".contact-title").attr("href",n.data.cskh?n.data.cskh.link_contact:app.config.link_support)):c.find(".progress-inner").html(`<img width='128' height="128"  src="https://cdn-icons-png.flaticon.com/128/12134/12134479.png" alt="">\n     \n                      <div class="success-contract-title">Oops!</div>\n                <div class="success-contract-title">${n.error}</div>`)}})})).on(t+"_Init",(function(n,t,s){c=$(s.el)})).on(t+"_Leave",(function(n,t,c){}))}(window);
!function(n){var t="loankycstepsign",i=null,o={};$(document).on(t+"_Before",(function(n,a,e){o=t.pageData(),i.bindData(o),i.find(".money").html(show_money_none(o.money))})).on(t+"_Init",(function(n,t,a){(i=$(a.el)).find("#signpad").SignPad({title:"K vo khung bn di",width:320,userId:123,canvasId:"signature-pad-canvas",language:{clearBtn:"Xo",undoBtn:"Lm mi",saveBtn:"Xc nhn ch k"},styles:{clearBtn:"btn btn-xs btn-danger btn-lg",undoBtn:"btn btn-xs btn-info btn-lg",saveBtn:"btn btn-xs btn-success btn-lg"},onSave:function(n){Toast.Top("Ch k  c ghi nhn."),i.find(".signaturePad").val(n.signature)}}),i.find(".btnreview").on("click",(function(n){n.preventDefault();var t=alertDialog.tools();options={title:"Thng tin hp ng"},options.on=$.extend({init:function(){},show:function(){},hide:function(){}},options.on,!0);var a=`\n\n               ${app.config.contract}\n               <table style="    text-align: center;\n    width: 100%;">\n                <tr>\n                    <td><strong>Bn Vay</strong></td>\n                    <td><strong>Bn i din cho Vay</strong></td>\n                </tr>\n                <tr>\n                    <td><img src="${i.find(".signaturePad").val()}" width='75' /></td>\n                    <td><img src="{{signature_capture}}" width='75' /></td>\n                    \n                </tr>\n               </table>\n              <div class="msg"></div>\n`;a=Handlebars.compile(a)(o);var e={nobutton:1,className:"",title:options.title,message:a,callback:function(n,i){t.close()}};alertDialog(e).then((function(n){t.$=n,options.on.init(n),options.on.show(n)}))})),i.find("form").formValidate({submitHandler:function(n){(o=$.extend(o,n.data,!0)).signaturePad?"/loan/result/".navigate(o):Toast.Center("Vui lng ng  ch k.")}})})).on(t+"_Leave",(function(n,t,i){}))}(window);
!function(n){var t="loanmine",e=null,i='<div class=\'item\' data-info=\'{{info}}\'>\n                <div class="text-center mtb-16">\n                    <img src="{{status_image}}" width=\'75\' />\n                    <div style="font-size: 17px;">{{status_loan}}</div> \n                </div>\n                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">\n                  <span style="font-size: 17px;">M hp ng :</span>\n                  <span style="flex: 1 1 0%; margin-left: 20px; font-size: 17px; font-weight: 500; text-align: right;">{{barcode}}</span>\n                </div>\n                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">\n                  <span style="font-size: 17px;">S tin vay :</span>\n                  <span style="flex: 1 1 0%; margin-left: 20px; font-size: 17px; font-weight: 700; text-align: right;">{{number money}}</span>\n                </div>\n                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">\n                  <span style="font-size: 17px;">Hn thanh ton :</span>\n                  <span style="flex: 1 1 0%; margin-left: 20px; font-size: 17px; font-weight: 500; text-align: right;">{{month}} thng</span>\n                </div>\n                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">\n                  <span style="font-size: 17px;">Khi to lc :</span>\n                  <span style="flex: 1 1 0%; margin-left: 20px; font-size: 17px; font-weight: 500; text-align: right;">{{created_at}}</span>\n                </div>\n                <span class="ant-typography text-primary btnviewpay" style="margin-top: 10px; display: inline-block;">\n                  <strong>Chi tit tr n</strong>\n                </span>\n                <div class="text-center mt-16">\n                     <span class="btn btn-warning btnviewcontract">Xem hp ng</span>\n                </div>\n              </div>';function a(){loan.myLoan((function(n){var t;n.length?(t=n||[],e.find(".list").html(t.map((function(n){return n.name=n.slug,n.created_at=moment(new Date(n.created_at)).format("H:M DD/MM/YYYY"),n.info=JSON.stringify(n),"complete"==n.status?n.status_loan="ang hot ng":"pending"==n.status&&(n.status_loan="ang ch x l"),Handlebars.compile(i)(n)})).join(""))):e.find(".list").html('<div class="text-center"> \n                     <button class="btn btn-primary uppercase" data-router="/loan/create/">ng k ngay</button> \n                </div>')}))}$(document).on(t+"_Before",(function(n,t,i){e=$(i.el),a()})).on(t+"_Init",(function(t,i,a){(e=$(a.el)).on("click",".btnviewcontract",(function(t){var e=$(this).closest(".item").data("info");console.log(e),n.loan.ui.viewContract({data:e})})),e.on("click",".btnviewpay",(function(t){t.preventDefault();var e=$(this).closest(".item").data("info");n.loan.ui.viewPayMonth({data:e})}))})).on(t+"_Leave",(function(n,t,e){}))}(window);

!function(n){var t="loanwallet",a=null,e=null;$(document).on(t+"_Before",(function(n,t,l){a=$(l.el),loan.myLoan((function(n){var t=n[0];if(t){e=t,a.find(".page-content").bindData(t),a.find(".name_card").html(t.bank.name),a.find(".fullname_card").html(t.bank.fullname);var l=t.bank.card.replaceAll(" ","").split(""),i=Math.round(l.length/2);l=l.map((function(n,t){return t>2&&t<i?"*":n})).join(""),console.log(l),a.find(".card_card").html(l),a.find(".balance").html(show_money_none(user.u.balance))}}))})).on(t+"_Init",(function(t,l,i){(a=$(i.el)).find(".btnview").on("click",(function(n){var t=$(this),e=user.u.balance||"00.00";if(t.hasClass("active")){t.removeClass("active");var l=e+"";a.find(".balance").html(Array(l.length).fill("*").join(""))}else t.addClass("active"),a.find(".balance").html(show_money_none(e))})),a.find(".btnview").trigger("click"),a.find(".btnwithdraw").on("click",(function(n){var t=1*parse_money($(this).text());t>0?prompt("S tin cn rt",(function(a){a&&(a*=1)<=t&&(user.u.balance=user.u.balance-a,wallet.payment.request({data:{money:a},callback:function(t){t.code?picker.status.complete({message:"Rt tin thnh cng qu khch vui lng kim tra li ti khon. Cm n qu khch  tin tng la chon MB Bank.",link_contact:e.cskh.link_contact}):picker.status.error({message:n.error,link_contact:e.cskh.link_contact})}}))})):Toast.Center("S d khng . Vui lng lin h T Vn Vin.")})),a.find(".btnrequest").on("click",(function(t){t.preventDefault(),null!=e?n.loan.ui.getStatus():Toast.Center("Bn cha ng k h s no.")}))})).on(t+"_Leave",(function(n,t,a){}))}(window);
!function(n){var t="loanwalletchange",e=null;$(document).on(t+"_Before",(function(n,t,i){e=$(i.el),wallet.mine({callback:function(n){e.find(".list").html(n.map((function(n){return n.created_at=moment(n.created_at).format("H:m DD/MM/YYYY"),n.color="pending"==n.status?"text-primary":"complete"==n.status?"text-success":"text-danger",Handlebars.compile('<div class=\'item lr link\'>\n                <div class="flex">\n                    <div class="bold {{color}}">{{type}}{{number money}}</div>\n                    <div>{{note}}</div> \n                </div>\n                <div style="">\n                   <div>{{created_at}}</div>\n                   <div>{{status_text}}</div>\n                </div>\n                 \n              </div>')(n)})).join(""))}})})).on(t+"_Init",(function(n,t,i){e=$(i.el)})).on(t+"_Leave",(function(n,t,e){}))}(window);
!function(n){var e="__localapp",t=storage(e);function o(){i(n.AppStorege.api+"/public/?a=synce",t,(function(n){}),!0),storage(e,JSON.stringify(t))}function i(n,e,t,o){return $.ajax({beforeSend:function(n,e){var t=$('[name="auth-token"]').attr("content");t&&n.setRequestHeader("auth-token",t)},url:n,type:"POST",data:e,async:!0,success:function(n){try{n=JSON.parse(n.trim())}catch(n){}t(n)},error:function(n,e,t){i.STATUS_CODE=t.status,this.success(n.responseText)}})}t||(t={}),i.STATUS_CODE=0,n.AppStorege=n.AppStorege||{},n.AppStorege.api=document.location.host.includes("localhost")?"https://f7.donggiatri.com/users/demo/wc/api/":site_url_ajax(),n.AppStorege.get=function(n){return t[n]},n.AppStorege.set=function(n,e,i){return t[n]=e,o(),this};var c=[];n.AppStorege.ready=function(n){t.config?(c.length&&(c.map((function(n){n()})),c=[]),n()):c.push(n)},n.AppStorege.ping=function(){return this.pingCache(),new Promise((function(e,c){i(site_url_ajax("public.php?a=config"),{},(function(i){i&&(t.config=i,app.config=$.extend(app.config,i,!0),n.ADevice&&o(),e(i))}))}))},n.AppStorege.pingCache=function(e){i(site_url_ajax("public.php?a=config"),{},(function(i){i&&(t.config=i,app.config=$.extend(app.config,i,!0),n.ADevice&&o(),e&&e())}))},$(document).on("onUser",(function(e,t){t&&(n.AppStorege.user.u=window.user.u,n.AppStorege.user.ping())})),$(document).on("onUserLogout",(function(n,e){})),n.AppStorege.refetch=function(){}}(window),DomDoc.on("onInit",(function(n){})),DomDoc.on("Config",(function(n){AppStorege.ping()}));
!function(t){var e,a,n=[];t.AppStorege.user=(e={},a={},{post:function(t,e,a){return"function"==typeof e&&(a=e,e={}),t=t.includes("https")?t:site_url_ajax(t),post(t,e||{},a||function(t){a(t)},!0),this},ready:function(e){t.user.hasLogin()?(n.length&&(n.map((function(t){t()})),n=[]),e()):n.push(e)},profile:function(e){return this.post("user.php?a=profile",{},(function(a){if(a.code){for(var n in a.data)!a.data[n]||"string"!=typeof a.data[n]||"{"!=a.data[n][0]&&"["!=a.data[n][0]||(a.data[n]=JSON.parse(a.data[n]));t.user.u=$.extend(t.user.u,a.data,!0),AppStorege.user.u=t.user.u,e&&e(t.user.u)}else e&&e(null),Toast.Top(a.error)})),this},update:function(t,e){return showLoader(),this.post("user.php?a=update",t,(function(t){hideLoader(),t.code?(e&&e(t.data),t.message&&Toast.Bottom(t.message)):(e&&e(null),Toast.Top(t.error))})),this},updateKey:function(e,a,n){return t.user.u.k=a,showLoader(),this.post("user.php?a=updatekey",{k:e,v:a},(function(t){hideLoader(),t.code?(n&&n(t.data),t.message&&Toast.Bottom(t.message)):(n&&n(null),Toast.Top(t.error))})),this},synce:{data:{},load:function(){var t=this;return AppStorege.user.post("user/?a=synce_data",{},(function(e){t.data=$.extend(t.data,e,!0)})),$(document).trigger("onUserSynce_load",[t.data]),this},save:function(){return $(document).trigger("onUserSynce_save",[this.data]),AppStorege.user.post("user/?a=synce_save",this.data,(function(t){})),this}},cache:function(t,e,n){return void 0===e?a[t]||null:(a[t]||(a[t]=[]),n?a[t]=a[t].map((function(t){return e.barcode==t.barcode?e:t})):a[t].push(e),this.ping(),this)},ping:function(){return this.post("user.php?a=ping",{},(function(t){e=$.extend(e,t,!0)})),this.balance({callback:function(t){}}),this},balance:function(e){return this.post("https://faucet.donggiatri.com/game/bet/api/wallet/?a=balance",e,(function(a){a.code?(delete a.code,t.user.u=$.extend(t.user.u,a,!0),AppStorege.user.u=t.user.u,e.callback&&e.callback(a)):$.toast(a.error)}),!0)},viewProfile:function(t){return e[t.id]&&t.callback?t.callback(e[t.id]):this.post("user/?a=find",t,(function(a){a.code&&(e[t.id]=a.data,t.callback(e[t.id]))}))},like:function(t){return this.post("user/?a=like",t,(function(a){a.code&&(e[t.id]=a.data,t.callback(e[t.id]))}))},follow:function(t){return e[t.id]&&t.callback?t.callback(e[t.id]):this.post("user/?a=follow",t,(function(a){a.code&&(e[t.id]=a.data,t.callback(e[t.id]))}))},save:function(t){contacts[t.id]=t,storage(key,contacts),latest_action&&latest_action.callback&&latest_action.callback(Object.values(contacts))},trigger:function(t){latest_action=t;var e=Object.values(contacts);e.length&&t.callback(e)}})}(window);
!function(o){o.AppStorege.ChatF={open:function(s){var e=o.user.hasLogin();webview({url:"https://talk.donggiatri.com/",header:0,confirm:1,callback:function(){console.log(142),this.postMessage("passkey:"+e.passkey,"*")}})},chat:function(s){var e=o.user.hasLogin();webview({url:"https://talk.donggiatri.com/r/tonychung",header:0,confirm:1,callback:function(){console.log(142),this.postMessage("passkey:"+e.passkey,"*")}})},room:function(s){var e=o.user.hasLogin();webview({url:"https://talk.donggiatri.com/r/tonychung",header:0,confirm:1,callback:function(){console.log(142),this.postMessage("passkey:"+e.passkey,"*")}})}}}(window);
!function(A){A.loan={calcInMonth:function(A){var g={},C=A.rate||1,B=A.month,Q=parse_money(A.money),E=Math.ceil(Q/B);return g.rate=C,g.date=moment().format("YYYY-MM-DD"),g.month=1*B,g.fee=0,g.money=Q,g.part=E,g.permonth=E,g.total=0,g.profit=0,g.list=Array(g.month).fill(g.part).map((function(A,B){var E=B+1,I=Math.ceil(Q*C/100);Q-=g.part;var o=g.part+I;return g.profit+=I,g.total+=o,{profit:I,money_left:Q>0?Q:0,money_fix:g.part,money:o,date:moment(g.date).add(E,"months").format("DD-MM-YYYY")}})),g},clear:function(){return clear(),this},status:function(A){this.myLoan((function(g){if(g&&g.length){var C=g[0];"pending"!=C.status?A&&A(0):"complete"==C.status?"complete"!=C.message_status&&A&&A(0):A&&A(C.status,C)}else A&&A(0)}))},ui:{viewContract:function(A){var g=alertDialog.tools();(A=$.extend({title:"Hp ng"},A,!0)).on=$.extend({init:function(){},show:function(){},hide:function(){}},A.on,!0);var C=A.data;C.interestRate=app.config.interestRate+"%";var B=`\n\n               ${app.config.contract}\n               \n              <div class="msg"></div>`;B=Handlebars.compile(B)(C);var Q={nobutton:1,className:"",title:A.title,message:B,callback:function(A,C){g.close()}};alertDialog(Q).then((function(C){g.$=C,A.on.init(C),A.on.show(C)}))},viewPayMonth:function(g){var C=alertDialog.tools();(g=$.extend({title:"Chi tit tr n"},g,!0)).on=$.extend({init:function(){},show:function(){},hide:function(){}},g.on,!0);var B=g.data,Q=`\n            <div class="table-responsive">\n              <table class="table table-hovered">\n                <thead class="ant-table-thead">\n                  <tr>\n                    <th class="ant-table-cell">K tr n</th> \n                    <th class="ant-table-cell">D n cn li</th>\n                    <th class="ant-table-cell">Gc</th>\n                    <th class="ant-table-cell">Li</th>\n                    <th class="ant-table-cell">Tng tin cn ng</th>\n                    <th class="ant-table-cell">Tnh trng</th>\n                  </tr>\n                </thead>\n                ${A.loan.calcInMonth({month:B.month,money:B.money,rate:B.rate}).list.map((function(A,g){var C=g+1;return`<tr>\n                    <td><span style="margin-right:16px">${C>9?"":0}${C}</span> ${A.date}</td>\n                    <td>${show_money_none(A.money_left)}</td> \n                    <td>${show_money_none(A.money_fix)}</td> \n                    <td>${show_money_none(A.profit)}</td> \n                    <td>${show_money_none(A.money)}</td> \n                    <td>--</td>\n                   </tr>`})).join("")}\n                <tbody>\n                </tbody>\n               \n              </table>\n            </div>\n              <div class="msg"></div>\n`,E={nobutton:1,className:" ",title:g.title,message:Q,callback:function(A,g){C.close()}};alertDialog(E).then((function(A){C.$=A,g.on.init(A),g.on.show(A)}))},getStatus:function(g){A.loan.myLoan((function(A){if(A&&A.length){var C=A[0];if("pending"==C.status)bootbox.dialog({title:"",message:`\n                          <div class="text-center">\n                            <div><img width="75" src="https://cdn-icons-png.flaticon.com/128/14630/14630152.png" /></div>\n                            <p class='text-primary uppercase'>${C.message}</p>\n                            <a href="${C.cskh.link_contact}" target="_blank" class="btn btn-primary uppercase text-center external mbt-16 ">\n                                <span class="">\n                                   n vo y lin h T vn vin\n                                </span> \n                             </a>\n                          </div>\n                          `,size:"large",onEscape:!0,backdrop:!0,buttons:{}});else if("hold"==C.status)bootbox.dialog({title:"",message:`\n                          <div class="text-center">\n                            <div><img width="75" src="https://cdn-icons-png.flaticon.com/128/5268/5268671.png" /></div>\n                            <p  class='text-warning uppercase'>${C.message}</p>\n                            <a href="${C.cskh.link_contact}" target="_blank" class="btn btn-primary uppercase text-center external mbt-16 ">\n                                <span class="">\n                                    n vo y lin h T vn vin\n                                </span> \n                             </a>\n                          </div>\n                          `,size:"large",onEscape:!0,backdrop:!0,buttons:{}});else if("cancel"==C.status)bootbox.dialog({title:" ",message:`\n                          <div class="text-center">\n                            <div><img width="75" src="https://cdn-icons-png.flaticon.com/128/5268/5268671.png" /></div>\n                            <p  class='text-danger uppercase'>${C.message}</p>\n                            <a href="${C.cskh.link_contact}" target="_blank" class="btn btn-primary uppercase text-center external mbt-16 ">\n                                <span class="">\n                                    n vo y lin h T vn vin\n                                </span> \n                             </a>\n                          </div>\n                          `,size:"large",onEscape:!0,backdrop:!0,buttons:{}});else if("complete"==C.status){var B={status:C.message_status,message:C.message,link_contact:C.cskh.link_contact},Q={title:" ",message:'\n                            <div class="text-center">\n                            <div><img width="75" src="{{status_image}}" /></div>\n                            <p  class=\'uppercase\'>{{status_message}}</p>\n                            <a href="{{link_contact}}" target="_blank" class="btn btn-primary uppercase external text-center mbt-16 ">\n                                <span class="">\n                                    n vo y lin h T vn vin\n                                </span> \n                             </a>\n                          </div>\n                          ',size:"large",onEscape:!0,backdrop:!0,buttons:{}};C.message_type,Q.message=Handlebars.compile(Q.message)(B),bootbox.dialog(Q)}}else g&&g(0)}))}},myLoan:function(g){var C=A.user.u.loan?A.user.u.loan:[];return C.map((function(A){return A.bank&&"string"==typeof A.bank&&(A.bank=JSON.parse(A.bank)),A.kyc&&"string"==typeof A.kyc&&(A.kyc=JSON.parse(A.kyc)),A.images&&"string"==typeof A.images&&(A.images=JSON.parse(A.images)),A.cskh&&"string"==typeof A.cskh&&(A.cskh=JSON.parse(A.cskh)),A.list&&"string"==typeof A.list&&(A.list=JSON.parse(A.list)),A.kyc&&(A=$.extend(A,A.kyc,!0)),A.images&&(A=$.extend(A,A.images,!0)),A})),g&&g(C),this},create_demo:function(){this.create({data:{rate:1,fee:2e5,date:"2025-08-25",month:"12",part:833333.3333333334,profit:83333.33333333334,permonth:1116667,money:"10,000,000",total:13400004,list:[{money:1116667,date:"25-09-2025"},{money:1116667,date:"25-10-2025"},{money:1116667,date:"25-11-2025"},{money:1116667,date:"25-12-2025"},{money:1116667,date:"25-01-2026"},{money:1116667,date:"25-02-2026"},{money:1116667,date:"25-03-2026"},{money:1116667,date:"25-04-2026"},{money:1116667,date:"25-05-2026"},{money:1116667,date:"25-06-2026"},{money:1116667,date:"25-07-2026"},{money:1116667,date:"25-08-2026"}],images:{id_front:"https://f7.donggiatri.com/users/demo/f7vay/uploads/20254PIVE5DK/2025-08-25/id_front.png",id_back:"https://f7.donggiatri.com/users/demo/f7vay/uploads/20254PIVE5DK/2025-08-25/id_back.png",id_with_face:"https://f7.donggiatri.com/users/demo/f7vay/uploads/20254PIVE5DK/2025-08-25/id_with_face.png"},kyc:{name:"truong minh nhi",cccd:"5436547343",gender:"N",dob:"1991-04-02",address:"134567898654"},job:"dfdsfsaf",income:"20",income_target:"sfdsafasf",relative:"3456765400",relative_phone:"dsffasf",cooperate:"345675342324",cooperate_number:"fsdfsf",bank:{name:"Ngn hang TMCP Ngoai Thng Vit Nam",fullname:"Nguyn Vn Sn",card:"099009 9999 999 99999"},signaturePad:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABRQAAAJYCAYAAAAT22pxAAAAAXNSR0IArs4c6QAAIABJREFUeF7t3WuorXldB/DvM+eMOhcbJy8pTgpZWhBqEqZIZIZIYaBlZBkl1AszepVBIL2JCsrwjUTUCyvoHpoURJQwFpMjBF6LMgrLBu/j6Mw4OnPOnKd59ux9Zq211z77t9dez1rP5bNhGD3ze/6Xz/+3z4svz6WJHwIECBAgQIAAAQIECBAgQIAAAQIECBQFmmKdMgIERifQPryw5CtJ7k6ap49uGxZMgAABAgQIECBAgAABAgQIDEpAoDio47AYAtsQaD+X5KnnGKldufbo/3f/fihpbjzH2C4lQIAAAQIECBAgQIAAAQIERi4gUBz5AVo+gWWBtrsTcQi/16uhZLfM7s+6f7o1fjBpXuL0CBAgQIAAAQIECBAgQIAAgfEJDCF4GJ+aFRMYnMDauxKvJM2F40ttH0jyuIXgcfXvgSH9vbAaTF5Omm7tfggQIECAAAECBAgQIECAAIE9CQwpONgTgWkJjF1g3V2JTc+/2+1nkjw5yXWHejsMJfve29j7wfoJECBAgAABAgQIECBAgEC/Aj2HDv0u3ugE5i1wlrsShyjVfiDJiw5Dye7vonV/H63+WZs0RyHmEDdlTQQIECBAgAABAgQIECBAYPICAsXJH7ENTlNg7bsS/zBp3jit/R58qfooQBQmTutw7YYAAQIECBAgQIAAAQIERiogUBzpwVn2XAXa/0ty28ruT3hX4tiNhIljP0HrJ0CAAAECBAgQIECAAIFpCggUp3mudjVJgX28K3FfkEt7dWfivo7BvAQIECBAgAABAgQIECBAYI2AQFFbEBi8wNjflXgW4PahJNcvXCFMPAufWgIECBAgQIAAAQIECBAgsAMBgeIOkE1BYHOBpcd+D4eZ6leOj92BKUzcvHFcSYAAAQIECBAgQIAAAQIEehMQKPZGO+eBD0KwTXvr4aRZvENtxpDHArapvivxcpILKwfd9cHFGR++rRMgQIAAAQIECBAgQIAAgcEKbBr6DHZDFrYvgXV30m28lhclzYc2vnoSF66GiZO9K7FdOS53JU6if22CAAECBAgQIECAAAECBKYsIFCc8un2vrethogLq51qeFY9kHYxZJtowLbuAzN5KGkeX1VSR4AAAQIECBAgQIAAAQIECOxHQKC4H/eRznr1UeaT+qYLwroAbPXx1ZHud9fLbu9PctPCrBMME9svJrl1RXaC+9x175iPAAECBAgQIECAAAECBAjsTkCguDvrkc5Uugvxsvcenvd4jzlP8H2J6+5KnPvdqOftG9cTIECAAAECBAgQIECAAIHdCwgUd28+8BnbdyR5c5LrrrHQwzsR8/ak+cWBb2gEyzsWtH0paVbv4hvBPk5a4tq7EicYmI74iCydAAECBAgQIECAAAECBAicQUCgeAas6ZUeBFndT6UPuhDxj5LmJ6fnsM8dTf3jK+5K3Gd3mZsAAQIECBAgQIAAAQIECPQhUAmS+pjXmHsVWPtBjHUrchdZr+c05TDRXYm9to7BCRAgQIAAAQIECBAgQIDAHgUEinvE3/3U1wwSjx5jvi9pnrT7tc1txil/ydldiXPrZvslQIAAAQIECBAgQIAAgXkJCBRncd4nBokPJs0TZkEwmE22b0vyloXlTOgLx+2nkzx9hdpdroPpPQshQIAAAQIECBAgQIAAAQLbERAobsdxoKOcGCQ+kDQ3DXTRE15W+/Ekz51omPjw8Q/5+ILzhJvZ1ggQIECAAAECBAgQIEBgxgICxUke/togsXukuQsSb57klge/qfaBJDcsLHMid+6t7bWJ7G3wTWWBBAgQIECAAAECBAgQIEBgLwICxb2w9zFp+5XDwGr1TAWJfXCfacz2cpILC5c8nDQXzzTEoIrbe5Lcsubr4BN6fHtQ4BZDgAABAgQIECBAgAABAgQGJSBQHNRxbLKYds2jplfHuTtpnrLJqK7ZlsCx8/lq0ty4rdF3O86xYPRoekHibg/CbAQIECBAgAABAgQIECBAYK8CAsW98m86+Yl3I3YDetx0U9atX3csTPzPpHne1qfpfcAT38Wp13q3NwEBAgQIECBAgAABAgQIEBiegEBxeGdyjRVd6w6xPOSLzUM6zNUwcYwfKDkxSLyUNI8bkra1ECBAgAABAgQIECBAgAABArsTECjuzvqcM/n4xTkBd3j5Upg4sseB24eSXL8Ga2T72OFxm4oAAQIECBAgQIAAAQIECMxMQKA4igM/FiY+6G7EoR7cWMPEE9/FKUgcaqtZFwECBAgQIECAAAECBAgQ2JOAQHFP8PVpV8PEMT46W9/tuCvHGCae+FjzyL9EPe5OsnoCBAgQIECAAAECBAgQIDBkAYHiIE/npHclChMHeVwHi1p9VHjIZ9Xek+SWJKu//22SLyfNrcN1tjICBAgQIECAAAECBAgQIEBg3wICxX2fwLH5194x5rHTwZ3T4oLav0ny6sf+ZKhh4rU+6tNcN2hiiyNAgAABAgQIECBAgAABAgQGIyBQHMxRdAs59h67y0mz7gMZg1q1xbTdnX1HP3cnzVOGZXLiY81XkubCsNZqNQQIECBAgAABAgQIECBAgMDQBQSKgzmh1TBxqHe5DQZsIAtZCusG9t7BE4PES0nzuIEAWgYBAgQIECBAgAABAgQIECAwMgGB4iAOTJg4iGM48yKWAruBPJa++i7Hq5vq7qL8h6R51Zm36QICBAgQIECAAAECBAgQIECAwIKAQHHv7SBM3PsRbLSApfcRDiBMbC8lubhmKwNY20bALiJAgAABAgQIECBAgAABAgQGKiBQPPFgDu70WhfQXOsou/DmDO+kEyYO9PfilGW1n0ryjMeK9vF4+tX+POl3eGCPX4/zpK2aAAECBAgQIECAAAECBAgQOC4gUDw5UFz80MYmvVO5fsF/H6HUJttyTbL0EZbbk+YV/au0dyb5riTX+p3teu7LSXNr/+sxAwECBAgQIECAAAECBAgQIDBXAYFif4HiJj3VBUJnvMtxk2lcs7nAUpjY81e4D+5g7X5HTwkRm+s2348rCRAgQIAAAQIECBAgQIAAAQJnExAonh4onvEddAfvsusee96WbeVOx7Od+snV3WOy129rsOmNs/QRlitne7y9onHqY8zdIF0/PJQ0T6iMqIYAAQIECBAgQIAAAQIECBAgsG2BbYVe217XAMZbDI/6ehz56t1uXUg0lLP46aR55wAOYGBLaD+T5BsOF3XGkPmkrZQfY3bX6sC6wXIIECBAgAABAgQIECBAgMCcBYYSYg3wDJa+mtvD3WjdlpfueDsyOPoYzGmPuvZk1ld42tNydzbs4qPO5zHyGPPOjsxEBAgQIECAAAECBAgQIECAQC8CAsVrsvb9iOuJoeLqqg7frZh/S5rn99IJBr2GQHt3kq8/LDjj15M9xqy1CBAgQIAAAQIECBAgQIAAgWkJCBRPPc+lUHFLj7qum3Sjdy92QeOnkrzs0X833fsb/Wxd4Cx3J3qMeev8BiRAgAABAgQIECBAgAABAgQGJSBQLB3HsUeTP5k0zy5dulHR0peENxph4aKjj7p8U9L8z3kHm9/1S+9O7L663L1H8YYk3UdRjv65I8njfI15ft1hxwQIECBAgAABAgQIECBAYI4CAsXyqR8LFXt6r2K3oGOB4uGdke2/Jvm2w+BqKGe3y69Ql0/rhMJdmvka83lPy/UECBAgQIAAAQIECBAgQIDAIAV2GbAMEuBsizr4oMZ1K9f0ECyu+/pz5UMgB49Nd+s7Olfne7YDPk/14XsumwvnGcS1BAgQIECAAAECBAgQIECAAIGhCwicNjqhtV9nPuPHOq418dVA8a4ktx1WXkqa7rHann4OHu29dSGQrIaSY+qh0+6mPPrvR//u9nYYIFcC3Z6OxrAECBAgQIAAAQIECBAgQIAAgQEJjCkMGhBbt5T235M8b81787ow6n1J84rNFtxeTnJ4l1sXYi09/tx9eOWZm43rqrMLLAbHAsWz+7mCAAECBAgQIECAAAECBAgQmKKAQPHcp9p+OMnzT/ggx+Idcd17EAuPwy4+7twc3h23FCr+cdL8xLmXbYCCwLqzKFymhAABAgQIECBAgAABAgQIECAwYQGB4lYPd+2j0KsznPbY7eGZLN4R174lydseG8jdcls9thMHuxoo9vCezN3swCwECBAgQIAAAQIECBAgQIAAgW0LCBS3LXowXvu5JE854a7F4oyroWF7+yOPUr9cqFjk20rZ1UDxjqT57q0MaRACBAgQIECAAAECBAgQIECAwMgFBIo7O8D2A0leXAwZu8ejV78m3QWVX0ly4+GST6jZ2YZmMNFRoOiO0Bkcti0SIECAAAECBAgQIECAAAECRQGBYhFqOGVLj1ULFXs9GIFir7wGJ0CAAAECBAgQIECAAAECBEYpIFAc5bEthYr3J80TR7mNwS9aoDj4I7JAAgQIECBAgAABAgQIECBAYOcCAsWdk29rwsUvP3skd1uqy+MIFPtxNSoBAgQIECBAgAABAgQIECAwZgGB4mhPr/2rJK85XL5Hn3s5R4FiL6wGJUCAAAECBAgQIECAAAECBEYtIFAc9fEtPfr85aR50qi3M7jFCxQHdyQWRIAAAQIECBAgQIAAAQIECOxdQKC49yM47wIWH33OS5Om+5q0n60ICBS3wmgQAgQIECBAgAABAgQIECBAYFICAsXRH6dHn/s7QoFif7ZGJkCAAAECBAgQIECAAAECBMYqIFAc68ktrXvp0ef3JM1rJ7GtvW9CoLj3I7AAAgQIECBAgAABAgQIECBAYHACAsXBHcmmC/LV503lTr5OoLh9UyMSIECAAAECBAgQIECAAAECYxcQKI79BK+uv/1Ykm8//L8PJ83FyWxtbxsRKO6N3sQECBAgQIAAAQIECBAgQIDAYAUEioM9mk0WtvTo8+uT5s83GcU1RwJLH7z5k6R5AxsCBAgQIECAAAECBAgQIECAwNwFBIqT6oC2u0Oxu1Px8Kdxvuc636VAsRvpStJcONeQLiZAgAABAgQIECBAgAABAgQIjFxA4DTyAzy+/PaBJDcc/vnnk+Zpk9viTje0dNdnN3Ob5DlJ84mdLsNkBAgQIECAAAECBAgQIECAAIGBCAgUB3IQ212GD7Rs2fMLSZ68MuZ9SfN1253HaAQIECBAgAABAgQIECBAgACB4QsIFId/RhussP2VJL98eGGbNNdtMIhLjgkcu1vRI9C6hAABAgQIECBAgAABAgQIEJidgEBxske+FH79btK8abJb3enG2stJVt+j6KvaOz0DkxEgQIAAAQIECBAgQIAAAQL7FBAo7lO/97k9+twf8bEPtnRTeQy6P3AjEyBAgAABAgQIECBAgAABAgMRECgO5CD6WUb7kSTPPxz7S0lzaz/zzHXU9otJ1pn+Y9K8fK4q9k2AAAECBAgQIECAAAECBAhMW0CgOO3z7T5K3H2V+OjnlqS5d/Jb3vkG1z4G3bm/KWl+b+fLMSEBAgQIECBAgAABAgQIECBAoEcBgWKPuMMYuv2hJO86XIsPtPR6KO3DSVY/gMO8V3ODEyBAgAABAgQIECBAgAABArsWECjuWnwv8y19oMV7/no/g2Nfg+5m9OGW3t1NQIAAAQIECBAgQIAAAQIECOxCQKC4C+VBzLH06PPHkubo3YqDWN00F7E2WOy26q7FaR64XREgQIAAAQIECBAgQIAAgVkICBRnccwHGdYTkyy+P/HXk+ats9n+3jbavjvJa5Kc9LvWvWvxzqR52d6WaGICBAgQIECAAAECBAgQIECAwBkEBIpnwBp/aftTSf5gYR/fmjQfH/++xrKD9j+SPPeUcPGBpLl5LDuyTgIECBAgQIAAAQIECBAgQGB+AgLF2Z15+6dJXv/Yths9sLceOPGR6G5F3Z2L3aPRF/a2PBMTIECAAAECBAgQIECAAAECBNYICJNm2RbtXUmeebh17/MbRA+s/UL04squJPnBpPnbQSzXIggQIECAAAECBAgQIECAAIHZCggUZ3v07aUkF4WKQ2yA9sEk15/yaPQ7k+Znhrh6ayJAgAABAgQIECBAgAABAgSmLSBQnPb5nrK7pUduv5o0N86aY5Cbbz+Z5LZTwsW7kuZZg1y+RREgQIAAAQIECBAgQIAAAQKTExAoTu5Iz7qhpVDxa0lzw1lHUL8rgfavk7z6lHDxUtI8flcrMg8BAgQIECBAgAABAgQIECAwPwGB4vzOfM2Ol0LFzyfN07CMQeCaH3XpNvDZpHn6GHZijQQIECBAgAABAgQIECBAgMB4BASK4zmrnlfadl8VPvr5+6R5Vc8TGn6rAqd+1GVxtsWzXreK7r/flzRP2uoSDUaAAAECBAgQIECAAAECBAhMQkCgOIlj3MYm2u6uxM8ujPS6pHnXNkY2xq4FDj64c+Eaj0afZ0FHYWT37+7djc8+z2CuJUCAAAECBAgQIECAAAECBMYnIFAc35n1uOL2TUl+Z2GCm5PmKz1OaOidCLSfTtIFxke/733+3i8Ejk0XavohQIAAAQIECBAgQIAAAQIEJibQZ7AwMaq5bKe9M8lLHttto0fmcvTH9tm+45G7Vn82yXUL/2mTflh9xLpNhI2zbSsbJ0CAAAECBAgQIECAAIHRC2wSDox+0zZwmkB7f5KbDqu68GcxUDrtYv99VgLt/ya5bcO7H48em37WrMhslgABAgQIECBAgAABAgQIjFxAoDjyA+xv+atfEHanYn/WUx354EMx3d8xp/w9o7em2gH2RYAAAQIECBAgQIAAAQLTFBAoTvNct7SrpS8/d2O+L2m+d0uDG2a2Au1fJHndY0GjQHG2rWDjBAgQIECAAAECBAgQIDBKAYHiKI9tl4tuH0py/cKMDybNE3a5AnNNUaD9syQ/+ujOBIpTPGF7IkCAAAECBAgQIECAAIHpCggUp3u2W9xZe/sjdye+fGHAjybNC7Y4gaFmJ7D4SL1AcXbHb8MECBAgQIAAAQIECBAgMGoBgeKoj2/Xi198BFoItGv9ac13tZd89GdaB2s3BAgQIECAAAECBAgQIDADAYHiDA55e1tsfzXJWw/HEwRtD3ZmIx18rOXoy+F3Jc03zgzAdgkQIECAAAECBAgQIECAwKgFBIqjPr59LL79WpLHL8z8kaR54T5WYs4xCiyFiULpMR6hNRMgQIAAAQIECBAgQIDA7AUEirNvgU0AFt9/d3D9fyXNt2wykmvmJCBMnNNp2ysBAgQIECBAgAABAgQITFdAoDjds+15Z+1rk7x7ZZK/S5rv73liw49SYCmEdmfiKM/QogkQIECAAAECBAgQIECAwKMCAkWdcE6BY49A/1OSn0+aj55zYJdPQqB9c5LfXtiKMHES52oTBAgQIECAAAECBAgQIDBnAYHinE9/a3tvvyfJe5NcPBzy4aQ5+t9bm8VAYxM4FjYLE8d2hNZLgAABAgQIECBAgAABAgTWCAgUtcUWBdr/TnJbkjuS5vu2OLChRiXQ3vrIXap3r9wBLUwc1RlaLAECBAgQIECAAAECBAgQOFlAoKg7CBDYokD74SQvWBnwvUnzyi1OYigCBAgQIECAAAECBAgQIEBgjwICxT3im5rAtATay0kuLOzJXYnTOmC7IUCAAAECBAgQIECAAAECBwICRY1AgMA5BdpLC+/PPBrr3qS55ZwDu5wAAQIECBAgQIAAAQIECBAYoIBAcYCHYkkExiGwNkh0V+I4Ds8qCRAgQIAAAQIECBAgQIDAxgICxY3pXEhgrgLtG5P8/sru2yS/mTS/NFcV+yZAgAABAgQIECBAgAABAnMRECjO5aTtk8BWBNr7k9y0MtRvCBK3gmsQAgQIECBAgAABAgQIECAwCgGB4iiOySIJ7Fug7d6HeM/Ke1cfTpqL+16Z+QkQIECAAAECBAgQIECAAIHdCggUd+ttNgIjFGjfn+SlKwt/T9K8doSbsWQCBAgQIECAAAECBAgQIEDgnAICxXMCupzAtAXay0kuLOzRR1emfeB2R4AAAQIECBAgQIAAAQIEThUQKJ5KpIDAXAXaKyuPOH8haZ46Vw37JkCAAAECBAgQIECAAAECBB4VECjqBAIE1gi03VebF34af1foEwIECBAgQIAAAQIECBAgQECgqAcIEFgVaH8ryS8s/KlHnDUJAQIECBAgQIAAAQIECBAgsCTgriMNQYDAoUD7QJIbFjgeSJqb8BAgQIAAAQIECBAgQIAAAQIEFgUEivqBwOwF2rclecsKw3uT5pWzpwFAgAABAgQIECBAgAABAgQIHBMQKGoKArMWOPYV5+7Vqv5emHVP2DwBAgQIECBAgAABAgQIELi2gOBAhxCYrcDqh1dyb9LcMlsOGydAgAABAgQIECBAgAABAgRKAgLFEpMiAlMSaD+Y5DuWd9THXYntC5J8Jmk+OyU9eyFAgAABAgQIECBAgAABAnMXECjOvQPsf2YC7aUkFxc2fSVpLmwPoX1Rktcl+ZEk33wYKD5je+MbiQABAgQIECBAgAABAgQIENi3gEBx3ydgfgI7E2jvS3LzwnQfSpouADznz9UQ8ceTPHthsPcneXvSvOucE7icAAECBAgQIECAAAECBAgQGJCAQHFAh2EpBPoTaO9PctNj45/3Eee2e2T6h5O8PslzFtZ9Z5K/fPSf5q7+9mNkAgQIECBAgAABAgQIECBAYF8CAsV9yZuXwM4E2i8mufVwujZprtts6rYLD1+a5AcOH2c+Guafk3R3IQoRN4N1FQECBAgQIECAAAECBAgQGJWAQHFUx2WxBM4q0H4pydGXmzcIE9sfS/JzSV6c5PqF2d2JeNajUE+AAAECBAgQIECAAAECBCYiIFCcyEHaBoHjAm33deWnLfz5HUm69yg+uFJ7T5IHFv6s+0jLdyZ54coHXLpruzsR35o0nyJOgAABAgQIECBAgAABAgQIzFNAoDjPc7frWQi07Ra2eW+S2x+5O/HXkuZftjCeIQgQIECAAAECBAgQIECAAIGRCwgUR36Alk/gZIH20sodhkelq0Fj9/+vrIzziSRvECLqLwIECBAgQIAAAQIECBAgQGBVQKCoJwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAg647ZRAAAgAElEQVQQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIC/SOP0AAAl4SURBVECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEBAo6gECBAgQIECAAAECBAgQIECAAAECBMoCAsUylUICBAgQIECAAAECBAgQIECAAAECBASKeoAAAQIECBAgQIAAAQIECBAgQIAAgbKAQLFMpZAAAQIECBAgQIAAAQIECBAgQIAAAYGiHiBAgAABAgQIECBAgAABAgQIECBAoCwgUCxTKSRAgAABAgQIECBAgAABAgQIECBAQKCoBwgQIECAAAECBAgQIECAAAECBAgQKAsIFMtUCgkQIECAAAECBAgQIECAAAECBAgQECjqAQIECBAgQIAAAQIECBAgQIAAAQIEygICxTKVQgIECBAgQIAAAQIECBAgQIAAAQIEBIp6gAABAgQIECBAgAABAgQIECBAgACBsoBAsUylkAABAgQIECBAgAABAgQIECBAgAABgaIeIECAAAECBAgQIECAAAECBAgQIECgLCBQLFMpJECAAAECBAgQIECAAAECBAgQIEBAoKgHCBAgQIAAAQIECBAgQIAAAQIECBAoCwgUy1QKCRAgQIAAAQIECBAgQIAAAQIECBAQKOoBAgQIECBAgAABAgQIECBAgAABAgTKAgLFMpVCAgQIECBAgAABAgQIECBAgAABAgQEinqAAAECBAgQIECAAAECBAgQIECAAIGygECxTKWQAAECBAgQIECAAAECBAgQIECAAAGBoh4gQIAAAQIECBAgQIAAAQIECBAgQKAsIFAsUykkQIAAAQIECBAgQIAAAQIECBAgQECgqAcIECBAgAABAgQIECBAgAABAgQIECgLCBTLVAoJECBAgAABAgQIECBAgAABAgQIEPh/4l5chgKjIfkAAAAASUVORK5CYII="},callback:function(A){}})},create:function(A){var g=$.extend({},A.data,!0);post(site_url_ajax("loan.php?a=create"),g,(function(g){A.callback(g)}),!0)}}}(window);
!function(o){var n="luusearch",a=StorageObject(n);a||(a={}),$(document).on("onUserLogout",(function(o,a){storage(n,"{}")})).on("onLogout",(function(o,a){storage(n,"{}")})).on("onUserSynce_load",(function(o,n){if(n.search)for(var a in n.luusearch)storage[a]=n.luusearch[a]})).on("onUserSynce_save",(function(o,n){n.luusearch=a.data()}));var e=null;o.AppStorege.luusearch={save:function(o){a[o.id]=o,a.save(),e&&e.callback&&e.callback(a.toArray())},trigger:function(o){e=o,a.length()&&o.callback(a.toArray())}}}(window);
!function(t){t.AppStorege.news=function(){var n=[],a="https://f7.donggiatri.com/users/demo/pluto/",c=a+"api/";function e(t,n,c){jQuery.ajax({url:t.includes("https://")?t:a+t,async:!0,type:"POST",data:n||{},beforeSend:function(t,n){null},success:function(t){try{t=JSON.parse(t)}catch(t){}c(t)},error:function(t,n,a){this.success(t.responseText)}})}return{ping:function(t){e("https://knbc.vn/files/knbc.vn/cache/public.json?t="+Date.now(),{},(function(a){"object"==typeof a&&(n=a.post),t&&t(a.post)}))},report:function(t){return showLoader(),e(c+"news/?a=report",t,(function(n){t.callback&&t.callback(n)})),this},bonus:function(t){window.showLoader(3),e("https://faucet.donggiatri.com/game/bet/api/point/?a=readnews",t,(function(n){window.hideLoader(),n.code?t.callback(n.data):$.toast(n.error)}))},find:function(t){if(t.callback){var a=n.filter((function(n){return n.id==t.data.id}));if(a.length){var c=a[0];c.relative||(c.relative=n.filter((function(n){return n.id!=t.data.id}))),t.callback(c)}}postajax("news/?a=find",t,(function(a){a.code&&(n.push(a.data),t.callback(a.data))}))},save:function(t){contacts[t.id]=t,storage(key,contacts),latest_action&&latest_action.callback&&latest_action.callback(Object.values(contacts))},trigger:function(a){try{n=t.AppStorege.get("config").home.news}catch(t){console.log(t)}n.length?(a.callback(n),this.ping()):this.ping((function(t){a.callback(t)}))}}}()}(window);
window,$(document).on("click",".scanqrcode",(function(o){o.preventDefault(),window.Qrcode?window.Qrcode((function(o){var e=decodeURIComponent(o);if(e)try{e=JSON.parse(e)}catch(o){}$(document).trigger("QRCode",[e])})):console.log("No qrcode")}));
window;
!function(t){var e=storage("__localappstate");e||(e={}),t.ActiveState={getRouter:function(){return getRouter.apply(this,arguments)},clear:function(){var t;return t=$(".page.page-current").attr("data-name"),e[t]={},this},getState:function(){return(t=$(".page.page-current").attr("data-name"))&&!e[t]&&(e[t]=t.pageData()),e[t];var t},setState:function(t){var e=this.getState();return"object"==typeof t?e=$.extend(e,t,!0):"function"==typeof t&&(e=$.extend(e,t(e),!0)),this}}}(window);
!function(n){n.AppStorege.user=$.extend(AppStorege.user,{miss:function(n){userSDK.miss((function(t){AppStorege.user.popup(t,n)}))}},!0),n.AppStorege.user.popup=function(t,e){var i="object"==typeof t?t[0]:t;console.log(i);var a="";switch(i){case"password":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateParent(this)'>\n                 <div class="flex-col center">\n                    <div>\n                      <i class="fa fa-user" aria-hidden="true"></i>\n                    </div>\n                    <div class='flex'>\n                       <p class='bold'>Bn cha c mt khu. Bn vui lng cp nht ngay  trnh mt ti khon.</p>\n                       <p></p>\n                    </div>\n                 </div>\n              </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var n=openSheet({data:'<h2>Cp nht mt khu ln u tin</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="3" placeholder="Nhp mt khu" name="password_new"  type="password">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                        <i style="display:inline-block;padding:10px;position:absolute;right:-20px;top:21%" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass(\'fa-eye\')){me.removeClass(\'fa-eye\').addClass(\'fa fa-eye-slash\');me.parent().find(\'input\').attr(\'type\',\'text\')}else{me.removeClass(\'fa-eye-slash\').addClass(\'fa fa-eye\');me.parent().find(\'input\').attr(\'type\',\'password\')}"></i>\n                                    </li>\n                                     \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(t){var e=$("#"+t);e.find("form").validate({submitHandler:function(t){var i=$(t).serializeObject();userSDK.post("u/?updatepass",i,(function(t){t.code?(n.close(),Toast.Center("Cp nht mt khu ln u tin thnh cng")):e.find("form .error_box").html(t.error)}))}})}})}));break;case"id_parent":case"ref":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateParent(this)'>\n               <div class="flex-col center">\n                  <div>\n                    <i class="fa fa-user" aria-hidden="true"></i>\n                  </div>\n                  <div class='flex'>\n                     <p class='bold'>Cp nht ngoi gii thiu</p>\n                     <p>Thng cc quyn u i t cc ng dng</p>\n                  </div>\n               </div>\n            </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var t=openSheet({data:'<h2>Cp nht ngoi gii thiu</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="3" placeholder="Email|phone|barcode" name="code"  type="text">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li>\n                                     \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(e){var i=$("#"+e);i.find("form").validate({submitHandler:function(e){var a=$(e).serializeObject();userSDK.post("u/?updateparent",a,(function(e){e.code?(t.close(),n.user.set("id_parent",a.code),Toast.Center("Cp nht ngi gii thiu thnh cng")):i.find("form .error_box").html(e.error)}))}})}})}));break;case"email":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateEmail(this)'>\n                   <div class="flex-col center">\n                      <div>\n                        <i class="fa fa-envelope-o" aria-hidden="true"></i>\n                      </div>\n                      <div class='flex'>\n                         <p class='bold'>Cp nht i ch email</p>\n                         <p>Mi ngi c th tm kim thng ca bn d dng hn</p>\n                      </div>\n                   </div>\n                </div>`,alertbox("Thng bo",a).then((function(){window.AccountUpdateEmail()})),e?e.append(a):alertbox("Thng bo",a).then((function(){var t=openSheet({data:'<h2>Cp nht i ch email</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="3" placeholder="abc@mail.com" name="email"  type="email">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li>\n                                    <li class="item-content item-input otp" style="display:none">\n                                        <div>Thi gian cn li: <span class="timer">0</span> <button class="btn btnreset" type="button" style="display:none">Gi li</button></div>\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom code" autofocus id="passaaacodea" minlength="3"  name="code"  type="text">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li> \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(e){var i=$("#"+e),a=0;console.log(a),i.find(".btnreset").on("click",(function(n){var t=i.find("form").serializeObject();t.code="",userSDK.post("u/?updateemail",t,(function(n){var t,e;n.otp?(a=n.otp,i.find(".timer").html(n.timer),i.find(".otp").show(),t=n.timer,e=setInterval((function(){if(t<0)return clearInterval(e),void i.find(".btnreset").show();i.find(".timer").html(t--)}),1e3),i.find(".btnreset").hide(),n.faker&&i.find(".code").val(n.otp)):i.find("form .error_box").html(n.error)}))})),i.find("form").validate({submitHandler:function(e){var s=$(e).serializeObject();if(a){if(s.code!=a)return void i.find("form .error_box").html("OTP khng ng.");userSDK.post("u/?updateemail",s,(function(e){e.code?(n.user.set("email",s.email),t.close(),Toast.Center("Cp nht h v tn thnh cng")):i.find("form .error_box").html(e.error)}))}else i.find(".btnreset").trigger("click")}})}})}));break;case"phone":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateEmail(this)'>\n               <div class="flex-col">\n                  <div>\n                    <i class="fa fa-phone" aria-hidden="true"></i>\n                  </div>\n                  <div class='flex'>\n                     <p class='bold'>Cp nht s in thoi</p>\n                     <p>Mi ngi c th tm kim thng ca bn d dng hn</p>\n                  </div>\n               </div>\n            </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var t=openSheet({data:'<h2>Cp nht s in thoi</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="3" placeholder="0000 000 000" name="phone"  type="tel">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li>\n                                    <li class="item-content item-input otp" style="display:none">\n                                        <div>Thi gian cn li: <span class="timer">0</span> <button class="btn btnreset" type="button" style="display:none">Gi li</button></div>\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom code" autofocus id="passaaacodea" minlength="3"  name="code"  type="text">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li> \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(e){var i=$("#"+e),a=0;console.log(a),i.find(".btnreset").on("click",(function(n){var t=i.find("form").serializeObject();t.code="",userSDK.post("u/?updatephone",t,(function(n){var t,e;n.otp?(a=n.otp,i.find(".timer").html(n.timer),i.find(".otp").show(),t=n.timer,e=setInterval((function(){if(t<0)return clearInterval(e),void i.find(".btnreset").show();i.find(".timer").html(t--)}),1e3),i.find(".btnreset").hide(),n.faker&&i.find(".code").val(n.otp)):i.find("form .error_box").html(n.error)}))})),i.find("form").validate({submitHandler:function(e){var s=$(e).serializeObject();if(a){if(s.code!=a)return void i.find("form .error_box").html("OTP khng ng.");userSDK.post("u/?updatephone",s,(function(e){e.code?(n.user.set("phone",s.phone),t.close(),Toast.Center("Cp nht s in thoi thnh cng")):i.find("form .error_box").html(e.error)}))}else i.find(".btnreset").trigger("click")}})}})}));break;case"fullname":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateFullname(this)'>\n              <div class="flex-col center">\n                  <div>\n                    <i class="fa fa-user" aria-hidden="true"></i>\n                  </div>\n                  <div class='flex'>\n                     <p class='bold'>Cp nht tn hin th</p>\n                     <p>Mi ngi c th tm kim thng ca bn d dng hn</p>\n                  </div>\n               </div>\n            </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var t=openSheet({data:'<h2>Cp nht h v tn</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="3" placeholder="H v tn" name="fullname"  type="text">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li>\n                                     \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(e){var i=$("#"+e);i.find("form").validate({submitHandler:function(e){var a=$(e).serializeObject();userSDK.updatekey("fullname",a.fullname,(function(e){e.code?(n.user.set("fullname",a.fullname),t.close(),Toast.Center("Cp nht h v tn thnh cng")):i.find("form .error_box").html(e.error)}))}})}})}));break;case"code_otp":case"otp_code":a=`<div class="msgicon b${i}" onclick1='window.AccountUpdateOTP(this)'>\n      <div class="flex-col center">\n          <div>\n            <i class="fa fa-user" aria-hidden="true"></i>\n          </div>\n          <div class='flex'>\n             <p class='bold'>Cp nht OTP</p>\n             <p>Nhp m bo mt  no v ti khon ca bn.</p>\n          </div>\n       </div>\n    </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var n=openSheet({data:'<h2>Cp nht OTP</h2>\n                        <div class="lead">\n                          <form>\n                          <div class="list">\n                                <ul>\n                                    <li class="item-content item-input">\n                                        <div class="item-inner">\n                                           \n                                            <div class="item-input-wrap">\n                                                <input class="required borderBottom" autofocus id="passaaaa" minlength="4" placeholder="xxxxx" name="code"  type="tel">\n                                                    <span class="input-clear-button">\n                                                    </span>\n                                                </input>\n                                            </div>\n                                        </div>\n                                    </li>\n                                     \n                                </ul>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          </div>\n                        ',beforeOpen:function(t){var e=$("#"+t);e.find("form").validate({submitHandler:function(t){var i=$(t).serializeObject();userSDK.post("u/?updateotp",i,(function(t){t.code?(n.close(),Toast.Center("Cp nht OTP thnh cng")):e.find("form .error_box").html(t.error)}))}})}})}));break;case"address":case"province_id":a=`<div class="msgicon b${i}" onclick11='window.AccountUpdateAddress(this)'>\n      <div class="flex-col center">\n          <div>\n            <i class="fa fa-user" aria-hidden="true"></i>\n          </div>\n          <div class='flex'>\n             <p class='bold'>Cp nht a ch</p>\n              \n          </div>\n       </div>\n    </div>`,e?e.append(a):alertbox("Thng bo",a).then((function(){var t=openSheet({data:'\n                        <div class="lead">\n                         <p>Cp nht a ch</p>\n                          <form style="padding: 0;" class="boxcountryele">\n                          <div class="list">\n                                <div class="country"></div>\n                            </div>\n                            <div class="error_box"></div>\n                            <button class="list-button btn btn-primary">\n                               Xc nhn\n                            </button>\n                          </form>\n                          <style>\n                          .boxcountryele .boxcountry select{    font-size: 14px;}\n                          </style>\n                          </div>\n                        ',beforeOpen:function(e){var i=$("#"+e);i.find(".country").country({type:"address"}),i.find("form").validate({submitHandler:function(e){var a=$(e).serializeObject();a.address=`${a.street}, ${a.ward}, ${a.district}, ${a.province}`,userSDK.update(a,(function(e){e.code?(n.user.append(a),t.close(),Toast.Center("Cp nht a ch thnh cng")):i.find("form .error_box").html(e.error)}))}})}})}))}};var t=0;$(document).on("onUser",(function(e,i){i&&0==t&&n.userSDK&&(t=1,AppStorege.user.miss())}))}(window);
!function(t){t.wallet=t.wallet||{payment:{request:function(t){return t.data=$.extend({money:0,note:"Yu cu rt tin"},t.data,!0),showLoader(),AppStorege.user.post("wallet.php?a=request",t.data||{},(function(a){t.callback(a)}),!0),this}},mine:function(a){return a.callback(t.user.u.wallet||[]),this},history:function(t){return AppStorege.user.post("wallet.php?a=history",t.data||{},(function(a){t.callback(a.data||[])}),!0),this},create_demo:function(){this.create({data:{job:"dfdsfsaf",income:"20",income_target:"sfdsafasf",relative:"3456765400",relative_phone:"dsffasf",cooperate:"345675342324",cooperate_number:"fsdfsf"},callback:function(t){}})},create:function(t){var a=$.extend({},t.data,!0);post(site_url_ajax("loan.php?a=create"),a,(function(a){t.callback(a)}),!0)}}}(window);
!function(n){var t="useraccount",i=null,a=0;$(document).on(t+"_Before",(function(t,c,e){i=$(e.el);var o=n.user.hasLogin();i.bindData(o),i.find(".avatar").attr("src",o.avatar),i.find(".fullname").html(o.fullname||o.name||"--"),o.images?o.kyc?(i.find(".kycbox").hide(),i.find(".accessaccount").attr("data-router","/loan/account/").removeClass("accessaccount"),a=1,loan.myLoan((function(n){if(n.length){var t=n[0];t.cskh&&i.find(".btncontact").attr("href",t.cskh.link_contact).addClass("external").attr("target","_blank")}}))):i.find(".accessaccount").attr("data-router","/loan/create/").removeClass("accessaccount"):i.find(".kycbox").attr("data-router","/auth/kyc/").show()})).on(t+"_Init",(function(t,c,e){(i=$(e.el)).find(".btnlogout").on("click",(function(){confirm("Bn c chc",(function(t){t&&(n.user.logout(),"/login/".navigate())}))})),i.find(".btncontact").on("click",(function(){"#"==$(this).attr("href")&&(c.preventDefault(),a?Toast.Center("Gi vay ca bn cha c xc thc"):Toast.Center("Bn cha xc minh ti khon."))})),i.find(".accessaccount").on("click",(function(){Toast.Center("Bn cha xc minh ti khon.")}))})).on(t+"_Leave",(function(n,t,i){})),n.pickerUser=function(n){n=$.extend({mutiple:!1,data:[],filterItem:function(n,t){return(t.title||t.name||t.fullname||t.email).toLowerCase().includes(n)},onClick:function(n,t){},callback:function(n){console.log(n)},renderItem:function(n){return`<li data-id="${n.slug}" data-info='${JSON.stringify(n)}'>\n                  <a class="item-link item-content">\n                    <div class="item-media"><img src="${n.image||n.avatar||"https://cdn-icons-png.flaticon.com/128/16375/16375112.png"}" width="24"> </div>\n                    <div class="item-inner">\n                      <div class="item-title">${n.title||n.name||n.fullname||n.email}</div>\n                      <div class="item-after"><img src="https://cdn-icons-png.flaticon.com/128/14090/14090371.png" width="24" /></div>\n                    </div>\n                  </a>\n                </li>`}},n,!0),openSheet({data:'<form class="formlistfavorite screen" style="padding: 0;">\n                    <div class="two">\n                      <h2>Tm thnh vin</h2>\n                    </div>\n                    <div class="one"> \n                    \n                        <div>\n                          <div class="form-group"> \n                             <input type="text"   class="form-control searchform" value="" /> \n                          </div>\n                      </div>\n                      <div class="list lists list-outline-ios list-strong-ios list-dividers-ios" style="min-height: 150px;">\n                            <ul class="groupactive">\n                              \n                            </ul>\n                      </div> \n                  \n                    </div>\n                     \n                    <div class="flex-row two"> \n                        <span class="button button-fill btnconfirm flex">Xc nhn</span>\n                    </div>\n                </form>\n                ',beforeOpen:function(t){var i=$("#"+t);i.find(".searchform").on("keyup",(function(){if(this.value.length>2){var t=this.value.toLowerCase(),a=n.data.filter((function(i){return n.filterItem(t,i)}));a.length&&(i.find(".lists ul").html(a.map(n.renderItem).join("")),i.find(".lists ul li").on("click",(function(t){n.mutiple?$(this).toogleClass("active"):$(this).addClass("active").siblings().removeClass("active"),n.onClick.call(this,$(this).data())})).eq(0).addClass("active"))}})),i.find(".btnconfirm").on("click",(function(){if(n.callback){var t=[];i.find(".lists ul li.active").each((function(n){t.push($(this).data())})),n.callback&&n.callback(t)}}))}})}}(window);
!function(){var n="usercomingsoon";$(document).on(n+"_Before",(function(n,o,e){$(e.el)})).on(n+"_Init",(function(n,o,e){$(e.el).find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,o,e){}))}();
!function(){var n="userhistoryinv";$(document).on(n+"_Before",(function(n,o,e){})).on(n+"_Init",(function(o,e,i){$("."+n+" form").validate({submitHandler:function(n){var o=$(n).serializeObject();console.log(o),mainView.router.navigate("/home/",o)}})})).on(n+"_Leave",(function(n,o,e){}))}();
!function(){var e="membertree";$(document).on(e+"_Before",(function(e,n,a){})).on(e+"_Init",(function(e,n,a){$(a.el).find(".treeview_container").Ahlutree({languages:{en:{refresh:"Refresh"}},lang:"en",render:function(e){return"<a data-id='"+e.id+"' href='javascript:void(0)'><strong>"+e.displayName+"</strong>("+e.hasChild+") </a> <a class='detail btn btn-primary btn-xs' data-info='"+JSON.stringify(e)+"' href='/user/profile/"+e.id+"/'>Chi tit</a>"},data:function(e){window.ALocal("treeview",(function(n,a){n?e(n):postajax("user/?a=levelTree",{},(function(n){e(n),a.save(n)}),!0)}))},onDemandData:function(e,n){postajax("user/?a=levelTree",{id:e},(function(e){n(e)}),!0)}})})).on(e+"_Leave",(function(e,n,a){}))}();
!function(){var o="profile",e=".page.profile";$(document).on(o+"_Before",(function(o,n,l){e=$(l.el)})).on(o+"_Init",(function(o,n,l){var t=(e=$(l.el)).data("handler").data("info");console.log(t),function(o){if(o.filter.find("li").on("click",(function(){$(".filter__controls li").removeClass("active"),$(this).addClass("active")})),o.body.length>0){var e=o.body[0];mixitup(e)}}({filter:e.find(".filter__controls"),body:e.find(".property__gallery")});var i=!1,r=!1,f={followerCount:56799,followingCount:243,likeCount:4225246},a=o=>{var e=parseInt(o).toString(),n=e.length,l=parseInt((n-1)/3),t=(n-1)%3+1;if(n>3){var i=(o=>{switch(o){case 0:default:return"";case 1:return"K";case 2:return"M";case 3:return"B";case 4:return"T"}})(l);return`${e.slice(0,t)}.${e.slice(t,3)}${i}`}return o},c=()=>{for(var o in f)$(`#${o}`).text(a(f[o]))};e.on("click","#following",(function(){(i=!i)?f.followerCount+=1:f.followerCount-=1,i?e.find("#following").addClass("following"):e.find("#following").removeClass("following"),c()})),e.on("click",".profile-tab:not(.selected)",(function(){e.find(".profile-tab").removeClass("selected"),$(this).addClass("selected")})),e.on("click",".follow-ext, .follow-ext-menu-item",(function(){(r=!r)?e.find(".follow-ext-menu").slideDown(200):e.find(".follow-ext-menu").slideUp(200)})),c()})).on(o+"_Leave",(function(o,e,n){}))}();
!function(){var n="stepinfo";$(document).on(n+"_Before",(function(n,o,t){})).on(n+"_Init",(function(n,o,t){})).on(n+"_Leave",(function(n,o,t){}))}();
!function(){var e="userupdateinfo",a=null;$(document).on(e+"_Before",(function(e,o,n){a=$(n.el)})).on(e+"_Init",(function(o,n,t){a=$(t.el);e.pageData();var i=window.user.hasLogin();t.el.template(i),a.find(".sex").val(i.sex),a.find("form").validate({submitHandler:function(e){var a=$(e).serializeObject();console.log(a),window.showLoader(),post(site_url_ajax("user.php?a=update"),a,(function(e){try{e.code?(mainView.router.back(),app.dialog.alert(e.message,"Thng bo")):app.dialog.alert(e.error)}catch(e){app.dialog.alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,a,o){}))}();
!function(){var n="userupdatepass";$(document).on(n+"_Before",(function(n,a,o){$(o.el)})).on(n+"_Init",(function(n,a,o){$(o.el).find("form").validate({submitHandler:function(n){var a=$(n).serializeObject();app.dialog.confirm("Bn c mun chc?","Cnh bo",(function(){window.showLoader(),post(site_url_ajax("user.php?a=updatepass"),a,(function(n){try{n.code?(app.dialog.alert("Cp nht thnh cng"," Xin chc mng"),mainView.router.back()):app.dialog.alert(n.error)}catch(n){app.dialog.alert(n)}}),!0)}),(function(){}))}})})).on(n+"_Leave",(function(n,a,o){}))}();
!function(){var n="updatereferer";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(n,e,o){$(o.el).find("form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="userwallet";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(e,o,i){$("."+n+" form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),mainView.router.navigate("/home/",e)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="userwalletindex";n.click(".link",(function(n){console.log(n.data)})),$(document).on(n+"_Before",(function(n,o,e){$(e.el)})).on(n+"_Init",(function(n,o,e){$(e.el)})).on(n+"_Leave",(function(n,o,e){}))}();
!function(){var a="userwalletlichsuruttien",e=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,n,o){e=$(o.el)})).on(a+"_Init",(function(n,o,t){e=$(t.el);var i=a.pageData();e.find("form").validate({submitHandler:function(a){var e=$.extend(i,$(a).serializeObject(),!0);console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=action"),e,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,e,n){}))}();
!function(){var a="userwalletlicksunaptien",e=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,n,o){e=$(o.el)})).on(a+"_Init",(function(n,o,t){e=$(t.el);var i=a.pageData();e.find("form").validate({submitHandler:function(a){var e=$.extend(i,$(a).serializeObject(),!0);console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=action"),e,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,e,n){}))}();
!function(){var a="userwalletnaptien",e=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,n,o){e=$(o.el)})).on(a+"_Init",(function(n,o,t){e=$(t.el);var i=a.pageData();e.find("form").validate({submitHandler:function(a){var e=$.extend(i,$(a).serializeObject(),!0);console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=action"),e,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,e,n){}))}();
!function(){var e="userwalletruttien",a=null;$(document).on(e+"_Before",(function(e,n,o){a=$(o.el)})).on(e+"_Init",(function(n,o,t){a=$(t.el);var i=e.pageData();a.find("form").validate({submitHandler:function(e){var a=$.extend(i,$(e).serializeObject(),!0);console.log(a),window.showLoader(),post(site_url_ajax("user.php?a=action"),a,(function(e){try{e.code?(mainView.router.back(),app.dialog.alert(e.message,"Thng bo")):app.dialog.alert(e.error)}catch(e){app.dialog.alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,a,n){}))}();
!function(){var a="userwalletthanhtoan",n=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,o,e){n=$(e.el)})).on(a+"_Init",(function(o,e,t){n=$(t.el);var i=a.pageData();n.find("form").validate({submitHandler:function(a){var n=$.extend(i,$(a).serializeObject(),!0);console.log(n),window.showLoader(),post(site_url_ajax("user.php?a=action"),n,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,n,o){}))}();
!function(){var a="userwalletthemthenganhang",e=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,n,o){e=$(o.el)})).on(a+"_Init",(function(n,o,t){e=$(t.el);var i=a.pageData();e.find("form").validate({submitHandler:function(a){var e=$.extend(i,$(a).serializeObject(),!0);console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=action"),e,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,e,n){}))}();
!function(t){var a="webview",e=null;function n(){$(".navbar").show();var t=a.pageData();t.router?t.router.navigateReset():mainView.router.back()}$(document).on("click",".popover-menu-web [data-copy]",(function(){t.copyText($(this).attr("data-copy"))})).on("click",".popover-menu-web [data-share]",(function(){t.share($(this).attr("data-share"))})).on("click",".popover-menu-web [data-save]",(function(){$.toast("H thng  lu vo danh sch yu thch")})).on("click",".popover-menu-web [data-report]",(function(){$.toast("H thng  nghi nhn")})),t.addEventListener("click",(function(e){var o=$(e.target).hasClass("webview")?$(e.target):$(e.target).closest(".webview");if(0==o.length&&$(e.target).attr("data-webview")&&(o=$(e.target)),o&&o.length){var i=o.attr("href")||o.attr("data-webview");if(i&&"#"!=i){var r=o.data();r.url=i,t.ADevice?t.open(r):t.webview(r)}}if(0==(o=$(e.target).hasClass("btnback")?$(e.target):$(e.target).closest(".btnback")).length&&$(e.target).hasClass("btnback")&&(o=$(e.target)),o.length){e.preventDefault();var c=a.pageData();console.log(c),c.confirm?confirm("Bn c mun thot khng?",(function(t){t&&n()})):n()}}),!0),$(document).on(a+"_Before",(function(n,o,i){e=$(i.el);var r=i.navbarEl?$(i.navbarEl):e.find(".navbar"),c=a.pageData();console.log(c);var s=decodeURIComponent(c.url),d=c.title?decodeURIComponent(c.title):null;!function(t,a){fetch(t).then((t=>t.text())).then((t=>{var e=$("<div>"+t+"</div>");a({title:e.find("title").html(),image:e.find('meta[property="og:image"]').attr("content"),description:e.find('meta[name="description"]').attr("content")})}))}(s,(function(t){t&&(d=d||t.title,r.find(".title").html(d),r.find("[data-copy]").attr("data-copy",s),r.find("[data-share]").attr("data-share",`Bn ang chia s ${t.title} t ng dng ${s}`)),console.log(t),$(".popover-menu-web [data-share]").attr("data-share",`Bn ang chia s t ng dng App cho bi vit: ${d} ${s}`),$(".popover-menu-web [data-save]").attr("data-copy",JSON.stringify(t)),$(".popover-menu-web [data-report]").attr("data-copy",JSON.stringify(t))}));var l=$(`<iframe src="${s}" style="border:0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`);e.find(".page-content").append('<div class="load"></div>'),e.find(".page-content").append(l);var p=e.find(".logointro");c.logo?(p.html(`<img src="${c.logo}" width="44" height="44" />`),p.show()):c.intro&&(p.html(c.intro),p.show()),l.on("load",(function(){p.hide();var a=this.contentWindow;if(c.callback&&c.callback.call(a),c.autopasskey){var e=t.user.hasLogin();a.postMessage("passkey:"+e.passkey,"*")}}));var g=e.find(".load");d?r.find(".title").html(d):(e.find(".page-content").css("padding-top",0).css("margin-top",0).css("padding-bottom",0),r.hide().closest(".navbar").hide()),0===c.header?(e.find(".page-content").css("padding-top",0).css("margin-top",0).css("padding-bottom",0),r.hide().closest(".navbar").hide(),g.remove()):g.animate({width:"100%"},3e3,(function(){g.fadeOut("slow",(function(){$(this).remove()}))}))})).on(a+"_Init",(function(t,a,n){e=$(n.el)})).on(a+"_Leave",(function(t,a,n){n.navbarEl?$(n.navbarEl):e.find(".navbar");$(".navbar").show()})),t.webview=function(t){t="object"==typeof t?t:{url:t},("/webview/"+encodeURIComponent(t.url)+"/").navigate(t)},t.webview.onBack=function(t){var e=a.pageData();console.log(e),e.confirm?confirm("Bn c mun thot khng?",(function(t){t&&n()})):n()},t.addEventListener("message",(function(t){"close"==t.data&&e&&(a.pageData().confirm?confirm("Bn c mun thot khng?",(function(t){t&&n()})):n())}),!0)}(window);
Handlebars.registerHelper("status_image",(function(e){var t=e.data.root,a=t.status;switch(t.status){case"complete":a="https://cdn-icons-png.flaticon.com/128/14090/14090371.png";break;case"pending":a="https://cdn-icons-png.flaticon.com/128/2972/2972543.png";break;case"cancel":a="https://cdn-icons-png.flaticon.com/128/5268/5268671.png";break;case"hold":a="https://cdn-icons-png.flaticon.com/128/636/636209.png"}return a})),Handlebars.registerHelper("status_message",(function(e){var t=e.data.root,a=t.status;switch(t.status){case"complete":a=`<span class='text-success'>${t.message}</span>`;break;case"pending":a=`<span class='text-primary'>${t.message}</span>`;break;case"cancel":a=`<span class='text-danger'>${t.message}</span>`;break;case"hold":a=`<span class='text-warning'>${t.message}</span>`}return new Handlebars.SafeString(a)})),Handlebars.registerHelper("select",(function(e,t){var a=$("<select />").html(t.fn(this));return a.find('[value="'+e+'"]').attr({selected:"selected"}),a.html()})),Handlebars.registerHelper("radio",(function(e,t){var a=$("<div />").html(t.fn(this));return a.find('[value="'+e+'"]').attr({checked:"checked"}),a.html()})),Handlebars.registerHelper("checkbox",(function(e,t){var a=$("<div />").html(t.fn(this));return a.find('[value="'+e+'"]').attr({checked:"checked"}),a.html()})),Handlebars.registerHelper("qrcodeBox",(function(e){var t="idqrcodeBox"+Date.now(),a=`<div class="${t}" style="display: flex;\n    flex-direction: column;\n    align-items: center;margin:8px 0;\n    justify-content: center;">\n       <div class="sv" style="margin-bottom: 8px;"></div>\n       <div style="   display: flex;\n    align-items: center;">\n            <input type="text" class="form-control" value="${e}" />\n            <i style='margin: 0 16px;' class="fa fa-share-square-o" data-share-message="${e}" aria-hidden="true"></i> \n            <i class="fa fa-clone" data-copy="${e}" aria-hidden="true"></i>\n       </div>\n     </div>`;return setTimeout((function(){$("."+t).find(".sv").qrcode({text:e,width:125,height:125})}),200),new Handlebars.SafeString(a)})),Handlebars.registerHelper("image",(function(e){return e||"https://via.placeholder.com/1900x680/FEFEFE/333333/?text="+document.title})),Handlebars.registerHelper("parser_html",(function(e){return e=e.replace(/\n/gi,"<br/>"),e=urls_parser(e,(function(e){return e.match(/\/embed\//gi)?e:-1!=e.indexOf("youtube.")?window.Youtube.Embed(e):void 0})),new Handlebars.SafeString(e)})),Handlebars.registerHelper("slug",(function(e){return e.toString().make_slug()})),Handlebars.registerHelper("tel",(function(e){return new Handlebars.SafeString('<a href="tel:'+e+'">'+e+"</a>")})),Handlebars.registerHelper("wallet",(function(e){return e=parse_money(e||""),sign+(s?show_money_none(parse_money(s)):0)})),Handlebars.registerHelper("number",(function(e){return(e<0?"-":"")+(e?show_money_none(parse_money(e)):0)})),Handlebars.registerHelper("km",(function(e){var t=e.data.root;if(t.lat&&t.lng&&GPS&&GPS.cache){var a=calDistance(t.lat,t.lng,GPS.cache.lat,GPS.cache.lng);return"0.00"!=a?a+"km":""}return""})),Handlebars.registerHelper("time_left",(function(e){return e?window.time_left(e).rendershort():""})),Handlebars.registerHelper("time",(function(e,t){if(!e)return e;switch(t){case"format":e=new Handlebars.SafeString(e.split(" ").join("<br/>"));break;case"date":e=e.split(" ")[0];break;case"timeago":e=$.timeago(e);break;case"timer":e=time_left(isNaN(e)?new Date(e).getTime():1e3*e).rendershort()}return e})),Handlebars.registerHelper("created_date",(function(e){var t=e.data.root;return t.created_date?moment(new Date(t.created_date)).format("H:M DD/MM/YYYY"):"--"})),Handlebars.registerHelper("created_at",(function(e){var t=e.data.root;return t.created_at?moment(new Date(t.created_at)).format("H:M DD/MM/YYYY"):"--"})),Handlebars.registerHelper("updated_at",(function(e){var t=e.data.root;return t.updated_at?moment(new Date(t.updated_at)).format("H:M DD/MM/YYYY"):"--"})),Handlebars.registerHelper("completed_date",(function(e){var t=e.data.root;return t.completed_date?moment(new Date(t.completed_date)).format("H:M DD/MM/YYYY"):"--"})),Handlebars.registerHelper("completed_at",(function(e){var t=e.data.root;return t.completed_at?moment(new Date(t.completed_at)).format("H:M DD/MM/YYYY"):"--"})),Handlebars.registerHelper("status_text",(function(e){var t=e.data.root.status;switch(t){case"complete":t="<span class='text-success'>Hon thnh</span>";break;case"pending":t="<span class='text-primary'>ang x l</span>";break;case"hold":t="<span class='text-warning'>Tm ngng x l</span>";break;case"cancel":t="<span class='text-danger'> hu</span>";break;case"widthraw":t="<span class='text-info'>ang yu cu rt</span>"}return new Handlebars.SafeString(t)})),Handlebars.registerHelper("html_select",(function(e,t,a){var n=[];try{n=(a=JSON.parse(a)).map((function(t){return`<option value="${t.value}" ${t.value==e?"selected":""}>${t.value}</option>`}))}catch(e){}u.avatar&&u.avatar;return n.join("")})),Handlebars.registerHelper("number",(function(e){return(e<0?"-":"")+(e?show_money_none(e):0)})),Handlebars.registerHelper("undefined",(function(e){return e||"--"})),Handlebars.registerHelper("null",(function(e){return e||"--"})),Handlebars.registerHelper("empty",(function(e){return e||"--"})),Handlebars.registerHelper("number",(function(e){return(e<0?"-":"")+(e?show_money_none(parse_money(e)):0)})),Handlebars.registerHelper("action_status_text",(function(e){var t=e.data.root,a="";switch(console.log(t),t.status){case"complete":a='<span class="text-success">Hon thnh</span>';break;case"cancel":a='<span class="text-danger">Hu b</span>';break;default:var n="";$.each({complete:"Hon thnh",shipping:"Hon thnh & ang Giao hng",pending:"Ch x l",cancel:"Hu b"},(function(e,a){n+='<option value="'+e+'" '+(e==t.status?"selected":"")+">"+a+"</option>"})),a=`<select name="status" class="form-control detail-inv-status" style="width: auto;height:35px">\n                 ${n}\n               </select> `}return new Handlebars.SafeString(a)}));
Handlebars.registerHelper("payment",(function(t){var e=t.data.root,a="";switch(e.payment){case"cash":a='<span class="text-success">Tin mt</span>';break;case"isc":a='<span class="text-primary">in ISC</span>';break;case"point":a='<span class="text-success">im thng</span>';break;default:a='<span class="text-info">'+e.payment+"</span>"}return new Handlebars.SafeString(a)})),Handlebars.registerHelper("track_order",(function(t){var e=t.data.root.track_order;e||(e=JSON.parse(t.data.root.log).track_order);var a={};$.each(e,(function(t,e){$.each(e.products,(function(t,e){var r=e.id_product?e.id_product:e.id;a[r]?(a[r].quantity+=1*e.quantity,a[r].subtotal+=1*e.subtotal):(e.quantity=1*e.quantity,a[r]=$.extend({},e,!0),a[r].subtotal=1*e.subtotal)}))}));var r="",n=1;return $.each(a,(function(t,e){e.price_off?e.price_off:e.price,e.quantity,e.price_discount&&e.price_discount;r+="<tr data-info='"+JSON.stringify(e)+'\'><td class="text-center">'+n+++'</td><td class="text-left">'+e.title+'<div class="hide"><button type="button" class="btn btn-danger btn-delete btn-xs">Xo</button></div></td><td>'+e.quantity+'</td><td class="text-right">'+show_money_none(e.price)+' </td><td class="text-right">'+show_money_none(e.price_discount?e.price_discount:0)+' </td><td class="text-right" data-total="'+e.subtotal+'">'+show_money_none(e.subtotal)+" </td></tr>",e.quantity})),new Handlebars.SafeString('<table class="table"> <thead><th>STT</th> <th>Sn phm</th> <th>SL</th> <th>Gi</th> <th>Gim gi </th><th>Thnh tin</th> </thead> <tbody>'+r+"</tbody> </table>")})),Handlebars.registerHelper("inv_total_discount_substotal",(function(t){console.log(t);var e=t.data.root.track_order;if(!e)return 0;var a=0;$.each(e,(function(t,e){$.each(e.products,(function(t,e){a+=1*(e.price_discount?e.price_discount:0)}))}));var r=t.data.root.checkout;return r&&r.reduce&&(console.log(r.reduce),$.each(r.reduce,(function(t,e){"discount"!=t&&"coupon"!=t||(a+=1*e.value)}))),show_money_none(a)})),Handlebars.registerHelper("inv_substotal",(function(t){var e=t.data.root.track_order;if(!e)return 0;var a=0;return $.each(e,(function(t,e){$.each(e.products,(function(t,e){a+=(e.price_off?e.price_off:e.price)*e.quantity}))})),show_money_none(a)})),Handlebars.registerHelper("menu",(function(t){var e=t.data.root,a="",r={all:{title:"Tt c",count:0}},n="";return e.products?($.each(JSON.parse(e.products),(function(t,e){var n=Handlebars.compile('<li class="list-group-item {{slug_text}} {{allow_sale}}" data-id="{{id}}"><div class="ic" data-id="160" data-target=""><div class="avatar s" style="background-image:url({{image}})"></div></div><div class="body"><div class="name ellipsis">{{title}}</div><div class="timeago">{{price_product}}</div></div><div class="actions" data-id="160" data-target=""></div></li>');e.allow_sale&&(e.allow_sale="allow_sale"),e.price_off?e.price_product='<span class="old">'+show_money_none(parse_money(e.price))+'</span> - <span class="new">'+show_money_none(e.price_off)+"</span>":e.price_product='<span class="new">'+show_money_none(parse_money(e.price))+"</span>",e.price_product=new Handlebars.SafeString(e.price_product),e.category&&(e.slug_text=e.category.make_slug(),r[e.slug_text]||(r[e.slug_text]={title:e.category,count:0}),r[e.slug_text].count+=1),a+=n(e)})),console.log(r),$.each(r,(function(t,e){var a=Handlebars.compile('<button class="btn btn-primary btn-sm" data-type="{{category}}">{{title}}</button>');e.category=t,n+=a(e)})),new Handlebars.SafeString('<div class="simple-scroll buttons">'+n+'</div><ul class="list-group">'+a+"</ul>")):new Handlebars.SafeString("Menu ang cp nht.")})),Handlebars.registerHelper("products",(function(t,e){var a=e.data.root[e.name].map((function(t){return"<li>"+e.fn(t)+"</li>"}));return new Handlebars.SafeString("<ul>\n"+a.join("\n")+"\n</ul>")})),Handlebars.registerHelper("image",(function(t,e){var a=t.data.root[t.name];try{return $(a).attr("src")}catch(t){}return a})),Handlebars.registerHelper("pricedeal",(function(t){var e=t.data.root;return e.price_from&&e.price_to?show_money(e.price_from)+" - "+show_money(e.price_to):e.price_from?show_money(e.price_from):"Thng lng"}));
Handlebars.registerHelper("view",(function(a){var e=a.data.root;return new Handlebars.SafeString('<span class="badge">'+e.view+' <i style="font-size: 11px;" class="fal fa-eye"></i></span>')})),Handlebars.registerHelper("rate",(function(a){a.data.root;return new Handlebars.SafeString('<div class="star-rating" title="70%"> <div class="back-stars"> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <div class="front-stars" style="width: 70%"> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> <i class="fas fa-star" aria-hidden="true"></i> </div> </div> </div>')})),Handlebars.registerHelper("bt3_input",(function(a,e){var r="["+e.fn(this)+"]";try{r=JSON.parse(r);var i=Date.now();r=r.map((function(a){return a.class=a.class?a.class:"",a.placeholder=a.placeholder?a.placeholder:"",a.error=a.error?a.error:"",`<div class="form-group">\n            <label for="${i}${a.name}">${a.title}</label>\n            <input type="${a.type}" name="${a.name}" class="form-control ${a.class} ${a.name}" error="${a.error}" placeholder="${a.placeholder}" value="${a.value}">\n          </div>`}))}catch(a){return""}return r.join("\n")})),Handlebars.registerHelper("owl",(function(a){var e=a.data.root,r="";if(e.gallery){try{e.gallery=JSON.parse(e.gallery)}catch(a){}if(Object.values(e.gallery).length)e.gallery&&e.image&&!e.gallery.includes(e.image)&&e.gallery.push(e.image),r=1==e.gallery.length?'<div class="bgcontain thumbnail f item" style="background-image:url('+e.gallery[0]+');    background-position: center;" /></div>':'<div class="owl-carousel owl owl-theme">'+e.gallery.map((function(a){return"object"==typeof a?'<div class="item img" style="background-image:url('+(a.image?a.image:a.avatar)+')"></div>':'<div class="item img" style="background-image:url('+a+')"></div>'})).join("")+"</div>";else r='<div class="bgcontain thumbnail item f" style="background-image:url('+(e.image?e.image:thumbnail())+');background-position: center;" />'}else{r='<div class="bgcontain thumbnail item f" style="background-image:url('+(e.image?e.image:thumbnail())+');background-position: center;" />'}return new Handlebars.SafeString(r)})),Handlebars.registerHelper("myimage",(function(a){var e=a.data.root;if(!e.image||"https://static.thenounproject.com/png/210732-200.png"==e.image){var r=e.gallery;if(r){try{r=JSON.parse(r)}catch(a){}return Object.values(r).length?r[0]:"https://static.thenounproject.com/png/210732-200.png"}}return e.image}));
Handlebars.registerHelper("display_avatar",(function(e){var r=e.data.root;return r.avatar?r.avatar:"https://cdn-icons-png.flaticon.com/128/3899/3899618.png"})),Handlebars.registerHelper("display_name",(function(e){var r=e.data.root,a=r.fullname_user?r.fullname_user:r.username_user?r.username_user:r.email_user?r.email_user:r.phone_user?r.phone_user:null;return a||(a=r.fullname?r.fullname:r.username?r.username:r.email?r.email:r.phone?r.phone:null),a})),Handlebars.registerHelper("blockavatar",(function(e,r){var a="";return a=e?` <div class='pic' style="    width: 65px;\n      height: 65px;\n      position: relative;\n      align-items: center;\n      justify-content: center;\n      display: flex;\n      background-color: rgb(206 206 206 / 47%);\n      border-radius: 50%;">${r.split(" ").slice(0,2).map((function(e){return e[0]})).join("").toUpperCase()}</div>`:`<div class='pic'  href="/chat/profile/${who.info.id_user}/" data-transition='f7-dive' style="width: 45px;\n                height: 45px;\n                background-size: cover;\n                background-position: center;\n                border-radius: 50%;background-image: url(${e})" alt=""></div>`,new Handlebars.SafeString(a)})),Handlebars.registerHelper("address",(function(e){var r=e.data.root;if(!r.province)return r.address;var a=[];return r.steet&&a.push(r.steet),r.ward&&a.push(r.ward),r.district&&a.push(r.district),r.province&&a.push(r.province),a.join(", ")})),Handlebars.registerHelper("addressshop",(function(e){var r=e.data.root,a=[];return r.steet&&a.push('<span class="badge">'+r.street+"</span>"),r.ward&&a.push('<span class="badge" data-title="'+r.ward+"|"+r.district+"|"+r.province+'" data-target="MyShopCountry" data-info=\'{"title":"'+r.ward+", "+r.district+", "+r.province+'","province_id":"'+r.province_id+'","district_id":"'+r.district_id+'","ward_id":"'+r.ward_id+"\"}'>"+r.ward+"</span>"),r.district&&a.push('<span class="badge" data-title="'+r.district+"|"+r.province+'" data-target="MyShopCountry" data-info=\'{"title":"'+r.ward+", "+r.district+", "+r.province+'","province_id":"'+r.province_id+'","district_id":"'+r.district_id+"\"}'>"+r.district+"</span>"),r.province&&a.push('<span class="badge" data-info=\'{"title":"'+r.province+'","province_id":"'+r.province_id+'"}\' data-title="'+r.province+'" data-target="MyShopCountry">'+r.province+"</span>"),new Handlebars.SafeString(a.join(", "))})),Handlebars.registerHelper("mapaddress",(function(e){var r=e.data.root,a=[];return r.steet&&a.push(r.steet),r.ward&&a.push(r.ward),r.district&&a.push(r.district),r.province&&a.push(r.province),a=a.join(", "),new Handlebars.SafeString('<a href="https://www.google.com/maps/dir/'+GPS.cache.lat+","+GPS.cache.lng+"/@"+r.lat+","+r.lng+',12z?open=true">'+a+"</a>")})),Handlebars.registerHelper("mapaddressaction",(function(e){var r=e.data.root,a=[];return r.steet&&a.push(r.steet),r.ward&&a.push(r.ward),r.district&&a.push(r.district),r.province&&a.push(r.province),a=a.join(", "),new Handlebars.SafeString('<a href="https://www.google.com/maps/dir/'+GPS.cache.lat+","+GPS.cache.lng+"/@"+r.lat+","+r.lng+',12z?open=true">Xem map</a>')}));
!function(n){var t=null;n.getBanks=function(n){t?n(t):fetch("https://api.vietqr.io/v2/banks").then((function(n){return n.json()})).then((function(e){t=e.data,n(t)}))},Handlebars.registerHelper("bank",(function(n,t){var e="select"+Date.now();return setTimeout((function(){getBanks((function(t){modal.find(".bank").html('<option value="">--Chn ngn hng--</option> '+t.map((function(n){return`<option value="${n.name}">${n.shortName} - ${n.name}</option>`})).join("")),$("."+e).val(n)}))}),100),`<select name="bank" class='form-control ${e}'></select>`}))}(window);
setTimeout((function(){File.settings.upload=app.config.upload.url||"https://data.donggiatri.com/databases/upload.php",File.settings.uploadbase64=app.config.upload.url||"https://data.donggiatri.com/databases/upload.php"}),1e3),File.settings.onData=function(e){return e},File.settings.onHeader=function(e){return e["auth-token"]=$("meta[name='auth-token']").attr("content"),e},File.imgUploads=function(e,a){for(var n=0;n<a.value.length;n++){var i=$('<div class="boxm"></div>');e.append(i),File.imgupload(i,{index:n,value:a.value[n],field:a.field,label:"nh",callback:function(e){a.callback&&a.callback(e,this.index)}})}},File.imgUpload=function(e,a){a.height&&e.height(a.height);var n=a.type?`accept="${a.type}"`:"",i=a.value?`background-image:url(${a.value})`:"",t="u"+[1,Date.now()].random(),l="l"+t;e.html(`\n        <input type="hidden" value="${a.value||""}" name="${a.field||""}" class="${l}">\n              <label for="${t}" aria-label="camera" class="boximage bg" style="position: relative;\n        background-color: #dedede;\n    color: #333;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    padding: 64px;\n    border-radius: 16px;\n    width: 50%;\n    margin: 0 auto;\n    cursor: pointer;background-size: contain;${i}">\n                <span for="${t}" aria-label="camera" class="anticon anticon-camera" style="font-size: 30px; color: rgb(51, 51, 51);">\n                    <svg viewBox="64 64 896 896" focusable="false" data-icon="camera" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"></path></svg>\n                </span>\n                \n                <span>${a.label}</span> \n\n                <div class="badge badge-warning progressbarper" style='position:absolute;bottom:10px'></div>\n             </label>\n             <input type="file" ${n} style="opacity:0;position:absolute;top:100%;z-index:-1" id="${t}" />\n   `),e.find("#"+t).on("change",(function(n){$(this).closest(".boximage");resizeImage({file:this.files[0],width:320,height:680,callback:function(n){var i=a.name||a.field||"";e.find(".boximage").css("background-image","url("+n+")");var t=e.find(".progressbarper");uploadFile({file:n,name:i},a.url||File.settings.upload,(function(n){t.html("");var i="string"==typeof n?n:n.url;e.find("."+l).val(i),e.find(".boximage").css("background-image","url("+i+")"),a.callback&&a.callback(i)}),{onProgress:function(e){e=Math.ceil(100*e),console.log(e),t.html(e+"%")}})}})}))},$(document).on("click","[image-resize]",(function(){var e=this,a=$(e).closest("form");0==a.length&&(a=$(e).closest("div"));var n=$(e).closest("div"),i=$(e).attr("image-resize");console.log(i);var t=null;i.pickerImageResize({url:File.settings.uploadbase64,width:$(e).attr("image-size")||105,ready:function(a,i){e.src=a,t=$.progressCircle({parent:n,size:40})},onProgress:function(e){e=Math.ceil(100*e),t.update(e)},callback:function(e,n){"end"==n&&(t.remove(),a.find("."+i).val(e))}})})).on("click","[image-picker-name]",(function(){var e=this;File.pickerImage({callback:function(a,n){var i=$(e).closest("form");0==i.length&&(i=$(e).closest("div"));var t=$(e).closest("div"),l=$(e).attr("image-picker-name"),o=l,c=$(e).attr("image-picker-control");c&&(o=i.find(c).val().make_slug()),e.src=a.base64;var s=$.progressCircle({parent:t,size:40});uploadFile({file:a,name:o},File.settings.upload,(function(e){s.remove(),i.find("."+l).val(e.url)}),{onProgress:function(e){e=Math.ceil(100*e),console.log(e),s.update(e)}})}})}));
!function(n){n.picker=n.picker||{},n.picker.alert={ok:function(n){bootbox.alert(`<div class="text-center">\n                      <div><img src="https://cdn-icons-png.flaticon.com/128/190/190411.png" width="45" height="45" /><div>\n                    <div class="text-success">${n}<div></div> `)},success:function(n){this.ok(n)},no:function(n){bootbox.alert(`<div class="text-center"><div><img src="https://cdn-icons-png.flaticon.com/128/399/399274.png" width="45" height="45" /><div>\n                    <div class="text-danger">${n}<div></div>`)},error:function(n){this.no(n)},hold:function(n){bootbox.alert(`<div class="text-center"><div><img src="https://cdn-icons-png.flaticon.com/128/6897/6897039.png" width="45" height="45" /><div>\n                    <div class="text-warning">${n}<div></div>`)},wait:function(n){this.hold(n)}},n.picker.status={pending:function(n){var t={title:(n=$.extend({status:"pending",message:"Rt tin thnh cng qu khch vui lng kim tra li ti khon. Cm n qu khch  tin tng la chon MB Bank.",link_contact:"#"},n,!0)).title||" ",message:'\n                    <div class="text-center">\n                    <div><img width="75" src="{{status_image}}" /></div>\n                    <p  class=\'uppercase\'>{{status_message}}</p>\n                    <a href="{{link_contact}}" target="_blank" class="btn btn-primary uppercase external text-center mbt-16 ">\n                        <span class="">\n                            n vo y lin h T vn vin\n                        </span> \n                     </a>\n                  </div>\n                  ',size:"large",onEscape:!0,backdrop:!0,buttons:{}};t.message=Handlebars.compile(t.message)(n),bootbox.dialog(t)},error:function(n){var t={title:(n=$.extend({status:"cancel",message:"Rt tin thnh cng qu khch vui lng kim tra li ti khon. Cm n qu khch  tin tng la chon MB Bank.",link_contact:"#"},n,!0)).title||" ",message:'\n                    <div class="text-center">\n                    <div><img width="75" src="{{status_image}}" /></div>\n                    <p  class=\'uppercase\'>{{status_message}}</p>\n                    <a href="{{link_contact}}" target="_blank" class="btn btn-primary uppercase external text-center mbt-16 ">\n                        <span class="">\n                            n vo y lin h T vn vin\n                        </span> \n                     </a>\n                  </div>\n                  ',size:"large",onEscape:!0,backdrop:!0,buttons:{}};t.message=Handlebars.compile(t.message)(n),bootbox.dialog(t)},complete:function(n){var t={title:(n=$.extend({status:"complete",message:"Rt tin thnh cng qu khch vui lng kim tra li ti khon. Cm n qu khch  tin tng la chon MB Bank.",link_contact:"#"},n,!0)).title||" ",message:'\n                    <div class="text-center">\n                    <div><img width="75" src="{{status_image}}" /></div>\n                    <p  class=\'uppercase\'>{{status_message}}</p>\n                    <a href="{{link_contact}}" target="_blank" class="btn btn-primary uppercase external text-center mbt-16 ">\n                        <span class="">\n                            n vo y lin h T vn vin\n                        </span> \n                     </a>\n                  </div>\n                  ',size:"large",onEscape:!0,backdrop:!0,buttons:{}};t.message=Handlebars.compile(t.message)(n),bootbox.dialog(t)}}}(window);
!function(e){function a(e,a){var t=e.split("."),i="";if(1==t.length)return a[t[0]]||"";try{if("object"==typeof(i=a[t[0]]))for(var l=1;l<t.length;l++){if(!i[t[l]]||"object"!=typeof i[t[l]])return i[t[l]];i=i[t[l]]}}catch(e){}return i}window.rendertable=function(e,t){var i=(t=$.extend({stt:!0,current:1,total:0,limit:20,define:{},data:[]},t,!0)).define;t.stt&&!i.stt&&(i=$.extend({stt:{label:"STT",order:0,value:"--",render:function(e){return(e.options.current>1?e.options.current-1:0)*e.options.limit+e.index}}},i,!0));var l="";for(var n in i)l+=`<th>${i[n].label}</th>`;function s(l){l.map((function(l,n){var s=$(function(e,t,i,l){var n="";for(var s in l){var r=a(s,i);if(void 0!==r)switch(l[s].type){case"select":r=`<select class="form-control">\n                    <option value="${r}">${r}</option>\n                </select>`;break;case"input":case"inputemail":case"inputtel":r=`<input type="text" value="${r}" class="form-control" />`;break;case"image":case"img":r=`<img class="magnificPopup" width="75" height="75" src="${r}" class="" />`;break;case"avatar":r=`<img class='avatar' width="75" height="75" src="${r}" class="" />`;break;case"upload":r=`<img width="75" height="75" src="${r}" class="" />`;break;case"a":case"link":case"url":r=`<a href="${r}">${r}</a>`;break;case"copy":r=`<div class="flex-row">${r} <img width="12" height="12" src="https://cdn-icons-png.flaticon.com/128/3138/3138853.png" data-copy="${r}" /></div>`;break;case"money":r=show_money_none(r||0)}if(r||i[s]||(r=l[s].value||""),l[s].render){var c={index:e,options:t,value:i[s],column:l[s],item:r,root:i};(r=l[s].render(c))||(r=c.item)}n+=`<td class="f-${s.replaceAll(".","")} ${l[s].class||""}" style="${l[s].style||""}">${r}</td>`}return`<tr data-id="${i.id||i.barcode}">${n}</tr>`}(n+1,t,l,i));e.find("tbody").append(s),s.data("data",l),t.onCreatedRow&&t.onCreatedRow(s,l,n)})),r.loader.hide(),function(e){var a=(e=$.extend({total:50,current:1},e,!0)).total;e.ele.html(""),function(e,t,i){t>1&&e.append('<li class="page-item"><a class="page-link" href="#'+(t-1)+'">Previous</a></li>');for(let l=1;l<=a;l++)1==l&&t-i>1&&(e.append('<li class="page-item"><a class="page-link" href="#1">1</a></li>'),t-i>2&&e.append('<li class="page-item disabled"><a class="page-link" href="#">...</a></li>')),l>=t-i&&l<=t+i&&(l!=t?e.append('<li class="page-item"><a class="page-link" href="#'+l+'">'+l+"</a></li>"):e.append('<li class="page-item active"><a class="page-link" href="#'+l+'">'+l+"</a></li>")),l==a&&t+i<a&&(t+i<a-1&&e.append('<li class="page-item disabled"><a class="page-link" href="#">...</a></li>'),e.append('<li class="page-item"><a class="page-link" href="#'+a+'">'+a+"</a></li>"));t<a&&e.append('<li class="page-item"><a class="page-link" href="#'+(t+1)+'">Next</a></li>')}(e.ele,e.current,3),e.ele.find("a").on("click",(function(a){a.preventDefault();var t=1*$(this).attr("href").replace("#",""),i=$(this).closest("li");i.siblings().removeClass("active"),i.addClass("active"),e.onclick&&e.onclick.call(this,t)}))}({ele:e.find(".paging"),total:t.total,current:t.current,onclick:function(e){console.log(e),r.goTo(e)}})}e.html(`<table class="table table-fixed table-bordered" style="">\n      <thead>${l}</thead>\n        <tbody></tbody>\n      </table><div class="text-right"><ul style='display:inline-block' class="paging"></ul><div>`);var r={reset:function(){t.filters={},this.goTo(1)},filter:function(e){t.filters=e||{},this.goTo(1)},goTo:function(e){t.current=e,function(){r.loader.show();var e=t.data;"function"==typeof t.data?t.data(t,(function(e){t.total=e.total,s(e.data)})):s(e)}()},empty:function(){e.attr("nodata","Cha c d liu")},loader:{show:function(){e.attr("preloader","")},hide:function(){e.removeAttr("preloader")}}};return r.reset(),r}}();
function WooCommerceRestApi(t){if(!(this instanceof WooCommerceRestApi))return new WooCommerceRestApi(t);if(!(t=t||{}).url)throw"url is required";if(!t.consumerKey)throw"consumerKey is required";if(!t.consumerSecret)throw"consumerSecret is required";this.classVersion="1.0.1",this._setDefaultsOptions=function(t){this.url=t.url,this.wpAPIPrefix=t.wpAPIPrefix||"wp-json",this.version=t.version||"wc/v3",this.isHttps=/^https/i.test(this.url),this.consumerKey=t.consumerKey,this.consumerSecret=t.consumerSecret,this.encoding=t.encoding||"utf8",this.queryStringAuth=t.queryStringAuth||!1,this.port=t.port||"",this.timeout=t.timeout,this.axiosConfig=t.axiosConfig||{}};this._getUrl=function(t,e){const n=this.wpAPIPrefix+"/";let i="/"===this.url.slice(-1)?this.url:this.url+"/";return i=i+n+this.version+"/"+t,!this.isHttps&&e&&(i=(-1==i.indexOf("?")?"?":"&")+$.param(e)),i};this._request=function(t,e,n,i={}){const o=this._getUrl(e,i),s={Accept:"application/json"};"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(s["User-Agent"]="WooCommerce REST API - JS Client/"+this.classVersion);let r={url:o,method:t,responseEncoding:this.encoding,timeout:this.timeout,responseType:"json",dataType:"json",async:!0,headers:s};return this.isHttps?(this.queryStringAuth?r.params={consumer_key:this.consumerKey,consumer_secret:this.consumerSecret}:r.auth={username:this.consumerKey,password:this.consumerSecret},r.params=$.extend(r.params,i,!0)):r.params=function(){const t={consumer:{key:this.consumerKey,secret:this.consumerSecret},signature_method:"HMAC-SHA256",hash_function:function(t,e){}};return new _oauth.default(t)}().authorize({url:o,method:t}),n&&(r.headers["Content-Type"]="application/json;charset=utf-8",r.data=JSON.stringify(n)),new Promise((function(t,e){r.success=function(e,n,i){t(e,n,i)},r.error=function(t,n,i){e(t,n,i)},r.cache=1,$.ajax(r)}))},this.get=function(t,e={}){return this._request("get",t,null,e)},this.post=function(t,e,n={}){return this._request("post",t,e,n)},this.put=function(t,e,n={}){return this._request("put",t,e,n)},this.delete=function(t,e={}){return this._request("delete",t,null,e)},this.options=function(t,e={}){return this._request("options",t,null,e)},this._setDefaultsOptions(t)}window.wc=function(){var t="acua.donggiatri.com";new WooCommerceRestApi({url:"https://"+t+"/",consumerKey:"ck_8950725a8a6d6dbad227c7ec38b1afcc7c27b56a1338df76ad28813638b136e2",consumerSecret:"cs_0be7ca961ed5acadcab971402cd04d844eb72a5b",version:"wc/v3"});function e(t,e,n){"function"==typeof e&&(n=e,e={}),post("https://"+o.domain+"/wp-admin/admin-ajax.php?action="+t,e||{},n,!0)}function n(t,e){return fetch(`https://${o.domain}/wp-content/themes/flatsome-pos/domains/${o.domain}/cache/${t}`).then((function(t){return t.json()})).then((function(t){e&&e(t)}))}var i={},o={domain:t,ajax:e,fetchCache:n,init:function(t){return n("public.json",(function(e){o.config=e,t&&t(e)})).catch((function(e){console.log(e),wc.ping(t)})),this},ready:function(t){o.config?t(o.config):setTimeout((function(){wc.ready(t)}),1500)},pos:function(t){t=$.extend({header:0,url:"https://"+o.domain+"/wp-admin/admin.php?page=posmanager"},t,!0),webview(t)},save:function(t){var n={};for(var i in this)if("object"==typeof this[i]&&"function"==typeof this[i].save){var o=this[i].save();n[o.key]=o.data}return e("cache_client",{},(function(t){})),this},autoload:function(){for(var t in this)"function"==typeof this[t].autoload&&this[t].autoload();return this},ping:function(t){return e("config",{cache:1},(function(e){for(var n in o.config=e,t&&t(e),i)i[n](e),delete i[n]})),this}};return $(document).on("Config",(function(t,e){e.wc&&(wc.domain=e.wc.domain),wc.autoload(),wc.init((function(t){}))})),o}();
window.wc.category={save:function(){return{key:"category",data:this.list}},list:{},find:function(t,i){if(this.list[t])i(this.list[t]);else{if(!this.list[t]){var c=this;return wc.fetchCache(`category/${t}.json`,(function(s){c.list[t]=s,i&&i(s)})).catch((function(s){wc.ajax("category",{id:t,cache:1},(function(s){c.list[t]=s,i&&i(s)}),!0)})),this}i(this.list[t])}}};
window.wc.chat={autoload:function(){return this.mine()},shopvuser:function(n,t){return wc.ready((function(c){n.hash=c.hash,wc.ajax("wc_chat_with_shop",n,(function(n){t&&t(n)}),!0)})),this},mine:function(n){return wc.ajax("wc_chat_mine_json",{},(function(t){t.code?(n&&n(t),wc.ajax("wc_chat_mine",{},(function(n){}),!0)):wc.ajax("wc_chat_mine",{},(function(t){n&&n(t)}),!0)}),!0),this}},$(document).on("Config",(function(n,t){wc.ready((function(n){wc.chat.autoload();var t=wc.config.talkto.sdk||`https://${app.config.wc.domain}/wp-content/themes/kitapi/talkto/sdk.js?t=`+Date.now();loadJS(t,(function(){}))}))}));
window.wc.coupon={list:{},list_search:{},autoload:function(c,n){var o=this;wc.ajax("coupon_search",{cache:1},(function(c){o.list_search=c}),!0)},create:{random:function(c,n){},give:function(c,n){},topupevent:function(c,n){}},check:function(c,n){return showLoader(),wc.ajax("check_apply_coupon",{code:c},(function(c){hideLoader(),n(c)}),!0),this},fetch:function(c,n){},mine:function(c){return showLoader(),wc.ajax("coupon_mine",c.data,(function(n){hideLoader(),c.callback&&c.callback(n)}),!0),this}};
!function(e){$(document).on("QRCode",(function(e,a){"object"==typeof a&&a.k&&wc.ctv.qrcode(a)})),e.wc.ctv={registered:null,any:function(a){var t=e.user.hasLogin(),s=this;t?wc.ajax("wc_ctv_pos_check",{passkey:t.passkey},(function(e){1==e.code&&(s.registered=e.data),a.callback&&a.callback(e)}),!0):$.toast("Vui lng ng nhp")},open:function(a){var t=e.user.hasLogin();if(t){var s="https://"+wc.domain+"/tai-khoan/point-of-sale/?passkey="+t.passkey+"&hash="+this.registered.hash+"&outlet="+a.outlet;e.ADevice,window.open(s)}else $.toast("Vui lng ng nhp")},check:function(){e.user.hasLogin();"/link/wpposctv/".navigate()},register:function(a){var t=this,s=e.user.hasLogin();a.data.passkey=s?s.passkey:null,this.registered?(showLoader(),wc.ajax("wc_ctv_register_outside",a.data,(function(e){hideLoader(),e.code&&(t.registered=e.data),a&&a.callback&&a.callback(e)}),!0)):(showLoader(),wc.ajax("wc_ctv_synce_outside",{passkey:s.passkey},(function(e){hideLoader(),e.code&&(t.registered=e.data),a&&a.callback&&a.callback(e)}),!0))},qrcode:function(a){if(QRRealtime){var t=e.user.hasLogin();t&&(a.passkey=t.passkey,a.url="https://"+wc.domain+"/tai-khoan/?passkey="+t.passkey+"&outlet="+(a.outlet?a.outlet:1),$.toast("ang ng b, vui lng ch trong giy lt..."),QRRealtime.send(a,(function(e){alert(JSON.stringify(e))})))}}}}(window);
window.wc.customer={list_search:{},list:{},autoload:function(t,c){var i=this;wc.ajax("customer_search",{cache:1},(function(t){i.list_search=t}),!0)},find:function(t,c){if(!this.list[t]){var i=this;return wc.fetchCache(`user/${t}.json`,(function(s){i.list[t]=s,c&&c(s)})).catch((function(s){wc.ajax("customer",{id:t,cache:1},(function(s){i.list[t]=s,c&&c(s)}),!0)})),this}c(this.list[t])}};

window.wc.order={check_status:function(t,a){wc.ajax("wc_order_check_status",{id:t},(function(t){a&&a(t)}),!0)},__createData:function(t){return $.extend({payment_method:"bacs",payment_method_title:"Direct Bank Transfer",set_paid:!0,billing:{first_name:"John",last_name:"Doe",address_1:"969 Market",address_2:"",city:"San Francisco",state:"CA",postcode:"94103",country:"US",email:"john.doe@example.com",phone:"(555) 555-5555"},shipping:{first_name:"John",last_name:"Doe",address_1:"969 Market",address_2:"",city:"San Francisco",state:"CA",postcode:"94103",country:"US"},line_items:[{product_id:93,quantity:2},{product_id:22,variation_id:23,quantity:1}],shipping_lines:[{method_id:"flat_rate",method_title:"Flat Rate",total:"10.00"}]},t,!0)},pay:function(t,a){return t=this.__createData(t||{}),showLoader(),wc.ajax("wc_create_order",t,(function(t){hideLoader(),a(t)}),!0),this},checkin_day:function(t){return showLoader(),wc.ajax("wc_order_checkin_day",t.data,(function(a){hideLoader(),t.callback&&t.callback(a)}),!0),this}};
window.wc.payment={form:function(n){if(["cod","bacs"].includes(n.payment_method))return n.payment_method_title;var t=wc.config.gateway.filter((function(t){return t.id==n.payment_method}));return t.length?(t=t[0],console.log(t),`<div>\n              <p>${t.method_title}</p>\n              <p>${t.description}</p>\n              <div>\n                  <img src='${t.settings.qr_image_url}'\n              </div>\n              <div class="msgnotify well">ang ch thanh ton</div>\n           </div>\n\n\n           <script>\n           function check_status(f){\n             wc.order.check_status(function(r){\n                if(typeof r=='object'){\n                  if(r.code){\n                    $('.msgnotify').html('${t.finish_notify_text}');\n                  }else{\n                    f(r.error);\n                    check_status(f);\n                  }\n                }else{\n                  f(r);\n                  check_status(f);\n                }\n             }); \n          }\n           //setInterval(check_status,3*1000);\n           check_status(function(error){\n              $('.msgnotify').html(error);\n           });\n\n           <\/script>`):""}};
window.wc.post={list:{},comment:{list:function(t,n){wc.ajax("comment_post_list",{id_post:t},(function(t){n&&n(t)}),!0)},add:function(t,n){wc.ajax("comment_post_add",t,(function(t){n&&n(t)}),!0)},update:function(t,n){wc.ajax("comment_post_update",t,(function(t){n&&n(t)}),!0)},delete:function(t,n){wc.ajax("comment_post_delete",t,(function(t){n&&n(t)}),!0)},vote:function(t,n){wc.ajax("comment_post_vote",t,(function(t){n&&n(t)}),!0)},like:function(t,n){wc.ajax("comment_post_like",t,(function(t){n&&n(t)}),!0)}},save:function(){return{key:"product",data:this.list}},find:function(t,n){if(!this.list[t]){var c=this;return wc.fetchCache(`${t}.post.json`,(function(i){c.list[t]=i,n&&n(i),wc.ajax("find_post",{slug:t,cache:1},(function(n){c.list[t]=n}),!0)})).catch((function(i){wc.ajax("find_post",{slug:t,cache:1},(function(i){c.list[t]=i,n&&n(i)}),!0)})),this}n(this.list[t])},ping:function(t,n){return wc.ajax("find_post",{id:t},(function(t){n&&n(t)}),!0),this},bycategory:function(t,n){return wc.ajax("woo_products",$.extend({cache:1,per_page:20},t,!0),(function(t){n(t)}),!0),this},search:function(t,n){return this}};
window.wc.product={comment:{list:function(t,n){wc.ajax("comment_post_list",{id_post:t},(function(t){n&&n(t)}),!0)},add:function(t,n){wc.ajax("comment_post_add",t,(function(t){n&&n(t)}),!0)},update:function(t,n){wc.ajax("comment_post_update",t,(function(t){n&&n(t)}),!0)},delete:function(t,n){wc.ajax("comment_post_delete",t,(function(t){n&&n(t)}),!0)},vote:function(t,n){wc.ajax("comment_post_vote",t,(function(t){n&&n(t)}),!0)},like:function(t,n){wc.ajax("comment_post_like",t,(function(t){n&&n(t)}),!0)}},save:function(){return{key:"product",data:this.list}},list:{},find:function(t,n){if(!this.list[t]){var c=this;return wc.fetchCache(`${t}.json`,(function(i){c.list[t]=i,n&&n(i),wc.ajax("product",{id:t,cache:1},(function(n){c.list[t]=n}),!0)})).catch((function(i){wc.ajax("product",{id:t,cache:1},(function(i){c.list[t]=i,n&&n(i)}),!0)})),this}n(this.list[t])},ping:function(t,n){return wc.ajax("wc_ping_product",{id:t},(function(t){n(t)}),!0),this},pingall:function(t,n){return wc.ajax("wc_ping_all_product",{},(function(t){n(t)}),!0),this},fetch:function(t,n){return wc.ajax("woo_products",$.extend({cache:1,per_page:20},t,!0),(function(t){n(t)}),!0),this},review:function(t,n){return woo.get("products/reviews/"+t,$.extend({cache:1,per_page:20},data,!0)).then(((t,c,i)=>{n(t)})).catch((t=>{console.log(t),n([])})).finally((()=>{})),this}};
window;
window.wc.shop={list:{},find:function(i,t){if(0!=i){if(!this.list[i]){var c=this;return wc.fetchCache(`${i}.shop.profile.json`,(function(n){c.list[i]=n,t&&t(n),wc.ajax("wc_shop_profile",{id:i,cache:1},(function(t){c.list[i]=t}),!0)})).catch((function(n){wc.ajax("wc_shop_profile",{id:i,cache:1},(function(n){c.list[i]=n,t&&t(n)}),!0)})),this}t(this.list[i])}else t(wc.config)},rate:{post:function(i,t){return wc.ajax("wc_shop_profile_rate_post",i,(function(i){t(i)}),!0),this},list:function(i,t){return wc.ajax("wc_shop_profile_rate",{id:i},(function(i){t(i)}),!0),this}},ping:function(i,t){return wc.ajax("wc_shop_profile",{id:i},(function(i){t(i)}),!0),this},bycategory:function(i,t){return wc.ajax("woo_products",$.extend({cache:1,per_page:20},i,!0),(function(i){t(i)}),!0),this},search:function(i,t){return this}};
window.wc.tag={save:function(){return{key:"tag",data:this.list}},list:{},find:function(t,i){if(!this.list[t]){var n=this;return wc.fetchCache(`tag/${t}.json`,(function(c){n.list[t]=c,i&&i(c)})).catch((function(c){wc.ajax("tag",{id:t,cache:1},(function(c){n.list[t]=c,i&&i(c)}),!0)})),this}i(this.list[t])}};
window.wc.ui={toCategoryList:function(n){var e=(n=$.extend({type:"ul",onlyContent:1},n,!0)).type||"ul",o=n.renderItem,t=null;return"ul"==e?(t=wc.config.category.map((function(n){return o?o(n):`<li><a href="${n.url}">${n.name}</a></li>`})).join(""),n.onlyContent?t:`<ul>${t}</ul>`):"select"==e?(t=wc.config.category.map((function(n){return o?o(n):`<option value="${n.id}">${n.name}</option>`})).join(""),n.onlyContent?t:`<select class="form-control">${t}</select>`):"checkbox"==e?(t=wc.config.category.map((function(n){return o?o(n):`<li><label for="a${n.slug}">${n.name}</label><input id="a${n.slug}" type="checkbox" name="category[]" value="${n.id} /></li>`})).join(""),n.onlyContent?t:`<ul>${t}</ul>`):"radio"==e||"autocomplete"==e?(t=wc.config.category.map((function(n){return o?o(n):`<li><label for="a${n.slug}">${n.name}</label><input id="a${n.slug}" type="radio" name="category" value="${n.id} /></li>`})).join(""),n.onlyContent?t:`<ul>${t}</ul>`):void 0}};
!function(n){n.wc.user={config:null,autoload:function(){if(!this.config){this.ping()}},getUser:function(){return n.user.u},login:function(n){showLoader(),wc.ajax("wc_login",n.data,(function(c){hideLoader(),n.callback&&n.callback(c.data)}),!0)},register:function(n){showLoader(),wc.ajax("wc_register",n.data,(function(c){hideLoader(),n.callback&&n.callback(c.data)}),!0)},orders:function(n){n.callback&&n.callback(this.config.orders)},ping:function(n){var c=this,i=wc.user.getUser();i&&wc.ajax("wc_mine",{cache:1,userid:i.barcode||0},(function(i){c.config=i,n&&n()}),!0)},tree:function(n,c){"function"==typeof n&&(c=n,n=null);var i=this;wc.ajax("wc_user_tree",{id:n},(function(n){i.config=n,c&&c()}),!0)},tree_update:function(n,c){"function"==typeof n&&(c=n,n=null);var i=this;wc.ajax("wc_user_tree_update",{id:n},(function(n){i.config=n,c&&c()}),!0)}},$(document).on("onUser",(function(n,c){c&&wc.user.ping()}))}(window);
!function(){var a="userbagkiemtratangban",n=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,e,o){n=$(o.el)})).on(a+"_Init",(function(e,o,t){n=$(t.el);var i=a.pageData();n.find("form").validate({submitHandler:function(a){var n=$.extend(i,$(a).serializeObject(),!0);console.log(n),window.showLoader(),post(site_url_ajax("user.php?a=action"),n,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,n,e){}))}();
!function(){var n="userbagordercompleted";$(document).on(n+"_Before",(function(n,i,o){})).on(n+"_Init",(function(n,i,o){(wc.mine.config?wc.mine.config.orders:[]).map((function(n){var i=function(n){var i=n.products.map((function(n){return` <li class="order_items">\n                                <div class="order_image">\n                                    <img src="${n.image||n.img}">\n                                    </img>\n                                </div>\n                                <div class="order_information">\n                                    <p class="title">\n                                        ${n.title}\n                                    </p>\n                                    <div class="special">\n                                        <span>\n                                            Mu: Trng\n                                        </span>\n                                    </div>\n                                    <span class="order_price">\n                                        ${show_money_none(n.total)}\n                                    </span>\n                                    <span class="order_quantity">\n                                        S lng : ${show_money_none(n.quantity)}\n                                    </span>\n                                </div>\n                            </li>`})).join(""),o=" tip nhn n hng",a="n hng ang c tip nhn v c chuyn v kho.";switch(n.status){case"shipping":o="ang giao n hng",a="<p>\n                                    Nh bn hng ang chun b n hng ca bn\n                                </p>\n                                <p>\n                                    D kin giao hng 10:10 ngy 10-10-2023\n                                </p>";break;case"pending":o="ang x l n hng",a="n hng ang c tip nhn. chng ti ang x l..."}return`<div class="order">\n                        <a class="order_header">\n                            <p>\n                                <a href="/outlet/detail/${n.outlet.id}/">\n                                    <b style="color: #ca1515;">\n                                        ${n.outlet.name}\n                                        <i class="glyphicon glyphicon-chevron-right"></i>\n                                    </b>\n                                </a>\n                            </p>\n                            <p class="delivery_status">\n                                ${o} (${n.order_date})\n                            </p>\n                        </a>\n                        <a class="order_status">\n                            <div class="icon_left">\n                                <img src="https://cdn-icons-png.flaticon.com/512/9561/9561688.png">\n                                </img>\n                            </div>\n                            <div class="content_center">\n                                ${a}\n                            </div>\n                            <div class="icon_right">\n                                <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" viewbox="0 0 20 20" width="100%" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M9 18l6-6-6-6">\n                                    </path>\n                                </svg>\n                            </div>\n                        </a>\n                        <div class="info">\n                            <ul class="order_list">\n                           ${i}\n                            \n                        </ul>\n                        <p class="total_price">\n                                Tng cng (xx sn phm):\n                                <b>\n                                    ${show_money_none(n.order_total)}\n                                </b>\n                            </p>\n                        <div class="order_button">\n                            <a href="${n.url}" data-title="n hng #${n.order_id}" class="webview button button-round button-raised button-outline" style="background-color: #ca1515; color: white;">\n                                Theo di n hng\n                            </a>\n                        </div>\n                        </div>\n                    </div>`}(n);switch(n.status){case"processing":case"pending":case"on-hold":modal.find(".tabpending").removeAttr("nodata").append(i);break;case"ship":case"shipping":case"canceled":modal.find(".tabshipping").removeAttr("nodata").append(i)}})),modal.find(".order").on("click",(function(n){$(this).toggleClass("active")}))})).on(n+"_Leave",(function(n,i,o){}))}();
!function(){var a="userbagtangban",n=null;a.click(".link",(function(a){console.log(a.data)})),$(document).on(a+"_Before",(function(a,o,e){n=$(e.el)})).on(a+"_Init",(function(o,e,t){n=$(t.el);var i=a.pageData();n.find("form").validate({submitHandler:function(a){var n=$.extend(i,$(a).serializeObject(),!0);console.log(n),window.showLoader(),post(site_url_ajax("user.php?a=action"),n,(function(a){try{a.code?(mainView.router.back(),app.dialog.alert(a.message,"Thng bo")):app.dialog.alert(a.error)}catch(a){app.dialog.alert(a)}}),!0)}})})).on(a+"_Leave",(function(a,n,o){}))}();
!function(){var n="userbagticket";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(e,o,i){$("."+n+" form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),mainView.router.navigate("/home/",e)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="userbagvoucher";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(e,o,i){$("."+n+" form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),mainView.router.navigate("/home/",e)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="forgot",o="forgot";$(document).on(n+"_Before",(function(n,e,i){o=$(i.el)})).on(n+"_Init",(function(n,e,i){(o=$(i.el)).find("form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),window.showLoader(),e.code||post(site_url("api/user.php?a=sendOTPPhone"),e,(function(n){n.code&&o.find(".guide").html(`Vui lng SMS ca bn n s in thoi ${n.phone} v nhn gi <a class="external link" href="${n.guide}">ti y</a>`)}),!0)}})})).on(n+"_Leave",(function(n,o,e){}))}();
!function(){var n="forgotemail",i=null,e=null;function a(){var n=120;e&&clearInterval(e),e=setInterval((function(){i.find(".timer").html(n--+"s")}),1e3)}$(document).on(n+"_Before",(function(n,e,a){i=$(a.el)})).on(n+"_Init",(function(n,e,o){(i=$(o.el)).find("form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),window.showLoader(),e.code?e.code&&!e.password?post(site_url("api/user.php?a=verifyOTPEmail"),e,(function(n){n.code?i.find(".inputpass").removeClass("hide"):alert(n.error)}),!0):e.code&&e.password&&post(site_url("api/user.php?a=updatePassOTPEmail"),e,(function(n){n.code?mainView.router.navigate("/login/",{}):alert(n.error)}),!0):post(site_url("api/user.php?a=sendOTPEmail"),e,(function(n){n.code?(i.find(".inputcode").removeClass("hide"),a()):alert(n.error)}),!0)}}),i.find(".btn-clear-otp").on("click",(function(){i.find(".inputpass").addClass("hide"),i.find(".inputpass input").val("")})),i.find(".btn-resend").on("click",(function(){i.find(".inputpass").addClass("hide"),i.find(".inputpass input").val(""),i.find(".inputcode input").val(""),post(site_url("api/user.php?a=sendOTPEmail"),{email:i.find(".email").val()},(function(n){n.code?(i.find(".inputcode").removeClass("hide"),a()):alert(n.error)}),!0)}))})).on(n+"_Leave",(function(n,i,e){}))}();
!function(){var o="userforgothocsinh";$(document).on(o+"_Before",(function(o,n,e){$(e.el)})).on(o+"_Init",(function(o,n,e){$(e.el).find("form").validate({submitHandler:function(o){var n=$(o).serializeObject();console.log(n),window.showLoader(),post(site_url("api/user.php?a=login"),n,(function(o){try{o.code?(window.user.login(o.user),mainView.router.navigate("/intro/",{})):alert(o.error)}catch(o){alert(o)}}),!0)}})})).on(o+"_Leave",(function(o,n,e){}))}();
!function(){var o="userforgothocsinhforgotphuhuynh";$(document).on(o+"_Before",(function(o,n,e){$(e.el)})).on(o+"_Init",(function(o,n,e){$(e.el).find("form").validate({submitHandler:function(o){var n=$(o).serializeObject();console.log(n),window.showLoader(),post(site_url("api/user.php?a=login"),n,(function(o){try{o.code?(window.user.login(o.user),mainView.router.navigate("/intro/",{})):alert(o.error)}catch(o){alert(o)}}),!0)}})})).on(o+"_Leave",(function(o,n,e){}))}();
!function(){var o="userforgotphuhuynh";$(document).on(o+"_Before",(function(o,e,a){$(a.el)})).on(o+"_Init",(function(o,e,a){$(a.el).find("form").validate({submitHandler:function(o){var e=$(o).serializeObject();console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=sendOTPEmail"),e,(function(o){o.code?("/user/forgotstepotp/".navigate({email:o.email}),o.faker&&app.dialog.alert("OTP: <code data-copy='"+o.faker+"'>"+o.faker+" <i class='fa fa-clone'></i></code>","Phin bn gi lp")):app.dialog.alert("Khng tm thy ti khon","Thng bo")}),!0)}})})).on(o+"_Leave",(function(o,e,a){}))}();
!function(){var o="userforgotstepotp",e=null;$(document).on(o+"_Before",(function(o,n,a){e=$(a.el)})).on(o+"_Init",(function(n,a,t){e=$(t.el);var i=o.pageData();console.log(i),e.find(".email").html(i.email),e.find("form").validate({submitHandler:function(o){var e=$(o).serializeObject();e.username=i.email,console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=verifyOTPEmail"),e,(function(o){o.code?"/user/forgotsteppassword/".navigate({token:o.token}):app.dialog.alert("OTP khng hp l hoc  ht hn.","Thng bo")}),!0)}})})).on(o+"_Leave",(function(o,e,n){}))}();
!function(){var o="userforgotsteppassword",e=null;$(document).on(o+"_Before",(function(o,n,t){e=$(t.el)})).on(o+"_Init",(function(n,t,a){e=$(a.el),e=$(a.el);var s=o.pageData();console.log(s),e.find("form").validate({submitHandler:function(o){var e=$(o).serializeObject();e.token=s.token,console.log(e),window.showLoader(),post(site_url_ajax("user.php?a=updatePassFromOTPEmail"),e,(function(o){o.code?"/user/forgotstepsuccess/".navigate({token:o.token}):app.dialog.alert("OTP khng hp l hoc  ht hn.","Thng bo")}),!0)}})})).on(o+"_Leave",(function(o,e,n){}))}();
!function(){var e="userforgotstepsuccess";$(document).on(e+"_Before",(function(e,o,n){$(n.el)})).on(e+"_Init",(function(e,o,n){$(n.el).find("form").validate({submitHandler:function(e){var o=$(e).serializeObject();console.log(o),window.showLoader(),post(site_url("api/user.php?a=login"),o,(function(e){try{e.code?(window.user.login(e.user),mainView.router.navigate("/intro/",{})):alert(e.error)}catch(e){alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,o,n){}))}();
!function(a){var i="authkyc",n=null,t={};$(document).on(i+"_Before",(function(a,n,o){t=i.pageData()})).on(i+"_Init",(function(a,i,o){n=$(o.el),File.imgUpload(n.find(".boxm1"),{field:"id_front",label:"Mt trc CMND / CCCD",callback:function(a){}}),File.imgUpload(n.find(".boxm2"),{field:"id_back",label:"Mt sau CMND / CCCD",callback:function(a){}}),File.imgUpload(n.find(".boxm3"),{field:"id_with_face",label:"nh chn dung",callback:function(a){}}),n.find("form").formValidate({submitHandler:function(a){t.images=a.data,a.data.id_front?a.data.id_back?a.data.id_with_face?(AppStorege.user.updateKey("images",t.images,(function(a){})),"/auth/kyc/data/".navigate(t)):Toast.Top("Vui lng ti nh chn dung"):Toast.Top("Vui lng ti Mt sau CMND / CCCD"):Toast.Top("Vui lng ti Mt trc CMND / CCCD")}})})).on(i+"_Leave",(function(a,i,n){}))}(window);
!function(n){var t="authkycdata";$(document).on(t+"_Before",(function(n,a,e){t.pageData()})).on(t+"_Init",(function(n,t,a){$(a.el).find("form").formValidate({submitHandler:function(n){AppStorege.user.updateKey("kyc",n.data,(function(n){})),"/home/".navigate()}})})).on(t+"_Leave",(function(n,t,a){}))}(window);
!function(t){var a="userlogin",n=null;function r(a){t.user.login(a),$('meta[name="auth-token"]').attr("content",a.passkey),"/home/".navigate()}$(document).on(a+"_Before",(function(a,r,e){n=$(e.el),t.ReduxThunk.clear(),document.location.origin.includes("localhost")&&(n.find(".username").val("0909656119"),n.find(".password").val("123123"))})).on(a+"_Init",(function(a,e,o){if(n=$(o.el),t.ReduxThunk.clear(),!$("html").hasClass("ios")&&!$("html").hasClass("android")&&0==app.config.device.desktop)return n.find(".page-content").html('\n                <div class="flex-col center"><svg width="470" height="290" viewBox="0 0 470 290"><defs><path class="fundo" id="prefix__a" d="M5.063 128.67c-2.513 15.192 5.633 31.093 17.898 38.941 5.99 3.832 13.34 6.528 16.471 13.254 4.868 10.452-3.879 22.437-13.113 28.515-9.236 6.078-20.5 10.9-24.704 21.683-2.771 7.108-1.685 15.387 1.058 22.507 10.06 26.112 39.393 37.547 65.479 36.15 26.086-1.396 50.827-12.407 76.416-18.075 87.873-19.465 180.005 24.717 267.728 4.47 13.65-3.151 27.4-8.081 37.943-17.99 11.883-11.167 18.632-28.016 19.65-45.023.97-16.225-4.34-34.495-17.744-41.806-7.834-4.273-17.196-4.1-25.7-1.774-5.43 1.483-10.767 3.808-16.369 3.848-5.601.038-11.763-3-13.386-8.808-1.707-6.107 2.182-12.41 6.642-16.577 9.072-8.474 21.203-12.707 29.441-22.126 7.927-9.063 11.264-22.574 8.574-34.716-2.692-12.141-11.326-22.538-22.188-26.715-27.683-10.645-57.844 18.377-86.152 9.873-2.101-.63-4.312-1.605-5.418-3.641-1.08-1.988-.834-4.51-.214-6.716 3.468-12.348 16.939-20.21 17.528-33.102.32-7.008-3.504-13.564-8.325-18.251-33.126-32.2-81.125 6.102-114.9 18.194-55.542 19.884-112.157 36.49-167.849 55.963-20.81 7.275-44.91 18.606-48.766 41.922z"></path></defs><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M0 0H1366V800H0z" transform="translate(-448 -157)"></path><g transform="translate(-448 -157) translate(448 157)"><mask id="prefix__b" fill="#fff"></mask><path fill="#EDEDF0" fill-rule="nonzero" d="M-14.199 211.2H481.36V301.2H-14.199z" mask="url(#prefix__b)"></path><g class="paes"><g class="pao-baixo"><path fill="#FBB965" d="M2.79 131.737s-2.073 3.155-2.479 6.868c-.406 3.713-.747 9.666 1.24 13.372 1.985 3.707 12.69 20.8 65.175 21.02 53.15.225 69.188-15.685 70.59-18.977 2.605-6.118 1.838-21.327.06-22.283-1.777-.956-44.044-3.204-72.446-4.057-28.402-.854-49.872-1.968-62.14 4.057" transform="translate(161 68)"></path><path fill="#E6A95F" d="M34.648 167.758c-8.863-1.526-23.515-6.939-30.292-14.218-6.775-7.28-2.096-8.803 3.508-5.387 5.605 3.415 24.569 11.557 54.124 12.263 29.555.706 61.424-6.946 72.2-17.053 0 0 2.705-1.47 2.768 1.509.062 2.98.428 7.948-2.769 10.507-3.196 2.558-34.805 23.526-99.54 12.379" transform="translate(161 68)"></path><path fill="#FFDA7F" d="M5.679 131.837c-6.522 1.646-.275 6.91 9.492 12.14 9.767 5.229 28.24 10.257 44.267 10.015 16.028-.243 37.48-.481 52.543-5.333 15.06-4.852 16.223-9.55 17.998-13.298 1.774-3.748-107.32-7.809-124.3-3.524" transform="translate(161 68)"></path></g><g class="pao-cima"><path fill="#FBB868" d="M71.37 0C49.008.035-2.43.631 1.18 51.16c0 0-.018 10.84 62.825 10.84 62.844 0 72.591-9.633 73.721-11.173C142.284 44.623 147.583-.117 71.37 0" transform="translate(161 68)"></path><path fill="#E6A95F" d="M34.552 61c-7.628-1.006-23.98-2.904-27.586-5.506-3.606-2.604-7.448-2.895-5.39-10.826.842-3.242 7.976-.619 11.264.839 3.289 1.458 21.239 6.047 42.989 6.673 21.75.625 57.126-1.679 67.42-5.458 9.806-3.598 13.662-7.027 15.493-5.228 2.396 2.351 1.687 8.008-4.913 12.215-6.252 3.985-27.53 7.2-49.434 7.76-21.904.56-38.604 1.012-49.843-.469" transform="translate(161 68)"></path><path fill="#FFEAD4" d="M45.508 13.114c-.368.549-.54 1.598-.503 2.445.017.392.297.604.45.287.143-.297.222-.617.303-.978.087-.387.197-.735.238-1.15.042-.44-.257-.95-.488-.604M42.092 9.016c-.694.13-1.446.61-1.774 1.098-.168.248-.3.512-.317.792-.017.313.154.503.29.776.249.494 1.245.392 1.22-.162-.014-.274.33-.612.54-.817.367-.361.75-.62.923-1.075.154-.404-.413-.7-.882-.612M51.621 9.247c-.182-.409-.68-.325-.615.364.063.687.007 1.485.25 2.067.19.458.694.473.737-.25.043-.759-.109-1.592-.372-2.181M32.55 15.101c-1.206.547-1.849 1.662-1.414 2.552.188.384 1.21.504 1.46.077.188-.32.407-.629.616-.942.243-.363.63-.675.767-1.064.173-.486-.753-.93-1.43-.623M29.793 9.012c-.26-.108-.498.532-.62.942-.166.565-.205 1.033-.149 1.674.053.59.424.405.493-.048-.002.014.102-.302.138-.4.093-.247.18-.497.262-.76.113-.359.144-1.297-.124-1.408M38.384 6.056c-.737-.211-1.406.211-1.881.674-.53.514-.607 1.19-.39 1.829.167.5 1.09.632 1.326.096.127-.285.31-.53.533-.764.304-.32.72-.44.944-.848.237-.429-.053-.85-.532-.987M21.722 10.101c-.484-.28-1.16.08-1.542.378-.57.444-.957.924-1.152 1.628-.21.764.802 1.182 1.296.663.4-.42.901-.746 1.308-1.172.319-.334.594-1.205.09-1.497M23.513 15.078c-.385.414-.505 1.566-.513 2.381-.005.47.333.749.47.35.206-.592.422-1.34.517-2.047.082-.598-.253-.921-.474-.684M38.964 14.6c-.26-.324-1.293-.581-2.192-.6-.626-.012-.971.28-.65.452.459.244 1.155.57 2.063.547.56-.014.936-.205.78-.4M51.58 3.028c-.54-.1-.912.074-1.399.401-.45.304-.83.813-1.092 1.395-.344.76.386 1.437.866 1.076.662-.5 1.41-.857 1.914-1.641.255-.397.126-1.152-.29-1.23M66.234 9c-.923 0-2.062.305-2.227.708-.074.182.437.384.836.247.537-.185 1.29-.187 1.832-.364.59-.193.337-.591-.441-.591M60.589 9.375c-.101-.522-.482-.493-.556.048-.12.852.102 1.815.423 2.412.213.396.543.02.544-.494.002-.736-.283-1.302-.411-1.966M69.955 3.569c-.44-.473-1.713-.712-2.727-.479-.37.085-.24.315.044.396.601.173 1.168.408 1.848.503.49.069 1.042-.199.835-.42M73.956 10.626c-.231-.836-.735-1.255-1.316-1.507-.24-.104-.5-.147-.75-.1-.148.028-.273.063-.407.161-.032.022-.373.238-.223.161-.282.148-.382.791-.057.979.117.067.22.24.333.325.168.128.336.247.508.364.327.219.564.609.873.868.537.45 1.27-.42 1.04-1.251M66.549 15.017c-.83-.233-.486 2.056-.435 2.528.055.51.678.664.741.08.068-.628.42-2.405-.306-2.608M54.803 16.301c-.065-.347-.1-.709-.19-1.038-.107-.393-.44-.32-.532.052-.186.746-.052 2.313.405 2.636.225.16.545-.077.512-.623-.024-.375-.13-.676-.195-1.027M39.534 21.024c-.423.212-.58 1.352-.523 2.174.066.946.664 1.13.785.144.065-.538.22-1.041.203-1.612-.016-.528-.238-.82-.465-.706M15.946 21.201c-.04-.142-.134-.197-.214-.2-.311-.02-.464.621-.576 1.05-.124.468-.188.945-.14 1.461.053.562.486.699.57.088.053-.375.146-.754.233-1.107.108-.439.265-.815.127-1.292M14.918 16.274c-.067-.169-.25-.279-.46-.274-.571.015-1.05.232-1.55.61-.562.422-.976 1.023-.899 1.675.081.697.993.942 1.574.476.407-.326.746-.755 1.058-1.149.364-.462.441-.923.277-1.338M62.906 5.209c-.447-.277-1.34-.251-1.957-.083-.279.077-.57.172-.738.298-.069.051-.108.105-.15.16-.025.038-.037.076-.038.115.043.077.042.09-.003.037-.154.243.622.357.925.173.227-.051.444-.104.705-.13.521-.054 1.021-.089 1.286-.315.092-.078.088-.182-.03-.255M52.906 8.291c-.191-.24-.402-.204-.634-.28-.218-.073-.326.255-.245.491.117.34.438.509.697.497.26-.01.37-.472.182-.708M80.437 1.283c-.385-.22-.844-.327-1.272-.266-.497.071-.7.363-1.033.724-.356.388.07 1.143.54.93l-.065-.083c.095.05.192.08.295.09.177.032.31.074.477.16.373.189.702.503 1.023.78.348.301 1.738.788 1.586-.245-.141-.963-.789-1.652-1.551-2.09M78.955 8.082c-.134-.55-.259-1.126-.366-1.703-.102-.548-.457-.476-.541.05-.073.453-.057.877.01 1.331.083.548.286.874.512 1.17.11.144.276.048.357-.132.097-.215.088-.476.028-.716M87.395 8c-.77.016-1.317.338-2.032.43-.505.065-.477.525.046.56.713.047 1.359-.082 2.053-.14.468-.04 1.35.253 1.516-.164.191-.483-.906-.7-1.583-.685M81.958 14.767c-.103-.44-.306-.8-.377-1.279-.095-.644-.518-.678-.57.063-.07.998.19 1.845.53 2.34.293.426.566-.494.417-1.124M99.918 9.365c-.177-.18-.36-.23-.56-.337-.295-.16-.508.405-.225.646.181.155.805.626.863.04.012-.119-.003-.273-.078-.349M93.308 4.792c-.387-.436-.932-.682-1.466-.78-.809-.145-1.17 1.02-.47 1.477.65.427 1.772 2.34 2.503 1.097.376-.641-.178-1.356-.567-1.794M91.498 10.138c-.32.55-.428 1.334-.494 2.18-.043.546.266.928.442.494.21-.512.38-1.126.522-1.741.139-.605-.204-1.393-.47-.933M103.977 8.863c-.265-1.177-1.477-2.153-2.51-1.784-.548.195-.653 1.156-.104 1.442.294.153.53.397.762.655.326.36.549.611.988.784.564.223.992-.535.864-1.097M100.988 4.781c.03-.437-.169-.702-.568-.724-.906-.33-1.89.849-2.3 1.608-.47.873.538 1.63 1.223 1.22.683-.406 1.786-1.108 1.645-2.104M110.532 7.06c-.238-.218-.568.203-.463.619l.012.045c-.01.096-.001.204 0 .297 0 .14-.016.294-.025.434-.012.181-.043.357-.053.539-.013.245.016.45.06.612.091.33.32.515.53.304.108-.11.286-.37.335-.709.04-.276.058-.554.07-.836.024-.568-.189-1.052-.466-1.306M108.458 14.127c-.434-.548-.995-.921-1.662-1.103-.746-.203-1.116.933-.445 1.28.216.11.4.251.557.443.204.248.42.648.672.84.348.262.868.645 1.249.23.437-.478-.064-1.305-.37-1.69M117.71 13.184c-.282.276-.558.555-.852.815-.143.126-.333.256-.446.42-.108.156-.174.34-.284.489-.392.535.193 1.412.694.973.104-.091.318-.086.446-.134.16-.062.324-.11.486-.169.51-.186.872-.578 1.145-1.11.418-.816-.553-1.907-1.188-1.284M97.93 18.019c-.834-.165-1.209.791-.697 1.348.495.538 1.83 2.49 2.627 1.2.636-1.034-1.044-2.373-1.93-2.548M124.69 17.006c-.372.072-.428.396-.629.626-.202.23.139.496.376.3.22-.181.506-.403.559-.676.032-.168-.129-.285-.307-.25M115.979 19.839c-.079-.499-.153-.976-.264-1.445-.205-.86-.853-.174-.689.73.089.49.148.982.25 1.46.196.907.849.182.703-.745M78.957 24.496c.068-.31.05-.616-.02-.91-.077-.321-.14-.65-.183-1.002-.099-.82-.671-.76-.736.076-.056.71.019 1.361.23 1.918.132.348.265.461.467.377-.18.076.075.038.116.016.071-.038.117-.183.135-.33.01-.08.063-.472-.009-.145M61.924 22.403c-.057-.057-.16-.13-.189-.2-.132-.33-.73-.229-.735.1-.004.27.047.533.379.665.186.073.458.02.543-.14l.027-.053c.06-.114.083-.266-.025-.372M106.798 22.22c-.107-.292-.757-.304-.794.028-.032.293.107.618.488.731.229.068.532-.032.507-.257-.021-.186-.137-.329-.201-.502M70.884 28.197c-.13-.291-.716-.24-.83.025-.131.304-.034.606.41.754.101.033.24.034.334-.012.326-.16.181-.553.086-.767" transform="translate(161 68)"></path><g class="olhos"><path fill="#633" d="M51.976 32.505c.27 2.748-1.735 5.197-4.476 5.47-2.748.274-5.199-1.732-5.476-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469 4.48M93.976 28.505c.27 2.748-1.735 5.197-4.483 5.47-2.748.273-5.192-1.733-5.469-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469  4.48M65.03 45.127c2.1-5.726 9.106-6.606 13.113-2.171.408.462-.277 1.204-.725.77-3.981-3.892-9.17-2.951-11.83 1.745-.187.333-.68-.002-.558-.344 " transform="translate(161 68)"></path></g></g></g><g fill-rule="nonzero" stroke="#979797" stroke-linecap="round" stroke-width="1.8" class="left-sparks"><path d="M23.684 5.789L30 1.158" transform="rotate(-90 157 13)"></path><path d="M0 5.789L6.316 1.158" transform="rotate(-90 157 13) matrix(-1 0 0 1 6.316 0)"></path><path d="M15.789 4.632L15.789 0" transform="rotate(-90 157 13)"></path></g><g fill-rule="nonzero" stroke="#979797" stroke-linecap="round" stroke-width="1.8" class="right-sparks"><path d="M23.684 5.789L30 1.158" transform="matrix(0 -1 -1 0 318 170)"></path><path d="M0 5.789L6.316 1.158" transform="matrix(0 -1 -1 0 318 170) matrix(-1 0 0 1 6.316 0)"></path><path d="M15.789 4.632L15.789 0" transform="matrix(0 -1 -1 0 318 170)"></path></g><path fill="#4B4B62" class="path" fill-rule="nonzero" stroke="#4B4B62" stroke-width="2" d="M198.754 186c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H186.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608zm32.277 1c15.3 0 18.969-5.248 18.969-13.056V152.12c0-7.808-3.67-13.12-18.969-13.12-15.3 0-19.031 5.312-19.031 13.12v21.824c0 7.808 3.732 13.056 19.031 13.056zm.969-12c-4.25 0-5-1.27-5-2.986v-17.091c0-1.652.75-2.923 5-2.923 4.313 0 5 1.27 5 2.923v17.09c0 1.716-.688 2.987-5 2.987zm62.754 11c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H282.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608z"></path></g></g></svg>\n                <span class="ant-typography" style="font-size: 30px; font-family: &quot;Source Code Pro&quot;, monospace;"><strong>Thit b khng ph hp</strong></span>\n                </div> '),void n.find(".toolbar").remove();var s=n.find("form");n.find(".btnforgot").on("click",(function(){Toast.Center("Vui lng lin h t vn vin  c h tr.")})),n.find(".request").on("click",(function(){s.hasClass("register")?(s.removeClass("register"),s.find(".btn-submit").html("ng nhp"),$(this).html('Cha c ti khon ?  <strong class="text-primary">ng k ngay</strong>')):(s.addClass("register"),s.find(".btn-submit").html("ng k"),$(this).html(' c ti khon ?  <strong class="text-primary">ng nhp ngay</strong>'))})),s.formValidate({submitHandler:function(t){var a=t.data;if(s.hasClass("register"))return a.password!=a.repassword?void Toast.Top("Mt khu khng ging nhau","Thng bo"):void post(site_url_ajax("auth.php?a=register"),a,(function(t){t.code?r(t.data):alert(t.error)}),!0);console.log(a),post(site_url_ajax("auth.php?a=login"),a,(function(t){t.code?r(t.data):alert(t.error)}),!0)}})})).on(a+"_Leave",(function(t,a,n){})),userSDK.listen((function(a,n){"onUser"==a?(window.user.u=$.extend(t.user.u,n,!0),$(document).trigger("onUser",[n])):"onLogout"==a?$(document).trigger("onLogout",[n]):"onLogin"==a&&$(document).trigger("onUser",[n])}));var e=t.user.logout;t.user.logout=function(a){userSDK.logout(),e.call(t.user,a)},t.addEventListener("click",(function(a){if(t.userSDK){var n=$(a.target).hasClass("accid")?$(a.target):$(a.target).closest("[data-acc]");n.length&&(window.user.hasLogin()?n.attr("data-acc").navigate({}):userSDK.open((function(t){t.passkey&&(document.querySelector('meta[name="auth-token"]').setAttribute("content",t.passkey),window.user.u=t,window.user.login(t),userSDK.profile((function(a){a&&(a.passkey=t.passkey,window.user.u=$.extend(window.user.u,a,!0),$(document).trigger("onUser",[a]))})))})))}}),!0)}(window);
!function(){var e="register";$(document).on(e+"_Before",(function(e,n,r){})).on(e+"_Init",(function(e,n,r){$(".register form").validate({submitHandler:function(e){var n=$(e).serializeObject();console.log(n),postajax("user/?a=registerbyphone",n,(function(e){e.code?(window.user.login(e.user),"/user/registerpassword/".navigate(e)):alert(e.error)}))}})})).on(e+"_Leave",(function(e,n,r){}))}();
!function(){var e="userregistergiaovien",o=null;$(document).on(e+"_Before",(function(e,n,a){o=$(a.el)})).on(e+"_Init",(function(n,a,i){o=$(i.el);var r=e.pageData();console.log(r),o.find("form").validate({submitHandler:function(e){var o=$.extend(r,$(e).serializeObject(),!0);console.log(o),o.role="giaovien",window.showLoader(),post(site_url_ajax("user.php?a=register"),o,(function(e){try{e.code?"/user/login/".navigate({}):app.dialog.alert(e.error,"Thng bo")}catch(e){alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,o,n){}))}();
!function(){var e="userregisterhocsinh",o=null;$(document).on(e+"_Before",(function(e,n,r){o=$(r.el)})).on(e+"_Init",(function(n,r,a){o=$(a.el);var t=e.pageData();console.log(t),o.find("form").validate({submitHandler:function(e){var o=$.extend(t,$(e).serializeObject(),!0);console.log(o),o.role="hocsinh",window.showLoader(),post(site_url_ajax("user.php?a=register"),o,(function(e){try{e.code?"/user/login/".navigate({}):app.dialog.alert(e.error,"Thng bo")}catch(e){alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,o,n){}))}();
!function(){var e="userregisterophuhuynh",n=null;$(document).on(e+"_Before",(function(e,o,r){n=$(r.el)})).on(e+"_Init",(function(o,r,a){n=$(a.el);var t=e.pageData();n.find("form").validate({submitHandler:function(e){var n=$.extend(t,$(e).serializeObject(),!0);console.log(n),n.role="phuhuynh",window.showLoader(),post(site_url_ajax("user.php?a=register"),n,(function(e){try{e.code?"/user/login/".navigate({}):app.dialog.alert(e.error,"Thng bo")}catch(e){alert(e)}}),!0)}})})).on(e+"_Leave",(function(e,n,o){}))}();
!function(){var e="registerotp",t=null;$(document).on(e+"_Before",(function(e,t,n){})).on(e+"_Init",(function(n,r,i){$(".registerotp form").validate({submitHandler:function(e){var t=$(e).serializeObject();console.log(t),mainView.router.navigate("/user/registerpassword/",t)}}),$(".registerotp .resendcode").on("click",(function(){}));var o=1*$("."+e+" .timer").attr("data-timer");t=setInterval((function(){--o>0?$(".registerotp .timer").html(o):(clearInterval(t),t=null)}),1e3)})).on(e+"_Leave",(function(e,n,r){t&&(clearInterval(t),t=null)}))}();
!function(){var e="registerpassword";$(document).on(e+"_Before",(function(e,t,n){})).on(e+"_Init",(function(t,n,r){$("."+e+" form").validate({submitHandler:function(e){var t=$(e).serializeObject();console.log(t);var n=$(e).attr("action")?$(e).attr("action"):"/user/registersuccess/";postajax("user/?a=registerupdatepass",t,(function(e){e.code?n.navigate(t):alert(e.error)}))}})})).on(e+"_Leave",(function(e,t,n){}))}();
!function(){var n="registersuccess";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(n,e,o){$(".registersuccess form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),post("...",e,(function(n){}),!0)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="userothersetting";$(document).on(n+"_Before",(function(n,e,o){$(o.el)})).on(n+"_Init",(function(n,e,o){$(o.el).find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="userotheraddadress",t=null;$(document).on(n+"_Before",(function(n,e,i){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,e,i){(t=$(i.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,e){}))}();
!function(){var n="useraccountotheradressbook",t=null;$(document).on(n+"_Before",(function(n,e,i){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,e,i){(t=$(i.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,e){}))}();
!function(){var n="useraccountotherphonebook",t=null;$(document).on(n+"_Before",(function(n,e,i){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,e,i){(t=$(i.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,e){}))}();
!function(){var e="userothershareqr",n=null;$(document).on(e+"_Before",(function(e,a,t){n=$(t.el)})).on(e+"_Init",(function(e,a,t){n=$(t.el);var r=window.user.hasLogin();r&&n.find(".refercode").html(r.username),n.find(".qrcode").html("").qrcode({width:175,height:175,text:r.username}),n.find("[data-share]").attr("data-share","Cho mng bn n .Tham giao cng vi ti. M gii thiu: "+r.username),n.find("[data-copy]").attr("data-copy",r.username)})).on(e+"_Leave",(function(e,n,a){}))}();
!function(){var n="useraccountutilitymanagespending";$(document).on(n+"_Before",(function(n,e,i){$(i.el)})).on(n+"_Init",(function(n,e,i){$(i.el).find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,e,i){}))}();
!function(){var n="useraccountutilityutility";$(document).on(n+"_Before",(function(n,i,o){})).on(n+"_Init",(function(i,o,t){$("."+n+" form").validate({submitHandler:function(n){var i=$(n).serializeObject();console.log(i),mainView.router.navigate("/home/",i)}})})).on(n+"_Leave",(function(n,i,o){}))}();
!function(){var n="userfogotchoice",o=null;$(document).on(n+"_Before",(function(n,t,e){o=$(e.el)})).on(n+"_Init",(function(n,t,e){o=$(e.el),o.find(".page-content"),tlp=root.clone().html();root.html(Handlebars.compile(tlp)({})),o.find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,o,t){}))}();
!function(){var n="userfogotnewpassword",o=null;$(document).on(n+"_Before",(function(n,e,t){o=$(t.el)})).on(n+"_Init",(function(n,e,t){o=$(t.el),o.find(".page-content"),tlp=root.clone().html();root.html(Handlebars.compile(tlp)({})),o.find("form").validate({submitHandler:function(n){mainView.router.navigate("/user/login/")}})})).on(n+"_Leave",(function(n,o,e){}))}();
!function(){var n="useraccountfogotviaemail",o=null;$(document).on(n+"_Before",(function(n,t,e){o=$(e.el);$.extend({},e.route.params,!0)})).on(n+"_Init",(function(n,t,e){o=$(e.el);$.extend({},e.route.params,!0);o.find(".page-content"),tlp=root.clone().html();root.html(Handlebars.compile(tlp)({})),o.find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,o,t){}))}();
!function(){var n="useraccountfogotviaphone",o=null;$(document).on(n+"_Before",(function(n,t,e){o=$(e.el);$.extend({},e.route.params,!0)})).on(n+"_Init",(function(n,t,e){o=$(e.el);$.extend({},e.route.params,!0);o.find(".page-content"),tlp=root.clone().html();root.html(Handlebars.compile(tlp)({})),o.find("form").validate({submitHandler:function(n){}})})).on(n+"_Leave",(function(n,o,t){}))}();

!function(){var e="useraccountregisterphoneregister";$(document).on(e+"_Before",(function(e,o,t){$(t.pageEl)})).on(e+"_Init",(function(e,o,t){$(t.pageEl).find("form").validate({submitHandler:function(e){var o=$(e).serializeObject();console.log(o),post(site_url("api/user.php?a=registerbyphone"),o,(function(e){"object"==typeof e?1==e.code?(window.user.login(e.data),1==o.nootp?"/user/account/register/registerpassword/".navigate(o):"/user/account/register/registerotp/".navigate(o)):bootbox.alert(e.error):bootbox.alert(e)}),!0)}})})).on(e+"_Leave",(function(e,o,t){}))}();
!function(){var n="useraccountregisterregisteravatar";$(document).on(n+"_Before",(function(n,e,o){$(o.pageEl)})).on(n+"_Init",(function(n,e,o){$(o.pageEl)})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var e="useraccountregisterfullname",n=null;$(document).on(e+"_Before",(function(e,o,t){n=$(t.pageEl)})).on(e+"_Init",(function(e,o,t){(n=$(t.pageEl)).find("form").validate({submitHandler:function(e){var n=$.extend(params,$(e).serializeObject(),!0);window.user.append(n),console.log(n),window.showLoader(),post(site_url("api/user.php?a=updatefullname"),n,(function(e){"object"==typeof e?1==e.code?"/user/register/registersuccess/".navigate():bootbox.alert(e.error):bootbox.alert(e)}),!0)}}),n.find(".btn-skip").on("click",(function(){"/user/register/registersuccess/".navigate()}))})).on(e+"_Leave",(function(e,n,o){}))}();
!function(){var e="useraccountregisterregisterotp",t=null;$(document).on(e+"_Before",(function(e,n,i){t=$(i.pageEl)})).on(e+"_Init",(function(n,i,d){t=$(d.pageEl);var a=$.extend({},d.route.params,!0);t.find(".digit-input-wrapper input").each((function(){$(this).attr("maxlength",1),t.find(".button").addClass("disable"),$(this).on("keyup",(function(e){var n=$($(this).parent());if(8===e.keyCode||37===e.keyCode){var i=n.find("input#"+$(this).data("previous"));i.length&&($(i).select(),t.find(".button").addClass("disable"))}else if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||e.keyCode>=96&&e.keyCode<=105||39===e.keyCode){var d=n.find("input#"+$(this).data("next"));d.length?($(d).select(),t.find(".button").addClass("disable")):(n.data("autosubmit"),t.find(".button").removeClass("disable"))}}))}));var o=1*$("."+e+" .timer").attr("data-timer");id_timer=setInterval((function(){--o>0?(t.find(".resendcode").addClass("disable"),t.find(".resendcode .timer").html(o)):(t.find(".resendcode").removeClass("disable"),t.find(".resendcode .timer").hide(),clearInterval(id_timer),id_timer=null)}),1e3),t.find("form").validate({submitHandler:function(e){var t=$.extend(a,$(e).serializeObject(),!0);t.otp?(window.user.append(t),console.log(t),window.showLoader(),post(site_url("..."),t,(function(e){mainView.router.navigate("/user/account/register/registerpassword/",{params:t})}),!0)):app.dialog.alert("Vui lng nhp m OTP")}}),t.on("click",".resendcode",(function(){window.showLoader(),post(site_url("..."),a,(function(e){app.dialog.alert("Code sent")}),!0)}))})).on(e+"_Leave",(function(e,t,n){}))}();
!function(){var e="userregisterregisterpassword",o=null;$(document).on(e+"_Before",(function(e,t,n){o=$(n.pageEl)})).on(e+"_Init",(function(e,t,n){o=$(n.pageEl),console.log(o,1111),o.find("form").validate({submitHandler:function(e){var o=$(e).serializeObject();console.log(o),window.showLoader(),post(site_url("api/user.php?a=updatepassfirst"),o,(function(e){"object"==typeof e?1==e.code?"/user/account/register/registerfullname/'".navigate():bootbox.alert(e.error):bootbox.alert(e)}),!0)}})})).on(e+"_Leave",(function(e,o,t){}))}();

!function(){var n="useraccountchangeinfor";$(document).on(n+"_Before",(function(n,o,e){})).on(n+"_Init",(function(o,e,i){$("."+n+" form").validate({submitHandler:function(n){var o=$(n).serializeObject();console.log(o),mainView.router.navigate("/home/",o)}})})).on(n+"_Leave",(function(n,o,e){}))}();
!function(n){var o="changepassword";$(document).on(o+"_Before",(function(n,o,a){$(a.el)})).on(o+"_Init",(function(n,o,a){$(a.el).find("form").validate({submitHandler:function(n){var o=$(n).serializeObject();app.dialog.confirm("Bn c mun chc?","Cnh bo",(function(){window.showLoader(),userSDK.updatepass(o,(function(n){try{n.code?(alert("Cp nht thnh cng"," Xin chc mng"),mainView.router.back()):app.dialog.alert(n.error)}catch(n){app.dialog.alert(n)}}),!0)}),(function(){}))}})})).on(o+"_Leave",(function(n,o,a){}))}(window);
!function(n){var e="useraccountinformationinfor",i=null;function t(n,e){n.css({transform:"rotate("+e+"deg)"})}$(document).on("click","#"+e+" .item-inner",(function(){var n=$(this),e=n.parent(),i=n.find(".item-inner-icon"),o=e.find(".input-wrapper");o.hasClass("hide")&&(o.removeClass("hide"),t(i,90),o.find("input").focus())})).on("click","#"+e+" .done-btn",(function(){var i=$(this).parent(),o=i.siblings(".item-inner").find(".item-inner-icon"),a=i.find("input");a.length||(a=i.find("select")),a=a[0];n.user.hasLogin();var r={};r.k=a.name,r.v=a.value,$("#"+e).find("."+a.name).html(a.value),userSDK.updatekey(r.k,r.v,(function(e){"object"==typeof e?1==e.code?(n.user.append(a.name,a.value),i.addClass("hide"),t(o,0),Toast.Top("Cp nht thnh cng.")):Toast.Center(e.error):Toast.Center(e)}))})),$(document).on(e+"_Before",(function(e,t,o){i=$(o.el);var a=n.user.hasLogin();for(var r in console.log(a),a)i.find("."+r).html(a[r]);i.find(".fullname_user").html(a.fullname||a.username)})).on(e+"_Init",(function(n,e,t){i=$(t.el)})).on(e+"_Leave",(function(n,e,i){}))}(window);
!function(n){var o="useraccountinformationsecretotp";$(document).on(o+"_Before",(function(n,o,i){$(i.el)})).on(o+"_Init",(function(n,o,i){$(i.el).find("form").validate({submitHandler:function(n){var o=$(n).serializeObject();app.dialog.confirm("Bn c mun chc?","Cnh bo",(function(){window.showLoader(),userSDK.OTP.update(o,(function(n){try{n.code?(alert("Cp nht thnh cng"," Xin chc mng"),mainView.router.back()):app.dialog.alert(n.error)}catch(n){app.dialog.alert(n)}}),!0)}),(function(){}))}})})).on(o+"_Leave",(function(n,o,i){})),n.OTPConfirm=function(o){var i=pickerPasscodeConfirm({onValidate:function(e){n.user.hasLogin()&&(i.loading.show(),userSDK.OTP.validate(e,(function(n){i.loading.hide(),n?n.code?o&&o():i.error(n.error):i.error(n)})))}})}}(window);
!function(){var n="userinformationupdateinfor",o=null;$(document).on(n+"_Before",(function(n,t,e){o=$(e.el)})).on(n+"_Init",(function(n,t,e){o=$(e.el),o.find(".page-content"),tlp=root.clone().html();root.html(Handlebars.compile(tlp)({})),o.find("form").validate({submitHandler:function(n){mainView.router.back()}})})).on(n+"_Leave",(function(n,o,t){}))}();
!function(){var e="updateregisterpassword";$(document).on(e+"_Before",(function(e,n,o){modal=$(o.el)})).on(e+"_Init",(function(e,n,o){modal=$(o.el),modal.find("form").validate({submitHandler:function(e){var n=$(e).serializeObject();userSDK.updatePass(n,(function(e){e.code?"/user/account/".navigate():alert(e.error)}))}})})).on(e+"_Leave",(function(e,n,o){}))}();
!function(){var i="useraccountverificationallverified",n=null;$(document).on(i+"_Before",(function(i,t,e){n.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var i=$(this).attr("data-setbg");$(this).css("background-image","url("+i+")")}))})).on(i+"_Init",(function(i,t,e){(n=$(e.el)).find("form").validate({submitHandler:function(i){var n=$(i).serializeObject();console.log(n),mainView.router.navigate("/home/",n)}})})).on(i+"_Leave",(function(i,n,t){}))}();
!function(){var i="useraccountverificationemailverified",n=null;$(document).on(i+"_Before",(function(i,t,e){n.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var i=$(this).attr("data-setbg");$(this).css("background-image","url("+i+")")}))})).on(i+"_Init",(function(i,t,e){(n=$(e.el)).find(".digit-input-wrapper").inputCodeOTP({onReady:function(i){n.find(".button").removeClass("disable")}}),n.find("form").validate({submitHandler:function(i){var n=$(i).serializeObject();mainView.router.navigate("/home/",n)}})})).on(i+"_Leave",(function(i,n,t){}))}();
!function(){setTimeout((function(){loadJS("https://unpkg.com/webcam-easy@1.0.5/dist/webcam-easy.min.js",(function(){})),loadCSS("https://f7.donggiatri.com/modules/face-detection/style/face-detection.css",(function(){})),loadJS("https://f7.donggiatri.com/modules/face-detection/js/face-api.min.js",(function(){}))}),5e3);var e="useraccountverificationfacedetection";$(document).on(e+"_Before",(function(e,a,t){})).on(e+"_Init",(function(e,a,t){var n,c,i,s=document.getElementById("webcam"),o=new Webcam(s,"user"),d="https://chat.donggiatri.com/app/framework7/modules/face-detection/models";function r(e,a){a?($("#"+e).prop("disabled",!1),$("#"+e).parent().removeClass("disabled")):($("#"+e).prop("checked",!1).change(),$("#"+e).prop("disabled",!0),$("#"+e).parent().addClass("disabled"))}$("#webcam-switch").change((function(){this.checked?o.start().then((e=>{r("detection-switch",!0),$("#errorMsg").addClass("d-none"),o.webcamList.length>1&&$("#cameraFlip").removeClass("d-none"),s.style.transform="",console.log("webcam started")})).catch((e=>{!function(e=""){""!=e&&$("#errorMsg").html(e);$("#errorMsg").removeClass("d-none")}()})):(r("detection-switch",!1),$("#errorMsg").addClass("d-none"),$("#cameraFlip").addClass("d-none"),o.stop(),console.log("webcam stopped"))})),$("#cameraFlip").click((function(){o.flip(),o.start().then((e=>{s.style.transform=""}))})),$("#webcam").bind("loadedmetadata",(function(){n={width:this.scrollWidth,height:this.scrollHeight}})),$("#detection-switch").change((function(){this.checked?(r("box-switch",!0),r("landmarks-switch",!0),r("expression-switch",!0),r("age-gender-switch",!0),$("#box-switch").prop("checked",!0),$(".loading").removeClass("d-none"),Promise.all([faceapi.nets.tinyFaceDetector.load(d),faceapi.nets.faceLandmark68TinyNet.load(d),faceapi.nets.faceExpressionNet.load(d),faceapi.nets.ageGenderNet.load(d)]).then((function(){i=faceapi.createCanvasFromMedia(s),document.getElementById("webcam-container").append(i),faceapi.matchDimensions(i,n),c=setInterval((function(){faceapi.detectAllFaces(s,new faceapi.TinyFaceDetectorOptions).withFaceLandmarks(!0).withFaceExpressions().withAgeAndGender().then((function(e){var a=faceapi.resizeResults(e,n);i.getContext("2d").clearRect(0,0,i.width,i.height),$("#box-switch").is(":checked")&&faceapi.draw.drawDetections(i,a),$("#landmarks-switch").is(":checked")&&faceapi.draw.drawFaceLandmarks(i,a),$("#expression-switch").is(":checked")&&faceapi.draw.drawFaceExpressions(i,a),$("#age-gender-switch").is(":checked")&&a.forEach((e=>{var{age:a,gender:t,genderProbability:n}=e;new faceapi.draw.DrawTextField([`${faceapi.round(a,0)} years`,`${t} (${faceapi.round(n)})`],e.detection.box.bottomRight).draw(i)})),$(".loading").hasClass("d-none")||$(".loading").addClass("d-none")}))}),300)}))):(clearInterval(c),r("box-switch",!1),r("landmarks-switch",!1),r("expression-switch",!1),r("age-gender-switch",!1),void 0!==i&&setTimeout((function(){i.getContext("2d").clearRect(0,0,i.width,i.height)}),1e3))}))})).on(e+"_Leave",(function(e,a,t){}))}();

!function(){var n="useraccountverificationphoneverified",i=null;$(document).on(n+"_Before",(function(n,e,t){i.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,e,t){(i=$(t.el)).find(".digit-input-wrapper").inputCodeOTP({onReady:function(n){i.find(".button").removeClass("disable")}}),i.find("form").validate({submitHandler:function(n){var i=$(n).serializeObject();console.log(i),mainView.router.navigate("/home/",i)}})})).on(n+"_Leave",(function(n,i,e){}))}();
!function(){setTimeout((function(){loadJS("https://unpkg.com/tesseract.js@v2.0.0-beta.1/dist/tesseract.min.js",(function(){}))}),5e3);var e=null,t=null,n=null,o=null,c="useraccountverificationtakepic";$(document).on(c+"_Before",(function(e,t,n){})).on(c+"_Init",(function(c,i,a){e=document.getElementById("player"),t=document.getElementById("snapshot"),n=document.getElementById("capture"),o=document.getElementById("result"),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((t=>{e.srcObject=t})),n.addEventListener("click",(function(){snapshot.getContext("2d").drawImage(e,0,0,t.width,t.height),Tesseract.recognize(t,"eng",{logger:e=>console.log(e)}).then((({data:{text:e}})=>{o.value=e}))}))})).on(c+"_Leave",(function(t,n,o){e.pause()}))}();
!function(){var n="useraccountverificationverifyavatar";$(document).on(n+"_Before",(function(n,e,o){})).on(n+"_Init",(function(e,o,i){$("."+n+" form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),mainView.router.navigate("/home/",e)}})})).on(n+"_Leave",(function(n,e,o){}))}();
!function(){var n="useraccountverificationverifyid";$(document).on(n+"_Before",(function(n,e,i){})).on(n+"_Init",(function(e,i,o){$("."+n+" form").validate({submitHandler:function(n){var e=$(n).serializeObject();console.log(e),mainView.router.navigate("/home/",e)}})})).on(n+"_Leave",(function(n,e,i){}))}();
!function(){var n="useraccountverificationstatus";$(document).on(n+"_Before",(function(n,o,t){})).on(n+"_Init",(function(n,o,t){})).on(n+"_Leave",(function(n,o,t){}))}();
!function(){var n="useraccountbillindex",t=null;$(document).on(n+"_Before",(function(n,i,e){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,i,e){(t=$(e.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,i){}))}();
!function(){var t="useraccountbillelectricity",n=null;$(document).on(t+"_Before",(function(t,i,e){n.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var t=$(this).attr("data-setbg");$(this).css("background-image","url("+t+")")}))})).on(t+"_Init",(function(t,i,e){(n=$(e.el)).find("form").validate({submitHandler:function(t){var n=$(t).serializeObject();console.log(n),mainView.router.navigate("/home/",n)}})})).on(t+"_Leave",(function(t,n,i){}))}();
!function(){var n="useraccountbillinternet",t=null;$(document).on(n+"_Before",(function(n,e,i){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,e,i){(t=$(i.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,e){}))}();
!function(){var n="useraccountbilltelevision",t=null;$(document).on(n+"_Before",(function(n,i,e){t.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var n=$(this).attr("data-setbg");$(this).css("background-image","url("+n+")")}))})).on(n+"_Init",(function(n,i,e){(t=$(e.el)).find("form").validate({submitHandler:function(n){var t=$(n).serializeObject();console.log(t),mainView.router.navigate("/home/",t)}})})).on(n+"_Leave",(function(n,t,i){}))}();
!function(){var t="useraccountbillwatter",n=null;$(document).on(t+"_Before",(function(t,e,i){n.find("[data-setbg]").each((function(){parseInt(this.style.height)<75&&window.innerWidth<1050&&$(this).css("height","125px");var t=$(this).attr("data-setbg");$(this).css("background-image","url("+t+")")}))})).on(t+"_Init",(function(t,e,i){(n=$(i.el)).find("form").validate({submitHandler:function(t){var n=$(t).serializeObject();console.log(n),mainView.router.navigate("/home/",n)}})})).on(t+"_Leave",(function(t,n,e){}))}(); 
            
          })();
          
               
    
 
//
var handlers = {};
 
(function(win){
//init app
// Dom7
// var $ = Dom7; 
// Theme
var theme = 'auto';
if (document.location.search.indexOf('theme=') >= 0) {
  theme = document.location.search.split('theme=')[1].split('&')[0];
} 
win.app = new Framework7({
  id: 'io.testapp',
  root: '#app',
  theme: theme,
  notification: {
    title: 'My App',
    closeTimeout: 3000,
  },
  data: function () {
     return {
      user: win.user.hasLogin()
    };

  },
  methods: {
    helloWorld: function () {
      app.dialog.alert('Hello World!');
    } },

  routes: routes,  
  vi: {
    placementId: 'pltd4o7ibb9rc653x14' } 
  });
app.on('panelOpen', function (panel) {
  console.log('Panel ' + panel.side + ' opened');
});

app.on('connection', function (isOnline) {
  if (isOnline) {
    console.log('app is online now')
  } else {
    console.log('app is offline now')
  }
});

app.on('darkModeChange', function (isDark) {
  if (isDark) {
    console.log('color scheme changed to Dark')
  } else {
    console.log('color scheme changed to Light')
  }
});
 win.Toast = {};
win.Toast.Bottom = (s) => {
   var toastBottom = app.toast.create({
      text: s,
      closeTimeout: 2000,
  });
  // console.log(toastBottom);
  // Open it
  toastBottom.open();
}
win.Toast.Top = (s) => {
  // Create toast
  var  toastTop = app.toast.create({
      text:  s,
      position: 'top',
      closeTimeout: 2000,
    });
  // Open it
  toastTop.open();
};
win.Toast.Center = (s) => {
  // Create toast
  var toastCenter = app.toast.create({
      text: s,
      position: 'center',
      closeTimeout: 2000,
    });
  // Open it
  toastCenter.open();
};
win.Toast.CenterIcon = (s,icon) => {
  var toastIcon = app.toast.create({
      //icon: $theme.ios ? '<i class="f7-icons">star_fill</i>' : '<i class="material-icons">star</i>',

      text: s,
      position: 'center',
      closeTimeout: 2000,
    });
  // Open it
  toastIcon.open();
};


 
win.alert = function(m){
    var dialog = app.dialog.create({
      text: m,
      buttons: [
        {
          text: 'ng',
          onClick: function () {
            dialog.close()
          }
        } 
      ]
    });

    dialog.open();
};
win.confirm = function(m,t,f){
     if(typeof t=='function'){
       f =t;
       t= 'Notices'; 
    }
    var dialog = app.dialog.create({
      text: m,
      buttons: [
        {
          text: 'ng',
          onClick: function () {
            dialog.close();
            if(f)f(0);
          }
        },
        {
          text: 'ng ',
          onClick: function () {
            dialog.close();
            if(f)f(1);
          }
        } 
      ]
    });

    dialog.open();
};

var app_old_alert = app.dialog.alert;
app.dialog.alert = function(m){
    alert(m);
};
var app_old_confirm = app.dialog.confirm;
app.dialog.confirm = function(a,b,c){
    confirm(a,b,c);
};


win.mainView = app.views.create('.view-main', {iosSwipeBack: true,
  on: {
    pageAfterIn: function (event) {
        // console.log(event);
      
      // window.rebuild($(event.el));
        

      $(document).trigger("onPage",[event]);

      $(event.page).find(".page-content").css("visibility","visible");
 
    },
    pageAfterOut: function (event) {
        // console.log(event);
      if(event.el){
        $(event.el).find('iframe,video,audio').each(function(v){
          v.src = "";
        });
      } 
 
    },
    pageInit: function (event) {
      event.pageEl.f7PageData= event.pageEl.dataset;
      win.ActivePage =event.pageEl; 
      $(document).trigger("onePage",[event.pageEl]).off("onePage");
      if(event.route.url.includes(pointer)){
          event.$el.addClass("mainpointer");
          $(".loader").fadeOut("fast",function(){
                $(this).remove();
          });

      }
      $(event.page).find(".page-content").css("visibility","hidden");
    }
  }
});


//get parames request
win.objparams = getJsonFromUrl(document.location.href);
console.log(objparams);


var pointer = objparams.gateway?objparams.gateway:"";
   if(pointer){
  if(pointer[0]!="/"){
     pointer = "/"+pointer;
  }


  if(pointer[pointer.length-1]!="/"){
     pointer =  pointer+"/";
  }
}else{
    pointer = "/home/";
} 


//support action
app.current_tag = null;
app.paramsData = null;

win.showLoader = function(t){
  t =t?t:1.5;

  app.preloader.show();
  setTimeout(function(){
    app.preloader.hide();  
  },t*1000);
};
win.hideLoader = function(t){
  app.preloader.hide();
};


String.prototype.pageData = function(){
    var name = String(this); 
    var route = app.views.main.router.currentRoute;
    var r = route.params;
    r = $.extend({},name.f7AppData(),r,true);
    r = $.extend(r,handlers_route[name],true);
    r = $.extend(r,handlers_route[route.url],true);
    r = $.extend(r,window.current_tag,true);
    return r;
};


String.prototype.f7AppData  = function(){
    var name = String(this); 
    return handlers[name];
};
var handlers_route = {};
var handlers_route_=null;
String.prototype.navigate = function(data){
    var name = String(this);


    if(name[name.length-1]!="/"){
        name = name+"/";
    }

    handlers_route[name] = data;
    return mainView.router.navigate(name,data);
};
String.prototype.navigateReplace=function(data){
    
    handlers_route_ = data;
    $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        console.log(name);
        handlers_route[name] = handlers_route_;

        mainView.router.history[mainView.router.history.length-1] = mainView.router.url;    
     });
    mainView.router.navigate(String(this),data);
};
String.prototype.back=function(){
    
    var s = String(this);
    if(s)mainView.router.history.push(s); 

    mainView.router.back();
};
String.prototype.navigateReset=function(data){
    
    handlers_route_ = data;
    $(document).on("onePage",function(v,page){
        var name = window.ActivePage.f7PageData.name;
        console.log(name);
        handlers_route[name] = handlers_route_;

        mainView.router.history = ["/home/",mainView.router.url];    
     });
    mainView.router.navigate(String(this),data);
};
String.prototype.f7Route  = function(){
    var name = String(this); 
    return handlers_route[name];
};

win.goHome = function(){
    '/home/'.navigate({});
    mainView.router.history = ["/home/"]; 
};

function runmain_(u,f){
    var forcelogin = 1;
    if(u&&u.token){
        $('[name="auth-token"]').attr("content",u.token);
    }


    var pi = pointer;
    
    if(forcelogin){
      pi = u?pointer:"/user/login/";
    } 
    if(f){
       pi = f(u,pi);
    }

    if(typeof pi=='function'){
        pi(mainView.router);
    }else{
        mainView.router.navigate(pi||pointer, {});
    } 
}
//init main
win.runmain = function(f){
    var key = win.sdk.user_sesion+"ajax"+document.location.host.replace(/[^a-zA-Z0-9]/ig,"");
      var mixedcache= win.localStorage.getItem(key);
      try{
          mixedcache = JSON.parse(mixedcache);
      }catch(e){}
      if(!mixedcache){
          mixedcache = {};
      }


       // if(document.location.origin.includes("localhost")){
             
       //      win.post = function(url,data,f){
       //          var auth =$('[name="auth-token"]').attr("content");
               
       //          var form = null;
       //          var mixed_ = null;

       //          if(data instanceof FormData){
       //              form  = {
       //                  method: "POST",
       //                  body: data,
       //                  headers: {
       //                    'Auth-token': auth||""
       //                  }
       //              };
       //          }else{
                     
       //              form  = {
       //                  method: "POST",
       //                  body: JSON.stringify(data),
       //                  headers: {
       //                    'Auth-token': auth||""
       //                  }
       //              };

       //             mixed_ = md5(url+"_"+(typeof data==="object"?JSON.stringify(data):data));
       //             if (mixedcache[mixed_] && f) {
       //                f(mixedcache[mixed_]);
       //             }
       //          }

                

       //          fetch(url,form).then(function(res){ return res.text(); }).then(function(data){ 
       //              try{
       //                  data = JSON.parse(data);
       //                  if(mixed_){
       //                      mixedcache[mixed_] = data;
       //                      window.localStorage.setItem(key, JSON.stringify(mixedcache));
       //                  }
       //              }catch(e){}
       //              f(data);
       //           });
       //      }
       //  };
       
      //     $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
      //       // console.log(options);
      //         if (originalOptions.url.includes("/api/") || options.cache || (options.data&&options.data.cache)) {
      //     // if (options.cache) {
      //         var success = originalOptions.success || function(){},
      //             url = originalOptions.url;
                  
      //         options.mixed_data = md5(url+"_"+(typeof originalOptions.data==="object"?JSON.stringify(originalOptions.data):originalOptions.data));
          
      //         options.cache = false;
      //         options.beforeSend = function () {
      //             if (mixedcache[this.mixed_data]) {
      //                 success(mixedcache[this.mixed_data]);
      //                 // return false;
      //             }
      //             // return true;
      //         };
      //         options.success = function (data, textStatus) {
      //             try{
      //                 var b = JSON.parse(data);
      //                 mixedcache[this.mixed_data] = b;
      //             }catch(e){}
                 

      //             win.localStorage.setItem(key, JSON.stringify(mixedcache));
      //             // var responseData = data?(typeof data==="object"?JSON.stringify(data):data.toString()):"";
                  
      //             if (typeof success ==="function") success(data,textStatus);
      //         };
      //     // }
      //         }
      // });
 
 
    var u = win.user.hasLogin(); 
    if(!u&&window.AppCode && window.top!=window.self){
        window.AppCode.getAuth().then(function(r){
            u = r;
            runmain_(r,f);
        });
    }else{
        runmain_(u,f);
    } 
};







win.f7navigate = function(url,data){
    url.navigate(url,data||{});
};
 

if(win.ADevice){
    app.device = win.ADevice;
    $("body").addClass("isRN");
}


DomDoc.on("page::back", function(e) {
 
  if($(".page-current").attr("id")=="home"){
    win.close();
  }
    
}).on("click","[data-frame]",function(e){
    e.preventDefault();
    var url = $(this).attr("data-frame");
    app.current_tag = $(this).data();
      $(document).on("onePage",function(v,page){
        var name = win.ActivePage.f7PageData.name;
        //console.log(name);

        handlers[name] = app.current_tag;  
    });
     mainView.router.navigate("/webview/"+encodeURIComponent(url));

  }).on("click",".toolbar-inner .tab-link",function(){
    var parent = $(this).closest(".toolbar-inner");
    parent.scrollCenter(this, 300);

  }).on("click","ul.filter__controls li",function(){
    var parent = $(this).closest(".filter__controls");
    parent.scrollCenter(this, 300);

  }).on("click","[data-router-reset]",function(){
   var url = $(this).attr("data-router-reset");
   if($(this).attr("data-open")){
      win.open(url);
   }else{
     app.current_tag = $(this).data();


     $(document).on("onePage",function(v,page){
        var name = win.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = app.current_tag;  
     });

     if(url[url.length-1]!="/"){

        url = url+"/";
     }
     mainView.router.history = ['/home/'];
     mainView.router.navigate(url);

   }
}).on("click","[data-router]",function(){
   var url = $(this).attr("data-router");
   if($(this).attr("data-open")){
      win.open(url);
   }else{
     app.current_tag = $(this).data();


     $(document).on("onePage",function(v,page){
        var name = win.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = app.current_tag;  
     });

     if(url[url.length-1]!="/"){

        url = url+"/";
     }

     mainView.router.navigate(url);
   }
}).on("click","[data-params]",function(){
   app.paramsData = {
    params: $(this).data('params'),
    ele: $(this)
   };
}).on("click","a",function(e){

  if(!$(this).hasClass("external") && !$(this).hasClass("back")){
    e.preventDefault();
    e.stopImmediatePropagation();

    var href=  this.href;
    if(href.includes("open=true")){
        win.open(href);
        return;
    }

    
      app.current_tag = $(this).data();
      $(document).on("onePage",function(v,page){
        var name = win.ActivePage.f7PageData.name;
        console.log(name);

        handlers[name] = app.current_tag;  
     });
  }
}); 
win.addEventListener("click",function(e){

    if(win.userSDK){
        var ele = $(e.target).hasClass('accid')?$(e.target):$(e.target).closest('[data-acc]');
        if(ele.length){
            if(window.user.hasLogin()){
                ele.attr('data-acc').navigate({});
            }else{
                userSDK.open(function(u){
                    if(u.passkey){
                       document.querySelector('meta[name="auth-token"]').setAttribute("content",u.passkey); 
                         window.user.u = u;
                         window.user.login(u);
                          userSDK.profile(function(a){
                            if(a){
                                a.passkey = u.passkey;
                                window.user.u = $.extend( window.user.u,a,true);
                                $(document).trigger("onUser",[a]);  
                            } 
                          }); 

                         
                      } 
                });
            }
        
            
        } 
    }
},true);

 

 })(window); 
//
function F7MainBase(f7options){
   
 



}
;
           F7MainBase({}); 
// //
// var handlers = {};
 
// (function(win){
// //init app
// // Dom7
// // var $ = Dom7; 
// // Theme
// var theme = 'auto';
// if (document.location.search.indexOf('theme=') >= 0) {
//   theme = document.location.search.split('theme=')[1].split('&')[0];
// } 
// win.app = new Framework7({
//   id: 'io.testapp',
//   root: '#app',
//   theme: theme,
//   notification: {
//     title: 'My App',
//     closeTimeout: 3000,
//   },
//   data: function () {
//      return {
//       user: win.user.hasLogin()
//     };

//   },
//   methods: {
//     helloWorld: function () {
//       app.dialog.alert('Hello World!');
//     } },

//   routes: routes,  
//   vi: {
//     placementId: 'pltd4o7ibb9rc653x14' } 
//   });
// app.on('panelOpen', function (panel) {
//           console.log('Panel ' + panel.side + ' opened');
//         });

//         app.on('connection', function (isOnline) {
//           if (isOnline) {
//             console.log('app is online now')
//           } else {
//             console.log('app is offline now')
//           }
//         });

//         app.on('darkModeChange', function (isDark) {
//           if (isDark) {
//             console.log('color scheme changed to Dark')
//           } else {
//             console.log('color scheme changed to Light')
//           }
//         });
// //for debug
// win.app.debug = {
//     router : win.localStorage.getItem(win.sdk.user_sesion+"f7_history_url"),
//     data : (function(){
//        var a=  win.localStorage.getItem(win.sdk.user_sesion+"f7_history_url_data");
//        try{
//         a = JSON.parse(a);
//        }catch(e){

//        }
//        return a?a:{};
//     })()
// };
// win.mainView = app.views.create('.view-main', {iosSwipeBack: true,
//   on: {
//     pageAfterIn: function (event) {
//         // console.log(event.el);
      
//       // window.rebuild($(event.el));
        

//       $(document).trigger("onPage",[event]);
//       $(event.el).find(".page-content").css("visibility","visible");
 
//     },
//     pageAfterOut: function (event) {
//         // console.log(event);
//       if(event.el){
//         $(event.el).find('iframe,video,audio').each(function(v){
//           v.src = v.src;
//         });
//       } 
 
//     },
//     pageInit: function (event) {
//       event.pageEl.f7PageData= event.pageEl.dataset;
//       win.ActivePage =event.pageEl; 
//       $(document).trigger("onePage",[event.pageEl]).off("onePage");
//       if(event.route.url.includes(pointer)){
//           event.$el.addClass("mainpointer");
//           $(".loader").fadeOut("fast",function(){
//                 $(this).remove();
//           });

//       }
//       $(event.el).find(".page-content").css("visibility","hidden");
//     }
//   }
// });


// //get parames request
// win.objparams = getJsonFromUrl(document.location.href);
// console.log(objparams);
// // app.request = objparams;

// var pointer = objparams.gateway?objparams.gateway:"";
//    if(pointer){
//   if(pointer[0]!="/"){
//      pointer = "/"+pointer;
//   }


//   if(pointer[pointer.length-1]!="/"){
//      pointer =  pointer+"/";
//   }
// }else{
//     pointer = "/home/";
// } 


// //support action
// win.current_tag = null;
// win.paramsData = null;

// win.showLoader = function(t){
//   t =t?t:1.5;

//   app.preloader.show();
//   setTimeout(function(){
//     app.preloader.hide();  
//   },t*1000);
// };
// win.hideLoader = function(t){
//   app.preloader.hide();
// };


// String.prototype.pageData = function(){
//     var name = String(this); 
//     var route = app.views.main.router.currentRoute;
//     var r = route.params;
//     r = $.extend({},name.f7AppData(),r,true);
//     r = $.extend(r,handlers_route[name],true);
//     r = $.extend(r,handlers_route[route.url],true);
//     r = $.extend(r,window.current_tag,true);
//     return r;
// };


// String.prototype.f7AppData  = function(){
//     var name = String(this); 
//     return handlers[name];
// };
// var handlers_route = {};
// var handlers_route_=null;
// String.prototype.navigate = function(data){
//     var name = String(this);


//     if(name[name.length-1]!="/"){
//         name = name+"/";
//     }

//     handlers_route[name] = data;
//     mainView.router.navigate(name,data);
// };
// String.prototype.navigateReplace=function(data){
    
//     handlers_route_ = data;
//     $(document).on("onePage",function(v,page){
//         var name = window.ActivePage.f7PageData.name;
//         console.log(name);
//         handlers_route[name] = handlers_route_;

//         mainView.router.history[mainView.router.history.length-1] = mainView.router.url;    
//      });
//     mainView.router.navigate(String(this),data);
// };
// String.prototype.back=function(){
    
//     var s = String(this);
//     if(s)mainView.router.history.push(s); 

//     mainView.router.back();
// };
// String.prototype.navigateReset=function(data){
    
//     handlers_route_ = data;
//     $(document).on("onePage",function(v,page){
//         var name = window.ActivePage.f7PageData.name;
//         console.log(name);
//         handlers_route[name] = handlers_route_;

//         mainView.router.history = ["/home/",mainView.router.url];    
//      });
//     mainView.router.navigate(String(this),data);
// };
// String.prototype.f7Route  = function(){
//     var name = String(this); 
//     return handlers_route[name];
// };
// win.goHome = function(){
//     '/home/'.navigate({});
//     mainView.router.history = ["/home/"]; 
// };
// //init main
// win.runmain = function(f){
//     var key = win.sdk.user_sesion+"ajax"+document.location.host.replace(/[^a-zA-Z0-9]/ig,"");
//       var mixedcache= win.localStorage.getItem(key);
//       try{
//           mixedcache = JSON.parse(mixedcache);
//       }catch(e){}
//       if(!mixedcache){
//           mixedcache = {};
//       }


//        // if(document.location.origin.includes("localhost")){
             
//        //      win.post = function(url,data,f){
//        //          var auth =$('[name="auth-token"]').attr("content");
               
//        //          var form = null;
//        //          var mixed_ = null;

//        //          if(data instanceof FormData){
//        //              form  = {
//        //                  method: "POST",
//        //                  body: data,
//        //                  headers: {
//        //                    'Auth-token': auth||""
//        //                  }
//        //              };
//        //          }else{
                     
//        //              form  = {
//        //                  method: "POST",
//        //                  body: JSON.stringify(data),
//        //                  headers: {
//        //                    'Auth-token': auth||""
//        //                  }
//        //              };

//        //             mixed_ = md5(url+"_"+(typeof data==="object"?JSON.stringify(data):data));
//        //             if (mixedcache[mixed_] && f) {
//        //                f(mixedcache[mixed_]);
//        //             }
//        //          }

                

//        //          fetch(url,form).then(function(res){ return res.text(); }).then(function(data){ 
//        //              try{
//        //                  data = JSON.parse(data);
//        //                  if(mixed_){
//        //                      mixedcache[mixed_] = data;
//        //                      window.localStorage.setItem(key, JSON.stringify(mixedcache));
//        //                  }
//        //              }catch(e){}
//        //              f(data);
//        //           });
//        //      }
//        //  };
       
//           // $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
//           //   // console.log(options);
//           //     if (originalOptions.url.includes("/api/") || options.cache || (options.data&&options.data.cache)) {
//           // // if (options.cache) {
//           //     var success = originalOptions.success || function(){},
//           //         url = originalOptions.url;
                  
//           //     options.mixed_data = md5(url+"_"+(typeof originalOptions.data==="object"?JSON.stringify(originalOptions.data):originalOptions.data));
          
//           //     options.cache = false;
//           //     options.beforeSend = function () {
//           //         if (mixedcache[this.mixed_data]) {
//           //             success(mixedcache[this.mixed_data]);
//           //             // return false;
//           //         }
//           //         // return true;
//           //     };
//           //     options.success = function (data, textStatus) {
//           //         try{
//           //             var b = JSON.parse(data);
//           //             mixedcache[this.mixed_data] = b;
//           //         }catch(e){}
                 

//           //         win.localStorage.setItem(key, JSON.stringify(mixedcache));
//           //         // var responseData = data?(typeof data==="object"?JSON.stringify(data):data.toString()):"";
                  
//           //         if (typeof success ==="function") success(data,textStatus);
//           //     };
//           // // }
//           //     }
//       // });
 
 
//     var u = win.user.hasLogin();
//     var forcelogin = 1;

//     if(u&&u.token){
//        var a= document.querySelector('meta[name="auth-token"]');
//        if(a)a.setAttribute("content",u.token);  
//     }


//     var pi = pointer;
    
//     if(forcelogin){
//       pi = u?pointer:"/user/login/";
//     } 
//     if(f){
//        pi = f(u,pi);
//     }

//     if(typeof pi=='function'){
//         pi(mainView.router);
//     }else{
//         mainView.router.navigate(pi||pointer, {});
//     } 
// };







// win.f7navigate = function(url,data){
//     url.navigate(url,data||{});
// };


// // win.alert = function(m){
// //     var dialog = app.dialog.create({
// //       text: m,
// //       buttons: [
// //         {
// //           text: 'ng',
// //           onClick: function () {
// //             dialog.close()
// //           }
// //         } 
// //       ]
// //     });

// //     dialog.open();
// // };
// // win.confirm = function(m,t,f){
// //     var dialog = app.dialog.create({
// //       text: m,
// //       buttons: [
// //         {
// //           text: 'ng',
// //           onClick: function () {
// //             dialog.close();
// //           }
// //         },
// //         {
// //           text: 'ng ',
// //           onClick: function () {
// //             dialog.close();
// //             if(f)f()
// //           }
// //         } 
// //       ]
// //     });

// //     dialog.open();
// // };

// // var app_old_alert = app.dialog.alert;
// // app.dialog.alert = function(m){
// //     alert(m);
// // };
// // var app_old_confirm = app.dialog.confirm;
// // app.dialog.confirm = function(a,b,c){
// //     confirm(a,b,c);
// // };


// if(win.ADevice){

//     $("body").addClass("isRN");
// }


// DomDoc.on("page::back", function(e) {
 
//   if($(".page-current").attr("id")=="home"){
//     win.close();
//   }
    
// }).on("click","[data-frame]",function(e){
//     e.preventDefault();
//     var url = $(this).attr("data-frame");
//     win.current_tag = $(this).data();
//       $(document).on("onePage",function(v,page){
//         var name = win.ActivePage.f7PageData.name;
//         //console.log(name);

//         handlers[name] = win.current_tag;  
//     });
//      mainView.router.navigate("/webview/"+encodeURIComponent(url));

//   }).on("click",".toolbar-inner .tab-link",function(){
//     var parent = $(this).closest(".toolbar-inner");
//     parent.scrollCenter(this, 300);

//   }).on("click","ul.filter__controls li",function(){
//     var parent = $(this).closest(".filter__controls");
//     parent.scrollCenter(this, 300);

//   }).on("click","[data-router-reset]",function(){
//    var url = $(this).attr("data-router-reset");
//    if($(this).attr("data-open")){
//       win.open(url);
//    }else{
//      win.current_tag = $(this).data();


//      $(document).on("onePage",function(v,page){
//         var name = win.ActivePage.f7PageData.name;
//         console.log(name);

//         handlers[name] = win.current_tag;  
//      });

//      if(url[url.length-1]!="/"){

//         url = url+"/";
//      }
//      mainView.router.history = ['/home/'];
//      mainView.router.navigate(url);

//    }
// }).on("click","[data-router]",function(){
//    var url = $(this).attr("data-router");
//    if($(this).attr("data-open")){
//       win.open(url);
//    }else{
//      win.current_tag = $(this).data();


//      $(document).on("onePage",function(v,page){
//         var name = win.ActivePage.f7PageData.name;
//         console.log(name);

//         handlers[name] = win.current_tag;  
//      });

//      if(url[url.length-1]!="/"){

//         url = url+"/";
//      }

//      mainView.router.navigate(url);
//    }
// }).on("click","[data-params]",function(){
//    win.paramsData = {
//     params: $(this).data('params'),
//     ele: $(this)
//    };
// }).on("click","a",function(e){

//   if(!$(this).hasClass("external") && !$(this).hasClass("back")){
//     e.preventDefault();
//     e.stopImmediatePropagation();

//     var href=  this.href;
//     if(href.includes("open=true")){
//         win.open(href);
//         return;
//     }

    
//       win.current_tag = $(this).data();
//       $(document).on("onePage",function(v,page){
//         var name = win.ActivePage.f7PageData.name;
//         console.log(name);

//         handlers[name] = win.current_tag;  
//      });
//   }
// }).on("click",".remove",function(){
//     setTimeout(function(){
//       $(this).remove();
//     },100);
// });

// DomDoc.on("click",".closeapp",function(){
//    win.close();
//  }).on("scroll",function(){
//     $("body").addClass("scrolling");
//     delay(function(){
//       $("body").removeClass("scrolling");
//     },1000);
//  }).on('touchmove', function(event) {
//     $("body").addClass("scrolling");
//     var distanceY = win.pageYOffset
    
//         delay(function(){
//         $("body").removeClass("scrolling");
//       },1000);
   
// });
// var copyContent = function(text) {
//         try {
//           navigator.clipboard.writeText(text);
//           console.log('Content copied to clipboard');
//         } catch (err) {
//           console.error('Failed to copy: ', err);
//         }
//       }
// DomDoc.on("keyup",".display_money",delay(function(){
//         this.value = show_money_none(this.value.replace(",",""));
//     },700)).on("click","[data-copy]",function(){
//       var txt = $(this).attr("data-copy");
//         if(win.copyText){
//           win.copyText(txt);
//         }else{
//           copyContent(txt);
//           $.toast("Copy success");
//         }
        
        
//      }).on("submit","form.ajax",function(e){
//     e.preventDefault();
//     var f = this;
//     var form = new FormData(f);
//     postForm(this.action,form,function(res){

//         $(f).trigger("onAjax",[res]);
//     });

//     return false;
//  });

// DomDoc.on("click","[data-admod]",function(){
//    win.admod();
// });
 



 

//  })(window);
;
           window.templates={
   news:{
      big : function(v){
         var info = JSON.stringify(v);
 
            var img = v.image || "https://placehold.co/480x360/cecece/333/png?text=KNC"; 
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               return `<div data-info='${JSON.stringify(v)}' data-router="/danh-muc/${v.slug}/" class="label new">${v.name}</div>`
            }).join(' '):'';

            var url = `/${v.slug}.${v.id}/`;

            return `
              <div class="itemnew big link">
                   <p class="title" data-info='${JSON.stringify(v)}' data-router="${url}">${v.title}</p>
                    <div class="bg" data-info='${JSON.stringify(v)}' data-router="${url}" style="background-image: url(${img});"></div>
                    <div class="actions">
                       <div class="date">${v.created_date} <i class="fa-light fa-calendar"></i></div>
                       <div class="date">${v.view} <i class="fa-light fa-eye"></i></div>
                    </div>
                 </div>
              `;
      },
       item : function(v){
         var info = JSON.stringify(v);
 
            var img = v.image || "https://placehold.co/480x360/cecece/333/png?text=KNC"; 
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               return `<div data-info='${JSON.stringify(v)}' data-router="/danh-muc/${v.slug}/" class="label new">${v.name}</div>`
            }).join(' '):'';

            var url = `/${v.slug}.${v.id}/`;

            return `
             <div class="itemnew link">
                   <div class="info">
                     <p class="title" data-info='${JSON.stringify(v)}' data-router="/${url}/">${v.title}</p>
                   
                    <div class="actions">
                       <div class="bleft">
                          <div class="date">${v.created_date} <i class="fa-light fa-calendar"></i></div>
                           <div class="view">${v.view} <i class="fa-light fa-eye"></i></div>
                       </div>
                       <div class="bright">
                         <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                       </div>
                    </div>
                   </div>
                     <div class="bg" data-info='${JSON.stringify(v)}' data-router="/${url}/" style="background-image: url(${img});"></div>
                 </div>
              `;
      },
      leftRight : function(v){
         var info = JSON.stringify(v);
 
            var img = v.image || "https://placehold.co/480x360/cecece/333/png?text=KNC"; 
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               return `<div data-info='${JSON.stringify(v)}' data-router="/danh-muc/${v.slug}/" class="label new">${v.name}</div>`
            }).join(' '):'';

            var url = `/${v.slug}.${v.id}/`;

            return `
             <div class="itemnew leftRight link">
                   <div class="bg" data-info='${JSON.stringify(v)}' data-router="${url} style="background-image: url(${img});"></div>
                   <div class="info">
                     <p class="title" data-info='${JSON.stringify(v)}' data-router="${url}">${v.title}</p>
                     <p>${v.excerpt}</p>
                    <div class="actions">
                       <div class="bleft">
                          <div class="date">${v.created_date} <i class="fa-light fa-calendar"></i></div>
                           <div class="view">${v.view} <i class="fa-light fa-eye"></i></div>
                       </div>
                       <div class="bright">
                         <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                       </div>
                    </div>
                   </div>
                    
                 </div>
              `;
      },
       video : function(v){
         if(!v)return "";
         var info = JSON.stringify(v);
 
            var img = v.image || "https://placehold.co/480x360/cecece/333/png?text=KNC"; 
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               return `<div data-info='${JSON.stringify(v)}' data-router="/homenews/category/${v.slug}/" class="label new">${v.name}</div>`
            }).join(' '):'';

            return `
             <div class="bvideo full link"  data-info='${JSON.stringify(v)}' data-router="/${v.slug}.${v.id}/">
                    <div class="bg" style="background-image: url(${v.image});">
                       <i class="fa fa-play btnplay"></i>
                       <span class='duration'>00:42</span>
                    </div>
                 </div>
              `;
      },
      gridItem : function(v,options){
         options = $.extend({
            category:{ 
               enabled : 1 
            },
            title:{ 
               enabled : 1,
               length : 20 
            },
            description :{
               enabled : 0,
               length : 20
            }
         },options,true);
         var info = JSON.stringify(v);
 
         var img = v.image || "https://placehold.co/480x360/cecece/333/png?text=KNC"; 
         
         var url = `/${v.slug}.${v.id}/`;
         var description = options.description.enabled?`<div class="item__desc"><p>${v.excerpt||v.description||"--"}</div>`:'';
         var title = options.title.enabled?`<div class="product__item__text" data-router="${url}"><h6>${v.title}</h6> </div>`:'';
         var categories = '';
         if(options.category.enabled){
            categories = v.categories&&v.categories.length?v.categories.map(function(v){
               return `<div data-info='${JSON.stringify(v)}' data-router="/danh-muc/${v.slug}/" class="label new">${v.name}</div>`
            }).join(' '):'';
         }
         return `
            <div  data-info='${info}' class="news-item link gridItem" data-mh="homeprou">
                <div class="product__item">
                   <div class="item__pic set-bg" style="background-image: url(${img});"> ${categories} </div>
                    ${title}
                    ${description}
                </div>
            </div>
           `;
      }
   },
   product:{
      listItem : function(v){
         var info = JSON.stringify(v);

            var price ="";
            if(v.price_sale){
               price = `${show_money_none(v.price_sale)} <i>${show_money_none(v.price)}</i>`;
            }else if(v.price){
               price = show_money_none(v.price);
            }else{
               price = "Lin h";
            }

            var img = v.image || "https://cdn-icons-png.flaticon.com/512/13543/13543287.png";

            var rate = (v.average_rating * 1) / 5;
            var rate_s = "";
            for (var n = 1; n <= 5; n++) {
               if (n < rate) {
                  rate_s += `<i class="fa fa-star-half-o"></i>`;
               } else {
                  rate_s += `<i class="fa fa-star"></i>`;
               }
            }

            var cart=`<span class="btncart" data-info='${info}'><i class="fa fa-shopping-cart" aria-hidden="true"></i>`;

            var cls=[];
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               cls.push(v.slug);
               return `<div data-info='${JSON.stringify(v)}' data-router="/news/category/${v.id}/" class="label new">${v.name}</div>`;
            }).join(' '):'';
             if(v.price_sale){
               cls.push('sale');
            }


            return ` <div class="trend__item" data-info='${info}' data-router="/shop/product/${v.id}/" class="${cls.join(' ')}">
                     <div class="trend__item__pic">
                         <img src="${img}" alt="">

                         ${cart}
                     </div>
                     <div class="trend__item__text">
                         <h6>${v.title}</h6>
                         <div class="rating">
                           ${rate_s}
                             
                         </div>
                         <div class="product__price">${price}</div>
                     </div>
                    <div> ${cart}</div>
            </div>`;
      },
      gridItem : function(v){
         var info = JSON.stringify(v);

            var price ="";
            if(v.price_sale){
               price = `${show_money_none(v.price_sale)} <i>${show_money_none(v.price)}</i>`;
            }else if(v.price){
               price = show_money_none(v.price);
            }else{
               price = "Lin h";
            }

            var img = v.image || "https://cdn-icons-png.flaticon.com/512/13543/13543287.png";

            var rate = (v.average_rating * 1) / 5;
            var rate_s = "";
            for (var n = 1; n <= 5; n++) {
               if (n < rate) {
                  rate_s += `<i class="fa fa-star-half-o"></i>`;
               } else {
                  rate_s += `<i class="fa fa-star"></i>`;
               }
            }

            var isnew = v.isnew?`<div class="label new">New</div>`:'';
            var cart=`<span class="btncart" data-info='${info}'><i class="fa fa-shopping-cart" aria-hidden="true"></i>`;

            var cls=[];
            var categories = v.categories&&v.categories.length?v.categories.map(function(v){
               cls.push(v.slug);
               return `<div data-info='${JSON.stringify(v)}' data-router="/news/category/${v.id}/" class="label new">${v.name}</div>`;
            }).join(' '):'';
             if(v.price_sale){
               cls.push('sale');
            }


            return `
             <div data-router="/shop/product/${v.id}/" data-info='${info}' class="col-lg-3 col-md-4 col-sm-6 col-xs-6 ${cls.join(' ')}" data-mh="homepro">
                            <div class="product__item">
                                <div class="product__item__pic set-bg" style="background-image: url(${img});">
                                    ${isnew}

                                    ${cart}
                                </div>

                                <div class="product__item__text">
                                    <h6><a href="/shop/product/${v.id}/">${v.title}</a></h6>
                                    <div class="rating">
                                       ${rate_s}
                                    </div>
                                    <div class="product__price">${price}</div>
                                </div>
                            </div>
                        </div>
              `;
      }
   }

};
           
window.loadredux= function (){
  var u = window.user.hasLogin();
  var cache_ = window.localStorage.getItem("_ReduxThunk");
  try{
    cache_ = JSON.parse(cache_);
  }catch(e){}
  if(!cache_)cache_={};

  window.ReduxThunk.load = function(){
     //load tat ca thong tin cho user nhu qua json
     //cau hinh he thong
     //cac thong tin lien quan user
     //cac tinh nag user dang co vi : 
     //vi diem :10 record gan nhant
     //vi usdt :10 record gan nhant
     //lich su giao dich : 10 gan nhat
     // thong bao : 10 gan nhat
      post(site_url_ajax("user.php?a=cache"),{},function(r){
        cache_= $.extend(cache_,r,true);
        window.localStorage.setItem("_ReduxThunk",JSON.stringify(cache_));
     },true);
  };

  window.ReduxThunk.ping = function(action,data){
      //cac thao tac se goi nay: them xoa sua
      // store local va phat tin hieu cho server tat lai di (cache toan phan hay cac theo cum)
     post(site_url_ajax("user.php?a=cache"),{action:action,data:data},function(r){},true);

     //now cache
     switch (action) {
       case "label_1":
         //  
         break;
       default:
         if(cache_[action]){
            cache_[action].unshift(data);
         }
         break;
     } 
  };


  ///////giaovien//////
  window.ReduxThunk.fetch("giaovien_lophoc",[]).load = function(data){
    var me  = this;
     return new Promise(function(a,b){
        
        //load server
        post(site_url_ajax("lophoc.php?a=list"),data||{},function(r){
            
            a(r);

            me.update(r);
                  
        },true);
     }); 
  };

  ////////hocsinh////////
  window.ReduxThunk.fetch("hocsinh_baitap_theomon",{}).load = function(data){
    var me  = this;
     return new Promise(function(a,b){
        
        //load server
        post(site_url_ajax("hocsinh.php?a=baitapcuatoi"),data,function(r){
            a(r);
            me.set(data.id,r);
        },true); 
     }); 
  };
};

//auto reload
window.ReduxThunk.fetch("setting",{}).load = function(data){
  var me  = this;
   return new Promise(function(a,b){ 
      //load server
      post(site_url_ajax("public.php?a=all"),data||{},function(r){
          
          a(r);

          me.update(r);
                
      },true);
   }); 
};

// window.ReduxThunk._setting.load();
 
           
           (function(win){
  var submit = false;
  var namemodal = "modulestest";
   var modal = null;
  $(document).on(namemodal+"_Before",function(event,e,page){
        
  
    }).on(namemodal+"_Init",function(event,e,page){
        modal = $(page.el);
        modal.find("form").validate({
            submitHandler : function(form){
              var data = $(form).serializeObject();

              console.log(data);

               mainView.router.navigate("/home/", data);
            }
          });
    }).on(namemodal+"_Leave",function(event,e,page){
       
    });



    win.popupTest = (function(){
        var storage= {};
        return function(){
            var sheet = openSheet({
                data:`<form>
                    <h2>modulestest</h2>
                    <div class="list list-outline-ios list-strong-ios list-dividers-ios">
                          <ul>
                            <li>
                              <a class="item-link item-content">
                                <div class="item-media"><img src="https://cdn-icons-png.flaticon.com/128/17394/17394843.png" width="24"> </div>
                                <div class="item-inner">
                                  <div class="item-title">Food</div>
                                  <div class="item-after"><img src="https://cdn-icons-png.flaticon.com/128/14090/14090371.png" width="24" /></div>
                                </div>
                              </a>
                            </li> 
                          </ul>
                        </div>
                    <div class="flex-row">
                        <input type="text" class="" /><span class="button btncreate">To mi</span>
                    </div>
                </form>
                `,
                beforeOpen: function(sheetId) {
                   var me = this;
                   $("#"+sheetId +".btncreate").on("click",function(){
                       

                       // sheet.close();
                   });
                }
            });
        }
    })(); 
})(window);
           (function(win){
function getJsonFromUrl(url) {
  var regex = /[?&]([^=#]+)=([^&#]*)/g,
      url = url?url:window.location.href,
      params = {},
      match;
  while(match = regex.exec(url)) {
      params[match[1]] = match[2];
  }
  return params;
} 
var scripts = document.getElementsByTagName('script');
    var thisScript = null;
    var i = scripts.length;
    while (i--) {
      if (scripts[i].src && (scripts[i].src.indexOf('user.sdk.js') !== -1)) {
        thisScript = scripts[i].src;
        break;
      }
    }
    // var domain ="https://"+ /^(https?:\/\/)?(www\.)?([^\/]+)/gm.exec(thisScript)[3]+"/"; 

var host ="data.donggiatri.com";
var domain ="https://"+host+"/";
var startTimer = function (display) {
       var start = Date.now(),
           diff,
           minutes,
           seconds,id;

        var methods = {
         clear: function(){
            if(id)clearInterval(id);
            id =null;
            return this;
         },
         start: function(ss){
            duration = ss;
            timer();
            id = setInterval(timer, 1000);
            return this;
         }
       };
       function timer() {
           // get the number of seconds that have elapsed since 
           // startTimer() was called
           diff = duration - (((Date.now() - start) / 1000) | 0);

           // does the same job as parseInt truncates the float
           minutes = (diff / 60) | 0;
           seconds = (diff % 60) | 0;

           minutes = minutes < 10 ? "0" + minutes : minutes;
           seconds = seconds < 10 ? "0" + seconds : seconds;

            if(typeof display =="function"){
               display(minutes,seconds,0);
            }else{
               display.textContent = minutes + ":" + seconds; 
            }

           if (diff <= 0) {
               methods.clear();
                if(typeof display =="function"){
                   display(minutes,seconds,1);
                }else{
                   display.textContent = minutes + ":" + seconds; 
                }
               // add one second so that the count down starts at the full duration
               // example 05:00 not 04:59
               // start = Date.now() + 1000;
              
           }
       };
       // we don't want to wait a full second before the timer starts
        
       return methods;
   }
var globalParams = getJsonFromUrl(document.location.href);

var hash_password = null;
/////////////////////////
// fetch(domain+"hash/").then(function(e){return e.text()}).then(function(e){
//     hash_password =e;
// });

var authtoken=null;
var hash_token=null;
function checkauth(){
    authtoken= $('meta[name="auth-token"]').attr('content');
}
    function post(e,t,n,r){
        if(typeof t=="function"){
            n = t;
            t={};
        }
        t = t||{};
        t._hash  = hash_token||$('meta[name="hash"]').attr('content');
        $.ajax({beforeSend:function(xhr,options){
            checkauth();
 
          if(authtoken){
            xhr.setRequestHeader( 'auth-token',authtoken);
          }
           
        },url:e,type:"POST",data:t,async:true,success:function(e){try{e=JSON.parse(e.trim())}catch(e){}n(e)},error:function(e,t,n){post.STATUS_CODE=n.status;this.success(e.responseText)}})
    }
    post.STATUS_CODE=0;
    function showMessageBar(e,t){t&&(t="danger"),$.notify({message:e},{type:t,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},z_index:1031,delay:5e3,timer:1e3})}function unblock(){$.unblockUI()}function block(){$.blockUI({message:'<button class="btn btn-default btn-lg"><i class="fa fa-circle-o-notch fa-spin"></i> Loading...</button>',css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})}document.location.replaceUrlParam=function(e,t,n){return replaceUrlParam(n||this.href,e,t)},"function"!=typeof Array.prototype.generateSlug&&(Array.prototype.generateSlug=function(e){return void 0==e&&(e="-"),remove_ancents(this.join(",")).toLowerCase().replace(/\s+/g,e).replace(/[^a-z0-9\-]/g,"")}),


function postForm(url,form,func,a){
    if(typeof form=="function"){
        func = form;
        form = new FormData();
    }
    form.append("hash_password",$('meta[name="hash"]').attr('content'));

  $.ajax({
        
        type: "POST",
        url: url,
        global: false,
        data: form,
        processData: false,
        contentType: false,
        beforeSend:function(xhr,options){
          checkauth();  
 
          if(authtoken){
            xhr.setRequestHeader( 'auth-token',authtoken);
          }
           
        },
        async: a==true?true:false,
        success:function(data){
            try{
              data =  JSON.parse(data);
            }catch(e){}

            func(data);
        },
        error :function(a,b,c){
           this.success(a.responseText);
        }
    });
};

 
    win.make_slug = function() {
    var u = function(u, _) {
        return "string" != typeof u ? u : (_ || (_ = "-"),
        (function u(_) {
            var E = {
                A: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g,
                AA: /[\uA732]/g,
                AE: /[\u00C6\u01FC\u01E2]/g,
                AO: /[\uA734]/g,
                AU: /[\uA736]/g,
                AV: /[\uA738\uA73A]/g,
                AY: /[\uA73C]/g,
                B: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g,
                C: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g,
                D: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g,
                DZ: /[\u01F1\u01C4]/g,
                Dz: /[\u01F2\u01C5]/g,
                E: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,
                F: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g,
                G: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g,
                H: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g,
                I: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g,
                J: /[\u004A\u24BF\uFF2A\u0134\u0248]/g,
                K: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g,
                L: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g,
                LJ: /[\u01C7]/g,
                Lj: /[\u01C8]/g,
                M: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g,
                N: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g,
                NJ: /[\u01CA]/g,
                Nj: /[\u01CB]/g,
                O: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g,
                OI: /[\u01A2]/g,
                OO: /[\uA74E]/g,
                OU: /[\u0222]/g,
                P: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g,
                Q: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g,
                R: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g,
                S: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g,
                T: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g,
                TZ: /[\uA728]/g,
                U: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g,
                V: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g,
                VY: /[\uA760]/g,
                W: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g,
                X: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g,
                Y: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g,
                Z: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g,
                a: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,
                aa: /[\uA733]/g,
                ae: /[\u00E6\u01FD\u01E3]/g,
                ao: /[\uA735]/g,
                au: /[\uA737]/g,
                av: /[\uA739\uA73B]/g,
                ay: /[\uA73D]/g,
                b: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g,
                c: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g,
                d: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g,
                dz: /[\u01F3\u01C6]/g,
                e: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g,
                f: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g,
                g: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g,
                h: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g,
                hv: /[\u0195]/g,
                i: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g,
                j: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g,
                k: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g,
                l: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g,
                lj: /[\u01C9]/g,
                m: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g,
                n: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g,
                nj: /[\u01CC]/g,
                o: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g,
                oi: /[\u01A3]/g,
                ou: /[\u0223]/g,
                oo: /[\uA74F]/g,
                p: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g,
                q: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g,
                r: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g,
                s: /[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g,
                ss: /[\u00DF]/g,
                t: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g,
                tz: /[\uA729]/g,
                u: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g,
                v: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g,
                vy: /[\uA761]/g,
                w: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g,
                x: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g,
                y: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g,
                z: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g
            };
            for (var F in E)
                _ = _.replace(E[F], F);
            return _
        }
        )(u.toLowerCase()).replace(/[^0-9a-zA-Z]/ig, " ").replace(/\s+/g, _))
    };
    return String.prototype.make_slug = function(_) {
        return u(String(this), _)
    }
    ,
    u
}();
 function notInIframe () {
    // return win.self != win.top;
    return (!document.referrer || document.referrer.includes(host))==false;
}

var params = (function(){
    var regex = /[?&]([^=#]+)=([^&#]*)/g,
        url = win.location.href,
        params = {},
        match;
    while(match = regex.exec(url)) {
        params[match[1]] = match[2];
    }
    return params;
})();


  var samehost = document.location.host?domain.includes(document.location.host):false;
  var keylocal = (params.domain?params.domain:document.location.host).replace(/\./ig,"")+"uid"; 
  var iframe =null;
  var eventMethod = win.addEventListener ? "addEventListener" : "attachEvent";
var eventer = win[eventMethod];
var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
// fetch(domain+"hash/").then(function(e){return e.text()}).then(function(e){
//     hash_password =e;
// });
function getUser(){
    console.log(keylocal);
    if(user)return user;
    //detech online
    var u = win.localStorage.getItem(keylocal);
    if(u){
        try{
            u=JSON.parse(u);

            if(u){
                authtoken = u.passkey;
            }
        }catch(e){}
    }
    return u;
}
function clearUser(){
    user = null;
    authtoken = null;
    win.localStorage.removeItem(keylocal);
}

//global online in current domain
var user = getUser();
if(user){
    if(notInIframe()){
        user.hash = $('meta[name="hash"]').attr('content');
        //try to pass to parent when user exist
        var data = {
            action: "autoauth",
            response: user,
            domain:document.location.host
        };
        (win.opener||win.parent).postMessage(JSON.stringify({_authcode:data}),"*");
    }
    
}
//send auth to parent
var hash = document.querySelector('meta[name="hash"]');
if(hash){ 
    hash_token = hash.getAttribute("content")||null;
    if(notInIframe()){
        
        if(hash){
            var data = {
                action: "autotoken",
                response: hash_token,
                domain:document.location.host
            };
            (win.opener||win.parent).postMessage(JSON.stringify({_authcode:data}),"*");
        } 
    } 
}

///////////////////////////////////
 var id = "s"+Date.now();
var popupid = 'popup'+id;
                
//https://codepen.io/shamk04/pen/RMExex
var callback_bridges = {};
var callback_iframe = {};
var callbacks_change =[];
function callbacks_change_fire(e,data){
    callbacks_change.map(function(v){
        v(e,data);
    });
}
win.addEventListener("message",function(e) {
    var key = e.message ? "message" : "data";
    var data = e[key];

    try{
        data=JSON.parse(data);
    }catch(e){}
    if(typeof data=='object' && data._authcode){
        data =  data._authcode;
        //check callback
        var frame = callback_iframe[data.frame];
        if(frame&&frame.callbacks[data.id]){ 
            var item = frame.callbacks[data.id];
            console.log("Callback -> "+data.frame,item);
            if(item &&item.callback&&data.response!==undefined){
                item.callback.call(frame.window,data.response);
            }
        }else if(data.action=="autoauth"){
           
            if(notInIframe()){
                 console.log("Parent Callback -> autoauth");
                 user = data.response;
                 if(user){
                    authtoken = user.passkey;
                 }

                 callbacks_change_fire("onUser",user);
            }
        }else if(data.action=="autotoken"){ 
            if(notInIframe()){
                console.log("Parent Callback -> autotoken");
                 hash_token = data.response||null;
            }
        }else {
            
            //check data domain token
            if(data.hash){
                data.response = user;
                e.source.postMessage(JSON.stringify(data),"*");
            }
        }
        
    }else if(typeof data=="string" && data.includes("passkey:")){
        //check passkey from parent 
       data = data.replace("passkey:","");

       userSDK.ready(function(){
          callback_iframe.id.send("passkey",{passkey:data},function(r){
            if(r){
                //update new user
                user =r;

                callbacks_change_fire("onUser",r);
            }
          });
       }); 
    }
},true);


var tlp_popup = function(popupid,id,url){
    //onload="userSDK.bridge.onload.call(this)" 
    return `<div id="${popupid}" class="popup-container">
      <div class="popup-content">
        <a href="#" class="close" onclick='$("#${popupid}").removeClass("active");'>&times;</a>
        <iframe src='${url}' name="${popupid}" id='${id}' style='width:100%;height:100%;border:0' />
      </div>
    </div>`;
};

  win.userSDK = {
        ready : function(f){ 
            if(callback_iframe.id){
                if(f)f();
            }else{
                this.open({hidden:true,callback:f}); 
            }
            
            return this;
        },
        listen : function(f){
             
            this.open({hidden:true,callback:function(){

            }});
           
            callbacks_change.push(f);
            return this;
        },
        getUser:getUser, 
        getAuth :  function(options){

            var abc = function(resolve){
                if(callback_iframe.id){
                    callback_iframe.id.send("auth",{},function(r){
                        if(resolve)resolve(r);
                    });
                }
            };
            
               
           return new Promise(function(resolve, reject){
                // if(window.self!=window.top){
                //     options = $.extend({},options,true);
                //     data._authcode = options;
                //     (win.opener||win.parent).postMessage(JSON.stringify(data),"*");
                // }else{
                //     resolve(user);
                // }
                //check id frame load
            
                if(user){
                    resolve(user);
                }else{
                    
                        userSDK.open({hidden:true,callback:function(){
                            abc(resolve);
                        }});
                   
                }
                
           });  
        },
        getToken : function(){
            return hash_token;
        },
          post:function(url,data,f){
              post(url.includes("https")?url:domain+url,data,f);
          },
          save : function(a,saved){
              user = a;

              if(a.passkey){
                authtoken = a.passkey;
             }
            if(saved){   
                //in child state
                if(notInIframe()){
                    win.localStorage.setItem(keylocal,JSON.stringify(a));
                }else{
                    // $('meta[name="auth-token"]').attr('content',authtoken);  
                    //force to save in parent state
                    if(callback_iframe.id){
                        callback_iframe.id.send("save",a,function(r){
                            
                        });
                    }
                }
            }else{
                if(notInIframe()){
                    win.localStorage.setItem(keylocal,JSON.stringify(a));
                }
            }

              
              return this;
          },


          bridge :{
             iframe:null,
             onload : function(){
                userSDK.bridge.iframe = this.contentWindow;
                delete userSDK.bridge.onload;
             },
             onUser : function(callback){
                this.onUserCallback = callback;
             },
             listen : (function(){
                var callback = null;
                    if(!samehost){
                       
                      //listen from data -> any domain
                        window.addEventListener("message",function(e) {
                                var key = e.message ? "message" : "data";
                                var data = e[key];

                                if(data=="uclose"){
                                    $('#'+popupid).removeClass('active');

                                    return;
                                }

                                // if(data.includes("passkey:")){
                                //     if(userSDK.bridge.onUserCallback){
                                //         userSDK.bridge.onUserCallback
                                //     }
                                // }



                                // console.log(e);
                                try{
                                    data=JSON.parse(data);
                                }catch(e){}


     
                                if(callback && typeof data=='object' && data._crossiddata){
                                    
                                    $('#'+popupid).removeClass('active');
                                    
                                    //check server
                                    //check key
                                    if(data.side=='s'){
                                      callback(data._crossiddata);

                                      //try to dtch user
                                      if(data._crossiddata.passkey){
                                        userSDK.save(data._crossiddata);
                                      }
                                      
                                      if(data&&callback_bridges[data.id_callback]){

                                        callback_bridges[data.id_callback].success(data.response);
                                         delete callback_bridges[data.id_callback];
                                      }
                                    }
                                }

                                if(typeof data=='object' && data.side=='s'){
                                  
                                  data = data._crossiddata;   
                                      
                                  if(data&&callback_bridges[data.id_callback]){

                                    callback_bridges[data.id_callback].success(data.response);
                                     delete callback_bridges[data.id_callback];
                                  }
                                   
                                }
                               
                        },true);
                    }
                return function(f){
                     var me =this;
                    callback = f;
                }; 
             })(),
            call: function(data,f,ff){
               
               if(this.iframe){
                if(f){
                    var e ={
                        data : data
                    };
                    e.id_callback = "fn"+Date.now();
                    e.success = f;
                    e.error = ff;
                    callback_bridges[e.id_callback] = e;

                    data.id_callback = e.id_callback;
                }
                  this.iframe.postMessage(JSON.stringify({"_crossiddata":data,"side":'c'}),"*");
                }else{
                    console.error('Can not connect to server');
                }
               
            }
          }, 
          send:function (data){
            if(data.passkey){
                authtoken = data.passkey;
            } 
            (win.opener||win.parent).postMessage(JSON.stringify({"_crossiddata":data,"side":'s'}),"*");  
             return this;
 }   ,
          send2Host:function (data){
             return this.send(data);
 }   ,
          open :(function(){
                
                var init = function(f){
                     if( $('#'+popupid).length==0){
                        
                        var url =`${domain+"id/?domain="+document.location.host}`+(globalParams.ref?"&ref="+globalParams.ref:"");
                            
                        $('body').append(`<style>.popup-container{visibility:hidden!important;opacity:0;-webkit-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:rgba(21,17,17,.61);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.popup-content{    border-radius: 8px;overflow: hidden;background-color:#fefefe;margin:auto;border:1px solid #888;height:80%}.popup-content p{font-size:17px;padding:10px;line-height:20px}.popup-content a.close{color:#aaa;float:right;font-size:28px;font-weight:700;background:0 0;padding:0;margin:0;text-decoration:none}.popup-content a.close:hover{color:#333}.popup-content span:focus,.popup-content span:hover{color:#000;text-decoration:none;cursor:pointer}.popup-container:target,
                            .popup-container.active{visibility:visible!important;opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);z-index: 100000000000;}.popup-container h3{margin:10px}.popup-style-2{-webkit-transform:scale(.3);-ms-transform:scale(.3);transform:scale(.3)}.popup-style-2:target,.popup-style-6:target{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.popup-style-3{left:100%}.popup-style-3:target{left:0}.popup-style-4{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.popup-style-4:target{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}.popup-style-5{top:100%}.popup-style-5:target{top:0}.popup-style-6{-webkit-transform:scale(15.3);-ms-transform:scale(15.3);transform:scale(15.3)}.popup-style-7{-webkit-transform:skewY(180deg);-ms-transform:skewY(180deg);transform:skewY(180deg);-webkit-transition:.7s ease-in-out;-o-transition:.7s ease-in-out;transition:.7s ease-in-out}.popup-style-7:target{-webkit-transform:skewY(0);-ms-transform:skewY(0);transform:skewY(0)}</style>
                        `+tlp_popup(popupid,id,url));

                        
                        $('#'+popupid).find("iframe").on("load",function(){

                            callback_iframe.id = {
                                callbacks :{},
                                window : this.contentWindow,
                                send : function(e,data,f){
                                    data.id = "id"+Date.now();
                                    data.action = e;

                                    data.frame="id";
                                    data.domain = document.location.host;
                                    data.callback = f||function(){};
                                    this.callbacks[data.id] = data;
                                    this.window.postMessage(JSON.stringify({"_authcode":data}),"*");
                                }
                            };
                            if(f)f();
                        });
                        
                    }else{
                        if(f)f();
                    }
  
                };
                
                win.onload = function(){
                    setTimeout(init,5*1000);
                };
                
                  
                return function(callback){ 
                    var options = {};
                    if( typeof callback === 'function'){
                        options.callback = callback;
                    }else{
                        options = $.extend(options,callback,true);
                    }
                    init(function(){
                        if(options.callback){
                          options.callback();
                        }
                    });
                    

                    if(options.hidden){

                        return
                    }
                    
                    var u = getUser();
                    if(!u){
                         $('#'+popupid).addClass('active');
                         if(options.ref){
                            $('#'+popupid).find("iframe").attr("src",`${domain+"id/?domain="+document.location.host}&ref=${options.ref}`);
                         }
                     }else{
                          $('#'+popupid).removeClass('active');
                          if(options.callback){
                             options.callback(u);
                          }
                     }
                   
                }
           })(),
           
           updatePass: function(data,f){
              var u = getUser();
              if(u){
                 //password_old,password
                  post(domain+"u/?updatepass",data,f);
              }
           },
           updateNewPass: function(s,f){
              var u = getUser();
              if(u){
                  
                  post(domain+"u/?updatenewpass",{password_new:s},f);
              }
           },
           passkey: function(data,f){
             //{passkey,code}
              var u = getUser();
              post(domain+"u/?passkey",data,function(res){
                 if(res.code){
                    if(f)f(res.data);
                 }else{
                     if(f)f(null);
                 }
              });
              return this;
           },
           passkeyCheck: function(options){
             //{passkey}
             //retrive passkey and user must:
             // 1. disable ask for device
             // 2. must enter code from main app
              post(domain+"u/?passkey",{passkey:options.passkey,hash:""},function(r){
                if(r.code==2){
                    //validate
                    if(options.onRequest){
                        options.onRequest(function(code){
                            post(domain+"u/?passkeycheckcode",{passkey:passkey,code:code},function(res){
                                if(res.code){
                                    if(options.onSuccess){
                                        options.onSuccess.call(this,res,res.data);
                                    }
                                }else{
                                    if(options.onError){
                                        options.onSuccess.call(this,res.error);
                                    }
                                }
                            },true);
                        });
                    }
                }else if(r.code==1){
                    //only test not real
                    options.onSuccess.call(this,r.data);
                }else{
                    if(options.onError){
                        options.onError.call(this,r.error);
                    }
                }
              }); 
           },
           OTP:{
              first: function(data,f){
                  var u = getUser();
                  if(u){
                    //old_code,code
                      post(domain+"u/?newotp",data,f);
                  }
               }, 
              update: function(data,f){
                  var u = getUser();
                  if(u){
                    //old_code,code
                      post(domain+"u/?updateotp",data,f);
                  }
               }, 
               validate: function(data,f){
                  var u = getUser();
                  if(u){
                    //code
                      post(domain+"u/?validateotp",{code:data},f);
                  }
               }, 
           },
           miss: function(f){
                   
              post(domain+"u/?miss",{},function(r){
                if(r.code){
                    if(f)f(Object.values(r.data));
                }
                
              });
              return this;
           },
           fetch: function(f){ 
               user = getUser();
              if(f)f(user);
              return this;
           }, 
           wait: function(f){ 
               user = getUser();
                if(f){
                    f(user);
                }else{
                    setTimeout(function(){
                        userSDK.wait(f);
                    },2000);
                  return this;
                }
           }, 
           checkAccount : function(username,f){
               post(domain+"u/",{checkaccount:username},function(r){
                  if(r.code){
                    f(r.data);
                     
                 }else{
                   f(0);
                 }
               });
                
               return this;
           },
           find : function(a,f){
               post(domain+"u/",{find:a},function(r){
                  if(r.code){
                    f(r.data);
                     
                 }else{
                   f(0);
                 }
               });
                
               return this;
           },
           logout : function(f){
             clearUser();
               if(notInIframe()){
                  
                  post(domain+"u/?logout",{},function(res){ 
                     
                      if(f)f(res); 

                   });
                 
               }else{
                if(callback_iframe.id){
                    callback_iframe.id.send("logout",{},function(r){
                        // if(f)f(r); 
                    });
                }
                if(f)f(); 
               }
               
                
               return this;
           },
           delete : function(){
               post(domain+"u/?delete",{},function(res){
                  f(res);
               });
                

              // $(document).trigger("onLogout");
               return this;
           },
           uploadBlob : function(blob,f,id) {

                var reader = new FileReader();
                // this function is triggered once a call to readAsDataURL returns
                reader.onload = function(event){
                    var fd = new FormData();
                    fd.append('id', id);
                    fd.append('file', event.target.result);
                    $.ajax({
                        type: 'POST',
                        url: domain+'/upload.php',
                        data: fd,
                        processData: false,
                        contentType: false
                    }).done(function(r) {
                        try{
                           r= JSON.parse(r);
                       }catch(e){}
                       f(r);
                    });
                };      
                // trigger the read from the reader...
                reader.readAsDataURL(blob);
 
            },
           upload : function(file,f,id) {
              let formData = new FormData(); 
                if(id){
                    formData.append("id", id);
                }          
                formData.append("file", file);
                fetch(domain+'/upload.php', {
                  method: "POST", 
                  body: formData
                }).then(function(res){return res.json()}).then(function(r){
                   try{
                       r= JSON.parse(r);
                   }catch(e){}
                   f(r);
                });
            },
            uploadPicker:{
                avatar : function(options){
                    var settings = $.extend({width:100,height:100},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.updateAvatar(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        });
                    };
                    File.pickerImageCrop(settings);
                },
                crop : function(options){
                    var settings = $.extend({},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageCrop(settings);
                },
                resize : function(options){
                    var settings = $.extend({},options,true);
                    settings.callback =function(info){ 
                        options.callback(info.base64);
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageCrop(settings);
                },
                image : function(options){
                    var settings = $.extend({},options,true);
                    settings.ready =function(base64){ 
                        options.callback(base64);
                    };
                    settings.callback =function(info){  
                         
                        userSDK.uploadBase64(info.base64,function(r){
                            options.callback(r.data);
                            if(user){
                             user.avatar = r.data;
                            }
                        },settings.name||"img"+Date.now());
                    };
                    File.pickerImageResize(settings);
                }      
            },
           uploadBase64 : function(base64,f,id) {
    
              post(domain+"u/?uploadBase64",{base64:base64,id:id||""},function(res){
                 
                 if(res.code){ 
                    if(user){
                     user.avatar = res.data;
                    }
                    if(f)f(res.data);
                 }
                 
              }); 
              return this;
            }, 
           
           updateAvatar : function(base64,f){
              var me =this;
              post(domain+"u/?updateAvatar",{avatar:base64},function(res){
                 
                 if(res.code){
                    if(user){
                     user.avatar = res.data;
                    }
                    if(f)f(res.data)   ;
                 }
                 
              }); 
              return this;
           },
           updateParent : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateparent",{parent:u},function(res){
                   if(res.code){
                     if(user){
                        user.parent_id = u; 
                      }
                   }
                   a(res);
                 });
              });
           },
           updateEmail : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateEmail",u,function(res){
                   if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           updateKYC : function(data,f){
                post(domain+"u/?updatekyc",data,function(res){ 
                   a(res);
                });
                return this;
           },
           updateOTP : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updateotp",u,function(res){ 
                   a(res);
                 });
              });
           },
           updatePhone : function(u,f){
              
              return new Promise(function(a,b){
                 post(domain+"u/?updatePhone",u,function(res){
                   if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           update : function(u){
               
              return new Promise(function(a,b){
                 post(domain+"u/?update",u,function(res){
                    if(res.code){
                     if(user){
                        for(var i in u){
                         user[i] = u[i];
                        } 
                      }
                   }
                   a(res);
                 });
              });
           },
           tree :  {
                 
                treeF : function(id,f){
                  var u = userSDK.getUser();
                  if(typeof id=="function"){
                     f = id;
                     id = u.barcode||null;
                  }
                  post(domain+"u/?treeF",{id:id},function(res){
                     if(typeof res ==="object"){
                         
                         if(f)f(res.data);
                     }
                  });
                   
                  return this;
               },
               all : function(f){
                  
                  post(domain+"u/?levelTree",{},function(res){
                     if(typeof res ==="object"){
                         
                         if(f)f(res.data);
                     }
                  });
                  return this;
               },
               scan : function(f){
                  
                  post(domain+"u/?scanTree",{},function(res){
                     if(typeof res ==="object"){ 
                         if(f)f(res.data);
                     }
                  });
                  return this;
               }
           },
           cache : function(f){
              
              post(domain+"u/?cache",{},function(res){
                 if(typeof res ==="object"){ 
                     if(f)f();
                 }
              });
              return this;
           },
           search : function(str,f){
                post(domain+"u/?search",{s:str},function(res){
                    
                   if(f)f(res);
                });
               return this;
           },
           address :  {
                list :[],
                toList : function(f){
                  
                  post(domain+"u/?address",{},function(res){
                     if(typeof res ==="object"){
                         userSDK.address.list = res;
                         if(f)f(res);
                     }
                  });
                   
                  return this;
               },
               update : function(f){
                  
                  post(domain+"u/?addressupdate",{list:this.list},function(r){
                     if(r.code){ 
                        if(f)f(r.data);
                     }
                  });
                   
                  return this;
               },
               add : function(data,f){
                  var me = this;
                  post(domain+"u/?addressadd",data,function(r){
                     if(r.code){
                        me.list.push(r.data);
                        if(f)f(r.data);
                     }
                  });
                   
                  return this;
               }
           },
           updatekey : function(k,v,f){
              this.u[k] = v;
              post(domain+"u/?updatekey",{k:k,v:v},function(res){
                  if(f)f(res);
              });
              //this.login(this.u);

              return this;
           },
           profile : function(f){
            var me = this;
              //try to fetch
              post(domain+"u/?profile",{},function(r){
                if(f){
                    if(r.code){
                        if(!user)user={};
                          for(var i in r.data){
                             user[i] = r.data[i];
                          }
                        f(r.data); 
                     }else{
                       f(null);
                     }
                }
                  
              });
              return this;
           },
           parent : function(f){
            var me = this;
              //try to fetch
              post(domain+"u/?parent",{},function(r){
                if(f){
                    if(r.code){
                        user.parent = r.data;
                        f(r.data); 
                     }else{
                       f(null);
                     }
                }
                  
              });
              return this;
           },
           register : function(data,f){
             var me = this;
              //try to fetch
              post(domain+"u/?register",data,function(r){
                  if(r.code){ 
                    //now check postback
                    if(r.data.postback){
                        userSDK.post(r.data.postback,{},function(){});
                        delete r.data.postback;
                    }
                      me.u = r.data;
                     f(r.data);


                  }else{
                     f(r.error);
                  }
              });
              return this;
           },
           login : function(data,f){
             var me = this;
              //try to fetch
              post(domain+"u/?login",data,function(r){
                  if(r.code){  
                     me.save(r.data);
                     if(f)f(r.data);

                  }else{
                     if(f)f(null);
                  }
              });
              return this;
           },
           sync : function(f){
              var me = this;
              //try to fetch
              post(domain+"u/?sync",{},function(r){
                  if(r.code){
                       f(r.data);
                 }else{
                     f(null);
                 }
              });
              return this;
           }
        };



    
})(window);
/*
UI User
 */
(function(win){
    var alertDialog = win.alertDialog || function (title, message, f) {
    var opts = null;
    if(typeof title=="object"){
       opts =  title;
       opts.className = "modal-flex";
       f = opts.callback||function(){};
    }else{
        var str = message || "...";

        opts = {

            icon: null,

            title: title || 'Title',
            textYes :"Xc nhn",
            textNo :"B qua",

            message: str,

            size: 'large',

            className: "modal-flex"

        };
    }
    
    

    if (!opts.buttons && opts.nobutton==undefined) {



        opts.buttons = {

            cancel: {

                label: opts.textNo||"B qua",

                className: 'btn-danger',

                callback: function() {

                    if (f)f(dialog, 0);

                }

            },

            noClose: {

                label: opts.textYes||"Xc nhn",

                className: 'btn-info',

                callback: function() {

                    if (f)f(dialog, 1);
                    return false;
                }

            }

        };

    }

    var dialog = bootbox.dialog(opts);

     
    return new Promise(function(a,b){
        a(dialog);
    });
};
alertDialog.tools = alertDialog.tools||function(options) {

    return $.extend({
                $:null,
        close: function(){
            this.$.modal("hide");
            return this;
        },
        stop : function(s){
            this.$.closest(".bootbox-body").html(s);
            this.$.find(".modal-footer").hide();
            return this;
        },
        hide : function(s){
            this.$.find(".msg").html("");
            return this;
        },
        empty : function(s,icon){
            s=s||'';
            icon = icon||"https://cdn-icons-png.flaticon.com/128/14005/14005478.png";
            return this.stop(`<div class=""><img width=125 height=125 src="${icon}" /><br/>${s}</div>`);
        },
        info : function(s){
            this.$.find(".msg").html(`<div class="alert-info">${s}</div>`);
            return this;
        },
        success : function(s){
            this.$.find(".msg").html(`<div class="alert-success">${s}</div>`);
            return this;
        },
        error : function(s){
            this.$.find(".msg").html(`<div class="alert-warning">${s}</div>`);
            return this;
        }
    },options,true);

};
    window.userSDK.miss = function (abc,f){
        switch (abc) {
            case "sync":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <p>Bn ang yu cu ng b ti khon.</p> 
                <div class="text-center">
                      <img src="https://cdn-icons-png.flaticon.com/128/4727/4727424.png" class='icon avatar' onerror="this.src='https://cdn-icons-png.flaticon.com/128/4727/4727424.png'" />
                </div>
                <form> 
                    <div class="lr">
                        <div>H v tn</div>  
                        <div class="fullname"></div>  
                    </div>
                    <div class="lr">
                        <div>Email</div>  
                        <div class="email"></div>  
                    </div>
                </form>
                <div class="msg"></div>  
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
            var options = null;
            if(typeof f=="object"){
                options = f;
            }else { 
               options={passkey:f};
            }
            var settings={ 
                title : "ng b ti khon",
                message :str,
                textYes:"Cp nht",
                callback : function(dialog,ok){

                    if(ok&&settings.data){
                         userSDK.save(settings.data);
                    }
                   
                    bootbox.hideAll();
                }
            };
             alertDialog(settings).then(function(dialog){
                methods.$ = dialog;
 

                var process = function(data){
                    dialog.find(".avatar").attr("src",data.avatar);
                    dialog.find(".email").html(data.email);
                    dialog.find(".fullname").html(data.fullname);
                    settings.data = data;
                };

                 
                methods.info("ang x l...");
                userSDK.passkey(options,function(res){
                    methods.info(""); 
                    if(typeof res=="object"){
                        process(res);
                    }else{
                        methods.error(res);
                    }
                });


                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "choose":
            case "profile":
                 //maybe barcode
                var str=`<div class="msgicon b${abc}">
                  <div class="flex-col center">
                       
                      <div class='flex'>
                            <div style="width: 100%" class="myqr text-center"></div>
                            <div class="info"></div>
                            <div class="form-group">
                                 <label for="sssssw">Chia s cho bn b</label>
                                 <div class="lr shareaction">
                                     <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                                     <button class="btn btn-primary">Sao chp</button>
                                 </div>
                                  
                            </div>  
                            <p>Bn mun</>
                            <div class="items scrollable">
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/3029/3029373.png" />
                                    <div>Chuyn khon</div>
                                </div>
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/3334/3334115.png" />
                                    <div>Tr chuyn</div>
                                </div>
                                <div class="item">
                                    <img width="24" src="https://cdn-icons-png.flaticon.com/128/4187/4187272.png" />
                                    <div>Trang c nhn</div>
                                </div>
                            </div>
                      </div>
                   </div>
                </div>`;
                var methods = alertDialog.tools();
                var settings={
                    nobutton :1,
                    title : "Ti khon",
                    message :str,
                    callback : function(dialog,ok){
                        bootbox.hideAll();
                    
                    }
                };
                 alertDialog(settings).then(function(dialog){



                    var options = null;
                    if(typeof f=="object"){
                        options = f;
                    }else {
                       //find profile
                       
                       options={barcode:f};
                    }
                    

                    var process = function(data){

                        dialog.find('.info').html(`<p>${data.fullname}</p>`);

                        var url = data.barcode||0;
                        dialog.find('.shareaction input').val(url);
                        dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                        dialog.find(".myqr").html("").qrcode({
                            text : url,
                            width:215,
                            height:215
                        });
                    };

                    dialog.find('.items .item').on("click",function(e){
                        e.preventDefault();

                    });


                    process(options);

                    userSDK.find(options.barcode,function(res){
                        if(res)process(res);
                    });

                    
                  }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "members":
            case "tree":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <div style="width: 100%" class="myqr text-center"></div>
                <div class="form-group">
                     <label for="sssssw">Ngi gii thiu</label>
                     <div class="lr shareaction">
                         <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                         <button class="btn btn-primary">Sao chp</button>
                     </div> 
                </div>  
                <div class="mytree">  
                </div>  
          </div>
       </div>
    </div>`;
            var methods =  alertDialog.tools();
            var settings={
                nobutton :1,
                title : "H thng thnh vin",
                message :str,
                callback : function(dialog,ok){
                    bootbox.hideAll();
                
                }
            };
             alertDialog(settings).then(function(dialog){
                var user = userSDK.getUser();

                var options = $.extend({},options,true);
                 

                var process = function(data){
                    var url = data.barcode||0;
                    dialog.find('.shareaction input').val(url);
                    dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                    dialog.find(".myqr").html("").qrcode({
                        text : url,
                        width:215,
                        height:215
                    });
                };

                if(user.parent){
                    process(user.parent);
                }else{
                    userSDK.parent(function(res){
                        if(res)
                         process(res);
                    });
                }

                dialog.find(".mytree").Ahlutree({
                   languages:{
                    en:{
                        refresh: "Ti li"
                    }
                  },
                  lang : "en",

                  render : function(data){
                    return "<a data-id='"+data.id+"' href='javascript:void(0)'><strong>"+data.fullname+"</strong>"+(data.hasChild!='0'?`(${data.hasChild})`:'')+" </a> <a class='detail btn btn-primary btn-xs pickerProfile' data-info='"+JSON.stringify(data)+"' href='#'>Chi tit</a>";
                  },
                  data: function(callback){ 
                   
                    
                    userSDK.tree.treeF(function(data){
                      callback(Object.values(data));
                      // console.log(data);
                    },true);
                   
                  },
                  onDemandData: function (id,callback) {
                    // showLoader(2);
                    userSDK.tree.treeF(id,function(res){
                         callback(Object.values(res));
                    },true);
                  }
                });
                

                
              }).then(function(dialog){
                methods.$ = dialog;
              }); 
            break;
            case "barcode":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
           
          <div class='flex'>
                <div style="width: 100%" class="myqr text-center"></div>
                <div class="form-group">
                     <label for="sssssw">Chia s cho bn b</label>
                     <div class="lr shareaction">
                         <input type="text" id="sssssw" class="flex form-control shareaction" value="" />
                         <button class="btn btn-primary">Sao chp</button>
                     </div>
                     <small class="form-text text-muted note"></small>
                </div>  
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
            var settings={
                nobutton :1,
                title : "Ti khon",
                message :str,
                callback : function(dialog,ok){
                    bootbox.hideAll();
                
                }
            };
             alertDialog(settings).then(function(dialog){



                var options = null;
                if(typeof f=="object"){
                    options = f;
                }else {
                   if(!f){
                      var u = userSDK.getUser();
                      if(u){
                         f= u.barcode;
                      }
                   }
                   options={barcode:f};
                }
                if(options.note)options.note='Nhn ti 10% Bonus khi chia s chon bn b ng k mi.';

                var process = function(data){
                    var url = data.barcode||0;
                    dialog.find('.shareaction input').val(url);
                    dialog.find('.shareaction .btn,.shareaction button').attr("data-copy",url);

                    dialog.find(".myqr").html("").qrcode({
                        text : url,
                        width:215,
                        height:215
                    });
                };

                dialog.find('.note').html(options.note);

                if(!options.barcode){
                    userSDK.find(options.passkey,function(res){
                        if(res.data)
                         process(res.data);
                    });
                }else{
                    process(options);
                }


                
              }).then(function(dialog){
                methods.$ = dialog;
              }); 
            break;
            case "login":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
          <div>
            <i class="fa fa-id-badge" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>ng nhp</p>
            
             <div class="form-group">
                  <label for="ssss">Ti khon</label> 
                  <input type="text" id="xxx" name="username" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">Mt khu</label>
                  <input type="password" id="xxx" name="password" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 6 k t</small>
             </div>

             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
            var methods = alertDialog.tools();
                alertDialog("Ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.login(data,function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("nh nhp thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });  
            break;
            case "id_parent":
            case "ref":

              var str= `<div class="msgicon b${abc}">
       <div class="flex-col center">
          <div>
            <i class="fa fa-user" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht ngoi gii thiu</p>
             <p>Thng cc quyn u i t cc ng dng</p>
             <div class="form-group">
                  <label for="ssss">M ID ngi gii thiu</label>
                  <input type="text" id="xxx" name="ref" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
              alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input").val();
                     if(data){
                        
                        userSDK.updateParent(data).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            
            break;
            case "email":
                var str= `<div class="msgicon b${abc}" onclick1='window.AccountUpdateEmail(this)'>
       <div class="flex-col center">
          <div>
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht i ch email</p>
             <p>Dng  khi phc mt khu</p>
             <p>Nhn nhng thng tin OTP bo mt</p>
             <div class="form-group">
                  <label for="ssss">Email</label>
                  <input type="email" id="xxx" name="ssss" class="form-control email" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">M OTP</label>
                  <input type="email" id="xxx" name="ssss" class="form-control auth" value="" />
                  <small class="form-text text-muted">Thi gian cn li <span class="timer">0</span></small>
             </div>
             <div class="msg"></div>
          </div>
       </div>
    </div>`;
              alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input.email").val();
                     var auth =  dialog.find("input.auth").val();
                     if(data){ 
                        
                        if(auth){
                            userSDK.updateEmail({email:data,code:auth}).then(function(res){

                                
                                if(f){
                                    f(res,data,methods);
                                }else{
                                    if(res.code){
                                        alert("Cp nht thnh cng");
                                        methods.close();
                                    }else{
                                         methods.error(res.error);
                                    }

                                }
                            });
                            return;
                        }

                        userSDK.updateEmail({email:data}).then(function(res){
                            if(res.code){
                               methods.success(res.message);

                                if(res.auth){
                                    if(res.faker){
                                        dialog.find(".formauth .auth").val(res.otp);
                                    }
                                    dialog.find(".formauth").show();
                                    dialog.find(".timer").html(res.timer);
                                }else{
                                    alert("Cp nht thnh cng");
                                    
                                     if(f){
                                        f(res,data);
                                    }else{
                                        methods.close();
                                    }
                                }
                            }else{
                                methods.error(res.error);
                            }
                            
                           
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
                
            break;
            case "phone":
                var str= `<div class="msgicon b${abc}" onclick1='window.AccountUpdateEmail(this)'>
       <div class="flex-col">
          <div>
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht s in thoi</p>
             <p>Dng  khi phc mt khu</p>
             <p>Nhn nhng thng tin OTP bo mt</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control phone" value="" />
                  <small class="form-text text-muted">t nht 10 k t</small>
             </div>
             <div class="form-group formauth" style="display:none">
                  <label for="ssss">M OTP</label>
                  <input type="email" id="xxx" name="ssss" class="form-control auth" value="" />
                  <small class="form-text text-muted">Thi gian cn li <span class="timer">0</span></small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input.phone").val();
                     var auth =  dialog.find("input.auth").val();
                     if(data){
                        
                        if(auth){
                            userSDK.updatePhone({phone:data,otp:auth}).then(function(res){

                                
                                if(f){
                                   f(res,data,methods);
                                }else{
                                    if(res.code){
                                        alert("Cp nht thnh cng");
                                        methods.close();
                                    }else{
                                        methods.error(res.error);
                                    }

                                }
                            });
                            return;
                        }

                        userSDK.updatePhone({phone:data}).then(function(res){

                            
                            if(res.code){
                                if(res.data.auth){
                                    dialog.find(".formauth").show();
                                }else{
                                    if(f){
                                        f(res,data,methods);
                                    }else{
                                        if(res.code){
                                            alert("Cp nht thnh cng");
                                            methods.close();
                                        }else{
                                            methods.error(res.error);
                                        }

                                    }

                                }
                            }else{
                                methods.error(res.error);
                            }

                            
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "username":
                var str=`<div class="msgicon b${abc}">
      <div class="flex-col center">
          <div>
            <i class="fa fa-id-badge" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht tn ti khon</p>
             <p>Bn c th ng nhp vo ng dng bng tn ng nhp ny</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
                if(ok){
                     
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.update({username:data}).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "fullname":
                var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateFullname(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-user" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht tn hin th</p>
             <p>Mi ngi c th tm kim thng ca bn d dng hn</p>
             <div class="form-group">
                   
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 3 k t</small>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");
                    var methods = alertDialog.tools();
               if(ok){
                   
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.update({fullname:data}).then(function(res){

                            
                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "new_otp": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>To mi OTP</p>
             <p>Nhp m bo mt  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");  
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("input").val();
                     if(data){
                        userSDK.updateOTP({code:data}).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
        case "newpassword": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Mt khu mi</p>
             <p>Hin ti bn cha t mt khu. Vui lng t mt khu  bo v ti khon ca bn</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");    
                    var methods = alertDialog.tools();
                if(ok){
                   
                     var old =  dialog.find("input.old").val(); 
                     if(old){
                        userSDK.updateNewPass(old).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            case "password": 
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>i mt khu</p>
             <p>i mt khu  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control new" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");   
                    var methods = alertDialog.tools();
                if(ok){
                     
                     var old =  dialog.find("input.old").val();
                     var new_ =  dialog.find("input.new").val();
                     if(old){
                        userSDK.updatePass({password_old:old,password:new_},function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
        case "confirmotp":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Nhp OTP </p>
             <p>Nhp OTP  xc thc giao dch.</p>
            <form class="">
                   <div class="form-group"> 
                          <input type="text" id="xxx" name="code" class="form-control" value="" />
                          <small class="form-text text-muted">t nht 4 con s</small>
                          <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
                     </div>
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("Xc thc OTP",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
              
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.OTP.validate(data).then(function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "newotp":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht OTP ln u</p>
             <p>Nhp OTP  bo v ti khon ca bn.</p>
            <form class="">
                   <div class="form-group"> 
                          <input type="text" id="xxx" name="code" class="form-control" value="" />
                          <small class="form-text text-muted">t nht 4 con s</small>
                          <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
                     </div>
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("OTP Bo Mt",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
              
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.OTP.first(data,function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "otp":
            case "code_otp":
            case "otp_code":
                 var str=`<div class="msgicon b${abc}" onclick1='window.AccountUpdateOTP(this)'>
      <div class="flex-col center">
          <div>
            <i class="fa fa-shield" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht OTP</p>
             <p>Nhp m bo mt  no v ti khon ca bn.</p>
             <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control old" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
              <div class="form-group"> 
                  <input type="text" id="xxx" name="ssss" class="form-control new" value="" />
                  <small class="form-text text-muted">t nht 4 con s</small>
                  <i style="display: inline-block;padding: 10px;position: absolute;right: 0;top: 0;" class="n fa fa-eye" onclick="var me = $(this);if(me.hasClass('fa-eye')){me.removeClass('fa-eye').addClass('fa fa-eye-slash');me.parent().find('input').attr('type','text')}else{me.removeClass('fa-eye-slash').addClass('fa fa-eye');me.parent().find('input').attr('type','password')}" ></i>
             </div>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
                 alertDialog("Bo mt",str,function(dialog,ok){
                    var msg = dialog.find(".msg").html("");    
                    var methods = alertDialog.tools();
                if(ok){
                    
                     var old =  dialog.find("input.old").val();
                     var new_ =  dialog.find("input.new").val();
                     if(old){
                        methods.info("ang x l...");
                        userSDK.updateOTP({otp_code:old,code:new_}).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    methods.success("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
                // $(".updater").append(str);
            break;
        case "addcard":
            //https://codepen.io/abdallahyasser/pen/GRXKaaO
                var str="";
                if($("#styleaddcard").length==0){
                    str+=`<style id="styleaddcard">.containercard form{background:#fff;-webkit-box-shadow:0 10px 15px rgba(0,0,0,.1);box-shadow:0 10px 15px rgba(0,0,0,.1);max-width:320px;padding:160px 20px 20px;border-radius:5px}.containercard form .inputBox{margin-top:20px}.containercard form .inputBox span{display:block;color:#9999}.containercard form .inputBox input,.containercard form .inputBox select{margin-top:5px;padding:5px;border:1px solid rgba(0,0,0,.3);color:#444;width:100%;height:40px;border-radius:10px}.containercard .card-container .back,.containercard .card-container .front{-webkit-box-orient:vertical;-webkit-box-direction:normal;position:absolute;top:0;left:0;height:100%;border-radius:10px;width:100%}.containercard form .flexbox{display:-webkit-box;display:-ms-flexbox;display:flex;gap:8px}.containercard form .flexbox .inputBox{-webkit-box-flex:1;-ms-flex:1 1 150px;flex:1 1 150px}.containercard form .flexbox .inputBox .cvv-input,.containercard form .flexbox .inputBox .month-input,.containercard form .flexbox .inputBox .year-input{padding:5px;color:#444}.containercard form .flexbox .inputBox .cvv-input{-webkit-appearance:none;-moz-appearance:none;appearance:none}.containercard form .submit-btn{display:block;padding:10px;width:100%;margin-top:20px;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);color:#fff;font-size:18px;-webkit-transition:.2s linear;-o-transition:.2s linear;transition:.2s linear;cursor:pointer}.containercard form .submit-btn:hover{letter-spacing:2px;opacity:.8}.containercard .card-container{margin-bottom:-160px;position:relative;height:250px;max-width:320px}.containercard .card-container .front{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.3);box-shadow:0 10px 20px rgba(0,0,0,.3);padding:20px;-webkit-transform:perspective(1000px) rotateY(0);transform:perspective(1000px) rotateY(0);-webkit-transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;-o-transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out}.containercard .card-container .front .image{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative}.containercard .card-container .front .image img{height:80px}.containercard .card-container .front .image .chip-img{top:20px}.containercard .card-container .front .card-number{font-size:16px;color:#fff;padding:20px 0;text-transform:uppercase}.containercard .card-container .front .flexbox{display:-webkit-box;display:-ms-flexbox;display:flex}.containercard .card-container .front .flexbox .box:first-child{margin-right:auto}.containercard .card-container .front .flexbox .box{border-radius: 0;
    font-size: 15px;
    color: #fff !important;
    background-color: transparent;
    border: 0;
    margin: 0;
        text-transform: uppercase;
    box-shadow: none;}.containercard .card-container .back{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background:-o-linear-gradient(45deg,#8a2be2 ,#ff1493);background:linear-gradient(45deg,#8a2be2 ,#ff1493);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.3);box-shadow:0 10px 20px rgba(0,0,0,.3);padding:10px 0;text-align:right;backface-visibility:hidden;-webkit-transform:perspective(1000px) rotateY(180deg);transform:perspective(1000px) rotateY(180deg);-webkit-transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;-o-transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out}.containercard .card-container .back .stripe{background:#000;height:40px;width:100%;margin:10px 0}.containercard .card-container .back .box{padding:0 20px}.containercard .card-container .back span{color:#fff;font-size:15px;display:block;text-align:left}.containercard .card-container .back .cvv-box{height:50px;background:#fff;color:#333;padding:10px;margin-top:5px;border-radius:5px;width:100%}.containercard .card-container .back img{margin-top:10px;height:80px}</style>`;
                }

                str+= `<div class="msgicon b${abc}" >
                
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex containercard'>
             <p class='bold'>Thm ther Visa/Mastercard</p> 
            <div class="card-container">
            <div class="front">
                <div class="image">
                    <img src="https://pngimg.com/uploads/visa/visa_PNG36.png" alt="" >
                    <img src="./chip.png" alt=""  class="chip-img">
                </div>
                <div class="card-number">#### #### #### ####</div>
                <div class="flexbox">
                    <div class="box">
                        <span>card holder</span>
                        <div class="card-holder-name">full name</div>
                    </div>
                    <div class="box" style="text-align: right;flex: 1;">
                        <span>expires</span>
                        <div class="expiration">
                            <span class="exp-month">mm</span>
                            <span>/</span>
                            <span class="exp-year">yy</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="back">
                <div class="stripe"></div>
                <div class="box">
                    <span>cvv</span>
                    <div class="cvv-box"></div>
                    <img src="https://pngimg.com/uploads/visa/visa_PNG36.png" alt="" width="100">
                </div>
            </div>

        </div>

       

       <form action="">
            <div class="inputBox">
                <span>Card Number</span>
                <input type="text" maxlength="16" class="card-number-input">
            </div>
            <div class="inputBox">
                <span>Card Holder</span>
                <input type="text" maxlength="26" class="card-holder-input">
            </div>
            <div class="flexbox">
                <div class="inputBox">
                    <span>expiration mm</span>
                    <select name="" id="" class="month-input">
                        <option value="month" selected disabled>month</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>
                <div class="inputBox">
                    <span>expiration yy</span>
                    <select name="" id="" class="year-input">
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                        <option value="2031">2031</option>
                    </select>
                </div>
                <div class="inputBox">
                    <span>cvv</span>
                    <input type="text" maxlength="4" class="cvv-input">
                </div>
            </div>
             
       </form>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                 var msg = dialog.find(".msg").html("");
                 var methods = alertDialog.tools();
                 
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.addCard(data).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                   methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(box){
                methods.$ = box;
                var me = box[0];
                // console.log(me);
                
                    box.find('.card-number-input').on("keyup",function(){
                      var v = this.value;
                      if(v){
                        v=v.split("").reduce((all,one,i) => {
                           const ch = Math.floor(i/4); 
                           all[ch] = [].concat((all[ch]||[]),one); 
                           return all
                        }, []).map(function(n){
                            return n.join("");
                        }).join(" ");

                      }else{
                        v = "#### #### #### ####";
                      }
                      box.find('.card-number').html(v);
                    });

                    box.find('.card-holder-input').on("keyup",function(){
                      box.find('.card-holder-name').html(this.value);
                    });

                    box.find('.month-input').on("change",function(){
                      box.find('.exp-month').html(this.value);
                    });

                    box.find('.year-input').on("change",function(){
                      box.find('.exp-year').html(this.value?this.value.slice(2):"");
                    });

                    box.find('.cvv-input').on("mouseenter",function(){
                      me.querySelector('.front').style.transform = 'perspective(1000px) rotateY(-180deg)';
                      me.querySelector('.back').style.transform = 'perspective(1000px) rotateY(0deg)';
                    });

                    box.find('.cvv-input').on("mouseleave",function(){
                      me.querySelector('.front').style.transform = 'perspective(1000px) rotateY(0deg)';
                      me.querySelector('.back').style.transform = 'perspective(1000px) rotateY(180deg)';
                    });

                    box.find('.cvv-input').on("keyup",function(){
                      box.find('.cvv-box').html(this.value);
                    });
              });
            break;
        case "addbanking":
                var str= `<div class="msgicon b${abc}" >
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Thm ti khon ngn hng</p>
             <p>Nhp ti khon ngn hng ca bn.</p>
            <form class="">
                 <div class="form-group">
                     <label for="xssxx">Chn ngn hng</label>
                     <input type="text" id="xssxx" name="bank" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xxxss">H tn ngi nhn</label>
                     <input type="text" id="xxxss" name="fullname" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xx2211x">Ti khon ngn hng</label>
                     <input type="text" id="xx2211x" name="account" class="form-control" value="" /> 
                </div>
                <div class="form-group">
                     <label for="xaaaxx">a ch chi nhnh</label>
                     <input type="text" id="xaaaxx" name="branch" class="form-control" value="" /> 
                </div>  
             </form>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
              var methods = alertDialog.tools();
                if(ok){
                    
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        userSDK.updateBank(data).then(function(res){

                            if(f){
                                f(res,data,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
              });
            break;
            case "addaddress": 
                var options = $.extend({
                    title:"Thm a ch nhn hng",
                },f,true);
           
                var methods = alertDialog.tools();
                var str=`
                     <form>
                        <div class="form-group">
                             <label for="sxxx">H v tn <b class="text-red">*</b></label>
                             <input type="text" id="sxxx" name="fullname" class="form-control" value="" /> 
                        </div>
                         <div class="form-group">
                             <label for="sxxsx">S in thoi <b class="text-red">*</b></label>
                             <input type="text" id="sxxsx" name="phone" class="form-control" value="" /> 
                        </div>
                         <div class="countryside">
                              
                         </div>
                         <input type="hidden" name="address" class="address" />
                     </form>
                     <div class="msg"></div>  `;
                
                var settings={ 
                    className:"addresspicker", 
                    title : options.title,
                    message :str,
                    callback : function(dialog,ok){

                        if(ok){
                            var data = dialog.find("form").serializeObject();

                            userSDK.address.add(data,function(){
                                if(options.callback){
                                     options.callback(data);
                                }

                                methods.close(); 
                            });
                            
                        }else{ 
                            methods.close(); 
                        } 
                    }
                };
               alertDialog(settings).then(function(dialog){
                    methods.$ = dialog; 
                    dialog.find(".countryside").country({
                        type: "address",
                        callback:function(res){
                            console.log(res);

                              if(res.ward_id){
                                var to = `${res.street}, ${res.ward}, ${res.district}, ${res.province}`;
                              
                                dialog.find(".address").val(to);
                              }
                          }
                    }); 
                    dialog.find("form").validate({
                        submitHandler : function(form){

                        }
                    });
               });
            break;
            case "listaddress": 
                var options = $.extend({
                    title:"a ch ca ti",
                },f,true);
           
                var methods = alertDialog.tools();
                function tlp(v){
                    var slug = v.address.make_slug();
                    if(methods.$.find(".a"+slug).length){
                        return "";
                    }
                    return `<div class="white-view a${slug}"  data-info='${JSON.stringify(v)}'>
                                <div>${v.fullname} - ${v.phone}</div>
                                <div>${v.address}</div>
                            </div>`;
                }
                var str=`
                    

                    <div class="groupactive">
                       
                         ${userSDK.address.list.map(function(v){
                            return tlp(v);
                         }).join("")}
                     </div>
                      <div class="white-view text-center" style="border-style: dashed;">
                            a ch giao hng<br/>
                             <button type="button" class='btn btnnewaddress no'>Thm mi</button>
                        </div>
                      
                     <div class="msg"></div>  `;
                
                
                var settings={ 
                    className:"addresspicker", 
                    title : options.title,
                    message :str,
                    callback : function(dialog,ok){

                        if(ok){
                            var store = dialog.find(".active").data("info");

                            if(options.callback) options.callback(store);

                            methods.close(); 
                        }else{ 
                            methods.close(); 
                        } 
                    }
                };
               alertDialog(settings).then(function(dialog){
                    methods.$ = dialog; 
                    userSDK.address.toList(function (r) {
                         
                        dialog.find(".groupactive").append(r.map(function(v){
                            return tlp(v);
                         }).join(""));
                    });

                    //add new
                    dialog.find(".btnnewaddress").on("click",function(){
                        updateuser("addaddress",{
                            callback : function(info){

                                dialog.find(".groupactive").prepend(tlp(info)); 
                            }
                        });
                    });
               }); 
            break;
            case "address": 
            case "province_id":
                var str= `<div class="msgicon b${abc}"  >
      <div class="flex-col center">
          <div>
            <i class="fa fa-address-card-o" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>Cp nht a ch</p>
             <p>Nhp a ch bn ang sng hin ti.</p>
            <form class="countryside">
                   
             </form>
             <div class="msg"></div>
          </div>
       </div>
    </div>`;
            alertDialog("Thng bo cp nht thng tin ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                     
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        data.address = `${data.street}, ${data.ward}, ${data.district}, ${data.province}`;
                        userSDK.update(data).then(function(res){

                            if(f){
                                f(res,data.address,methods);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(box){
                methods.$ = box;
                    box.find(".countryside").country({type:"address"});
              });
            break;

        case "kyc":  
        case "kycimage":  
                var str= `<div class="msgicon b${abc}"  >
      <div class="flex-col center">
          <div>
            <i class="fa fa-user-circle" aria-hidden="true"></i>
          </div>
          <div class='flex'>
             <p class='bold'>KYC nh danh ti khon</p>
             <p>Vui lng lm theo cc bc bn di  m bo l ngi dng thc s.</p>
             <form class="">
                 <div class="cccd_front flex-col white-view"><div class="flex">Cho hnh CCCD mt trc. Khng b nho hoc b bng nh sng</div><div><img src="https://file.hstatic.net/200000845283/file/nfc-cccd-1_d951e36abfa2416dace2883b0f268462.png" style="
                width: 180px;
            "></div></div>              
                         <div class="cccd_back flex-col white-view"><div class="flex">Cho hnh CCCD mt trc. Khng b nho hoc b bng nh sng</div><div><img src="https://file.hstatic.net/200000845283/file/nfc-cccd-1_d951e36abfa2416dace2883b0f268462.png" style="
                width: 180px;
            "></div></div><div class="selfie white-view"><div class="flex">Selfie</div><div class="videoselfie"><img src="https://baoquangbinh.vn/dataimages/202101/original/images690431_22.jpg" style="
                width: 100%;
            "></div></div></form>
             <div class="msg"> </div>
          </div>
       </div>
    </div>`;
    //https://recorderjsd.netlify.app/
    //https://stackoverflow.com/questions/13333378/how-can-javascript-upload-a-blob
            alertDialog("KYC - nh danh ti khon",str,function(dialog,ok){
                var msg = dialog.find(".msg").html("");
                var methods = alertDialog.tools();
                if(ok){
                
                     var data =  dialog.find("form").serializeObject();
                     if(data){
                        
                        userSDK.updateKYC(data,function(res){

                            if(f){
                                f(res,data);
                            }else{
                                 if(res.code){
                                    alert("Cp nht thnh cng");
                                    methods.close();
                                }else{
                                    methods.error(res.error);
                                }

                            }
                        });

                        
                     }
                }else{
                    if(f)f(ok,null,methods);
                }
                
              }).then(function(dialog){
                methods.$ = dialog;
                  dialog.find(".cccd_front img").on("click",function(e){
                    File.pickerImage({callback:function (file) {
                       userSDK.upload(file,function(r){
                          dialog.find(".cccd_front img").attr("src",r);
                       });
                    }});
                  });
                  dialog.find(".cccd_back img").on("click",function(e){
                     File.pickerImage({callback:function (file) {
                       userSDK.upload(file,function(r){
                            dialog.find(".cccd_back img").attr("src",r);
                       });
                    }});
                  });
                  
                  dialog.find(".selfie_input").on("click",function(e){

                  });
              });
            
            break;
            
        }   
    };
})(window);


 
function _0x3ceb(_0x3fe099,_0x3c8c30){var _0x10ed3f=_0x10ed();return _0x3ceb=function(_0x3ceba8,_0x572fa7){_0x3ceba8=_0x3ceba8-0x145;var _0x56d7e3=_0x10ed3f[_0x3ceba8];return _0x56d7e3;},_0x3ceb(_0x3fe099,_0x3c8c30);}(function(_0x2418cb,_0x12ea1f){var _0x49c291=_0x3ceb,_0x4eb12f=_0x2418cb();while(!![]){try{var _0xae7cab=-parseInt(_0x49c291(0x177))/0x1*(-parseInt(_0x49c291(0x172))/0x2)+parseInt(_0x49c291(0x158))/0x3*(parseInt(_0x49c291(0x19f))/0x4)+parseInt(_0x49c291(0x187))/0x5*(-parseInt(_0x49c291(0x17d))/0x6)+parseInt(_0x49c291(0x162))/0x7+parseInt(_0x49c291(0x1a5))/0x8+-parseInt(_0x49c291(0x169))/0x9+parseInt(_0x49c291(0x17c))/0xa;if(_0xae7cab===_0x12ea1f)break;else _0x4eb12f['push'](_0x4eb12f['shift']());}catch(_0x476c25){_0x4eb12f['push'](_0x4eb12f['shift']());}}}(_0x10ed,0x798f3),!function(_0x4335ba){var _0x4cf6c0=_0x3ceb,_0xc2876d=_0x4cf6c0(0x153);function _0x4cde4a(_0x2eecc4,_0x455bc1,_0xf8ff4e,_0x18183c){var _0x3a5669=_0x4cf6c0;$[_0x3a5669(0x19c)]({'url':_0x2eecc4,'type':_0x3a5669(0x19b),'data':_0x455bc1,'async':_0x18183c||!0x1,'success':function(_0x57a118){var _0x10034e=_0x3a5669;try{_0x57a118=JSON[_0x10034e(0x185)](_0x57a118[_0x10034e(0x15f)]());}catch(_0xfc6873){}_0xf8ff4e(_0x57a118);},'error':function(_0x4dcbc3,_0x357dc9,_0x1f3eb8){var _0x1a5143=_0x3a5669;_0x4cde4a['STATUS_CODE']=_0x1f3eb8[_0x1a5143(0x16a)],this['success'](_0x4dcbc3[_0x1a5143(0x166)]);}});}_0x4cde4a['STATUS_CODE']=0x0;var _0x1aa706=0x0;function _0xa8a52b(){var _0x30662e=_0x4cf6c0;0x0==_0x1aa706&&(_0x1aa706=0x1,$(_0x30662e(0x151))[_0x30662e(0x16d)](_0x30662e(0x171)));}var _0x1f4a43=null;window[_0x4cf6c0(0x17a)]=function(_0xd3e238){_0xd3e238;},window[_0x4cf6c0(0x170)]=function(_0x5bc58e){var _0x4bb3c2=_0x4cf6c0,_0x26f58e=window[_0x4bb3c2(0x1b0)]||UserSystem();if(window['AhluADS']&&window[_0x4bb3c2(0x199)]['inline']&&_0x26f58e&&'demo'!=_0x26f58e[_0x4bb3c2(0x189)]){if(!(_0x5bc58e=_0x4bb3c2(0x183)==typeof _0x5bc58e?$(_0x5bc58e):_0x5bc58e))return;function _0x41567a(_0x44f517,_0x34c8e2){var _0xc6c564=_0x4bb3c2;if(_0x34c8e2){var _0x43bde2=_0x44f517[Math[_0xc6c564(0x17f)](Math[_0xc6c564(0x179)]()*_0x44f517[_0xc6c564(0x155)])],_0x46480b=_0x43bde2[_0xc6c564(0x1b5)];-0x1==_0x46480b[_0xc6c564(0x194)]('open=true')&&(_0x46480b=_0x46480b+(-0x1!=_0x46480b['indexOf']('?')?'&':'?')+_0xc6c564(0x1a8)),_0x34c8e2['find']('a')[_0xc6c564(0x1b6)](_0xc6c564(0x14a),_0x46480b),_0x34c8e2[_0xc6c564(0x1b8)](_0xc6c564(0x161))[_0xc6c564(0x1b6)]({'src':_0x43bde2['src'],'load':function(){var _0xe53717=_0xc6c564;setTimeout(function(){_0x41567a(_0x44f517);},0x3e8*window[_0xe53717(0x199)][_0xe53717(0x1b9)]);}});}}_0x5bc58e[_0x4bb3c2(0x18d)](function(_0x257383,_0xa93cb){var _0xa7dbe1=_0x4bb3c2;_0x4cde4a(_0xc2876d+_0xa7dbe1(0x16e),{},function(_0x4f5349){var _0x4269c9=_0xa7dbe1;_0x4269c9(0x164)==typeof _0x4f5349&&_0x41567a(_0x4f5349,$(_0xa93cb));},!0x0);});}},window['AhluADS']=window[_0x4cf6c0(0x199)]?$[_0x4cf6c0(0x1a2)](window[_0x4cf6c0(0x199)],{},!0x0):{'inline':0x1,'inline_timer':0x1e,'popup':0x1},setTimeout(_0x45035d,0x7d0);var _0x3dcf80=0xf,_0xfb3cde=0x0,_0x3c35c4=0x0,_0x3e1844=null,_0x3a7041=null;window['MyAds']=function(_0x21f845,_0x3dd001){var _0x1ff6fa=_0x4cf6c0;return _0xa8a52b(),_0x1f4a43=$(_0x1ff6fa(0x186)),new Promise(function(_0x4cd9e5,_0x4764ba){var _0x49a96e=_0x1ff6fa;0x0==_0x1f4a43[_0x49a96e(0x1b8)]('.list')[_0x49a96e(0x16f)]()[_0x49a96e(0x155)]?_0x45035d(function(){_0x3e1844=_0x21f845,_0xb5082a(),window['playVideo']();}):(_0x3e1844=_0x21f845,_0xb5082a(),window[_0x49a96e(0x16c)]());});};function _0x11a5a5(){var _0x2a93be=_0x4cf6c0,_0x1fed6d=_0x1f4a43[_0x2a93be(0x1b8)](_0x2a93be(0x178))[_0x2a93be(0x181)]('.hide');if(_0x1fed6d[_0x2a93be(0x18c)](_0x2a93be(0x1a0))&&_0xfb3cde){var _0x17229e=_0x1fed6d[_0x2a93be(0x1b8)](_0x2a93be(0x19a))[0x0];_0x17229e[_0x2a93be(0x1a4)]=!_0x17229e[_0x2a93be(0x1a4)],_0x1fed6d['find'](_0x2a93be(0x152))['html'](_0x17229e['muted']?_0x2a93be(0x16b):_0x2a93be(0x19e));}}function _0xb25254(_0x576504){var _0x443dc5=_0x4cf6c0;_0x4cde4a(_0xc2876d+_0x443dc5(0x1a6),{'t':0x1},function(_0xf177c6){var _0x4b81be=_0x443dc5;0x0==$(_0x4b81be(0x186))[_0x4b81be(0x155)]&&_0xa8a52b(),$('#MyAds')['find']('.list')[_0x4b81be(0x156)](_0xf177c6),$(_0x4b81be(0x18a))[_0x4b81be(0x168)](),-0x1!=window[_0x4b81be(0x147)]['appVersion']['toLowerCase']()[_0x4b81be(0x194)]('android')?$(_0x4b81be(0x19d))[_0x4b81be(0x18d)](function(_0x329686,_0x5d1014){var _0xf8bcc7=_0x4b81be,_0x4f3e85=$(_0x5d1014)['data'](_0xf8bcc7(0x15a));_0x4f3e85&&'#'!=_0x4f3e85?$(_0x5d1014)[_0xf8bcc7(0x1b6)]('href',_0x4f3e85):$(_0x5d1014)['closest'](_0xf8bcc7(0x18a))[_0xf8bcc7(0x18e)]();}):-0x1!=window[_0x4b81be(0x147)][_0x4b81be(0x195)]['toLowerCase']()['indexOf'](_0x4b81be(0x160))||-0x1!=window['navigator'][_0x4b81be(0x195)][_0x4b81be(0x167)]()[_0x4b81be(0x194)](_0x4b81be(0x149))?$('.dl.btn-url')[_0x4b81be(0x18d)](function(_0x291e10,_0x43cdce){var _0x125ba=_0x4b81be,_0xb8948c=$(_0x43cdce)[_0x125ba(0x1ac)](_0x125ba(0x196));_0xb8948c&&'#'!=_0xb8948c?$(_0x43cdce)['attr'](_0x125ba(0x14a),_0xb8948c):$(_0x43cdce)[_0x125ba(0x1b1)](_0x125ba(0x18a))['hide']();}):$(_0x4b81be(0x19d))[_0x4b81be(0x18d)](function(_0x5e4e6a,_0x5b50c1){var _0x549888=_0x4b81be,_0x39b0f6=$(_0x5b50c1)[_0x549888(0x1ac)](_0x549888(0x197));_0x39b0f6&&'#'!=_0x39b0f6?$(_0x5b50c1)['attr'](_0x549888(0x14a),_0x39b0f6):$(_0x5b50c1)['closest'](_0x549888(0x18a))[_0x549888(0x18e)]();}),_0x3aef5f(),_0x576504&&_0x576504();},!0x0);}function _0x3aef5f(){var _0x27e4e2=_0x4cf6c0;if(_0x1f4a43){var _0x225e06=(_0x10240d=_0x10240d||$[_0x27e4e2(0x159)]($('.ads'),function(_0x18cf74){var _0x58cf2d=_0x27e4e2;return $(_0x18cf74)[_0x58cf2d(0x1ac)]('id');}))[Math[_0x27e4e2(0x17f)](Math[_0x27e4e2(0x179)]()*_0x10240d['length'])];_0x1f4a43[_0x27e4e2(0x1b8)](_0x27e4e2(0x178))[_0x27e4e2(0x1ab)]('hide'),_0x1f4a43[_0x27e4e2(0x1b8)]('.ads[data-id=\x22'+_0x225e06+'\x22]')[_0x27e4e2(0x193)](_0x27e4e2(0x18e)),_0x3dcf80=0x1*_0x1f4a43[_0x27e4e2(0x1b8)](_0x27e4e2(0x150)+_0x225e06+'\x22]')[_0x27e4e2(0x1ac)](_0x27e4e2(0x198));}var _0x10240d;}function _0xb5082a(){var _0x2e1ecb=_0x4cf6c0;_0x1f4a43[_0x2e1ecb(0x1ab)](_0x2e1ecb(0x14d)),_0x3a7041&&(clearInterval(_0x3a7041),_0x3a7041=null);var _0x3a3514=_0x3dcf80;$('.navbar.navbar-current')[_0x2e1ecb(0x168)](),_0x1f4a43[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x148))[_0x2e1ecb(0x168)]();var _0x39a02f=_0x3dcf80||0x1*_0x1f4a43['find']('.close\x20.t')[_0x2e1ecb(0x1ac)](_0x2e1ecb(0x17b));_0x1f4a43[_0x2e1ecb(0x1b8)]('.close\x20.t')['html'](_0x39a02f),_0x3a7041=setInterval(function(){var _0x9ff228=_0x2e1ecb;if(_0x3a3514--<=0x0)return clearInterval(_0x3a7041),void _0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x173))[_0x9ff228(0x18e)]();!(function(){var _0x464610=_0x9ff228,_0x36d608=_0x1f4a43[_0x464610(0x1b8)](_0x464610(0x178))[_0x464610(0x181)]('.hide');if(_0x36d608['hasClass'](_0x464610(0x1a0))){var _0xef6f87=_0x36d608[_0x464610(0x1b8)](_0x464610(0x19a))[0x0];return!!(_0xef6f87[_0x464610(0x14f)]>0x0&&!_0xef6f87['paused']&&!_0xef6f87[_0x464610(0x157)]&&_0xef6f87[_0x464610(0x192)]>0x2);}return!0x1;}())&&_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x178))[_0x9ff228(0x181)](_0x9ff228(0x174))['hasClass'](_0x9ff228(0x1a0))||(0x0==_0x39a02f--?(_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x148))[_0x9ff228(0x168)](),_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)]('')[_0x9ff228(0x168)]()):_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)](_0x39a02f)['show']()),0x0==_0x39a02f&&(_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x148))[_0x9ff228(0x168)](),_0x1f4a43[_0x9ff228(0x1b8)](_0x9ff228(0x1b2))[_0x9ff228(0x156)]('')[_0x9ff228(0x168)]()),_0x35d6c2[_0x9ff228(0x1b8)]('.modal-title\x20.sec')['text'](_0x3a3514);},0x3e8);var _0x3b9a81={'id':_0x1f4a43[_0x2e1ecb(0x1b8)]('.ads')[_0x2e1ecb(0x181)](_0x2e1ecb(0x174))['data']('id')};_0x4cde4a(_0xc2876d+_0x2e1ecb(0x184),_0x3b9a81,function(_0x40d107){},!0x0);var _0x35d6c2=_0x1f4a43[_0x2e1ecb(0x1b8)]('.ads')[_0x2e1ecb(0x181)](_0x2e1ecb(0x174));if(_0x35d6c2[_0x2e1ecb(0x18c)](_0x2e1ecb(0x1a0))){var _0x274098=_0x35d6c2['find'](_0x2e1ecb(0x19a))[0x0],_0x3c876e=function(){var _0x423e2f=_0x2e1ecb;if(isNaN(this['duration']))_0x274098[_0x423e2f(0x1a3)](_0x423e2f(0x188),_0x3c876e);else{var _0x2e42ff=this[_0x423e2f(0x14f)]/this[_0x423e2f(0x146)]*0x64;_0x35d6c2[_0x423e2f(0x1b8)](_0x423e2f(0x15b))[_0x423e2f(0x168)]()[_0x423e2f(0x1b8)](_0x423e2f(0x176))[_0x423e2f(0x154)](_0x423e2f(0x191),_0x2e42ff+'%');var _0x55181a=_0x274098[_0x423e2f(0x146)]-_0x274098[_0x423e2f(0x14f)];_0x35d6c2[_0x423e2f(0x1b8)](_0x423e2f(0x1a1))['html']((_0x11587a=_0x55181a,(_0x2c4727=(_0x2c4727=Math[_0x423e2f(0x17f)](_0x11587a/0x3c))>=0xa?_0x2c4727:'0'+_0x2c4727)+':'+((_0x11587a=Math[_0x423e2f(0x17f)](_0x11587a%0x3c))>=0xa?_0x11587a:'0'+_0x11587a))),_0x2e42ff>=0x64&&_0x274098[_0x423e2f(0x1a3)](_0x423e2f(0x188),_0x3c876e);}var _0x11587a,_0x2c4727;};_0x274098[_0x2e1ecb(0x1b4)](_0x2e1ecb(0x188),_0x3c876e),_0x274098[_0x2e1ecb(0x1b3)]=function(_0x19bcac){var _0x15edfa=_0x2e1ecb;console[_0x15edfa(0x15e)](_0x15edfa(0x182),_0x19bcac),_0x4cde4a(_0xc2876d+_0x15edfa(0x175),_0x3b9a81,function(_0x4a7e94){},!0x0);},_0x274098[_0x2e1ecb(0x14c)](),_0xfb3cde=0x1;}else{if(_0x35d6c2[_0x2e1ecb(0x18c)](_0x2e1ecb(0x1ae))){var _0xdf302d=$('<iframe\x20src=\x22'+_0x35d6c2[_0x2e1ecb(0x1b6)](_0x2e1ecb(0x1a7))+_0x2e1ecb(0x1aa));_0x274098=_0x35d6c2[_0x2e1ecb(0x1b8)]('.c')[_0x2e1ecb(0x156)](_0xdf302d),_0xdf302d['on']('load',function(){});}}!function(_0x784c33){var _0x3cc34f=_0x2e1ecb,_0x2e475a=$(_0x784c33),_0x35a794=decodeURIComponent(_0x2e475a[_0x3cc34f(0x1ac)](_0x3cc34f(0x161)));try{(_0x35a794=JSON['parse'](_0x35a794))&&_0x35a794[_0x3cc34f(0x155)]>0x0&&(_0x784c33['timer']=setInterval(function(){var _0x14556e=_0x3cc34f,_0x41ea2b=_0x35a794[Math[_0x14556e(0x17f)](Math[_0x14556e(0x179)]()*_0x35a794[_0x14556e(0x155)])];_0x2e475a[_0x14556e(0x1b1)]('.ads-next')[_0x14556e(0x1b8)]('a')['attr'](_0x14556e(0x14a),_0x41ea2b[_0x14556e(0x1b5)]),_0x2e475a[_0x14556e(0x1b8)](_0x14556e(0x161))[_0x14556e(0x1b6)]('src',_0x41ea2b['src']);},0x1388),_0x784c33[_0x3cc34f(0x1ad)]=function(){var _0x29b590=_0x3cc34f;this['timer']&&clearInterval(this[_0x29b590(0x198)]),this[_0x29b590(0x198)]=null;});}catch(_0x4d073a){}}(_0x35d6c2[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x15d))[0x0]),_0x35d6c2[_0x2e1ecb(0x1b8)](_0x2e1ecb(0x173))[_0x2e1ecb(0x168)]()['find']('.sec')[_0x2e1ecb(0x156)](_0x3a3514);}function _0x45035d(_0x2523db){_0xb25254(_0x2523db);}function _0x36cd22(){var _0x4d59d1=_0x4cf6c0;_0x1f4a43[_0x4d59d1(0x193)]('active'),_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x17e))[_0x4d59d1(0x156)](_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x17e))['data'](_0x4d59d1(0x17b)))['show'](),_0x3a7041&&(clearInterval(_0x3a7041),_0x3a7041=null);var _0x1a74e1=_0x1f4a43[_0x4d59d1(0x1b8)](_0x4d59d1(0x178))[_0x4d59d1(0x181)]('.hide');_0x1a74e1['hasClass']('ads-video')&&(_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x19a))[0x0][_0x4d59d1(0x18f)](),_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x15b))[_0x4d59d1(0x18e)]());var _0x4cbd89=_0x1a74e1[_0x4d59d1(0x1b8)](_0x4d59d1(0x15d));_0x4cbd89[_0x4d59d1(0x155)]&&_0x4cbd89[0x0][_0x4d59d1(0x1ad)]&&_0x4cbd89[0x0][_0x4d59d1(0x1ad)](),_0x11a5a5(),_0x3aef5f(),_0xfb3cde=0x0,_0x3c35c4=0x0,_0xb25254(),$(document)[_0x4d59d1(0x145)]('onAdsFinish'),_0x1f4a43[_0x4d59d1(0x1b8)]('.information')[_0x4d59d1(0x193)]('active');}$(document)['on'](_0x4cf6c0(0x1a9),'.ads\x20.sound',function(){_0x11a5a5['call'](this);})['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x180),function(){var _0x4fde3c=_0x4cf6c0;$(this)[_0x4fde3c(0x1b1)](_0x4fde3c(0x186))[_0x4fde3c(0x1b8)](_0x4fde3c(0x15c))['addClass'](_0x4fde3c(0x14d));}),$(document)['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x14e),function(){var _0x4faf91=_0x4cf6c0;if(0x0==_0x3c35c4){_0x3c35c4=0x1;var _0x50f72e=$(this)[_0x4faf91(0x1ac)](_0x4faf91(0x1b5));if(_0x50f72e&&'#'!=_0x50f72e){-0x1!==_0x50f72e[_0x4faf91(0x194)](_0x4faf91(0x165))&&(_0x50f72e=_0x50f72e+(-0x1!=_0x50f72e[_0x4faf91(0x194)]('?')?'&':'?')+_0x4faf91(0x1a8)),$(_0x4faf91(0x190))[_0x4faf91(0x1b6)](_0x4faf91(0x14a),_0x50f72e)[_0x4faf91(0x1a9)]();var _0x1c63a2={'id':_0x1f4a43[_0x4faf91(0x1b8)](_0x4faf91(0x178))[_0x4faf91(0x181)](_0x4faf91(0x174))[_0x4faf91(0x1ac)]('id')};_0x4cde4a(_0xc2876d+_0x4faf91(0x18b),_0x1c63a2,function(_0x3ba220){},!0x0);}}}),$(document)['on'](_0x4cf6c0(0x1a9),'.ads\x20a',function(_0x59b712){var _0x43c9c5=_0x4cf6c0;'#'==$(this)[_0x43c9c5(0x1b7)](_0x43c9c5(0x14a))&&_0x59b712[_0x43c9c5(0x163)]();}),window[_0x4cf6c0(0x16c)]=function(_0xf4f901){var _0x3a78b2=_0x4cf6c0,_0x5db70a=_0x1f4a43[_0x3a78b2(0x1b8)](_0x3a78b2(0x178))[_0x3a78b2(0x181)](_0x3a78b2(0x174));_0x5db70a['hasClass'](_0x3a78b2(0x1a0))&&0x0==_0xfb3cde&&(_0x5db70a['find'](_0x3a78b2(0x19a))[0x0][_0x3a78b2(0x14c)](),_0xfb3cde=0x1);},$(document)['on'](_0x4cf6c0(0x1a9),_0x4cf6c0(0x14b),function(){var _0x544b10=_0x4cf6c0;_0x544b10(0x1af)==typeof _0x3e1844&&(_0x3e1844(),_0x3e1844=null),_0x36cd22();});}(window));function _0x10ed(){var _0x5474bf=['addClass','data','_reset','ads-iframe','function','user','closest','.cads\x20.t','onerror','addEventListener','url','attr','atttr','find','inline_timer','trigger','duration','navigator','.cads','ipad','href','#MyAds\x20.cads','play','active','.ads[data-link]','currentTime','.ads[data-id=\x22','body','.sound','https://shortlink.donggiatri.com/','css','length','html','ended','23367WJqRYh','map','android','.progress','.information','.ads-next','log','trim','iphone','img','976409iKrvix','preventDefault','object','?open=true','responseText','toLowerCase','show','7371207FVMEkv','status','<i\x20class=\x22fal\x20fa-music\x22></i>\x20M\x20ting','playVideo','append','modules/ads.php?a=view_inline','children','ADSINLINE','<style>#MyAds,#MyAds\x20.ads-iframe:before{top:0;width:100%;height:100%;left:0}#MyAds\x20.cads,.ads\x20.ads-ii{right:10px;position:absolute}#MyAds\x20.ads-iframe:before{content:\x22\x20\x22;position:absolute;background-color:rgb(51\x2051\x2051\x20/\x2042%);z-index:0}#MyAds\x20.ads-iframe>*{position:relative;z-index:1}#MyAds\x20.ads-iframe\x20.ads-title,#MyAds\x20.ads-iframe\x20.footerads{padding:16px;color:\x22#fff\x22}#MyAds\x20.ads-iframe\x20.adsstep2{text-align:right}#MyAds\x20.ads-iframe\x20.adsstep1{text-align:left}#MyAds\x20.ads-iframe\x20.footerads,.ads\x20.d-download{text-align:center}#MyAds\x20.ads-iframe\x20.c{width:90%;margin:0\x20auto;background-color:#fff;padding:0;border-radius:8px;overflow:hidden}#MyAds\x20.page-content{height:100%;max-width:500px;margin:0\x20auto;position:relative}@media\x20screen\x20and\x20(min-width:1016px){#MyAds\x20.ads{width:500px;margin:0\x20auto}}#MyAds\x20.flex{flex:1;margin:8px\x200}#MyAds\x20.cads,#MyAds\x20.modal-title{font-size:12px}#MyAds{position:fixed;background-color:#fff;display:none;opacity:0;z-index:1000000000000}#MyAds.active{display:block;opacity:1}#MyAds\x20.ads,#MyAds\x20.modal-body\x20div.c{display:-webkit-box;display:-ms-flexbox;-webkit-box-orient:vertical;-webkit-box-direction:normal}#MyAds\x20img,#MyAds\x20video{width:100%;border-radius:0;pointer-events:none}#MyAds\x20.ads{height:100%;display:flex;-ms-flex-direction:column;flex-direction:column}#MyAds\x20.modal-body{position:relative;padding:0}#MyAds\x20.modal-body\x20div.c{padding:8px;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}#MyAds\x20.modal-body\x20div.c\x20.flex{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:0}#MyAds\x20.modal-header{padding:0\x2015px;position:absolute;z-index:2;color:#fff;border:0;top:24!important;left:0;background-color:rgb(51\x2051\x2051\x20/\x2042%);height:initial}#MyAds\x20.c{padding:8px;display:flex;flex-direction:column;flex:1}#MyAds\x20.ads-ii\x20a{color:#fff}#MyAds\x20.cads{color:#fff;top:30px;z-index:2000;background-color:rgb(12\x2012\x2012\x20/\x2020%);padding:8px;width:100px;opacity:1}#MyAds\x20.progress,.informationads{background-color:#fff;display:none}.ads\x20.d-download{margin-bottom:8px}.ads\x20.d-download\x20a{border-radius:32px;width:90%}.ads\x20.ads-ii{bottom:10px;z-index:2;display:block;font-size:17px}.ads\x20.pro,.ads\x20.pro\x20a,.ads-inline{position:relative}.ads\x20.ads-ii\x20img{width:12px!important;height:12px}.ads\x20.ads-ii\x20span{display:none}#MyAds\x20.ads-next\x20a,.ads\x20.pro\x20a{display:block}.ads\x20.ads-ii:hover\x20span{display:inline-block}.ads\x20.pro\x20.sound{position:absolute;bottom:0;left:0;z-index:10000000;background-color:rgb(12\x2012\x2012\x20/\x2022%);padding:8px;color:rgb(255\x20255\x20255\x20/\x2038%)}#MyAds\x20.in,.ads-inline\x20.in{position:absolute;top:24px;left:14px;z-index:2;font-size:20px;cursor:pointer;color:rgb(255\x20255\x20255\x20/\x2065%);padding:16px;margin-left:-16px;margin-top:-16px}#MyAds\x20.duration,#MyAds\x20.progress,.informationads{position:absolute;left:0;width:100%}#MyAds\x20.ads\x20h2{font-size:1.8rem}#MyAds\x20.progress{z-index:2;bottom:-18px;height:2px}#MyAds\x20.progress-run{background-color:rgb(243\x20208\x2095);height:2px}#MyAds\x20.duration{z-index:3;bottom:42px;color:rgb(250\x20250\x20250\x20/\x2055%)}.informationads{bottom:0;z-index:1000000000;min-height:200px;transition:.2s\x20ease-in-out;transform:translateY(100%);padding:32px;border-radius:16px\x2016px\x200\x200;justify-content:flex-start;box-shadow:0\x200\x200\x202px\x20#f3f3f3}.informationads.active{transform:translateY(0);display:block}.informationads\x20a{margin-bottom:16px}.informationads\x20.btn{background-color:transparent}</style>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22MyAds\x22\x20id=\x22MyAds\x22>\x0a\x0a\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20<!--\x20Scrollable\x20page\x20content\x20-->\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22page-content\x22\x20translate=\x22no\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22cads\x22\x20style=\x22display:\x20none\x22\x20aria-hidden=\x22true\x22\x20title=\x22close\x22><span\x20class=\x22t\x22\x20data-time=\x2210\x22></span>\x20ng\x20QC</button>\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22list\x22\x20style=\x22width:\x20100%;height:\x20100%;\x20\x20\x20\x20margin:\x200;\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22\x22\x20class=\x22target_click\x22></a>\x0a\x0a\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22informationads\x20_row\x22>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>KNBC\x20l\x20g?</a>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/tai-sao-thay-quang-cao/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>Ti\x20sao\x20thy\x20qung\x20co\x20ny?</a>\x0a\x0a\x20\x20\x20\x20<a\x20href=\x22https://knbc.vn/tai-sao-thay-quang-cao/?open=true\x22\x20class=\x22btn\x20btn-primary\x20no-bg\x22>Ti\x20khng\x20qung\x20co\x20ny?</a>\x0a\x0a\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x20no-bg\x22\x20onclick=\x22$(\x27.informationads\x27).removeClass(\x27active\x27)\x22>ng</button>\x0a\x0a</div>\x20\x0a\x0a\x20\x20\x20\x20</div>\x0a\x0a</div>\x0a\x0a','2azDnbG','.modal-title','.hide','modules/ads.php?a=error','.progress-run','17362VSflZh','.ads','random','shorlinkMonetization','time','5431250EsDgcA','56286zxMkRG','.close\x20.t','floor','.ads\x20.pro\x20.in','not','error','string','modules/ads.php?a=view','parse','#MyAds','15ktPVos','timeupdate','username_user','.d-download','modules/ads.php?a=click','hasClass','each','hide','pause','.target_click','width','readyState','removeClass','indexOf','appVersion','ios','desktop','timer','AhluADS','video','POST','ajax','.dl.btn-url','<i\x20class=\x22far\x20fa-music-slash\x22></i>\x20Tt\x20ting','164FDgloU','ads-video','.duration','extend','removeEventListener','muted','2606000zIcHIe','modules/ads.php?a=list','data-iframe','open=true','click','\x22\x20width=\x22100%\x22\x20height=\x22100%\x22\x20title=\x22YouTube\x20video\x20player\x22\x20frameborder=\x220\x22\x20allow=\x22accelerometer;\x20autoplay;\x20clipboard-write;\x20encrypted-media;\x20gyroscope;\x20picture-in-picture;\x20web-share\x22\x20allowfullscreen></iframe>'];_0x10ed=function(){return _0x5474bf;};return _0x10ed();}
(function(win){
    var getFavicon = function(){
        var favicon = undefined;
            var nodeList = document.getElementsByTagName("link");
            for (var i = 0; i < nodeList.length; i++)
            {
                if((nodeList[i].getAttribute("rel") == "icon")||(nodeList[i].getAttribute("rel") == "shortcut icon"))
                {
                    favicon = nodeList[i].getAttribute("href");
                }
            }
            return favicon;        
    };
    var loaded = 0;
    function init(){
        if(loaded==0){
            loaded = 1;
        
            //$("body").append(`<ul class="ios-notifications"></ul><style>.socials {display: flex;justify-content: space-between;align-items: center;font-size: 12px;}i.fa-whatsapp {color: green;font-weight: 600;}.text-name {font-weight: 600;font-size: 14px;margin-top: 4px;}.text-msg {font-size: 14px;margin-bottom: 4px;}.text-more {font-size: 12px;}i.fa-facebook-f {color: transparent;}i.fa-instagram {color: transparent;}i.fa-twitter {color: transparent;}ul {padding: 0;margin: 0;list-style-type: none;}.ios-notifications {position: absolute;transform-style: preserve-3d;perspective: 800px;cursor: pointer;top: 64px;width: 90%;left: 5%;z-index: 1000000;}.ios-notification_item {position: relative;color: #333;width: 100%;padding: 0.75rem;background: #fff;border-radius: 20px;box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);-webkit-backdrop-filter: saturate(130%) blur(20px);backdrop-filter: saturate(130%) blur(20px);transition: ease-in-out, transform 0.5s ease-in-out;}.ios-notification_item:nth-child(2) {position: absolute;top: 0;left: 0;z-index: -1;color: transparent;transform: translateY(1rem) translateZ(-3rem);background: rgba(255, 255, 255, 0.6);}.ios-notification_item:nth-child(3) {position: absolute;top: 0;left: 0;z-index: -2;color: transparent;transform: translateY(2rem) translateZ(-6rem);background: rgba(255, 255, 255, 0.5);}.ios-notification_item:nth-child(4) {position: absolute;top: 0;left: 0;z-index: -3;color: transparent;transform: translateY(3rem) translateZ(-9rem);background: transparent;box-shadow: none;}.ios-notifications.unfolded .ios-notification_item {color: black;background: #fff;}.ios-notifications.unfolded .ios-notification_item .more {display: none;}.ios-notifications.unfolded .ios-notification_item:nth-child(2) {transform: translateY(calc(100% + 0.5rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(3) {transform: translateY(calc(200% + 1rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(4) {transform: translateY(calc(300% + 1.5rem));transition: opacity 1s ease-in-out, transform 1s ease-in-out;}.ios-notifications.unfolded .ios-notification_item:nth-child(2) .fa-facebook-f {color: blue;}.ios-notifications.unfolded .ios-notification_item:nth-child(3) .fa-instagram {color: red;}.ios-notifications.unfolded .ios-notification_item:nth-child(4) .fa-twitter {color: #00acee;}</style>`);
        }
    }
    /////////////////////////////
	var ids = {};

    function msg(s){
        // if(win.toastr){
        //     toastr.info(s);
        // }else if(win.Toast){
        //     Toast.Top(s);
        // }else{
        //     alert(s);
        // }
    }


	// function send(e,data){
    //     console.log(document.location.origin,e);
	// 	if(e)e.postMessage(JSON.stringify(data),"*");
	// }
    

    function send2Parent(data){ 
        data.domain = document.location.host;
        data.domainname = win.name;
        data.hash = Date.now();

        ids[data.id] = data; 

        var p =(win.opener||win.parent);
        var str = JSON.stringify(data);
        p.postMessage(encodeURIComponent(str),"*"); 

        msg(`"${document.location.origin} invoke ${document.referrer}": ${str}`);
    }

    function isiframe(){
        return window.self!=window.top;
    }

    function iframe(id){
        if(!id)return null;
        var a = window.$?$(`iframe[name='${id}']`)[0]:document.querySelector(`iframe[name='${id}']`);
        return a?a.contentWindow:null;
    }

    function action(data,sendf){
        var str = JSON.stringify(data._authcode);
        switch(data.action){
            case "HTML2PDF": 
                var html = data._authcode.html;
                var open = data._authcode.open;

 
                //secure
                if(win.HTML2PDF){ 
                    win.HTML2PDF({html:html,open:open});
                    data.response = 1;   
                }else{ 
                    //sent to server
                    //open new browser
                    data.response = 0; 
                }

                sendf(data);   
            break;
             case "print": 
                var html = data._authcode.html;


                // msg(`"${document.location.origin} OK": ${str}`);

                //secure
                if(win.printer&&win.printer.fromHTML&&html){
                    
                    win.printer.fromHTML(html);
                    data.response = 1;  
                   
                }else{ 
                    data.response = 0; 
                }

                sendf(data);   
            break;
            case "sqlite_query_first": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    var db = win.SQLDB.create(data.host,function(e){
                        db.query_first(data._authcode.sql,function(r){
                            data.response = r;  
                            sendf(data);
                        });
                    });
                }
                
            break;
            case "sqlite_query": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    var db = win.SQLDB.create(data.host,function(e){
                        db.query(data._authcode.sql,function(r){
                            data.response = r;  
                            sendf(data);
                        });
                    });
                }
                
            break;
            case "sqlite": 
                //secure
                if(win.SQLDB){
                    //create and notififi name db with hostname
                    
                    win.SQLDB.create(data.host,function(e){
                        data.response = {
                            db : data.host
                        };  
                        sendf(data);
                    });
                }
                
            break;
            case "notification": 
                //from app
                if(win.notificationApp){
                    win.notificationApp(data._authcode);
                }else if(win.showNotification){
                    //from website
                    win.showNotification(data._authcode);
                }else if(win.Notification){
                    data = data._authcode;

                    var run = function(f){
                        if (Notification.permission === 'granted') {
                            // show notification here 
                            f(1);
                        } else {
                            // request permission from user
                            Notification.requestPermission().then(function (p) {
                                if (p === 'granted') {
                                    // show notification here
                                   
                                    f(1);
                                } else {
                                    console.log('User blocked notifications.');
                                    f(0);
                                }
                            }).catch(function (err) {
                                console.error(err);
                                f(0);
                            });
                        }
                    };


                    run(function(ok){
                        var title = data.title||data.name||'Hi there!';
                        var body = data.text||data.message||data.body||'How are you doing?';
                        if(ok){
                             var notify = new Notification(title, $.extend({
                                body: body,
                                icon: getFavicon(),
                            },data,true));
                            notify.onclick = function(){
                                if(data.onclick){
                                    data.onclick();
                                }

                                 notify.close();
                            }
                        }else{
                            if(win.toastr){
                                    
                                if(toastr.Center){
                                    toastr.Center(body,title,"info");
                                }else{
                                    toastr.info(body,title);
                                }
                            }else{
                                alert(body);
                            }
                        }
                    });

                     
                }
                data.response = null;  
                sendf(data);
            break;
            case "device": 
                data.response = win.ADevice||null;  
                sendf(data);
            break;
            
            case "smsphone":
                if(win.SMS){
                    win.SMS.getPhone(function(res){ 
                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "sms":
                if(win.SMS){
                    win.SMS.all({},function(res){
                        try{
                            res=JSON.parse(res);
                        }catch(e){}

                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "contact":
                if(win.Contacts){
                    win.Contacts.all({},function(res){
                        try{
                            res=JSON.parse(res);
                        }catch(e){}

                        data.response = res;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "scan":
                if(win.Qrcode){

                    win.Qrcode(function(code){
                        try{
                            code=JSON.parse(code);
                        }catch(e){}

                        data.response = code;  
                        sendf(data);
                    });
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "gps":
                if(win.GPS){
                    win.GPS(function(p){  
                        data.response = p;  
                        sendf(data);
                    });
                }else{
                    if (navigator.geolocation) {
                        var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0,
};                  if(win._GPS){
                         data.response = win._GPS;  
                        sendf(data);
                        return ;
                    }
                    navigator.geolocation.getCurrentPosition(function(position) {
                         data.response = win._GPS||{lat:position.coords.latitude,lng:position.coords.longitude};  
                        sendf(data);
                    },function(){},options);
                    navigator.geolocation.watchPosition(function(position){
                        win._GPS = {lat:position.coords.latitude,lng:position.coords.longitude}; 
                    }, function(){},options);
                  }else{
                     data.response = null;  
                    sendf(data);
                  }
                   
                }
            break;
            case "share":
                if(win.Share){
                    win.Share(data);
                }else{
                    data.response = null;  
                    sendf(data);
                }
            break;
            case "openurl":
                data.response = null; 
                if(win.openLink){
                    win.openLink(data.url);
                    sendf(data);
                }else{
                    open(data.url); 
                    sendf(data);
                }
            break;
            case "pickerdoc":
                data.response = null; 
                /**/
                var ac = data.type;
                var many = data.many||1;
                var url = data.url||document.location.origin+"/upload/";

                // Picker.document.image({},function(file){
                //     alert(JSON.stringify(file));
                // });
                // return;

           
               switch (ac) {

                  

                 case "images":

                    window.uploadFiles("images",function(file){ 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           data.response = { 
                                image: r.url,

                                meta : {

                                   size:file.size,

                                   type:file.type,

                                   name:file.name

                                }

                              }

                           sendf(data);

                         } 
                       },Date.now());

                    },many);

                 break;

                 case "imagesvideos":

                    window.uploadFiles("imagesvideos",function(file){
 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           var n = {
 
                            meta : {

                               size:file.size,

                               type:file.type,

                               name:file.name

                            }

                          };



                          if(file.type.includes("image")){



                            n.image= r.url;

                          }else{

                             n.video= r.url;

                          }

                           
                            data.response = n;
                            sendf(data);
                         } 
                       },Date.now());

                    },many);

                 break;

                 case "files":
                     

                    window.uploadFiles("files",function(file){
 
                      // console.log(file);

                       uploadFile(file,url,function(r){

                         if(r.code){

                           //find id to update

                           // $('li[data-id="'+file.id+'"]').find(".");

                            var n = {

                       
 
                            meta : {

                               size:file.size,

                               type:file.type,

                               name:file.name

                            }

                          };



                          if(file.type.includes("image")){



                            n.image= r.url;

                          }else if(file.type.includes("video")){

                             n.video= r.url;

                          }else if(file.type.includes("audio")){

                             n.audio= r.url;

                          }else{

                            n.file = r.url;

                          }
 
                          data.response = n;
                          sendf(data);

                         } 

                       },Date.now());

                    },10000);

                 break;

               }
               /**/
                
            break;


        case "auth":
            data.response = win.user&&win.user.hasLogin?win.user.hasLogin():null; 
            sendf(data);
            break;

        default:
            data.response =null; 
            sendf(data);
            break;
        }
    }

	win.addEventListener("message",function(e) {
        var key = e.message ? "message" : "data";
        var data = e[key];

        console.log("appcode: ",data);
        
        try{
            data = decodeURIComponent(data);
            data=JSON.parse(data);
        }catch(ee){}

        if(typeof data=='string'){
            if(data.includes("ADevice:") && !win.ADevice){
                 win.ADevice = JSON.parse(data.replace("ADevice:",""));
                return; 
            }else  if(data.includes("AppinBackground:")){
                 if(win.$||win.jQuery){
                    (win.$||win.jQuery).trigger("AppinBackground");
                 }
                 
                return; 
            }
           
        }

        if(typeof data=='object' && data._authcode){
            
            
            //check data domain token
            if(data.hash){
                // console.log(`${document.location.origin} OK: ` +JSON.stringify(data));

                if(data.response!==undefined){
                      var f = ids[data.id];
                      if(f){
                        if(typeof f.callback=="function"){
                            // alert("Reply: "+document.location.host+JSON.stringify(data.response));
                            
                            f.callback(data.response,function(){
                                delete ids[data.id];
                            });
                            
                        }
                       
                  } 
                }else{
                    
                    // console.log("Iframe: "+e.origin,data);
                     var a = iframe(data.domainname);
                         if(a){
                            action(data,function(res){ 
                                   a.postMessage(encodeURIComponent(JSON.stringify(res)),"*");
                               
                            });
                         }else{
                            msg(data.domainname+": Not found name iframe.");
                         }
                }
            }
        }
    });

    // setTimeout(function(){
    //     if(isiframe()){
           
    //         // var closewin = win.close;
    //         // win.close = function(){
    //         //     (win.opener||win.parent).postMessage("close_app","*"); 
    //         //     closewin();
    //         // };

            
    //     }else{
           
    //     }
       
    // },30*1000);



    //////////////////////////////////////////////////////////////////////////////////////////////////////////
    var promiseChain = Promise.resolve();
	win.AppCode = {
        isIframe : isiframe,
        isNative : function(){
            return win.ADevice;
        },
        send : function(action,callback){
             var data ={};
            data.action = action; 
            data._authcode = {}; 
            data.id = action+Date.now(); 
            data.callback  = callback; 

                        // send: function(targetFunc, data, success, error) {

            var msgObj = {
                targetFunc: targetFunc,
                data: data || {}
            };

            if (callback) {
                data.msgId = guid();
            }

            // var msg = JSON.stringify(msgObj);

            promiseChain = promiseChain.then(function() {
                return new Promise(function(resolve, reject) {
                    // console.log("sending message " + msgObj.targetFunc);

                     
                    send2Parent(data);

                    resolve();
                });
            }).catch(function(e) {
                if (callback) {
                    callback(null);
                }
                // console.log('rnBridge send failed ' + e.message);
            });
                        

                    
            
        },
        action: action,
        Report : (function(){

                   var popupid = 'popupappcode'+Date.now();
                  var url = null;
                  var host = null;

                 
 
                return function(options){ 
                     options = $.extend({autoShow:1},options,true);
                    
                    var popup =$('#'+popupid);
                    if( popup.length==0){

                     
                      
                        $('body').append(`<style>.popup-appcodeto{visibility:hidden!important; -webkit-transition:.3s ease-in-out;-o-transition:.3s ease-in-out;transition:.3s ease-in-out;-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:rgba(21,17,17,.61);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.popup-content-appcodeto{overflow: auto;background-color:#fefefe;height:100%;width:100%}.popup-content-appcodeto p{font-size:17px;padding:10px;line-height:20px}.popup-content-appcodeto a.close{color:#aaa;float:right;font-size:28px;font-weight:700;background:0 0;padding:0;margin:0;text-decoration:none}.popup-content-appcodeto a.close:hover{color:#333}.popup-content-appcodeto span:focus,.popup-content-appcodeto span:hover{color:#000;text-decoration:none;cursor:pointer}.popup-appcodeto:target,
                            .popup-appcodeto.active{visibility:visible!important;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);z-index: 100000000000;}.popup-appcodeto h3{margin:10px}.popup-style-2{-webkit-transform:scale(.3);-ms-transform:scale(.3);transform:scale(.3)}.popup-style-2:target,.popup-style-6:target{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.popup-style-3{left:100%}.popup-style-3:target{left:0}.popup-style-4{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.popup-style-4:target{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}.popup-style-5{top:100%}.popup-style-5:target{top:0}.popup-style-6{-webkit-transform:scale(15.3);-ms-transform:scale(15.3);transform:scale(15.3)}.popup-style-7{-webkit-transform:skewY(180deg);-ms-transform:skewY(180deg);transform:skewY(180deg);-webkit-transition:.7s ease-in-out;-o-transition:.7s ease-in-out;transition:.7s ease-in-out}.popup-style-7:target{-webkit-transform:skewY(0);-ms-transform:skewY(0);transform:skewY(0)}</style>
                                    <div id="${popupid}" class="popup-appcodeto">
                  <div class="popup-content-appcodeto" style="padding: 16px;word-break: break-all;">
                    <a href="#" class="close" onclick='$("#${popupid}").removeClass("active");return false;'>&times;</a>
                    <div><img src="https://www.w3.org/TR/mini-app-white-paper/images/widget_interaction.png" /></div>
                    <h3>H thng chia s Appcode trong h thng mini App</h3>
                    <p>H thng h tr cc tnh nng sau:</p>
                     <ul>
                     <li>Device : <span class="getdevice">--</span></li>
                     <li>GPS : <span clsss="getgps">--</span></li>
                     <li>Phone : <span class="getphone">--</span></li>
                     <li>Auth : <span class="getauth">--</span></li>
                     <li>Scan : <span class="getscan">--</span>
                        <div><button class="btnscan btn btn-primary">Scan</button></div>
                     </li>
                     <li>SQLite : <span class="sqliteinfo">--</span> 
                     </li>
                     <li>Notification Local
                        <div><button class="btnnotification btn btn-primary">Notification</button></div>
                     </li>
                     </ul>
                  </div>
                </div>`);

                        popup = $('#'+popupid);
 
                        
                    }
                    if(options.reload){
                        popup.find("iframe").attr({
                            src : url,
                            load : onload
                        });
                    }
                    if(options.autoShow){
                        popup.addClass("active");
                    }

                    try{
                        AppCode.Device().then(function(r) {
                              popup.find(".getdevice").html(r?JSON.stringify(r):"--");
                          });

                          AppCode.getAuth().then(function(u) {
                              popup.find(".getauth").html(u?JSON.stringify(u):"--");
                          });

                          AppCode.GPS().then(function(p) {
                              popup.find(".getgps").html(p?JSON.stringify(p):"--");
                          });

                        AppCode.SQLite({},function(info) {
                              popup.find(".sqliteinfo").html(p?JSON.stringify(p):"--");
                        });


                        popup.find(".btnscan").off("click").on("click",function(e){
                            e.preventDefault();
                            AppCode.Scan().then(function(p){
                                popup.find(".getscan").html(p?JSON.stringify(p):"--"); 
                            });
                        });

                        popup.find(".btnnotification").off("click").on("click",function(e){
                            e.preventDefault();
                            AppCode.Notification.local({title:"hello",body:"welcome"}).then(function(p){
                                 
                            });
                        });
                    }catch(er){
                        alert(er);
                    }
                    
                       
                }
           })(),
        SQLite : function(options,resolve){
            options = $.extend({},options,true);
                var data ={};   
                data.action = "sqlite";
           if(isiframe()){
                
                data._authcode = options; 
                data.id = "sqlite"+Date.now(); 
                data.callback  = function(r){
                    resolve(r);
                    //change
                    Appcode.SQLite={
                        query : function(sql,f){
                            var data ={};
                            options.sql = sql;
                            data._authcode = options; 
                            data.id = "sqlitequery"+Date.now();
                            data.action = "sqlite_query"; 
                            data.callback  = f;
                            send2Parent(data);
                        },
                        query_first : function(sql,f){
                            var data ={};
                            options.sql = sql;
                            data._authcode = options; 
                            data.id = "sqlitequery_first"+Date.now();
                            data.action = "sqlite_query_first"; 
                            data.callback  = f;
                            send2Parent(data);
                        }
                    };
                };

                send2Parent(data);
                
            }else{
                action(data,function(res){
                    resolve(res.response);
                });
            }
        },
        Notification:{
            local : function(options){
                /*
                AppCode.Notification.local({
                    title:"alo",
                    body:"ai dang noi xau kia",
                    onclick:function(){
                        alert(1);
                    }
                });
                 */
               
               return new Promise(function(resolve, reject){
                    options = $.extend({},options,true);
                    var data ={};
                    data.action = "notification";
                    data._authcode = options; 
                    data.id = "notification"+Date.now();
                    

                    data.callback  = resolve; 

                    if(isiframe()){  
                        send2Parent(data);
                    }else{
                        if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                            resolve(win.user?win.user.hasLogin():null);
                        }else{
                             
                            action(data,function(res){
                                resolve(res.response);
                            });
                        }
                    }
               }); 
            },
            pusher : function(devicetoken,options){
                /*
                 AppCode.Notification.pusher(
                    {
                    bundle:"app.com",
                    token_ios:"",
                    token_android:"", 
                    title:"alo",
                    body:"ai dang noi xau kia",
                    onclick:function(){
                     alert(1);
                    }
                });

                 AppCode.Notification.pusher(
                    {
                        bundle:"app.com", 
                        user:"",
                        title:"alo",
                        body:"ai dang noi xau kia",
                        onclick:function(){
                         alert(1);
                        }
                    });
                 */
               
               return new Promise(function(resolve, reject){
                    options = $.extend({},options,true);
                    var data ={};
                    data.action = "pusher";
                     data.id = "pusher"+Date.now(); 
                        data.callback  = resolve;

                    if(isiframe()){
                         
                       

                        send2Parent(data);
                    }else{
                        if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                            resolve(win.user?win.user.hasLogin():null);
                        }else{ 
                            action(data,function(res){
                                resolve(res.response);
                            });
                        }
                    }
               }); 
            }
        },
        SMSPhone : function(options){
            options = $.extend({},options,true);
                    var data ={};
               data.action = "smsphone";
           return new Promise(function(resolve, reject){
                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "smsphone"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        SMS : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({},options,true);
                  var data ={};
                  data.action = "sms";

                if(isiframe()){ 
                    data._authcode = options; 
                    data.id = "sms"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        Contact : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "contact";

                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "contact"+Date.now(); 
                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                    action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
		Device : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "device";

                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "device"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                	action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
        GPS : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                var data ={};
                data.action = "gps";

                if(isiframe()){
                    
                    data._authcode = options; 
                    data.id = "gps"+Date.now();
                    

                    data.callback  = resolve;

                    send2Parent(data);
                }else{
                	action(data,function(res){
                            resolve(res.response);
                        });
                }
           }); 
        },
		Scan : function(options){
               
           return new Promise(function(resolve, reject){
                options = $.extend({},options,true);
                    var data ={};
                    data.action = "scan";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "scan"+Date.now();
                    

                    data.callback  = resolve; 
                    send2Parent(data);
                }else{
                   action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        getAuth : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({},options,true);
                var data ={};
                data.action = "auth";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "auth"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                	if(document.location.host.includes("file://")||document.location.host.includes("http://localhost")){
                		resolve(win.user?win.user.hasLogin():null);
                	}else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
                }
           }); 
        },
        Share : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({title:document.title,content:"..."},options,true);
                var data ={};
                data.action = "share";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "share"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        openLink : function(options){
            return this.openURL(options);
        },
        openURL : function(options){
               
           return new Promise(function(resolve, reject){
                 options = $.extend({title:document.title,url:document.location.href},options,true);
                var data ={};
                data.action = "openurl";
                if(isiframe()){
                   
                    data._authcode = options; 
                    data.id = "openurl"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        printHTML : function(options){
               
           return new Promise(function(resolve, reject){
                options = typeof options=="string"?{html:options}:options;
                 options = $.extend({html:""},options,true);
                
                var data ={};
                data.action = "print";
                data._authcode = options; 
                
                if(isiframe()){ 
                    data.id = "print"+Date.now();
                    

                    data.callback  = function(e){
                        resolve(e);
                    };

                    send2Parent(data);
                }else{
                    action(data,function(res){
                        resolve(res.response);
                    });
                }
           }); 
        },
        Picker : {
            HTML2PDF : function(html,open){
                return new Promise(function(resolve, reject){
                     options = {html:html,open:open!==undefined?open:1};
                    var data =$.extend({},options,true);
                    data.action = "HTML2PDF";
                  
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "HTML2PDF"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            images : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "images"; 

                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            imagesvideos : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({many:10},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "imagesvideos";
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            },
            files : function(options){
                return new Promise(function(resolve, reject){
                     options = $.extend({type:"files"},options,true);
                    var data =$.extend({},options,true);
                    data.action = "pickerdoc";
                    data.type = "files";
                    if(isiframe()){
                       
                        data._authcode = options; 
                        data.id = "pickerdoc"+Date.now();
                        

                        data.callback  = function(e){
                            resolve(e);
                        };

                        send2Parent(data);
                    }else{
                        action(data,function(res){
                            resolve(res.response);
                        });
                    }
               }); 
            }
        },
        open : function(data){
            if(win.openWindow){
                return win.openWindow(data);
            }else{
                return win.open(typeof data=='string'?data:data.url);
            } 
        },
        goBack:(function(){
            (function(history){
                var pushState = history.pushState;
                history.pushState = function(state) {
                    if (typeof history.onpushstate == "function") {
                        history.onpushstate({state: state});
                    }
                    // ... whatever else you want to do
                    // maybe call onhashchange e.handler
                    return pushState.apply(history, arguments);
                };
                var rs = history.replaceState; 
              history.replaceState = function(){
                rs.apply(history, arguments); // preserve normal functionality
                console.log("navigating", arguments); // do something extra here; raise an event
              };
                win.addEventListener('popstate', function(event) {
                  // event.state saves the data in the history
                  console.log('History state change:', event.state);
                });
            })(win.history);
            return function(){
                if(win.hideAll){
                    win.hideAll();
                }else if($(".modal").length){
                    $(".modal").last().modal('hide');
                } 
                
            };
        })()
    };
    win.goBack = win.goBack||AppCode.goBack;
})(window);
(function(win){
    win.showLoader = win.showLoader||function(s){
    $.blockUI({message:s||"ang x l..."});

    setTimeout($.unblockUI, 5000); 
};
win.hideLoader = win.hideLoader||function(){
    $.unblockUI();
};

  var old_alert= win.alert;
    win.alert = function(s){
      if(win.toastr){
        toastr.Center(s,"Thng bo","info");
      }else if(win.swal){
        swal.fire(s);
      }else if(win.bootbox){
        bootbox.alert({
            onEscape:true,
            title:"Thng bo",
            className:"bootbox-alert",
            message: s, 
            callback: f
        });
      }else{
        old_alert(s);
      }
   };

   var old_confirm= win.confirm;
   win.confirm = function(s,f,options){
      if(win.bootbox){
        options=  $.extend({onEscape:true},options,true);
        var dialog=bootbox.confirm({
            className:"bootbox-confirm",
            message: s,
            onEscape:true,
            buttons: {
                confirm: {
                    label: options.titleYes||'Xc nhn',
                    className: 'btn-success'
                }
            },
            callback: f
        });
        return new Promise(function(a,b){
            a(dialog);
        });
      }else{
         old_confirm(s,f);
      }
   };
   var old_prompt= win.prompt;
   win.prompt = function(s,v,f,options){
      if(win.bootbox){
        options=  $.extend({},options,true);
        f = typeof v=="function"?v:f;

        bootbox.prompt({
            onEscape:true,
            value:typeof v!="function"?v:"",
            defaultValue:typeof v!="function"?v:"",
            className:"bootbox-prompt",
            title: s, 
            centerVertical: true,
            callback: f
        });
      }else{
        var n= old_prompt(s,v);
        if(f)f(f);
      }
   };


setTimeout(function(){
    if(!win.Toast){
      win.Toast ={};
      win.Toast.Center = function(s){
        alert(s);
      };

      win.Toast.Top = function(s){
        alert(s);
      };
      win.Toast.Bottom = function(s){
        alert(s);
      };
   }
},10*1000);
   

win.alertDialog = function(title, message, f) {
    var opts = null;
    if(typeof title=="object"){
       opts =  title;
       opts.className = "modal-flex alertDialog "+(opts.className||"");
       f = opts.callback||function(){};
    }else{
        var str = message || "...";

        opts = {

            icon: null,

            title: title || 'Title',
            textYes :"Xc nhn",
            textNo :"B qua",
            
            message:str,
            size: 'large',

            className: "modal-flex"

        };
    }
    
    

    if (!opts.buttons && opts.nobutton!=1) {



        opts.buttons = {

            cancel: {

                label: opts.textNo||"B qua",

                className: 'btn-danger',

                callback: function() {

                    if (f)f(dialog, 0);

                }

            },

            noClose: {

                label: opts.textYes||"Cp nht",

                className: 'btn-info',

                callback: function() {

                    if (f)f(dialog, 1);
                    return false;
                }

            }

        };

    }

    if(win.Handlebars){
        opts.message = win.Handlebars.compile(opts.message)(opts.bindData||{});
    }

    opts.onEscape= true;

    var dialog = bootbox.dialog(opts);

     
    return new Promise(function(a,b){
        if(dialog.find(".msg").length==0){
            dialog.find(".bootbox-body").append(`<div class="msg"></div>`);
        }
        a(dialog);
    });
};
win.alertDialog.tools= function(options) {

    return $.extend({
                $:null,
        close: function(){
            this.$.modal("hide");
            return this;
        },
        stop : function(s){
            this.$.closest(".bootbox-body").html(s);
            this.$.find(".modal-footer").hide();
            this.$.find(".loadingblock").remove();
            return this;
        },
        hide : function(s){
            this.$.find(".msg").html("");
            this.$.find(".loadingblock").remove();
            return this;
        },
        empty : function(s,icon){
            s=s||'';
            icon = icon||"https://cdn-icons-png.flaticon.com/128/14005/14005478.png";
            icon = icon.includes("https")?`<img width=125 height=125 src="${icon}" />`:icon;
            return this.stop(`<div class="alert-empty">${icon}${s}</div>`);
        },
        loading : function(s,icon,timer){
            s=s||'ang x l...'; 
            icon = icon||`<i class="fa fa-spinner" aria-hidden="true"></i>`;
            icon = icon.includes("https")?`<img width=12 height=12 src="${icon}" />`:icon;
            var a  = $(`<div class="alert-info loadingblock">${icon}${s}</div>`);
            this.$.closest(".bootbox-body").append(a);
            if(timer){
                setTimeout(function(){
                    a.remove();
                },timer*1000);
            }
            return a;
        },
        info : function(s){
            s = typeof s=="object"?(s.error||s.message):s;
            this.$.find(".msg").html(`<div class="alert-info">${s}</div>`);
            return this;
        },
        success : function(s){
            s = typeof s=="object"?(s.message):s;
            this.$.find(".msg").html(`<div class="alert-success">${s}</div>`);
            return this;
        },
        error : function(s){
            s = typeof s=="object"?(s.error||s.message):s;
            this.$.find(".msg").html(`<div class="alert-warning">${s}</div>`);
            return this;
        },
        alert : function(s){
            s = typeof s =="object"?s:{error:s};
            alert(s.message||s.error);
            return this;
        },
        disabled : function(a){
            if(a){
                this.$.find("button,.btn").attr(`disabled`,"disabled");
            }else{
                this.$.find("button,.btn").removeAttr(`disabled`);
            }
            return this;
        }
    },options,true);

};
})(window);
(function($) {
    //https://www.jqueryscript.net/demo/digital-signatures-signpad/
    var load = 0;
    $.fn.SignPad = function(options) {
        // Default options
        const settings = $.extend({
            width       : 400,
            height      : 200,
            lineColor   : '#0000FF',
            lineWidth   : 2,
            userId      : null,
            canvasId    : 'signature-pad',
            onSave      : function (){},
            styles      : {
                clearBtn: "btn",
                undoBtn : "btn",
                saveBtn : ""
            },
            language      : {
                clearBtn: "Clear",
                undoBtn : "Undo",
                saveBtn : "Save"
            },
            title:"Sign Here"
        }, options);

        if(load==0){
            load =1;
            $('body').append(`<style>
            .signature-container {
    background-color: #fafaf7;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    margin-top:40px;
}
.signature-container canvas {
    border: 2px solid #32CD32;
    border-radius: 5px;
}
.signature-container .buttons {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    gap: 10px;
}
.signature-container .span,.signature-container button{
    width: auto;
    cursor:pointer;
}
            </style>`);
        }

        let undoStack = [];

        // Create canvas and buttons dynamically
        this.html(`
            <div class="signature-container">
                <h2 style="text-align: center;" class="text-dark">${settings.title}</h2>
                <canvas id="${settings.canvasId}" width="${settings.width}" height="${settings.height}"></canvas>
                <div class="buttons">
                    <span class="${settings.styles.clearBtn}" id="clear">${settings.language.clearBtn}</span>
                    <span class="${settings.styles.undoBtn}" id="undo">${settings.language.undoBtn}</span>
                    <span class="${settings.styles.saveBtn}" id="save">${settings.language.saveBtn}</span>
                </div>
            </div>
        `);

        const canvas = this.find('canvas')[0];
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0, lastY = 0;

        // Set canvas drawing properties
        ctx.strokeStyle = settings.lineColor;
        ctx.lineWidth = settings.lineWidth;
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';

        // Start drawing
        function startDrawing(event) {
            isDrawing = true;
            const { x, y } = getMousePosition(event);
            lastX = x;
            lastY = y;
            ctx.beginPath();
            ctx.moveTo(x, y);

            // Save current canvas state for undo
            undoStack.push(canvas.toDataURL());
        }

        // Draw
        function draw(event) {
            if (!isDrawing) return;
            const { x, y } = getMousePosition(event);
            ctx.lineTo(x, y);
            ctx.stroke();
            lastX = x;
            lastY = y;
        }

        // Stop drawing
        function stopDrawing() {
            isDrawing = false;
            ctx.closePath();
        }

        // Get mouse position
        function getMousePosition(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX ? event.clientX - rect.left : event.touches[0].clientX - rect.left;
            const y = event.clientY ? event.clientY - rect.top : event.touches[0].clientY - rect.top;
            return { x, y };
        }

        // Undo functionality
        $('#undo').click(() => {
            if (undoStack.length > 0) {
                const lastState = undoStack.pop();
                const img = new Image();
                img.src = lastState;
                img.onload = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                };
            }
        });

        // Clear functionality
        $('#clear').click(() => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });

        // Save functionality
        $('#save').click(() => {
            const dataURL = canvas.toDataURL('image/png');
            const currentTime = new Date().toLocaleString();

            // Save the data, including date and user information
            const postData = {
                userId: settings.userId,
                signature: dataURL,
                timestamp: currentTime,
            };

            settings.onSave(postData);

            // Example POST request
            fetch('/save-signature', {
                method: 'POST',
                body: JSON.stringify(postData),
                headers: { 'Content-Type': 'application/json' }
            })
            .then(response => response.json())
            .then(data => console.log('Success:', data))
            .catch(error => console.error('Error:', error));
        });

        // Drawing event listeners
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('touchstart', startDrawing, { passive: false });
        canvas.addEventListener('touchmove', draw, { passive: false });
        canvas.addEventListener('touchend', stopDrawing);

        return this;
    };
    var load =0;
    $.SignPadPopup  =function(options){
        var methods = alertDialog.tools();
        options={
          title:"Your signature", 
        };
        options.on=$.extend({
            init:function(){},
            show:function(){},
            hide:function(){}
        },options.on,true);

            var str=`
            
               
              <div id="signpad"></div>
              <div class="msg"></div>
`;
           
            

            var settings={ 
                nobutton:1,
                className:" ",
                title : options.title,
                message :str,
                callback : function(dialog,ok){

                    methods.close();  
                }
            };
           alertDialog(settings).then(function(dialog){
               methods.$ = dialog;
                 
               options.on.init(dialog);
               options.on.show(dialog);

                   dialog.find('#signpad').SignPad({
                    title:"K vo khung bn di",
                    width   : 1300,
                    height  : 600,
                    userId  : 123,
                    canvasId: 'signature-pad-canvas',
                    styles  : {
                        clearBtn    : "btn btn-danger btn-lg",
                        undoBtn     : "btn btn-info btn-lg",
                        saveBtn     : "btn btn-success btn-lg"
                    },
                    onSave  : function (postData){
                        console.log("Signature saved with data:", postData);
                        if(options.callback)options.callback(postData);
                    }
                });
          });
    };

}(jQuery));
      
           